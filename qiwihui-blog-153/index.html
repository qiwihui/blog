<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> SVG NFT å…¨é¢å®è·µ â”€â”€ scaffold-eth loogies-svg-nft é¡¹ç›®å®Œæ•´æŒ‡å— Â· QIWIHUI</title><meta name="description" content="SVG NFT å…¨é¢å®è·µ â”€â”€ scaffold-eth loogies-svg-nft é¡¹ç›®å®Œæ•´æŒ‡å— - qiwihui"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/css/nella.css"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.12/css/all.css" integrity="sha384-G0fIWCsCzJIMAVNQPfjH08cyYaUtMwjJwqiRKxxE/rx96Uroj1BtIQ6MLJuheaO9" crossorigin="anonymous"><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle = window.adsbygoogle || []).push({
google_ad_client: "ca-pub-8935595858652656",
enable_page_level_ads: true
});
</script><link rel="search" type="application/opensearchdescription+xml" href="https://qiwihui.com/atom.xml" title="QIWIHUI"><meta property="og:site_name" content="QIWIHUI"><meta property="og:url" content="https://qiwihui.com/qiwihui-blog-153/index.html"><meta property="og:title" content="SVG NFT å…¨é¢å®è·µ â”€â”€ scaffold-eth loogies-svg-nft é¡¹ç›®å®Œæ•´æŒ‡å—"><meta property="og:description" content="SVG NFT å…¨é¢å®è·µ â”€â”€ scaffold-eth loogies-svg-nft é¡¹ç›®å®Œæ•´æŒ‡å—"><meta property="og:type" content="article"><script src="//code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script><meta name="generator" content="Hexo 4.2.1"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/images/avatar.jpg" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="/about/" target="_self" class="nav-list-link">ABOUT</a></li><li class="nav-list-item"><a href="/search/" target="_self" class="nav-list-link">SEARCH</a></li><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">HOME</a></li><li class="nav-list-item"><a href="/projects/" target="_self" class="nav-list-link">PROJECTS</a></li><li class="nav-list-item"><a href="/tags/" target="_self" class="nav-list-link">TAGS</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li><li class="nav-list-item"><a href="/links/" target="_self" class="nav-list-link">LINKS</a></li><!--li.nav-list-item--><!--    a.nav-list-link(class="search" href=url_for("search") target="_self") SEARCH--></ul></header><main class="container"></main><div class="post"><article class="post-block"><h1 class="post-title">SVG NFT å…¨é¢å®è·µ â”€â”€ scaffold-eth loogies-svg-nft é¡¹ç›®å®Œæ•´æŒ‡å—</h1><div class="post-info">May 15, 2024<span class="categories"><i class="fa fa-bookmark" aria-hidden="true"></i></span><a href="/categories/%E6%8A%80%E6%9C%AF/" class="post-category">#æŠ€æœ¯</a><span>30 min. read</span></div><div class="post-content"><p>æ³¨ï¼šè¿™ç¯‡æ–‡ç« æ˜¯æˆ‘æŠ•ç¨¿äºâ€œæå¤§ç‹—Leeduckgoâ€å…¬ä¼—å·çš„æ–‡ç« ï¼ŒåŸæ–‡åœ°å€ï¼š<a href="https://mp.weixin.qq.com/s/WvTFk3E6FjfHtXfp2uHkrw" target="_blank" rel="noopener">SVG NFT å…¨é¢å®è·µ | Web3.0 dApp å¼€å‘ï¼ˆå…­ï¼‰</a>ã€‚</p>
<hr>
<p>loogies-svg-nft æ˜¯ scaffold-eth æä¾›çš„ä¸€ä¸ªç®€å•çš„ NFT é“¸é€ å’Œå±•ç¤ºçš„é¡¹ç›®ï¼Œåœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†å¸¦é¢†å¤§å®¶ä¸€æ­¥æ­¥åˆ†æå’Œå®ç°è¿™ä¸ªé¡¹ç›®ã€‚</p>
<p>ç”±äºé¡¹ç›®çš„ <code>loogies-svg-nft</code> åˆ†æ”¯ä¸ <code>master</code> åˆ†æ”¯åœ¨ç»„ä»¶åº“å’Œä¸»é¡µä¸Šæœ‰ä¸€äº›å˜åŒ–ï¼Œæ•…å…ˆå°† <code>master</code> åˆ†æ”¯ä»£ç ä¸ <code>loogies-svg-nft</code> åˆ†æ”¯è¿›è¡Œäº†åˆå¹¶ï¼Œè§£å†³å†²çªï¼Œå¾—åˆ°ä¸€ä»½åŸºæ–°ç»„ä»¶åº“çš„å…¨æ–°çš„ä»£ç ã€‚å¯ä»¥å‚è€ƒé¡¹ç›®åœ°å€ï¼š <a href="https://github.com/qiwihui/scaffold-eth.git" target="_blank" rel="noopener">https://github.com/qiwihui/scaffold-eth.git</a> çš„ <code>loogies-svg-nft</code> åˆ†æ”¯ã€‚æœ¬æ–‡ä»¥ä¸‹å†…å®¹å°†åŸºäºè¿™äº›ä»£ç è¿›è¡Œéƒ¨ç½²å’Œåˆ†æã€‚</p>
<a id="more"></a>
<h2><span id="ben-di-yun-xing-he-ce-shi">æœ¬åœ°è¿è¡Œå’Œæµ‹è¯•</span></h2>
<p>é¦–å…ˆæˆ‘ä»¬å…ˆè¿è¡Œé¡¹ç›®æŸ¥çœ‹æˆ‘ä»¬å°†è¦åˆ†æå®ç°çš„åŠŸèƒ½ã€‚</p>
<h3><span id="ben-di-yun-xing">æœ¬åœ°è¿è¡Œ</span></h3>
<p>é¦–å…ˆæˆ‘ä»¬åœ¨æœ¬åœ°è¿è¡Œé¡¹ç›®ï¼š</p>
<p>clone é¡¹ç›®å¹¶åˆ‡æ¢åˆ° <code>loogies-svg-nft</code> åˆ†æ”¯ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/qiwihui/scaffold-eth.git loogies-svg-nft</span><br><span class="line"><span class="built_in">cd</span> loogies-svg-nft</span><br><span class="line">git checkout loogies-svg-nft</span><br></pre></td></tr></table></figure>
<p>å®‰è£…ä¾èµ–åŒ…</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yarn install</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œå‰ç«¯</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yarn start</span><br></pre></td></tr></table></figure>
<p>åœ¨ç¬¬äºŒä¸ªç»ˆç«¯çª—å£ä¸­ï¼Œè¿è¡Œæœ¬åœ°æµ‹è¯•é“¾</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yarn chain</span><br></pre></td></tr></table></figure>
<p><img src="https://user-images.githubusercontent.com/3297411/153822009-3154003e-6433-4a29-a511-b33b5f37a99a.png" alt="yarn-chain"></p>
<p>åœ¨ç¬¬ä¸‰ä¸ªç»ˆç«¯çª—å£ä¸­ï¼Œè¿è¡Œéƒ¨ç½²åˆçº¦</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yarn deploy</span><br></pre></td></tr></table></figure>
<p><img src="https://user-images.githubusercontent.com/3297411/153822065-4c4a0ffa-95e3-4e16-8272-ace2f102625b.png" alt="yarn-deploy"></p>
<p>æ­¤æ—¶åœ¨æµè§ˆå™¨ä¸­è®¿é—® <a href="http://localhost:3000/" target="_blank" rel="noopener"><code>http://localhost:3000</code></a> ï¼Œå°±å¯ä»¥çœ‹åˆ°ç¨‹åºäº†ã€‚</p>
<p><img src="https://user-images.githubusercontent.com/3297411/153822123-f6f7e3b0-ac6e-4625-a0bd-9bc4170d6aeb.png" alt="yarn-start"></p>
<h3><span id="ben-di-ce-shi">æœ¬åœ°æµ‹è¯•</span></h3>
<ol>
<li>
<p>é¦–å…ˆåœ¨ MetaMask é’±åŒ…ä¸­æ·»åŠ æœ¬åœ°ç½‘ç»œï¼Œå¹¶åˆ‡æ¢åˆ°æœ¬åœ°ç½‘ç»œï¼›</p>
<ul>
<li>ç½‘ç»œåç§°ï¼š <code>Localhost 8545</code></li>
<li>æ–°å¢ RPC URLï¼š <code>http://localhost:8545</code></li>
<li>é“¾ IDï¼š <code>31337</code></li>
<li>Currency Symbolï¼š <code>ETH</code></li>
</ul>
</li>
<li>
<p>åˆ›å»ºä¸€ä¸ªæ–°çš„æœ¬åœ°é’±åŒ…è´¦å·ï¼›</p>
</li>
<li>
<p>å¤åˆ¶é’±åŒ…åœ°å€ï¼Œåœ¨é¡µé¢å·¦ä¸‹è§’ç»™è¿™ä¸ªåœ°å€å‘é€ä¸€äº›æµ‹è¯• ETHï¼›</p>
</li>
<li>
<p>ç‚¹å‡»åœ¨é¡µé¢å³ä¸Šè§’ <code>connect</code> è¿æ¥é’±åŒ…ï¼›</p>
</li>
<li>
<p>ç‚¹å‡» Mint é“¸é€ ï¼›</p>
</li>
<li>
<p>å½“äº¤æ˜“æˆåŠŸåï¼Œå¯ä»¥çœ‹åˆ°æ–°é“¸é€ çš„ NFTï¼›</p>
<p><img src="https://user-images.githubusercontent.com/3297411/153822198-6442f4d1-fa49-43e1-bb7c-eacc1b1d082d.png" alt="nft-display"></p>
</li>
</ol>
<p>ä¸‹é¢ï¼Œæˆ‘ä»¬å¼€å§‹å¯¹é¡¹ç›®åˆçº¦è¿›è¡Œåˆ†æã€‚</p>
<h2><span id="loogies-he-yue-fen-xi">Loogies åˆçº¦åˆ†æ</span></h2>
<h3><span id="nft-yu-erc721">NFT ä¸ ERC721</span></h3>
<p><strong>NFT</strong>ï¼Œå…¨ç§°ä¸ºNon-Fungible Tokenï¼ŒæŒ‡éåŒè´¨åŒ–ä»£å¸ï¼Œå¯¹åº”äºä»¥å¤ªåŠä¸Š ERC-721 æ ‡å‡†ã€‚ ä¸€èˆ¬åœ¨æ™ºèƒ½åˆçº¦ä¸­ï¼ŒNFT çš„å®šä¹‰åŒ…å« <code>tokenId</code> å’Œ <code>tokenURI</code> ï¼Œæ¯ä¸€ä¸ª NFT çš„ <code>tokenId</code> æ˜¯å”¯ä¸€çš„ï¼Œ <code>tokenURI</code> å¯¹äºä¿å­˜äº†NFTçš„å…ƒæ•°æ®ï¼Œå¯ä»¥æ˜¯å›¾åƒURLã€æè¿°ã€å±æ€§ç­‰ã€‚å¦‚æœä¸€ä¸ª NFT æƒ³åœ¨ NFT å¸‚åœºä¸Šè¿›è¡Œå±•ç¤ºå’Œé”€å”®ï¼Œåˆ™ <code>tokenURI</code> å†…å®¹éœ€è¦å¯¹åº”ç¬¦åˆ NFT å¸‚åœºçš„æ ‡å‡†ï¼Œæ¯”å¦‚ï¼Œåœ¨ NFT å¸‚åœº OpenSea <a href="https://docs.opensea.io/docs/metadata-standards" target="_blank" rel="noopener">å…ƒæ•°æ®æ ‡å‡†</a>ä¸­ï¼Œå°±æŒ‡å‡ºäº† NFT å±•ç¤ºéœ€è¦è®¾ç½®çš„å±æ€§ã€‚</p>
<p><img src="https://user-images.githubusercontent.com/3297411/153822292-ac9fa169-199b-49cb-b8bd-4ec3e680842c.png" alt="OpenSea ä¸­ NFT å…ƒæ•°æ®ä¸å±•ç¤ºå¯¹åº”å…³ç³»"></p>
<p>OpenSea ä¸­ NFT å…ƒæ•°æ®ä¸å±•ç¤ºå¯¹åº”å…³ç³»</p>
<h3><span id="he-yue-gai-lan">åˆçº¦æ¦‚è§ˆ</span></h3>
<p><a href="https://github.com/scaffold-eth/scaffold-eth/tree/loogies-svg-nft" target="_blank" rel="noopener">loogies-svg-nft é¡¹ç›®</a>çš„åˆçº¦æ–‡ä»¶åœ¨ <code>packages/hardhat/contracts/</code> è·¯å¾„ä¸‹ï¼ŒåŒ…å«ä»¥ä¸‹ä¸‰ä¸ªæ–‡ä»¶ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">packages/hardhat/contracts/</span><br><span class="line">â”œâ”€â”€ HexStrings.sol</span><br><span class="line">â”œâ”€â”€ ToColor.sol</span><br><span class="line">â””â”€â”€ YourCollectible.sol</span><br></pre></td></tr></table></figure>
<ul>
<li><code>HexString.sol</code> ï¼šç”Ÿæˆåœ°å€å­—ç¬¦ä¸²ï¼›</li>
<li><code>ToColor.sol</code>ï¼šç”Ÿæˆé¢œè‰²ç¼–ç å­—ç¬¦ä¸²ï¼›</li>
<li><code>YourCollectible.sol</code>ï¼š <code>Loogies</code> NFTçš„åˆçº¦æ–‡ä»¶ï¼Œä¸»è¦åŠŸèƒ½æ¶‰åŠåˆçº¦é“¸é€ å’Œå…ƒæ•°æ®ç”Ÿæˆã€‚</li>
</ul>
<p>åˆçº¦çš„ä¸»è¦ç»“æ„å’Œæ–¹æ³•ä¸ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">contract YourCollectible is ERC721, Ownable &#123;</span><br><span class="line"></span><br><span class="line">	// æ„é€ å‡½æ•°</span><br><span class="line">  constructor() public ERC721(&quot;Loogies&quot;, &quot;LOOG&quot;) &#123;</span><br><span class="line">  &#125;</span><br><span class="line">  // é“¸é€  NFT</span><br><span class="line">  function mintItem()</span><br><span class="line">      public</span><br><span class="line">      returns (uint256)</span><br><span class="line">  &#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line">	// è·å– tokenId å¯¹åº” tokeURI</span><br><span class="line">  function tokenURI(uint256 id) public view override returns (string memory) &#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line">	// ç”Ÿæˆ tokenId å¯¹åº” svg ä»£ç </span><br><span class="line">  function generateSVGofTokenById(uint256 id) internal view returns (string memory) &#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">	// ç”Ÿæˆ tokenId å¯¹åº” svg ä»£ç ï¼Œä¸»è¦ç”¨äºç»˜åˆ¶å›¾åƒ</span><br><span class="line">  function renderTokenById(uint256 id) public view returns (string memory) &#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3><span id="gou-zao-han-shu">æ„é€ å‡½æ•°</span></h3>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">constructor() public ERC721(&quot;Loogies&quot;, &quot;LOOG&quot;) &#123;</span><br><span class="line">    // RELEASE THE LOOGIES!</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>ä»£å¸ç¬¦å·ï¼š <code>Loogies</code></p>
<p>ä»£å¸åç§°ï¼š <code>LOOG</code></p>
<p>åˆçº¦ç»§æ‰¿è‡ª OpenZeppelin çš„ <code>ERC721.sol</code>ï¼Œè¿™æ˜¯ OpenZeppelin æä¾›çš„åŸºæœ¬åˆçº¦ä»£ç ï¼Œå¯ä»¥æ–¹ä¾¿å¼€å‘è€…ä½¿ç”¨ã€‚</p>
<h3><span id="ying-yong-ku-han-shu">åº”ç”¨åº“å‡½æ•°</span></h3>
<p>åˆçº¦ä¸­åˆ†åˆ«å¯¹ <code>uint256</code>ï¼Œ <code>uint160</code> å’Œ <code>bytes3</code> ç­‰åº”ç”¨äº†ä¸åŒåº“å‡½æ•°ï¼Œæ‰©å±•å¯¹åº”åŠŸèƒ½ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">// ä½¿ uint256 å…·æœ‰ toHexString åŠŸèƒ½</span><br><span class="line">using Strings for uint256;</span><br><span class="line">// ä½¿ uint160 å…·æœ‰è‡ªå®šä¹‰ toHexString åŠŸèƒ½</span><br><span class="line">using HexStrings for uint160;</span><br><span class="line">// ä½¿ bytes3 å¯ä»¥æ–¹ä¾¿ç”Ÿæˆå‰ç«¯é¢œè‰²è¡¨ç¤º</span><br><span class="line">using ToColor for bytes3;</span><br><span class="line">// è®¡æ•°åŠŸèƒ½</span><br><span class="line">using Counters for Counters.Counter;</span><br></pre></td></tr></table></figure>
<h3><span id="mint-qi-xian">Mint æœŸé™</span></h3>
<p>ä»¥ä¸‹ä»£ç æ˜¯ Mint æ—¶é—´é™åˆ¶ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">uint256 mintDeadline = block.timestamp + 24 hours;</span><br><span class="line"></span><br><span class="line">function mintItem()</span><br><span class="line">      public</span><br><span class="line">      returns (uint256)</span><br><span class="line">  &#123;</span><br><span class="line">      require( block.timestamp &lt; mintDeadline, &quot;DONE MINTING&quot;);</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>åˆçº¦åœ¨éƒ¨ç½²ä¹‹åçš„24å°æ—¶å†…å¯ä»¥é“¸é€ ï¼Œè¶…è¿‡24å°æ—¶åˆ™ä¼šå¼•å‘å¼‚å¸¸ã€‚è¿™ä¸ªæœºåˆ¶ç±»ä¼¼äºé¢„å”®ï¼Œç”±äºè¿™ä¸ªåˆçº¦æ¯”è¾ƒç®€å•ï¼Œæ‰€ä»¥æ²¡æœ‰ä½¿ç”¨ç™½åå•æœºåˆ¶ï¼Œä¸€èˆ¬åœ¨å®é™…æƒ…å†µï¼Œä¼šä½¿ç”¨é¢„å”®å’Œç™½åå•çš„æ–¹å¼æ¥æ§åˆ¶ NFT çš„å‘è¡Œã€‚</p>
<h3><span id="mint-zhu-zao">Mint é“¸é€ </span></h3>
<p>é“¸é€  NFT å…¶å®å°±æ˜¯åœ¨åˆçº¦ä¸­è®¾ç½®ä¸¤ä¸ªä¿¡æ¯ï¼š</p>
<ul>
<li><code>tokenId</code> åŠå…¶ <code>owner</code></li>
<li><code>tokenId</code> åŠå…¶ <code>tokenURI</code></li>
</ul>
<p>æˆ‘ä»¬é¦–å…ˆçœ‹é“¸é€ å‡½æ•° <code>mintItem</code>ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">// ç”¨äºä¿å­˜æ¯ä¸€ä¸ªé“¸é€ çš„ Loogies çš„ç‰¹å¾ï¼Œå…¶ä¸­ï¼Œcolor è¡¨ç¤ºé¢œè‰²ï¼Œchubbiness è¡¨ç¤ºèƒ–ç˜¦</span><br><span class="line">mapping (uint256 =&gt; bytes3) public color;</span><br><span class="line">mapping (uint256 =&gt; uint256) public chubbiness;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">function mintItem()</span><br><span class="line">      public</span><br><span class="line">      returns (uint256)</span><br><span class="line">  &#123;</span><br><span class="line">      require( block.timestamp &lt; mintDeadline, &quot;DONE MINTING&quot;);</span><br><span class="line">			// æ¯æ¬¡é“¸é€ å‰è‡ªå¢ _tokenIdsï¼Œç¡®ä¿ _tokenIds å”¯ä¸€</span><br><span class="line">      _tokenIds.increment();</span><br><span class="line"></span><br><span class="line">      uint256 id = _tokenIds.current();</span><br><span class="line">			// é“¸é€ è€…ä¸ tokenId ç»‘å®š</span><br><span class="line">      _mint(msg.sender, id);</span><br><span class="line">			// éšæœºç”Ÿæˆå¯¹åº” tokenId çš„å±æ€§</span><br><span class="line">      bytes32 predictableRandom = keccak256(abi.encodePacked( blockhash(block.number-1), msg.sender, address(this), id ));</span><br><span class="line">      color[id] = bytes2(predictableRandom[0]) | ( bytes2(predictableRandom[1]) &gt;&gt; 8 ) | ( bytes3(predictableRandom[2]) &gt;&gt; 16 );</span><br><span class="line">      chubbiness[id] = 35+((55*uint256(uint8(predictableRandom[3])))/255);</span><br><span class="line"></span><br><span class="line">      return id;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­ï¼š</p>
<ul>
<li><code>tokenId</code> åœ¨æ¯æ¬¡é“¸é€ æ—¶ä¼šè‡ªå¢ï¼Œç¡®ä¿ <code>tokenId</code> å”¯ä¸€ï¼›</li>
<li><code>_mint</code> å‡½æ•°ç»‘å®š <code>tokenId</code> åŠå…¶ <code>owner</code>ï¼›</li>
<li>æ¯ä¸€ä¸ª <code>tokenId</code> å¯¹åº”çš„å±æ€§é€šè¿‡éšæœºæ–¹å¼ç”Ÿæˆï¼Œå…·ä½“ä¸ºï¼š
<ul>
<li>é€šè¿‡å‰ä¸€ä¸ªåŒºå—çš„å“ˆå¸Œï¼ˆ <code>blockhash(block.number-1)</code> ï¼‰ï¼Œå½“å‰é“¸é€ è´¦æˆ·ï¼ˆ <code>msg.sender</code>ï¼‰ï¼Œåˆçº¦åœ°å€ï¼ˆ <code>address(this)</code> ï¼‰å’Œ <code>tokenId</code> ç”Ÿæˆå“ˆå¸Œ <code>predictableRandom</code>ï¼›</li>
<li>è®¡ç®— NFT é¢œè‰²ï¼šæŒ‰ä½æˆ– <code>predictableRandom</code> å‰ä¸‰ä½å¾—åˆ°é¢œè‰²ï¼Œé¢œè‰²è¡¨ç¤ºç”¨ bytes3 è¡¨ç¤ºï¼Œå…¶ä¸­ <code>bytes2(predictableRandom[0])</code> å¯¹åº”æœ€ä½ä½è“è‰²æ•°å€¼ï¼Œ <code>( bytes2(predictableRandom[1]) &gt;&gt; 8 )</code>å¯¹åº”ä¸­é—´ä½ç»¿è‰²æ•°å€¼ï¼Œ <code>( bytes3(predictableRandom[2]) &gt;&gt; 16 )</code> å¯¹åº”æœ€é«˜ä½çº¢è‰²æ•°å€¼ï¼›</li>
<li>è®¡ç®— NFT èƒ–ç˜¦ï¼š <code>35+((55*uint256(uint8(predictableRandom[3])))/255);</code> ï¼Œ<code>uint8(predictableRandom[3])</code>ä»‹äº0~255ï¼Œæ•…æœ€å°å€¼ä¸º35ï¼Œæœ€å¤§å€¼ä¸º 35+55 = 90ï¼›</li>
</ul>
</li>
</ul>
<p>ä¾‹å¦‚ï¼š <code>color</code> ä¸º <code>0x4cc4c1</code> ï¼Œ <code>chubbiness</code> ä¸º 88 æ—¶å¯¹åº”çš„ NFT å›¾ç‰‡ä¸ºï¼š</p>
<p><img src="https://user-images.githubusercontent.com/3297411/153822433-3a1a41a4-f846-45f9-b74e-f699ccba6a81.png" alt="loogies-1"></p>
<h3><span id="tokenuri-han-shu">tokenURI å‡½æ•°</span></h3>
<p>å‡½æ•° <code>tokenURI</code> æ¥å— <code>tokenId</code> å‚æ•°ï¼Œè¿”å›ç¼–ç ä¹‹åçš„å…ƒæ•°æ®å­—ç¬¦ä¸²ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">function tokenURI(uint256 id) public view override returns (string memory) &#123;</span><br><span class="line">			// æ£€æŸ¥ id æ˜¯å¦å­˜åœ¨</span><br><span class="line">      require(_exists(id), &quot;not exist&quot;);</span><br><span class="line">      string memory name = string(abi.encodePacked(&apos;Loogie #&apos;,id.toString()));</span><br><span class="line">      string memory description = string(abi.encodePacked(&apos;This Loogie is the color #&apos;,color[id].toColor(),&apos; with a chubbiness of &apos;,uint2str(chubbiness[id]),&apos;!!!&apos;));</span><br><span class="line">      // ç”Ÿæˆå›¾ç‰‡çš„svg base64 ç¼–ç </span><br><span class="line">			string memory image = Base64.encode(bytes(generateSVGofTokenById(id)));</span><br><span class="line"></span><br><span class="line">      return</span><br><span class="line">          string(</span><br><span class="line">              abi.encodePacked(</span><br><span class="line">                &apos;data:application/json;base64,&apos;,</span><br><span class="line">								// é€šè¿‡ base64 ç¼–ç å…ƒæ•°æ®</span><br><span class="line">                Base64.encode(</span><br><span class="line">                    bytes(</span><br><span class="line">                          abi.encodePacked(</span><br><span class="line">                              &apos;&#123;&quot;name&quot;:&quot;&apos;,</span><br><span class="line">                              name,</span><br><span class="line">                              &apos;&quot;, &quot;description&quot;:&quot;&apos;,</span><br><span class="line">                              description,</span><br><span class="line">                              &apos;&quot;, &quot;external_url&quot;:&quot;https://burnyboys.com/token/&apos;,</span><br><span class="line">                              id.toString(),</span><br><span class="line">                              &apos;&quot;, &quot;attributes&quot;: [&#123;&quot;trait_type&quot;: &quot;color&quot;, &quot;value&quot;: &quot;#&apos;,</span><br><span class="line">                              color[id].toColor(),</span><br><span class="line">                              &apos;&quot;&#125;,&#123;&quot;trait_type&quot;: &quot;chubbiness&quot;, &quot;value&quot;: &apos;,</span><br><span class="line">                              uint2str(chubbiness[id]),</span><br><span class="line">                              &apos;&#125;], &quot;owner&quot;:&quot;&apos;,</span><br><span class="line">                              (uint160(ownerOf(id))).toHexString(20),</span><br><span class="line">                              &apos;&quot;, &quot;image&quot;: &quot;&apos;,</span><br><span class="line">                              &apos;data:image/svg+xml;base64,&apos;,</span><br><span class="line">                              image,</span><br><span class="line">                              &apos;&quot;&#125;&apos;</span><br><span class="line">                          )</span><br><span class="line">                        )</span><br><span class="line">                    )</span><br><span class="line">              )</span><br><span class="line">          );</span><br><span class="line">  &#125;</span><br><span class="line">// ç”Ÿæˆçš„ SVG å­—ç¬¦ä¸²</span><br><span class="line">function generateSVGofTokenById(uint256 id) internal view returns (string memory) &#123;</span><br><span class="line">...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// ç»˜åˆ¶å›¾åƒ</span><br><span class="line">// Visibility is `public` to enable it being called by other contracts for composition.</span><br><span class="line">function renderTokenById(uint256 id) public view returns (string memory) &#123;</span><br><span class="line">...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­ï¼Œ <code>generateSVGofTokenById</code> å‡½æ•°è¿”å› <code>tokenId</code> å¯¹åº”çš„é¢œè‰²å’Œèƒ–ç˜¦å±æ€§ç”Ÿæˆçš„ SVG å­—ç¬¦ä¸²ï¼Œ <code>renderTokenById</code> ç”¨æˆ·ç»˜åˆ¶å›¾åƒã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒNFT å…ƒæ•°æ®ä¸­åŒ…å«çš„å±æ€§æœ‰ï¼š</p>
<ul>
<li>nameï¼šåç§°</li>
<li>descriptionï¼š æè¿°</li>
<li>external_urlï¼šå¤–éƒ¨é“¾æ¥</li>
<li>attributesï¼šå±æ€§
<ul>
<li>color é¢œè‰²</li>
<li>chubbinessï¼šèƒ–ç˜¦</li>
<li>ownerï¼šæ‰€æœ‰è€…ï¼Œä»¥å¤ªåŠåœ°å€16è¿›åˆ¶å½¢å¼</li>
<li>imageï¼šå›¾ç‰‡å¯¹åº” SVG çš„ base64 ç¼–ç </li>
</ul>
</li>
</ul>
<p>è¿™é‡Œï¼Œæˆ‘ä»¬é€šè¿‡å®é™…æ•°æ®äº†è§£ä¸€ä¸‹ä»€ä¹ˆæ˜¯ SVGã€‚<code>tokenId</code> ä¸º 1 æ—¶å¯¹åº”çš„ <code>tokenURI</code> ç»“æœä¸ºï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">data:application/json;base64,eyJuYW1lIjoiTG9vZ2llICMxIiwiZGVzY3JpcHRpb24iOiJUaGlzIExvb2dpZSBpcyB0aGUgY29sb3IgIzRjYzRjMSB3aXRoIGEgY2h1YmJpbmVzcyBvZiA4OCEhISIsImV4dGVybmFsX3VybCI6Imh0dHBzOi8vYnVybnlib3lzLmNvbS90b2tlbi8xIiwiYXR0cmlidXRlcyI6W3sidHJhaXRfdHlwZSI6ImNvbG9yIiwidmFsdWUiOiIjNGNjNGMxIn0seyJ0cmFpdF90eXBlIjoiY2h1YmJpbmVzcyIsInZhbHVlIjo4OH1dLCJvd25lciI6IjB4MTY5ODQxYWEzMDI0Y2ZhNTcwMDI0ZWI3ZGQ2YmY1Zjc3NDA5MjA4OCIsImltYWdlIjoiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQSE4yWnlCM2FXUjBhRDBpTkRBd0lpQm9aV2xuYUhROUlqUXdNQ0lnZUcxc2JuTTlJbWgwZEhBNkx5OTNkM2N1ZHpNdWIzSm5Mekl3TURBdmMzWm5JajQ4WnlCcFpEMGlaWGxsTVNJK1BHVnNiR2x3YzJVZ2MzUnliMnRsTFhkcFpIUm9QU0l6SWlCeWVUMGlNamt1TlNJZ2NuZzlJakk1TGpVaUlHbGtQU0p6ZG1kZk1TSWdZM2s5SWpFMU5DNDFJaUJqZUQwaU1UZ3hMalVpSUhOMGNtOXJaVDBpSXpBd01DSWdabWxzYkQwaUkyWm1aaUl2UGp4bGJHeHBjSE5sSUhKNVBTSXpMalVpSUhKNFBTSXlMalVpSUdsa1BTSnpkbWRmTXlJZ1kzazlJakUxTkM0MUlpQmplRDBpTVRjekxqVWlJSE4wY205clpTMTNhV1IwYUQwaU15SWdjM1J5YjJ0bFBTSWpNREF3SWlCbWFXeHNQU0lqTURBd01EQXdJaTgrUEM5blBqeG5JR2xrUFNKb1pXRmtJajQ4Wld4c2FYQnpaU0JtYVd4c1BTSWpOR05qTkdNeElpQnpkSEp2YTJVdGQybGtkR2c5SWpNaUlHTjRQU0l5TURRdU5TSWdZM2s5SWpJeE1TNDRNREEyTlNJZ2FXUTlJbk4yWjE4MUlpQnllRDBpT0RnaUlISjVQU0kxTVM0NE1EQTJOU0lnYzNSeWIydGxQU0lqTURBd0lpOCtQQzluUGp4bklHbGtQU0psZVdVeUlqNDhaV3hzYVhCelpTQnpkSEp2YTJVdGQybGtkR2c5SWpNaUlISjVQU0l5T1M0MUlpQnllRDBpTWprdU5TSWdhV1E5SW5OMloxOHlJaUJqZVQwaU1UWTRMalVpSUdONFBTSXlNRGt1TlNJZ2MzUnliMnRsUFNJak1EQXdJaUJtYVd4c1BTSWpabVptSWk4K1BHVnNiR2x3YzJVZ2NuazlJak11TlNJZ2NuZzlJak1pSUdsa1BTSnpkbWRmTkNJZ1kzazlJakUyT1M0MUlpQmplRDBpTWpBNElpQnpkSEp2YTJVdGQybGtkR2c5SWpNaUlHWnBiR3c5SWlNd01EQXdNREFpSUhOMGNtOXJaVDBpSXpBd01DSXZQand2Wno0OEwzTjJaejQ9In0=</span><br></pre></td></tr></table></figure>
<p>é€šè¿‡ base64 è§£ç  <code>data:application/json;base64,</code> ä¹‹åçš„å­—ç¬¦ä¸²å¯ä»¥å¾—åˆ°å¦‚ä¸‹ jsonï¼ˆä»¥ä¸‹ json ç»è¿‡äº†æ ¼å¼åŒ–ï¼Œæ–¹ä¾¿é˜…è¯»ï¼‰ï¼š</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"name"</span>: <span class="string">"Loogie #1"</span>,</span><br><span class="line">  <span class="attr">"description"</span>: <span class="string">"This Loogie is the color #4cc4c1 with a chubbiness of 88!!!"</span>,</span><br><span class="line">  <span class="attr">"external_url"</span>: <span class="string">"https://burnyboys.com/token/1"</span>,</span><br><span class="line">  <span class="attr">"attributes"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"trait_type"</span>: <span class="string">"color"</span>,</span><br><span class="line">      <span class="attr">"value"</span>: <span class="string">"#4cc4c1"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"trait_type"</span>: <span class="string">"chubbiness"</span>,</span><br><span class="line">      <span class="attr">"value"</span>: <span class="number">88</span></span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">"owner"</span>: <span class="string">"0x169841aa3024cfa570024eb7dd6bf5f774092088"</span>,</span><br><span class="line">  <span class="attr">"image"</span>: <span class="string">"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBpZD0iZXllMSI+PGVsbGlwc2Ugc3Ryb2tlLXdpZHRoPSIzIiByeT0iMjkuNSIgcng9IjI5LjUiIGlkPSJzdmdfMSIgY3k9IjE1NC41IiBjeD0iMTgxLjUiIHN0cm9rZT0iIzAwMCIgZmlsbD0iI2ZmZiIvPjxlbGxpcHNlIHJ5PSIzLjUiIHJ4PSIyLjUiIGlkPSJzdmdfMyIgY3k9IjE1NC41IiBjeD0iMTczLjUiIHN0cm9rZS13aWR0aD0iMyIgc3Ryb2tlPSIjMDAwIiBmaWxsPSIjMDAwMDAwIi8+PC9nPjxnIGlkPSJoZWFkIj48ZWxsaXBzZSBmaWxsPSIjNGNjNGMxIiBzdHJva2Utd2lkdGg9IjMiIGN4PSIyMDQuNSIgY3k9IjIxMS44MDA2NSIgaWQ9InN2Z181IiByeD0iODgiIHJ5PSI1MS44MDA2NSIgc3Ryb2tlPSIjMDAwIi8+PC9nPjxnIGlkPSJleWUyIj48ZWxsaXBzZSBzdHJva2Utd2lkdGg9IjMiIHJ5PSIyOS41IiByeD0iMjkuNSIgaWQ9InN2Z18yIiBjeT0iMTY4LjUiIGN4PSIyMDkuNSIgc3Ryb2tlPSIjMDAwIiBmaWxsPSIjZmZmIi8+PGVsbGlwc2Ugcnk9IjMuNSIgcng9IjMiIGlkPSJzdmdfNCIgY3k9IjE2OS41IiBjeD0iMjA4IiBzdHJva2Utd2lkdGg9IjMiIGZpbGw9IiMwMDAwMDAiIHN0cm9rZT0iIzAwMCIvPjwvZz48L3N2Zz4="</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å¯¹ <code>image</code> å­—æ®µè¿›è¡Œè§£ç å¹¶æ ¼å¼åŒ–å°±å¾—åˆ°å›¾ç‰‡çš„ SVGï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">svg</span> <span class="attr">xmlns</span>=<span class="string">"http://www.w3.org/2000/svg"</span> <span class="attr">width</span>=<span class="string">"400"</span> <span class="attr">height</span>=<span class="string">"400"</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">g</span> <span class="attr">id</span>=<span class="string">"eye1"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ellipse</span> <span class="attr">stroke-width</span>=<span class="string">"3"</span> <span class="attr">ry</span>=<span class="string">"29.5"</span> <span class="attr">rx</span>=<span class="string">"29.5"</span> <span class="attr">id</span>=<span class="string">"svg_1"</span> <span class="attr">cy</span>=<span class="string">"154.5"</span> <span class="attr">cx</span>=<span class="string">"181.5"</span> <span class="attr">stroke</span>=<span class="string">"#000"</span> <span class="attr">fill</span>=<span class="string">"#fff"</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ellipse</span> <span class="attr">ry</span>=<span class="string">"3.5"</span> <span class="attr">rx</span>=<span class="string">"2.5"</span> <span class="attr">id</span>=<span class="string">"svg_3"</span> <span class="attr">cy</span>=<span class="string">"154.5"</span> <span class="attr">cx</span>=<span class="string">"173.5"</span> <span class="attr">stroke-width</span>=<span class="string">"3"</span> <span class="attr">stroke</span>=<span class="string">"#000"</span> <span class="attr">fill</span>=<span class="string">"#000000"</span> /&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">g</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">g</span> <span class="attr">id</span>=<span class="string">"head"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ellipse</span> <span class="attr">fill</span>=<span class="string">"#4cc4c1"</span> <span class="attr">stroke-width</span>=<span class="string">"3"</span> <span class="attr">cx</span>=<span class="string">"204.5"</span> <span class="attr">cy</span>=<span class="string">"211.80065"</span> <span class="attr">id</span>=<span class="string">"svg_5"</span> <span class="attr">rx</span>=<span class="string">"88"</span> <span class="attr">ry</span>=<span class="string">"51.80065"</span> <span class="attr">stroke</span>=<span class="string">"#000"</span> /&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">g</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">g</span> <span class="attr">id</span>=<span class="string">"eye2"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ellipse</span> <span class="attr">stroke-width</span>=<span class="string">"3"</span> <span class="attr">ry</span>=<span class="string">"29.5"</span> <span class="attr">rx</span>=<span class="string">"29.5"</span> <span class="attr">id</span>=<span class="string">"svg_2"</span> <span class="attr">cy</span>=<span class="string">"168.5"</span> <span class="attr">cx</span>=<span class="string">"209.5"</span> <span class="attr">stroke</span>=<span class="string">"#000"</span> <span class="attr">fill</span>=<span class="string">"#fff"</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ellipse</span> <span class="attr">ry</span>=<span class="string">"3.5"</span> <span class="attr">rx</span>=<span class="string">"3"</span> <span class="attr">id</span>=<span class="string">"svg_4"</span> <span class="attr">cy</span>=<span class="string">"169.5"</span> <span class="attr">cx</span>=<span class="string">"208"</span> <span class="attr">stroke-width</span>=<span class="string">"3"</span> <span class="attr">fill</span>=<span class="string">"#000000"</span> <span class="attr">stroke</span>=<span class="string">"#000"</span> /&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">g</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>SVGæ˜¯ä¸€ç§ç”¨ XML å®šä¹‰çš„è¯­è¨€ï¼Œç”¨æ¥æè¿°äºŒç»´çŸ¢é‡åŠçŸ¢é‡/æ …æ ¼å›¾å½¢ã€‚å®ƒå¯ä»¥ä»»æ„æ”¾å¤§å›¾å½¢æ˜¾ç¤ºï¼Œä¹Ÿä¸ä¼šç‰ºç‰²å›¾åƒè´¨é‡ï¼Œå®ƒå¯ä»¥ä½¿ç”¨ä»£ç è¿›è¡Œæè¿°ï¼Œæ–¹ä¾¿ç¼–è¾‘ï¼Œå› æ­¤è¢«å¹¿æ³›ä½¿ç”¨ã€‚</p>
<p>ä»ä¸Šé¢çš„ä»£ç ç»“åˆä»¥ä¸‹çš„å›¾åƒå¯ä»¥çœ‹å‡ºï¼Œè¿™ä¸ª SVG åŒ…å«å¦‚ä¸‹å†…å®¹ï¼š</p>
<ul>
<li>ç¬¬ä¸€è¡Œä¸º XML å£°æ˜ï¼Œæ ‡æ˜ç‰ˆæœ¬å’Œç¼–ç ç±»å‹ï¼Œä¹‹åæ˜¯SVG çš„å®½åº¦å’Œé«˜åº¦ï¼›</li>
<li><code>eye1</code>ï¼šç”±ä¸¤ä¸ªæ¤­åœ†ï¼ˆellipseï¼‰ç»˜åˆ¶çš„çœ¼åœˆå’Œé»‘è‰²çœ¼ç ï¼›</li>
<li><code>head</code>ï¼šå¡«å…… <code>#4cc4c1</code> é¢œè‰²çš„æ¤­åœ†ä½œä¸ºèº«ä½“ï¼›</li>
<li><code>eye2</code>ï¼šä¸ <code>eye1</code> ä¸€è‡´ï¼Œä½ç½®ä¸åŒï¼›</li>
</ul>
<p><code>eye1</code>ï¼Œ<code>head</code>å’Œ<code>eye2</code>ä¾æ¬¡å åŠ å¾—åˆ°æœ€ç»ˆçš„å›¾å½¢ï¼š</p>
<p><img src="https://user-images.githubusercontent.com/3297411/153822497-6cdd7677-9594-4e78-8bc1-8f1b4c1158b8.png" alt="loogies-1"></p>
<h3><span id="fu-zhu-han-shu-jie-xi">è¾…åŠ©å‡½æ•°è§£æ</span></h3>
<ol>
<li><code>uint2str</code> å°† <code>uint</code> è½¬å˜ä¸ºå­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ <code>123</code> å˜ä¸º <code>'123'</code></li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">function uint2str(uint _i) internal pure returns (string memory _uintAsString) &#123;</span><br><span class="line">      if (_i == 0) &#123;</span><br><span class="line">          return &quot;0&quot;;</span><br><span class="line">      &#125;</span><br><span class="line">      uint j = _i;</span><br><span class="line">			// uint ä½æ•°</span><br><span class="line">      uint len;</span><br><span class="line">      while (j != 0) &#123;</span><br><span class="line">          len++;</span><br><span class="line">          j /= 10;</span><br><span class="line">      &#125;</span><br><span class="line">      bytes memory bstr = new bytes(len);</span><br><span class="line">      uint k = len;</span><br><span class="line">      while (_i != 0) &#123;</span><br><span class="line">          k = k-1;</span><br><span class="line">			    // _i ä¸ªä½æ•°å­—</span><br><span class="line">          uint8 temp = (48 + uint8(_i - _i / 10 * 10));</span><br><span class="line">          bytes1 b1 = bytes1(temp);</span><br><span class="line">          bstr[k] = b1;</span><br><span class="line">          _i /= 10;</span><br><span class="line">      &#125;</span><br><span class="line">      return string(bstr);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<ol>
<li><code>ToColor.sol</code> åº“ï¼šå°† <code>byte3</code> ç±»å‹è½¬æ¢ä¸ºå‰ç«¯é¢œè‰²å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ï¼šè¾“å…¥ <code>0x4cc4c1</code> è¾“å‡º <code>'4cc4c1'</code></li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">library ToColor &#123;</span><br><span class="line">    bytes16 internal constant ALPHABET = &apos;0123456789abcdef&apos;;</span><br><span class="line"></span><br><span class="line">    function toColor(bytes3 value) internal pure returns (string memory) &#123;</span><br><span class="line">      bytes memory buffer = new bytes(6);</span><br><span class="line">      for (uint256 i = 0; i &lt; 3; i++) &#123;</span><br><span class="line">          buffer[i*2+1] = ALPHABET[uint8(value[i]) &amp; 0xf];</span><br><span class="line">          buffer[i*2] = ALPHABET[uint8(value[i]&gt;&gt;4) &amp; 0xf];</span><br><span class="line">      &#125;</span><br><span class="line">      return string(buffer);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol>
<li><code>HexStrings.sol</code> åº“ï¼šä¸»è¦ä½œç”¨æ˜¯å°† <code>uint</code> æŒ‰ <code>length</code> ä½æå–ï¼Œå¯¹åº”äºç”Ÿæˆå…¬é’¥æ—¶æˆªå–å‰20ä½çš„åŠŸèƒ½ï¼š <code>(*uint160*(ownerOf(id))).toHexString(20)</code>ï¼Œæ­¤è¡¨è¾¾å¼ç”Ÿæˆå¯¹åº” <code>tokenId</code> æ‰€æœ‰è€…çš„åœ°å€ã€‚</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">library HexStrings &#123;</span><br><span class="line">    bytes16 internal constant ALPHABET = &apos;0123456789abcdef&apos;;</span><br><span class="line"></span><br><span class="line">    function toHexString(uint256 value, uint256 length) internal pure returns (string memory) &#123;</span><br><span class="line">        bytes memory buffer = new bytes(2 * length + 2);</span><br><span class="line">        buffer[0] = &apos;0&apos;;</span><br><span class="line">        buffer[1] = &apos;x&apos;;</span><br><span class="line">        for (uint256 i = 2 * length + 1; i &gt; 1; --i) &#123;</span><br><span class="line">            buffer[i] = ALPHABET[value &amp; 0xf];</span><br><span class="line">            value &gt;&gt;= 4;</span><br><span class="line">        &#125;</span><br><span class="line">        return string(buffer);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è‡³æ­¤ï¼Œåˆçº¦æºç åˆ†æå®Œæˆã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬å°†å¯¹å‰ç«¯çš„é€»è¾‘è¿›è¡Œç®€è¦åˆ†æï¼Œç„¶åæˆ‘ä»¬å°†ä¸€æ­¥æ­¥å®ç° NFT é“¸é€ å’Œå±•ç¤ºçš„åŠŸèƒ½ã€‚å°†ä»£ç åˆ‡æ¢åˆ°å‰ç«¯ä»£ç æäº¤ä¹‹å‰ï¼ŒæŒ‰ç…§ä»¥ä¸‹çš„æ­¥éª¤ä¸€æ­¥æ­¥æ·»åŠ åŠŸèƒ½ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git checkout a98156f6a03a0bc8fc98c8c77cef6fbf59f03b31</span><br></pre></td></tr></table></figure>
<h2><span id="qian-duan-luo-ji-fen-xi">å‰ç«¯é€»è¾‘åˆ†æ</span></h2>
<p>é¡¹ç›®å‰ç«¯æ–‡ä»¶åœ¨ <code>packages/react-app</code> å†…ï¼Œä»¥ä¸‹æ–‡ç« ä¸­æ¶‰åŠæ–‡ä»¶çš„ä½ç½®éƒ½å°†åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­å¯»æ‰¾ã€‚</p>
<p>æˆ‘ä»¬é¦–å…ˆæ¥çœ‹ä¸€ä¸‹ <code>src/App.jsx</code> ï¼Œè¿™æ˜¯é¡¹ç›®çš„ä¸»è¦é¡µé¢ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ä»£ç ç¼–è¾‘å™¨æŸ¥çœ‹è¿™ä¸ªæ–‡ä»¶çš„ä¸»è¦éƒ¨åˆ†ï¼š</p>
<p><img src="https://user-images.githubusercontent.com/3297411/153822564-f2f96aa8-1336-475b-adc8-cc251405cdff.png" alt="Appjsx"></p>
<p>å…¶ä¸­åŒ…å«çš„åŠŸèƒ½å’Œç»„ä»¶åŒ…æ‹¬ï¼š</p>
<ul>
<li><code>Header</code>ï¼šæ ‡é¢˜æ ï¼Œæ˜¾ç¤ºæ ‡é¢˜</li>
<li><em><code>NetworkDisplay</code>ï¼šæ‰€å¤„ç½‘ç»œçŠ¶æ€</em></li>
<li><em><code>Menu</code>ï¼Œ <code>Switch</code>ï¼šèœå•åˆ‡æ¢</em></li>
<li><em><code>ThemeSwitch</code>ï¼šå³ä¸‹è§’æ˜æš—ä¸»é¢˜åˆ‡æ¢</em></li>
<li><em><code>Account</code>ï¼šå³ä¸Šè§’è´¦æˆ·ä¿¡æ¯ç»„ä»¶</em></li>
<li>æ¥ä¸‹æ¥çš„ä¸¤ä¸ª <code>Row</code> å¯¹åº”å·¦ä¸‹è§’çš„ Gas æ˜¾ç¤ºã€æ”¯æŒå’Œæœ¬åœ°çš„æ°´é¾™å¤´</li>
</ul>
<p>ä¸‹é¢æˆ‘ä»¬ä¸»è¦çœ‹ä¸€ä¸‹ <em><code>NetworkDisplay</code>å’Œ <code>Account</code> çš„é€»è¾‘å®ç°ï¼Œä»¥åŠ <code>Menu</code>ï¼Œ <code>Switch</code> ä¸­çš„åŠŸèƒ½ã€‚</em></p>
<h3><span id="networkdisplay"><em><code>NetworkDisplay</code></em></span></h3>
<p>ç»„ä»¶ä½ç½®ï¼š <code>src/components/NetworkDisplay.jsx</code></p>
<p>ä¸»è¦åŒ…å«ä¸¤ä¸ªåŠŸèƒ½ï¼š</p>
<ol>
<li>æ˜¾ç¤ºå½“å‰æ‰€é€‰æ‹©çš„ç½‘ç»œåç§°ï¼›</li>
<li>å¦‚æœå½“å‰é’±åŒ…æ‰€åœ¨ç½‘ç»œä¸é¡¹ç›®ä¸­ç½‘ç»œè®¾ç½®ä¸ä¸€è‡´ï¼Œåˆ™æç¤ºè­¦å‘Šï¼Œå…¶ä¸­ï¼Œå½“é€‰æ‹©æœ¬åœ°ç½‘ç»œæ˜¯ï¼Œç½‘ç»œ ID éœ€è¦è®¾ç½®ä¸º <code>31337</code> ã€‚</li>
</ol>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">NetworkDisplay</span>(<span class="params">&#123;</span></span></span><br><span class="line"><span class="function"><span class="params">  NETWORKCHECK,</span></span></span><br><span class="line"><span class="function"><span class="params">  localChainId,</span></span></span><br><span class="line"><span class="function"><span class="params">  selectedChainId,</span></span></span><br><span class="line"><span class="function"><span class="params">  targetNetwork,</span></span></span><br><span class="line"><span class="function"><span class="params">  USE_NETWORK_SELECTOR,</span></span></span><br><span class="line"><span class="function"><span class="params">  logoutOfWeb3Modal,</span></span></span><br><span class="line"><span class="function"><span class="params">&#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> networkDisplay = <span class="string">""</span>;</span><br><span class="line">  <span class="keyword">if</span> (NETWORKCHECK &amp;&amp; localChainId &amp;&amp; selectedChainId &amp;&amp; localChainId !== selectedChainId) &#123;</span><br><span class="line">    <span class="keyword">const</span> networkSelected = NETWORK(selectedChainId);</span><br><span class="line">    <span class="keyword">const</span> networkLocal = NETWORK(localChainId);</span><br><span class="line">    <span class="keyword">if</span> (selectedChainId === <span class="number">1337</span> &amp;&amp; localChainId === <span class="number">31337</span>) &#123;</span><br><span class="line">			<span class="comment">// æç¤ºé”™è¯¯çš„ç½‘ç»œID</span></span><br><span class="line">			...</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="comment">// æç¤ºç½‘ç»œé”™è¯¯</span></span><br><span class="line">			...</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    networkDisplay = USE_NETWORK_SELECTOR ? <span class="literal">null</span> : (</span><br><span class="line">      <span class="comment">// æ˜¾ç¤ºç½‘ç»œåç§°</span></span><br><span class="line">      &lt;div style=&#123;&#123; <span class="attr">zIndex</span>: <span class="number">-1</span>, <span class="attr">position</span>: <span class="string">"absolute"</span>, <span class="attr">right</span>: <span class="number">154</span>, <span class="attr">top</span>: <span class="number">28</span>, <span class="attr">padding</span>: <span class="number">16</span>, <span class="attr">color</span>: targetNetwork.color &#125;&#125;&gt;</span><br><span class="line">        &#123;targetNetwork.name&#125;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">  console.log(&#123; networkDisplay &#125;);</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">  return networkDisplay;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>
<h3><span id="account"><em><code>Account</code></em></span></h3>
<p>ç»„ä»¶ä½ç½®ï¼š <code>src/components/Account.jsx</code></p>
<p>ä¸»è¦åŒ…å«ä¸¤ä¸ªåŠŸèƒ½ï¼š</p>
<ol>
<li>æ˜¾ç¤ºå½“å‰é’±åŒ…</li>
<li>æ˜¾ç¤ºé’±åŒ…ä½™é¢</li>
<li>æ˜¾ç¤º <code>Connect</code> æˆ–è€… <code>Logout</code></li>
</ol>
<p>å…¶ä¸­ï¼Œå½“ç”¨æˆ·ç‚¹å‡» <code>Connect</code> æ—¶ï¼Œå‰ç«¯è°ƒç”¨ <em><code>loadWeb3Modal</code>ï¼Œä»£ç å¦‚ä¸‹ï¼Œè¿™ä¸ªå‡½æ•°çš„éœ€è¦åŠŸèƒ½æ˜¯ä¸MetaMaskç­‰é’±åŒ…è¿›è¡Œè¿æ¥ï¼Œå¹¶ç›‘å¬é’±åŒ…çš„</em>  <code>chainChanged</code>ï¼Œ<code>accountsChanged</code> å’Œ <code>disconnect</code> äº‹ä»¶ï¼Œå³å½“æˆ‘ä»¬åœ¨é’±åŒ…ä¸­åˆ‡æ¢ç½‘ç»œï¼Œé€‰æ‹©è¿æ¥è´¦æˆ·ä»¥åŠå–æ¶ˆè¿æ¥æ—¶å¯¹åº”ä¿®æ”¹æ˜¾ç¤ºçŠ¶æ€ã€‚</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> loadWeb3Modal = useCallback(<span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line"><span class="comment">// è¿æ¥é’±åŒ…</span></span><br><span class="line">  <span class="keyword">const</span> provider = <span class="keyword">await</span> web3Modal.connect();</span><br><span class="line">  setInjectedProvider(<span class="keyword">new</span> ethers.providers.Web3Provider(provider));</span><br><span class="line"><span class="comment">// ç›‘å¬åˆ‡æ¢ç½‘ç»œ</span></span><br><span class="line">  provider.on(<span class="string">"chainChanged"</span>, chainId =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`chain changed to <span class="subst">$&#123;chainId&#125;</span>! updating providers`</span>);</span><br><span class="line">    setInjectedProvider(<span class="keyword">new</span> ethers.providers.Web3Provider(provider));</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="comment">// ç›‘å¬åˆ‡æ¢è´¦æˆ·</span></span><br><span class="line">  provider.on(<span class="string">"accountsChanged"</span>, () =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`account changed!`</span>);</span><br><span class="line">    setInjectedProvider(<span class="keyword">new</span> ethers.providers.Web3Provider(provider));</span><br><span class="line">  &#125;);</span><br><span class="line"><span class="comment">// ç›‘å¬æ–­å¼€è¿æ¥</span></span><br><span class="line">  <span class="comment">// Subscribe to session disconnection</span></span><br><span class="line">  provider.on(<span class="string">"disconnect"</span>, (code, reason) =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(code, reason);</span><br><span class="line">    logoutOfWeb3Modal();</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="comment">// eslint-disable-next-line</span></span><br><span class="line">&#125;, [setInjectedProvider]);</span><br></pre></td></tr></table></figure>
<p>åŒç†ï¼Œåœ¨è¿æ¥é’±åŒ…æƒ…å†µä¸‹ï¼Œç”¨æˆ·ç‚¹å‡» <code>Logout</code> ä¼šè°ƒç”¨ <code>logoutOfWeb3Modal</code> åŠŸèƒ½ï¼Œ</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> logoutOfWeb3Modal = <span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">		<span class="comment">// æ¸…æ¥šç¼“å­˜çš„ç½‘ç»œæä¾›å•†ï¼Œå¹¶æ–­å¼€è¿æ¥</span></span><br><span class="line">    <span class="keyword">await</span> web3Modal.clearCachedProvider();</span><br><span class="line">    <span class="keyword">if</span> (injectedProvider &amp;&amp; injectedProvider.provider &amp;&amp; <span class="keyword">typeof</span> injectedProvider.provider.disconnect == <span class="string">"function"</span>) &#123;</span><br><span class="line">      <span class="keyword">await</span> injectedProvider.provider.disconnect();</span><br><span class="line">    &#125;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">window</span>.location.reload();</span><br><span class="line">    &#125;, <span class="number">1</span>);</span><br><span class="line">  &#125;;</span><br></pre></td></tr></table></figure>
<h3><span id="menu-switch"><em><code>Menu</code>ï¼Œ <code>Switch</code></em></span></h3>
<p>è¿™ä¸¤ä¸ªåˆ†åˆ«å¯¹åº”æ˜¾ç¤ºèœå•å’Œå¯¹åº”åˆ‡æ¢èœå•åŠŸèƒ½ï¼Œè¿™äº›èœå•åŒ…æ‹¬ï¼š</p>
<ul>
<li><code>App Home</code> ï¼šé¡¹ç›®å¸Œæœ›æˆ‘ä»¬å°†éœ€è¦å®ç°çš„åŠŸèƒ½æ”¾åœ¨è¿™ä¸ªèœå•ä¸­ï¼Œæ¯”å¦‚æˆ‘ä»¬å°†è¦å®ç°çš„ NFT çš„é“¸é€ å’Œå±•ç¤ºåŠŸèƒ½ï¼›</li>
<li><code>Debug Contracts</code>ï¼šè°ƒè¯•è‡ªå·±ç¼–å†™çš„åˆçº¦åŠŸèƒ½ï¼Œå°†ä¼šæ ¹æ®åˆçº¦çš„ ABI æ–‡ä»¶ å±•ç¤ºå¯ä»¥åˆçº¦çš„çŠ¶æ€å˜é‡å’Œå¯ä»¥è°ƒç”¨çš„å‡½æ•°ï¼›</li>
<li><code>Hints</code>ï¼šç¼–ç¨‹æç¤º</li>
<li><code>ExampleUI</code>ï¼šç¤ºä¾‹UIï¼Œå¯ä»¥åšä¸ºç¼–ç¨‹ä½¿ç”¨</li>
<li><code>Mainnet DAI</code>ï¼šä»¥å¤ªåŠä¸»ç½‘ <code>DAI</code> çš„åˆçº¦çŠ¶æ€å’Œå¯ç”¨å‡½æ•°ï¼Œä¸ <code>Debug Contracts</code> åŠŸèƒ½ä¸€ç›´</li>
<li><code>Subgraph</code>ï¼šä½¿ç”¨ The Graph åè®®å¯¹åˆçº¦ä¸­çš„äº‹ä»¶è¿›è¡Œç›‘å¬å’ŒæŸ¥è¯¢ã€‚</li>
</ul>
<h3><span id="diao-shi-xin-xi">è°ƒè¯•ä¿¡æ¯</span></h3>
<p><code>App.jsx</code> ä¸­è¿˜åŒ…å«äº†æ‰“å°å½“å‰é¡µé¢çŠ¶æ€çš„è°ƒè¯•ä¿¡æ¯ï¼Œå¯ä»¥åœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­å®æ—¶æŸ¥çœ‹å½“å‰çŠ¶æ€å˜é‡ã€‚</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// ğŸ§« DEBUG ğŸ‘¨ğŸ»â€ğŸ”¬</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line">useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (</span><br><span class="line">    DEBUG &amp;&amp;</span><br><span class="line">    mainnetProvider &amp;&amp;</span><br><span class="line">    address &amp;&amp;</span><br><span class="line">    selectedChainId &amp;&amp;</span><br><span class="line">    yourLocalBalance &amp;&amp;</span><br><span class="line">    yourMainnetBalance &amp;&amp;</span><br><span class="line">    readContracts &amp;&amp;</span><br><span class="line">    writeContracts &amp;&amp;</span><br><span class="line">    mainnetContracts</span><br><span class="line">  ) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"_____________________________________ ğŸ— scaffold-eth _____________________________________"</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"ğŸŒ mainnetProvider"</span>, mainnetProvider);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"ğŸ  localChainId"</span>, localChainId);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"ğŸ‘©â€ğŸ’¼ selected address:"</span>, address);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"ğŸ•µğŸ»â€â™‚ï¸ selectedChainId:"</span>, selectedChainId);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"ğŸ’µ yourLocalBalance"</span>, yourLocalBalance ? ethers.utils.formatEther(yourLocalBalance) : <span class="string">"..."</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"ğŸ’µ yourMainnetBalance"</span>, yourMainnetBalance ? ethers.utils.formatEther(yourMainnetBalance) : <span class="string">"..."</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"ğŸ“ readContracts"</span>, readContracts);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"ğŸŒ DAI contract on mainnet:"</span>, mainnetContracts);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"ğŸ’µ yourMainnetDAIBalance"</span>, myMainnetDAIBalance);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"ğŸ” writeContracts"</span>, writeContracts);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;, [</span><br><span class="line">  mainnetProvider,</span><br><span class="line">  address,</span><br><span class="line">  selectedChainId,</span><br><span class="line">  yourLocalBalance,</span><br><span class="line">  yourMainnetBalance,</span><br><span class="line">  readContracts,</span><br><span class="line">  writeContracts,</span><br><span class="line">  mainnetContracts,</span><br><span class="line">  localChainId,</span><br><span class="line">  myMainnetDAIBalance,</span><br><span class="line">]);</span><br></pre></td></tr></table></figure>
<p>æŸ¥çœ‹å®Œä¸»é¡µçš„åŸºæœ¬åŠŸèƒ½ï¼Œä¸‹é¢æˆ‘ä»¬å¼€å§‹å®ç° NFT é“¸é€ å’Œå±•ç¤º NFT åˆ—è¡¨è¿™ä¸¤ä¸ªåŠŸèƒ½ã€‚</p>
<h2><span id="nft-gong-neng-shi-xian">NFT åŠŸèƒ½å®ç°</span></h2>
<p>æˆ‘ä»¬å°†ä¸»è¦å®ç°ä»¥ä¸‹ä¸‰ä¸ªéƒ¨åˆ†åŠŸèƒ½ï¼š</p>
<ul>
<li>é“¸é€  NFTï¼›</li>
<li>å±•ç¤º NFT åˆ—è¡¨ï¼›</li>
<li>å±•ç¤º NFT åˆçº¦æ¥å£åˆ—è¡¨ã€‚</li>
</ul>
<h3><span id="zhu-zao-nft">é“¸é€  NFT</span></h3>
<p>é¦–å…ˆæˆ‘ä»¬æ‰¾åˆ° <code>App Home</code> å¯¹åº”ä½¿ç”¨çš„ç»„ä»¶ï¼Œä»ä¸‹é¢çš„ä»£ç ä¸­å¯ä»¥çœ‹åˆ°ï¼Œå¯¹åº”ä½¿ç”¨ <code>Home</code> ç»„ä»¶ï¼Œæ‰€åœ¨ä½ç½®ä¸º <code>src/views/Home.jsx</code> ã€‚</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">...</span><br><span class="line">&lt;Switch&gt;</span><br><span class="line">    &lt;Route exact path=<span class="string">"/"</span>&gt;</span><br><span class="line">      &#123;<span class="comment">/* pass in any web3 props to this Home component. For example, yourLocalBalance */</span>&#125;</span><br><span class="line">      &lt;Home yourLocalBalance=&#123;yourLocalBalance&#125; readContracts=&#123;readContracts&#125; /&gt;</span><br><span class="line">    &lt;<span class="regexp">/Route&gt;</span></span><br><span class="line"><span class="regexp">....</span></span><br></pre></td></tr></table></figure>
<p>åˆ é™¤ <code>Home.jsx</code> ä¸­å†…å®¹ï¼Œæ·»åŠ ä»¥ä¸‹ Mint æŒ‰é’®ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useState &#125; <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Button, Card, List &#125; <span class="keyword">from</span> <span class="string">"antd"</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Home</span>(<span class="params">&#123; </span></span></span><br><span class="line"><span class="function"><span class="params">  isSigner,</span></span></span><br><span class="line"><span class="function"><span class="params">  loadWeb3Modal,</span></span></span><br><span class="line"><span class="function"><span class="params">  tx,</span></span></span><br><span class="line"><span class="function"><span class="params">  writeContracts,</span></span></span><br><span class="line"><span class="function"><span class="params">&#125;</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &#123;<span class="comment">/* Mint button */</span>&#125;</span><br><span class="line">      &lt;div style=&#123;&#123; <span class="attr">maxWidth</span>: <span class="number">820</span>, <span class="attr">margin</span>: <span class="string">"auto"</span>, <span class="attr">marginTop</span>: <span class="number">32</span>, <span class="attr">paddingBottom</span>: <span class="number">32</span> &#125;&#125;&gt;</span><br><span class="line">        &#123;isSigner?(</span><br><span class="line">          &lt;Button type=&#123;<span class="string">"primary"</span>&#125; onClick=&#123;()=&gt;&#123;</span><br><span class="line">            tx( writeContracts.YourCollectible.mintItem() )</span><br><span class="line">          &#125;&#125;&gt;MINT&lt;<span class="regexp">/Button&gt;</span></span><br><span class="line"><span class="regexp">        ):(</span></span><br><span class="line"><span class="regexp">          &lt;Button type=&#123;"primary"&#125; onClick=&#123;loadWeb3Modal&#125;&gt;CONNECT WALLET&lt;/</span>Button&gt;</span><br><span class="line">        )&#125;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Home;</span><br></pre></td></tr></table></figure>
<p>åŒæ—¶å°† <code>Switch</code> ä¸­å¯¹åº”ç»„ä»¶ä½¿ç”¨ä¿®æ”¹ä¸ºï¼š</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">...</span><br><span class="line">&lt;Switch&gt;</span><br><span class="line">  &lt;Route exact path=<span class="string">"/"</span>&gt;</span><br><span class="line">    &#123;<span class="comment">/* pass in any web3 props to this Home component. For example, yourLocalBalance */</span>&#125;</span><br><span class="line">    &lt;Home</span><br><span class="line">      isSigner=&#123;userSigner&#125;</span><br><span class="line">      loadWeb3Modal=&#123;loadWeb3Modal&#125;</span><br><span class="line">      tx=&#123;tx&#125;</span><br><span class="line">      writeContracts=&#123;writeContracts&#125;</span><br><span class="line">    /&gt;</span><br><span class="line"> ...</span><br></pre></td></tr></table></figure>
<p>æ•ˆæœå›¾ä¸ºï¼š</p>
<p><img src="https://user-images.githubusercontent.com/3297411/153822638-2ce70ded-289b-411e-9ed5-c78507617427.png" alt="mint-button"></p>
<p>ç‚¹å‡» Mint ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°äº¤æ˜“æˆåŠŸå‘å‡ºï¼Œè¿™æ—¶ï¼Œè™½ç„¶æˆ‘ä»¬æˆåŠŸ mint äº† NFTï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜éœ€è¦æ·»åŠ åˆ—è¡¨æ¥å±•ç¤ºæˆ‘ä»¬çš„ NFTã€‚</p>
<h3><span id="zhan-shi-nft-lie-biao">å±•ç¤º NFT åˆ—è¡¨</span></h3>
<p>æ·»åŠ åˆ—è¡¨å±•ç¤ºï¼Œå…¶ä¸­åŒ…å« NFT çš„è½¬ç§»åŠŸèƒ½å¯ä»¥å°†å¯¹åº”çš„ NFT å‘é€ç»™å…¶ä»–åœ°å€ã€‚</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useState &#125; <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Button, Card, List &#125; <span class="keyword">from</span> <span class="string">"antd"</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; useContractReader &#125; <span class="keyword">from</span> <span class="string">"eth-hooks"</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Address, AddressInput&#125; <span class="keyword">from</span> <span class="string">"../components"</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Home</span>(<span class="params">&#123; </span></span></span><br><span class="line"><span class="function"><span class="params">  isSigner,</span></span></span><br><span class="line"><span class="function"><span class="params">  loadWeb3Modal,</span></span></span><br><span class="line"><span class="function"><span class="params">  yourCollectibles,</span></span></span><br><span class="line"><span class="function"><span class="params">  address,</span></span></span><br><span class="line"><span class="function"><span class="params">  blockExplorer,</span></span></span><br><span class="line"><span class="function"><span class="params">  mainnetProvider,</span></span></span><br><span class="line"><span class="function"><span class="params">  tx,</span></span></span><br><span class="line"><span class="function"><span class="params">  readContracts,</span></span></span><br><span class="line"><span class="function"><span class="params">  writeContracts,</span></span></span><br><span class="line"><span class="function"><span class="params">&#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [transferToAddresses, setTransferToAddresses] = useState(&#123;&#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &#123;<span class="comment">/* Mint æŒ‰é’® */</span>&#125;</span><br><span class="line">			...</span><br><span class="line">			&#123;<span class="comment">/* åˆ—è¡¨ */</span>&#125;</span><br><span class="line">      &lt;div style=&#123;&#123; <span class="attr">width</span>: <span class="number">820</span>, <span class="attr">margin</span>: <span class="string">"auto"</span>, <span class="attr">paddingBottom</span>: <span class="number">256</span> &#125;&#125;&gt;</span><br><span class="line">        &lt;List</span><br><span class="line">          bordered</span><br><span class="line">          dataSource=&#123;yourCollectibles&#125;</span><br><span class="line">          renderItem=&#123;item =&gt; &#123;</span><br><span class="line">            <span class="keyword">const</span> id = item.id.toNumber();</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"IMAGE"</span>,item.image)</span><br><span class="line">            <span class="keyword">return</span> (</span><br><span class="line">              &lt;List.Item key=&#123;id + <span class="string">"_"</span> + item.uri + <span class="string">"_"</span> + item.owner&#125;&gt;</span><br><span class="line">                &lt;Card</span><br><span class="line">                  title=&#123;</span><br><span class="line">                    &lt;div&gt;</span><br><span class="line">                      &lt;span style=&#123;&#123; <span class="attr">fontSize</span>: <span class="number">18</span>, <span class="attr">marginRight</span>: <span class="number">8</span> &#125;&#125;&gt;&#123;item.name&#125;&lt;<span class="regexp">/span&gt;</span></span><br><span class="line"><span class="regexp">                    &lt;/</span>div&gt;</span><br><span class="line">                  &#125;</span><br><span class="line">                &gt;</span><br><span class="line">                  &lt;a href=&#123;<span class="string">"https://opensea.io/assets/"</span>+(readContracts &amp;&amp; readContracts.YourCollectible &amp;&amp; readContracts.YourCollectible.address)+<span class="string">"/"</span>+item.id&#125; target=<span class="string">"_blank"</span>&gt;</span><br><span class="line">                  &lt;img src=&#123;item.image&#125; /&gt;</span><br><span class="line">                  &lt;<span class="regexp">/a&gt;</span></span><br><span class="line"><span class="regexp">                  &lt;div&gt;&#123;item.description&#125;&lt;/</span>div&gt;</span><br><span class="line">                &lt;<span class="regexp">/Card&gt;</span></span><br><span class="line"><span class="regexp">								&#123;/</span>* NFT è½¬ç§» *<span class="regexp">/&#125;</span></span><br><span class="line"><span class="regexp">                &lt;div&gt;</span></span><br><span class="line"><span class="regexp">                  owner:&#123;" "&#125;</span></span><br><span class="line"><span class="regexp">                  &lt;Address</span></span><br><span class="line"><span class="regexp">                    address=&#123;item.owner&#125;</span></span><br><span class="line"><span class="regexp">                    ensProvider=&#123;mainnetProvider&#125;</span></span><br><span class="line"><span class="regexp">                    blockExplorer=&#123;blockExplorer&#125;</span></span><br><span class="line"><span class="regexp">                    fontSize=&#123;16&#125;</span></span><br><span class="line"><span class="regexp">                  /</span>&gt;</span><br><span class="line">                  &lt;AddressInput</span><br><span class="line">                    ensProvider=&#123;mainnetProvider&#125;</span><br><span class="line">                    placeholder=<span class="string">"transfer to address"</span></span><br><span class="line">                    value=&#123;transferToAddresses[id]&#125;</span><br><span class="line">                    onChange=&#123;newValue =&gt; &#123;</span><br><span class="line">                      <span class="keyword">const</span> update = &#123;&#125;;</span><br><span class="line">                      update[id] = newValue;</span><br><span class="line">                      setTransferToAddresses(&#123; ...transferToAddresses, ...update &#125;);</span><br><span class="line">                    &#125;&#125;</span><br><span class="line">                  /&gt;</span><br><span class="line">                  &lt;Button</span><br><span class="line">                    onClick=&#123;() =&gt; &#123;</span><br><span class="line">                      <span class="built_in">console</span>.log(<span class="string">"writeContracts"</span>, writeContracts);</span><br><span class="line">                      tx(writeContracts.YourCollectible.transferFrom(address, transferToAddresses[id], id));</span><br><span class="line">                    &#125;&#125;</span><br><span class="line">                  &gt;</span><br><span class="line">                    Transfer</span><br><span class="line">                  &lt;<span class="regexp">/Button&gt;</span></span><br><span class="line"><span class="regexp">                &lt;/</span>div&gt;</span><br><span class="line">              &lt;<span class="regexp">/List.Item&gt;</span></span><br><span class="line"><span class="regexp">            );</span></span><br><span class="line"><span class="regexp">          &#125;&#125;</span></span><br><span class="line"><span class="regexp">        /</span>&gt;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">      &#123;/</span>* ä¿¡æ¯æç¤º *<span class="regexp">/&#125;</span></span><br><span class="line"><span class="regexp">      &lt;div style=&#123;&#123; maxWidth: 820, margin: "auto", marginTop: 32, paddingBottom: 256 &#125;&#125;&gt;</span></span><br><span class="line"><span class="regexp">        ğŸ›  built with &lt;a href="https:/</span><span class="regexp">/github.com/</span>austintgriffith/scaffold-eth<span class="string">" target="</span>_blank<span class="string">"&gt;ğŸ— scaffold-eth&lt;/a&gt;</span></span><br><span class="line"><span class="string">        ğŸ´ &lt;a href="</span>https:<span class="comment">//github.com/austintgriffith/scaffold-eth" target="_blank"&gt;Fork this repo&lt;/a&gt; and build a cool SVG NFT!</span></span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Home;</span><br></pre></td></tr></table></figure>
<p>å¯¹åº”ç»„ä»¶ä½¿ç”¨ä¿®æ”¹ä¸ºï¼š</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">...</span><br><span class="line">&lt;Switch&gt;</span><br><span class="line">  &lt;Route exact path=<span class="string">"/"</span>&gt;</span><br><span class="line">    &#123;<span class="comment">/* pass in any web3 props to this Home component. For example, yourLocalBalance */</span>&#125;</span><br><span class="line">    &lt;Home</span><br><span class="line">      isSigner=&#123;userSigner&#125;</span><br><span class="line">      loadWeb3Modal=&#123;loadWeb3Modal&#125;</span><br><span class="line">      yourCollectibles=&#123;yourCollectibles&#125;</span><br><span class="line">      address=&#123;address&#125;</span><br><span class="line">      blockExplorer=&#123;blockExplorer&#125;</span><br><span class="line">      mainnetProvider=&#123;mainnetProvider&#125;</span><br><span class="line">      tx=&#123;tx&#125;</span><br><span class="line">      writeContracts=&#123;writeContracts&#125;</span><br><span class="line">      readContracts=&#123;readContracts&#125;</span><br><span class="line">    /&gt;</span><br><span class="line"> ...</span><br></pre></td></tr></table></figure>
<p>æ•ˆæœå›¾ä¸ºï¼š</p>
<p><img src="https://user-images.githubusercontent.com/3297411/153822686-e7f7c3c7-65ee-4b1c-ade2-204c6365177f.png" alt="nft-display-list"></p>
<p>ä½†æ˜¯æˆ‘ä»¬å‘ç°ï¼Œå½“æˆ‘ä»¬å†æ¬¡ mint æ—¶ï¼Œåˆ—è¡¨å¹¶ä¸ä¼šæ›´æ–°ï¼Œè¿˜æ˜¯åŸæ¥çš„æ ·å­ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦åœ¨ <code>App.jsx</code> ä¸­æ·»åŠ äº‹ä»¶ç›‘å¬ï¼Œä¸€æ—¦æˆ‘ä»¬é“¸é€  NFT ä¹‹åï¼Œåˆ—è¡¨å°†åˆ·æ–°ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è·Ÿè¸ªå½“å‰ NFT æ•°é‡</span></span><br><span class="line"><span class="keyword">const</span> balance = useContractReader(readContracts, <span class="string">"YourCollectible"</span>, <span class="string">"balanceOf"</span>, [address]);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"ğŸ¤— balance:"</span>, balance);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> yourBalance = balance &amp;&amp; balance.toNumber &amp;&amp; balance.toNumber();</span><br><span class="line"><span class="keyword">const</span> [yourCollectibles, setYourCollectibles] = useState();</span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// ğŸ§  è¿™ä¸ª effect ä¼šåœ¨ balance å˜åŒ–æ—¶æ›´æ–° yourCollectibles </span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line">useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> updateYourCollectibles = <span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> collectibleUpdate = [];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> tokenIndex = <span class="number">0</span>; tokenIndex &lt; balance; tokenIndex++) &#123;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"GEtting token index"</span>, tokenIndex);</span><br><span class="line">        <span class="keyword">const</span> tokenId = <span class="keyword">await</span> readContracts.YourCollectible.tokenOfOwnerByIndex(address, tokenIndex);</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"tokenId"</span>, tokenId);</span><br><span class="line">        <span class="keyword">const</span> tokenURI = <span class="keyword">await</span> readContracts.YourCollectible.tokenURI(tokenId);</span><br><span class="line">        <span class="keyword">const</span> jsonManifestString = atob(tokenURI.substring(<span class="number">29</span>))</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"jsonManifestString"</span>, jsonManifestString);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">          <span class="keyword">const</span> jsonManifest = <span class="built_in">JSON</span>.parse(jsonManifestString);</span><br><span class="line">          <span class="built_in">console</span>.log(<span class="string">"jsonManifest"</span>, jsonManifest);</span><br><span class="line">          collectibleUpdate.push(&#123; <span class="attr">id</span>: tokenId, <span class="attr">uri</span>: tokenURI, <span class="attr">owner</span>: address, ...jsonManifest &#125;);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">          <span class="built_in">console</span>.log(e);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">      &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(e);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    setYourCollectibles(collectibleUpdate.reverse());</span><br><span class="line">  &#125;;</span><br><span class="line">  updateYourCollectibles();</span><br><span class="line">&#125;, [address, yourBalance]);</span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶ï¼Œå½“æˆ‘ä»¬å†æ¬¡ Mint æ—¶ï¼Œå°±æ˜¯è‡ªåŠ¨æ›´æ–°åˆ—è¡¨ï¼Œæ˜¾ç¤ºæœ€æ–°é“¸é€ çš„ NFT äº†ã€‚</p>
<h3><span id="zhan-shi-nft-he-yue-jie-kou-lie-biao">å±•ç¤º NFT åˆçº¦æ¥å£åˆ—è¡¨</span></h3>
<p>è¿™ä¸ªåŠŸèƒ½æ¯”è¾ƒç®€å•ï¼Œåªéœ€è¦ä¿®æ”¹å¯¹åº” debug éƒ¨åˆ†å³å¯ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">&lt;Route exact path=<span class="string">"/debug"</span>&gt;</span><br><span class="line">    &#123;<span class="comment">/*</span></span><br><span class="line"><span class="comment">          ğŸ› this scaffolding is full of commonly used components</span></span><br><span class="line"><span class="comment">          this &lt;Contract/&gt; component will automatically parse your ABI</span></span><br><span class="line"><span class="comment">          and give you a form to interact with it locally</span></span><br><span class="line"><span class="comment">      */</span>&#125;</span><br><span class="line"></span><br><span class="line">    &lt;Contract</span><br><span class="line">      name=<span class="string">"YourCollectible"</span></span><br><span class="line">      price=&#123;price&#125;</span><br><span class="line">      signer=&#123;userSigner&#125;</span><br><span class="line">      provider=&#123;localProvider&#125;</span><br><span class="line">      address=&#123;address&#125;</span><br><span class="line">      blockExplorer=&#123;blockExplorer&#125;</span><br><span class="line">      contractConfig=&#123;contractConfig&#125;</span><br><span class="line">    /&gt;</span><br></pre></td></tr></table></figure>
<p>æ›´æ–°ä¹‹åï¼Œå¯ä»¥åœ¨ <code>Debug Contracts</code> èœå•ä¸‹çœ‹åˆ°åˆçº¦çš„å¯ä»¥è°ƒç”¨çš„å‡½æ•°ã€‚</p>
<p><img src="https://user-images.githubusercontent.com/3297411/153822741-30c8d3c6-077b-49b9-8b88-bc62119215cf.png" alt="contract-funcs"></p>
<p>è‡³æ­¤ï¼Œæˆ‘ä»¬å°±å®Œæˆäº†ä¸€ä¸ªç®€å• NFT é“¸é€ å’Œå±•ç¤ºçš„ DApp äº†ã€‚</p>
<h2><span id="zong-jie">æ€»ç»“</span></h2>
<p>é€šè¿‡è¿™ä¸ªé¡¹ç›®ï¼Œæˆ‘ä»¬å¯ä»¥å­¦ä¹ å¹¶äº†è§£ä»¥ä¸‹çŸ¥è¯†ï¼š</p>
<ol>
<li>NFT åˆçº¦åŸºæœ¬å†…å®¹ä»¥åŠå¦‚ä½•åœ¨ Opensea ç­‰å¸‚åœºä¸­å±•ç¤º NFTï¼›</li>
<li>å‰ç«¯å¦‚ä½•è¿æ¥è¯¸å¦‚ MetaMask ç­‰é’±åŒ…ï¼›</li>
<li>å‰ç«¯å¦‚ä½•è°ƒç”¨åˆçº¦å‡½æ•°ã€‚</li>
</ol>
<h3><span id="comments">Comments</span></h3>
</div><p class="post-tags"><i class="fa fa-tags" aria-hidden="true"></i><a href="/tags/%E5%8C%BA%E5%9D%97%E9%93%BE/">#åŒºå—é“¾</a></p></article></div><div class="post-copyright"><blockquote><p>ç‰ˆæƒå£°æ˜ï¼šæœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank" rel="noopener">ç½²å-ç›¸åŒæ–¹å¼å…±äº« | CC BY-SA 4.0 </a>è®¸å¯åè®®ã€‚</p></blockquote></div><footer><div class="paginator"><a href="/qiwihui-blog-147/" class="next">NEXT</a></div><div id="disqus_thread"></div><script>var disqus_shortname = 'blog-qiwihui-com';
var disqus_identifier = 'qiwihui-blog-153/';
var disqus_title = 'SVG NFT å…¨é¢å®è·µ â”€â”€ scaffold-eth loogies-svg-nft é¡¹ç›®å®Œæ•´æŒ‡å—';
var disqus_url = 'https://qiwihui.com/qiwihui-blog-153/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//blog-qiwihui-com.disqus.com/count.js" async></script><!-- block copyright--></footer></div><script async src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        processEscapes: true,
        processEnvironments: true,
        skipTags: ["script","noscript","style","textarea","code","pre"]
    }
});
</script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-46660488-3",'auto');ga('send','pageview');</script><link rel="stylesheet" href="//cdn.datatables.net/1.10.7/css/jquery.dataTables.min.css" media="screen" type="text/css"><script src="//cdn.datatables.net/1.10.7/js/jquery.dataTables.min.js"></script><script>$(function(){$('.datatable').dataTable( {"order": [[ 0, "desc" ]],"iDisplayLength": -1,"lengthMenu": [[10, 25, 50, -1], [10, 25, 50, "All"]]} );});</script></body></html>