<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> å¦‚ä½•åˆ›å»ºä¸€ä¸ªä»£å¸æ‰¿é”€å•† dApp Â· QIWIHUI</title><meta name="description" content="å¦‚ä½•åˆ›å»ºä¸€ä¸ªä»£å¸æ‰¿é”€å•† dApp - qiwihui"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/css/nella.css"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.12/css/all.css" integrity="sha384-G0fIWCsCzJIMAVNQPfjH08cyYaUtMwjJwqiRKxxE/rx96Uroj1BtIQ6MLJuheaO9" crossorigin="anonymous"><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle = window.adsbygoogle || []).push({
google_ad_client: "ca-pub-8935595858652656",
enable_page_level_ads: true
});
</script><link rel="search" type="application/opensearchdescription+xml" href="https://qiwihui.com/atom.xml" title="QIWIHUI"><meta property="og:site_name" content="QIWIHUI"><meta property="og:url" content="https://qiwihui.com/qiwihui-blog-155/index.html"><meta property="og:title" content="å¦‚ä½•åˆ›å»ºä¸€ä¸ªä»£å¸æ‰¿é”€å•† dApp"><meta property="og:description" content="å¦‚ä½•åˆ›å»ºä¸€ä¸ªä»£å¸æ‰¿é”€å•† dApp"><meta property="og:type" content="article"><script src="//code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script><meta name="generator" content="Hexo 4.2.1"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/images/avatar.jpg" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="/about/" target="_self" class="nav-list-link">ABOUT</a></li><li class="nav-list-item"><a href="/search/" target="_self" class="nav-list-link">SEARCH</a></li><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">HOME</a></li><li class="nav-list-item"><a href="/projects/" target="_self" class="nav-list-link">PROJECTS</a></li><li class="nav-list-item"><a href="/tags/" target="_self" class="nav-list-link">TAGS</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li><li class="nav-list-item"><a href="/links/" target="_self" class="nav-list-link">LINKS</a></li><!--li.nav-list-item--><!--    a.nav-list-link(class="search" href=url_for("search") target="_self") SEARCH--></ul></header><main class="container"></main><div class="post"><article class="post-block"><h1 class="post-title">å¦‚ä½•åˆ›å»ºä¸€ä¸ªä»£å¸æ‰¿é”€å•† dApp</h1><div class="post-info">May 15, 2024<span class="categories"><i class="fa fa-bookmark" aria-hidden="true"></i></span><a href="/categories/%E6%8A%80%E6%9C%AF/" class="post-category">#æŠ€æœ¯</a><span>33 min. read</span></div><div class="post-content"><p>è¿™ç¯‡æ•™ç¨‹æˆ‘ä»¬æ¥å®Œæˆ scaffold-eth é¡¹ç›®çš„ç¬¬äºŒä¸ªæŒ‘æˆ˜ï¼š<a href="https://speedrunethereum.com/challenge/token-vendor" target="_blank" rel="noopener">ä»£å¸æ‰¿é”€å•†</a>ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç½‘ç«™ <a href="http://speedrunethereum.com/" target="_blank" rel="noopener">speedrunethereum.com</a> ä¸­æŸ¥çœ‹æˆ–è€…ç›´æ¥æŸ¥çœ‹å¯¹åº”çš„ Github è¿æ¥ï¼š<a href="https://github.com/scaffold-eth/scaffold-eth-typescript-challenges" target="_blank" rel="noopener">scaffold-eth/scaffold-eth-typescript-challenges</a>ã€‚</p>
<p>è¿™ä¸ªæŒ‘æˆ˜çš„ç›®çš„æ˜¯åˆ›å»ºä¸€ä¸ªè‡ªå·±çš„ERC20ä»£å¸ï¼Œå¹¶ç¼–å†™æ‰¿é”€å•†åˆçº¦ï¼Œå®ç°ç”¨æˆ·å¯¹ä»£å¸çš„è´­ä¹°å’Œå–å‡ºã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬ä¸€æ­¥æ­¥å®Œæˆè¿™ä¸ªè¿‡ç¨‹ã€‚</p>
<a id="more"></a>
<h3><span id="yi-an-zhuang-bing-she-zhi-huan-jing">ä¸€ã€å®‰è£…å¹¶è®¾ç½®ç¯å¢ƒ</span></h3>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬ä¸‹è½½é¡¹ç›®ï¼Œå¹¶åˆå§‹åŒ–ç¯å¢ƒã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/scaffold-eth/scaffold-eth-typescript-challenges.git challenge-2-token-vendor</span><br><span class="line"><span class="built_in">cd</span> challenge-2-token-vendor</span><br><span class="line">git checkout challenge-2-token-vendor</span><br><span class="line">yarn install</span><br></pre></td></tr></table></figure>
<p>å®‰è£…å¥½ä¾èµ–åŒ…ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°é¡¹ç›®çš„ä¸»è¦ç›®å½•ä¸º <code>packages</code>ï¼ŒåŒ…å«ä¸€ä¸‹å­ç›®å½•</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">packages/</span><br><span class="line">â”œâ”€â”€ hardhat-ts</span><br><span class="line">â”œâ”€â”€ services</span><br><span class="line">â”œâ”€â”€ subgraph</span><br><span class="line">â””â”€â”€ vite-app-ts</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­ï¼š</p>
<ul>
<li><code>hardhat-ts</code> æ˜¯é¡¹ç›®åˆçº¦ä»£ç ï¼ŒåŒ…å«åˆçº¦æ–‡ä»¶ä»¥åŠåˆçº¦çš„éƒ¨ç½²ç­‰ï¼›</li>
<li><code>services</code> The Graph åè®®çš„ graph-node é…ç½®ï¼›</li>
<li><code>subgraph</code> The Graph åè®®ç›¸åº”çš„å¤„ç†è®¾ç½®ï¼ŒåŒ…æ‹¬ mappingsï¼Œæ•°æ®ç»“æ„ç­‰ï¼›</li>
<li><code>vite-app-ts</code> å‰ç«¯é¡¹ç›®ï¼Œä¸»è¦è´Ÿè´£ç”¨æˆ·ä¸åˆçº¦äº¤äº’ã€‚</li>
</ul>
<p>The Graph åè®®æ˜¯å»ä¸­å¿ƒåŒ–çš„åŒºå—é“¾æ•°æ®ç´¢å¼•åè®®ï¼Œæœ¬ç‰‡æ•™ç¨‹ä¸­æš‚æ—¶ä¸æ¶‰åŠã€‚æˆ‘ä»¬éœ€è¦å¯åŠ¨ä¸‰ä¸ªå‘½ä»¤ç»ˆç«¯ï¼Œåˆ†åˆ«ç”¨äºè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p>
<ul>
<li><code>yarn chain</code> ä½¿ç”¨ hardhat è¿è¡Œæœ¬åœ°åŒºå—é“¾ï¼Œä½œä¸ºåˆçº¦éƒ¨ç½²çš„æœ¬åœ°æµ‹è¯•é“¾ï¼›</li>
<li><code>yarn deploy</code> ç¼–è¯‘ã€éƒ¨ç½²å’Œå‘å¸ƒåˆçº¦ï¼›</li>
<li><code>yarn start</code> å¯åŠ¨ react åº”ç”¨çš„å‰ç«¯ï¼›</li>
</ul>
<p>æŒ‰é¡ºåºåˆ†åˆ«è¿è¡Œä¸Šè¿°å‘½ä»¤ä¹‹åï¼Œæ­¤æ—¶æˆ‘ä»¬å°±å¯ä»¥åœ¨ <code>http://localhost:3000</code>ä¸­è®¿é—®æˆ‘ä»¬çš„åº”ç”¨ã€‚å¦‚æœéœ€è¦é‡æ–°éƒ¨ç½²åˆçº¦ï¼Œè¿è¡Œ <code>yarn deploy --reset</code> å³å¯ã€‚</p>
<p><img src="https://user-images.githubusercontent.com/3297411/155913563-c0e773b7-60d1-4e5f-bdf7-2c4b0ae1df74.png" alt="yarn-start"></p>
<h2><span id="er-bian-xie-erc20-dai-bi-he-yue">äºŒã€ç¼–å†™ ERC20 ä»£å¸åˆçº¦</span></h2>
<p>ç°åœ¨æˆ‘ä»¬è¿›å…¥åˆçº¦ç¼–å†™éƒ¨åˆ†ã€‚æˆ‘ä»¬çš„ç›®æ ‡æ˜¯ç¼–å†™ä¸€ä¸ª ERC20 ä»£å¸åˆçº¦ï¼Œå¹¶ä¸ºåˆ›å»ºè€…é“¸é€  1000 ä¸ªä»£å¸ã€‚</p>
<h3><span id="shi-me-shi-erc20-he-yue-biao-zhun">ä»€ä¹ˆæ˜¯ ERC20 åˆçº¦æ ‡å‡†</span></h3>
<p>ä»£å¸å¯ä»¥åœ¨ä»¥å¤ªåŠä¸­è¡¨ç¤ºä»»ä½•ä¸œè¥¿ï¼Œæ¯”å¦‚ä¿¡èª‰ç§¯åˆ†ï¼Œé»„é‡‘ç­‰ï¼Œè€Œ ERC-20 æä¾›äº†ä¸€ä¸ªåŒè´¨åŒ–ä»£å¸çš„æ ‡å‡†ï¼Œæ¯ä¸ªä»£å¸ä¸å¦ä¸€ä¸ªä»£å¸ï¼ˆåœ¨ç±»å‹å’Œä»·å€¼ä¸Šï¼‰å®Œå…¨ç›¸åŒã€‚</p>
<p>ERC20æ˜¯å„ä¸ªä»£å¸çš„æ ‡å‡†æ¥å£ï¼ŒåŒ…å«ä»¥ä¸‹æ–¹æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">// åç§°</span><br><span class="line">function name() public view returns (string)</span><br><span class="line">// ç¬¦å·</span><br><span class="line">function symbol() public view returns (string)</span><br><span class="line">// åˆçº¦ä½¿ç”¨çš„å°æ•°ä½ï¼Œå¸¸è§ä¸º 18</span><br><span class="line">function decimals() public view returns (uint8)</span><br><span class="line">// ä»£å¸æ€»ä¾›åº”é‡</span><br><span class="line">function totalSupply() public view returns (uint256)</span><br><span class="line">// åœ°å€çš„ä»£å¸æŒæœ‰é‡</span><br><span class="line">function balanceOf(address _owner) public view returns (uint256 balance)</span><br><span class="line">// ä»£å¸åˆ’è½¬</span><br><span class="line">function transfer(address _to, uint256 _value) public returns (bool success)</span><br><span class="line">// ç”¨äºåˆ’è½¬ä»£å¸ï¼Œä½†è¿™äº›ä»£å¸ä¸ä¸€å®šå±äºè°ƒç”¨åˆçº¦çš„ç”¨æˆ·</span><br><span class="line">function transferFrom(address _from, address _to, uint256 _value) public returns (bool success)</span><br><span class="line">// åˆçº¦æˆäºˆç”¨æˆ·ä»£å¸ç®¡ç†æƒé™ï¼Œè°ƒç”¨è€…è®¾ç½® spender æ¶ˆè´¹è‡ªå·± amount æ•°é‡çš„ä»£å¸</span><br><span class="line">function approve(address _spender, uint256 _value) public returns (bool success)</span><br><span class="line">// æ£€æŸ¥ä»£å¸çš„å¯æ¶ˆè´¹ä½™é¢</span><br><span class="line">function allowance(address _owner, address _spender) public view returns (uint256 remaining)</span><br><span class="line"></span><br><span class="line">// äº‹ä»¶</span><br><span class="line">// ä»£å¸è½¬ç§»äº‹ä»¶</span><br><span class="line">event Transfer(address indexed from, address indexed to, uint256 value);</span><br><span class="line">// å½“è°ƒç”¨ approve æ—¶ï¼Œè§¦å‘ Approval äº‹ä»¶</span><br><span class="line">event Approval(</span><br><span class="line">    address indexed owner,</span><br><span class="line">    address indexed spender,</span><br><span class="line">    uint256 value</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­ï¼Œåˆçº¦å¿…éœ€è®¾ç½® <code>totalSupply</code>ã€ <code>balanceOf</code> ã€ <code>transfer</code> ã€ <code>transferFrom</code>ã€ <code>approve</code> ä»¥åŠ <code>allowance</code> è¿™å…­ä¸ªå‡½æ•°ï¼Œå…¶ä»–å¦‚ <code>name</code>ã€ <code>symbol</code> å’Œ <code>decimalsze</code> åˆ™æ˜¯å¯é€‰å®ç°ã€‚</p>
<h3><span id="shi-yong-openzeppelin-ku">ä½¿ç”¨ OpenZeppelin åº“</span></h3>
<p>å¦‚æœä»ä¸Šè¿°çš„åˆçº¦æ ‡å‡†å¼€å§‹ï¼Œæˆ‘ä»¬éœ€è¦å®ç°è¿™å…­ä¸ªå‡½æ•°çš„æ–¹æ³•ï¼Œå¹¸è¿çš„æ˜¯ï¼ŒOpenZeppelin åº“æ˜¯ä¸€ä¸ªæˆç†Ÿçš„åˆçº¦å¼€å‘åº“ï¼Œä¸ºæˆ‘ä»¬å®ç°äº† ERC20 ä»£å¸åŸºæœ¬åŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥åŸºäºè¿™ä¸ªåº“å¼€å‘æˆ‘ä»¬çš„ ERC20 ä»£å¸ï¼Œè¿™å°†å¤§å¤§å‡å°‘æˆ‘ä»¬çš„å·¥ä½œé‡ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ <a href="https://docs.openzeppelin.com/contracts/4.x/erc20" target="_blank" rel="noopener">ERC20 æ ‡å‡†</a> é¡µé¢æŸ¥åˆ°ç›¸å…³çš„ä½¿ç”¨æ–¹æ³•ã€‚</p>
<p>é™¤äº† ERC20ï¼ŒOpenZeppelin åº“è¿˜æä¾›äº†å…¶ä»–åˆçº¦æ ‡å‡†çš„å®ç°ï¼Œæ¯”å¦‚ ERC721ï¼ŒERC777ç­‰ï¼Œä»¥åŠå¤§é‡çš„ç»è¿‡å®‰å…¨å®¡è®¡çš„åº“ï¼Œè¿™äº›å¯¹äºæˆ‘ä»¬å¿«é€Ÿå¼€å‘å’Œå®ç°å®‰å…¨çš„åˆçº¦ä»£ç æä¾›äº†æ”¯æŒã€‚</p>
<h3><span id="bian-xie-dai-ma">ç¼–å†™ä»£ç </span></h3>
<p>æˆ‘ä»¬ä½¿ç”¨ ERC20.sol æ¥å®ç°æˆ‘ä»¬çš„åˆçº¦ï¼Œåˆ›è§ä¸€ä¸ªåä¸º <code>GOLD</code> çš„ä»£å¸ï¼Œä»£å¸ç¬¦å·ä¸º <code>GLD</code>ï¼Œå¹¶ä¸ºåˆ›å»ºè€…é“¸é€  1000 ä¸ªä»£å¸ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pragma solidity &gt;=0.8.0 &lt;0.9.0;</span><br><span class="line">// SPDX-License-Identifier: MIT</span><br><span class="line"></span><br><span class="line">import <span class="string">'@openzeppelin/contracts/token/ERC20/ERC20.sol'</span>;</span><br><span class="line"></span><br><span class="line">// learn more: https://docs.openzeppelin.com/contracts/3.x/erc20</span><br><span class="line"></span><br><span class="line">  constructor() public ERC20(<span class="string">'Gold'</span>, <span class="string">'GLD'</span>) &#123;</span><br><span class="line">    // é“¸é€  1000 * 10 ** 18 ç»™ msg.sender</span><br><span class="line">    _mint(msg.sender, 1000 * 10 ** 18);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­ï¼Œ <code>_mint</code> æ–¹æ³•æ˜¯ ERC20 æä¾›çš„æ–¹æ³•ï¼Œè¯¥æ–¹æ³•åˆ›å»ºç›¸åº”æ•°é‡çš„ä»£å¸ï¼Œå¹¶å°†ä»£å¸å‘é€ç»™è´¦æˆ·ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">/** @dev Creates `amount` tokens and assigns them to `account`, increasing</span><br><span class="line"> * the total supply.</span><br><span class="line"> *</span><br><span class="line"> * Emits a &#123;Transfer&#125; event with `from` set to the zero address.</span><br><span class="line"> *</span><br><span class="line"> * Requirements:</span><br><span class="line"> *</span><br><span class="line"> * - `account` cannot be the zero address.</span><br><span class="line"> */</span><br><span class="line">function _mint(address account, uint256 amount) internal virtual &#123;</span><br><span class="line">    require(account != address(0), &quot;ERC20: mint to the zero address&quot;);</span><br><span class="line"></span><br><span class="line">    _beforeTokenTransfer(address(0), account, amount);</span><br><span class="line"></span><br><span class="line">    _totalSupply += amount;</span><br><span class="line">    _balances[account] += amount;</span><br><span class="line">    emit Transfer(address(0), account, amount);</span><br><span class="line"></span><br><span class="line">    _afterTokenTransfer(address(0), account, amount);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä»£ç åœ°å€ï¼š<a href="https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/token/ERC20/ERC20.sol#L248" target="_blank" rel="noopener">https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/token/ERC20/ERC20.sol#L248</a></p>
<h3><span id="bu-shu-jiao-ben">éƒ¨ç½²è„šæœ¬</span></h3>
<p>æ¥ç€æˆ‘ä»¬ä½¿ç”¨è„šæœ¬è¿›è¡Œéƒ¨ç½²ï¼Œå¹¶å‘åœ°å€å‘é€ 1000 ä»£å¸ï¼Œåœ°å€å¯ä»¥åœ¨ <code>http://localhost:3000</code> ä¸­è¿æ¥æˆ‘ä»¬çš„ Metamask å¾—åˆ°ã€‚éƒ¨ç½²è„šæœ¬åœ°å€ï¼š<code>packages/hardhat-ts/deploy/00_deploy_your_token.ts</code>ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">...</span><br><span class="line"></span><br><span class="line">  const yourToken = await ethers.getContract(&apos;YourToken&apos;, deployer);</span><br><span class="line"></span><br><span class="line">  // å‘é€ä»£å¸</span><br><span class="line">  const result = await yourToken.transfer(&apos;0x169841AA3024cfa570024Eb7Dd6Bf5f774092088&apos;, ethers.utils.parseEther(&apos;1000&apos;));</span><br><span class="line"></span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>ç„¶åæˆ‘ä»¬è¿è¡Œ <code>yarn deploy --reset</code> éƒ¨ç½²åˆçº¦ã€‚</p>
<h3><span id="yan-zheng">éªŒè¯</span></h3>
<ol>
<li>
<p>ä½¿ç”¨ Debug é¡µé¢åŠŸèƒ½è¿›è¡Œæ£€æŸ¥ï¼ŒæŸ¥çœ‹ç”¨æˆ·è´¦æˆ·ä¸­çš„ä»£å¸ä½™é¢ï¼Œå¯ä»¥çœ‹åˆ°è´¦æˆ·ä¸­æœ‰ 1000 ä¸ªä»£å¸ï¼›</p>
<p><img src="https://user-images.githubusercontent.com/3297411/155913531-951312e7-ea2e-497e-a323-722ecd295ca4.png" alt="balance"></p>
</li>
<li>
<p>ä½¿ç”¨ <code>transfer()</code> å°†ä»£å¸è½¬ç»™å¦ä¸€ä¸ªè´¦æˆ·ï¼›</p>
<p>åœ¨ Debug ä¸­ï¼Œä½¿ç”¨ <code>transfer</code> åŠŸèƒ½ï¼Œè¾“å…¥ç›®æ ‡é’±åŒ…åœ°å€ <code>0xc12ae5Ba30Da6eB11978939379D383beb5Df9b33</code>ï¼Œä»¥åŠå‘é€çš„æ•°é‡ <code>1000000000000000000000</code>ï¼ˆ1000*1E18ï¼Œ1åè¾¹æœ‰21ä¸ª0ï¼‰ï¼Œç‚¹å‡»å‘é€ã€‚ç­‰äº¤æ˜“å®Œæˆä¹‹åï¼Œå¯ä»¥åˆ†åˆ«æŸ¥çœ‹åŸæ¥è´¦æˆ·å’Œç›®æ ‡è´¦æˆ·çš„ä»£å¸æ•°é‡ï¼Œå¯ä»¥çœ‹åˆ°åŸæ¥çš„å˜æˆäº† 0ï¼Œç›®æ ‡è´¦æˆ·æ˜¯ 1000ã€‚</p>
<p><img src="https://user-images.githubusercontent.com/3297411/155913544-122451a0-8533-46cf-9aa3-7f90e8fa59ab.png" alt="transfer"></p>
</li>
</ol>
<p>æ³¨æ„ï¼š</p>
<ul>
<li>å¦‚æœå‘é€æ—¶å‡ºç°ä½™é¢ä¸è¶³çš„æç¤ºï¼Œå¯ä»¥ä½¿ç”¨é¡µé¢å·¦ä¸‹è§’çš„ Faucet ä¸ºè´¦æˆ·å……å€¼ã€‚</li>
<li>éªŒè¯å®Œæˆä¹‹åï¼Œéœ€è¦å°† <code>00_deploy_your_token.ts</code> ä¸­çš„ transfer ä»£ç æ³¨é‡Šäº†ï¼Œä¸ç„¶ä¼šå½±å“ä¹‹åçš„æ­¥éª¤ã€‚</li>
</ul>
<h2><span id="san-cheng-xiao-shang-he-yue-gou-mai">ä¸‰ã€æ‰¿é”€å•†åˆçº¦ â€” è´­ä¹°</span></h2>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ‰¿é”€å•†åˆçº¦ï¼Œè¿™ä¸ªåˆçº¦å…è®¸ç”¨æˆ·é€šè¿‡ä»¥å¤ªè´­ä¹°ä»£å¸ã€‚</p>
<p>ä¸ºäº†å®Œæˆè¿™ä¸ªåŠŸèƒ½ï¼Œæˆ‘ä»¬éœ€è¦ï¼š</p>
<ol>
<li>è®¾ç½®å…‘æ¢æ¯”ä¾‹ï¼Œæ•™ç¨‹ä¸­ä¸º <code>tokensPerEth=100</code> ï¼Œä¹Ÿå°±æ˜¯ 1ä¸ªä»¥å¤ªå¯ä»¥å…‘æ¢ 100 GLDï¼›</li>
<li>å®ç° <code>buyTokens</code> å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å¿…é¡»æ˜¯ <code>payable</code>ï¼Œå¯ä»¥æ¥å—å‘é€çš„ä»¥å¤ªï¼Œè®¡ç®—å¯¹åº”çš„ <code>GLD</code> æ•°é‡ï¼Œç„¶åä½¿ç”¨ <code>transfer</code> å°†ç›¸åº”çš„ <code>GLD</code> ä»£å¸å‘é€ç»™è´­ä¹°è€… <code>msg.sender</code>ï¼›</li>
<li>è§¦å‘ä¸€ä¸ª <code>BuyTokens</code> äº‹ä»¶ï¼Œè®°å½•è´­ä¹°è€…ï¼Œä½¿ç”¨çš„ ETH æ•°é‡ä»¥åŠè´­ä¹°çš„ GLD æ•°é‡ï¼›</li>
<li>å®ç°ç¬¬äºŒä¸ªå‡½æ•° <code>withdraw</code>ï¼Œç”¨æ¥å°†åˆçº¦ä¸­çš„ ETH å…¨éƒ¨æå–åˆ°åˆçº¦çš„æ‰€æœ‰è€…ï¼ˆownerï¼‰åœ°å€ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸¤ç§æ–¹å¼è®¾ç½®åˆçº¦çš„æ‰€æœ‰è€…ï¼š
<ol>
<li>éƒ¨ç½²æ—¶ï¼Œä½¿ç”¨æˆ‘ä»¬èƒ½æ§åˆ¶çš„é’±åŒ…åœ°å€è¿›è¡Œéƒ¨ç½²ï¼Œå¹¶è®¾ç½®æ‰€æœ‰è€…ï¼›</li>
<li>ä½¿ç”¨ä»»æ„åœ°å€éƒ¨ç½²ï¼Œéƒ¨ç½²ç»“æŸä¹‹åè¿›è¡Œåˆçº¦æ‰€æœ‰æƒè½¬ç§»ï¼›</li>
</ol>
</li>
</ol>
<p>åœ¨è¿™ä¸ªæ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ç¬¬äºŒä¸ªæ–¹å¼ï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥ä¸ç”¨å°†æˆ‘ä»¬æ§åˆ¶çš„åœ°å€çš„ç§é’¥æ·»åŠ åˆ°é¡¹ç›®é…ç½®ä¸­ï¼Œé™ä½æš´éœ²ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">pragma solidity &gt;=0.8.0 &lt;0.9.0;</span><br><span class="line">// SPDX-License-Identifier: MIT</span><br><span class="line"></span><br><span class="line">import &quot;@openzeppelin/contracts/access/Ownable.sol&quot;;</span><br><span class="line">import &apos;./YourToken.sol&apos;;</span><br><span class="line"></span><br><span class="line">contract Vendor is Ownable &#123;</span><br><span class="line">  YourToken yourToken;</span><br><span class="line">  uint256 public tokensPerEth = 100;</span><br><span class="line"></span><br><span class="line">  // è´­ä¹°ä»£å¸äº‹ä»¶</span><br><span class="line">  event BuyTokens(address buyer, uint256 amountOfEth, uint256 amountOfTokens);</span><br><span class="line"></span><br><span class="line">  constructor(address tokenAddress) public &#123;</span><br><span class="line">    yourToken = YourToken(tokenAddress);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // å…è®¸ç”¨æˆ·ä½¿ç”¨ EHT è´­ä¹°ä»£å¸</span><br><span class="line">  function buyTokens() payable public &#123;</span><br><span class="line">    // æ£€æŸ¥æ˜¯å¦æœ‰è¶³å¤Ÿçš„ ETH</span><br><span class="line">    require(msg.value &gt; 0, &quot;Not enought ether&quot;);</span><br><span class="line"></span><br><span class="line">    uint256 amountOfTokens = msg.value * tokensPerEth;</span><br><span class="line"></span><br><span class="line">    // æ£€æŸ¥æ‰¿é”€å•†æ˜¯å¦æœ‰è¶³å¤Ÿçš„ä»£å¸</span><br><span class="line">    uint256 tokenBalance = yourToken.balanceOf(address(this));</span><br><span class="line">    require(tokenBalance &gt; amountOfTokens, &quot;Not enought tokens&quot;);</span><br><span class="line">    </span><br><span class="line">    // å‘é€ä»£å¸</span><br><span class="line">    bool sent =  yourToken.transfer(msg.sender, amountOfTokens);</span><br><span class="line">    require(sent, &quot;Failed to transfer token to the buyer&quot;);</span><br><span class="line"></span><br><span class="line">    emit BuyTokens(msg.sender, msg.value, amountOfTokens);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // å…è®¸æ‰€æœ‰è€…å–å‡ºæ‰€æœ‰ä»£å¸</span><br><span class="line">  function withdraw() public onlyOwner &#123;</span><br><span class="line"></span><br><span class="line">    uint256 balance = address(this).balance;</span><br><span class="line">    require(balance &gt; 0, &quot;No ether to withdraw&quot;);</span><br><span class="line">    </span><br><span class="line">    // å‘é€ä»£å¸ç»™æ‰€æœ‰è€…</span><br><span class="line">    (bool sent, ) = msg.sender.call&#123;value: balance&#125;(&quot;&quot;);</span><br><span class="line">    require(sent, &quot;Failed to withdraw balance&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">  // ToDo: create a sellTokens() function:</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­ï¼Œ <code>Ownable</code> å¯ä»¥è¿›è¡Œæƒé™æ§åˆ¶ï¼Œåˆçº¦æä¾›çš„<code>onlyOwner</code>ä¿®æ”¹å™¨å¯ä»¥ç”¨æ¥é™åˆ¶æŸäº›ç‰¹å®šåˆçº¦å‡½æ•°çš„è®¿é—®æƒé™ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬çš„ <code>withdraw</code> å‡½æ•°å¿…éœ€é™åˆ¶åˆçº¦çš„æ‰€æœ‰è¿™æ‰èƒ½æå–æ‰€æœ‰çš„èµ„é‡‘ã€‚åŒæ—¶ï¼Œè¿™ä¸ªåˆçº¦æä¾›äº† <code>transferOwnership</code> å‡½æ•°ï¼Œå¯ä»¥ç”¨æ¥è½¬ç§»åˆçº¦çš„æ‰€æœ‰è€…ï¼Œè¿™ä¸ªå°†åœ¨æˆ‘ä»¬çš„è„šæœ¬éƒ¨åˆ†ä¸­ä½¿ç”¨ã€‚</p>
<p>å¯¹äºéƒ¨ç½²è„šæœ¬ï¼Œæˆ‘ä»¬éœ€è¦å®Œæˆä»¥ä¸‹åŠŸèƒ½ï¼š</p>
<ol>
<li>åœ¨éƒ¨ç½²çš„æ—¶å€™å°†æ‰€æœ‰çš„ä»£å¸å‘é€åˆ°æ‰¿é”€å•†çš„åˆçº¦åœ°å€ <code>vendor.address</code> ï¼Œè€Œä¸æ˜¯æˆ‘ä»¬ä¹‹å‰çš„åœ°å€ï¼›</li>
<li>ä¸ºäº†èƒ½å°†æ‰¿é”€å•†åˆçº¦ä¸­çš„æ‰€æœ‰ ETH æå–å‡ºæ¥ï¼Œéœ€è¦å°†åˆçº¦çš„æ‰€æœ‰æƒ <code>ownership</code> è½¬ç§»åˆ°æˆ‘ä»¬èƒ½æ§åˆ¶çš„åœ°å€ï¼Œæ¯”å¦‚æˆ‘ä»¬åœ¨å‰ç«¯ä½¿ç”¨çš„åœ°å€ã€‚</li>
</ol>
<p>è„šæœ¬ä½ç½®ï¼š <code>packages/hardhat-ts/deploy/01_deploy_vendor.ts</code></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"> // You might need the previously deployed yourToken:</span><br><span class="line"> const yourToken = await ethers.getContract(&apos;YourToken&apos;, deployer);</span><br><span class="line"></span><br><span class="line"> // éƒ¨ç½²æ‰¿é”€å•†åˆçº¦</span><br><span class="line"> await deploy(&apos;Vendor&apos;, &#123;</span><br><span class="line">   // Learn more about args here: https://www.npmjs.com/package/hardhat-deploy#deploymentsdeploy</span><br><span class="line">   from: deployer,</span><br><span class="line">   args: [yourToken.address],</span><br><span class="line">   log: true,</span><br><span class="line"> &#125;);</span><br><span class="line">// è·å–éƒ¨ç½²çš„åˆçº¦</span><br><span class="line"> const vendor = await ethers.getContract(&apos;Vendor&apos;, deployer);</span><br><span class="line"></span><br><span class="line"> // å‘é€ 1000 ä¸ªä»£å¸ç»™æ‰¿é”€å•†</span><br><span class="line"> console.log(&apos;\n ğŸµ  Sending all 1000 tokens to the vendor...\n&apos;);</span><br><span class="line"> await yourToken.transfer(vendor.address, ethers.utils.parseEther(&apos;1000&apos;));</span><br><span class="line"></span><br><span class="line"> // è½¬ç§»æ‰€æœ‰æƒ</span><br><span class="line"> await vendor.transferOwnership(&apos;0x169841AA3024cfa570024Eb7Dd6Bf5f774092088&apos;);</span><br></pre></td></tr></table></figure>
<h3><span id="bu-shu-he-yue">éƒ¨ç½²åˆçº¦</span></h3>
<p>å®Œæˆä¸Šè¿°ä»£ç ä¹‹åï¼Œæˆ‘ä»¬é‡æ–°éƒ¨ç½²æˆ‘ä»¬çš„åˆçº¦ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">yarn deploy --reset</span><br></pre></td></tr></table></figure>
<p>å¯¹åº”çš„è¾“å‡ºç»“æœä¸ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ yarn deploy --reset</span><br><span class="line"></span><br><span class="line">Compiling 7 files with 0.8.6</span><br><span class="line">Generating typings for: 7 artifacts in dir: ../vite-app-ts/src/generated/contract-types for target: ethers-v5</span><br><span class="line">Successfully generated 15 typings!</span><br><span class="line">Compilation finished successfully</span><br><span class="line">deploying &quot;YourToken&quot; (tx: 0x758e492bc71e9de37cf109aa6aa966fc6c042d086babce32ddd76af02ec22acb)...: deployed at 0x0DCd1Bf9A1b36cE34237eEaFef220932846BCD82 with 639137 gas</span><br><span class="line">deploying &quot;Vendor&quot; (tx: 0x7b0402937081b72f59abb9994e3773b0283116e1106665766af31bf246b466cc)...: deployed at 0x9A676e781A523b5d0C0e43731313A708CB607508 with 482680 gas</span><br><span class="line"></span><br><span class="line"> ğŸµ  Sending all 1000 tokens to the vendor...</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥ä»å‘½ä»¤è¡Œè¾“å‡ºä¸­çœ‹åˆ°åˆçº¦éƒ¨ç½²çš„åœ°å€ä¸ºï¼š</p>
<ul>
<li>æ‰¿é”€å•†åˆçº¦åœ°å€ï¼š <code>0x9A676e781A523b5d0C0e43731313A708CB607508</code></li>
<li>ä»£å¸åœ°å€ï¼š <code>0x0DCd1Bf9A1b36cE34237eEaFef220932846BCD82</code></li>
</ul>
<h3><span id="yan-zheng">éªŒè¯</span></h3>
<p>æˆ‘ä»¬é€šè¿‡ä»¥ä¸‹æ­¥éª¤è¿›è¡ŒéªŒè¯ï¼š</p>
<ol>
<li>
<p>é€šè¿‡ Debug é¡µé¢æŸ¥çœ‹æ‰¿é”€å•† ï¼ˆVendorï¼‰åˆçº¦åœ°å€åˆå§‹æ—¶æ˜¯å¦æœ‰ 1000 ä¸ªä»£å¸ï¼›</p>
</li>
<li>
<p>ä½¿ç”¨ 0.1 ETH è´­ä¹° 10 ä¸ª GLDï¼šæˆ‘ä»¬ä½¿ç”¨ Buy Tokens åŠŸèƒ½è´­ä¹° 10 ä¸ªä»£å¸ï¼Œå¯ä»¥çœ‹åˆ°æ­¤æ—¶çš„ä»·æ ¼çº¦ä¸º 0.1 ETHï¼ˆETH ä»·æ ¼ä¸º 2766.7 ç¾å…ƒï¼‰ã€‚</p>
<p><img src="https://user-images.githubusercontent.com/3297411/155913532-492474ae-5a67-4fcc-8c37-eb768c8ae18e.png" alt="buyTokens"></p>
</li>
<li>
<p>å°†è´­ä¹°çš„ä»£å¸å‘é€ç»™å¦ä¸€ä¸ªè´¦æˆ·ï¼šåŒæ ·ä½¿ç”¨é¡µé¢ Transfer Tokens åŠŸèƒ½å®Œæˆï¼›</p>
<p><img src="https://user-images.githubusercontent.com/3297411/155913543-fe8f7c93-aa6b-4333-8c3f-87dd30ced5d6.png" alt="tokenBalance"></p>
</li>
<li>
<p>ä½¿ç”¨æ‰€æœ‰è€…è´¦æˆ·ï¼ŒæŸ¥çœ‹æ˜¯å¦èƒ½å…¨éƒ¨å–å‡ºåˆçº¦ä¸­çš„ ETHï¼šåœ¨ Debug é¡µé¢ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>withdraw</code> åŠŸèƒ½ï¼Œå°è¯•å°†æ‰¿é”€å•†åˆçº¦ä¸­çš„ ETH å…¨éƒ¨å–å‡ºï¼Œå¯ä»¥çœ‹åˆ°ï¼Œå½“äº¤æ˜“å®Œæˆä»¥åï¼Œåˆçº¦çš„ä½™é¢å˜ä¸ºäº†0ï¼š</p>
</li>
</ol>
<pre><code>![vendorBalanceBefore](https://user-images.githubusercontent.com/3297411/155913554-5f0e78f5-0836-4d53-b0b8-adb44a37413c.png)

å˜ä¸ºï¼š

![vendorBalanceAfter](https://user-images.githubusercontent.com/3297411/155913548-289343ef-d51a-4fbb-8134-071918589636.png)
</code></pre>
<h2><span id="si-cheng-xiao-shang-he-yue-hui-gou">å››ã€æ‰¿é”€å•†åˆçº¦ â€” å›è´­</span></h2>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬æ·»åŠ æ‰¿é”€å•†åˆçº¦çš„å›è´­ä»£å¸åŠŸèƒ½ï¼Œä¹Ÿå°±æ˜¯å…è®¸ç”¨æˆ·é€šè¿‡å‘é€ä»£å¸ç»™æ‰¿é”€å•†åˆçº¦ï¼Œæ‰¿é”€å•†åˆçº¦å°†å¯¹åº”çš„ETHå‘ç»™ç”¨æˆ·è´¦æˆ·ã€‚ä½†æ˜¯åœ¨ä»¥å¤ªåŠä¸­ï¼Œåˆçº¦åªèƒ½é€šè¿‡ payable æ¥å— ETHï¼Œæ— æ³•æ¥å—ç›´æ¥å‘é€ä»£å¸ï¼Œå¦‚æœç›´æ¥å‘åˆçº¦å‘é€ä»£å¸ï¼Œä»£å¸å°†ä¼šæ°¸ä¹…æ¶ˆå¤±ã€‚æ‰€ä»¥åœ¨ ERC20 æ ‡å‡†ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ <code>approve</code> å’Œ <code>tranferFrom</code> è€…ä¸¤ä¸ªå‡½æ•°æ¥å®Œæˆè¿™ä¸ªè¿‡ç¨‹ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">approve(address spender, uint256 amount) -&gt; bool</span><br><span class="line">transferFrom(address from, address to, uint256 amount) -&gt; bool</span><br></pre></td></tr></table></figure>
<p>é¦–å…ˆï¼Œç”¨æˆ·é€šè¿‡è°ƒç”¨ <code>approve</code> å‡½æ•°æˆæƒæ‰¿é”€å•†åˆçº¦ï¼ˆ <code>spender</code> ï¼‰å¤„ç† <code>amount</code> æ•°é‡çš„ä»£å¸ï¼Œç„¶åï¼Œè°ƒç”¨ <code>transferFrom</code> å‡½æ•°å°†ä»£å¸ä»ç”¨æˆ·è´¦æˆ·ï¼ˆ <code>from</code> ï¼‰è½¬ç§» <code>amount</code> æ•°é‡çš„ä»£å¸ç»™æ‰¿é”€å•†åˆçº¦ï¼ˆ <code>to</code> ï¼‰ã€‚è¿™å…¶ä¸­çš„éš¾ç‚¹åœ¨äº <code>approve</code> å’Œ <code>transferFrom</code> å‡½æ•°ã€‚æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹è¿™ä¸¤ä¸ªå‡½æ•°åœ¨ OpenZeppelin ä¸­å…·ä½“å®ç°ï¼Œé¦–å…ˆæ˜¯ <code>approve</code>ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">  mapping(address =&gt; mapping(address =&gt; uint256)) private _allowances;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line">   * @dev See &#123;IERC20-approve&#125;.</span><br><span class="line">   *</span><br><span class="line">   * NOTE: If `amount` is the maximum `uint256`, the allowance is not updated on</span><br><span class="line">   * `transferFrom`. This is semantically equivalent to an infinite approval.</span><br><span class="line">   *</span><br><span class="line">   * Requirements:</span><br><span class="line">   *</span><br><span class="line">   * - `spender` cannot be the zero address.</span><br><span class="line">   */</span><br><span class="line">  function approve(address spender, uint256 amount) public virtual override returns (bool) &#123;</span><br><span class="line">      address owner = _msgSender();</span><br><span class="line">      _approve(owner, spender, amount);</span><br><span class="line">      return true;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * @dev Sets `amount` as the allowance of `spender` over the `owner` s tokens.</span><br><span class="line">   *</span><br><span class="line">   * This internal function is equivalent to `approve`, and can be used to</span><br><span class="line">   * e.g. set automatic allowances for certain subsystems, etc.</span><br><span class="line">   *</span><br><span class="line">   * Emits an &#123;Approval&#125; event.</span><br><span class="line">   *</span><br><span class="line">   * Requirements:</span><br><span class="line">   *</span><br><span class="line">   * - `owner` cannot be the zero address.</span><br><span class="line">   * - `spender` cannot be the zero address.</span><br><span class="line">   */</span><br><span class="line">  function _approve(</span><br><span class="line">      address owner,</span><br><span class="line">      address spender,</span><br><span class="line">      uint256 amount</span><br><span class="line">  ) internal virtual &#123;</span><br><span class="line">      require(owner != address(0), &quot;ERC20: approve from the zero address&quot;);</span><br><span class="line">      require(spender != address(0), &quot;ERC20: approve to the zero address&quot;);</span><br><span class="line"></span><br><span class="line">      _allowances[owner][spender] = amount;</span><br><span class="line">      emit Approval(owner, spender, amount);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>ä»ä¸Šé¢å¯ä»¥çœ‹å‡ºï¼Œ <code>approve</code> å‡½æ•°è°ƒç”¨äº† <code>_approve</code>ï¼Œ <code>_approve</code> ä¸­ç”¨ <code>_allowances</code> è¿™ä¸ªå“ˆå¸Œè®°å½•äº† <code>owner</code> å’Œ <code>spender</code> ä¹‹é—´çš„æˆæƒæ•°é‡ <code>amount</code>ã€‚å› æ­¤å¯ä»¥æ¨æ–­ï¼Œ <code>transferFrom</code> å‡½æ•°ä»¥åŠå…¶ä»–éœ€è¦æˆæƒæƒ…å†µçš„å‡½æ•°éƒ½ä½¿ç”¨äº† <code>_allowances</code> è¿™ä¸ªå˜é‡ï¼Œæ¯”å¦‚ <code>allowance</code> å‡½æ•°ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">/**</span><br><span class="line"> * @dev See &#123;IERC20-allowance&#125;.</span><br><span class="line"> */</span><br><span class="line">function allowance(address owner, address spender) public view virtual override returns (uint256) &#123;</span><br><span class="line">    return _allowances[owner][spender];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * @dev Updates `owner` s allowance for `spender` based on spent `amount`.</span><br><span class="line"> *</span><br><span class="line"> * Does not update the allowance amount in case of infinite allowance.</span><br><span class="line"> * Revert if not enough allowance is available.</span><br><span class="line"> *</span><br><span class="line"> * Might emit an &#123;Approval&#125; event.</span><br><span class="line"> */</span><br><span class="line">function _spendAllowance(</span><br><span class="line">    address owner,</span><br><span class="line">    address spender,</span><br><span class="line">    uint256 amount</span><br><span class="line">) internal virtual &#123;</span><br><span class="line">    uint256 currentAllowance = allowance(owner, spender);</span><br><span class="line">    if (currentAllowance != type(uint256).max) &#123;</span><br><span class="line">        require(currentAllowance &gt;= amount, &quot;ERC20: insufficient allowance&quot;);</span><br><span class="line">        unchecked &#123;</span><br><span class="line">            _approve(owner, spender, currentAllowance - amount);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * @dev Moves `amount` of tokens from `sender` to `recipient`.</span><br><span class="line"> *</span><br><span class="line"> * This internal function is equivalent to &#123;transfer&#125;, and can be used to</span><br><span class="line"> * e.g. implement automatic token fees, slashing mechanisms, etc.</span><br><span class="line"> *</span><br><span class="line"> * Emits a &#123;Transfer&#125; event.</span><br><span class="line"> *</span><br><span class="line"> * Requirements:</span><br><span class="line"> *</span><br><span class="line"> * - `from` cannot be the zero address.</span><br><span class="line"> * - `to` cannot be the zero address.</span><br><span class="line"> * - `from` must have a balance of at least `amount`.</span><br><span class="line"> */</span><br><span class="line">function _transfer(</span><br><span class="line">    address from,</span><br><span class="line">    address to,</span><br><span class="line">    uint256 amount</span><br><span class="line">) internal virtual &#123;</span><br><span class="line">    require(from != address(0), &quot;ERC20: transfer from the zero address&quot;);</span><br><span class="line">    require(to != address(0), &quot;ERC20: transfer to the zero address&quot;);</span><br><span class="line"></span><br><span class="line">    _beforeTokenTransfer(from, to, amount);</span><br><span class="line"></span><br><span class="line">    uint256 fromBalance = _balances[from];</span><br><span class="line">    require(fromBalance &gt;= amount, &quot;ERC20: transfer amount exceeds balance&quot;);</span><br><span class="line">    unchecked &#123;</span><br><span class="line">        _balances[from] = fromBalance - amount;</span><br><span class="line">    &#125;</span><br><span class="line">    _balances[to] += amount;</span><br><span class="line"></span><br><span class="line">    emit Transfer(from, to, amount);</span><br><span class="line"></span><br><span class="line">    _afterTokenTransfer(from, to, amount);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * @dev See &#123;IERC20-transferFrom&#125;.</span><br><span class="line"> *</span><br><span class="line"> * Emits an &#123;Approval&#125; event indicating the updated allowance. This is not</span><br><span class="line"> * required by the EIP. See the note at the beginning of &#123;ERC20&#125;.</span><br><span class="line"> *</span><br><span class="line"> * NOTE: Does not update the allowance if the current allowance</span><br><span class="line"> * is the maximum `uint256`.</span><br><span class="line"> *</span><br><span class="line"> * Requirements:</span><br><span class="line"> *</span><br><span class="line"> * - `from` and `to` cannot be the zero address.</span><br><span class="line"> * - `from` must have a balance of at least `amount`.</span><br><span class="line"> * - the caller must have allowance for ``from``&apos;s tokens of at least</span><br><span class="line"> * `amount`.</span><br><span class="line"> */</span><br><span class="line">function transferFrom(</span><br><span class="line">    address from,</span><br><span class="line">    address to,</span><br><span class="line">    uint256 amount</span><br><span class="line">) public virtual override returns (bool) &#123;</span><br><span class="line">    address spender = _msgSender();</span><br><span class="line">    _spendAllowance(from, spender, amount);</span><br><span class="line">    _transfer(from, to, amount);</span><br><span class="line">    return true;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨ <code>transferFrom</code> å‡½æ•°ä¸­ï¼Œå…ˆä½¿ç”¨ <code>_spendAllowance</code> è¿›è¡Œæˆæƒæ•°é‡æ£€æŸ¥å¹¶æ›´æ–°æˆæƒæ•°é‡ï¼Œç„¶åå†ä½¿ç”¨ <code>_transfer</code> è¿›è¡Œä»£å¸åˆ’è½¬ï¼Œè€Œ <code>_spendAllowance</code> ä¸­æ­£æ˜¯è°ƒç”¨äº† <code>allowance</code> è¿™ä¸ªå‡½æ•°ã€‚</p>
<h3><span id="he-yue-shi-xian">åˆçº¦å®ç°</span></h3>
<p>åˆçº¦çš„å‡½æ•°å®ç°å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">...</span><br><span class="line">  event SellTokens(address seller, uint256 amountOfTokens, uint256 amountOfETH);</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">  // å…è®¸ç”¨æˆ·ä½¿ç”¨ä»£å¸æ¢å› ETH</span><br><span class="line">  function sellTokens(uint256 amountToSell) public &#123;</span><br><span class="line">    // ä»·å·®æ˜¯å¦åˆç†</span><br><span class="line">    require(amountToSell &gt; 0, &quot;Amount to sell must be greater than 0&quot;);</span><br><span class="line">    </span><br><span class="line">    // æ£€æŸ¥ç”¨æˆ·æ˜¯å¦æœ‰è¶³å¤Ÿçš„ä»£å¸</span><br><span class="line">    uint256 userBalance = yourToken.balanceOf(msg.sender));</span><br><span class="line">    require(userBalance &gt;= amountToSell, &quot;Not enought tokens&quot;);</span><br><span class="line"></span><br><span class="line">    // æ£€æŸ¥æ‰¿é”€å•†æ˜¯å¦æœ‰è¶³å¤Ÿçš„ ETH</span><br><span class="line">    uint256 amountOfEthNeeded = amountToSell / tokensPerEth;</span><br><span class="line">    uint256 venderBalance = address(this).balance;</span><br><span class="line">    require(amountOfEthNeeded &lt;= venderBalance, &quot;Not enought ether&quot;);</span><br><span class="line"></span><br><span class="line">    // ç”¨æˆ·å‘é€ä»£å¸ç»™æ‰¿é”€å•†</span><br><span class="line">    bool sent =  yourToken.transferFrom(msg.sender, address(this), amountToSell);</span><br><span class="line">    require(sent, &quot;Failed to transfer tokens from seller to vender&quot;);</span><br><span class="line"></span><br><span class="line">    // æ‰¿é”€å•†å‘é€ ETH ç»™ç”¨æˆ·</span><br><span class="line">    (bool sent, ) = msg.sender.call&#123;value: amountOfEthNeeded&#125;(&quot;&quot;);</span><br><span class="line">    require(sent, &quot;Failed to send ether from vender to seller&quot;);</span><br><span class="line"></span><br><span class="line">    emit SellTokens(msg.sender, amountToSell, amountOfEthNeeded);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h3><span id="bu-shu-he-yue">éƒ¨ç½²åˆçº¦</span></h3>
<p>æˆ‘ä»¬å†æ¬¡éƒ¨ç½²æ–°çš„åˆçº¦ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ yarn deploy --reset</span><br><span class="line">Compiling 7 files with 0.8.6</span><br><span class="line"></span><br><span class="line">Generating typings for: 7 artifacts in dir: ../vite-app-ts/src/generated/contract-types for target: ethers-v5</span><br><span class="line">Successfully generated 15 typings!</span><br><span class="line">Compilation finished successfully</span><br><span class="line">deploying &quot;YourToken&quot; (tx: 0xd087814faeb6a8f1a7205d443550419b68d252bcd071e30c7965844105b761ac)...: deployed at 0x68B1D87F95878fE05B998F19b66F4baba5De1aed with 639137 gas</span><br><span class="line">deploying &quot;Vendor&quot; (tx: 0xafaf257948f8c87e0a836eac6e2bbc1ec38026a5c2a0dfc0f71823a4ace635fd)...: deployed at 0x3Aa5ebB10DC797CAC828524e59A333d0A371443c with 694098 gas</span><br><span class="line"></span><br><span class="line"> ğŸµ  Sending all 1000 tokens to the vendor...</span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶ï¼Œåˆçº¦åœ°å€å˜ä¸ºï¼š</p>
<ul>
<li>æ‰¿é”€å•†åˆçº¦åœ°å€ï¼š <code>0x3Aa5ebB10DC797CAC828524e59A333d0A371443c</code></li>
<li>ä»£å¸åœ°å€ï¼š <code>0x68B1D87F95878fE05B998F19b66F4baba5De1aed</code></li>
</ul>
<h3><span id="yan-zheng">éªŒè¯</span></h3>
<p>éªŒè¯è¿‡ç¨‹éœ€è¦åŒ…å«ä¸¤æ­¥ï¼š</p>
<ol>
<li>
<p>å…ˆåœ¨ Debug é¡µé¢ä½¿ç”¨ä»£å¸çš„ <code>approve</code> å…è®¸æ‰¿é”€å•†åˆçº¦å¤„ç† 10 ä¸ªä»£å¸ï¼š</p>
<p><img src="https://user-images.githubusercontent.com/3297411/155913525-657975ef-e67c-4df6-bf03-36eff6801d7e.png" alt="approve"></p>
<p>åœ¨ <code>ç¼–è¾‘æƒé™</code> ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æŸ¥çœ‹åˆ°æˆæƒçš„ä»£å¸æ•°é‡ï¼š</p>
<p><img src="https://user-images.githubusercontent.com/3297411/155913530-117ea47b-8000-4f8c-be5c-cd21a118ed04.png" alt="approveAmount"></p>
</li>
<li>
<p>ä½¿ç”¨æ‰¿é”€å•†çš„ <code>sellTokens</code> å°† 10 ä¸ªä»£å¸æ¢æˆ ETHã€‚å¦‚æœä¸Šä¸€æ­¥æ²¡æœ‰ä½¿ç”¨ <code>approve</code> çš„è¯ï¼Œç¨‹åºä¼šæŠ¥é”™ã€‚</p>
<p><img src="https://user-images.githubusercontent.com/3297411/155913537-c085ad8b-295b-42b8-8755-ae9a43eec4e9.png" alt="sellTokens"></p>
</li>
</ol>
<p>åˆ°è¿™ä¸€æ­¥ï¼Œæˆ‘ä»¬å°±å®Œæˆäº†åˆçº¦çš„ç¼–å†™ã€‚</p>
<h2><span id="wu-bu-shu-dao-ce-shi-wang-luo">äº”ã€éƒ¨ç½²åˆ°æµ‹è¯•ç½‘ç»œ</span></h2>
<p>æˆ‘ä»¬å°†éƒ¨ç½²åˆçº¦åˆ°æµ‹è¯•ç½‘ç»œä¸­ï¼Œä½¿ç”¨çš„æµ‹è¯•ç½‘ç»œæ˜¯ <code>rinkeby</code> ï¼š</p>
<ol>
<li>ä¿®æ”¹ä»¥ä¸‹å˜é‡ä¸º <code>rinkeby</code> ï¼š
<ol>
<li><code>packages/hardhat-ts/hardhat.config.ts</code> çš„ <code>defaultNetwork</code> å˜é‡ï¼Œ</li>
<li><code>packages/vite-app-ts/src/config/providersConfig.ts</code> ä¸­çš„ <code>targetNetworkInfo</code> å˜é‡</li>
</ol>
</li>
<li>æŸ¥çœ‹å¯ç”¨è´¦æˆ·ï¼š <code>yarn account</code> ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°å¯ç”¨è´¦æˆ·ï¼Œåˆ™ä½¿ç”¨ <code>yarn generate</code> ç”Ÿæˆï¼›</li>
<li>ä½¿ç”¨ <a href="https://faucet.paradigm.xyz/" target="_blank" rel="noopener">faucet.paradigm.xyz</a> è·å–ä¸€äº›æµ‹è¯•ç”¨çš„çš„ ETHï¼Œå¯ä»¥ä½¿ç”¨å¯¹åº”çš„åŒºå—æµè§ˆå™¨æŸ¥çœ‹è´¦æˆ·æƒ…å†µï¼Œæ¯”å¦‚ <a href="https://rinkeby.etherscan.io/" target="_blank" rel="noopener">https://rinkeby.etherscan.io/</a>ï¼Œå½“æˆ‘ä»¬å®Œæˆæµ‹è¯•ç”¨å¸çš„ç”³è¯·ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è´¦æˆ·ä½™é¢ä¸º 0.1ETHï¼›</li>
<li>å†æ¬¡ä½¿ç”¨ <code>yarn deploy</code> è¿›è¡Œåˆçº¦éƒ¨ç½²ï¼š</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ yarn deploy</span><br><span class="line">Nothing to compile</span><br><span class="line">No need to generate any newer typings.</span><br><span class="line">deploying <span class="string">"YourToken"</span> (tx: 0xa7a89a2917cfa355d1305643dc89f54d776186c0059977b0a237737fa37dff62)...: deployed at 0x0F0D10eF3589cE896E9E54E09568cB7a5371e398 with 639137 gas</span><br><span class="line">deploying <span class="string">"Vendor"</span> (tx: 0x3a1f02b77de29704a16599067c8e10abb0da78e547ea0eea8200761da5d45715)...: deployed at 0xb335Fc61D759C041503dC17266575229E593DE17 with 694098 gas</span><br><span class="line"></span><br><span class="line"> ğŸµ  Sending all 1000 tokens to the vendor...</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼Œåˆçº¦éƒ¨ç½²æˆåŠŸï¼Œæ­¤æ—¶æˆ‘ä»¬å¯ä»¥åœ¨çº¿ä¸Šæµ‹è¯•ç½‘ç»œæŸ¥çœ‹åˆ°å…·ä½“çš„åˆçº¦éƒ¨ç½²æƒ…å†µï¼š</p>
<ul>
<li>GLD åˆçº¦åœ°å€ï¼š<a href="https://rinkeby.etherscan.io/address/0x0F0D10eF3589cE896E9E54E09568cB7a5371e398" target="_blank" rel="noopener">https://rinkeby.etherscan.io/address/0x0F0D10eF3589cE896E9E54E09568cB7a5371e398</a></li>
<li>æ‰¿é”€å•†åˆçº¦åœ°å€ï¼š <a href="https://rinkeby.etherscan.io/address/0xb335Fc61D759C041503dC17266575229E593DE17" target="_blank" rel="noopener">https://rinkeby.etherscan.io/address/0xb335Fc61D759C041503dC17266575229E593DE17</a></li>
</ul>
<p>å¹¶ä¸”éƒ¨ç½²å®Œæˆäº†åˆå§‹åŒ–ä»£å¸åˆ†å‘å’Œæ‰€æœ‰æƒè½¬æ¢ã€‚è¯¦æƒ…å¯ä»¥æŸ¥çœ‹éƒ¨ç½²è´¦æˆ·ä¿¡æ¯ï¼š <a href="https://rinkeby.etherscan.io/address/0xccb20d43f62f31dd94436f04a1e90d7d08569e57" target="_blank" rel="noopener">https://rinkeby.etherscan.io/address/0xccb20d43f62f31dd94436f04a1e90d7d08569e57</a>ã€‚</p>
<h2><span id="liu-fa-bu">å…­ã€å‘å¸ƒ</span></h2>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†å‘å¸ƒæˆ‘ä»¬çš„å‰ç«¯é¡¹ç›®åˆ° Surge ï¼ˆæˆ–è€…ä½¿ç”¨ s3ï¼Œ ipfs ä¸Šï¼‰ã€‚<a href="http://Surge.sh" target="_blank" rel="noopener">Surge.sh</a> æä¾›äº†å…è´¹çš„ç½‘ç«™çš„éƒ¨ç½²ï¼Œå¯¹äºæˆ‘ä»¬çš„æµ‹è¯•ç½‘ç«™æ¥æ—¶å†åˆé€‚ä¸è¿‡ã€‚</p>
<ol>
<li>ç¼–è¯‘å‰ç«¯é¡¹ç›®ï¼š <code>yarn build</code></li>
<li>å°†é¡¹ç›®å‘å¸ƒåˆ° surge ä¸Šï¼š <code>yarn surge</code></li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ yarn surge</span><br><span class="line"></span><br><span class="line">   Welcome to surge! (surge.sh)</span><br><span class="line">   Login (or create surge account) by entering email &amp; password.</span><br><span class="line"></span><br><span class="line">          email: qwh005007@gmail.com</span><br><span class="line">       password: </span><br><span class="line"></span><br><span class="line">   Running as qwh005007@gmail.com (Student)</span><br><span class="line"></span><br><span class="line">        project: ./dist</span><br><span class="line">         domain: qiwihui-scaffold-2.surge.sh</span><br><span class="line">         upload: [====================] 100% eta: 0.0s (83 files, 16080214 bytes)</span><br><span class="line">            CDN: [====================] 100%</span><br><span class="line">     encryption: *.surge.sh, surge.sh (57 days)</span><br><span class="line">             IP: 138.197.235.123</span><br><span class="line"></span><br><span class="line">   Success! - Published to qiwihui-scaffold-2.surge.sh</span><br></pre></td></tr></table></figure>
<p>Surge åœ¨è¿è¡Œå‘½ä»¤çš„è¿‡ç¨‹ä¸­å°±è®¾ç½®äº†è´¦æˆ·åç§°ï¼Œä»¥åŠå¯ä»¥è‡ªå®šä¹‰åŸŸåï¼š<a href="http://qiwihui-scaffold-2.surge.sh" target="_blank" rel="noopener">qiwihui-scaffold-2.surge.sh</a>ï¼Œå½“å®Œæˆéƒ¨ç½²ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨æµè§ˆå™¨ä¸­è®¿é—®è¿™ä¸ªé¡µé¢ï¼Œå’Œæˆ‘ä»¬æœ¬åœ°è¿è¡Œçš„ç»“æœæ˜¯ä¸€è‡´çš„ã€‚</p>
<h2><span id="qi-he-yue-yan-zheng">ä¸ƒã€åˆçº¦éªŒè¯</span></h2>
<p>å½“æˆ‘ä»¬å‘æµ‹è¯•ç½‘ç»œéƒ¨ç½²åˆçº¦æ—¶ï¼Œéƒ¨ç½²çš„æ˜¯åˆçº¦ç¼–è¯‘ä¹‹åçš„å­—èŠ‚ç ï¼Œåˆçº¦æºç ä¸ä¼šå‘å¸ƒã€‚å®é™…ç”Ÿäº§ä¸­ï¼Œæœ‰æ—¶æˆ‘ä»¬éœ€è¦å‘å¸ƒæˆ‘ä»¬çš„æºä»£ç ï¼Œä»¥ä¿è¯æˆ‘ä»¬çš„ä»£ç çœŸå®å¯ä¿¡ã€‚æ­¤æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥å€ŸåŠ© etherscan æä¾›çš„åŠŸèƒ½è¿›è¡ŒéªŒè¯ã€‚</p>
<ol>
<li>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬è·å– etherscan çš„ API keyï¼Œåœ°å€ä¸º <a href="https://etherscan.io/myapikey" target="_blank" rel="noopener">https://etherscan.io/myapikey</a>ï¼Œæ¯”å¦‚ <code>PSW8C433Q667DVEX5BCRMGNAH9FSGFZ7Q8</code> ï¼›</p>
</li>
<li>
<p>æ›´æ–° <code>packages/hardhat-ts/package.json</code> ä¸­å¯¹åº”çš„ api-key å‚æ•°ï¼š</p>
 <figure class="highlight"><table><tr><td class="code"><pre><span class="line">...</span><br><span class="line">    "send": "hardhat send",</span><br><span class="line">    "generate": "hardhat generate",</span><br><span class="line">    "account": "hardhat account",</span><br><span class="line">    "etherscan-verify": "hardhat etherscan-verify --api-key PSW8C433Q667DVEX5BCRMGNAH9FSGFZ7Q8"</span><br><span class="line">  &#125;,</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
</li>
</ol>
<ol start="3">
<li>
<p>ç”±äºé¡¹ç›®ä¸­çš„ä¸€ä¸ª bugï¼Œéœ€è¦åœ¨æ ¹ç›®å½•ä¸‹çš„ <code>packages.json</code> ä¸­æ·»åŠ ä»¥ä¸‹å‘½ä»¤æ‰èƒ½ç›´æ¥ä½¿ç”¨ä¹‹åçš„å‘½ä»¤ï¼š</p>
 <figure class="highlight"><table><tr><td class="code"><pre><span class="line">"verify": "yarn workspace @scaffold-eth/hardhat etherscan-verify",</span><br></pre></td></tr></table></figure>
</li>
</ol>
<ol start="4">
<li>
<p>è¿è¡Œ <code>yarn verify --network rinkeby</code> ï¼Œè¿™ä¸ªå‘½ä»¤å°†é€šè¿‡ etherscan æ¥å£è¿›è¡Œåˆçº¦éªŒè¯ï¼Œè¾“å‡ºç»“æœä¸ºï¼š</p>
 <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ yarn verify --network rinkeby</span><br><span class="line">verifying Vendor (0xb335Fc61D759C041503dC17266575229E593DE17) ...</span><br><span class="line">waiting <span class="keyword">for</span> result...</span><br><span class="line"> =&gt; contract Vendor is now verified</span><br><span class="line">verifying YourToken (0x0F0D10eF3589cE896E9E54E09568cB7a5371e398) ...</span><br><span class="line">waiting <span class="keyword">for</span> result...</span><br><span class="line"> =&gt; contract YourToken is now verified</span><br></pre></td></tr></table></figure>
</li>
</ol>
<ol start="5">
<li>
<p>éªŒè¯å®Œæˆåï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ° etherscan ä¸­çš„åˆçº¦é¡µé¢å·²ç»åŠ ä¸Šäº†ä¸€ä¸ªè“è‰²å°é’©ï¼Œåœ¨åˆçº¦ä¸­ï¼Œä¹Ÿå¯ä»¥çœ‹åˆ°æˆ‘ä»¬åˆçº¦çš„æºä»£ç ï¼š</p>
<p><img src="https://user-images.githubusercontent.com/3297411/155913533-362162f2-eede-47f6-9c97-6f6e34bc9a70.png" alt="contractVerified"></p>
</li>
</ol>
<p>è‡³æ­¤ï¼Œæˆ‘ä»¬å°±å®Œæˆäº†åˆçº¦çš„éªŒè¯ã€‚</p>
<h2><span id="ba-ti-jiao-jie-guo">å…«ã€æäº¤ç»“æœ</span></h2>
<p>æœ€åï¼Œå½“æˆ‘ä»¬å®Œæˆä¸Šè¿°çš„æ‰€æœ‰æ­¥éª¤ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥å°†æˆ‘ä»¬çš„ç»“æœæäº¤åˆ° <a href="https://speedrunethereum.com/" target="_blank" rel="noopener">speedrunethereum.com</a> ä¸Šï¼Œé€‰æ‹©å¯¹åº”çš„æŒ‘æˆ˜ï¼Œå¹¶æäº¤éƒ¨ç½²çš„å‰ç«¯åœ°å€å’Œæ‰¿é”€å•†åˆçº¦çš„é“¾æ¥å³å¯ï¼š</p>
<p><img src="https://user-images.githubusercontent.com/3297411/155913539-e7c60b5c-261d-488d-a517-0218bf415aa5.png" alt="submitChallenge"></p>
<p>Congratulations! ä½ å·²ç»å®Œæˆäº†è¿™ä¸ªæ•™ç¨‹</p>
<h2><span id="zong-jie">æ€»ç»“</span></h2>
<p>é€šè¿‡ç¯‡æ•™ç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥å­¦ä¹ åˆ°å¦‚ä¸‹å†…å®¹ï¼š</p>
<ol>
<li>åˆçº¦ <code>approve</code> å’Œ <code>transferFrom</code> çš„ä½¿ç”¨ï¼›</li>
<li>å¦‚ä½•ä½¿ç”¨ OpenZeppelin åˆ›å»º ERC20 ä»£å¸ï¼›</li>
<li>åˆ›å»ºæ‰¿é”€å•†åˆçº¦å®ç°ç”¨æˆ·å¯¹ä»£å¸çš„ä¹°å–ï¼›</li>
<li>åœ¨æµ‹è¯•ç½‘è·¯ Rinkeby ä¸Šéƒ¨ç½²åˆçº¦ï¼›</li>
<li>åœ¨ <a href="http://Surge.sh" target="_blank" rel="noopener">Surge.sh</a> ä¸Šéƒ¨ç½²å‰ç«¯é¡¹ç›®ï¼›</li>
<li>åœ¨ etherscan ä¸ŠæŸ¥çœ‹åˆçº¦ä»¥åŠéªŒè¯åˆçº¦ï¼›</li>
<li>ä»¥åŠå…³äº web3 å¼€å‘çš„çŸ¥è¯†ï¼ŒåŒ…æ‹¬ hardhatï¼Œreact ç­‰ã€‚</li>
</ol>
<h3><span id="comments">Comments</span></h3>
</div><p class="post-tags"><i class="fa fa-tags" aria-hidden="true"></i><a href="/tags/%E5%8C%BA%E5%9D%97%E9%93%BE/">#åŒºå—é“¾</a></p></article></div><div class="post-copyright"><blockquote><p>ç‰ˆæƒå£°æ˜ï¼šæœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank" rel="noopener">ç½²å-ç›¸åŒæ–¹å¼å…±äº« | CC BY-SA 4.0 </a>è®¸å¯åè®®ã€‚</p></blockquote></div><footer><div class="paginator"><a href="/qiwihui-blog-165/" class="prev">PREV</a><a href="/qiwihui-blog-143/" class="next">NEXT</a></div><div id="disqus_thread"></div><script>var disqus_shortname = 'blog-qiwihui-com';
var disqus_identifier = 'qiwihui-blog-155/';
var disqus_title = 'å¦‚ä½•åˆ›å»ºä¸€ä¸ªä»£å¸æ‰¿é”€å•† dApp';
var disqus_url = 'https://qiwihui.com/qiwihui-blog-155/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//blog-qiwihui-com.disqus.com/count.js" async></script><!-- block copyright--></footer></div><script async src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        processEscapes: true,
        processEnvironments: true,
        skipTags: ["script","noscript","style","textarea","code","pre"]
    }
});
</script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-46660488-3",'auto');ga('send','pageview');</script><link rel="stylesheet" href="//cdn.datatables.net/1.10.7/css/jquery.dataTables.min.css" media="screen" type="text/css"><script src="//cdn.datatables.net/1.10.7/js/jquery.dataTables.min.js"></script><script>$(function(){$('.datatable').dataTable( {"order": [[ 0, "desc" ]],"iDisplayLength": -1,"lengthMenu": [[10, 25, 50, -1], [10, 25, 50, "All"]]} );});</script></body></html>